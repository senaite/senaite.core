<div id="senaite-sampleheader"
     i18n:domain="senaite.core">

  <div class="row">
    <div class="col-sm-12">

      <!-- SAMPLE HEADER FORM -->
      <tal:comment condition="python:False">
        <!--
             Note: the `novalidate` attribute is needed to avoid browser validation
             when e.g. the "expected sampling date" has passed and another value
             wants to be changed.

             https://developer.mozilla.org/en-US/docs/Web/Guide/HTML/Constraint_validation
        -->
      </tal:comment>
      <form name="sampleheader_form"
            method="post"
            novalidate
            tal:define="fields python:view.get_header_fields()">
        <!-- Hidden fields -->
        <input type="hidden" name="sampleheader_form_submitted" value="1" />
        <span tal:replace="structure context/@@authenticator/authenticator"/>

        <!-- Prominent fields -->
        <table class="table table-sm table-borderless border border-light rounded table-responsive">
          <tr tal:repeat="field python:fields['prominent']">
            <td class="bg-light">
              <span class="align-middle font-weight-bold"
                    tal:content="python:field.widget.label">
              </span>
            </td>
            <td>
              <span>
                  <metal:field use-macro="python:context.widget(field.getName(), mode='view')"/>
              </span>
            </td>
          </tr>
        </table>

        <!-- Other fields -->
        <table class="table table-sm table-borderless border border-light rounded table-responsive">
          <tr tal:repeat="group python:view.grouper(fields['visible'], 3)">
            <tal:field tal:repeat="field python:group">
              <td class="bg-light">
                <span class="align-middle font-weight-bold"
                      tal:attributes="title python:field.widget.description"
                      tal:content="python:field.widget.label">
                </span>
              </td>
              <td>
                <span>
                  <metal:field use-macro="python:context.widget(field.getName(), mode='view')"/>
                </span>
              </td>
            </tal:field>
          </tr>
        </table>

        <!-- Save Button -->
        <input tal:condition="view/is_edit_allowed"
               class="btn btn-sm btn-primary mt-2"
               type="submit"
               name="form.button.save"
               value="Save"
               i18n:attributes="value label_save;"/>
      </form>


    </div>
  </div>

</div>
