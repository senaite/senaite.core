function ARTemplateEditView(){var i=$("#archetypes-fieldname-SamplePoint #SamplePoint"),e=$("#archetypes-fieldname-SampleType #SampleType"),n=$("#archetypes-fieldname-AnalysisProfile #AnalysisProfile");function t(t){if($('[name^="uids\\:list"]').filter(":checked").length<1&&!n.val())return window.bika.lims.portalMessage("No analyses have been selected"),window.scroll(0,0),!1}this.load=function(){$(".portaltype-artemplate input[name$='save']").addClass("allowMultiSubmit"),$(".portaltype-artemplate input[name$='save']").click(t),function(){var t={};{var e;t=0<document.location.href.search("/clients/")?(e=document.location.href.split("clients")[1].split("/")[1],{portal_type:"Client",id:e,include_fields:["UID"]}):{portal_type:"BikaSetup",include_fields:["UID"]}}window.bika.lims.jsonapi_read(t,function(t){t.objects&&t.objects.length<1||((t=t.objects[0]).UID,$(i).attr("search_query",JSON.stringify({getClientUID:t.UID})),referencewidget_lookups([$(i)]))})}(),$(i).bind("selected blur change",function(){var t=$(i).val()?$(i).attr("uid"):"";$(e).attr("search_query",JSON.stringify({getRawSamplePoints:t})),referencewidget_lookups([$(e)])}),$(e).bind("selected blur change",function(){var t=$(e).val()?$(e).attr("uid"):"";$(i).attr("search_query",JSON.stringify({getRawSampleTypes:t})),referencewidget_lookups([$(i)])})}}function BatchFolderView(){this.load=function(){$(".portaltype-batchfolder").append("<div id='batch-cancel-dialog' title='"+_t("Cancel batch/es?")+"'>    <p style='padding:10px'>        <span class='ui-icon ui-icon-alert' style=''float: left; margin: 0 7px 30px 0;'><br/></span>        "+_t("All linked Samples will be cancelled too.")+"    </p>    <p style='padding:0px 10px'>       "+_t("Are you sure?")+"    </p></div><input id='batch-cancel-resp' type='hidden' value='false'/>"),$("#batch-cancel-dialog").dialog({autoOpen:!1,resizable:!1,height:200,width:400,modal:!0,buttons:{"Cancel selected batches":function(){$(this).dialog("close"),$("#batch-cancel-resp").val("true"),$(".portaltype-batchfolder #cancel_transition").click()},Cancel:function(){$("#batch-cancel-resp").val("false"),$(this).dialog("close")}}}),$("#cancel_transition").click(function(t){return!!$(".bika-listing-table input[type='checkbox']:checked").length&&("true"==$("#batch-cancel-resp").val()||(t.preventDefault(),$("#batch-cancel-dialog").dialog("open"),!1))})}}function BikaSetupEditView(){var t=$("#archetypes-fieldname-RestrictWorksheetUsersAccess #RestrictWorksheetUsersAccess"),e=$("#archetypes-fieldname-RestrictWorksheetManagement #RestrictWorksheetManagement");this.load=function(){$('input[id^="Prefixes-separator-"]').each(function(){!function(t){var e=t.value,i=t.id,n=["","-","_"],a='<select id="'+i+'"></select>';$(t).after(a),$(t).hide();for(var r=0;r<n.length;r++){var o="selected",o="<option "+(o=n[r]!=e?"":o)+" value="+n[r]+">"+n[r]+"</option>";$("select#"+i).append(o)}}(this)}),$('select[id^="Prefixes-separator-"]').bind("select change",function(){var t=$(this).val(),e=$(this).attr("id");$("input#"+e).val(t)}),$(t).change(function(){$(this).is(":checked")?($(e).prop("checked",!0),$(e).click(function(t){t.preventDefault()})):$(e).unbind("click")}),1==$("select[name=NumberOfRequiredVerifications] option:selected").val()&&(document.getElementById("archetypes-fieldname-TypeOfmultiVerification").style.display="none"),$("#NumberOfRequiredVerifications").change(function(){1<$(this).val()?document.getElementById("archetypes-fieldname-TypeOfmultiVerification").style.display="block":document.getElementById("archetypes-fieldname-TypeOfmultiVerification").style.display="none"}),$(t).change()}}function CalculationEditView(){this.load=function(){$("#TestParameters_more").hide(),$("#Formula").live("change",function(t){var r=[];$.each($("[id^=TestParameters-keyword]"),function(t,e){r.push($(e).val())});var e=$("#Formula").val().match(/\[[^\]]*\]/gi);$.each(e,function(t,e){var i,n,a;e=e.replace("[","").replace("]",""),-1==r.indexOf(e)&&(a=$(".records_row_TestParameters"),i=$(a[a.length-1]),n=a.length.toString(),a=$(i).clone(!0),$(a).find("[id^=TestParameters-keyword]").val(e),$(a).find("[id^=TestParameters-keyword]").attr("id","TestParameters-keyword-"+n),$(a).find("[id^=TestParameters-value]").attr("id","TestParameters-value-"+n),$(a).insertBefore(i))})})}}function ClientEditView(){var e="#archetypes-fieldname-DecimalMark",i="#DefaultDecimalMark";this.load=function(){function t(t){t.is(":checked")?$(e).fadeOut().hide():$(e).fadeIn()}t($(i)),$(i).click(function(){t($(this))})}}function ClientOverlayHandler(){this.load=function(){},this.onLoad=function(t){$.ajax({url:"bika_widgets/addresswidget.js",dataType:"script",async:!1})}}function CommonUtils(){this.load=function(){window.bika=window.bika||{lims:{}},window.bika.lims.AnalysisService=window.bika.lims.AnalysisService||{Dependants:function(t){var t={catalog_name:"senaite_catalog_setup",UID:t,include_methods:"getServiceDependantsUIDs"},e={};return $.ajaxSetup({async:!1}),window.bika.lims.jsonapi_read(t,function(t){e=null!=t.objects&&0<t.objects.length?t.objects[0].getServiceDependantsUIDs:[]}),$.ajaxSetup({async:!0}),e},Dependencies:function(t){var t={catalog_name:"senaite_catalog_setup",UID:t,include_methods:"getServiceDependenciesUIDs"},e={};return $.ajaxSetup({async:!1}),window.bika.lims.jsonapi_read(t,function(t){e=null!=t.objects&&0<t.objects.length?t.objects[0].getServiceDependenciesUIDs:[]}),$.ajaxSetup({async:!0}),e}},window.bika.lims.portalMessage=function(t){t="<dl class='portalMessage error alert alert-danger'><dt>"+_t("Error")+"</dt><dd><ul>"+t+"</ul></dd></dl>";$(".portalMessage").remove(),$(t).appendTo("#viewlet-above-content")},window.bika.lims.log=function(t){null!=window.location.url&&null!=window.location.url&&(t="("+window.location.url+"): "+t,$.ajax({type:"POST",url:"js_log",data:{message:t,_authenticator:$("input[name='_authenticator']").val()}}))},window.bika.lims.warning=function(t){t="("+window.location.href+"): "+t;$.ajax({type:"POST",url:"js_warn",data:{message:t,_authenticator:$("input[name='_authenticator']").val()}})},window.bika.lims.error=function(t){t="("+window.location.href+"): "+t;$.ajax({type:"POST",url:"js_err",data:{message:t,_authenticator:$("input[name='_authenticator']").val()}})},window.bika.lims.jsonapi_cache={},window.bika.lims.jsonapi_read=function(t,e){window.bika.lims.jsonapi_cache=window.bika.lims.jsonapi_cache||{},null==t.page_size&&(t.page_size=0);var i=$.param(t),n=e;void 0===window.bika.lims.jsonapi_cache[i]?$.ajax({type:"POST",dataType:"json",url:window.portal_url+"/@@API/read",data:t,success:function(t){window.bika.lims.jsonapi_cache[i]=t,n(t)}}):n(window.bika.lims.jsonapi_cache[i])},window.bika.lims.update_combogrid_query=function(t,e,i,n){var a,r;$(t).is(":visible")&&(n=n||"base_query",r=jQuery.parseJSON($(t).attr(n)),i&&(r[e]=i),""===i&&r[e]&&delete r[e],$(t).attr(n,JSON.stringify(r)),(a=jQuery.parseJSON($(t).attr("combogrid_options"))).url=window.portal_url+"/"+a.url,a.url=a.url+"?_authenticator="+$("input[name='_authenticator']").val(),a.url=a.url+"&catalog_name="+$(t).attr("catalog_name"),a.url=a.url+"&base_query="+encodeURIComponent($(t).attr("base_query")),a.url=a.url+"&search_query="+encodeURIComponent($.toJSON(r)),i=a.colModel,e=a.search_fields,n=a.discard_empty,r=a.minLength,a.url=a.url+"&colModel="+$.toJSON(i),a.url=a.url+"&search_fields="+$.toJSON(e),a.url=a.url+"&discard_empty="+$.toJSON(n),a.url=a.url+"&minLength="+$.toJSON(r),a.force_all="false",$(t).combogrid(a))},$(".ArchetypesPrioritySelectionWidget select").change(function(t){var e=$(this).find("option:selected").val();$(this).attr("value",e)}),$(".ArchetypesPrioritySelectionWidget select").change()},this.svgToImage=function(t){return'<img src="'+("data:image/svg+xml;base64,"+btoa(t))+'"/>'}}function DepartmentLabContactsView(){this.load=function(){$("table.bika-listing-table td input[type='checkbox']").not('[type="hidden"]').each(function(t){$(this).change(function(){var t,e,i,n;t=this,n={},e=$(t).prop("checked"),i=$(t).val(),url=window.location.href.replace("/labcontacts",""),t=url.replace(window.portal_url,""),n.contact_uid=i,n.checkbox_value=e,n.department=t,function(t){var e=$('tr[uid="'+t.contact_uid+'"] td.Fullname a').attr("href"),i=$('tr[uid="'+t.contact_uid+'"] td.Fullname a').text(),n="<a href='"+e+"'>"+i+"</a>";$.ajax({type:"POST",dataType:"json",url:window.location.href.replace("/labcontacts","")+"/labcontactupdate",data:{data:JSON.stringify(t)}}).done(function(t){null!==t&&!0===t.success?bika.lims.SiteView.notificationPanel(n+" updated successfully","succeed"):(bika.lims.SiteView.notificationPanel("Failure while updating "+n,"error"),t="[bika.lims.department.js in DepartmentLabContactsView] Failure while updating "+i+"in "+window.location.href,window.bika.lims.error(t))}).fail(function(){bika.lims.SiteView.notificationPanel("Error while updating "+n,"error");var t="[bika.lims.department.js in DepartmentLabContactsView] Error while updating "+i+"in "+window.location.href;window.bika.lims.error(t)})}(n)})})}}function ControlChart(){var f=this;this.setData=function(t){f.datasource=t},this.setXColumn=function(t){f.xcolumnkey=t},this.setYColumn=function(t){f.ycolumnkey=t},this.setYLabel=function(t){f.ylabel=t},this.setXLabel=function(t){f.xlabel=t},this.setUpperLimit=function(t){f.upperlimit=t},this.setLowerLimit=function(t){f.lowerlimit=t},this.setCenterLimit=function(t){f.centerlimit=t},this.setUpperLimitText=function(t){f.upperlimit_text=t},this.setLowerLimitText=function(t){f.lowerlimit_text=t},this.setCenterLimitText=function(t){f.centerlimit_text=t},this.setInterpolation=function(t){f.interpolation=t},this.setPointId=function(t){f.pointid=t},this.draw=function(t){var e=20,i=20,n=30,a=30,r=(r=$(t).innerWidth()-20)-a-i,l=(l=$(t).innerHeight()-20)-e-n,s=d3.time.scale().range([0,r]),c=d3.scale.linear().range([l,0]),d=d3.svg.axis().scale(s).orient("bottom").tickSize(0),u=d3.svg.axis().scale(c).orient("left").tickSize(0),h=d3.svg.line().interpolate(f.interpolation).x(function(t){return s(t.x_axis)}).y(function(t){return c(t.y_axis)}),p=d3.select(t).append("svg").attr("xmlns","http://www.w3.org/2000/svg").attr("width",r+a+i).attr("height",l+e+n).append("g").attr("transform","translate("+a+","+e+")");x_data_parse=d3.time.format("%Y-%m-%d %I:%M %p").parse,f.datasource.forEach(function(t){var e;t.x_axis=x_data_parse(t[f.xcolumnkey]),t.y_axis=(e=t[f.ycolumnkey])&&"string"==typeof o?+e:e,t.point_id=t[f.pointid]}),f.datasource.sort(function(t,e){return t.x_axis-e.x_axis}),s.domain(d3.extent(f.datasource,function(t){return t.x_axis}));a=d3.min(f.datasource,function(t){return t.y_axis});a>f.lowerlimit&&(a=f.lowerlimit);e=d3.max(f.datasource,function(t){return t.y_axis});e<f.upperlimit&&(e=f.upperlimit),c.domain([a,e]),p.append("g").attr("class","x axis").attr("transform","translate(0,"+l+")").call(d).style("font-size","11px").append("text").attr("x",r).attr("dy","-0.71em").attr("text-anchor","end").text(f.xlabel),p.append("g").attr("class","y axis").call(u).style("font-size","11px").append("text").attr("transform","rotate(-90)").attr("y",6).attr("dy",".71em").style("text-anchor","end").text(f.ylabel),p.append("path").datum(f.datasource).attr("stroke","#4682b4").attr("stroke-width","1.5px").attr("fill","none").attr("class","line").attr("d",h),f.datasource.forEach(function(t){p.append("g").attr("fill","#2f2f2f").append("circle").attr("id",t.point_id).attr("r",3).attr("cx",s(t.x_axis)).attr("cy",c(t.y_axis)).on("mouseout",function(){d3.select(this).attr("fill","#2f2f2f").attr("r",3),d3.select(this.parentNode.children[1]).remove()}).on("mouseover",function(){d3.select(this).attr("fill","#4682b4").attr("r",6),d3.select(this.parentNode).append("text").attr("fill","#000000").style("font-size","10px").attr("x",s(t.x_axis)-10).attr("y",c(t.y_axis)-10).text(t.y_axis+f.ylabel)}).on("click",function(){d3.select(this).attr("fill","#4682b4").attr("r",6),d3.select(this.parentNode).append("text").attr("fill","#000000").style("font-size","10px").attr("x",s(t.x_axis)-10).attr("y",c(t.y_axis)-10).text(t.y_axis+f.ylabel)})}),p.append("line").attr("stroke","#8e0000").attr("stroke-width","1px").attr("stroke-dasharray","5, 5").attr({x1:0,y1:c(f.upperlimit),x2:r,y2:c(f.upperlimit)}),p.append("text").attr({x:30,y:c(f.upperlimit)-5}).style("font-size","11px").text(f.upperlimit_text),p.append("line").attr("stroke","#8e0000").attr("stroke-width","1px").attr("stroke-dasharray","5, 5").attr({x1:0,y1:c(f.lowerlimit),x2:r,y2:c(f.lowerlimit)}),p.append("text").attr({x:30,y:c(f.lowerlimit)-5}).style("font-size","11px").text(f.lowerlimit_text),p.append("line").attr("stroke","#598859").attr("stroke-width","1px").attr({x1:0,y1:c(f.centerlimit),x2:r,y2:c(f.centerlimit)}),p.append("text").attr({x:30,y:c(f.centerlimit)-5}).style("font-size","11px").text(f.centerlimit_text)}}function RangeGraph(){this.load=function(){$(".range-chart").each(function(t){var e,i,n,a,r,o,l,s,c,d,u,h,p,f,m,_,y=Number($(this).css("width").replace(/[^\d\.\-]/g,""));e=$(this).get(0),i=y,n=$.parseJSON($(this).attr("data-range")),a=$.parseJSON($(this).attr("data-result")),(_=function(t,e){if(!$.isNumeric(e))return null;e=parseFloat(e);if(!("min"in t&&"max"in t))return null;var i=$.isNumeric(t.min)?parseFloat(t.min):e,n=$.isNumeric(t.max)?parseFloat(t.max):e;if(i==n)return null;var a=i,r=n;"warn_min"in t&&$.isNumeric(t.warn_min)&&(a=(a=parseFloat(t.warn_min))<i?a:i);"warn_max"in t&&$.isNumeric(t.warn_max)&&(r=parseFloat(t.warn_max),r=n<r?r:n);return{result:e,min:i,max:n,warn_min:a,warn_max:r}}(n,a))&&(i-=o=2*(r=.03*i),l=_.min,s=_.max,c=_.warn_min,d=_.warn_max,a=_.result,f="min_operator"in n?n.min_operator:"geq",p="max_operator"in n?n.max_operator:"leq",h=(d-c)/3,u=a<c?a:c-h,y=d<a?a:d+h,_="gt"==f?l<a:l<=a,n=!1,(_="lt"==p?_&&a<s:_&&a<=s)||(m=(m="lt"==p?s<=a:s<a)&&a<=d,n=("gt"==f?a<=l:a<l)&&c<=a||m),h=_||n?"#a8d6cf":"#cdcdcd",p=_?"#279989":n?"#ffae00":"#ff0000",f=_||n?"#d9e9e6":"#dcdcdc",m=d3.scale.linear().domain([u,y]).range([0,i]),_=d3.select(e).append("svg").attr("xmlns","http://www.w3.org/2000/svg").attr("width",i+2*r).attr("height",o).append("g").attr("transform","translate("+r+",0)"),e=o/2-(n=2*r*.8)/2,i=.9*r,_.append("rect").attr("x",m(u)).attr("y",e).attr("width",m(c)-m(u)+i).attr("height",n).attr("rx",i).attr("ry",i).style("fill","#e9e9e9"),_.append("rect").attr("x",m(c)).attr("y",e).attr("width",m(l)-m(c)).attr("height",n).style("fill",f),_.append("rect").attr("x",m(s)).attr("y",e).attr("width",m(d)-m(s)).attr("height",n).style("fill",f),_.append("rect").attr("x",m(d)-i).attr("y",e).attr("width",m(y)-m(d)+i).attr("height",n).attr("rx",i).attr("ry",i).style("fill","#e9e9e9"),_.append("rect").attr("x",m(l)).attr("y",e).attr("width",m(s)-m(l)).attr("height",n).style("fill",h),_.append("circle").attr("cx",m(a)).attr("cy",o/2).attr("r",r).style("fill","white"),_.append("circle").attr("cx",m(a)).attr("cy",o/2).attr("r",r-1).style("fill",p)),$(this).removeClass("range-chart")})}}function InstrumentCertificationEditView(){function t(){$("#Internal").is(":checked")?$("#archetypes-fieldname-Agency").hide():$("#archetypes-fieldname-Agency").fadeIn("slow")}this.load=function(){$("#Internal").live("change",function(){t()}),t()}}function InstrumentEditView(){this.load=function(){$("#ResultFilesFolder_more").remove();var t=$(".records_row_ResultFilesFolder");for(i=0;i<t.length;i++)(0<i&&i==t.length-1?t[i]:t[i].children[2]).remove()},$("#ImportDataInterface").change(function(){!function(){var t=$("#ResultFilesFolder_table"),e=$(".records_row_ResultFilesFolder"),n=$("#ImportDataInterface").val();if(e.remove(),null==n||1==n.length&&""==n[0]){var a=$(e[e.length-1]).clone();for(i=0;i<$(a).children().length;i++){var r=$(a).children()[i],r=$(r).children()[0];$(r).val("")}$(a).appendTo($(t))}else{for(i=0;i<n.length;i++){var o;""!=n[i]&&(a=$(e[e.length-1]).clone(),o=$(a).children()[0],o=$(o).children()[0],$(o).val(n[i]),o=$(a).children()[1],o=$(o).children()[0],$(o).val(""),$(a).appendTo($(t)))}!function(){$("#ResultFilesFolder_table");var t=$(".records_row_ResultFilesFolder");for(i=0;i<t.length;i++){var e=$(t[i]).find("input[id^='ResultFilesFolder']");for(j=0;j<e.length;j++){var n=e[j].id,n=n.split("-")[0]+"-"+n.split("-")[1];$(e[j]).attr("id",n+"-"+i)}}}()}}()})}function InstrumentReferenceAnalysesView(){function i(t){var n=$("#selqcsample").val();$("#selqcsample option").remove(),$.map(t,function(t,e){var i=e==n?" selected":"";$("#selqcsample").append('<option value="'+e+'"'+i+">"+e+"</option>")})}function n(){var e=(e=$("#selanalyses").val().split("("))[e.length-1].slice(0,-1).trim(),i=$("#selqcsample").val(),n=0;$("div.results-info").remove(),$(".item-listing-tbody tr").each(function(t){$(this).attr("keyword")!=e||$(this).find("td.Partition a").html()!=i?$(this).hide():($(this).fadeIn(),n+=1)}),$(".bika-listing-table").closest("div").before('<div class="results-info">'+n+" results found</div>")}function a(t,e){var i=$("#selanalyses").val(),n=$("#selqcsample").val(),a=$("#interpolation").val();null==t&&$("#chart").innerWidth(),null==e&&$("#chart").innerHeight();$("#chart").css("width",t),$("#chart").css("height",e),$("#chart").html(""),$("#chart").show();var r,o,l,s=$.parseJSON($("#graphdata").val());n in(s=s[i])&&0!=s[n].length?(l=(s=s[n])[s.length-1].unit,r=s[s.length-1].upper,o=s[s.length-1].lower,t=s[s.length-1].target,e="Result",""==l||void 0===l?l="":e=l,i=$.trim("UCL ("+r+l+")"),n=$.trim("LCL ("+o+l+")"),l=$.trim("CL ("+t+l+")"),chart=new ControlChart,chart.setData(s),chart.setInterpolation(a),chart.setXColumn("date"),chart.setYColumn("result"),chart.setPointId("id"),chart.setYLabel(e),chart.setXLabel("Date"),chart.setUpperLimitText(i),chart.setLowerLimitText(n),chart.setCenterLimitText(l),chart.setCenterLimit(t),chart.setUpperLimit(r),chart.setLowerLimit(o),chart.draw("#chart")):$("#chart").hide()}this.load=function(){var e=$.parseJSON($("#graphdata").val());$.map(e,function(t,e){$("#selanalyses").append('<option value="'+e+'">'+e+"</option>")}),$("#selanalyses").val()&&(i(e[$("#selanalyses").val()]),n(),a(null,null)),$("#selanalyses").change(function(t){i(e[$("#selanalyses").val()]),a(null,null),n()}),$("#selqcsample").change(function(t){a(null,null),n()}),$("#interpolation").change(function(t){a(null,null)}),$(".item-listing-tbody tr").mouseover(function(t){var e;""!=$(this).attr("uid")&&($(this).addClass("selected"),e=$(this).attr("uid"),$("#chart svg g circle#"+e).trigger("__onmouseover"))}),$(".item-listing-tbody tr").mouseout(function(t){var e;$(this).removeClass("selected"),""!=$(this).attr("uid")&&(e=$(this).attr("uid"),$("#chart svg g circle#"+e).trigger("__onmouseout"))}),$("#printgraph").click(function(t){t.preventDefault();a(670,$("#chart").attr("height"));var e=window.open("","","left=0,top=0,width=800,height=900,toolbar=0,scrollbars=0,status=0"),i='<link href="'+window.portal_url+'/++resource++bika.lims.css/print-graph.css" type="text/css" rel="stylesheet">',n=$("span.documentFirstHeading").closest("h1").clone(),t=$("#content-core").clone();$(t).prepend(n),$(t).find("#selanalyses").after("<span class='bold'>"+$("#selanalyses").val()+"</span>"),$(t).find("#interpolation").after("<span class='bold'>"+$("#interpolation").val()+"</span>"),$(t).find("#selqcsample").after("<span class='bold'>"+$("#selqcsample").val()+"</span>"),$(t).find("#selanalyses").hide(),$(t).find("#interpolation").hide(),$(t).find("#selqcsample").hide(),e.document.write("<html><head>"+i+"</head><body>"+$(t).html()+"</body></html>"),e.document.close(),e.focus(),e.print(),$("#chart").css("width","100%"),$("#chart").removeAttr("height"),a(null,null),e.close()}),$("div.bika-listing-table-container").fadeIn()}}function ReferenceSampleAnalysesView(){function e(){var e=(e=$("#selanalyses").val().split("("))[e.length-1].slice(0,-1).trim(),i=0;$("div.results-info").remove(),$(".item-listing-tbody tr").each(function(t){$(this).attr("keyword")!=e?$(this).hide():($(this).fadeIn(),i+=1)}),$(".bika-listing-table").closest("div").before('<div class="results-info">'+i+" results found</div>")}function a(t,e){var i=$("#selanalyses").val(),n=$("#selqcsample").val(),a=$("#interpolation").val();null==t&&$("#chart").innerWidth(),null==e&&$("#chart").innerHeight();$("#chart").css("width",t),$("#chart").css("height",e),$("#chart").html(""),$("#chart").show();var r,o,l,s=$.parseJSON($("#graphdata").val());n in(s=s[i])&&0!=s[n].length?(l=(s=s[n])[s.length-1].unit,r=s[s.length-1].upper,o=s[s.length-1].lower,t=s[s.length-1].target,e="Result",""==l||void 0===l?l="":e=l,i=$.trim("UCL ("+r+l+")"),n=$.trim("LCL ("+o+l+")"),l=$.trim("CL ("+t+l+")"),chart=new ControlChart,chart.setData(s),chart.setInterpolation(a),chart.setXColumn("date"),chart.setYColumn("result"),chart.setPointId("id"),chart.setYLabel(e),chart.setXLabel("Date"),chart.setUpperLimitText(i),chart.setLowerLimitText(n),chart.setCenterLimitText(l),chart.setCenterLimit(t),chart.setUpperLimit(r),chart.setLowerLimit(o),chart.draw("#chart")):$("#chart").hide()}this.load=function(){var t=$.parseJSON($("#graphdata").val()),i=!1;$.map(t,function(t,e){$("#selanalyses").append('<option value="'+e+'">'+e+"</option>"),0==i&&($.map(t,function(t,e){$("#selqcsample").val(e)}),i=!0)}),$("#selanalyses").val()&&(e(),a(null,null)),$("#selanalyses").change(function(t){a(null,null),e()}),$("#interpolation").change(function(t){a(null,null)}),$(".item-listing-tbody tr").mouseover(function(t){var e;""!=$(this).attr("uid")&&($(this).addClass("selected"),e=$(this).attr("uid"),$("#chart svg g circle#"+e).trigger("__onmouseover"))}),$(".item-listing-tbody tr").mouseout(function(t){var e;$(this).removeClass("selected"),""!=$(this).attr("uid")&&(e=$(this).attr("uid"),$("#chart svg g circle#"+e).trigger("__onmouseout"))}),$("#printgraph").click(function(t){t.preventDefault(),$("#selanalyses").find("option[selected]").remove(),$("#selanalyses").find('option[value="'+$(selanalyses).val()+'"]').prop("selected",!0);a(670,$("#chart").attr("height"));var e=window.open("","","left=0,top=0,width=800,height=900,toolbar=0,scrollbars=0,status=0"),i='<link href="'+window.portal_url+'/++resource++bika.lims.css/print-graph.css" type="text/css" rel="stylesheet">',n=$("span.documentFirstHeading").closest("h1").clone(),t=$("#content-core").clone();$(t).prepend(n),$(t).find("#selanalyses").after("<span class='bold'>"+$("#selanalyses").val()+"</span>"),$(t).find("#interpolation").after("<span class='bold'>"+$("#interpolation").val()+"</span>"),$(t).find("#selanalyses").hide(),$(t).find("#interpolation").hide(),e.document.write("<html><head>"+i+"</head><body>"+$(t).html()+"</body></html>"),e.document.close(),e.focus(),e.print(),e.close(),$("#chart").css("width","100%"),$("#chart").removeAttr("height"),a(null,null)}),$("div.bika-listing-table-container").fadeIn()}}function RejectionKickOff(){this.load=function(){window.bika.lims.jsonapi_read({catalog_name:"portal_catalog",portal_type:"BikaSetup",include_fields:["RejectionReasons"]},function(t){var e;t.success&&0<t.total_objects&&(void 0!==(e=0<(t=t.objects[0].RejectionReasons).length?t[0].checkbox:e)&&"on"==e||$("a#workflow-transition-reject").closest("li").hide())}),function(){"use strict";{var t,e;0<$("div#archetypes-fieldname-RejectionWidget").length&&($("a#workflow-transition-reject").unbind(),$("a#workflow-transition-reject").bind("click",function(t){t.preventDefault(),$("#semioverlay").show(),$('input[id="RejectionReasons.checkbox"]').click().prop("disabled",!0)}),t=$("#archetypes-fieldname-RejectionWidget").parent("td"),e="<div class='semioverlay-head'>"+$(t).prev("td").html().trim()+"</div>",$("#content").prepend("<div id='semioverlay' style='display:none'> <div class='semioverlay-back'> </div> <div class='semioverlay-panel'> <div class='semioverlay-content'></div> <div class='semioverlay-buttons'> <input type='button' name='semioverlay.reject' value='reject'/> <input type='button' name='semioverlay.cancel' value='cancel'/></div></div></div>"),$("#archetypes-fieldname-RejectionWidget").detach().prependTo("#semioverlay .semioverlay-content"),$(t).hide(),$(e).detach().insertBefore(".semioverlay-content"),$("div#semioverlay input[name='semioverlay.cancel']").bind("click",function(){$("#semioverlay").hide(),$('input[id="RejectionReasons.checkbox"]').prop("checked",!1).prop("disabled",!1),$('input[id="RejectionReasons.checkbox.other"]').prop("checked",!1),$('input[id="RejectionReasons.textfield.other"]').val("");for(var t=$(".rejectionwidget-multiselect").find("option"),e=0;t.length>e;e++)$(t[e]).attr("selected",!1)}),$("div#semioverlay input[name='semioverlay.reject']").bind("click",function(){$("div#semioverlay .semioverlay-panel").fadeOut(),function(){var t={},e=window.location.href.replace("/base_view","").replace("/analyses","").replace("/manage_results","").replace("/not_requested","").replace("/log","").replace(window.portal_url,""),i=$("a#workflow-transition-reject").attr("href");t.obj_path=e;e=function(){var t,e=0,i=[],n=0,a="";if(e=$(".rejectionwidget-checkbox").prop("checked")){e=1;for(var r=$(".rejectionwidget-multiselect").find("option"),o=0;r.length>o;o++)(t=r[o]).selected&&i.push($(t).val());(n=$(".rejectionwidget-checkbox-other").prop("checked"))?(n=1,a=$(".rejectionwidget-input-other").val()):n=0}else e=0;a={checkbox:e,selected:i,checkbox_other:n,other:a};return $.toJSON(a)}();t.RejectionReasons=e;var n="";$.ajax({type:"POST",url:window.portal_url+"/@@API/update",data:t}).done(function(t){var e;null!==t&&!0===t.success?(bika.lims.SiteView.notificationPanel("Rejecting","succeed"),$("body").hasClass("portaltype-sample")?(e=$('input[name="_authenticator"]').val(),$.ajax({url:window.location.href+"/doActionForSample?workflow_action=reject&_authenticator="+e,type:"POST",dataType:"json"}).done(function(t){null!==t&&"true"==t.success?window.location.href=window.location.href:(bika.lims.SiteView.notificationPanel("Error while updating object state","error"),t="[bika.lims.analysisrequest.js] Error while updating object state",window.bika.lims.error(t),$('#semioverlay input[name="semioverlay.cancel"]').click())})):(bika.lims.SiteView.notificationPanel("Rejecting","succeed"),window.location.href=i)):(n=!1===t.success?(bika.lims.SiteView.notificationPanel("Error while rejecting the analysis request. Unsuccesful AJAX call.","error"),"[bika.lims.analysisrequest.js] Error while rejecting the analysis request. Unsuccesful AJAX call."):(bika.lims.SiteView.notificationPanel("Error while rejecting the analysis request. No data returned.","error"),"[bika.lims.analysisrequest.js] Error while rejecting the analysis request. No data returned."),window.bika.lims.error(n),$('#semioverlay input[name="semioverlay.cancel"]').click())}).fail(function(){bika.lims.SiteView.notificationPanel("Error while rejection the analysis request. AJAX POST failed.","error");var t="[bika.lims.analysisrequest.js] Error while rejection the analysis request. AJAX POST failed.";window.bika.lims.error(t),$('#semioverlay input[name="semioverlay.cancel"]').click()})}()}))}}()}}function BarcodeUtils(){this.load=function(){$(".qrcode").each(function(){var t=$(this).data("render")||"div",e=$(this).data("size"),i=$(this).data("code"),n=$(this).data("quiet")||0;let a=$(this).data("text")||"no text";$(this).qrcode({render:t,size:e,code:i,quiet:n,text:a.toString()})}),$(".barcode").each(function(){let t=$(this).data("id")||"deadbeef";var e=$(this).data("code")||"code128",i=$(this).data("barheight")||10,n=$(this).data("addquietzone")||!1,a=$(this).data("showhri")||!1,r=$(this).data("output")||"svg",o=$(this).data("color")||"#000000";$(this).barcode(t.toString(),e,{barHeight:i,addQuietZone:n,showHRI:a,output:r,color:o})})}}function WorksheetPrintView(){function a(){$(".barcode").each(function(){var t=$(this).attr("data-id"),e=$(this).attr("data-code"),i=$(this).attr("data-barHeight"),n=$(this).attr("data-addQuietZone"),a=$(this).attr("data-showHRI");$(this).barcode(t,e,{barHeight:parseInt(i),addQuietZone:Boolean(n),showHRI:Boolean(a)})})}this.load=function(){var e=document.referrer;e?bika.lims.SiteView.setCookie("ws.print.urlback",e):e=(e=bika.lims.SiteView.readCookie("ws.print.urlback"))||portal_url,a(),$("#print_button").click(function(t){t.preventDefault(),window.print()}),$("#cancel_button").click(function(t){t.preventDefault(),location.href=e}),$("#template").change(function(t){var e=window.location.href,i=$(this).val(),n=$("#numcols").val();$("#worksheet-printview").animate({opacity:.2},"slow"),$.ajax({url:e,type:"POST",data:{template:i,numcols:n}}).always(function(t){var e=t,t=$(e).find("#report-style").html();$("#report-style").html(t),e=$(e).find("#worksheet-printview").html(),$("#worksheet-printview").html(e),$("#worksheet-printview").animate({opacity:1},"slow"),a()})}),$("#numcols").change(function(t){var e=window.location.href,i=$(this).val(),n=$("#template").val();$("#worksheet-printview").animate({opacity:.2},"slow"),$.ajax({url:e,type:"POST",data:{template:n,numcols:i}}).always(function(t){var e=t,t=$(e).find("#report-style").html();$("#report-style").html(t),e=$(e).find("#worksheet-printview").html(),$("#worksheet-printview").html(e),$("#worksheet-printview").animate({opacity:1},"slow"),a()})})}}!function(){window.AnalysisRequestView=function(){var t=function(t){var e;t.preventDefault(),e=t.currentTarget.href,0<(t=$("#PublicationSpecification_uid")).length&&(e=e+"&PublicationSpecification="+$(t).val()),window.location.href=e},e=function(){var n=$("#workflow-transition-schedule_sampling").attr("href");n&&$("#workflow-transition-schedule_sampling").click(function(){var t,e=$("#SamplingDate").val(),i=$("#ScheduledSamplingSampler").val();""!==e&&null!=e&&""!==i&&null!=i?window.location.href=n:((t="")!==e&&null!=e||(t+=PMF("${name} is required for this action, please correct.",{name:_("Sampling Date")})),""!==i&&null!=i||(""!==t&&(t+="<br/>"),t+=PMF("${name} is required, please correct.",{name:_("'Define the Sampler for the shceduled'")})),""!==t&&window.bika.lims.portalMessage(t))})},i=function(){$("#interpretationtemplate-insert").click(function(t){var e,i;t.preventDefault(),(t=$("#interpretationtemplate").val())&&1===(e=$('div[id^="ResultsInterpretationDepts-"].active  textarea[id^="ResultsInterpretationDepts-richtext-"]')).length&&(i=e.attr("id"),window.bika.lims.jsonapi_read({catalog_name:"uid_catalog",UID:t,include_fields:["text"]},function(t){if(1===t.objects.length)return t=t.objects[0].text,tinymce.get(i).insertContent(t)}))})};this.load=function(){$("a[id^='workflow-transition']").not("#workflow-transition-schedule_sampling").not("#workflow-transition-sample").click(t),e(),i()}},window.AnalysisRequestViewView=function(){this.load=function(){}},window.AnalysisRequestAnalysesView=function(){this.load=function(){}}}.call(this),function(){function t(t,e){return function(){return t.apply(e,arguments)}}function e(){this.on_toggle_change=t(this.on_toggle_change,this),this.bind_eventhandler=t(this.bind_eventhandler,this),this.load=t(this.load,this)}window.ReportFolderView=(e.prototype.load=function(){return this.bind_eventhandler()},e.prototype.bind_eventhandler=function(){return $("body").on("click","a[id$='_selector']",this.on_toggle_change)},e.prototype.on_toggle_change=function(t){return t.preventDefault(),$(".criteria").toggle(!1),t=t.currentTarget.id.split("_selector")[0],$("[id='"+t+"']").toggle(!0)},e)}.call(this),function(){function t(t,e){return function(){return t.apply(e,arguments)}}function e(){this.on_overlay_panel_click=t(this.on_overlay_panel_click,this),this.on_reference_definition_list_change=t(this.on_reference_definition_list_change,this),this.on_numeric_field_keypress=t(this.on_numeric_field_keypress,this),this.on_numeric_field_paste=t(this.on_numeric_field_paste,this),this.on_at_float_field_keyup=t(this.on_at_float_field_keyup,this),this.on_at_integer_field_keyup=t(this.on_at_integer_field_keyup,this),this.notify_in_panel=t(this.notify_in_panel,this),this.notificationPanel=t(this.notificationPanel,this),this.set_cookie=t(this.set_cookie,this),this.setCookie=t(this.setCookie,this),this.read_cookie=t(this.read_cookie,this),this.readCookie=t(this.readCookie,this),this.log=t(this.log,this),this.portal_alert=t(this.portal_alert,this),this.portalAlert=t(this.portalAlert,this),this.get_authenticator=t(this.get_authenticator,this),this.get_portal_url=t(this.get_portal_url,this),this.init_referencedefinition=t(this.init_referencedefinition,this),this.bind_eventhandler=t(this.bind_eventhandler,this),this.load=t(this.load,this)}window.SiteView=(e.prototype.load=function(){return this.bind_eventhandler(),this.allowed_keys=[8,9,13,35,36,37,39,46,44,60,62,45,69,101,61]},e.prototype.bind_eventhandler=function(){return $("body").on("change","#ReferenceDefinition\\:list",this.on_reference_definition_list_change),$("body").on("keypress",".numeric",this.on_numeric_field_keypress),$("body").on("paste",".numeric",this.on_numeric_field_paste),$("body").on("keyup","input[name*='\\:int'], .ArchetypesIntegerWidget input",this.on_at_integer_field_keyup),$("body").on("keyup","input[name*='\\:float'], .ArchetypesDecimalWidget input",this.on_at_float_field_keyup),$("body").on("click","a.overlay_panel",this.on_overlay_panel_click),$(document).on({ajaxStart:function(){$("body").addClass("loading")},ajaxStop:function(){$("body").removeClass("loading")},ajaxError:function(){$("body").removeClass("loading")}})},e.prototype.init_referencedefinition=function(){if(""!==$("#ReferenceDefinition:list").val())return $("#ReferenceDefinition:list").change()},e.prototype.get_portal_url=function(){return window.portal_url},e.prototype.get_authenticator=function(){return window.site.authenticator()},e.prototype.portalAlert=function(t){return this.portal_alert(t)},e.prototype.portal_alert=function(t){var e=$("#portal-alert");0===e.length?$("#portal-header").append("<div id='portal-alert' style='display:none'><div class='portal-alert-item'>"+t+"</div></div>"):e.append("<div class='portal-alert-item'>"+t+"</div>"),e.fadeIn()},e.prototype.log=function(t){return window.bika.lims.log(t)},e.prototype.readCookie=function(t){return window.site.read_cookie(t)},e.prototype.read_cookie=function(t){return window.site.read_cookie(t)},e.prototype.setCookie=function(t,e){return window.site.set_cookie(t,e)},e.prototype.set_cookie=function(t,e){window.site.set_cookie(t,e)},e.prototype.notificationPanel=function(t,e){return this.notify_in_panel(t,e)},e.prototype.notify_in_panel=function(t,e){$("#panel-notification").remove(),t="<div id='panel-notification' style='display:none'><div class='"+e+"-notification-item'>"+t+"</div></div>",$("div#viewlet-above-content-title").append(t),$("#panel-notification").fadeIn("slow","linear",function(){setTimeout(function(){$("#panel-notification").fadeOut("slow","linear")},3e3)})},e.prototype.on_at_integer_field_keyup=function(t){var t=t.currentTarget,t=$(t);/\D/g.test(t.val())&&t.val(t.val().replace(/\D/g,""))},e.prototype.on_at_float_field_keyup=function(t){var t=t.currentTarget,t=$(t);/[^-.\d]/g.test(t.val())&&t.val(t.val().replace(/[^.\d]/g,""))},e.prototype.on_numeric_field_paste=function(t){var t=t.currentTarget,e=$(t);window.setTimeout(function(){e.val(e.val().replace(",","."))},0)},e.prototype.on_numeric_field_keypress=function(t){var e=t.currentTarget,i=$(e),n=t.which,e=this.allowed_keys.join(",").match(new RegExp(n));!n||48<=n&&n<=57||e?window.setTimeout(function(){i.val(i.val().replace(",","."))},0):t.preventDefault()},e.prototype.on_reference_definition_list_change=function(t){var e=t.currentTarget,i=$(e),t=this.get_authenticator(),e=i.val(),i=i.children(":selected").html();if(""===e)return $("#Blank").prop("checked",!1),$("#Hazardous").prop("checked",!1),void $(".bika-listing-table").load("referenceresults",{_authenticator:t});-1<i.search(_t("(Blank)"))||-1<i.search("(Blank)")?$("#Blank").prop("checked",!0):$("#Blank").prop("checked",!1),-1<i.search(_t("(Hazardous)"))||-1<i.search("(Hazardous)")?$("#Hazardous").prop("checked",!0):$("#Hazardous").prop("checked",!1),$(".bika-listing-table").load("referenceresults",{_authenticator:t,uid:e})},e.prototype.on_overlay_panel_click=function(t){return t.preventDefault(),t=t.currentTarget,$(t).prepOverlay({subtype:"ajax",width:"80%",filter:"#content>*:not(div#portal-column-content)",config:{closeOnClick:!0,closeOnEsc:!0,onBeforeLoad:function(t){return this.getOverlay().draggable()},onLoad:function(t){return t=new Event("DOMContentLoaded",{}),window.document.dispatchEvent(t)}}}),$(t).click()},e)}.call(this),function(){window.AttachmentsUtils=function(){this.load=function(){$("#AttachFile,#Service,#Analysis").change(function(t){var e,i,n=$("#AttachFile").val();void 0===n&&(n=""),void 0===(i=$("#Service").val())&&(i=""),void 0===(e=$("#Analysis").val())&&(e=""),"Service"===this.id&&$("#Analysis").val(""),"Analysis"===this.id&&$("#Service").val(""),""===n||""===i&&""===e?$("#addButton").prop("disabled",!0):$("#addButton").removeAttr("disabled")})}}}.call(this),function(){function t(t,e){return function(){return t.apply(e,arguments)}}function e(){this.on_instrument_change=t(this.on_instrument_change,this),this.on_template_change=t(this.on_template_change,this),this.select_instrument=t(this.select_instrument,this),this.get_template_instrument=t(this.get_template_instrument,this),this.bind_eventhandler=t(this.bind_eventhandler,this),this.load=t(this.load,this)}function i(){this.on_wideinterims_apply_click=t(this.on_wideinterims_apply_click,this),this.on_slot_remarks_click=t(this.on_slot_remarks_click,this),this.on_wideiterims_interims_change=t(this.on_wideiterims_interims_change,this),this.on_wideiterims_analyses_change=t(this.on_wideiterims_analyses_change,this),this.on_instrument_change=t(this.on_instrument_change,this),this.on_layout_change=t(this.on_layout_change,this),this.on_analyst_change=t(this.on_analyst_change,this),this.reload_analyses_listing=t(this.reload_analyses_listing,this),this.get_analyses_listing=t(this.get_analyses_listing,this),this.get_authenticator=t(this.get_authenticator,this),this.get_base_url=t(this.get_base_url,this),this.get_portal_url=t(this.get_portal_url,this),this.ajax_submit=t(this.ajax_submit,this),this.bind_eventhandler=t(this.bind_eventhandler,this),this.load=t(this.load,this)}window.WorksheetFolderView=(e.prototype.load=function(){return this.bind_eventhandler()},e.prototype.bind_eventhandler=function(){return $("body").on("change","select.template",this.on_template_change),$("body").on("change","select.instrument",this.on_instrument_change)},e.prototype.get_template_instrument=function(){var t=$("input.templateinstruments").val();return JSON.parse(t)},e.prototype.select_instrument=function(t){t=$(".instrument").find("option[value='"+t+"']");if(t)return t.prop("selected",!0)},e.prototype.on_template_change=function(t){var t=$(t.currentTarget).val(),t=this.get_template_instrument()[t];return this.select_instrument(t)},e.prototype.on_instrument_change=function(t){if($(t.currentTarget).val())return t=_t("Only the analyses for which the selected instrument is allowed will be added automatically."),bika.lims.SiteView.notify_in_panel(t,"error")},e),window.WorksheetManageResultsView=(i.prototype.load=function(){return this.bind_eventhandler()},i.prototype.bind_eventhandler=function(){return $("body").on("change",".manage_results_header .analyst",this.on_analyst_change),$("body").on("change","#resultslayout_form #resultslayout",this.on_layout_change),$("body").on("change",".manage_results_header .instrument",this.on_instrument_change),$("body").on("change","#wideinterims_analyses",this.on_wideiterims_analyses_change),$("body").on("change","#wideinterims_interims",this.on_wideiterims_interims_change),$("body").on("click","#wideinterims_apply",this.on_wideinterims_apply_click),$("body").on("click","img.slot-remarks",this.on_slot_remarks_click)},i.prototype.ajax_submit=function(t){var e,i;return null==(t=null==t?{}:t).type&&(t.type="POST"),null==t.url&&(t.url=this.get_base_url()),null==t.context&&(t.context=this),$(this).trigger("ajax:submit:start"),i=this,e=function(){return $(i).trigger("ajax:submit:end")},$.ajax(t).done(e)},i.prototype.get_portal_url=function(){return $("input[name=portal_url]").val()||window.portal_url},i.prototype.get_base_url=function(){var t=window.location.href;return(t=t.split("?")[0]).replace("#","")},i.prototype.get_authenticator=function(){return $("input[name='_authenticator']").val()},i.prototype.get_analyses_listing=function(){return document.querySelector("#analyses_form div.ajax-contents-table")},i.prototype.reload_analyses_listing=function(){var t=this.get_analyses_listing(),e=new Event("reload");return t.dispatchEvent(e)},i.prototype.on_analyst_change=function(t){var e=$(t.currentTarget).val();return""!==e&&(t=this.get_base_url().replace("/manage_results","")+"/set_analyst",this.ajax_submit({url:t,data:{value:e,_authenticator:this.get_authenticator()},dataType:"json"}).done(function(t){return bika.lims.SiteView.notify_in_panel(_p("Changes saved."),"succeed")}).fail(function(){return bika.lims.SiteView.notify_in_panel(_t("Could not set the selected analyst"),"error")}))},i.prototype.on_layout_change=function(t){return $(t.currentTarget)},i.prototype.on_instrument_change=function(t){var e=$(t.currentTarget).val();return""!==e&&(t=this.get_base_url().replace("/manage_results","")+"/set_instrument",this.ajax_submit({url:t,data:{value:e,_authenticator:this.get_authenticator()},dataType:"json"}).done(function(t){return this.reload_analyses_listing()}).fail(function(){return bika.lims.SiteView.notify_in_panel(_t("Unable to apply the selected instrument"),"error")}))},i.prototype.on_wideiterims_analyses_change=function(t){var t=$(t.currentTarget);return $("#wideinterims_interims").html(""),t=t.val(),$("input[id^='wideinterim_"+t+"']").each(function(t,e){var i=$(e).attr("name"),i="<option value='"+$(e).attr("keyword")+"'>"+i+"</option>";return $("#wideinterims_interims").append(i)})},i.prototype.on_wideiterims_interims_change=function(t){var t=$(t.currentTarget),t="#wideinterim_"+$("#wideinterims_analyses").val()+"_"+t.val();return $("#wideinterims_value").val($(t).val())},i.prototype.on_slot_remarks_click=function(t){t=t.currentTarget;return $(t).prepOverlay({subtype:"ajax",filter:"h1,div.remarks-widget",config:{closeOnClick:!0,closeOnEsc:!0,onBeforeLoad:function(t){var e=this.getOverlay();return $("div.pb-ajax>div",e).addClass("container-fluid"),$("h3",e).remove(),$("textarea",e).remove(),$("input",e).remove(),e.draggable()},onLoad:function(t){return $.mask.close()}}}),$(t).click()},i.prototype.on_wideinterims_apply_click=function(t){var i,n,a;return t.preventDefault(),$(t.currentTarget),$("#wideinterims_analyses").val(),t=$("#wideinterims_interims").val(),i=$("#wideinterims_empty").is(":checked"),a=$("#wideinterims_value").val(),n=function(t,e){return Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"value").set.call(t,e),e=new Event("input",{bubbles:!0}),t.dispatchEvent(e)},$("tr td input[column_key='"+t+"']").each(function(t,e){return i&&""!==$(this).val()&&"0"!==$(this).val().match(/\d+/)||n(e,a),!0})},i)}.call(this),window.bika=window.bika||{lims:{}},window.bika.lims.controllers={html:["CommonUtils"],".barcode, .qrcode":["BarcodeUtils"],".range-chart":["RangeGraph"],".attachments":["AttachmentsUtils"],body:["SiteView"],".portaltype-instrument.template-referenceanalyses":["InstrumentReferenceAnalysesView"],".portaltype-instrumentcertification.template-base_edit":["InstrumentCertificationEditView"],".portaltype-instrument.template-base_edit":["InstrumentEditView"],".portaltype-calculation":["CalculationEditView"],".portaltype-bikasetup.template-base_edit":["BikaSetupEditView"],".portaltype-client.template-base_edit":["ClientEditView"],"div.overlay #client-base-edit":["ClientOverlayHandler"],".portaltype-referencesample.template-analyses":["ReferenceSampleAnalysesView"],".portaltype-artemplate.template-base_edit":["ARTemplateEditView"],".portaltype-analysisrequest":["AnalysisRequestView"],".portaltype-analysisrequest:not(.template-ar_add)":["RejectionKickOff"],".portaltype-analysisrequest.template-base_view":["WorksheetManageResultsView","AnalysisRequestViewView","RejectionKickOff"],".portaltype-analysisrequest.template-analyses":["AnalysisRequestAnalysesView"],".portaltype-analysisrequest.template-ar_add":["AnalysisRequestAddView"],"#analysisrequest_add_form":["AnalysisRequestAdd"],".portaltype-batchfolder":["BatchFolderView"],".portaltype-worksheetfolder":["WorksheetFolderView"],".portaltype-worksheet.template-manage_results":["WorksheetManageResultsView"],"#worksheet-printview-wrapper":["WorksheetPrintView"],".template-labcontacts.portaltype-department":["DepartmentLabContactsView"],".portaltype-reportfolder":["ReportFolderView"],".ArchetypesRemarksWidget":["RemarksWidgetView"]},window.bika.lims.loadControllers=function(e,i){var n,t=window.bika.lims.controllers,a=new Array,r=a.length;for(n in t)($(n).length||0<=$.inArray(n,i))&&t[n].forEach(function(t){(1==e||0<=$.inArray(n,i)||$.inArray(t,a)<0)&&(obj=new window[t],obj.load(),window.bika.lims[t]=obj,a.push(t))});return a.length-r},document.addEventListener("DOMContentLoaded",function(t){window.bika.lims.loadControllers(!1,[])});