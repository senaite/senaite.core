{"version":3,"sources":["webpack:///external \"jQuery\"","webpack:///webpack/bootstrap","webpack:///webpack/runtime/compat get default export","webpack:///webpack/runtime/define property getters","webpack:///webpack/runtime/hasOwnProperty shorthand","webpack:///./components/i18n.js","webpack:///./i18n-wrapper.js","webpack:///./components/site.js","webpack:///./components/sidebar.js","webpack:///./senaite.core.js"],"names":["module","exports","jQuery","__webpack_module_cache__","__webpack_require__","moduleId","__webpack_modules__","n","getter","__esModule","d","a","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","self","this","baseUrl","$","attr","currentLanguage","split","length","toUpperCase","storage","catalogs","ttl","Date","now","valueOf","window","localStorage","JSON","e","configure","config","_setCatalog","domain","language","catalog","_storeCatalog","setItem","stringify","getUrl","loadCatalog","undefined","parseInt","getItem","parse","MessageFactory","msgid","keywords","msgstr","regexp","keyword","RegExp","replace","t","_t","i18n","I18N","p","_p","bind","fn","me","apply","arguments","Site","set_cookie","read_cookie","authenticator","auth","val","URLSearchParams","location","search","name","c","ca","i","document","cookie","charAt","substring","indexOf","value","expires","setTime","getTime","toUTCString","assign","tid","maximize","minimize","on_click","on_mouseenter","on_mouseleave","toggle_el","getElementById","addEventListener","el","is_toggled","classList","remove","add","site","cookie_key","toggle","event","clearTimeout","setTimeout","timeout","portal_url","body","dataset","portalUrl","tinymce","init","height","selector","plugins","content_css","sidebar","Sidebar","tooltip","logoff","autoLogoff","logged","contains","max_timeout","logoff_ms","href"],"mappings":"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","file":"main-669a590.js","sourcesContent":["module.exports = jQuery;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tif(__webpack_module_cache__[moduleId]) {\n\t\treturn __webpack_module_cache__[moduleId].exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => module['default'] :\n\t\t() => module;\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop)","/* i18n integration. This is forked from jarn.jsi18n\n *\n * This is a singleton.\n * Configuration is done on the body tag data-i18ncatalogurl attribute\n *     <body data-i18ncatalogurl=\"/plonejsi18n\">\n *\n *  Or, it'll default to \"/plonejsi18n\"\n */\n\nimport $ from \"jquery\";\n\n\nvar I18N = function() {\n  var self = this;\n  self.baseUrl = $('body').attr('data-i18ncatalogurl');\n  self.currentLanguage = $('html').attr('lang') || 'en';\n\n  // Fix for country specific languages\n  if (self.currentLanguage.split('-').length > 1) {\n    self.currentLanguage = self.currentLanguage.split('-')[0] + '_' + self.currentLanguage.split('-')[1].toUpperCase();\n  }\n\n  self.storage = null;\n  self.catalogs = {};\n  self.ttl = 24 * 3600 * 1000;\n\n  // Internet Explorer 8 does not know Date.now() which is used in e.g. loadCatalog, so we \"define\" it\n  if (!Date.now) {\n    Date.now = function() {\n      return new Date().valueOf();\n    };\n  }\n\n  try {\n    if ('localStorage' in window && window.localStorage !== null && 'JSON' in window && window.JSON !== null) {\n      self.storage = window.localStorage;\n    }\n  } catch (e) {}\n\n  self.configure = function(config) {\n    for (var key in config){\n      self[key] = config[key];\n    }\n  };\n\n  self._setCatalog = function (domain, language, catalog) {\n    if (domain in self.catalogs) {\n      self.catalogs[domain][language] = catalog;\n    } else {\n      self.catalogs[domain] = {};\n      self.catalogs[domain][language] = catalog;\n    }\n  };\n\n  self._storeCatalog = function (domain, language, catalog) {\n    var key = domain + '-' + language;\n    if (self.storage !== null && catalog !== null) {\n      self.storage.setItem(key, JSON.stringify(catalog));\n      self.storage.setItem(key + '-updated', Date.now());\n    }\n  };\n\n  self.getUrl = function(domain, language) {\n    return self.baseUrl + '?domain=' + domain + '&language=' + language;\n  };\n\n  self.loadCatalog = function (domain, language) {\n    if (language === undefined) {\n      language = self.currentLanguage;\n    }\n    if (self.storage !== null) {\n      var key = domain + '-' + language;\n      if (key in self.storage) {\n        if ((Date.now() - parseInt(self.storage.getItem(key + '-updated'), 10)) < self.ttl) {\n          var catalog = JSON.parse(self.storage.getItem(key));\n          self._setCatalog(domain, language, catalog);\n          return;\n        }\n      }\n    }\n    if (!self.baseUrl) {\n      return;\n    }\n    $.getJSON(self.getUrl(domain, language), function (catalog) {\n      if (catalog === null) {\n        return;\n      }\n      self._setCatalog(domain, language, catalog);\n      self._storeCatalog(domain, language, catalog);\n    });\n  };\n\n  self.MessageFactory = function (domain, language) {\n    language = language || self.currentLanguage;\n    return function translate (msgid, keywords) {\n      var msgstr;\n      if ((domain in self.catalogs) && (language in self.catalogs[domain]) && (msgid in self.catalogs[domain][language])) {\n        msgstr = self.catalogs[domain][language][msgid];\n      } else {\n        msgstr = msgid;\n      }\n      if (keywords) {\n        var regexp, keyword;\n        for (keyword in keywords) {\n          if (keywords.hasOwnProperty(keyword)) {\n            regexp = new RegExp('\\\\$\\\\{' + keyword + '\\\\}', 'g');\n            msgstr = msgstr.replace(regexp, keywords[keyword]);\n          }\n        }\n      }\n      return msgstr;\n    };\n  };\n};\n\nexport default I18N;\n","import I18N from \"./components/i18n.js\";\n\n// SENAITE message factory\nvar t = null;\nexport var _t = (msgid, keywords) => {\n  if (t === null) {\n    let i18n = new I18N();\n    console.debug(\"*** Loading `senaite.core` i18n MessageFactory ***\");\n    i18n.loadCatalog(\"senaite.core\")\n    t = i18n.MessageFactory(\"senaite.core\")\n  }\n  return t(msgid, keywords);\n}\n\n// Plone message factory\nvar p = null;\nexport var _p = (msgid, keywords) => {\n  if (p === null) {\n    let i18n = new I18N();\n    console.debug(\"*** Loading `plone` i18n MessageFactory ***\");\n    i18n.loadCatalog(\"plone\")\n    p = i18n.MessageFactory(\"plone\")\n  }\n  return p(msgid, keywords);\n}\n","\n/* Please use this command to compile this file into the parent `js` directory:\n    coffee --no-header -w -o ../ -c site.coffee\n */\nvar Site,\n  bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };\n\nSite = (function() {\n\n  /**\n   * Creates a new instance of Site\n   */\n  function Site() {\n    this.set_cookie = bind(this.set_cookie, this);\n    this.read_cookie = bind(this.read_cookie, this);\n    this.authenticator = bind(this.authenticator, this);\n    // console.debug(\"Site::init\");\n  }\n\n\n  /**\n   * Returns the authenticator value\n   */\n\n  Site.prototype.authenticator = function() {\n    var auth, url_params;\n    auth = $(\"input[name='_authenticator']\").val();\n    if (!auth) {\n      url_params = new URLSearchParams(window.location.search);\n      auth = url_params.get(\"_authenticator\");\n    }\n    return auth;\n  };\n\n\n  /**\n   * Reads a cookie value\n   * @param {name} the name of the cookie\n   */\n\n  Site.prototype.read_cookie = function(name) {\n    var c, ca, i;\n    // console.debug(\"Site::read_cookie:\" + name);\n    name = name + '=';\n    ca = document.cookie.split(';');\n    i = 0;\n    while (i < ca.length) {\n      c = ca[i];\n      while (c.charAt(0) === ' ') {\n        c = c.substring(1);\n      }\n      if (c.indexOf(name) === 0) {\n        return c.substring(name.length, c.length);\n      }\n      i++;\n    }\n    return null;\n  };\n\n\n  /**\n   * Sets a cookie value\n   * @param {name} the name of the cookie\n   * @param {value} the value of the cookie\n   */\n\n  Site.prototype.set_cookie = function(name, value) {\n    var d, expires;\n    // console.debug(\"Site::set_cookie:name=\" + name + \", value=\" + value);\n    d = new Date;\n    d.setTime(d.getTime() + 1 * 24 * 60 * 60 * 1000);\n    expires = 'expires=' + d.toUTCString();\n    document.cookie = name + '=' + value + ';' + expires + ';path=/';\n  };\n\n  return Site;\n\n})();\n\nexport default Site;\n","/* SENAITE Sidebar\n *\n * The sidebar shows when the mouse enters and hides when the mouse leaves the\n * HTML element.\n *\n * It keeps open when the toggle button was clicked.\n */\n\nclass Sidebar{\n\n  constructor(config) {\n\n    this.config = Object.assign({\n      \"el\": \"sidebar\",\n      \"toggle_el\": \"sidebar-header\",\n      \"cookie_key\": \"sidebar-toggle\",\n      \"timeout\": 1000,\n    }, config);\n\n    // Timer ID\n    this.tid = null;\n\n    // Bind \"this\" context when called\n    this.maximize = this.maximize.bind(this);\n    this.minimize = this.minimize.bind(this);\n    this.on_click = this.on_click.bind(this);\n    this.on_mouseenter = this.on_mouseenter.bind(this)\n    this.on_mouseleave = this.on_mouseleave.bind(this);\n\n    // toggle button handler\n    this.toggle_el = document.getElementById(this.config.toggle_el);\n    if (this.toggle_el) {\n      this.toggle_el.addEventListener(\"click\", this.on_click);\n    }\n\n    // sidebar view/hide handler\n    this.el = document.getElementById(this.config.el);\n    if (this.el) {\n      this.el.addEventListener(\"mouseenter\", this.on_mouseenter);\n      this.el.addEventListener(\"mouseleave\", this.on_mouseleave);\n\n      if (this.is_toggled()) {\n        this.el.classList.remove(\"minimized\");\n        this.el.classList.add(\"toggled\");\n      }\n    }\n\n    return this;\n  }\n\n  is_toggled() {\n    return window.site.read_cookie(this.config.cookie_key) == \"true\";\n  }\n\n  toggle(toggle=false) {\n    window.site.set_cookie(this.config.cookie_key, toggle)\n    if (toggle) {\n      this.el.classList.add(\"toggled\")\n      this.maximize();\n    } else {\n      this.el.classList.remove(\"toggled\")\n      this.minimize();\n    }\n  }\n\n  minimize() {\n    this.el.classList.add(\"minimized\");\n  }\n\n  maximize() {\n    this.el.classList.remove(\"minimized\");\n  }\n\n  on_click(event) {\n    // console.debug(\"Sidebar::on_click:event=\", event)\n    clearTimeout(this.tid);\n    this.toggle(!this.is_toggled());\n  }\n\n  on_mouseenter(event) {\n    // console.debug(\"Sidebar::on_mouseenter:event=\", event)\n    clearTimeout(this.tid);\n    if (this.is_toggled()) return\n    this.tid = setTimeout(this.maximize, this.config.timeout);\n  }\n\n  on_mouseleave(event) {\n    // console.debug(\"Sidebar::on_mouseleave:event=\", event)\n    clearTimeout(this.tid);\n    if (this.is_toggled()) return\n    this.minimize();\n    // console.debug(\"Clearing sidebar timeout\", this.tid);\n  }\n}\n\nexport default Sidebar;\n","import $ from \"jquery\";\nimport I18N from \"./components/i18n.js\";\nimport {i18n, _t, _p} from \"./i18n-wrapper.js\"\nimport Site from \"./components/site.js\"\nimport Sidebar from \"./components/sidebar.js\"\n\n\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n  console.debug(\"*** SENAITE CORE JS LOADED ***\");\n\n  // Initialize i18n message factories\n  window.i18n = new I18N();\n  window._t = _t;\n  window._p = _p;\n\n  // BBB: set global `portal_url` variable\n  window.portal_url = document.body.dataset.portalUrl\n\n  // TinyMCE\n  tinymce.init({\n    height: 300,\n    selector: \"textarea.mce_editable,div.ArchetypesRichWidget textarea,textarea[name='form.widgets.IRichTextBehavior.text'],textarea.richTextWidget\",\n    plugins: [\"paste\", \"link\", \"fullscreen\", \"table\", \"code\"],\n    content_css : \"/++plone++senaite.core.static/bundles/main.css\",\n  })\n  // /TinyMCE\n\n  // Initialize Site\n  window.site = new Site();\n\n  // Initialize Sidebar\n  window.sidebar = new Sidebar({\n    \"el\": \"sidebar\",\n  });\n\n\n  // Tooltips\n  $(function () {\n    $(\"[data-toggle='tooltip']\").tooltip()\n  })\n  // /Tooltips\n\n  // Auto LogOff\n  var logoff = document.body.dataset.autoLogoff || 0;\n  var logged = document.body.classList.contains(\"userrole-authenticated\");\n  // Max value for setTimeout is a 32 bit integer\n  const max_timeout = 2**31 - 1;\n  if (logoff > 0 && logged) {\n    var logoff_ms = logoff * 60 * 1000;\n    if (logoff_ms > max_timeout) {\n      console.warn(`Setting logoff_ms to max value ${max_timeout}ms`);\n      logoff_ms = max_timeout;\n    }\n    setTimeout(function() {\n      location.href = window.portal_url + \"/logout\";\n    }, logoff_ms);\n  }\n  // /Auto LogOff\n\n});\n"],"sourceRoot":""}