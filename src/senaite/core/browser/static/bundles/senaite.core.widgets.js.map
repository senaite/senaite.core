{"version":3,"file":"senaite.core.widgets.js","mappings":"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","sources":["webpack:///../node_modules/intl-tel-input/build/js/intlTelInput.js","webpack:///../node_modules/intl-tel-input/index.js","webpack:///../node_modules/tinymce/tinymce.js","webpack:///webpack/bootstrap","webpack:///webpack/runtime/compat get default export","webpack:///webpack/runtime/define property getters","webpack:///webpack/runtime/global","webpack:///webpack/runtime/hasOwnProperty shorthand","webpack:///external var \"React\"","webpack:///external var \"ReactDOM\"","webpack:///./api/search.js","webpack:///./widgets/components/SearchField.js","webpack:///external var \"jQuery\"","webpack:///./components/i18n.js","webpack:///./i18n-wrapper.js","webpack:///./widgets/components/SearchResults.js","webpack:///./widgets/components/SelectedValues.js","webpack:///./widgets/queryselect/widget.js","webpack:///./widgets/addresswidget/api.js","webpack:///./widgets/addresswidget/components/LocationSelector.js","webpack:///./widgets/addresswidget/components/AddressField.js","webpack:///./widgets/addresswidget/components/Address.js","webpack:///./widgets/addresswidget/widget.js","webpack:///./senaite.core.widgets.js"],"sourcesContent":["/*\n * International Telephone Input v17.0.19\n * https://github.com/jackocnr/intl-tel-input.git\n * Licensed under the MIT license\n */\n\n// wrap in UMD\n(function(factory) {\n    if (typeof module === \"object\" && module.exports) module.exports = factory(); else window.intlTelInput = factory();\n})(function(undefined) {\n    \"use strict\";\n    return function() {\n        // Array of country objects for the flag dropdown.\n        // Here is the criteria for the plugin to support a given country/territory\n        // - It has an iso2 code: https://en.wikipedia.org/wiki/ISO_3166-1_alpha-2\n        // - It has it's own country calling code (it is not a sub-region of another country): https://en.wikipedia.org/wiki/List_of_country_calling_codes\n        // - It has a flag in the region-flags project: https://github.com/behdad/region-flags/tree/gh-pages/png\n        // - It is supported by libphonenumber (it must be listed on this page): https://github.com/googlei18n/libphonenumber/blob/master/resources/ShortNumberMetadata.xml\n        // Each country array has the following information:\n        // [\n        //    Country name,\n        //    iso2 code,\n        //    International dial code,\n        //    Order (if >1 country with same dial code),\n        //    Area codes\n        // ]\n        var allCountries = [ [ \"Afghanistan (‫افغانستان‬‎)\", \"af\", \"93\" ], [ \"Albania (Shqipëri)\", \"al\", \"355\" ], [ \"Algeria (‫الجزائر‬‎)\", \"dz\", \"213\" ], [ \"American Samoa\", \"as\", \"1\", 5, [ \"684\" ] ], [ \"Andorra\", \"ad\", \"376\" ], [ \"Angola\", \"ao\", \"244\" ], [ \"Anguilla\", \"ai\", \"1\", 6, [ \"264\" ] ], [ \"Antigua and Barbuda\", \"ag\", \"1\", 7, [ \"268\" ] ], [ \"Argentina\", \"ar\", \"54\" ], [ \"Armenia (Հայաստան)\", \"am\", \"374\" ], [ \"Aruba\", \"aw\", \"297\" ], [ \"Ascension Island\", \"ac\", \"247\" ], [ \"Australia\", \"au\", \"61\", 0 ], [ \"Austria (Österreich)\", \"at\", \"43\" ], [ \"Azerbaijan (Azərbaycan)\", \"az\", \"994\" ], [ \"Bahamas\", \"bs\", \"1\", 8, [ \"242\" ] ], [ \"Bahrain (‫البحرين‬‎)\", \"bh\", \"973\" ], [ \"Bangladesh (বাংলাদেশ)\", \"bd\", \"880\" ], [ \"Barbados\", \"bb\", \"1\", 9, [ \"246\" ] ], [ \"Belarus (Беларусь)\", \"by\", \"375\" ], [ \"Belgium (België)\", \"be\", \"32\" ], [ \"Belize\", \"bz\", \"501\" ], [ \"Benin (Bénin)\", \"bj\", \"229\" ], [ \"Bermuda\", \"bm\", \"1\", 10, [ \"441\" ] ], [ \"Bhutan (འབྲུག)\", \"bt\", \"975\" ], [ \"Bolivia\", \"bo\", \"591\" ], [ \"Bosnia and Herzegovina (Босна и Херцеговина)\", \"ba\", \"387\" ], [ \"Botswana\", \"bw\", \"267\" ], [ \"Brazil (Brasil)\", \"br\", \"55\" ], [ \"British Indian Ocean Territory\", \"io\", \"246\" ], [ \"British Virgin Islands\", \"vg\", \"1\", 11, [ \"284\" ] ], [ \"Brunei\", \"bn\", \"673\" ], [ \"Bulgaria (България)\", \"bg\", \"359\" ], [ \"Burkina Faso\", \"bf\", \"226\" ], [ \"Burundi (Uburundi)\", \"bi\", \"257\" ], [ \"Cambodia (កម្ពុជា)\", \"kh\", \"855\" ], [ \"Cameroon (Cameroun)\", \"cm\", \"237\" ], [ \"Canada\", \"ca\", \"1\", 1, [ \"204\", \"226\", \"236\", \"249\", \"250\", \"289\", \"306\", \"343\", \"365\", \"387\", \"403\", \"416\", \"418\", \"431\", \"437\", \"438\", \"450\", \"506\", \"514\", \"519\", \"548\", \"579\", \"581\", \"587\", \"604\", \"613\", \"639\", \"647\", \"672\", \"705\", \"709\", \"742\", \"778\", \"780\", \"782\", \"807\", \"819\", \"825\", \"867\", \"873\", \"902\", \"905\" ] ], [ \"Cape Verde (Kabu Verdi)\", \"cv\", \"238\" ], [ \"Caribbean Netherlands\", \"bq\", \"599\", 1, [ \"3\", \"4\", \"7\" ] ], [ \"Cayman Islands\", \"ky\", \"1\", 12, [ \"345\" ] ], [ \"Central African Republic (République centrafricaine)\", \"cf\", \"236\" ], [ \"Chad (Tchad)\", \"td\", \"235\" ], [ \"Chile\", \"cl\", \"56\" ], [ \"China (中国)\", \"cn\", \"86\" ], [ \"Christmas Island\", \"cx\", \"61\", 2, [ \"89164\" ] ], [ \"Cocos (Keeling) Islands\", \"cc\", \"61\", 1, [ \"89162\" ] ], [ \"Colombia\", \"co\", \"57\" ], [ \"Comoros (‫جزر القمر‬‎)\", \"km\", \"269\" ], [ \"Congo (DRC) (Jamhuri ya Kidemokrasia ya Kongo)\", \"cd\", \"243\" ], [ \"Congo (Republic) (Congo-Brazzaville)\", \"cg\", \"242\" ], [ \"Cook Islands\", \"ck\", \"682\" ], [ \"Costa Rica\", \"cr\", \"506\" ], [ \"Côte d’Ivoire\", \"ci\", \"225\" ], [ \"Croatia (Hrvatska)\", \"hr\", \"385\" ], [ \"Cuba\", \"cu\", \"53\" ], [ \"Curaçao\", \"cw\", \"599\", 0 ], [ \"Cyprus (Κύπρος)\", \"cy\", \"357\" ], [ \"Czech Republic (Česká republika)\", \"cz\", \"420\" ], [ \"Denmark (Danmark)\", \"dk\", \"45\" ], [ \"Djibouti\", \"dj\", \"253\" ], [ \"Dominica\", \"dm\", \"1\", 13, [ \"767\" ] ], [ \"Dominican Republic (República Dominicana)\", \"do\", \"1\", 2, [ \"809\", \"829\", \"849\" ] ], [ \"Ecuador\", \"ec\", \"593\" ], [ \"Egypt (‫مصر‬‎)\", \"eg\", \"20\" ], [ \"El Salvador\", \"sv\", \"503\" ], [ \"Equatorial Guinea (Guinea Ecuatorial)\", \"gq\", \"240\" ], [ \"Eritrea\", \"er\", \"291\" ], [ \"Estonia (Eesti)\", \"ee\", \"372\" ], [ \"Eswatini\", \"sz\", \"268\" ], [ \"Ethiopia\", \"et\", \"251\" ], [ \"Falkland Islands (Islas Malvinas)\", \"fk\", \"500\" ], [ \"Faroe Islands (Føroyar)\", \"fo\", \"298\" ], [ \"Fiji\", \"fj\", \"679\" ], [ \"Finland (Suomi)\", \"fi\", \"358\", 0 ], [ \"France\", \"fr\", \"33\" ], [ \"French Guiana (Guyane française)\", \"gf\", \"594\" ], [ \"French Polynesia (Polynésie française)\", \"pf\", \"689\" ], [ \"Gabon\", \"ga\", \"241\" ], [ \"Gambia\", \"gm\", \"220\" ], [ \"Georgia (საქართველო)\", \"ge\", \"995\" ], [ \"Germany (Deutschland)\", \"de\", \"49\" ], [ \"Ghana (Gaana)\", \"gh\", \"233\" ], [ \"Gibraltar\", \"gi\", \"350\" ], [ \"Greece (Ελλάδα)\", \"gr\", \"30\" ], [ \"Greenland (Kalaallit Nunaat)\", \"gl\", \"299\" ], [ \"Grenada\", \"gd\", \"1\", 14, [ \"473\" ] ], [ \"Guadeloupe\", \"gp\", \"590\", 0 ], [ \"Guam\", \"gu\", \"1\", 15, [ \"671\" ] ], [ \"Guatemala\", \"gt\", \"502\" ], [ \"Guernsey\", \"gg\", \"44\", 1, [ \"1481\", \"7781\", \"7839\", \"7911\" ] ], [ \"Guinea (Guinée)\", \"gn\", \"224\" ], [ \"Guinea-Bissau (Guiné Bissau)\", \"gw\", \"245\" ], [ \"Guyana\", \"gy\", \"592\" ], [ \"Haiti\", \"ht\", \"509\" ], [ \"Honduras\", \"hn\", \"504\" ], [ \"Hong Kong (香港)\", \"hk\", \"852\" ], [ \"Hungary (Magyarország)\", \"hu\", \"36\" ], [ \"Iceland (Ísland)\", \"is\", \"354\" ], [ \"India (भारत)\", \"in\", \"91\" ], [ \"Indonesia\", \"id\", \"62\" ], [ \"Iran (‫ایران‬‎)\", \"ir\", \"98\" ], [ \"Iraq (‫العراق‬‎)\", \"iq\", \"964\" ], [ \"Ireland\", \"ie\", \"353\" ], [ \"Isle of Man\", \"im\", \"44\", 2, [ \"1624\", \"74576\", \"7524\", \"7924\", \"7624\" ] ], [ \"Israel (‫ישראל‬‎)\", \"il\", \"972\" ], [ \"Italy (Italia)\", \"it\", \"39\", 0 ], [ \"Jamaica\", \"jm\", \"1\", 4, [ \"876\", \"658\" ] ], [ \"Japan (日本)\", \"jp\", \"81\" ], [ \"Jersey\", \"je\", \"44\", 3, [ \"1534\", \"7509\", \"7700\", \"7797\", \"7829\", \"7937\" ] ], [ \"Jordan (‫الأردن‬‎)\", \"jo\", \"962\" ], [ \"Kazakhstan (Казахстан)\", \"kz\", \"7\", 1, [ \"33\", \"7\" ] ], [ \"Kenya\", \"ke\", \"254\" ], [ \"Kiribati\", \"ki\", \"686\" ], [ \"Kosovo\", \"xk\", \"383\" ], [ \"Kuwait (‫الكويت‬‎)\", \"kw\", \"965\" ], [ \"Kyrgyzstan (Кыргызстан)\", \"kg\", \"996\" ], [ \"Laos (ລາວ)\", \"la\", \"856\" ], [ \"Latvia (Latvija)\", \"lv\", \"371\" ], [ \"Lebanon (‫لبنان‬‎)\", \"lb\", \"961\" ], [ \"Lesotho\", \"ls\", \"266\" ], [ \"Liberia\", \"lr\", \"231\" ], [ \"Libya (‫ليبيا‬‎)\", \"ly\", \"218\" ], [ \"Liechtenstein\", \"li\", \"423\" ], [ \"Lithuania (Lietuva)\", \"lt\", \"370\" ], [ \"Luxembourg\", \"lu\", \"352\" ], [ \"Macau (澳門)\", \"mo\", \"853\" ], [ \"North Macedonia (Македонија)\", \"mk\", \"389\" ], [ \"Madagascar (Madagasikara)\", \"mg\", \"261\" ], [ \"Malawi\", \"mw\", \"265\" ], [ \"Malaysia\", \"my\", \"60\" ], [ \"Maldives\", \"mv\", \"960\" ], [ \"Mali\", \"ml\", \"223\" ], [ \"Malta\", \"mt\", \"356\" ], [ \"Marshall Islands\", \"mh\", \"692\" ], [ \"Martinique\", \"mq\", \"596\" ], [ \"Mauritania (‫موريتانيا‬‎)\", \"mr\", \"222\" ], [ \"Mauritius (Moris)\", \"mu\", \"230\" ], [ \"Mayotte\", \"yt\", \"262\", 1, [ \"269\", \"639\" ] ], [ \"Mexico (México)\", \"mx\", \"52\" ], [ \"Micronesia\", \"fm\", \"691\" ], [ \"Moldova (Republica Moldova)\", \"md\", \"373\" ], [ \"Monaco\", \"mc\", \"377\" ], [ \"Mongolia (Монгол)\", \"mn\", \"976\" ], [ \"Montenegro (Crna Gora)\", \"me\", \"382\" ], [ \"Montserrat\", \"ms\", \"1\", 16, [ \"664\" ] ], [ \"Morocco (‫المغرب‬‎)\", \"ma\", \"212\", 0 ], [ \"Mozambique (Moçambique)\", \"mz\", \"258\" ], [ \"Myanmar (Burma) (မြန်မာ)\", \"mm\", \"95\" ], [ \"Namibia (Namibië)\", \"na\", \"264\" ], [ \"Nauru\", \"nr\", \"674\" ], [ \"Nepal (नेपाल)\", \"np\", \"977\" ], [ \"Netherlands (Nederland)\", \"nl\", \"31\" ], [ \"New Caledonia (Nouvelle-Calédonie)\", \"nc\", \"687\" ], [ \"New Zealand\", \"nz\", \"64\" ], [ \"Nicaragua\", \"ni\", \"505\" ], [ \"Niger (Nijar)\", \"ne\", \"227\" ], [ \"Nigeria\", \"ng\", \"234\" ], [ \"Niue\", \"nu\", \"683\" ], [ \"Norfolk Island\", \"nf\", \"672\" ], [ \"North Korea (조선 민주주의 인민 공화국)\", \"kp\", \"850\" ], [ \"Northern Mariana Islands\", \"mp\", \"1\", 17, [ \"670\" ] ], [ \"Norway (Norge)\", \"no\", \"47\", 0 ], [ \"Oman (‫عُمان‬‎)\", \"om\", \"968\" ], [ \"Pakistan (‫پاکستان‬‎)\", \"pk\", \"92\" ], [ \"Palau\", \"pw\", \"680\" ], [ \"Palestine (‫فلسطين‬‎)\", \"ps\", \"970\" ], [ \"Panama (Panamá)\", \"pa\", \"507\" ], [ \"Papua New Guinea\", \"pg\", \"675\" ], [ \"Paraguay\", \"py\", \"595\" ], [ \"Peru (Perú)\", \"pe\", \"51\" ], [ \"Philippines\", \"ph\", \"63\" ], [ \"Poland (Polska)\", \"pl\", \"48\" ], [ \"Portugal\", \"pt\", \"351\" ], [ \"Puerto Rico\", \"pr\", \"1\", 3, [ \"787\", \"939\" ] ], [ \"Qatar (‫قطر‬‎)\", \"qa\", \"974\" ], [ \"Réunion (La Réunion)\", \"re\", \"262\", 0 ], [ \"Romania (România)\", \"ro\", \"40\" ], [ \"Russia (Россия)\", \"ru\", \"7\", 0 ], [ \"Rwanda\", \"rw\", \"250\" ], [ \"Saint Barthélemy\", \"bl\", \"590\", 1 ], [ \"Saint Helena\", \"sh\", \"290\" ], [ \"Saint Kitts and Nevis\", \"kn\", \"1\", 18, [ \"869\" ] ], [ \"Saint Lucia\", \"lc\", \"1\", 19, [ \"758\" ] ], [ \"Saint Martin (Saint-Martin (partie française))\", \"mf\", \"590\", 2 ], [ \"Saint Pierre and Miquelon (Saint-Pierre-et-Miquelon)\", \"pm\", \"508\" ], [ \"Saint Vincent and the Grenadines\", \"vc\", \"1\", 20, [ \"784\" ] ], [ \"Samoa\", \"ws\", \"685\" ], [ \"San Marino\", \"sm\", \"378\" ], [ \"São Tomé and Príncipe (São Tomé e Príncipe)\", \"st\", \"239\" ], [ \"Saudi Arabia (‫المملكة العربية السعودية‬‎)\", \"sa\", \"966\" ], [ \"Senegal (Sénégal)\", \"sn\", \"221\" ], [ \"Serbia (Србија)\", \"rs\", \"381\" ], [ \"Seychelles\", \"sc\", \"248\" ], [ \"Sierra Leone\", \"sl\", \"232\" ], [ \"Singapore\", \"sg\", \"65\" ], [ \"Sint Maarten\", \"sx\", \"1\", 21, [ \"721\" ] ], [ \"Slovakia (Slovensko)\", \"sk\", \"421\" ], [ \"Slovenia (Slovenija)\", \"si\", \"386\" ], [ \"Solomon Islands\", \"sb\", \"677\" ], [ \"Somalia (Soomaaliya)\", \"so\", \"252\" ], [ \"South Africa\", \"za\", \"27\" ], [ \"South Korea (대한민국)\", \"kr\", \"82\" ], [ \"South Sudan (‫جنوب السودان‬‎)\", \"ss\", \"211\" ], [ \"Spain (España)\", \"es\", \"34\" ], [ \"Sri Lanka (ශ්‍රී ලංකාව)\", \"lk\", \"94\" ], [ \"Sudan (‫السودان‬‎)\", \"sd\", \"249\" ], [ \"Suriname\", \"sr\", \"597\" ], [ \"Svalbard and Jan Mayen\", \"sj\", \"47\", 1, [ \"79\" ] ], [ \"Sweden (Sverige)\", \"se\", \"46\" ], [ \"Switzerland (Schweiz)\", \"ch\", \"41\" ], [ \"Syria (‫سوريا‬‎)\", \"sy\", \"963\" ], [ \"Taiwan (台灣)\", \"tw\", \"886\" ], [ \"Tajikistan\", \"tj\", \"992\" ], [ \"Tanzania\", \"tz\", \"255\" ], [ \"Thailand (ไทย)\", \"th\", \"66\" ], [ \"Timor-Leste\", \"tl\", \"670\" ], [ \"Togo\", \"tg\", \"228\" ], [ \"Tokelau\", \"tk\", \"690\" ], [ \"Tonga\", \"to\", \"676\" ], [ \"Trinidad and Tobago\", \"tt\", \"1\", 22, [ \"868\" ] ], [ \"Tunisia (‫تونس‬‎)\", \"tn\", \"216\" ], [ \"Turkey (Türkiye)\", \"tr\", \"90\" ], [ \"Turkmenistan\", \"tm\", \"993\" ], [ \"Turks and Caicos Islands\", \"tc\", \"1\", 23, [ \"649\" ] ], [ \"Tuvalu\", \"tv\", \"688\" ], [ \"U.S. Virgin Islands\", \"vi\", \"1\", 24, [ \"340\" ] ], [ \"Uganda\", \"ug\", \"256\" ], [ \"Ukraine (Україна)\", \"ua\", \"380\" ], [ \"United Arab Emirates (‫الإمارات العربية المتحدة‬‎)\", \"ae\", \"971\" ], [ \"United Kingdom\", \"gb\", \"44\", 0 ], [ \"United States\", \"us\", \"1\", 0 ], [ \"Uruguay\", \"uy\", \"598\" ], [ \"Uzbekistan (Oʻzbekiston)\", \"uz\", \"998\" ], [ \"Vanuatu\", \"vu\", \"678\" ], [ \"Vatican City (Città del Vaticano)\", \"va\", \"39\", 1, [ \"06698\" ] ], [ \"Venezuela\", \"ve\", \"58\" ], [ \"Vietnam (Việt Nam)\", \"vn\", \"84\" ], [ \"Wallis and Futuna (Wallis-et-Futuna)\", \"wf\", \"681\" ], [ \"Western Sahara (‫الصحراء الغربية‬‎)\", \"eh\", \"212\", 1, [ \"5288\", \"5289\" ] ], [ \"Yemen (‫اليمن‬‎)\", \"ye\", \"967\" ], [ \"Zambia\", \"zm\", \"260\" ], [ \"Zimbabwe\", \"zw\", \"263\" ], [ \"Åland Islands\", \"ax\", \"358\", 1, [ \"18\" ] ] ];\n        // loop over all of the countries above, restructuring the data to be objects with named keys\n        for (var i = 0; i < allCountries.length; i++) {\n            var c = allCountries[i];\n            allCountries[i] = {\n                name: c[0],\n                iso2: c[1],\n                dialCode: c[2],\n                priority: c[3] || 0,\n                areaCodes: c[4] || null\n            };\n        }\n        \"use strict\";\n        function _classCallCheck(instance, Constructor) {\n            if (!(instance instanceof Constructor)) {\n                throw new TypeError(\"Cannot call a class as a function\");\n            }\n        }\n        function _defineProperties(target, props) {\n            for (var i = 0; i < props.length; i++) {\n                var descriptor = props[i];\n                descriptor.enumerable = descriptor.enumerable || false;\n                descriptor.configurable = true;\n                if (\"value\" in descriptor) descriptor.writable = true;\n                Object.defineProperty(target, descriptor.key, descriptor);\n            }\n        }\n        function _createClass(Constructor, protoProps, staticProps) {\n            if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n            if (staticProps) _defineProperties(Constructor, staticProps);\n            return Constructor;\n        }\n        var intlTelInputGlobals = {\n            getInstance: function getInstance(input) {\n                var id = input.getAttribute(\"data-intl-tel-input-id\");\n                return window.intlTelInputGlobals.instances[id];\n            },\n            instances: {},\n            // using a global like this allows us to mock it in the tests\n            documentReady: function documentReady() {\n                return document.readyState === \"complete\";\n            }\n        };\n        if (typeof window === \"object\") window.intlTelInputGlobals = intlTelInputGlobals;\n        // these vars persist through all instances of the plugin\n        var id = 0;\n        var defaults = {\n            // whether or not to allow the dropdown\n            allowDropdown: true,\n            // if there is just a dial code in the input: remove it on blur\n            autoHideDialCode: true,\n            // add a placeholder in the input with an example number for the selected country\n            autoPlaceholder: \"polite\",\n            // modify the parentClass\n            customContainer: \"\",\n            // modify the auto placeholder\n            customPlaceholder: null,\n            // append menu to specified element\n            dropdownContainer: null,\n            // don't display these countries\n            excludeCountries: [],\n            // format the input value during initialisation and on setNumber\n            formatOnDisplay: true,\n            // geoIp lookup function\n            geoIpLookup: null,\n            // inject a hidden input with this name, and on submit, populate it with the result of getNumber\n            hiddenInput: \"\",\n            // initial country\n            initialCountry: \"\",\n            // localized country names e.g. { 'de': 'Deutschland' }\n            localizedCountries: null,\n            // don't insert international dial codes\n            nationalMode: true,\n            // display only these countries\n            onlyCountries: [],\n            // number type to use for placeholders\n            placeholderNumberType: \"MOBILE\",\n            // the countries at the top of the list. defaults to united states and united kingdom\n            preferredCountries: [ \"us\", \"gb\" ],\n            // display the country dial code next to the selected flag so it's not part of the typed number\n            separateDialCode: false,\n            // specify the path to the libphonenumber script to enable validation/formatting\n            utilsScript: \"\"\n        };\n        // https://en.wikipedia.org/wiki/List_of_North_American_Numbering_Plan_area_codes#Non-geographic_area_codes\n        var regionlessNanpNumbers = [ \"800\", \"822\", \"833\", \"844\", \"855\", \"866\", \"877\", \"880\", \"881\", \"882\", \"883\", \"884\", \"885\", \"886\", \"887\", \"888\", \"889\" ];\n        // utility function to iterate over an object. can't use Object.entries or native forEach because\n        // of IE11\n        var forEachProp = function forEachProp(obj, callback) {\n            var keys = Object.keys(obj);\n            for (var i = 0; i < keys.length; i++) {\n                callback(keys[i], obj[keys[i]]);\n            }\n        };\n        // run a method on each instance of the plugin\n        var forEachInstance = function forEachInstance(method) {\n            forEachProp(window.intlTelInputGlobals.instances, function(key) {\n                window.intlTelInputGlobals.instances[key][method]();\n            });\n        };\n        // this is our plugin class that we will create an instance of\n        // eslint-disable-next-line no-unused-vars\n        var Iti = /*#__PURE__*/\n        function() {\n            function Iti(input, options) {\n                var _this = this;\n                _classCallCheck(this, Iti);\n                this.id = id++;\n                this.telInput = input;\n                this.activeItem = null;\n                this.highlightedItem = null;\n                // process specified options / defaults\n                // alternative to Object.assign, which isn't supported by IE11\n                var customOptions = options || {};\n                this.options = {};\n                forEachProp(defaults, function(key, value) {\n                    _this.options[key] = customOptions.hasOwnProperty(key) ? customOptions[key] : value;\n                });\n                this.hadInitialPlaceholder = Boolean(input.getAttribute(\"placeholder\"));\n            }\n            _createClass(Iti, [ {\n                key: \"_init\",\n                value: function _init() {\n                    var _this2 = this;\n                    // if in nationalMode, disable options relating to dial codes\n                    if (this.options.nationalMode) this.options.autoHideDialCode = false;\n                    // if separateDialCode then doesn't make sense to A) insert dial code into input\n                    // (autoHideDialCode), and B) display national numbers (because we're displaying the country\n                    // dial code next to them)\n                    if (this.options.separateDialCode) {\n                        this.options.autoHideDialCode = this.options.nationalMode = false;\n                    }\n                    // we cannot just test screen size as some smartphones/website meta tags will report desktop\n                    // resolutions\n                    // Note: for some reason jasmine breaks if you put this in the main Plugin function with the\n                    // rest of these declarations\n                    // Note: to target Android Mobiles (and not Tablets), we must find 'Android' and 'Mobile'\n                    this.isMobile = /Android.+Mobile|webOS|iPhone|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);\n                    if (this.isMobile) {\n                        // trigger the mobile dropdown css\n                        document.body.classList.add(\"iti-mobile\");\n                        // on mobile, we want a full screen dropdown, so we must append it to the body\n                        if (!this.options.dropdownContainer) this.options.dropdownContainer = document.body;\n                    }\n                    // these promises get resolved when their individual requests complete\n                    // this way the dev can do something like iti.promise.then(...) to know when all requests are\n                    // complete\n                    if (typeof Promise !== \"undefined\") {\n                        var autoCountryPromise = new Promise(function(resolve, reject) {\n                            _this2.resolveAutoCountryPromise = resolve;\n                            _this2.rejectAutoCountryPromise = reject;\n                        });\n                        var utilsScriptPromise = new Promise(function(resolve, reject) {\n                            _this2.resolveUtilsScriptPromise = resolve;\n                            _this2.rejectUtilsScriptPromise = reject;\n                        });\n                        this.promise = Promise.all([ autoCountryPromise, utilsScriptPromise ]);\n                    } else {\n                        // prevent errors when Promise doesn't exist\n                        this.resolveAutoCountryPromise = this.rejectAutoCountryPromise = function() {};\n                        this.resolveUtilsScriptPromise = this.rejectUtilsScriptPromise = function() {};\n                    }\n                    // in various situations there could be no country selected initially, but we need to be able\n                    // to assume this variable exists\n                    this.selectedCountryData = {};\n                    // process all the data: onlyCountries, excludeCountries, preferredCountries etc\n                    this._processCountryData();\n                    // generate the markup\n                    this._generateMarkup();\n                    // set the initial state of the input value and the selected flag\n                    this._setInitialState();\n                    // start all of the event listeners: autoHideDialCode, input keydown, selectedFlag click\n                    this._initListeners();\n                    // utils script, and auto country\n                    this._initRequests();\n                }\n            }, {\n                key: \"_processCountryData\",\n                value: function _processCountryData() {\n                    // process onlyCountries or excludeCountries array if present\n                    this._processAllCountries();\n                    // process the countryCodes map\n                    this._processCountryCodes();\n                    // process the preferredCountries\n                    this._processPreferredCountries();\n                    // translate countries according to localizedCountries option\n                    if (this.options.localizedCountries) this._translateCountriesByLocale();\n                    // sort countries by name\n                    if (this.options.onlyCountries.length || this.options.localizedCountries) {\n                        this.countries.sort(this._countryNameSort);\n                    }\n                }\n            }, {\n                key: \"_addCountryCode\",\n                value: function _addCountryCode(iso2, countryCode, priority) {\n                    if (countryCode.length > this.countryCodeMaxLen) {\n                        this.countryCodeMaxLen = countryCode.length;\n                    }\n                    if (!this.countryCodes.hasOwnProperty(countryCode)) {\n                        this.countryCodes[countryCode] = [];\n                    }\n                    // bail if we already have this country for this countryCode\n                    for (var i = 0; i < this.countryCodes[countryCode].length; i++) {\n                        if (this.countryCodes[countryCode][i] === iso2) return;\n                    }\n                    // check for undefined as 0 is falsy\n                    var index = priority !== undefined ? priority : this.countryCodes[countryCode].length;\n                    this.countryCodes[countryCode][index] = iso2;\n                }\n            }, {\n                key: \"_processAllCountries\",\n                value: function _processAllCountries() {\n                    if (this.options.onlyCountries.length) {\n                        var lowerCaseOnlyCountries = this.options.onlyCountries.map(function(country) {\n                            return country.toLowerCase();\n                        });\n                        this.countries = allCountries.filter(function(country) {\n                            return lowerCaseOnlyCountries.indexOf(country.iso2) > -1;\n                        });\n                    } else if (this.options.excludeCountries.length) {\n                        var lowerCaseExcludeCountries = this.options.excludeCountries.map(function(country) {\n                            return country.toLowerCase();\n                        });\n                        this.countries = allCountries.filter(function(country) {\n                            return lowerCaseExcludeCountries.indexOf(country.iso2) === -1;\n                        });\n                    } else {\n                        this.countries = allCountries;\n                    }\n                }\n            }, {\n                key: \"_translateCountriesByLocale\",\n                value: function _translateCountriesByLocale() {\n                    for (var i = 0; i < this.countries.length; i++) {\n                        var iso = this.countries[i].iso2.toLowerCase();\n                        if (this.options.localizedCountries.hasOwnProperty(iso)) {\n                            this.countries[i].name = this.options.localizedCountries[iso];\n                        }\n                    }\n                }\n            }, {\n                key: \"_countryNameSort\",\n                value: function _countryNameSort(a, b) {\n                    return a.name.localeCompare(b.name);\n                }\n            }, {\n                key: \"_processCountryCodes\",\n                value: function _processCountryCodes() {\n                    this.countryCodeMaxLen = 0;\n                    // here we store just dial codes\n                    this.dialCodes = {};\n                    // here we store \"country codes\" (both dial codes and their area codes)\n                    this.countryCodes = {};\n                    // first: add dial codes\n                    for (var i = 0; i < this.countries.length; i++) {\n                        var c = this.countries[i];\n                        if (!this.dialCodes[c.dialCode]) this.dialCodes[c.dialCode] = true;\n                        this._addCountryCode(c.iso2, c.dialCode, c.priority);\n                    }\n                    // next: add area codes\n                    // this is a second loop over countries, to make sure we have all of the \"root\" countries\n                    // already in the map, so that we can access them, as each time we add an area code substring\n                    // to the map, we also need to include the \"root\" country's code, as that also matches\n                    for (var _i = 0; _i < this.countries.length; _i++) {\n                        var _c = this.countries[_i];\n                        // area codes\n                        if (_c.areaCodes) {\n                            var rootCountryCode = this.countryCodes[_c.dialCode][0];\n                            // for each area code\n                            for (var j = 0; j < _c.areaCodes.length; j++) {\n                                var areaCode = _c.areaCodes[j];\n                                // for each digit in the area code to add all partial matches as well\n                                for (var k = 1; k < areaCode.length; k++) {\n                                    var partialDialCode = _c.dialCode + areaCode.substr(0, k);\n                                    // start with the root country, as that also matches this dial code\n                                    this._addCountryCode(rootCountryCode, partialDialCode);\n                                    this._addCountryCode(_c.iso2, partialDialCode);\n                                }\n                                // add the full area code\n                                this._addCountryCode(_c.iso2, _c.dialCode + areaCode);\n                            }\n                        }\n                    }\n                }\n            }, {\n                key: \"_processPreferredCountries\",\n                value: function _processPreferredCountries() {\n                    this.preferredCountries = [];\n                    for (var i = 0; i < this.options.preferredCountries.length; i++) {\n                        var countryCode = this.options.preferredCountries[i].toLowerCase();\n                        var countryData = this._getCountryData(countryCode, false, true);\n                        if (countryData) this.preferredCountries.push(countryData);\n                    }\n                }\n            }, {\n                key: \"_createEl\",\n                value: function _createEl(name, attrs, container) {\n                    var el = document.createElement(name);\n                    if (attrs) forEachProp(attrs, function(key, value) {\n                        return el.setAttribute(key, value);\n                    });\n                    if (container) container.appendChild(el);\n                    return el;\n                }\n            }, {\n                key: \"_generateMarkup\",\n                value: function _generateMarkup() {\n                    // if autocomplete does not exist on the element and its form, then\n                    // prevent autocomplete as there's no safe, cross-browser event we can react to, so it can\n                    // easily put the plugin in an inconsistent state e.g. the wrong flag selected for the\n                    // autocompleted number, which on submit could mean wrong number is saved (esp in nationalMode)\n                    if (!this.telInput.hasAttribute(\"autocomplete\") && !(this.telInput.form && this.telInput.form.hasAttribute(\"autocomplete\"))) {\n                        this.telInput.setAttribute(\"autocomplete\", \"off\");\n                    }\n                    // containers (mostly for positioning)\n                    var parentClass = \"iti\";\n                    if (this.options.allowDropdown) parentClass += \" iti--allow-dropdown\";\n                    if (this.options.separateDialCode) parentClass += \" iti--separate-dial-code\";\n                    if (this.options.customContainer) {\n                        parentClass += \" \";\n                        parentClass += this.options.customContainer;\n                    }\n                    var wrapper = this._createEl(\"div\", {\n                        \"class\": parentClass\n                    });\n                    this.telInput.parentNode.insertBefore(wrapper, this.telInput);\n                    this.flagsContainer = this._createEl(\"div\", {\n                        \"class\": \"iti__flag-container\"\n                    }, wrapper);\n                    wrapper.appendChild(this.telInput);\n                    // selected flag (displayed to left of input)\n                    this.selectedFlag = this._createEl(\"div\", {\n                        \"class\": \"iti__selected-flag\",\n                        role: \"combobox\",\n                        \"aria-controls\": \"iti-\".concat(this.id, \"__country-listbox\"),\n                        \"aria-owns\": \"iti-\".concat(this.id, \"__country-listbox\"),\n                        \"aria-expanded\": \"false\"\n                    }, this.flagsContainer);\n                    this.selectedFlagInner = this._createEl(\"div\", {\n                        \"class\": \"iti__flag\"\n                    }, this.selectedFlag);\n                    if (this.options.separateDialCode) {\n                        this.selectedDialCode = this._createEl(\"div\", {\n                            \"class\": \"iti__selected-dial-code\"\n                        }, this.selectedFlag);\n                    }\n                    if (this.options.allowDropdown) {\n                        // make element focusable and tab navigable\n                        this.selectedFlag.setAttribute(\"tabindex\", \"0\");\n                        this.dropdownArrow = this._createEl(\"div\", {\n                            \"class\": \"iti__arrow\"\n                        }, this.selectedFlag);\n                        // country dropdown: preferred countries, then divider, then all countries\n                        this.countryList = this._createEl(\"ul\", {\n                            \"class\": \"iti__country-list iti__hide\",\n                            id: \"iti-\".concat(this.id, \"__country-listbox\"),\n                            role: \"listbox\",\n                            \"aria-label\": \"List of countries\"\n                        });\n                        if (this.preferredCountries.length) {\n                            this._appendListItems(this.preferredCountries, \"iti__preferred\", true);\n                            this._createEl(\"li\", {\n                                \"class\": \"iti__divider\",\n                                role: \"separator\",\n                                \"aria-disabled\": \"true\"\n                            }, this.countryList);\n                        }\n                        this._appendListItems(this.countries, \"iti__standard\");\n                        // create dropdownContainer markup\n                        if (this.options.dropdownContainer) {\n                            this.dropdown = this._createEl(\"div\", {\n                                \"class\": \"iti iti--container\"\n                            });\n                            this.dropdown.appendChild(this.countryList);\n                        } else {\n                            this.flagsContainer.appendChild(this.countryList);\n                        }\n                    }\n                    if (this.options.hiddenInput) {\n                        var hiddenInputName = this.options.hiddenInput;\n                        var name = this.telInput.getAttribute(\"name\");\n                        if (name) {\n                            var i = name.lastIndexOf(\"[\");\n                            // if input name contains square brackets, then give the hidden input the same name,\n                            // replacing the contents of the last set of brackets with the given hiddenInput name\n                            if (i !== -1) hiddenInputName = \"\".concat(name.substr(0, i), \"[\").concat(hiddenInputName, \"]\");\n                        }\n                        this.hiddenInput = this._createEl(\"input\", {\n                            type: \"hidden\",\n                            name: hiddenInputName\n                        });\n                        wrapper.appendChild(this.hiddenInput);\n                    }\n                }\n            }, {\n                key: \"_appendListItems\",\n                value: function _appendListItems(countries, className, preferred) {\n                    // we create so many DOM elements, it is faster to build a temp string\n                    // and then add everything to the DOM in one go at the end\n                    var tmp = \"\";\n                    // for each country\n                    for (var i = 0; i < countries.length; i++) {\n                        var c = countries[i];\n                        var idSuffix = preferred ? \"-preferred\" : \"\";\n                        // open the list item\n                        tmp += \"<li class='iti__country \".concat(className, \"' tabIndex='-1' id='iti-\").concat(this.id, \"__item-\").concat(c.iso2).concat(idSuffix, \"' role='option' data-dial-code='\").concat(c.dialCode, \"' data-country-code='\").concat(c.iso2, \"' aria-selected='false'>\");\n                        // add the flag\n                        tmp += \"<div class='iti__flag-box'><div class='iti__flag iti__\".concat(c.iso2, \"'></div></div>\");\n                        // and the country name and dial code\n                        tmp += \"<span class='iti__country-name'>\".concat(c.name, \"</span>\");\n                        tmp += \"<span class='iti__dial-code'>+\".concat(c.dialCode, \"</span>\");\n                        // close the list item\n                        tmp += \"</li>\";\n                    }\n                    this.countryList.insertAdjacentHTML(\"beforeend\", tmp);\n                }\n            }, {\n                key: \"_setInitialState\",\n                value: function _setInitialState() {\n                    // fix firefox bug: when first load page (with input with value set to number with intl dial\n                    // code) and initialising plugin removes the dial code from the input, then refresh page,\n                    // and we try to init plugin again but this time on number without dial code so get grey flag\n                    var attributeValue = this.telInput.getAttribute(\"value\");\n                    var inputValue = this.telInput.value;\n                    var useAttribute = attributeValue && attributeValue.charAt(0) === \"+\" && (!inputValue || inputValue.charAt(0) !== \"+\");\n                    var val = useAttribute ? attributeValue : inputValue;\n                    var dialCode = this._getDialCode(val);\n                    var isRegionlessNanp = this._isRegionlessNanp(val);\n                    var _this$options = this.options, initialCountry = _this$options.initialCountry, nationalMode = _this$options.nationalMode, autoHideDialCode = _this$options.autoHideDialCode, separateDialCode = _this$options.separateDialCode;\n                    // if we already have a dial code, and it's not a regionlessNanp, we can go ahead and set the\n                    // flag, else fall back to the default country\n                    if (dialCode && !isRegionlessNanp) {\n                        this._updateFlagFromNumber(val);\n                    } else if (initialCountry !== \"auto\") {\n                        // see if we should select a flag\n                        if (initialCountry) {\n                            this._setFlag(initialCountry.toLowerCase());\n                        } else {\n                            if (dialCode && isRegionlessNanp) {\n                                // has intl dial code, is regionless nanp, and no initialCountry, so default to US\n                                this._setFlag(\"us\");\n                            } else {\n                                // no dial code and no initialCountry, so default to first in list\n                                this.defaultCountry = this.preferredCountries.length ? this.preferredCountries[0].iso2 : this.countries[0].iso2;\n                                if (!val) {\n                                    this._setFlag(this.defaultCountry);\n                                }\n                            }\n                        }\n                        // if empty and no nationalMode and no autoHideDialCode then insert the default dial code\n                        if (!val && !nationalMode && !autoHideDialCode && !separateDialCode) {\n                            this.telInput.value = \"+\".concat(this.selectedCountryData.dialCode);\n                        }\n                    }\n                    // NOTE: if initialCountry is set to auto, that will be handled separately\n                    // format - note this wont be run after _updateDialCode as that's only called if no val\n                    if (val) this._updateValFromNumber(val);\n                }\n            }, {\n                key: \"_initListeners\",\n                value: function _initListeners() {\n                    this._initKeyListeners();\n                    if (this.options.autoHideDialCode) this._initBlurListeners();\n                    if (this.options.allowDropdown) this._initDropdownListeners();\n                    if (this.hiddenInput) this._initHiddenInputListener();\n                }\n            }, {\n                key: \"_initHiddenInputListener\",\n                value: function _initHiddenInputListener() {\n                    var _this3 = this;\n                    this._handleHiddenInputSubmit = function() {\n                        _this3.hiddenInput.value = _this3.getNumber();\n                    };\n                    if (this.telInput.form) this.telInput.form.addEventListener(\"submit\", this._handleHiddenInputSubmit);\n                }\n            }, {\n                key: \"_getClosestLabel\",\n                value: function _getClosestLabel() {\n                    var el = this.telInput;\n                    while (el && el.tagName !== \"LABEL\") {\n                        el = el.parentNode;\n                    }\n                    return el;\n                }\n            }, {\n                key: \"_initDropdownListeners\",\n                value: function _initDropdownListeners() {\n                    var _this4 = this;\n                    // hack for input nested inside label (which is valid markup): clicking the selected-flag to\n                    // open the dropdown would then automatically trigger a 2nd click on the input which would\n                    // close it again\n                    this._handleLabelClick = function(e) {\n                        // if the dropdown is closed, then focus the input, else ignore the click\n                        if (_this4.countryList.classList.contains(\"iti__hide\")) _this4.telInput.focus(); else e.preventDefault();\n                    };\n                    var label = this._getClosestLabel();\n                    if (label) label.addEventListener(\"click\", this._handleLabelClick);\n                    // toggle country dropdown on click\n                    this._handleClickSelectedFlag = function() {\n                        // only intercept this event if we're opening the dropdown\n                        // else let it bubble up to the top (\"click-off-to-close\" listener)\n                        // we cannot just stopPropagation as it may be needed to close another instance\n                        if (_this4.countryList.classList.contains(\"iti__hide\") && !_this4.telInput.disabled && !_this4.telInput.readOnly) {\n                            _this4._showDropdown();\n                        }\n                    };\n                    this.selectedFlag.addEventListener(\"click\", this._handleClickSelectedFlag);\n                    // open dropdown list if currently focused\n                    this._handleFlagsContainerKeydown = function(e) {\n                        var isDropdownHidden = _this4.countryList.classList.contains(\"iti__hide\");\n                        if (isDropdownHidden && [ \"ArrowUp\", \"Up\", \"ArrowDown\", \"Down\", \" \", \"Enter\" ].indexOf(e.key) !== -1) {\n                            // prevent form from being submitted if \"ENTER\" was pressed\n                            e.preventDefault();\n                            // prevent event from being handled again by document\n                            e.stopPropagation();\n                            _this4._showDropdown();\n                        }\n                        // allow navigation from dropdown to input on TAB\n                        if (e.key === \"Tab\") _this4._closeDropdown();\n                    };\n                    this.flagsContainer.addEventListener(\"keydown\", this._handleFlagsContainerKeydown);\n                }\n            }, {\n                key: \"_initRequests\",\n                value: function _initRequests() {\n                    var _this5 = this;\n                    // if the user has specified the path to the utils script, fetch it on window.load, else resolve\n                    if (this.options.utilsScript && !window.intlTelInputUtils) {\n                        // if the plugin is being initialised after the window.load event has already been fired\n                        if (window.intlTelInputGlobals.documentReady()) {\n                            window.intlTelInputGlobals.loadUtils(this.options.utilsScript);\n                        } else {\n                            // wait until the load event so we don't block any other requests e.g. the flags image\n                            window.addEventListener(\"load\", function() {\n                                window.intlTelInputGlobals.loadUtils(_this5.options.utilsScript);\n                            });\n                        }\n                    } else this.resolveUtilsScriptPromise();\n                    if (this.options.initialCountry === \"auto\") this._loadAutoCountry(); else this.resolveAutoCountryPromise();\n                }\n            }, {\n                key: \"_loadAutoCountry\",\n                value: function _loadAutoCountry() {\n                    // 3 options:\n                    // 1) already loaded (we're done)\n                    // 2) not already started loading (start)\n                    // 3) already started loading (do nothing - just wait for loading callback to fire)\n                    if (window.intlTelInputGlobals.autoCountry) {\n                        this.handleAutoCountry();\n                    } else if (!window.intlTelInputGlobals.startedLoadingAutoCountry) {\n                        // don't do this twice!\n                        window.intlTelInputGlobals.startedLoadingAutoCountry = true;\n                        if (typeof this.options.geoIpLookup === \"function\") {\n                            this.options.geoIpLookup(function(countryCode) {\n                                window.intlTelInputGlobals.autoCountry = countryCode.toLowerCase();\n                                // tell all instances the auto country is ready\n                                // TODO: this should just be the current instances\n                                // UPDATE: use setTimeout in case their geoIpLookup function calls this callback straight\n                                // away (e.g. if they have already done the geo ip lookup somewhere else). Using\n                                // setTimeout means that the current thread of execution will finish before executing\n                                // this, which allows the plugin to finish initialising.\n                                setTimeout(function() {\n                                    return forEachInstance(\"handleAutoCountry\");\n                                });\n                            }, function() {\n                                return forEachInstance(\"rejectAutoCountryPromise\");\n                            });\n                        }\n                    }\n                }\n            }, {\n                key: \"_initKeyListeners\",\n                value: function _initKeyListeners() {\n                    var _this6 = this;\n                    // update flag on keyup\n                    this._handleKeyupEvent = function() {\n                        if (_this6._updateFlagFromNumber(_this6.telInput.value)) {\n                            _this6._triggerCountryChange();\n                        }\n                    };\n                    this.telInput.addEventListener(\"keyup\", this._handleKeyupEvent);\n                    // update flag on cut/paste events (now supported in all major browsers)\n                    this._handleClipboardEvent = function() {\n                        // hack because \"paste\" event is fired before input is updated\n                        setTimeout(_this6._handleKeyupEvent);\n                    };\n                    this.telInput.addEventListener(\"cut\", this._handleClipboardEvent);\n                    this.telInput.addEventListener(\"paste\", this._handleClipboardEvent);\n                }\n            }, {\n                key: \"_cap\",\n                value: function _cap(number) {\n                    var max = this.telInput.getAttribute(\"maxlength\");\n                    return max && number.length > max ? number.substr(0, max) : number;\n                }\n            }, {\n                key: \"_initBlurListeners\",\n                value: function _initBlurListeners() {\n                    var _this7 = this;\n                    // on blur or form submit: if just a dial code then remove it\n                    this._handleSubmitOrBlurEvent = function() {\n                        _this7._removeEmptyDialCode();\n                    };\n                    if (this.telInput.form) this.telInput.form.addEventListener(\"submit\", this._handleSubmitOrBlurEvent);\n                    this.telInput.addEventListener(\"blur\", this._handleSubmitOrBlurEvent);\n                }\n            }, {\n                key: \"_removeEmptyDialCode\",\n                value: function _removeEmptyDialCode() {\n                    if (this.telInput.value.charAt(0) === \"+\") {\n                        var numeric = this._getNumeric(this.telInput.value);\n                        // if just a plus, or if just a dial code\n                        if (!numeric || this.selectedCountryData.dialCode === numeric) {\n                            this.telInput.value = \"\";\n                        }\n                    }\n                }\n            }, {\n                key: \"_getNumeric\",\n                value: function _getNumeric(s) {\n                    return s.replace(/\\D/g, \"\");\n                }\n            }, {\n                key: \"_trigger\",\n                value: function _trigger(name) {\n                    // have to use old school document.createEvent as IE11 doesn't support `new Event()` syntax\n                    var e = document.createEvent(\"Event\");\n                    e.initEvent(name, true, true);\n                    // can bubble, and is cancellable\n                    this.telInput.dispatchEvent(e);\n                }\n            }, {\n                key: \"_showDropdown\",\n                value: function _showDropdown() {\n                    this.countryList.classList.remove(\"iti__hide\");\n                    this.selectedFlag.setAttribute(\"aria-expanded\", \"true\");\n                    this._setDropdownPosition();\n                    // update highlighting and scroll to active list item\n                    if (this.activeItem) {\n                        this._highlightListItem(this.activeItem, false);\n                        this._scrollTo(this.activeItem, true);\n                    }\n                    // bind all the dropdown-related listeners: mouseover, click, click-off, keydown\n                    this._bindDropdownListeners();\n                    // update the arrow\n                    this.dropdownArrow.classList.add(\"iti__arrow--up\");\n                    this._trigger(\"open:countrydropdown\");\n                }\n            }, {\n                key: \"_toggleClass\",\n                value: function _toggleClass(el, className, shouldHaveClass) {\n                    if (shouldHaveClass && !el.classList.contains(className)) el.classList.add(className); else if (!shouldHaveClass && el.classList.contains(className)) el.classList.remove(className);\n                }\n            }, {\n                key: \"_setDropdownPosition\",\n                value: function _setDropdownPosition() {\n                    var _this8 = this;\n                    if (this.options.dropdownContainer) {\n                        this.options.dropdownContainer.appendChild(this.dropdown);\n                    }\n                    if (!this.isMobile) {\n                        var pos = this.telInput.getBoundingClientRect();\n                        // windowTop from https://stackoverflow.com/a/14384091/217866\n                        var windowTop = window.pageYOffset || document.documentElement.scrollTop;\n                        var inputTop = pos.top + windowTop;\n                        var dropdownHeight = this.countryList.offsetHeight;\n                        // dropdownFitsBelow = (dropdownBottom < windowBottom)\n                        var dropdownFitsBelow = inputTop + this.telInput.offsetHeight + dropdownHeight < windowTop + window.innerHeight;\n                        var dropdownFitsAbove = inputTop - dropdownHeight > windowTop;\n                        // by default, the dropdown will be below the input. If we want to position it above the\n                        // input, we add the dropup class.\n                        this._toggleClass(this.countryList, \"iti__country-list--dropup\", !dropdownFitsBelow && dropdownFitsAbove);\n                        // if dropdownContainer is enabled, calculate postion\n                        if (this.options.dropdownContainer) {\n                            // by default the dropdown will be directly over the input because it's not in the flow.\n                            // If we want to position it below, we need to add some extra top value.\n                            var extraTop = !dropdownFitsBelow && dropdownFitsAbove ? 0 : this.telInput.offsetHeight;\n                            // calculate placement\n                            this.dropdown.style.top = \"\".concat(inputTop + extraTop, \"px\");\n                            this.dropdown.style.left = \"\".concat(pos.left + document.body.scrollLeft, \"px\");\n                            // close menu on window scroll\n                            this._handleWindowScroll = function() {\n                                return _this8._closeDropdown();\n                            };\n                            window.addEventListener(\"scroll\", this._handleWindowScroll);\n                        }\n                    }\n                }\n            }, {\n                key: \"_getClosestListItem\",\n                value: function _getClosestListItem(target) {\n                    var el = target;\n                    while (el && el !== this.countryList && !el.classList.contains(\"iti__country\")) {\n                        el = el.parentNode;\n                    }\n                    // if we reached the countryList element, then return null\n                    return el === this.countryList ? null : el;\n                }\n            }, {\n                key: \"_bindDropdownListeners\",\n                value: function _bindDropdownListeners() {\n                    var _this9 = this;\n                    // when mouse over a list item, just highlight that one\n                    // we add the class \"highlight\", so if they hit \"enter\" we know which one to select\n                    this._handleMouseoverCountryList = function(e) {\n                        // handle event delegation, as we're listening for this event on the countryList\n                        var listItem = _this9._getClosestListItem(e.target);\n                        if (listItem) _this9._highlightListItem(listItem, false);\n                    };\n                    this.countryList.addEventListener(\"mouseover\", this._handleMouseoverCountryList);\n                    // listen for country selection\n                    this._handleClickCountryList = function(e) {\n                        var listItem = _this9._getClosestListItem(e.target);\n                        if (listItem) _this9._selectListItem(listItem);\n                    };\n                    this.countryList.addEventListener(\"click\", this._handleClickCountryList);\n                    // click off to close\n                    // (except when this initial opening click is bubbling up)\n                    // we cannot just stopPropagation as it may be needed to close another instance\n                    var isOpening = true;\n                    this._handleClickOffToClose = function() {\n                        if (!isOpening) _this9._closeDropdown();\n                        isOpening = false;\n                    };\n                    document.documentElement.addEventListener(\"click\", this._handleClickOffToClose);\n                    // listen for up/down scrolling, enter to select, or letters to jump to country name.\n                    // use keydown as keypress doesn't fire for non-char keys and we want to catch if they\n                    // just hit down and hold it to scroll down (no keyup event).\n                    // listen on the document because that's where key events are triggered if no input has focus\n                    var query = \"\";\n                    var queryTimer = null;\n                    this._handleKeydownOnDropdown = function(e) {\n                        // prevent down key from scrolling the whole page,\n                        // and enter key from submitting a form etc\n                        e.preventDefault();\n                        // up and down to navigate\n                        if (e.key === \"ArrowUp\" || e.key === \"Up\" || e.key === \"ArrowDown\" || e.key === \"Down\") _this9._handleUpDownKey(e.key); else if (e.key === \"Enter\") _this9._handleEnterKey(); else if (e.key === \"Escape\") _this9._closeDropdown(); else if (/^[a-zA-ZÀ-ÿа-яА-Я ]$/.test(e.key)) {\n                            // jump to countries that start with the query string\n                            if (queryTimer) clearTimeout(queryTimer);\n                            query += e.key.toLowerCase();\n                            _this9._searchForCountry(query);\n                            // if the timer hits 1 second, reset the query\n                            queryTimer = setTimeout(function() {\n                                query = \"\";\n                            }, 1e3);\n                        }\n                    };\n                    document.addEventListener(\"keydown\", this._handleKeydownOnDropdown);\n                }\n            }, {\n                key: \"_handleUpDownKey\",\n                value: function _handleUpDownKey(key) {\n                    var next = key === \"ArrowUp\" || key === \"Up\" ? this.highlightedItem.previousElementSibling : this.highlightedItem.nextElementSibling;\n                    if (next) {\n                        // skip the divider\n                        if (next.classList.contains(\"iti__divider\")) {\n                            next = key === \"ArrowUp\" || key === \"Up\" ? next.previousElementSibling : next.nextElementSibling;\n                        }\n                        this._highlightListItem(next, true);\n                    }\n                }\n            }, {\n                key: \"_handleEnterKey\",\n                value: function _handleEnterKey() {\n                    if (this.highlightedItem) this._selectListItem(this.highlightedItem);\n                }\n            }, {\n                key: \"_searchForCountry\",\n                value: function _searchForCountry(query) {\n                    for (var i = 0; i < this.countries.length; i++) {\n                        if (this._startsWith(this.countries[i].name, query)) {\n                            var listItem = this.countryList.querySelector(\"#iti-\".concat(this.id, \"__item-\").concat(this.countries[i].iso2));\n                            // update highlighting and scroll\n                            this._highlightListItem(listItem, false);\n                            this._scrollTo(listItem, true);\n                            break;\n                        }\n                    }\n                }\n            }, {\n                key: \"_startsWith\",\n                value: function _startsWith(a, b) {\n                    return a.substr(0, b.length).toLowerCase() === b;\n                }\n            }, {\n                key: \"_updateValFromNumber\",\n                value: function _updateValFromNumber(originalNumber) {\n                    var number = originalNumber;\n                    if (this.options.formatOnDisplay && window.intlTelInputUtils && this.selectedCountryData) {\n                        var useNational = !this.options.separateDialCode && (this.options.nationalMode || number.charAt(0) !== \"+\");\n                        var _intlTelInputUtils$nu = intlTelInputUtils.numberFormat, NATIONAL = _intlTelInputUtils$nu.NATIONAL, INTERNATIONAL = _intlTelInputUtils$nu.INTERNATIONAL;\n                        var format = useNational ? NATIONAL : INTERNATIONAL;\n                        number = intlTelInputUtils.formatNumber(number, this.selectedCountryData.iso2, format);\n                    }\n                    number = this._beforeSetNumber(number);\n                    this.telInput.value = number;\n                }\n            }, {\n                key: \"_updateFlagFromNumber\",\n                value: function _updateFlagFromNumber(originalNumber) {\n                    // if we're in nationalMode and we already have US/Canada selected, make sure the number starts\n                    // with a +1 so _getDialCode will be able to extract the area code\n                    // update: if we dont yet have selectedCountryData, but we're here (trying to update the flag\n                    // from the number), that means we're initialising the plugin with a number that already has a\n                    // dial code, so fine to ignore this bit\n                    var number = originalNumber;\n                    var selectedDialCode = this.selectedCountryData.dialCode;\n                    var isNanp = selectedDialCode === \"1\";\n                    if (number && this.options.nationalMode && isNanp && number.charAt(0) !== \"+\") {\n                        if (number.charAt(0) !== \"1\") number = \"1\".concat(number);\n                        number = \"+\".concat(number);\n                    }\n                    // update flag if user types area code for another country\n                    if (this.options.separateDialCode && selectedDialCode && number.charAt(0) !== \"+\") {\n                        number = \"+\".concat(selectedDialCode).concat(number);\n                    }\n                    // try and extract valid dial code from input\n                    var dialCode = this._getDialCode(number, true);\n                    var numeric = this._getNumeric(number);\n                    var countryCode = null;\n                    if (dialCode) {\n                        var countryCodes = this.countryCodes[this._getNumeric(dialCode)];\n                        // check if the right country is already selected. this should be false if the number is\n                        // longer than the matched dial code because in this case we need to make sure that if\n                        // there are multiple country matches, that the first one is selected (note: we could\n                        // just check that here, but it requires the same loop that we already have later)\n                        var alreadySelected = countryCodes.indexOf(this.selectedCountryData.iso2) !== -1 && numeric.length <= dialCode.length - 1;\n                        var isRegionlessNanpNumber = selectedDialCode === \"1\" && this._isRegionlessNanp(numeric);\n                        // only update the flag if:\n                        // A) NOT (we currently have a NANP flag selected, and the number is a regionlessNanp)\n                        // AND\n                        // B) the right country is not already selected\n                        if (!isRegionlessNanpNumber && !alreadySelected) {\n                            // if using onlyCountries option, countryCodes[0] may be empty, so we must find the first\n                            // non-empty index\n                            for (var j = 0; j < countryCodes.length; j++) {\n                                if (countryCodes[j]) {\n                                    countryCode = countryCodes[j];\n                                    break;\n                                }\n                            }\n                        }\n                    } else if (number.charAt(0) === \"+\" && numeric.length) {\n                        // invalid dial code, so empty\n                        // Note: use getNumeric here because the number has not been formatted yet, so could contain\n                        // bad chars\n                        countryCode = \"\";\n                    } else if (!number || number === \"+\") {\n                        // empty, or just a plus, so default\n                        countryCode = this.defaultCountry;\n                    }\n                    if (countryCode !== null) {\n                        return this._setFlag(countryCode);\n                    }\n                    return false;\n                }\n            }, {\n                key: \"_isRegionlessNanp\",\n                value: function _isRegionlessNanp(number) {\n                    var numeric = this._getNumeric(number);\n                    if (numeric.charAt(0) === \"1\") {\n                        var areaCode = numeric.substr(1, 3);\n                        return regionlessNanpNumbers.indexOf(areaCode) !== -1;\n                    }\n                    return false;\n                }\n            }, {\n                key: \"_highlightListItem\",\n                value: function _highlightListItem(listItem, shouldFocus) {\n                    var prevItem = this.highlightedItem;\n                    if (prevItem) prevItem.classList.remove(\"iti__highlight\");\n                    this.highlightedItem = listItem;\n                    this.highlightedItem.classList.add(\"iti__highlight\");\n                    if (shouldFocus) this.highlightedItem.focus();\n                }\n            }, {\n                key: \"_getCountryData\",\n                value: function _getCountryData(countryCode, ignoreOnlyCountriesOption, allowFail) {\n                    var countryList = ignoreOnlyCountriesOption ? allCountries : this.countries;\n                    for (var i = 0; i < countryList.length; i++) {\n                        if (countryList[i].iso2 === countryCode) {\n                            return countryList[i];\n                        }\n                    }\n                    if (allowFail) {\n                        return null;\n                    }\n                    throw new Error(\"No country data for '\".concat(countryCode, \"'\"));\n                }\n            }, {\n                key: \"_setFlag\",\n                value: function _setFlag(countryCode) {\n                    var prevCountry = this.selectedCountryData.iso2 ? this.selectedCountryData : {};\n                    // do this first as it will throw an error and stop if countryCode is invalid\n                    this.selectedCountryData = countryCode ? this._getCountryData(countryCode, false, false) : {};\n                    // update the defaultCountry - we only need the iso2 from now on, so just store that\n                    if (this.selectedCountryData.iso2) {\n                        this.defaultCountry = this.selectedCountryData.iso2;\n                    }\n                    this.selectedFlagInner.setAttribute(\"class\", \"iti__flag iti__\".concat(countryCode));\n                    // update the selected country's title attribute\n                    var title = countryCode ? \"\".concat(this.selectedCountryData.name, \": +\").concat(this.selectedCountryData.dialCode) : \"Unknown\";\n                    this.selectedFlag.setAttribute(\"title\", title);\n                    if (this.options.separateDialCode) {\n                        var dialCode = this.selectedCountryData.dialCode ? \"+\".concat(this.selectedCountryData.dialCode) : \"\";\n                        this.selectedDialCode.innerHTML = dialCode;\n                        // offsetWidth is zero if input is in a hidden container during initialisation\n                        var selectedFlagWidth = this.selectedFlag.offsetWidth || this._getHiddenSelectedFlagWidth();\n                        // add 6px of padding after the grey selected-dial-code box, as this is what we use in the css\n                        this.telInput.style.paddingLeft = \"\".concat(selectedFlagWidth + 6, \"px\");\n                    }\n                    // and the input's placeholder\n                    this._updatePlaceholder();\n                    // update the active list item\n                    if (this.options.allowDropdown) {\n                        var prevItem = this.activeItem;\n                        if (prevItem) {\n                            prevItem.classList.remove(\"iti__active\");\n                            prevItem.setAttribute(\"aria-selected\", \"false\");\n                        }\n                        if (countryCode) {\n                            // check if there is a preferred item first, else fall back to standard\n                            var nextItem = this.countryList.querySelector(\"#iti-\".concat(this.id, \"__item-\").concat(countryCode, \"-preferred\")) || this.countryList.querySelector(\"#iti-\".concat(this.id, \"__item-\").concat(countryCode));\n                            nextItem.setAttribute(\"aria-selected\", \"true\");\n                            nextItem.classList.add(\"iti__active\");\n                            this.activeItem = nextItem;\n                            this.selectedFlag.setAttribute(\"aria-activedescendant\", nextItem.getAttribute(\"id\"));\n                        }\n                    }\n                    // return if the flag has changed or not\n                    return prevCountry.iso2 !== countryCode;\n                }\n            }, {\n                key: \"_getHiddenSelectedFlagWidth\",\n                value: function _getHiddenSelectedFlagWidth() {\n                    // to get the right styling to apply, all we need is a shallow clone of the container,\n                    // and then to inject a deep clone of the selectedFlag element\n                    var containerClone = this.telInput.parentNode.cloneNode();\n                    containerClone.style.visibility = \"hidden\";\n                    document.body.appendChild(containerClone);\n                    var flagsContainerClone = this.flagsContainer.cloneNode();\n                    containerClone.appendChild(flagsContainerClone);\n                    var selectedFlagClone = this.selectedFlag.cloneNode(true);\n                    flagsContainerClone.appendChild(selectedFlagClone);\n                    var width = selectedFlagClone.offsetWidth;\n                    containerClone.parentNode.removeChild(containerClone);\n                    return width;\n                }\n            }, {\n                key: \"_updatePlaceholder\",\n                value: function _updatePlaceholder() {\n                    var shouldSetPlaceholder = this.options.autoPlaceholder === \"aggressive\" || !this.hadInitialPlaceholder && this.options.autoPlaceholder === \"polite\";\n                    if (window.intlTelInputUtils && shouldSetPlaceholder) {\n                        var numberType = intlTelInputUtils.numberType[this.options.placeholderNumberType];\n                        var placeholder = this.selectedCountryData.iso2 ? intlTelInputUtils.getExampleNumber(this.selectedCountryData.iso2, this.options.nationalMode, numberType) : \"\";\n                        placeholder = this._beforeSetNumber(placeholder);\n                        if (typeof this.options.customPlaceholder === \"function\") {\n                            placeholder = this.options.customPlaceholder(placeholder, this.selectedCountryData);\n                        }\n                        this.telInput.setAttribute(\"placeholder\", placeholder);\n                    }\n                }\n            }, {\n                key: \"_selectListItem\",\n                value: function _selectListItem(listItem) {\n                    // update selected flag and active list item\n                    var flagChanged = this._setFlag(listItem.getAttribute(\"data-country-code\"));\n                    this._closeDropdown();\n                    this._updateDialCode(listItem.getAttribute(\"data-dial-code\"), true);\n                    // focus the input\n                    this.telInput.focus();\n                    // put cursor at end - this fix is required for FF and IE11 (with nationalMode=false i.e. auto\n                    // inserting dial code), who try to put the cursor at the beginning the first time\n                    var len = this.telInput.value.length;\n                    this.telInput.setSelectionRange(len, len);\n                    if (flagChanged) {\n                        this._triggerCountryChange();\n                    }\n                }\n            }, {\n                key: \"_closeDropdown\",\n                value: function _closeDropdown() {\n                    this.countryList.classList.add(\"iti__hide\");\n                    this.selectedFlag.setAttribute(\"aria-expanded\", \"false\");\n                    // update the arrow\n                    this.dropdownArrow.classList.remove(\"iti__arrow--up\");\n                    // unbind key events\n                    document.removeEventListener(\"keydown\", this._handleKeydownOnDropdown);\n                    document.documentElement.removeEventListener(\"click\", this._handleClickOffToClose);\n                    this.countryList.removeEventListener(\"mouseover\", this._handleMouseoverCountryList);\n                    this.countryList.removeEventListener(\"click\", this._handleClickCountryList);\n                    // remove menu from container\n                    if (this.options.dropdownContainer) {\n                        if (!this.isMobile) window.removeEventListener(\"scroll\", this._handleWindowScroll);\n                        if (this.dropdown.parentNode) this.dropdown.parentNode.removeChild(this.dropdown);\n                    }\n                    this._trigger(\"close:countrydropdown\");\n                }\n            }, {\n                key: \"_scrollTo\",\n                value: function _scrollTo(element, middle) {\n                    var container = this.countryList;\n                    // windowTop from https://stackoverflow.com/a/14384091/217866\n                    var windowTop = window.pageYOffset || document.documentElement.scrollTop;\n                    var containerHeight = container.offsetHeight;\n                    var containerTop = container.getBoundingClientRect().top + windowTop;\n                    var containerBottom = containerTop + containerHeight;\n                    var elementHeight = element.offsetHeight;\n                    var elementTop = element.getBoundingClientRect().top + windowTop;\n                    var elementBottom = elementTop + elementHeight;\n                    var newScrollTop = elementTop - containerTop + container.scrollTop;\n                    var middleOffset = containerHeight / 2 - elementHeight / 2;\n                    if (elementTop < containerTop) {\n                        // scroll up\n                        if (middle) newScrollTop -= middleOffset;\n                        container.scrollTop = newScrollTop;\n                    } else if (elementBottom > containerBottom) {\n                        // scroll down\n                        if (middle) newScrollTop += middleOffset;\n                        var heightDifference = containerHeight - elementHeight;\n                        container.scrollTop = newScrollTop - heightDifference;\n                    }\n                }\n            }, {\n                key: \"_updateDialCode\",\n                value: function _updateDialCode(newDialCodeBare, hasSelectedListItem) {\n                    var inputVal = this.telInput.value;\n                    // save having to pass this every time\n                    var newDialCode = \"+\".concat(newDialCodeBare);\n                    var newNumber;\n                    if (inputVal.charAt(0) === \"+\") {\n                        // there's a plus so we're dealing with a replacement (doesn't matter if nationalMode or not)\n                        var prevDialCode = this._getDialCode(inputVal);\n                        if (prevDialCode) {\n                            // current number contains a valid dial code, so replace it\n                            newNumber = inputVal.replace(prevDialCode, newDialCode);\n                        } else {\n                            // current number contains an invalid dial code, so ditch it\n                            // (no way to determine where the invalid dial code ends and the rest of the number begins)\n                            newNumber = newDialCode;\n                        }\n                    } else if (this.options.nationalMode || this.options.separateDialCode) {\n                        // don't do anything\n                        return;\n                    } else {\n                        // nationalMode is disabled\n                        if (inputVal) {\n                            // there is an existing value with no dial code: prefix the new dial code\n                            newNumber = newDialCode + inputVal;\n                        } else if (hasSelectedListItem || !this.options.autoHideDialCode) {\n                            // no existing value and either they've just selected a list item, or autoHideDialCode is\n                            // disabled: insert new dial code\n                            newNumber = newDialCode;\n                        } else {\n                            return;\n                        }\n                    }\n                    this.telInput.value = newNumber;\n                }\n            }, {\n                key: \"_getDialCode\",\n                value: function _getDialCode(number, includeAreaCode) {\n                    var dialCode = \"\";\n                    // only interested in international numbers (starting with a plus)\n                    if (number.charAt(0) === \"+\") {\n                        var numericChars = \"\";\n                        // iterate over chars\n                        for (var i = 0; i < number.length; i++) {\n                            var c = number.charAt(i);\n                            // if char is number (https://stackoverflow.com/a/8935649/217866)\n                            if (!isNaN(parseInt(c, 10))) {\n                                numericChars += c;\n                                // if current numericChars make a valid dial code\n                                if (includeAreaCode) {\n                                    if (this.countryCodes[numericChars]) {\n                                        // store the actual raw string (useful for matching later)\n                                        dialCode = number.substr(0, i + 1);\n                                    }\n                                } else {\n                                    if (this.dialCodes[numericChars]) {\n                                        dialCode = number.substr(0, i + 1);\n                                        // if we're just looking for a dial code, we can break as soon as we find one\n                                        break;\n                                    }\n                                }\n                                // stop searching as soon as we can - in this case when we hit max len\n                                if (numericChars.length === this.countryCodeMaxLen) {\n                                    break;\n                                }\n                            }\n                        }\n                    }\n                    return dialCode;\n                }\n            }, {\n                key: \"_getFullNumber\",\n                value: function _getFullNumber() {\n                    var val = this.telInput.value.trim();\n                    var dialCode = this.selectedCountryData.dialCode;\n                    var prefix;\n                    var numericVal = this._getNumeric(val);\n                    if (this.options.separateDialCode && val.charAt(0) !== \"+\" && dialCode && numericVal) {\n                        // when using separateDialCode, it is visible so is effectively part of the typed number\n                        prefix = \"+\".concat(dialCode);\n                    } else {\n                        prefix = \"\";\n                    }\n                    return prefix + val;\n                }\n            }, {\n                key: \"_beforeSetNumber\",\n                value: function _beforeSetNumber(originalNumber) {\n                    var number = originalNumber;\n                    if (this.options.separateDialCode) {\n                        var dialCode = this._getDialCode(number);\n                        // if there is a valid dial code\n                        if (dialCode) {\n                            // in case _getDialCode returned an area code as well\n                            dialCode = \"+\".concat(this.selectedCountryData.dialCode);\n                            // a lot of numbers will have a space separating the dial code and the main number, and\n                            // some NANP numbers will have a hyphen e.g. +1 684-733-1234 - in both cases we want to get\n                            // rid of it\n                            // NOTE: don't just trim all non-numerics as may want to preserve an open parenthesis etc\n                            var start = number[dialCode.length] === \" \" || number[dialCode.length] === \"-\" ? dialCode.length + 1 : dialCode.length;\n                            number = number.substr(start);\n                        }\n                    }\n                    return this._cap(number);\n                }\n            }, {\n                key: \"_triggerCountryChange\",\n                value: function _triggerCountryChange() {\n                    this._trigger(\"countrychange\");\n                }\n            }, {\n                key: \"handleAutoCountry\",\n                value: function handleAutoCountry() {\n                    if (this.options.initialCountry === \"auto\") {\n                        // we must set this even if there is an initial val in the input: in case the initial val is\n                        // invalid and they delete it - they should see their auto country\n                        this.defaultCountry = window.intlTelInputGlobals.autoCountry;\n                        // if there's no initial value in the input, then update the flag\n                        if (!this.telInput.value) {\n                            this.setCountry(this.defaultCountry);\n                        }\n                        this.resolveAutoCountryPromise();\n                    }\n                }\n            }, {\n                key: \"handleUtils\",\n                value: function handleUtils() {\n                    // if the request was successful\n                    if (window.intlTelInputUtils) {\n                        // if there's an initial value in the input, then format it\n                        if (this.telInput.value) {\n                            this._updateValFromNumber(this.telInput.value);\n                        }\n                        this._updatePlaceholder();\n                    }\n                    this.resolveUtilsScriptPromise();\n                }\n            }, {\n                key: \"destroy\",\n                value: function destroy() {\n                    var form = this.telInput.form;\n                    if (this.options.allowDropdown) {\n                        // make sure the dropdown is closed (and unbind listeners)\n                        this._closeDropdown();\n                        this.selectedFlag.removeEventListener(\"click\", this._handleClickSelectedFlag);\n                        this.flagsContainer.removeEventListener(\"keydown\", this._handleFlagsContainerKeydown);\n                        // label click hack\n                        var label = this._getClosestLabel();\n                        if (label) label.removeEventListener(\"click\", this._handleLabelClick);\n                    }\n                    // unbind hiddenInput listeners\n                    if (this.hiddenInput && form) form.removeEventListener(\"submit\", this._handleHiddenInputSubmit);\n                    // unbind autoHideDialCode listeners\n                    if (this.options.autoHideDialCode) {\n                        if (form) form.removeEventListener(\"submit\", this._handleSubmitOrBlurEvent);\n                        this.telInput.removeEventListener(\"blur\", this._handleSubmitOrBlurEvent);\n                    }\n                    // unbind key events, and cut/paste events\n                    this.telInput.removeEventListener(\"keyup\", this._handleKeyupEvent);\n                    this.telInput.removeEventListener(\"cut\", this._handleClipboardEvent);\n                    this.telInput.removeEventListener(\"paste\", this._handleClipboardEvent);\n                    // remove attribute of id instance: data-intl-tel-input-id\n                    this.telInput.removeAttribute(\"data-intl-tel-input-id\");\n                    // remove markup (but leave the original input)\n                    var wrapper = this.telInput.parentNode;\n                    wrapper.parentNode.insertBefore(this.telInput, wrapper);\n                    wrapper.parentNode.removeChild(wrapper);\n                    delete window.intlTelInputGlobals.instances[this.id];\n                }\n            }, {\n                key: \"getExtension\",\n                value: function getExtension() {\n                    if (window.intlTelInputUtils) {\n                        return intlTelInputUtils.getExtension(this._getFullNumber(), this.selectedCountryData.iso2);\n                    }\n                    return \"\";\n                }\n            }, {\n                key: \"getNumber\",\n                value: function getNumber(format) {\n                    if (window.intlTelInputUtils) {\n                        var iso2 = this.selectedCountryData.iso2;\n                        return intlTelInputUtils.formatNumber(this._getFullNumber(), iso2, format);\n                    }\n                    return \"\";\n                }\n            }, {\n                key: \"getNumberType\",\n                value: function getNumberType() {\n                    if (window.intlTelInputUtils) {\n                        return intlTelInputUtils.getNumberType(this._getFullNumber(), this.selectedCountryData.iso2);\n                    }\n                    return -99;\n                }\n            }, {\n                key: \"getSelectedCountryData\",\n                value: function getSelectedCountryData() {\n                    return this.selectedCountryData;\n                }\n            }, {\n                key: \"getValidationError\",\n                value: function getValidationError() {\n                    if (window.intlTelInputUtils) {\n                        var iso2 = this.selectedCountryData.iso2;\n                        return intlTelInputUtils.getValidationError(this._getFullNumber(), iso2);\n                    }\n                    return -99;\n                }\n            }, {\n                key: \"isValidNumber\",\n                value: function isValidNumber() {\n                    var val = this._getFullNumber().trim();\n                    var countryCode = this.options.nationalMode ? this.selectedCountryData.iso2 : \"\";\n                    return window.intlTelInputUtils ? intlTelInputUtils.isValidNumber(val, countryCode) : null;\n                }\n            }, {\n                key: \"setCountry\",\n                value: function setCountry(originalCountryCode) {\n                    var countryCode = originalCountryCode.toLowerCase();\n                    // check if already selected\n                    if (!this.selectedFlagInner.classList.contains(\"iti__\".concat(countryCode))) {\n                        this._setFlag(countryCode);\n                        this._updateDialCode(this.selectedCountryData.dialCode, false);\n                        this._triggerCountryChange();\n                    }\n                }\n            }, {\n                key: \"setNumber\",\n                value: function setNumber(number) {\n                    // we must update the flag first, which updates this.selectedCountryData, which is used for\n                    // formatting the number before displaying it\n                    var flagChanged = this._updateFlagFromNumber(number);\n                    this._updateValFromNumber(number);\n                    if (flagChanged) {\n                        this._triggerCountryChange();\n                    }\n                }\n            }, {\n                key: \"setPlaceholderNumberType\",\n                value: function setPlaceholderNumberType(type) {\n                    this.options.placeholderNumberType = type;\n                    this._updatePlaceholder();\n                }\n            } ]);\n            return Iti;\n        }();\n        /********************\n *  STATIC METHODS\n ********************/\n        // get the country data object\n        intlTelInputGlobals.getCountryData = function() {\n            return allCountries;\n        };\n        // inject a <script> element to load utils.js\n        var injectScript = function injectScript(path, handleSuccess, handleFailure) {\n            // inject a new script element into the page\n            var script = document.createElement(\"script\");\n            script.onload = function() {\n                forEachInstance(\"handleUtils\");\n                if (handleSuccess) handleSuccess();\n            };\n            script.onerror = function() {\n                forEachInstance(\"rejectUtilsScriptPromise\");\n                if (handleFailure) handleFailure();\n            };\n            script.className = \"iti-load-utils\";\n            script.async = true;\n            script.src = path;\n            document.body.appendChild(script);\n        };\n        // load the utils script\n        intlTelInputGlobals.loadUtils = function(path) {\n            // 2 options:\n            // 1) not already started loading (start)\n            // 2) already started loading (do nothing - just wait for the onload callback to fire, which will\n            // trigger handleUtils on all instances, invoking their resolveUtilsScriptPromise functions)\n            if (!window.intlTelInputUtils && !window.intlTelInputGlobals.startedLoadingUtilsScript) {\n                // only do this once\n                window.intlTelInputGlobals.startedLoadingUtilsScript = true;\n                // if we have promises, then return a promise\n                if (typeof Promise !== \"undefined\") {\n                    return new Promise(function(resolve, reject) {\n                        return injectScript(path, resolve, reject);\n                    });\n                }\n                injectScript(path);\n            }\n            return null;\n        };\n        // default options\n        intlTelInputGlobals.defaults = defaults;\n        // version\n        intlTelInputGlobals.version = \"17.0.19\";\n        // convenience wrapper\n        return function(input, options) {\n            var iti = new Iti(input, options);\n            iti._init();\n            input.setAttribute(\"data-intl-tel-input-id\", iti.id);\n            window.intlTelInputGlobals.instances[iti.id] = iti;\n            return iti;\n        };\n    }();\n});","/**\n * Exposing intl-tel-input as a component\n */\nmodule.exports = require(\"./build/js/intlTelInput\");\n","/**\n * Copyright (c) Tiny Technologies, Inc. All rights reserved.\n * Licensed under the LGPL or a commercial license.\n * For LGPL see License.txt in the project root for license information.\n * For commercial licenses see https://www.tiny.cloud/\n *\n * Version: 5.9.2 (2021-09-08)\n */\n(function () {\n    'use strict';\n\n    var typeOf$1 = function (x) {\n      if (x === null) {\n        return 'null';\n      }\n      if (x === undefined) {\n        return 'undefined';\n      }\n      var t = typeof x;\n      if (t === 'object' && (Array.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'Array')) {\n        return 'array';\n      }\n      if (t === 'object' && (String.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'String')) {\n        return 'string';\n      }\n      return t;\n    };\n    var isEquatableType = function (x) {\n      return [\n        'undefined',\n        'boolean',\n        'number',\n        'string',\n        'function',\n        'xml',\n        'null'\n      ].indexOf(x) !== -1;\n    };\n\n    var sort$1 = function (xs, compareFn) {\n      var clone = Array.prototype.slice.call(xs);\n      return clone.sort(compareFn);\n    };\n\n    var contramap = function (eqa, f) {\n      return eq$2(function (x, y) {\n        return eqa.eq(f(x), f(y));\n      });\n    };\n    var eq$2 = function (f) {\n      return { eq: f };\n    };\n    var tripleEq = eq$2(function (x, y) {\n      return x === y;\n    });\n    var eqString = tripleEq;\n    var eqArray = function (eqa) {\n      return eq$2(function (x, y) {\n        if (x.length !== y.length) {\n          return false;\n        }\n        var len = x.length;\n        for (var i = 0; i < len; i++) {\n          if (!eqa.eq(x[i], y[i])) {\n            return false;\n          }\n        }\n        return true;\n      });\n    };\n    var eqSortedArray = function (eqa, compareFn) {\n      return contramap(eqArray(eqa), function (xs) {\n        return sort$1(xs, compareFn);\n      });\n    };\n    var eqRecord = function (eqa) {\n      return eq$2(function (x, y) {\n        var kx = Object.keys(x);\n        var ky = Object.keys(y);\n        if (!eqSortedArray(eqString).eq(kx, ky)) {\n          return false;\n        }\n        var len = kx.length;\n        for (var i = 0; i < len; i++) {\n          var q = kx[i];\n          if (!eqa.eq(x[q], y[q])) {\n            return false;\n          }\n        }\n        return true;\n      });\n    };\n    var eqAny = eq$2(function (x, y) {\n      if (x === y) {\n        return true;\n      }\n      var tx = typeOf$1(x);\n      var ty = typeOf$1(y);\n      if (tx !== ty) {\n        return false;\n      }\n      if (isEquatableType(tx)) {\n        return x === y;\n      } else if (tx === 'array') {\n        return eqArray(eqAny).eq(x, y);\n      } else if (tx === 'object') {\n        return eqRecord(eqAny).eq(x, y);\n      }\n      return false;\n    });\n\n    var typeOf = function (x) {\n      var t = typeof x;\n      if (x === null) {\n        return 'null';\n      } else if (t === 'object' && (Array.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'Array')) {\n        return 'array';\n      } else if (t === 'object' && (String.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'String')) {\n        return 'string';\n      } else {\n        return t;\n      }\n    };\n    var isType$1 = function (type) {\n      return function (value) {\n        return typeOf(value) === type;\n      };\n    };\n    var isSimpleType = function (type) {\n      return function (value) {\n        return typeof value === type;\n      };\n    };\n    var eq$1 = function (t) {\n      return function (a) {\n        return t === a;\n      };\n    };\n    var isString$1 = isType$1('string');\n    var isObject = isType$1('object');\n    var isArray$1 = isType$1('array');\n    var isNull = eq$1(null);\n    var isBoolean = isSimpleType('boolean');\n    var isUndefined = eq$1(undefined);\n    var isNullable = function (a) {\n      return a === null || a === undefined;\n    };\n    var isNonNullable = function (a) {\n      return !isNullable(a);\n    };\n    var isFunction = isSimpleType('function');\n    var isNumber = isSimpleType('number');\n\n    var noop = function () {\n    };\n    var compose = function (fa, fb) {\n      return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        return fa(fb.apply(null, args));\n      };\n    };\n    var compose1 = function (fbc, fab) {\n      return function (a) {\n        return fbc(fab(a));\n      };\n    };\n    var constant = function (value) {\n      return function () {\n        return value;\n      };\n    };\n    var identity = function (x) {\n      return x;\n    };\n    var tripleEquals = function (a, b) {\n      return a === b;\n    };\n    function curry(fn) {\n      var initialArgs = [];\n      for (var _i = 1; _i < arguments.length; _i++) {\n        initialArgs[_i - 1] = arguments[_i];\n      }\n      return function () {\n        var restArgs = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          restArgs[_i] = arguments[_i];\n        }\n        var all = initialArgs.concat(restArgs);\n        return fn.apply(null, all);\n      };\n    }\n    var not = function (f) {\n      return function (t) {\n        return !f(t);\n      };\n    };\n    var die = function (msg) {\n      return function () {\n        throw new Error(msg);\n      };\n    };\n    var apply = function (f) {\n      return f();\n    };\n    var call = function (f) {\n      f();\n    };\n    var never = constant(false);\n    var always = constant(true);\n\n    var none = function () {\n      return NONE;\n    };\n    var NONE = function () {\n      var call = function (thunk) {\n        return thunk();\n      };\n      var id = identity;\n      var me = {\n        fold: function (n, _s) {\n          return n();\n        },\n        isSome: never,\n        isNone: always,\n        getOr: id,\n        getOrThunk: call,\n        getOrDie: function (msg) {\n          throw new Error(msg || 'error: getOrDie called on none.');\n        },\n        getOrNull: constant(null),\n        getOrUndefined: constant(undefined),\n        or: id,\n        orThunk: call,\n        map: none,\n        each: noop,\n        bind: none,\n        exists: never,\n        forall: always,\n        filter: function () {\n          return none();\n        },\n        toArray: function () {\n          return [];\n        },\n        toString: constant('none()')\n      };\n      return me;\n    }();\n    var some = function (a) {\n      var constant_a = constant(a);\n      var self = function () {\n        return me;\n      };\n      var bind = function (f) {\n        return f(a);\n      };\n      var me = {\n        fold: function (n, s) {\n          return s(a);\n        },\n        isSome: always,\n        isNone: never,\n        getOr: constant_a,\n        getOrThunk: constant_a,\n        getOrDie: constant_a,\n        getOrNull: constant_a,\n        getOrUndefined: constant_a,\n        or: self,\n        orThunk: self,\n        map: function (f) {\n          return some(f(a));\n        },\n        each: function (f) {\n          f(a);\n        },\n        bind: bind,\n        exists: bind,\n        forall: bind,\n        filter: function (f) {\n          return f(a) ? me : NONE;\n        },\n        toArray: function () {\n          return [a];\n        },\n        toString: function () {\n          return 'some(' + a + ')';\n        }\n      };\n      return me;\n    };\n    var from$1 = function (value) {\n      return value === null || value === undefined ? NONE : some(value);\n    };\n    var Optional = {\n      some: some,\n      none: none,\n      from: from$1\n    };\n\n    var nativeSlice = Array.prototype.slice;\n    var nativeIndexOf = Array.prototype.indexOf;\n    var nativePush = Array.prototype.push;\n    var rawIndexOf = function (ts, t) {\n      return nativeIndexOf.call(ts, t);\n    };\n    var indexOf$2 = function (xs, x) {\n      var r = rawIndexOf(xs, x);\n      return r === -1 ? Optional.none() : Optional.some(r);\n    };\n    var contains$3 = function (xs, x) {\n      return rawIndexOf(xs, x) > -1;\n    };\n    var exists = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          return true;\n        }\n      }\n      return false;\n    };\n    var map$3 = function (xs, f) {\n      var len = xs.length;\n      var r = new Array(len);\n      for (var i = 0; i < len; i++) {\n        var x = xs[i];\n        r[i] = f(x, i);\n      }\n      return r;\n    };\n    var each$k = function (xs, f) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        f(x, i);\n      }\n    };\n    var eachr = function (xs, f) {\n      for (var i = xs.length - 1; i >= 0; i--) {\n        var x = xs[i];\n        f(x, i);\n      }\n    };\n    var partition = function (xs, pred) {\n      var pass = [];\n      var fail = [];\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        var arr = pred(x, i) ? pass : fail;\n        arr.push(x);\n      }\n      return {\n        pass: pass,\n        fail: fail\n      };\n    };\n    var filter$4 = function (xs, pred) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          r.push(x);\n        }\n      }\n      return r;\n    };\n    var foldr = function (xs, f, acc) {\n      eachr(xs, function (x, i) {\n        acc = f(acc, x, i);\n      });\n      return acc;\n    };\n    var foldl = function (xs, f, acc) {\n      each$k(xs, function (x, i) {\n        acc = f(acc, x, i);\n      });\n      return acc;\n    };\n    var findUntil$1 = function (xs, pred, until) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          return Optional.some(x);\n        } else if (until(x, i)) {\n          break;\n        }\n      }\n      return Optional.none();\n    };\n    var find$3 = function (xs, pred) {\n      return findUntil$1(xs, pred, never);\n    };\n    var findIndex$2 = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          return Optional.some(i);\n        }\n      }\n      return Optional.none();\n    };\n    var flatten = function (xs) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; ++i) {\n        if (!isArray$1(xs[i])) {\n          throw new Error('Arr.flatten item ' + i + ' was not an array, input: ' + xs);\n        }\n        nativePush.apply(r, xs[i]);\n      }\n      return r;\n    };\n    var bind = function (xs, f) {\n      return flatten(map$3(xs, f));\n    };\n    var forall = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; ++i) {\n        var x = xs[i];\n        if (pred(x, i) !== true) {\n          return false;\n        }\n      }\n      return true;\n    };\n    var reverse = function (xs) {\n      var r = nativeSlice.call(xs, 0);\n      r.reverse();\n      return r;\n    };\n    var difference = function (a1, a2) {\n      return filter$4(a1, function (x) {\n        return !contains$3(a2, x);\n      });\n    };\n    var mapToObject = function (xs, f) {\n      var r = {};\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        r[String(x)] = f(x, i);\n      }\n      return r;\n    };\n    var sort = function (xs, comparator) {\n      var copy = nativeSlice.call(xs, 0);\n      copy.sort(comparator);\n      return copy;\n    };\n    var get$a = function (xs, i) {\n      return i >= 0 && i < xs.length ? Optional.some(xs[i]) : Optional.none();\n    };\n    var head = function (xs) {\n      return get$a(xs, 0);\n    };\n    var last$2 = function (xs) {\n      return get$a(xs, xs.length - 1);\n    };\n    var from = isFunction(Array.from) ? Array.from : function (x) {\n      return nativeSlice.call(x);\n    };\n    var findMap = function (arr, f) {\n      for (var i = 0; i < arr.length; i++) {\n        var r = f(arr[i], i);\n        if (r.isSome()) {\n          return r;\n        }\n      }\n      return Optional.none();\n    };\n\n    var keys = Object.keys;\n    var hasOwnProperty$1 = Object.hasOwnProperty;\n    var each$j = function (obj, f) {\n      var props = keys(obj);\n      for (var k = 0, len = props.length; k < len; k++) {\n        var i = props[k];\n        var x = obj[i];\n        f(x, i);\n      }\n    };\n    var map$2 = function (obj, f) {\n      return tupleMap(obj, function (x, i) {\n        return {\n          k: i,\n          v: f(x, i)\n        };\n      });\n    };\n    var tupleMap = function (obj, f) {\n      var r = {};\n      each$j(obj, function (x, i) {\n        var tuple = f(x, i);\n        r[tuple.k] = tuple.v;\n      });\n      return r;\n    };\n    var objAcc = function (r) {\n      return function (x, i) {\n        r[i] = x;\n      };\n    };\n    var internalFilter = function (obj, pred, onTrue, onFalse) {\n      var r = {};\n      each$j(obj, function (x, i) {\n        (pred(x, i) ? onTrue : onFalse)(x, i);\n      });\n      return r;\n    };\n    var bifilter = function (obj, pred) {\n      var t = {};\n      var f = {};\n      internalFilter(obj, pred, objAcc(t), objAcc(f));\n      return {\n        t: t,\n        f: f\n      };\n    };\n    var filter$3 = function (obj, pred) {\n      var t = {};\n      internalFilter(obj, pred, objAcc(t), noop);\n      return t;\n    };\n    var mapToArray = function (obj, f) {\n      var r = [];\n      each$j(obj, function (value, name) {\n        r.push(f(value, name));\n      });\n      return r;\n    };\n    var values = function (obj) {\n      return mapToArray(obj, identity);\n    };\n    var get$9 = function (obj, key) {\n      return has$2(obj, key) ? Optional.from(obj[key]) : Optional.none();\n    };\n    var has$2 = function (obj, key) {\n      return hasOwnProperty$1.call(obj, key);\n    };\n    var hasNonNullableKey = function (obj, key) {\n      return has$2(obj, key) && obj[key] !== undefined && obj[key] !== null;\n    };\n    var equal$1 = function (a1, a2, eq) {\n      if (eq === void 0) {\n        eq = eqAny;\n      }\n      return eqRecord(eq).eq(a1, a2);\n    };\n\n    var isArray = Array.isArray;\n    var toArray$1 = function (obj) {\n      if (!isArray(obj)) {\n        var array = [];\n        for (var i = 0, l = obj.length; i < l; i++) {\n          array[i] = obj[i];\n        }\n        return array;\n      } else {\n        return obj;\n      }\n    };\n    var each$i = function (o, cb, s) {\n      var n, l;\n      if (!o) {\n        return false;\n      }\n      s = s || o;\n      if (o.length !== undefined) {\n        for (n = 0, l = o.length; n < l; n++) {\n          if (cb.call(s, o[n], n, o) === false) {\n            return false;\n          }\n        }\n      } else {\n        for (n in o) {\n          if (has$2(o, n)) {\n            if (cb.call(s, o[n], n, o) === false) {\n              return false;\n            }\n          }\n        }\n      }\n      return true;\n    };\n    var map$1 = function (array, callback) {\n      var out = [];\n      each$i(array, function (item, index) {\n        out.push(callback(item, index, array));\n      });\n      return out;\n    };\n    var filter$2 = function (a, f) {\n      var o = [];\n      each$i(a, function (v, index) {\n        if (!f || f(v, index, a)) {\n          o.push(v);\n        }\n      });\n      return o;\n    };\n    var indexOf$1 = function (a, v) {\n      if (a) {\n        for (var i = 0, l = a.length; i < l; i++) {\n          if (a[i] === v) {\n            return i;\n          }\n        }\n      }\n      return -1;\n    };\n    var reduce = function (collection, iteratee, accumulator, thisArg) {\n      var acc = isUndefined(accumulator) ? collection[0] : accumulator;\n      for (var i = 0; i < collection.length; i++) {\n        acc = iteratee.call(thisArg, acc, collection[i], i);\n      }\n      return acc;\n    };\n    var findIndex$1 = function (array, predicate, thisArg) {\n      var i, l;\n      for (i = 0, l = array.length; i < l; i++) {\n        if (predicate.call(thisArg, array[i], i, array)) {\n          return i;\n        }\n      }\n      return -1;\n    };\n    var last$1 = function (collection) {\n      return collection[collection.length - 1];\n    };\n\n    var __assign = function () {\n      __assign = Object.assign || function __assign(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n          s = arguments[i];\n          for (var p in s)\n            if (Object.prototype.hasOwnProperty.call(s, p))\n              t[p] = s[p];\n        }\n        return t;\n      };\n      return __assign.apply(this, arguments);\n    };\n    function __rest(s, e) {\n      var t = {};\n      for (var p in s)\n        if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n          t[p] = s[p];\n      if (s != null && typeof Object.getOwnPropertySymbols === 'function')\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n          if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n            t[p[i]] = s[p[i]];\n        }\n      return t;\n    }\n    function __spreadArray(to, from, pack) {\n      if (pack || arguments.length === 2)\n        for (var i = 0, l = from.length, ar; i < l; i++) {\n          if (ar || !(i in from)) {\n            if (!ar)\n              ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n          }\n        }\n      return to.concat(ar || Array.prototype.slice.call(from));\n    }\n\n    var cached = function (f) {\n      var called = false;\n      var r;\n      return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        if (!called) {\n          called = true;\n          r = f.apply(null, args);\n        }\n        return r;\n      };\n    };\n\n    var DeviceType = function (os, browser, userAgent, mediaMatch) {\n      var isiPad = os.isiOS() && /ipad/i.test(userAgent) === true;\n      var isiPhone = os.isiOS() && !isiPad;\n      var isMobile = os.isiOS() || os.isAndroid();\n      var isTouch = isMobile || mediaMatch('(pointer:coarse)');\n      var isTablet = isiPad || !isiPhone && isMobile && mediaMatch('(min-device-width:768px)');\n      var isPhone = isiPhone || isMobile && !isTablet;\n      var iOSwebview = browser.isSafari() && os.isiOS() && /safari/i.test(userAgent) === false;\n      var isDesktop = !isPhone && !isTablet && !iOSwebview;\n      return {\n        isiPad: constant(isiPad),\n        isiPhone: constant(isiPhone),\n        isTablet: constant(isTablet),\n        isPhone: constant(isPhone),\n        isTouch: constant(isTouch),\n        isAndroid: os.isAndroid,\n        isiOS: os.isiOS,\n        isWebView: constant(iOSwebview),\n        isDesktop: constant(isDesktop)\n      };\n    };\n\n    var firstMatch = function (regexes, s) {\n      for (var i = 0; i < regexes.length; i++) {\n        var x = regexes[i];\n        if (x.test(s)) {\n          return x;\n        }\n      }\n      return undefined;\n    };\n    var find$2 = function (regexes, agent) {\n      var r = firstMatch(regexes, agent);\n      if (!r) {\n        return {\n          major: 0,\n          minor: 0\n        };\n      }\n      var group = function (i) {\n        return Number(agent.replace(r, '$' + i));\n      };\n      return nu$4(group(1), group(2));\n    };\n    var detect$3 = function (versionRegexes, agent) {\n      var cleanedAgent = String(agent).toLowerCase();\n      if (versionRegexes.length === 0) {\n        return unknown$2();\n      }\n      return find$2(versionRegexes, cleanedAgent);\n    };\n    var unknown$2 = function () {\n      return nu$4(0, 0);\n    };\n    var nu$4 = function (major, minor) {\n      return {\n        major: major,\n        minor: minor\n      };\n    };\n    var Version = {\n      nu: nu$4,\n      detect: detect$3,\n      unknown: unknown$2\n    };\n\n    var detectBrowser$1 = function (browsers, userAgentData) {\n      return findMap(userAgentData.brands, function (uaBrand) {\n        var lcBrand = uaBrand.brand.toLowerCase();\n        return find$3(browsers, function (browser) {\n          var _a;\n          return lcBrand === ((_a = browser.brand) === null || _a === void 0 ? void 0 : _a.toLowerCase());\n        }).map(function (info) {\n          return {\n            current: info.name,\n            version: Version.nu(parseInt(uaBrand.version, 10), 0)\n          };\n        });\n      });\n    };\n\n    var detect$2 = function (candidates, userAgent) {\n      var agent = String(userAgent).toLowerCase();\n      return find$3(candidates, function (candidate) {\n        return candidate.search(agent);\n      });\n    };\n    var detectBrowser = function (browsers, userAgent) {\n      return detect$2(browsers, userAgent).map(function (browser) {\n        var version = Version.detect(browser.versionRegexes, userAgent);\n        return {\n          current: browser.name,\n          version: version\n        };\n      });\n    };\n    var detectOs = function (oses, userAgent) {\n      return detect$2(oses, userAgent).map(function (os) {\n        var version = Version.detect(os.versionRegexes, userAgent);\n        return {\n          current: os.name,\n          version: version\n        };\n      });\n    };\n\n    var removeFromStart = function (str, numChars) {\n      return str.substring(numChars);\n    };\n\n    var checkRange = function (str, substr, start) {\n      return substr === '' || str.length >= substr.length && str.substr(start, start + substr.length) === substr;\n    };\n    var removeLeading = function (str, prefix) {\n      return startsWith(str, prefix) ? removeFromStart(str, prefix.length) : str;\n    };\n    var contains$2 = function (str, substr) {\n      return str.indexOf(substr) !== -1;\n    };\n    var startsWith = function (str, prefix) {\n      return checkRange(str, prefix, 0);\n    };\n    var blank = function (r) {\n      return function (s) {\n        return s.replace(r, '');\n      };\n    };\n    var trim$4 = blank(/^\\s+|\\s+$/g);\n    var lTrim = blank(/^\\s+/g);\n    var rTrim = blank(/\\s+$/g);\n    var isNotEmpty = function (s) {\n      return s.length > 0;\n    };\n    var isEmpty$3 = function (s) {\n      return !isNotEmpty(s);\n    };\n\n    var normalVersionRegex = /.*?version\\/\\ ?([0-9]+)\\.([0-9]+).*/;\n    var checkContains = function (target) {\n      return function (uastring) {\n        return contains$2(uastring, target);\n      };\n    };\n    var browsers = [\n      {\n        name: 'Edge',\n        versionRegexes: [/.*?edge\\/ ?([0-9]+)\\.([0-9]+)$/],\n        search: function (uastring) {\n          return contains$2(uastring, 'edge/') && contains$2(uastring, 'chrome') && contains$2(uastring, 'safari') && contains$2(uastring, 'applewebkit');\n        }\n      },\n      {\n        name: 'Chrome',\n        brand: 'Chromium',\n        versionRegexes: [\n          /.*?chrome\\/([0-9]+)\\.([0-9]+).*/,\n          normalVersionRegex\n        ],\n        search: function (uastring) {\n          return contains$2(uastring, 'chrome') && !contains$2(uastring, 'chromeframe');\n        }\n      },\n      {\n        name: 'IE',\n        versionRegexes: [\n          /.*?msie\\ ?([0-9]+)\\.([0-9]+).*/,\n          /.*?rv:([0-9]+)\\.([0-9]+).*/\n        ],\n        search: function (uastring) {\n          return contains$2(uastring, 'msie') || contains$2(uastring, 'trident');\n        }\n      },\n      {\n        name: 'Opera',\n        versionRegexes: [\n          normalVersionRegex,\n          /.*?opera\\/([0-9]+)\\.([0-9]+).*/\n        ],\n        search: checkContains('opera')\n      },\n      {\n        name: 'Firefox',\n        versionRegexes: [/.*?firefox\\/\\ ?([0-9]+)\\.([0-9]+).*/],\n        search: checkContains('firefox')\n      },\n      {\n        name: 'Safari',\n        versionRegexes: [\n          normalVersionRegex,\n          /.*?cpu os ([0-9]+)_([0-9]+).*/\n        ],\n        search: function (uastring) {\n          return (contains$2(uastring, 'safari') || contains$2(uastring, 'mobile/')) && contains$2(uastring, 'applewebkit');\n        }\n      }\n    ];\n    var oses = [\n      {\n        name: 'Windows',\n        search: checkContains('win'),\n        versionRegexes: [/.*?windows\\ nt\\ ?([0-9]+)\\.([0-9]+).*/]\n      },\n      {\n        name: 'iOS',\n        search: function (uastring) {\n          return contains$2(uastring, 'iphone') || contains$2(uastring, 'ipad');\n        },\n        versionRegexes: [\n          /.*?version\\/\\ ?([0-9]+)\\.([0-9]+).*/,\n          /.*cpu os ([0-9]+)_([0-9]+).*/,\n          /.*cpu iphone os ([0-9]+)_([0-9]+).*/\n        ]\n      },\n      {\n        name: 'Android',\n        search: checkContains('android'),\n        versionRegexes: [/.*?android\\ ?([0-9]+)\\.([0-9]+).*/]\n      },\n      {\n        name: 'OSX',\n        search: checkContains('mac os x'),\n        versionRegexes: [/.*?mac\\ os\\ x\\ ?([0-9]+)_([0-9]+).*/]\n      },\n      {\n        name: 'Linux',\n        search: checkContains('linux'),\n        versionRegexes: []\n      },\n      {\n        name: 'Solaris',\n        search: checkContains('sunos'),\n        versionRegexes: []\n      },\n      {\n        name: 'FreeBSD',\n        search: checkContains('freebsd'),\n        versionRegexes: []\n      },\n      {\n        name: 'ChromeOS',\n        search: checkContains('cros'),\n        versionRegexes: [/.*?chrome\\/([0-9]+)\\.([0-9]+).*/]\n      }\n    ];\n    var PlatformInfo = {\n      browsers: constant(browsers),\n      oses: constant(oses)\n    };\n\n    var edge = 'Edge';\n    var chrome = 'Chrome';\n    var ie$1 = 'IE';\n    var opera = 'Opera';\n    var firefox = 'Firefox';\n    var safari = 'Safari';\n    var unknown$1 = function () {\n      return nu$3({\n        current: undefined,\n        version: Version.unknown()\n      });\n    };\n    var nu$3 = function (info) {\n      var current = info.current;\n      var version = info.version;\n      var isBrowser = function (name) {\n        return function () {\n          return current === name;\n        };\n      };\n      return {\n        current: current,\n        version: version,\n        isEdge: isBrowser(edge),\n        isChrome: isBrowser(chrome),\n        isIE: isBrowser(ie$1),\n        isOpera: isBrowser(opera),\n        isFirefox: isBrowser(firefox),\n        isSafari: isBrowser(safari)\n      };\n    };\n    var Browser = {\n      unknown: unknown$1,\n      nu: nu$3,\n      edge: constant(edge),\n      chrome: constant(chrome),\n      ie: constant(ie$1),\n      opera: constant(opera),\n      firefox: constant(firefox),\n      safari: constant(safari)\n    };\n\n    var windows = 'Windows';\n    var ios = 'iOS';\n    var android = 'Android';\n    var linux = 'Linux';\n    var osx = 'OSX';\n    var solaris = 'Solaris';\n    var freebsd = 'FreeBSD';\n    var chromeos = 'ChromeOS';\n    var unknown = function () {\n      return nu$2({\n        current: undefined,\n        version: Version.unknown()\n      });\n    };\n    var nu$2 = function (info) {\n      var current = info.current;\n      var version = info.version;\n      var isOS = function (name) {\n        return function () {\n          return current === name;\n        };\n      };\n      return {\n        current: current,\n        version: version,\n        isWindows: isOS(windows),\n        isiOS: isOS(ios),\n        isAndroid: isOS(android),\n        isOSX: isOS(osx),\n        isLinux: isOS(linux),\n        isSolaris: isOS(solaris),\n        isFreeBSD: isOS(freebsd),\n        isChromeOS: isOS(chromeos)\n      };\n    };\n    var OperatingSystem = {\n      unknown: unknown,\n      nu: nu$2,\n      windows: constant(windows),\n      ios: constant(ios),\n      android: constant(android),\n      linux: constant(linux),\n      osx: constant(osx),\n      solaris: constant(solaris),\n      freebsd: constant(freebsd),\n      chromeos: constant(chromeos)\n    };\n\n    var detect$1 = function (userAgent, userAgentDataOpt, mediaMatch) {\n      var browsers = PlatformInfo.browsers();\n      var oses = PlatformInfo.oses();\n      var browser = userAgentDataOpt.bind(function (userAgentData) {\n        return detectBrowser$1(browsers, userAgentData);\n      }).orThunk(function () {\n        return detectBrowser(browsers, userAgent);\n      }).fold(Browser.unknown, Browser.nu);\n      var os = detectOs(oses, userAgent).fold(OperatingSystem.unknown, OperatingSystem.nu);\n      var deviceType = DeviceType(os, browser, userAgent, mediaMatch);\n      return {\n        browser: browser,\n        os: os,\n        deviceType: deviceType\n      };\n    };\n    var PlatformDetection = { detect: detect$1 };\n\n    var mediaMatch = function (query) {\n      return window.matchMedia(query).matches;\n    };\n    var platform$2 = cached(function () {\n      return PlatformDetection.detect(navigator.userAgent, Optional.from(navigator.userAgentData), mediaMatch);\n    });\n    var detect = function () {\n      return platform$2();\n    };\n\n    var userAgent = navigator.userAgent;\n    var platform$1 = detect();\n    var browser$4 = platform$1.browser;\n    var os = platform$1.os;\n    var deviceType = platform$1.deviceType;\n    var webkit = /WebKit/.test(userAgent) && !browser$4.isEdge();\n    var fileApi = 'FormData' in window && 'FileReader' in window && 'URL' in window && !!URL.createObjectURL;\n    var windowsPhone = userAgent.indexOf('Windows Phone') !== -1;\n    var Env = {\n      opera: browser$4.isOpera(),\n      webkit: webkit,\n      ie: browser$4.isIE() || browser$4.isEdge() ? browser$4.version.major : false,\n      gecko: browser$4.isFirefox(),\n      mac: os.isOSX() || os.isiOS(),\n      iOS: deviceType.isiPad() || deviceType.isiPhone(),\n      android: os.isAndroid(),\n      contentEditable: true,\n      transparentSrc: 'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7',\n      caretAfter: true,\n      range: window.getSelection && 'Range' in window,\n      documentMode: browser$4.isIE() ? document.documentMode || 7 : 10,\n      fileApi: fileApi,\n      ceFalse: true,\n      cacheSuffix: null,\n      container: null,\n      experimentalShadowDom: false,\n      canHaveCSP: !browser$4.isIE(),\n      desktop: deviceType.isDesktop(),\n      windowsPhone: windowsPhone,\n      browser: {\n        current: browser$4.current,\n        version: browser$4.version,\n        isChrome: browser$4.isChrome,\n        isEdge: browser$4.isEdge,\n        isFirefox: browser$4.isFirefox,\n        isIE: browser$4.isIE,\n        isOpera: browser$4.isOpera,\n        isSafari: browser$4.isSafari\n      },\n      os: {\n        current: os.current,\n        version: os.version,\n        isAndroid: os.isAndroid,\n        isChromeOS: os.isChromeOS,\n        isFreeBSD: os.isFreeBSD,\n        isiOS: os.isiOS,\n        isLinux: os.isLinux,\n        isOSX: os.isOSX,\n        isSolaris: os.isSolaris,\n        isWindows: os.isWindows\n      },\n      deviceType: {\n        isDesktop: deviceType.isDesktop,\n        isiPad: deviceType.isiPad,\n        isiPhone: deviceType.isiPhone,\n        isPhone: deviceType.isPhone,\n        isTablet: deviceType.isTablet,\n        isTouch: deviceType.isTouch,\n        isWebView: deviceType.isWebView\n      }\n    };\n\n    var whiteSpaceRegExp$2 = /^\\s*|\\s*$/g;\n    var trim$3 = function (str) {\n      return str === null || str === undefined ? '' : ('' + str).replace(whiteSpaceRegExp$2, '');\n    };\n    var is$3 = function (obj, type) {\n      if (!type) {\n        return obj !== undefined;\n      }\n      if (type === 'array' && isArray(obj)) {\n        return true;\n      }\n      return typeof obj === type;\n    };\n    var makeMap$4 = function (items, delim, map) {\n      var i;\n      items = items || [];\n      delim = delim || ',';\n      if (typeof items === 'string') {\n        items = items.split(delim);\n      }\n      map = map || {};\n      i = items.length;\n      while (i--) {\n        map[items[i]] = {};\n      }\n      return map;\n    };\n    var hasOwnProperty = has$2;\n    var create$9 = function (s, p, root) {\n      var self = this;\n      var sp, scn, c, de = 0;\n      s = /^((static) )?([\\w.]+)(:([\\w.]+))?/.exec(s);\n      var cn = s[3].match(/(^|\\.)(\\w+)$/i)[2];\n      var ns = self.createNS(s[3].replace(/\\.\\w+$/, ''), root);\n      if (ns[cn]) {\n        return;\n      }\n      if (s[2] === 'static') {\n        ns[cn] = p;\n        if (this.onCreate) {\n          this.onCreate(s[2], s[3], ns[cn]);\n        }\n        return;\n      }\n      if (!p[cn]) {\n        p[cn] = function () {\n        };\n        de = 1;\n      }\n      ns[cn] = p[cn];\n      self.extend(ns[cn].prototype, p);\n      if (s[5]) {\n        sp = self.resolve(s[5]).prototype;\n        scn = s[5].match(/\\.(\\w+)$/i)[1];\n        c = ns[cn];\n        if (de) {\n          ns[cn] = function () {\n            return sp[scn].apply(this, arguments);\n          };\n        } else {\n          ns[cn] = function () {\n            this.parent = sp[scn];\n            return c.apply(this, arguments);\n          };\n        }\n        ns[cn].prototype[cn] = ns[cn];\n        self.each(sp, function (f, n) {\n          ns[cn].prototype[n] = sp[n];\n        });\n        self.each(p, function (f, n) {\n          if (sp[n]) {\n            ns[cn].prototype[n] = function () {\n              this.parent = sp[n];\n              return f.apply(this, arguments);\n            };\n          } else {\n            if (n !== cn) {\n              ns[cn].prototype[n] = f;\n            }\n          }\n        });\n      }\n      self.each(p.static, function (f, n) {\n        ns[cn][n] = f;\n      });\n    };\n    var extend$6 = function (obj) {\n      var exts = [];\n      for (var _i = 1; _i < arguments.length; _i++) {\n        exts[_i - 1] = arguments[_i];\n      }\n      for (var i = 0; i < exts.length; i++) {\n        var ext = exts[i];\n        for (var name_1 in ext) {\n          if (has$2(ext, name_1)) {\n            var value = ext[name_1];\n            if (value !== undefined) {\n              obj[name_1] = value;\n            }\n          }\n        }\n      }\n      return obj;\n    };\n    var walk$3 = function (o, f, n, s) {\n      s = s || this;\n      if (o) {\n        if (n) {\n          o = o[n];\n        }\n        each$i(o, function (o, i) {\n          if (f.call(s, o, i, n) === false) {\n            return false;\n          }\n          walk$3(o, f, n, s);\n        });\n      }\n    };\n    var createNS = function (n, o) {\n      var i, v;\n      o = o || window;\n      n = n.split('.');\n      for (i = 0; i < n.length; i++) {\n        v = n[i];\n        if (!o[v]) {\n          o[v] = {};\n        }\n        o = o[v];\n      }\n      return o;\n    };\n    var resolve$3 = function (n, o) {\n      var i, l;\n      o = o || window;\n      n = n.split('.');\n      for (i = 0, l = n.length; i < l; i++) {\n        o = o[n[i]];\n        if (!o) {\n          break;\n        }\n      }\n      return o;\n    };\n    var explode$4 = function (s, d) {\n      if (!s || is$3(s, 'array')) {\n        return s;\n      }\n      return map$1(s.split(d || ','), trim$3);\n    };\n    var _addCacheSuffix = function (url) {\n      var cacheSuffix = Env.cacheSuffix;\n      if (cacheSuffix) {\n        url += (url.indexOf('?') === -1 ? '?' : '&') + cacheSuffix;\n      }\n      return url;\n    };\n    var Tools = {\n      trim: trim$3,\n      isArray: isArray,\n      is: is$3,\n      toArray: toArray$1,\n      makeMap: makeMap$4,\n      each: each$i,\n      map: map$1,\n      grep: filter$2,\n      inArray: indexOf$1,\n      hasOwn: hasOwnProperty,\n      extend: extend$6,\n      create: create$9,\n      walk: walk$3,\n      createNS: createNS,\n      resolve: resolve$3,\n      explode: explode$4,\n      _addCacheSuffix: _addCacheSuffix\n    };\n\n    var fromHtml$1 = function (html, scope) {\n      var doc = scope || document;\n      var div = doc.createElement('div');\n      div.innerHTML = html;\n      if (!div.hasChildNodes() || div.childNodes.length > 1) {\n        console.error('HTML does not have a single root node', html);\n        throw new Error('HTML must have a single root node');\n      }\n      return fromDom$2(div.childNodes[0]);\n    };\n    var fromTag = function (tag, scope) {\n      var doc = scope || document;\n      var node = doc.createElement(tag);\n      return fromDom$2(node);\n    };\n    var fromText = function (text, scope) {\n      var doc = scope || document;\n      var node = doc.createTextNode(text);\n      return fromDom$2(node);\n    };\n    var fromDom$2 = function (node) {\n      if (node === null || node === undefined) {\n        throw new Error('Node cannot be null or undefined');\n      }\n      return { dom: node };\n    };\n    var fromPoint$1 = function (docElm, x, y) {\n      return Optional.from(docElm.dom.elementFromPoint(x, y)).map(fromDom$2);\n    };\n    var SugarElement = {\n      fromHtml: fromHtml$1,\n      fromTag: fromTag,\n      fromText: fromText,\n      fromDom: fromDom$2,\n      fromPoint: fromPoint$1\n    };\n\n    var toArray = function (target, f) {\n      var r = [];\n      var recurse = function (e) {\n        r.push(e);\n        return f(e);\n      };\n      var cur = f(target);\n      do {\n        cur = cur.bind(recurse);\n      } while (cur.isSome());\n      return r;\n    };\n\n    var compareDocumentPosition = function (a, b, match) {\n      return (a.compareDocumentPosition(b) & match) !== 0;\n    };\n    var documentPositionContainedBy = function (a, b) {\n      return compareDocumentPosition(a, b, Node.DOCUMENT_POSITION_CONTAINED_BY);\n    };\n\n    var COMMENT = 8;\n    var DOCUMENT = 9;\n    var DOCUMENT_FRAGMENT = 11;\n    var ELEMENT = 1;\n    var TEXT = 3;\n\n    var is$2 = function (element, selector) {\n      var dom = element.dom;\n      if (dom.nodeType !== ELEMENT) {\n        return false;\n      } else {\n        var elem = dom;\n        if (elem.matches !== undefined) {\n          return elem.matches(selector);\n        } else if (elem.msMatchesSelector !== undefined) {\n          return elem.msMatchesSelector(selector);\n        } else if (elem.webkitMatchesSelector !== undefined) {\n          return elem.webkitMatchesSelector(selector);\n        } else if (elem.mozMatchesSelector !== undefined) {\n          return elem.mozMatchesSelector(selector);\n        } else {\n          throw new Error('Browser lacks native selectors');\n        }\n      }\n    };\n    var bypassSelector = function (dom) {\n      return dom.nodeType !== ELEMENT && dom.nodeType !== DOCUMENT && dom.nodeType !== DOCUMENT_FRAGMENT || dom.childElementCount === 0;\n    };\n    var all = function (selector, scope) {\n      var base = scope === undefined ? document : scope.dom;\n      return bypassSelector(base) ? [] : map$3(base.querySelectorAll(selector), SugarElement.fromDom);\n    };\n    var one = function (selector, scope) {\n      var base = scope === undefined ? document : scope.dom;\n      return bypassSelector(base) ? Optional.none() : Optional.from(base.querySelector(selector)).map(SugarElement.fromDom);\n    };\n\n    var eq = function (e1, e2) {\n      return e1.dom === e2.dom;\n    };\n    var regularContains = function (e1, e2) {\n      var d1 = e1.dom;\n      var d2 = e2.dom;\n      return d1 === d2 ? false : d1.contains(d2);\n    };\n    var ieContains = function (e1, e2) {\n      return documentPositionContainedBy(e1.dom, e2.dom);\n    };\n    var contains$1 = function (e1, e2) {\n      return detect().browser.isIE() ? ieContains(e1, e2) : regularContains(e1, e2);\n    };\n\n    typeof window !== 'undefined' ? window : Function('return this;')();\n\n    var name = function (element) {\n      var r = element.dom.nodeName;\n      return r.toLowerCase();\n    };\n    var type = function (element) {\n      return element.dom.nodeType;\n    };\n    var isType = function (t) {\n      return function (element) {\n        return type(element) === t;\n      };\n    };\n    var isComment$1 = function (element) {\n      return type(element) === COMMENT || name(element) === '#comment';\n    };\n    var isElement$6 = isType(ELEMENT);\n    var isText$8 = isType(TEXT);\n    var isDocument$2 = isType(DOCUMENT);\n    var isDocumentFragment$1 = isType(DOCUMENT_FRAGMENT);\n    var isTag = function (tag) {\n      return function (e) {\n        return isElement$6(e) && name(e) === tag;\n      };\n    };\n\n    var owner$1 = function (element) {\n      return SugarElement.fromDom(element.dom.ownerDocument);\n    };\n    var documentOrOwner = function (dos) {\n      return isDocument$2(dos) ? dos : owner$1(dos);\n    };\n    var documentElement = function (element) {\n      return SugarElement.fromDom(documentOrOwner(element).dom.documentElement);\n    };\n    var defaultView = function (element) {\n      return SugarElement.fromDom(documentOrOwner(element).dom.defaultView);\n    };\n    var parent = function (element) {\n      return Optional.from(element.dom.parentNode).map(SugarElement.fromDom);\n    };\n    var parents$1 = function (element, isRoot) {\n      var stop = isFunction(isRoot) ? isRoot : never;\n      var dom = element.dom;\n      var ret = [];\n      while (dom.parentNode !== null && dom.parentNode !== undefined) {\n        var rawParent = dom.parentNode;\n        var p = SugarElement.fromDom(rawParent);\n        ret.push(p);\n        if (stop(p) === true) {\n          break;\n        } else {\n          dom = rawParent;\n        }\n      }\n      return ret;\n    };\n    var siblings = function (element) {\n      var filterSelf = function (elements) {\n        return filter$4(elements, function (x) {\n          return !eq(element, x);\n        });\n      };\n      return parent(element).map(children).map(filterSelf).getOr([]);\n    };\n    var prevSibling = function (element) {\n      return Optional.from(element.dom.previousSibling).map(SugarElement.fromDom);\n    };\n    var nextSibling = function (element) {\n      return Optional.from(element.dom.nextSibling).map(SugarElement.fromDom);\n    };\n    var prevSiblings = function (element) {\n      return reverse(toArray(element, prevSibling));\n    };\n    var nextSiblings = function (element) {\n      return toArray(element, nextSibling);\n    };\n    var children = function (element) {\n      return map$3(element.dom.childNodes, SugarElement.fromDom);\n    };\n    var child$1 = function (element, index) {\n      var cs = element.dom.childNodes;\n      return Optional.from(cs[index]).map(SugarElement.fromDom);\n    };\n    var firstChild = function (element) {\n      return child$1(element, 0);\n    };\n    var lastChild = function (element) {\n      return child$1(element, element.dom.childNodes.length - 1);\n    };\n    var childNodesCount = function (element) {\n      return element.dom.childNodes.length;\n    };\n\n    var getHead = function (doc) {\n      var b = doc.dom.head;\n      if (b === null || b === undefined) {\n        throw new Error('Head is not available yet');\n      }\n      return SugarElement.fromDom(b);\n    };\n\n    var isShadowRoot = function (dos) {\n      return isDocumentFragment$1(dos) && isNonNullable(dos.dom.host);\n    };\n    var supported = isFunction(Element.prototype.attachShadow) && isFunction(Node.prototype.getRootNode);\n    var isSupported$1 = constant(supported);\n    var getRootNode = supported ? function (e) {\n      return SugarElement.fromDom(e.dom.getRootNode());\n    } : documentOrOwner;\n    var getStyleContainer = function (dos) {\n      return isShadowRoot(dos) ? dos : getHead(documentOrOwner(dos));\n    };\n    var getShadowRoot = function (e) {\n      var r = getRootNode(e);\n      return isShadowRoot(r) ? Optional.some(r) : Optional.none();\n    };\n    var getShadowHost = function (e) {\n      return SugarElement.fromDom(e.dom.host);\n    };\n    var getOriginalEventTarget = function (event) {\n      if (isSupported$1() && isNonNullable(event.target)) {\n        var el = SugarElement.fromDom(event.target);\n        if (isElement$6(el) && isOpenShadowHost(el)) {\n          if (event.composed && event.composedPath) {\n            var composedPath = event.composedPath();\n            if (composedPath) {\n              return head(composedPath);\n            }\n          }\n        }\n      }\n      return Optional.from(event.target);\n    };\n    var isOpenShadowHost = function (element) {\n      return isNonNullable(element.dom.shadowRoot);\n    };\n\n    var before$4 = function (marker, element) {\n      var parent$1 = parent(marker);\n      parent$1.each(function (v) {\n        v.dom.insertBefore(element.dom, marker.dom);\n      });\n    };\n    var after$3 = function (marker, element) {\n      var sibling = nextSibling(marker);\n      sibling.fold(function () {\n        var parent$1 = parent(marker);\n        parent$1.each(function (v) {\n          append$1(v, element);\n        });\n      }, function (v) {\n        before$4(v, element);\n      });\n    };\n    var prepend = function (parent, element) {\n      var firstChild$1 = firstChild(parent);\n      firstChild$1.fold(function () {\n        append$1(parent, element);\n      }, function (v) {\n        parent.dom.insertBefore(element.dom, v.dom);\n      });\n    };\n    var append$1 = function (parent, element) {\n      parent.dom.appendChild(element.dom);\n    };\n    var wrap$3 = function (element, wrapper) {\n      before$4(element, wrapper);\n      append$1(wrapper, element);\n    };\n\n    var before$3 = function (marker, elements) {\n      each$k(elements, function (x) {\n        before$4(marker, x);\n      });\n    };\n    var append = function (parent, elements) {\n      each$k(elements, function (x) {\n        append$1(parent, x);\n      });\n    };\n\n    var empty = function (element) {\n      element.dom.textContent = '';\n      each$k(children(element), function (rogue) {\n        remove$7(rogue);\n      });\n    };\n    var remove$7 = function (element) {\n      var dom = element.dom;\n      if (dom.parentNode !== null) {\n        dom.parentNode.removeChild(dom);\n      }\n    };\n    var unwrap = function (wrapper) {\n      var children$1 = children(wrapper);\n      if (children$1.length > 0) {\n        before$3(wrapper, children$1);\n      }\n      remove$7(wrapper);\n    };\n\n    var inBody = function (element) {\n      var dom = isText$8(element) ? element.dom.parentNode : element.dom;\n      if (dom === undefined || dom === null || dom.ownerDocument === null) {\n        return false;\n      }\n      var doc = dom.ownerDocument;\n      return getShadowRoot(SugarElement.fromDom(dom)).fold(function () {\n        return doc.body.contains(dom);\n      }, compose1(inBody, getShadowHost));\n    };\n\n    var r = function (left, top) {\n      var translate = function (x, y) {\n        return r(left + x, top + y);\n      };\n      return {\n        left: left,\n        top: top,\n        translate: translate\n      };\n    };\n    var SugarPosition = r;\n\n    var boxPosition = function (dom) {\n      var box = dom.getBoundingClientRect();\n      return SugarPosition(box.left, box.top);\n    };\n    var firstDefinedOrZero = function (a, b) {\n      if (a !== undefined) {\n        return a;\n      } else {\n        return b !== undefined ? b : 0;\n      }\n    };\n    var absolute = function (element) {\n      var doc = element.dom.ownerDocument;\n      var body = doc.body;\n      var win = doc.defaultView;\n      var html = doc.documentElement;\n      if (body === element.dom) {\n        return SugarPosition(body.offsetLeft, body.offsetTop);\n      }\n      var scrollTop = firstDefinedOrZero(win === null || win === void 0 ? void 0 : win.pageYOffset, html.scrollTop);\n      var scrollLeft = firstDefinedOrZero(win === null || win === void 0 ? void 0 : win.pageXOffset, html.scrollLeft);\n      var clientTop = firstDefinedOrZero(html.clientTop, body.clientTop);\n      var clientLeft = firstDefinedOrZero(html.clientLeft, body.clientLeft);\n      return viewport(element).translate(scrollLeft - clientLeft, scrollTop - clientTop);\n    };\n    var viewport = function (element) {\n      var dom = element.dom;\n      var doc = dom.ownerDocument;\n      var body = doc.body;\n      if (body === dom) {\n        return SugarPosition(body.offsetLeft, body.offsetTop);\n      }\n      if (!inBody(element)) {\n        return SugarPosition(0, 0);\n      }\n      return boxPosition(dom);\n    };\n\n    var get$8 = function (_DOC) {\n      var doc = _DOC !== undefined ? _DOC.dom : document;\n      var x = doc.body.scrollLeft || doc.documentElement.scrollLeft;\n      var y = doc.body.scrollTop || doc.documentElement.scrollTop;\n      return SugarPosition(x, y);\n    };\n    var to = function (x, y, _DOC) {\n      var doc = _DOC !== undefined ? _DOC.dom : document;\n      var win = doc.defaultView;\n      if (win) {\n        win.scrollTo(x, y);\n      }\n    };\n    var intoView = function (element, alignToTop) {\n      var isSafari = detect().browser.isSafari();\n      if (isSafari && isFunction(element.dom.scrollIntoViewIfNeeded)) {\n        element.dom.scrollIntoViewIfNeeded(false);\n      } else {\n        element.dom.scrollIntoView(alignToTop);\n      }\n    };\n\n    var get$7 = function (_win) {\n      var win = _win === undefined ? window : _win;\n      return Optional.from(win['visualViewport']);\n    };\n    var bounds = function (x, y, width, height) {\n      return {\n        x: x,\n        y: y,\n        width: width,\n        height: height,\n        right: x + width,\n        bottom: y + height\n      };\n    };\n    var getBounds = function (_win) {\n      var win = _win === undefined ? window : _win;\n      var doc = win.document;\n      var scroll = get$8(SugarElement.fromDom(doc));\n      return get$7(win).fold(function () {\n        var html = win.document.documentElement;\n        var width = html.clientWidth;\n        var height = html.clientHeight;\n        return bounds(scroll.left, scroll.top, width, height);\n      }, function (visualViewport) {\n        return bounds(Math.max(visualViewport.pageLeft, scroll.left), Math.max(visualViewport.pageTop, scroll.top), visualViewport.width, visualViewport.height);\n      });\n    };\n\n    var isNodeType = function (type) {\n      return function (node) {\n        return !!node && node.nodeType === type;\n      };\n    };\n    var isRestrictedNode = function (node) {\n      return !!node && !Object.getPrototypeOf(node);\n    };\n    var isElement$5 = isNodeType(1);\n    var matchNodeNames = function (names) {\n      var lowercasedNames = names.map(function (s) {\n        return s.toLowerCase();\n      });\n      return function (node) {\n        if (node && node.nodeName) {\n          var nodeName = node.nodeName.toLowerCase();\n          return contains$3(lowercasedNames, nodeName);\n        }\n        return false;\n      };\n    };\n    var matchStyleValues = function (name, values) {\n      var items = values.toLowerCase().split(' ');\n      return function (node) {\n        if (isElement$5(node)) {\n          for (var i = 0; i < items.length; i++) {\n            var computed = node.ownerDocument.defaultView.getComputedStyle(node, null);\n            var cssValue = computed ? computed.getPropertyValue(name) : null;\n            if (cssValue === items[i]) {\n              return true;\n            }\n          }\n        }\n        return false;\n      };\n    };\n    var hasAttribute = function (attrName) {\n      return function (node) {\n        return isElement$5(node) && node.hasAttribute(attrName);\n      };\n    };\n    var hasAttributeValue = function (attrName, attrValue) {\n      return function (node) {\n        return isElement$5(node) && node.getAttribute(attrName) === attrValue;\n      };\n    };\n    var isBogus$2 = function (node) {\n      return isElement$5(node) && node.hasAttribute('data-mce-bogus');\n    };\n    var isBogusAll$1 = function (node) {\n      return isElement$5(node) && node.getAttribute('data-mce-bogus') === 'all';\n    };\n    var isTable$3 = function (node) {\n      return isElement$5(node) && node.tagName === 'TABLE';\n    };\n    var hasContentEditableState = function (value) {\n      return function (node) {\n        if (isElement$5(node)) {\n          if (node.contentEditable === value) {\n            return true;\n          }\n          if (node.getAttribute('data-mce-contenteditable') === value) {\n            return true;\n          }\n        }\n        return false;\n      };\n    };\n    var isTextareaOrInput = matchNodeNames([\n      'textarea',\n      'input'\n    ]);\n    var isText$7 = isNodeType(3);\n    var isComment = isNodeType(8);\n    var isDocument$1 = isNodeType(9);\n    var isDocumentFragment = isNodeType(11);\n    var isBr$5 = matchNodeNames(['br']);\n    var isImg = matchNodeNames(['img']);\n    var isContentEditableTrue$4 = hasContentEditableState('true');\n    var isContentEditableFalse$b = hasContentEditableState('false');\n    var isTableCell$5 = matchNodeNames([\n      'td',\n      'th'\n    ]);\n    var isMedia$2 = matchNodeNames([\n      'video',\n      'audio',\n      'object',\n      'embed'\n    ]);\n\n    var is$1 = function (lhs, rhs, comparator) {\n      if (comparator === void 0) {\n        comparator = tripleEquals;\n      }\n      return lhs.exists(function (left) {\n        return comparator(left, rhs);\n      });\n    };\n    var cat = function (arr) {\n      var r = [];\n      var push = function (x) {\n        r.push(x);\n      };\n      for (var i = 0; i < arr.length; i++) {\n        arr[i].each(push);\n      }\n      return r;\n    };\n    var lift2 = function (oa, ob, f) {\n      return oa.isSome() && ob.isSome() ? Optional.some(f(oa.getOrDie(), ob.getOrDie())) : Optional.none();\n    };\n    var lift3 = function (oa, ob, oc, f) {\n      return oa.isSome() && ob.isSome() && oc.isSome() ? Optional.some(f(oa.getOrDie(), ob.getOrDie(), oc.getOrDie())) : Optional.none();\n    };\n    var someIf = function (b, a) {\n      return b ? Optional.some(a) : Optional.none();\n    };\n\n    var isSupported = function (dom) {\n      return dom.style !== undefined && isFunction(dom.style.getPropertyValue);\n    };\n\n    var rawSet = function (dom, key, value) {\n      if (isString$1(value) || isBoolean(value) || isNumber(value)) {\n        dom.setAttribute(key, value + '');\n      } else {\n        console.error('Invalid call to Attribute.set. Key ', key, ':: Value ', value, ':: Element ', dom);\n        throw new Error('Attribute value was not simple');\n      }\n    };\n    var set$1 = function (element, key, value) {\n      rawSet(element.dom, key, value);\n    };\n    var setAll$1 = function (element, attrs) {\n      var dom = element.dom;\n      each$j(attrs, function (v, k) {\n        rawSet(dom, k, v);\n      });\n    };\n    var get$6 = function (element, key) {\n      var v = element.dom.getAttribute(key);\n      return v === null ? undefined : v;\n    };\n    var getOpt = function (element, key) {\n      return Optional.from(get$6(element, key));\n    };\n    var has$1 = function (element, key) {\n      var dom = element.dom;\n      return dom && dom.hasAttribute ? dom.hasAttribute(key) : false;\n    };\n    var remove$6 = function (element, key) {\n      element.dom.removeAttribute(key);\n    };\n    var clone$3 = function (element) {\n      return foldl(element.dom.attributes, function (acc, attr) {\n        acc[attr.name] = attr.value;\n        return acc;\n      }, {});\n    };\n\n    var internalSet = function (dom, property, value) {\n      if (!isString$1(value)) {\n        console.error('Invalid call to CSS.set. Property ', property, ':: Value ', value, ':: Element ', dom);\n        throw new Error('CSS value must be a string: ' + value);\n      }\n      if (isSupported(dom)) {\n        dom.style.setProperty(property, value);\n      }\n    };\n    var setAll = function (element, css) {\n      var dom = element.dom;\n      each$j(css, function (v, k) {\n        internalSet(dom, k, v);\n      });\n    };\n    var get$5 = function (element, property) {\n      var dom = element.dom;\n      var styles = window.getComputedStyle(dom);\n      var r = styles.getPropertyValue(property);\n      return r === '' && !inBody(element) ? getUnsafeProperty(dom, property) : r;\n    };\n    var getUnsafeProperty = function (dom, property) {\n      return isSupported(dom) ? dom.style.getPropertyValue(property) : '';\n    };\n    var getRaw = function (element, property) {\n      var dom = element.dom;\n      var raw = getUnsafeProperty(dom, property);\n      return Optional.from(raw).filter(function (r) {\n        return r.length > 0;\n      });\n    };\n    var getAllRaw = function (element) {\n      var css = {};\n      var dom = element.dom;\n      if (isSupported(dom)) {\n        for (var i = 0; i < dom.style.length; i++) {\n          var ruleName = dom.style.item(i);\n          css[ruleName] = dom.style[ruleName];\n        }\n      }\n      return css;\n    };\n    var reflow = function (e) {\n      return e.dom.offsetWidth;\n    };\n\n    var browser$3 = detect().browser;\n    var firstElement = function (nodes) {\n      return find$3(nodes, isElement$6);\n    };\n    var getTableCaptionDeltaY = function (elm) {\n      if (browser$3.isFirefox() && name(elm) === 'table') {\n        return firstElement(children(elm)).filter(function (elm) {\n          return name(elm) === 'caption';\n        }).bind(function (caption) {\n          return firstElement(nextSiblings(caption)).map(function (body) {\n            var bodyTop = body.dom.offsetTop;\n            var captionTop = caption.dom.offsetTop;\n            var captionHeight = caption.dom.offsetHeight;\n            return bodyTop <= captionTop ? -captionHeight : 0;\n          });\n        }).getOr(0);\n      } else {\n        return 0;\n      }\n    };\n    var hasChild = function (elm, child) {\n      return elm.children && contains$3(elm.children, child);\n    };\n    var getPos = function (body, elm, rootElm) {\n      var x = 0, y = 0;\n      var doc = body.ownerDocument;\n      rootElm = rootElm ? rootElm : body;\n      if (elm) {\n        if (rootElm === body && elm.getBoundingClientRect && get$5(SugarElement.fromDom(body), 'position') === 'static') {\n          var pos = elm.getBoundingClientRect();\n          x = pos.left + (doc.documentElement.scrollLeft || body.scrollLeft) - doc.documentElement.clientLeft;\n          y = pos.top + (doc.documentElement.scrollTop || body.scrollTop) - doc.documentElement.clientTop;\n          return {\n            x: x,\n            y: y\n          };\n        }\n        var offsetParent = elm;\n        while (offsetParent && offsetParent !== rootElm && offsetParent.nodeType && !hasChild(offsetParent, rootElm)) {\n          var castOffsetParent = offsetParent;\n          x += castOffsetParent.offsetLeft || 0;\n          y += castOffsetParent.offsetTop || 0;\n          offsetParent = castOffsetParent.offsetParent;\n        }\n        offsetParent = elm.parentNode;\n        while (offsetParent && offsetParent !== rootElm && offsetParent.nodeType && !hasChild(offsetParent, rootElm)) {\n          x -= offsetParent.scrollLeft || 0;\n          y -= offsetParent.scrollTop || 0;\n          offsetParent = offsetParent.parentNode;\n        }\n        y += getTableCaptionDeltaY(SugarElement.fromDom(elm));\n      }\n      return {\n        x: x,\n        y: y\n      };\n    };\n\n    var exports$1 = {}, module$1 = { exports: exports$1 };\n    (function (define, exports, module, require) {\n      (function (f) {\n        if (typeof exports === 'object' && typeof module !== 'undefined') {\n          module.exports = f();\n        } else if (typeof define === 'function' && define.amd) {\n          define([], f);\n        } else {\n          var g;\n          if (typeof window !== 'undefined') {\n            g = window;\n          } else if (typeof global !== 'undefined') {\n            g = global;\n          } else if (typeof self !== 'undefined') {\n            g = self;\n          } else {\n            g = this;\n          }\n          g.EphoxContactWrapper = f();\n        }\n      }(function () {\n        return function () {\n          function r(e, n, t) {\n            function o(i, f) {\n              if (!n[i]) {\n                if (!e[i]) {\n                  var c = 'function' == typeof require && require;\n                  if (!f && c)\n                    return c(i, !0);\n                  if (u)\n                    return u(i, !0);\n                  var a = new Error('Cannot find module \\'' + i + '\\'');\n                  throw a.code = 'MODULE_NOT_FOUND', a;\n                }\n                var p = n[i] = { exports: {} };\n                e[i][0].call(p.exports, function (r) {\n                  var n = e[i][1][r];\n                  return o(n || r);\n                }, p, p.exports, r, e, n, t);\n              }\n              return n[i].exports;\n            }\n            for (var u = 'function' == typeof require && require, i = 0; i < t.length; i++)\n              o(t[i]);\n            return o;\n          }\n          return r;\n        }()({\n          1: [\n            function (require, module, exports) {\n              var process = module.exports = {};\n              var cachedSetTimeout;\n              var cachedClearTimeout;\n              function defaultSetTimout() {\n                throw new Error('setTimeout has not been defined');\n              }\n              function defaultClearTimeout() {\n                throw new Error('clearTimeout has not been defined');\n              }\n              (function () {\n                try {\n                  if (typeof setTimeout === 'function') {\n                    cachedSetTimeout = setTimeout;\n                  } else {\n                    cachedSetTimeout = defaultSetTimout;\n                  }\n                } catch (e) {\n                  cachedSetTimeout = defaultSetTimout;\n                }\n                try {\n                  if (typeof clearTimeout === 'function') {\n                    cachedClearTimeout = clearTimeout;\n                  } else {\n                    cachedClearTimeout = defaultClearTimeout;\n                  }\n                } catch (e) {\n                  cachedClearTimeout = defaultClearTimeout;\n                }\n              }());\n              function runTimeout(fun) {\n                if (cachedSetTimeout === setTimeout) {\n                  return setTimeout(fun, 0);\n                }\n                if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n                  cachedSetTimeout = setTimeout;\n                  return setTimeout(fun, 0);\n                }\n                try {\n                  return cachedSetTimeout(fun, 0);\n                } catch (e) {\n                  try {\n                    return cachedSetTimeout.call(null, fun, 0);\n                  } catch (e) {\n                    return cachedSetTimeout.call(this, fun, 0);\n                  }\n                }\n              }\n              function runClearTimeout(marker) {\n                if (cachedClearTimeout === clearTimeout) {\n                  return clearTimeout(marker);\n                }\n                if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n                  cachedClearTimeout = clearTimeout;\n                  return clearTimeout(marker);\n                }\n                try {\n                  return cachedClearTimeout(marker);\n                } catch (e) {\n                  try {\n                    return cachedClearTimeout.call(null, marker);\n                  } catch (e) {\n                    return cachedClearTimeout.call(this, marker);\n                  }\n                }\n              }\n              var queue = [];\n              var draining = false;\n              var currentQueue;\n              var queueIndex = -1;\n              function cleanUpNextTick() {\n                if (!draining || !currentQueue) {\n                  return;\n                }\n                draining = false;\n                if (currentQueue.length) {\n                  queue = currentQueue.concat(queue);\n                } else {\n                  queueIndex = -1;\n                }\n                if (queue.length) {\n                  drainQueue();\n                }\n              }\n              function drainQueue() {\n                if (draining) {\n                  return;\n                }\n                var timeout = runTimeout(cleanUpNextTick);\n                draining = true;\n                var len = queue.length;\n                while (len) {\n                  currentQueue = queue;\n                  queue = [];\n                  while (++queueIndex < len) {\n                    if (currentQueue) {\n                      currentQueue[queueIndex].run();\n                    }\n                  }\n                  queueIndex = -1;\n                  len = queue.length;\n                }\n                currentQueue = null;\n                draining = false;\n                runClearTimeout(timeout);\n              }\n              process.nextTick = function (fun) {\n                var args = new Array(arguments.length - 1);\n                if (arguments.length > 1) {\n                  for (var i = 1; i < arguments.length; i++) {\n                    args[i - 1] = arguments[i];\n                  }\n                }\n                queue.push(new Item(fun, args));\n                if (queue.length === 1 && !draining) {\n                  runTimeout(drainQueue);\n                }\n              };\n              function Item(fun, array) {\n                this.fun = fun;\n                this.array = array;\n              }\n              Item.prototype.run = function () {\n                this.fun.apply(null, this.array);\n              };\n              process.title = 'browser';\n              process.browser = true;\n              process.env = {};\n              process.argv = [];\n              process.version = '';\n              process.versions = {};\n              function noop() {\n              }\n              process.on = noop;\n              process.addListener = noop;\n              process.once = noop;\n              process.off = noop;\n              process.removeListener = noop;\n              process.removeAllListeners = noop;\n              process.emit = noop;\n              process.prependListener = noop;\n              process.prependOnceListener = noop;\n              process.listeners = function (name) {\n                return [];\n              };\n              process.binding = function (name) {\n                throw new Error('process.binding is not supported');\n              };\n              process.cwd = function () {\n                return '/';\n              };\n              process.chdir = function (dir) {\n                throw new Error('process.chdir is not supported');\n              };\n              process.umask = function () {\n                return 0;\n              };\n            },\n            {}\n          ],\n          2: [\n            function (require, module, exports) {\n              (function (setImmediate) {\n                (function (root) {\n                  var setTimeoutFunc = setTimeout;\n                  function noop() {\n                  }\n                  function bind(fn, thisArg) {\n                    return function () {\n                      fn.apply(thisArg, arguments);\n                    };\n                  }\n                  function Promise(fn) {\n                    if (typeof this !== 'object')\n                      throw new TypeError('Promises must be constructed via new');\n                    if (typeof fn !== 'function')\n                      throw new TypeError('not a function');\n                    this._state = 0;\n                    this._handled = false;\n                    this._value = undefined;\n                    this._deferreds = [];\n                    doResolve(fn, this);\n                  }\n                  function handle(self, deferred) {\n                    while (self._state === 3) {\n                      self = self._value;\n                    }\n                    if (self._state === 0) {\n                      self._deferreds.push(deferred);\n                      return;\n                    }\n                    self._handled = true;\n                    Promise._immediateFn(function () {\n                      var cb = self._state === 1 ? deferred.onFulfilled : deferred.onRejected;\n                      if (cb === null) {\n                        (self._state === 1 ? resolve : reject)(deferred.promise, self._value);\n                        return;\n                      }\n                      var ret;\n                      try {\n                        ret = cb(self._value);\n                      } catch (e) {\n                        reject(deferred.promise, e);\n                        return;\n                      }\n                      resolve(deferred.promise, ret);\n                    });\n                  }\n                  function resolve(self, newValue) {\n                    try {\n                      if (newValue === self)\n                        throw new TypeError('A promise cannot be resolved with itself.');\n                      if (newValue && (typeof newValue === 'object' || typeof newValue === 'function')) {\n                        var then = newValue.then;\n                        if (newValue instanceof Promise) {\n                          self._state = 3;\n                          self._value = newValue;\n                          finale(self);\n                          return;\n                        } else if (typeof then === 'function') {\n                          doResolve(bind(then, newValue), self);\n                          return;\n                        }\n                      }\n                      self._state = 1;\n                      self._value = newValue;\n                      finale(self);\n                    } catch (e) {\n                      reject(self, e);\n                    }\n                  }\n                  function reject(self, newValue) {\n                    self._state = 2;\n                    self._value = newValue;\n                    finale(self);\n                  }\n                  function finale(self) {\n                    if (self._state === 2 && self._deferreds.length === 0) {\n                      Promise._immediateFn(function () {\n                        if (!self._handled) {\n                          Promise._unhandledRejectionFn(self._value);\n                        }\n                      });\n                    }\n                    for (var i = 0, len = self._deferreds.length; i < len; i++) {\n                      handle(self, self._deferreds[i]);\n                    }\n                    self._deferreds = null;\n                  }\n                  function Handler(onFulfilled, onRejected, promise) {\n                    this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\n                    this.onRejected = typeof onRejected === 'function' ? onRejected : null;\n                    this.promise = promise;\n                  }\n                  function doResolve(fn, self) {\n                    var done = false;\n                    try {\n                      fn(function (value) {\n                        if (done)\n                          return;\n                        done = true;\n                        resolve(self, value);\n                      }, function (reason) {\n                        if (done)\n                          return;\n                        done = true;\n                        reject(self, reason);\n                      });\n                    } catch (ex) {\n                      if (done)\n                        return;\n                      done = true;\n                      reject(self, ex);\n                    }\n                  }\n                  Promise.prototype['catch'] = function (onRejected) {\n                    return this.then(null, onRejected);\n                  };\n                  Promise.prototype.then = function (onFulfilled, onRejected) {\n                    var prom = new this.constructor(noop);\n                    handle(this, new Handler(onFulfilled, onRejected, prom));\n                    return prom;\n                  };\n                  Promise.all = function (arr) {\n                    var args = Array.prototype.slice.call(arr);\n                    return new Promise(function (resolve, reject) {\n                      if (args.length === 0)\n                        return resolve([]);\n                      var remaining = args.length;\n                      function res(i, val) {\n                        try {\n                          if (val && (typeof val === 'object' || typeof val === 'function')) {\n                            var then = val.then;\n                            if (typeof then === 'function') {\n                              then.call(val, function (val) {\n                                res(i, val);\n                              }, reject);\n                              return;\n                            }\n                          }\n                          args[i] = val;\n                          if (--remaining === 0) {\n                            resolve(args);\n                          }\n                        } catch (ex) {\n                          reject(ex);\n                        }\n                      }\n                      for (var i = 0; i < args.length; i++) {\n                        res(i, args[i]);\n                      }\n                    });\n                  };\n                  Promise.resolve = function (value) {\n                    if (value && typeof value === 'object' && value.constructor === Promise) {\n                      return value;\n                    }\n                    return new Promise(function (resolve) {\n                      resolve(value);\n                    });\n                  };\n                  Promise.reject = function (value) {\n                    return new Promise(function (resolve, reject) {\n                      reject(value);\n                    });\n                  };\n                  Promise.race = function (values) {\n                    return new Promise(function (resolve, reject) {\n                      for (var i = 0, len = values.length; i < len; i++) {\n                        values[i].then(resolve, reject);\n                      }\n                    });\n                  };\n                  Promise._immediateFn = typeof setImmediate === 'function' ? function (fn) {\n                    setImmediate(fn);\n                  } : function (fn) {\n                    setTimeoutFunc(fn, 0);\n                  };\n                  Promise._unhandledRejectionFn = function _unhandledRejectionFn(err) {\n                    if (typeof console !== 'undefined' && console) {\n                      console.warn('Possible Unhandled Promise Rejection:', err);\n                    }\n                  };\n                  Promise._setImmediateFn = function _setImmediateFn(fn) {\n                    Promise._immediateFn = fn;\n                  };\n                  Promise._setUnhandledRejectionFn = function _setUnhandledRejectionFn(fn) {\n                    Promise._unhandledRejectionFn = fn;\n                  };\n                  if (typeof module !== 'undefined' && module.exports) {\n                    module.exports = Promise;\n                  } else if (!root.Promise) {\n                    root.Promise = Promise;\n                  }\n                }(this));\n              }.call(this, require('timers').setImmediate));\n            },\n            { 'timers': 3 }\n          ],\n          3: [\n            function (require, module, exports) {\n              (function (setImmediate, clearImmediate) {\n                var nextTick = require('process/browser.js').nextTick;\n                var apply = Function.prototype.apply;\n                var slice = Array.prototype.slice;\n                var immediateIds = {};\n                var nextImmediateId = 0;\n                exports.setTimeout = function () {\n                  return new Timeout(apply.call(setTimeout, window, arguments), clearTimeout);\n                };\n                exports.setInterval = function () {\n                  return new Timeout(apply.call(setInterval, window, arguments), clearInterval);\n                };\n                exports.clearTimeout = exports.clearInterval = function (timeout) {\n                  timeout.close();\n                };\n                function Timeout(id, clearFn) {\n                  this._id = id;\n                  this._clearFn = clearFn;\n                }\n                Timeout.prototype.unref = Timeout.prototype.ref = function () {\n                };\n                Timeout.prototype.close = function () {\n                  this._clearFn.call(window, this._id);\n                };\n                exports.enroll = function (item, msecs) {\n                  clearTimeout(item._idleTimeoutId);\n                  item._idleTimeout = msecs;\n                };\n                exports.unenroll = function (item) {\n                  clearTimeout(item._idleTimeoutId);\n                  item._idleTimeout = -1;\n                };\n                exports._unrefActive = exports.active = function (item) {\n                  clearTimeout(item._idleTimeoutId);\n                  var msecs = item._idleTimeout;\n                  if (msecs >= 0) {\n                    item._idleTimeoutId = setTimeout(function onTimeout() {\n                      if (item._onTimeout)\n                        item._onTimeout();\n                    }, msecs);\n                  }\n                };\n                exports.setImmediate = typeof setImmediate === 'function' ? setImmediate : function (fn) {\n                  var id = nextImmediateId++;\n                  var args = arguments.length < 2 ? false : slice.call(arguments, 1);\n                  immediateIds[id] = true;\n                  nextTick(function onNextTick() {\n                    if (immediateIds[id]) {\n                      if (args) {\n                        fn.apply(null, args);\n                      } else {\n                        fn.call(null);\n                      }\n                      exports.clearImmediate(id);\n                    }\n                  });\n                  return id;\n                };\n                exports.clearImmediate = typeof clearImmediate === 'function' ? clearImmediate : function (id) {\n                  delete immediateIds[id];\n                };\n              }.call(this, require('timers').setImmediate, require('timers').clearImmediate));\n            },\n            {\n              'process/browser.js': 1,\n              'timers': 3\n            }\n          ],\n          4: [\n            function (require, module, exports) {\n              var promisePolyfill = require('promise-polyfill');\n              var Global = function () {\n                if (typeof window !== 'undefined') {\n                  return window;\n                } else {\n                  return Function('return this;')();\n                }\n              }();\n              module.exports = { boltExport: Global.Promise || promisePolyfill };\n            },\n            { 'promise-polyfill': 2 }\n          ]\n        }, {}, [4])(4);\n      }));\n    }(undefined, exports$1, module$1, undefined));\n    var Promise$1 = module$1.exports.boltExport;\n\n    var nu$1 = function (baseFn) {\n      var data = Optional.none();\n      var callbacks = [];\n      var map = function (f) {\n        return nu$1(function (nCallback) {\n          get(function (data) {\n            nCallback(f(data));\n          });\n        });\n      };\n      var get = function (nCallback) {\n        if (isReady()) {\n          call(nCallback);\n        } else {\n          callbacks.push(nCallback);\n        }\n      };\n      var set = function (x) {\n        if (!isReady()) {\n          data = Optional.some(x);\n          run(callbacks);\n          callbacks = [];\n        }\n      };\n      var isReady = function () {\n        return data.isSome();\n      };\n      var run = function (cbs) {\n        each$k(cbs, call);\n      };\n      var call = function (cb) {\n        data.each(function (x) {\n          setTimeout(function () {\n            cb(x);\n          }, 0);\n        });\n      };\n      baseFn(set);\n      return {\n        get: get,\n        map: map,\n        isReady: isReady\n      };\n    };\n    var pure$1 = function (a) {\n      return nu$1(function (callback) {\n        callback(a);\n      });\n    };\n    var LazyValue = {\n      nu: nu$1,\n      pure: pure$1\n    };\n\n    var errorReporter = function (err) {\n      setTimeout(function () {\n        throw err;\n      }, 0);\n    };\n    var make = function (run) {\n      var get = function (callback) {\n        run().then(callback, errorReporter);\n      };\n      var map = function (fab) {\n        return make(function () {\n          return run().then(fab);\n        });\n      };\n      var bind = function (aFutureB) {\n        return make(function () {\n          return run().then(function (v) {\n            return aFutureB(v).toPromise();\n          });\n        });\n      };\n      var anonBind = function (futureB) {\n        return make(function () {\n          return run().then(function () {\n            return futureB.toPromise();\n          });\n        });\n      };\n      var toLazy = function () {\n        return LazyValue.nu(get);\n      };\n      var toCached = function () {\n        var cache = null;\n        return make(function () {\n          if (cache === null) {\n            cache = run();\n          }\n          return cache;\n        });\n      };\n      var toPromise = run;\n      return {\n        map: map,\n        bind: bind,\n        anonBind: anonBind,\n        toLazy: toLazy,\n        toCached: toCached,\n        toPromise: toPromise,\n        get: get\n      };\n    };\n    var nu = function (baseFn) {\n      return make(function () {\n        return new Promise$1(baseFn);\n      });\n    };\n    var pure = function (a) {\n      return make(function () {\n        return Promise$1.resolve(a);\n      });\n    };\n    var Future = {\n      nu: nu,\n      pure: pure\n    };\n\n    var par$1 = function (asyncValues, nu) {\n      return nu(function (callback) {\n        var r = [];\n        var count = 0;\n        var cb = function (i) {\n          return function (value) {\n            r[i] = value;\n            count++;\n            if (count >= asyncValues.length) {\n              callback(r);\n            }\n          };\n        };\n        if (asyncValues.length === 0) {\n          callback([]);\n        } else {\n          each$k(asyncValues, function (asyncValue, i) {\n            asyncValue.get(cb(i));\n          });\n        }\n      });\n    };\n\n    var par = function (futures) {\n      return par$1(futures, Future.nu);\n    };\n\n    var value$1 = function (o) {\n      var or = function (_opt) {\n        return value$1(o);\n      };\n      var orThunk = function (_f) {\n        return value$1(o);\n      };\n      var map = function (f) {\n        return value$1(f(o));\n      };\n      var mapError = function (_f) {\n        return value$1(o);\n      };\n      var each = function (f) {\n        f(o);\n      };\n      var bind = function (f) {\n        return f(o);\n      };\n      var fold = function (_, onValue) {\n        return onValue(o);\n      };\n      var exists = function (f) {\n        return f(o);\n      };\n      var forall = function (f) {\n        return f(o);\n      };\n      var toOptional = function () {\n        return Optional.some(o);\n      };\n      return {\n        isValue: always,\n        isError: never,\n        getOr: constant(o),\n        getOrThunk: constant(o),\n        getOrDie: constant(o),\n        or: or,\n        orThunk: orThunk,\n        fold: fold,\n        map: map,\n        mapError: mapError,\n        each: each,\n        bind: bind,\n        exists: exists,\n        forall: forall,\n        toOptional: toOptional\n      };\n    };\n    var error = function (message) {\n      var getOrThunk = function (f) {\n        return f();\n      };\n      var getOrDie = function () {\n        return die(String(message))();\n      };\n      var or = identity;\n      var orThunk = function (f) {\n        return f();\n      };\n      var map = function (_f) {\n        return error(message);\n      };\n      var mapError = function (f) {\n        return error(f(message));\n      };\n      var bind = function (_f) {\n        return error(message);\n      };\n      var fold = function (onError, _) {\n        return onError(message);\n      };\n      return {\n        isValue: never,\n        isError: always,\n        getOr: identity,\n        getOrThunk: getOrThunk,\n        getOrDie: getOrDie,\n        or: or,\n        orThunk: orThunk,\n        fold: fold,\n        map: map,\n        mapError: mapError,\n        each: noop,\n        bind: bind,\n        exists: never,\n        forall: always,\n        toOptional: Optional.none\n      };\n    };\n    var fromOption = function (opt, err) {\n      return opt.fold(function () {\n        return error(err);\n      }, value$1);\n    };\n    var Result = {\n      value: value$1,\n      error: error,\n      fromOption: fromOption\n    };\n\n    var generate$1 = function (cases) {\n      if (!isArray$1(cases)) {\n        throw new Error('cases must be an array');\n      }\n      if (cases.length === 0) {\n        throw new Error('there must be at least one case');\n      }\n      var constructors = [];\n      var adt = {};\n      each$k(cases, function (acase, count) {\n        var keys$1 = keys(acase);\n        if (keys$1.length !== 1) {\n          throw new Error('one and only one name per case');\n        }\n        var key = keys$1[0];\n        var value = acase[key];\n        if (adt[key] !== undefined) {\n          throw new Error('duplicate key detected:' + key);\n        } else if (key === 'cata') {\n          throw new Error('cannot have a case named cata (sorry)');\n        } else if (!isArray$1(value)) {\n          throw new Error('case arguments must be an array');\n        }\n        constructors.push(key);\n        adt[key] = function () {\n          var args = [];\n          for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n          }\n          var argLength = args.length;\n          if (argLength !== value.length) {\n            throw new Error('Wrong number of arguments to case ' + key + '. Expected ' + value.length + ' (' + value + '), got ' + argLength);\n          }\n          var match = function (branches) {\n            var branchKeys = keys(branches);\n            if (constructors.length !== branchKeys.length) {\n              throw new Error('Wrong number of arguments to match. Expected: ' + constructors.join(',') + '\\nActual: ' + branchKeys.join(','));\n            }\n            var allReqd = forall(constructors, function (reqKey) {\n              return contains$3(branchKeys, reqKey);\n            });\n            if (!allReqd) {\n              throw new Error('Not all branches were specified when using match. Specified: ' + branchKeys.join(', ') + '\\nRequired: ' + constructors.join(', '));\n            }\n            return branches[key].apply(null, args);\n          };\n          return {\n            fold: function () {\n              var foldArgs = [];\n              for (var _i = 0; _i < arguments.length; _i++) {\n                foldArgs[_i] = arguments[_i];\n              }\n              if (foldArgs.length !== cases.length) {\n                throw new Error('Wrong number of arguments to fold. Expected ' + cases.length + ', got ' + foldArgs.length);\n              }\n              var target = foldArgs[count];\n              return target.apply(null, args);\n            },\n            match: match,\n            log: function (label) {\n              console.log(label, {\n                constructors: constructors,\n                constructor: key,\n                params: args\n              });\n            }\n          };\n        };\n      });\n      return adt;\n    };\n    var Adt = { generate: generate$1 };\n\n    Adt.generate([\n      {\n        bothErrors: [\n          'error1',\n          'error2'\n        ]\n      },\n      {\n        firstError: [\n          'error1',\n          'value2'\n        ]\n      },\n      {\n        secondError: [\n          'value1',\n          'error2'\n        ]\n      },\n      {\n        bothValues: [\n          'value1',\n          'value2'\n        ]\n      }\n    ]);\n    var unite = function (result) {\n      return result.fold(identity, identity);\n    };\n\n    function ClosestOrAncestor (is, ancestor, scope, a, isRoot) {\n      if (is(scope, a)) {\n        return Optional.some(scope);\n      } else if (isFunction(isRoot) && isRoot(scope)) {\n        return Optional.none();\n      } else {\n        return ancestor(scope, a, isRoot);\n      }\n    }\n\n    var ancestor$3 = function (scope, predicate, isRoot) {\n      var element = scope.dom;\n      var stop = isFunction(isRoot) ? isRoot : never;\n      while (element.parentNode) {\n        element = element.parentNode;\n        var el = SugarElement.fromDom(element);\n        if (predicate(el)) {\n          return Optional.some(el);\n        } else if (stop(el)) {\n          break;\n        }\n      }\n      return Optional.none();\n    };\n    var closest$3 = function (scope, predicate, isRoot) {\n      var is = function (s, test) {\n        return test(s);\n      };\n      return ClosestOrAncestor(is, ancestor$3, scope, predicate, isRoot);\n    };\n    var sibling$2 = function (scope, predicate) {\n      var element = scope.dom;\n      if (!element.parentNode) {\n        return Optional.none();\n      }\n      return child(SugarElement.fromDom(element.parentNode), function (x) {\n        return !eq(scope, x) && predicate(x);\n      });\n    };\n    var child = function (scope, predicate) {\n      var pred = function (node) {\n        return predicate(SugarElement.fromDom(node));\n      };\n      var result = find$3(scope.dom.childNodes, pred);\n      return result.map(SugarElement.fromDom);\n    };\n\n    var ancestor$2 = function (scope, selector, isRoot) {\n      return ancestor$3(scope, function (e) {\n        return is$2(e, selector);\n      }, isRoot);\n    };\n    var descendant = function (scope, selector) {\n      return one(selector, scope);\n    };\n    var closest$2 = function (scope, selector, isRoot) {\n      var is = function (element, selector) {\n        return is$2(element, selector);\n      };\n      return ClosestOrAncestor(is, ancestor$2, scope, selector, isRoot);\n    };\n\n    var promise = function () {\n      var bind = function (fn, thisArg) {\n        return function () {\n          var args = [];\n          for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n          }\n          fn.apply(thisArg, args);\n        };\n      };\n      var isArray = Array.isArray || function (value) {\n        return Object.prototype.toString.call(value) === '[object Array]';\n      };\n      var Promise = function (fn) {\n        if (typeof this !== 'object') {\n          throw new TypeError('Promises must be constructed via new');\n        }\n        if (typeof fn !== 'function') {\n          throw new TypeError('not a function');\n        }\n        this._state = null;\n        this._value = null;\n        this._deferreds = [];\n        doResolve(fn, bind(resolve, this), bind(reject, this));\n      };\n      var asap = Promise.immediateFn || typeof setImmediate === 'function' && setImmediate || function (fn) {\n        return setTimeout(fn, 1);\n      };\n      function handle(deferred) {\n        var me = this;\n        if (this._state === null) {\n          this._deferreds.push(deferred);\n          return;\n        }\n        asap(function () {\n          var cb = me._state ? deferred.onFulfilled : deferred.onRejected;\n          if (cb === null) {\n            (me._state ? deferred.resolve : deferred.reject)(me._value);\n            return;\n          }\n          var ret;\n          try {\n            ret = cb(me._value);\n          } catch (e) {\n            deferred.reject(e);\n            return;\n          }\n          deferred.resolve(ret);\n        });\n      }\n      function resolve(newValue) {\n        try {\n          if (newValue === this) {\n            throw new TypeError('A promise cannot be resolved with itself.');\n          }\n          if (newValue && (typeof newValue === 'object' || typeof newValue === 'function')) {\n            var then = newValue.then;\n            if (typeof then === 'function') {\n              doResolve(bind(then, newValue), bind(resolve, this), bind(reject, this));\n              return;\n            }\n          }\n          this._state = true;\n          this._value = newValue;\n          finale.call(this);\n        } catch (e) {\n          reject.call(this, e);\n        }\n      }\n      function reject(newValue) {\n        this._state = false;\n        this._value = newValue;\n        finale.call(this);\n      }\n      function finale() {\n        for (var i = 0, len = this._deferreds.length; i < len; i++) {\n          handle.call(this, this._deferreds[i]);\n        }\n        this._deferreds = null;\n      }\n      function Handler(onFulfilled, onRejected, resolve, reject) {\n        this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\n        this.onRejected = typeof onRejected === 'function' ? onRejected : null;\n        this.resolve = resolve;\n        this.reject = reject;\n      }\n      var doResolve = function (fn, onFulfilled, onRejected) {\n        var done = false;\n        try {\n          fn(function (value) {\n            if (done) {\n              return;\n            }\n            done = true;\n            onFulfilled(value);\n          }, function (reason) {\n            if (done) {\n              return;\n            }\n            done = true;\n            onRejected(reason);\n          });\n        } catch (ex) {\n          if (done) {\n            return;\n          }\n          done = true;\n          onRejected(ex);\n        }\n      };\n      Promise.prototype.catch = function (onRejected) {\n        return this.then(null, onRejected);\n      };\n      Promise.prototype.then = function (onFulfilled, onRejected) {\n        var me = this;\n        return new Promise(function (resolve, reject) {\n          handle.call(me, new Handler(onFulfilled, onRejected, resolve, reject));\n        });\n      };\n      Promise.all = function () {\n        var values = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          values[_i] = arguments[_i];\n        }\n        var args = Array.prototype.slice.call(values.length === 1 && isArray(values[0]) ? values[0] : values);\n        return new Promise(function (resolve, reject) {\n          if (args.length === 0) {\n            return resolve([]);\n          }\n          var remaining = args.length;\n          var res = function (i, val) {\n            try {\n              if (val && (typeof val === 'object' || typeof val === 'function')) {\n                var then = val.then;\n                if (typeof then === 'function') {\n                  then.call(val, function (val) {\n                    res(i, val);\n                  }, reject);\n                  return;\n                }\n              }\n              args[i] = val;\n              if (--remaining === 0) {\n                resolve(args);\n              }\n            } catch (ex) {\n              reject(ex);\n            }\n          };\n          for (var i = 0; i < args.length; i++) {\n            res(i, args[i]);\n          }\n        });\n      };\n      Promise.resolve = function (value) {\n        if (value && typeof value === 'object' && value.constructor === Promise) {\n          return value;\n        }\n        return new Promise(function (resolve) {\n          resolve(value);\n        });\n      };\n      Promise.reject = function (value) {\n        return new Promise(function (resolve, reject) {\n          reject(value);\n        });\n      };\n      Promise.race = function (values) {\n        return new Promise(function (resolve, reject) {\n          for (var i = 0, len = values.length; i < len; i++) {\n            values[i].then(resolve, reject);\n          }\n        });\n      };\n      return Promise;\n    };\n    var promiseObj = window.Promise ? window.Promise : promise();\n\n    var requestAnimationFramePromise;\n    var requestAnimationFrame = function (callback, element) {\n      var requestAnimationFrameFunc = window.requestAnimationFrame;\n      var vendors = [\n        'ms',\n        'moz',\n        'webkit'\n      ];\n      var featurefill = function (cb) {\n        window.setTimeout(cb, 0);\n      };\n      for (var i = 0; i < vendors.length && !requestAnimationFrameFunc; i++) {\n        requestAnimationFrameFunc = window[vendors[i] + 'RequestAnimationFrame'];\n      }\n      if (!requestAnimationFrameFunc) {\n        requestAnimationFrameFunc = featurefill;\n      }\n      requestAnimationFrameFunc(callback, element);\n    };\n    var wrappedSetTimeout = function (callback, time) {\n      if (typeof time !== 'number') {\n        time = 0;\n      }\n      return setTimeout(callback, time);\n    };\n    var wrappedSetInterval = function (callback, time) {\n      if (typeof time !== 'number') {\n        time = 1;\n      }\n      return setInterval(callback, time);\n    };\n    var wrappedClearTimeout = function (id) {\n      return clearTimeout(id);\n    };\n    var wrappedClearInterval = function (id) {\n      return clearInterval(id);\n    };\n    var debounce = function (callback, time) {\n      var timer;\n      var func = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        clearTimeout(timer);\n        timer = wrappedSetTimeout(function () {\n          callback.apply(this, args);\n        }, time);\n      };\n      func.stop = function () {\n        clearTimeout(timer);\n      };\n      return func;\n    };\n    var Delay = {\n      requestAnimationFrame: function (callback, element) {\n        if (requestAnimationFramePromise) {\n          requestAnimationFramePromise.then(callback);\n          return;\n        }\n        requestAnimationFramePromise = new promiseObj(function (resolve) {\n          if (!element) {\n            element = document.body;\n          }\n          requestAnimationFrame(resolve, element);\n        }).then(callback);\n      },\n      setTimeout: wrappedSetTimeout,\n      setInterval: wrappedSetInterval,\n      setEditorTimeout: function (editor, callback, time) {\n        return wrappedSetTimeout(function () {\n          if (!editor.removed) {\n            callback();\n          }\n        }, time);\n      },\n      setEditorInterval: function (editor, callback, time) {\n        var timer = wrappedSetInterval(function () {\n          if (!editor.removed) {\n            callback();\n          } else {\n            clearInterval(timer);\n          }\n        }, time);\n        return timer;\n      },\n      debounce: debounce,\n      throttle: debounce,\n      clearInterval: wrappedClearInterval,\n      clearTimeout: wrappedClearTimeout\n    };\n\n    var StyleSheetLoader = function (documentOrShadowRoot, settings) {\n      if (settings === void 0) {\n        settings = {};\n      }\n      var idCount = 0;\n      var loadedStates = {};\n      var edos = SugarElement.fromDom(documentOrShadowRoot);\n      var doc = documentOrOwner(edos);\n      var maxLoadTime = settings.maxLoadTime || 5000;\n      var _setReferrerPolicy = function (referrerPolicy) {\n        settings.referrerPolicy = referrerPolicy;\n      };\n      var addStyle = function (element) {\n        append$1(getStyleContainer(edos), element);\n      };\n      var removeStyle = function (id) {\n        var styleContainer = getStyleContainer(edos);\n        descendant(styleContainer, '#' + id).each(remove$7);\n      };\n      var getOrCreateState = function (url) {\n        return get$9(loadedStates, url).getOrThunk(function () {\n          return {\n            id: 'mce-u' + idCount++,\n            passed: [],\n            failed: [],\n            count: 0\n          };\n        });\n      };\n      var load = function (url, success, failure) {\n        var link;\n        var urlWithSuffix = Tools._addCacheSuffix(url);\n        var state = getOrCreateState(urlWithSuffix);\n        loadedStates[urlWithSuffix] = state;\n        state.count++;\n        var resolve = function (callbacks, status) {\n          var i = callbacks.length;\n          while (i--) {\n            callbacks[i]();\n          }\n          state.status = status;\n          state.passed = [];\n          state.failed = [];\n          if (link) {\n            link.onload = null;\n            link.onerror = null;\n            link = null;\n          }\n        };\n        var passed = function () {\n          return resolve(state.passed, 2);\n        };\n        var failed = function () {\n          return resolve(state.failed, 3);\n        };\n        var wait = function (testCallback, waitCallback) {\n          if (!testCallback()) {\n            if (Date.now() - startTime < maxLoadTime) {\n              Delay.setTimeout(waitCallback);\n            } else {\n              failed();\n            }\n          }\n        };\n        var waitForWebKitLinkLoaded = function () {\n          wait(function () {\n            var styleSheets = documentOrShadowRoot.styleSheets;\n            var i = styleSheets.length;\n            while (i--) {\n              var styleSheet = styleSheets[i];\n              var owner = styleSheet.ownerNode;\n              if (owner && owner.id === link.id) {\n                passed();\n                return true;\n              }\n            }\n            return false;\n          }, waitForWebKitLinkLoaded);\n        };\n        if (success) {\n          state.passed.push(success);\n        }\n        if (failure) {\n          state.failed.push(failure);\n        }\n        if (state.status === 1) {\n          return;\n        }\n        if (state.status === 2) {\n          passed();\n          return;\n        }\n        if (state.status === 3) {\n          failed();\n          return;\n        }\n        state.status = 1;\n        var linkElem = SugarElement.fromTag('link', doc.dom);\n        setAll$1(linkElem, {\n          rel: 'stylesheet',\n          type: 'text/css',\n          id: state.id\n        });\n        var startTime = Date.now();\n        if (settings.contentCssCors) {\n          set$1(linkElem, 'crossOrigin', 'anonymous');\n        }\n        if (settings.referrerPolicy) {\n          set$1(linkElem, 'referrerpolicy', settings.referrerPolicy);\n        }\n        link = linkElem.dom;\n        link.onload = waitForWebKitLinkLoaded;\n        link.onerror = failed;\n        addStyle(linkElem);\n        set$1(linkElem, 'href', urlWithSuffix);\n      };\n      var loadF = function (url) {\n        return Future.nu(function (resolve) {\n          load(url, compose(resolve, constant(Result.value(url))), compose(resolve, constant(Result.error(url))));\n        });\n      };\n      var loadAll = function (urls, success, failure) {\n        par(map$3(urls, loadF)).get(function (result) {\n          var parts = partition(result, function (r) {\n            return r.isValue();\n          });\n          if (parts.fail.length > 0) {\n            failure(parts.fail.map(unite));\n          } else {\n            success(parts.pass.map(unite));\n          }\n        });\n      };\n      var unload = function (url) {\n        var urlWithSuffix = Tools._addCacheSuffix(url);\n        get$9(loadedStates, urlWithSuffix).each(function (state) {\n          var count = --state.count;\n          if (count === 0) {\n            delete loadedStates[urlWithSuffix];\n            removeStyle(state.id);\n          }\n        });\n      };\n      var unloadAll = function (urls) {\n        each$k(urls, function (url) {\n          unload(url);\n        });\n      };\n      return {\n        load: load,\n        loadAll: loadAll,\n        unload: unload,\n        unloadAll: unloadAll,\n        _setReferrerPolicy: _setReferrerPolicy\n      };\n    };\n\n    var create$8 = function () {\n      var map = new WeakMap();\n      var forElement = function (referenceElement, settings) {\n        var root = getRootNode(referenceElement);\n        var rootDom = root.dom;\n        return Optional.from(map.get(rootDom)).getOrThunk(function () {\n          var sl = StyleSheetLoader(rootDom, settings);\n          map.set(rootDom, sl);\n          return sl;\n        });\n      };\n      return { forElement: forElement };\n    };\n    var instance = create$8();\n\n    var DomTreeWalker = function () {\n      function DomTreeWalker(startNode, rootNode) {\n        this.node = startNode;\n        this.rootNode = rootNode;\n        this.current = this.current.bind(this);\n        this.next = this.next.bind(this);\n        this.prev = this.prev.bind(this);\n        this.prev2 = this.prev2.bind(this);\n      }\n      DomTreeWalker.prototype.current = function () {\n        return this.node;\n      };\n      DomTreeWalker.prototype.next = function (shallow) {\n        this.node = this.findSibling(this.node, 'firstChild', 'nextSibling', shallow);\n        return this.node;\n      };\n      DomTreeWalker.prototype.prev = function (shallow) {\n        this.node = this.findSibling(this.node, 'lastChild', 'previousSibling', shallow);\n        return this.node;\n      };\n      DomTreeWalker.prototype.prev2 = function (shallow) {\n        this.node = this.findPreviousNode(this.node, 'lastChild', 'previousSibling', shallow);\n        return this.node;\n      };\n      DomTreeWalker.prototype.findSibling = function (node, startName, siblingName, shallow) {\n        var sibling, parent;\n        if (node) {\n          if (!shallow && node[startName]) {\n            return node[startName];\n          }\n          if (node !== this.rootNode) {\n            sibling = node[siblingName];\n            if (sibling) {\n              return sibling;\n            }\n            for (parent = node.parentNode; parent && parent !== this.rootNode; parent = parent.parentNode) {\n              sibling = parent[siblingName];\n              if (sibling) {\n                return sibling;\n              }\n            }\n          }\n        }\n      };\n      DomTreeWalker.prototype.findPreviousNode = function (node, startName, siblingName, shallow) {\n        var sibling, parent, child;\n        if (node) {\n          sibling = node[siblingName];\n          if (this.rootNode && sibling === this.rootNode) {\n            return;\n          }\n          if (sibling) {\n            if (!shallow) {\n              for (child = sibling[startName]; child; child = child[startName]) {\n                if (!child[startName]) {\n                  return child;\n                }\n              }\n            }\n            return sibling;\n          }\n          parent = node.parentNode;\n          if (parent && parent !== this.rootNode) {\n            return parent;\n          }\n        }\n      };\n      return DomTreeWalker;\n    }();\n\n    var blocks = [\n      'article',\n      'aside',\n      'details',\n      'div',\n      'dt',\n      'figcaption',\n      'footer',\n      'form',\n      'fieldset',\n      'header',\n      'hgroup',\n      'html',\n      'main',\n      'nav',\n      'section',\n      'summary',\n      'body',\n      'p',\n      'dl',\n      'multicol',\n      'dd',\n      'figure',\n      'address',\n      'center',\n      'blockquote',\n      'h1',\n      'h2',\n      'h3',\n      'h4',\n      'h5',\n      'h6',\n      'listing',\n      'xmp',\n      'pre',\n      'plaintext',\n      'menu',\n      'dir',\n      'ul',\n      'ol',\n      'li',\n      'hr',\n      'table',\n      'tbody',\n      'thead',\n      'tfoot',\n      'th',\n      'tr',\n      'td',\n      'caption'\n    ];\n    var tableCells = [\n      'td',\n      'th'\n    ];\n    var tableSections = [\n      'thead',\n      'tbody',\n      'tfoot'\n    ];\n    var textBlocks = [\n      'h1',\n      'h2',\n      'h3',\n      'h4',\n      'h5',\n      'h6',\n      'p',\n      'div',\n      'address',\n      'pre',\n      'form',\n      'blockquote',\n      'center',\n      'dir',\n      'fieldset',\n      'header',\n      'footer',\n      'article',\n      'section',\n      'hgroup',\n      'aside',\n      'nav',\n      'figure'\n    ];\n    var headings = [\n      'h1',\n      'h2',\n      'h3',\n      'h4',\n      'h5',\n      'h6'\n    ];\n    var listItems$1 = [\n      'li',\n      'dd',\n      'dt'\n    ];\n    var lists = [\n      'ul',\n      'ol',\n      'dl'\n    ];\n    var wsElements = [\n      'pre',\n      'script',\n      'textarea',\n      'style'\n    ];\n    var lazyLookup = function (items) {\n      var lookup;\n      return function (node) {\n        lookup = lookup ? lookup : mapToObject(items, always);\n        return has$2(lookup, name(node));\n      };\n    };\n    var isHeading = lazyLookup(headings);\n    var isBlock$2 = lazyLookup(blocks);\n    var isTable$2 = function (node) {\n      return name(node) === 'table';\n    };\n    var isInline$1 = function (node) {\n      return isElement$6(node) && !isBlock$2(node);\n    };\n    var isBr$4 = function (node) {\n      return isElement$6(node) && name(node) === 'br';\n    };\n    var isTextBlock$2 = lazyLookup(textBlocks);\n    var isList = lazyLookup(lists);\n    var isListItem = lazyLookup(listItems$1);\n    var isTableSection = lazyLookup(tableSections);\n    var isTableCell$4 = lazyLookup(tableCells);\n    var isWsPreserveElement = lazyLookup(wsElements);\n\n    var ancestor$1 = function (scope, selector, isRoot) {\n      return ancestor$2(scope, selector, isRoot).isSome();\n    };\n\n    var zeroWidth = '\\uFEFF';\n    var nbsp = '\\xA0';\n    var isZwsp$1 = function (char) {\n      return char === zeroWidth;\n    };\n    var removeZwsp = function (s) {\n      return s.replace(/\\uFEFF/g, '');\n    };\n\n    var ZWSP$1 = zeroWidth;\n    var isZwsp = isZwsp$1;\n    var trim$2 = removeZwsp;\n\n    var isElement$4 = isElement$5;\n    var isText$6 = isText$7;\n    var isCaretContainerBlock$1 = function (node) {\n      if (isText$6(node)) {\n        node = node.parentNode;\n      }\n      return isElement$4(node) && node.hasAttribute('data-mce-caret');\n    };\n    var isCaretContainerInline = function (node) {\n      return isText$6(node) && isZwsp(node.data);\n    };\n    var isCaretContainer$2 = function (node) {\n      return isCaretContainerBlock$1(node) || isCaretContainerInline(node);\n    };\n    var hasContent = function (node) {\n      return node.firstChild !== node.lastChild || !isBr$5(node.firstChild);\n    };\n    var insertInline$1 = function (node, before) {\n      var doc = node.ownerDocument;\n      var textNode = doc.createTextNode(ZWSP$1);\n      var parentNode = node.parentNode;\n      if (!before) {\n        var sibling = node.nextSibling;\n        if (isText$6(sibling)) {\n          if (isCaretContainer$2(sibling)) {\n            return sibling;\n          }\n          if (startsWithCaretContainer$1(sibling)) {\n            sibling.splitText(1);\n            return sibling;\n          }\n        }\n        if (node.nextSibling) {\n          parentNode.insertBefore(textNode, node.nextSibling);\n        } else {\n          parentNode.appendChild(textNode);\n        }\n      } else {\n        var sibling = node.previousSibling;\n        if (isText$6(sibling)) {\n          if (isCaretContainer$2(sibling)) {\n            return sibling;\n          }\n          if (endsWithCaretContainer$1(sibling)) {\n            return sibling.splitText(sibling.data.length - 1);\n          }\n        }\n        parentNode.insertBefore(textNode, node);\n      }\n      return textNode;\n    };\n    var isBeforeInline = function (pos) {\n      var container = pos.container();\n      if (!isText$7(container)) {\n        return false;\n      }\n      return container.data.charAt(pos.offset()) === ZWSP$1 || pos.isAtStart() && isCaretContainerInline(container.previousSibling);\n    };\n    var isAfterInline = function (pos) {\n      var container = pos.container();\n      if (!isText$7(container)) {\n        return false;\n      }\n      return container.data.charAt(pos.offset() - 1) === ZWSP$1 || pos.isAtEnd() && isCaretContainerInline(container.nextSibling);\n    };\n    var createBogusBr = function () {\n      var br = document.createElement('br');\n      br.setAttribute('data-mce-bogus', '1');\n      return br;\n    };\n    var insertBlock$1 = function (blockName, node, before) {\n      var doc = node.ownerDocument;\n      var blockNode = doc.createElement(blockName);\n      blockNode.setAttribute('data-mce-caret', before ? 'before' : 'after');\n      blockNode.setAttribute('data-mce-bogus', 'all');\n      blockNode.appendChild(createBogusBr());\n      var parentNode = node.parentNode;\n      if (!before) {\n        if (node.nextSibling) {\n          parentNode.insertBefore(blockNode, node.nextSibling);\n        } else {\n          parentNode.appendChild(blockNode);\n        }\n      } else {\n        parentNode.insertBefore(blockNode, node);\n      }\n      return blockNode;\n    };\n    var startsWithCaretContainer$1 = function (node) {\n      return isText$6(node) && node.data[0] === ZWSP$1;\n    };\n    var endsWithCaretContainer$1 = function (node) {\n      return isText$6(node) && node.data[node.data.length - 1] === ZWSP$1;\n    };\n    var trimBogusBr = function (elm) {\n      var brs = elm.getElementsByTagName('br');\n      var lastBr = brs[brs.length - 1];\n      if (isBogus$2(lastBr)) {\n        lastBr.parentNode.removeChild(lastBr);\n      }\n    };\n    var showCaretContainerBlock = function (caretContainer) {\n      if (caretContainer && caretContainer.hasAttribute('data-mce-caret')) {\n        trimBogusBr(caretContainer);\n        caretContainer.removeAttribute('data-mce-caret');\n        caretContainer.removeAttribute('data-mce-bogus');\n        caretContainer.removeAttribute('style');\n        caretContainer.removeAttribute('_moz_abspos');\n        return caretContainer;\n      }\n      return null;\n    };\n    var isRangeInCaretContainerBlock = function (range) {\n      return isCaretContainerBlock$1(range.startContainer);\n    };\n\n    var isContentEditableTrue$3 = isContentEditableTrue$4;\n    var isContentEditableFalse$a = isContentEditableFalse$b;\n    var isBr$3 = isBr$5;\n    var isText$5 = isText$7;\n    var isInvalidTextElement = matchNodeNames([\n      'script',\n      'style',\n      'textarea'\n    ]);\n    var isAtomicInline = matchNodeNames([\n      'img',\n      'input',\n      'textarea',\n      'hr',\n      'iframe',\n      'video',\n      'audio',\n      'object',\n      'embed'\n    ]);\n    var isTable$1 = matchNodeNames(['table']);\n    var isCaretContainer$1 = isCaretContainer$2;\n    var isCaretCandidate$3 = function (node) {\n      if (isCaretContainer$1(node)) {\n        return false;\n      }\n      if (isText$5(node)) {\n        return !isInvalidTextElement(node.parentNode);\n      }\n      return isAtomicInline(node) || isBr$3(node) || isTable$1(node) || isNonUiContentEditableFalse(node);\n    };\n    var isUnselectable = function (node) {\n      return isElement$5(node) && node.getAttribute('unselectable') === 'true';\n    };\n    var isNonUiContentEditableFalse = function (node) {\n      return isUnselectable(node) === false && isContentEditableFalse$a(node);\n    };\n    var isInEditable = function (node, root) {\n      for (node = node.parentNode; node && node !== root; node = node.parentNode) {\n        if (isNonUiContentEditableFalse(node)) {\n          return false;\n        }\n        if (isContentEditableTrue$3(node)) {\n          return true;\n        }\n      }\n      return true;\n    };\n    var isAtomicContentEditableFalse = function (node) {\n      if (!isNonUiContentEditableFalse(node)) {\n        return false;\n      }\n      return foldl(from(node.getElementsByTagName('*')), function (result, elm) {\n        return result || isContentEditableTrue$3(elm);\n      }, false) !== true;\n    };\n    var isAtomic$1 = function (node) {\n      return isAtomicInline(node) || isAtomicContentEditableFalse(node);\n    };\n    var isEditableCaretCandidate$1 = function (node, root) {\n      return isCaretCandidate$3(node) && isInEditable(node, root);\n    };\n\n    var whiteSpaceRegExp$1 = /^[ \\t\\r\\n]*$/;\n    var isWhitespaceText = function (text) {\n      return whiteSpaceRegExp$1.test(text);\n    };\n\n    var hasWhitespacePreserveParent = function (node, rootNode) {\n      var rootElement = SugarElement.fromDom(rootNode);\n      var startNode = SugarElement.fromDom(node);\n      return ancestor$1(startNode, 'pre,code', curry(eq, rootElement));\n    };\n    var isWhitespace = function (node, rootNode) {\n      return isText$7(node) && isWhitespaceText(node.data) && hasWhitespacePreserveParent(node, rootNode) === false;\n    };\n    var isNamedAnchor = function (node) {\n      return isElement$5(node) && node.nodeName === 'A' && !node.hasAttribute('href') && (node.hasAttribute('name') || node.hasAttribute('id'));\n    };\n    var isContent$1 = function (node, rootNode) {\n      return isCaretCandidate$3(node) && isWhitespace(node, rootNode) === false || isNamedAnchor(node) || isBookmark(node);\n    };\n    var isBookmark = hasAttribute('data-mce-bookmark');\n    var isBogus$1 = hasAttribute('data-mce-bogus');\n    var isBogusAll = hasAttributeValue('data-mce-bogus', 'all');\n    var isEmptyNode = function (targetNode, skipBogus) {\n      var brCount = 0;\n      if (isContent$1(targetNode, targetNode)) {\n        return false;\n      } else {\n        var node = targetNode.firstChild;\n        if (!node) {\n          return true;\n        }\n        var walker = new DomTreeWalker(node, targetNode);\n        do {\n          if (skipBogus) {\n            if (isBogusAll(node)) {\n              node = walker.next(true);\n              continue;\n            }\n            if (isBogus$1(node)) {\n              node = walker.next();\n              continue;\n            }\n          }\n          if (isBr$5(node)) {\n            brCount++;\n            node = walker.next();\n            continue;\n          }\n          if (isContent$1(node, targetNode)) {\n            return false;\n          }\n          node = walker.next();\n        } while (node);\n        return brCount <= 1;\n      }\n    };\n    var isEmpty$2 = function (elm, skipBogus) {\n      if (skipBogus === void 0) {\n        skipBogus = true;\n      }\n      return isEmptyNode(elm.dom, skipBogus);\n    };\n\n    var isSpan = function (node) {\n      return node.nodeName.toLowerCase() === 'span';\n    };\n    var isInlineContent = function (node, root) {\n      return isNonNullable(node) && (isContent$1(node, root) || isInline$1(SugarElement.fromDom(node)));\n    };\n    var surroundedByInlineContent = function (node, root) {\n      var prev = new DomTreeWalker(node, root).prev(false);\n      var next = new DomTreeWalker(node, root).next(false);\n      var prevIsInline = isUndefined(prev) || isInlineContent(prev, root);\n      var nextIsInline = isUndefined(next) || isInlineContent(next, root);\n      return prevIsInline && nextIsInline;\n    };\n    var isBookmarkNode$2 = function (node) {\n      return isSpan(node) && node.getAttribute('data-mce-type') === 'bookmark';\n    };\n    var isKeepTextNode = function (node, root) {\n      return isText$7(node) && node.data.length > 0 && surroundedByInlineContent(node, root);\n    };\n    var isKeepElement = function (node) {\n      return isElement$5(node) ? node.childNodes.length > 0 : false;\n    };\n    var isDocument = function (node) {\n      return isDocumentFragment(node) || isDocument$1(node);\n    };\n    var trimNode = function (dom, node, root) {\n      var rootNode = root || node;\n      if (isElement$5(node) && isBookmarkNode$2(node)) {\n        return node;\n      }\n      var children = node.childNodes;\n      for (var i = children.length - 1; i >= 0; i--) {\n        trimNode(dom, children[i], rootNode);\n      }\n      if (isElement$5(node)) {\n        var currentChildren = node.childNodes;\n        if (currentChildren.length === 1 && isBookmarkNode$2(currentChildren[0])) {\n          node.parentNode.insertBefore(currentChildren[0], node);\n        }\n      }\n      if (!isDocument(node) && !isContent$1(node, rootNode) && !isKeepElement(node) && !isKeepTextNode(node, rootNode)) {\n        dom.remove(node);\n      }\n      return node;\n    };\n\n    var makeMap$3 = Tools.makeMap;\n    var attrsCharsRegExp = /[&<>\\\"\\u0060\\u007E-\\uD7FF\\uE000-\\uFFEF]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/g;\n    var textCharsRegExp = /[<>&\\u007E-\\uD7FF\\uE000-\\uFFEF]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/g;\n    var rawCharsRegExp = /[<>&\\\"\\']/g;\n    var entityRegExp = /&#([a-z0-9]+);?|&([a-z0-9]+);/gi;\n    var asciiMap = {\n      128: '\\u20AC',\n      130: '\\u201A',\n      131: '\\u0192',\n      132: '\\u201E',\n      133: '\\u2026',\n      134: '\\u2020',\n      135: '\\u2021',\n      136: '\\u02c6',\n      137: '\\u2030',\n      138: '\\u0160',\n      139: '\\u2039',\n      140: '\\u0152',\n      142: '\\u017d',\n      145: '\\u2018',\n      146: '\\u2019',\n      147: '\\u201C',\n      148: '\\u201D',\n      149: '\\u2022',\n      150: '\\u2013',\n      151: '\\u2014',\n      152: '\\u02DC',\n      153: '\\u2122',\n      154: '\\u0161',\n      155: '\\u203A',\n      156: '\\u0153',\n      158: '\\u017e',\n      159: '\\u0178'\n    };\n    var baseEntities = {\n      '\"': '&quot;',\n      '\\'': '&#39;',\n      '<': '&lt;',\n      '>': '&gt;',\n      '&': '&amp;',\n      '`': '&#96;'\n    };\n    var reverseEntities = {\n      '&lt;': '<',\n      '&gt;': '>',\n      '&amp;': '&',\n      '&quot;': '\"',\n      '&apos;': '\\''\n    };\n    var nativeDecode = function (text) {\n      var elm = SugarElement.fromTag('div').dom;\n      elm.innerHTML = text;\n      return elm.textContent || elm.innerText || text;\n    };\n    var buildEntitiesLookup = function (items, radix) {\n      var i, chr, entity;\n      var lookup = {};\n      if (items) {\n        items = items.split(',');\n        radix = radix || 10;\n        for (i = 0; i < items.length; i += 2) {\n          chr = String.fromCharCode(parseInt(items[i], radix));\n          if (!baseEntities[chr]) {\n            entity = '&' + items[i + 1] + ';';\n            lookup[chr] = entity;\n            lookup[entity] = chr;\n          }\n        }\n        return lookup;\n      }\n    };\n    var namedEntities = buildEntitiesLookup('50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,' + '5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,' + '5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,' + '5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,' + '68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,' + '6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,' + '6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,' + '75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,' + '7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,' + '7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,' + 'sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,' + 'st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,' + 't9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,' + 'tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,' + 'u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,' + '81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,' + '8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,' + '8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,' + '8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,' + '8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,' + 'nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,' + 'rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,' + 'Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,' + '80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,' + '811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro', 32);\n    var encodeRaw = function (text, attr) {\n      return text.replace(attr ? attrsCharsRegExp : textCharsRegExp, function (chr) {\n        return baseEntities[chr] || chr;\n      });\n    };\n    var encodeAllRaw = function (text) {\n      return ('' + text).replace(rawCharsRegExp, function (chr) {\n        return baseEntities[chr] || chr;\n      });\n    };\n    var encodeNumeric = function (text, attr) {\n      return text.replace(attr ? attrsCharsRegExp : textCharsRegExp, function (chr) {\n        if (chr.length > 1) {\n          return '&#' + ((chr.charCodeAt(0) - 55296) * 1024 + (chr.charCodeAt(1) - 56320) + 65536) + ';';\n        }\n        return baseEntities[chr] || '&#' + chr.charCodeAt(0) + ';';\n      });\n    };\n    var encodeNamed = function (text, attr, entities) {\n      entities = entities || namedEntities;\n      return text.replace(attr ? attrsCharsRegExp : textCharsRegExp, function (chr) {\n        return baseEntities[chr] || entities[chr] || chr;\n      });\n    };\n    var getEncodeFunc = function (name, entities) {\n      var entitiesMap = buildEntitiesLookup(entities) || namedEntities;\n      var encodeNamedAndNumeric = function (text, attr) {\n        return text.replace(attr ? attrsCharsRegExp : textCharsRegExp, function (chr) {\n          if (baseEntities[chr] !== undefined) {\n            return baseEntities[chr];\n          }\n          if (entitiesMap[chr] !== undefined) {\n            return entitiesMap[chr];\n          }\n          if (chr.length > 1) {\n            return '&#' + ((chr.charCodeAt(0) - 55296) * 1024 + (chr.charCodeAt(1) - 56320) + 65536) + ';';\n          }\n          return '&#' + chr.charCodeAt(0) + ';';\n        });\n      };\n      var encodeCustomNamed = function (text, attr) {\n        return encodeNamed(text, attr, entitiesMap);\n      };\n      var nameMap = makeMap$3(name.replace(/\\+/g, ','));\n      if (nameMap.named && nameMap.numeric) {\n        return encodeNamedAndNumeric;\n      }\n      if (nameMap.named) {\n        if (entities) {\n          return encodeCustomNamed;\n        }\n        return encodeNamed;\n      }\n      if (nameMap.numeric) {\n        return encodeNumeric;\n      }\n      return encodeRaw;\n    };\n    var decode = function (text) {\n      return text.replace(entityRegExp, function (all, numeric) {\n        if (numeric) {\n          if (numeric.charAt(0).toLowerCase() === 'x') {\n            numeric = parseInt(numeric.substr(1), 16);\n          } else {\n            numeric = parseInt(numeric, 10);\n          }\n          if (numeric > 65535) {\n            numeric -= 65536;\n            return String.fromCharCode(55296 + (numeric >> 10), 56320 + (numeric & 1023));\n          }\n          return asciiMap[numeric] || String.fromCharCode(numeric);\n        }\n        return reverseEntities[all] || namedEntities[all] || nativeDecode(all);\n      });\n    };\n    var Entities = {\n      encodeRaw: encodeRaw,\n      encodeAllRaw: encodeAllRaw,\n      encodeNumeric: encodeNumeric,\n      encodeNamed: encodeNamed,\n      getEncodeFunc: getEncodeFunc,\n      decode: decode\n    };\n\n    var mapCache = {}, dummyObj = {};\n    var makeMap$2 = Tools.makeMap, each$h = Tools.each, extend$5 = Tools.extend, explode$3 = Tools.explode, inArray$2 = Tools.inArray;\n    var split$1 = function (items, delim) {\n      items = Tools.trim(items);\n      return items ? items.split(delim || ' ') : [];\n    };\n    var compileSchema = function (type) {\n      var schema = {};\n      var globalAttributes, blockContent;\n      var phrasingContent, flowContent, html4BlockContent, html4PhrasingContent;\n      var add = function (name, attributes, children) {\n        var ni, attributesOrder, element;\n        var arrayToMap = function (array, obj) {\n          var map = {};\n          var i, l;\n          for (i = 0, l = array.length; i < l; i++) {\n            map[array[i]] = obj || {};\n          }\n          return map;\n        };\n        children = children || [];\n        attributes = attributes || '';\n        if (typeof children === 'string') {\n          children = split$1(children);\n        }\n        var names = split$1(name);\n        ni = names.length;\n        while (ni--) {\n          attributesOrder = split$1([\n            globalAttributes,\n            attributes\n          ].join(' '));\n          element = {\n            attributes: arrayToMap(attributesOrder),\n            attributesOrder: attributesOrder,\n            children: arrayToMap(children, dummyObj)\n          };\n          schema[names[ni]] = element;\n        }\n      };\n      var addAttrs = function (name, attributes) {\n        var ni, schemaItem, i, l;\n        var names = split$1(name);\n        ni = names.length;\n        var attrs = split$1(attributes);\n        while (ni--) {\n          schemaItem = schema[names[ni]];\n          for (i = 0, l = attrs.length; i < l; i++) {\n            schemaItem.attributes[attrs[i]] = {};\n            schemaItem.attributesOrder.push(attrs[i]);\n          }\n        }\n      };\n      if (mapCache[type]) {\n        return mapCache[type];\n      }\n      globalAttributes = 'id accesskey class dir lang style tabindex title role';\n      blockContent = 'address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul';\n      phrasingContent = 'a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd ' + 'label map noscript object q s samp script select small span strong sub sup ' + 'textarea u var #text #comment';\n      if (type !== 'html4') {\n        globalAttributes += ' contenteditable contextmenu draggable dropzone ' + 'hidden spellcheck translate';\n        blockContent += ' article aside details dialog figure main header footer hgroup section nav';\n        phrasingContent += ' audio canvas command datalist mark meter output picture ' + 'progress time wbr video ruby bdi keygen';\n      }\n      if (type !== 'html5-strict') {\n        globalAttributes += ' xml:lang';\n        html4PhrasingContent = 'acronym applet basefont big font strike tt';\n        phrasingContent = [\n          phrasingContent,\n          html4PhrasingContent\n        ].join(' ');\n        each$h(split$1(html4PhrasingContent), function (name) {\n          add(name, '', phrasingContent);\n        });\n        html4BlockContent = 'center dir isindex noframes';\n        blockContent = [\n          blockContent,\n          html4BlockContent\n        ].join(' ');\n        flowContent = [\n          blockContent,\n          phrasingContent\n        ].join(' ');\n        each$h(split$1(html4BlockContent), function (name) {\n          add(name, '', flowContent);\n        });\n      }\n      flowContent = flowContent || [\n        blockContent,\n        phrasingContent\n      ].join(' ');\n      add('html', 'manifest', 'head body');\n      add('head', '', 'base command link meta noscript script style title');\n      add('title hr noscript br');\n      add('base', 'href target');\n      add('link', 'href rel media hreflang type sizes hreflang');\n      add('meta', 'name http-equiv content charset');\n      add('style', 'media type scoped');\n      add('script', 'src async defer type charset');\n      add('body', 'onafterprint onbeforeprint onbeforeunload onblur onerror onfocus ' + 'onhashchange onload onmessage onoffline ononline onpagehide onpageshow ' + 'onpopstate onresize onscroll onstorage onunload', flowContent);\n      add('address dt dd div caption', '', flowContent);\n      add('h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn', '', phrasingContent);\n      add('blockquote', 'cite', flowContent);\n      add('ol', 'reversed start type', 'li');\n      add('ul', '', 'li');\n      add('li', 'value', flowContent);\n      add('dl', '', 'dt dd');\n      add('a', 'href target rel media hreflang type', phrasingContent);\n      add('q', 'cite', phrasingContent);\n      add('ins del', 'cite datetime', flowContent);\n      add('img', 'src sizes srcset alt usemap ismap width height');\n      add('iframe', 'src name width height', flowContent);\n      add('embed', 'src type width height');\n      add('object', 'data type typemustmatch name usemap form width height', [\n        flowContent,\n        'param'\n      ].join(' '));\n      add('param', 'name value');\n      add('map', 'name', [\n        flowContent,\n        'area'\n      ].join(' '));\n      add('area', 'alt coords shape href target rel media hreflang type');\n      add('table', 'border', 'caption colgroup thead tfoot tbody tr' + (type === 'html4' ? ' col' : ''));\n      add('colgroup', 'span', 'col');\n      add('col', 'span');\n      add('tbody thead tfoot', '', 'tr');\n      add('tr', '', 'td th');\n      add('td', 'colspan rowspan headers', flowContent);\n      add('th', 'colspan rowspan headers scope abbr', flowContent);\n      add('form', 'accept-charset action autocomplete enctype method name novalidate target', flowContent);\n      add('fieldset', 'disabled form name', [\n        flowContent,\n        'legend'\n      ].join(' '));\n      add('label', 'form for', phrasingContent);\n      add('input', 'accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate ' + 'formtarget height list max maxlength min multiple name pattern readonly required size src step type value width');\n      add('button', 'disabled form formaction formenctype formmethod formnovalidate formtarget name type value', type === 'html4' ? flowContent : phrasingContent);\n      add('select', 'disabled form multiple name required size', 'option optgroup');\n      add('optgroup', 'disabled label', 'option');\n      add('option', 'disabled label selected value');\n      add('textarea', 'cols dirname disabled form maxlength name readonly required rows wrap');\n      add('menu', 'type label', [\n        flowContent,\n        'li'\n      ].join(' '));\n      add('noscript', '', flowContent);\n      if (type !== 'html4') {\n        add('wbr');\n        add('ruby', '', [\n          phrasingContent,\n          'rt rp'\n        ].join(' '));\n        add('figcaption', '', flowContent);\n        add('mark rt rp summary bdi', '', phrasingContent);\n        add('canvas', 'width height', flowContent);\n        add('video', 'src crossorigin poster preload autoplay mediagroup loop ' + 'muted controls width height buffered', [\n          flowContent,\n          'track source'\n        ].join(' '));\n        add('audio', 'src crossorigin preload autoplay mediagroup loop muted controls ' + 'buffered volume', [\n          flowContent,\n          'track source'\n        ].join(' '));\n        add('picture', '', 'img source');\n        add('source', 'src srcset type media sizes');\n        add('track', 'kind src srclang label default');\n        add('datalist', '', [\n          phrasingContent,\n          'option'\n        ].join(' '));\n        add('article section nav aside main header footer', '', flowContent);\n        add('hgroup', '', 'h1 h2 h3 h4 h5 h6');\n        add('figure', '', [\n          flowContent,\n          'figcaption'\n        ].join(' '));\n        add('time', 'datetime', phrasingContent);\n        add('dialog', 'open', flowContent);\n        add('command', 'type label icon disabled checked radiogroup command');\n        add('output', 'for form name', phrasingContent);\n        add('progress', 'value max', phrasingContent);\n        add('meter', 'value min max low high optimum', phrasingContent);\n        add('details', 'open', [\n          flowContent,\n          'summary'\n        ].join(' '));\n        add('keygen', 'autofocus challenge disabled form keytype name');\n      }\n      if (type !== 'html5-strict') {\n        addAttrs('script', 'language xml:space');\n        addAttrs('style', 'xml:space');\n        addAttrs('object', 'declare classid code codebase codetype archive standby align border hspace vspace');\n        addAttrs('embed', 'align name hspace vspace');\n        addAttrs('param', 'valuetype type');\n        addAttrs('a', 'charset name rev shape coords');\n        addAttrs('br', 'clear');\n        addAttrs('applet', 'codebase archive code object alt name width height align hspace vspace');\n        addAttrs('img', 'name longdesc align border hspace vspace');\n        addAttrs('iframe', 'longdesc frameborder marginwidth marginheight scrolling align');\n        addAttrs('font basefont', 'size color face');\n        addAttrs('input', 'usemap align');\n        addAttrs('select');\n        addAttrs('textarea');\n        addAttrs('h1 h2 h3 h4 h5 h6 div p legend caption', 'align');\n        addAttrs('ul', 'type compact');\n        addAttrs('li', 'type');\n        addAttrs('ol dl menu dir', 'compact');\n        addAttrs('pre', 'width xml:space');\n        addAttrs('hr', 'align noshade size width');\n        addAttrs('isindex', 'prompt');\n        addAttrs('table', 'summary width frame rules cellspacing cellpadding align bgcolor');\n        addAttrs('col', 'width align char charoff valign');\n        addAttrs('colgroup', 'width align char charoff valign');\n        addAttrs('thead', 'align char charoff valign');\n        addAttrs('tr', 'align char charoff valign bgcolor');\n        addAttrs('th', 'axis align char charoff valign nowrap bgcolor width height');\n        addAttrs('form', 'accept');\n        addAttrs('td', 'abbr axis scope align char charoff valign nowrap bgcolor width height');\n        addAttrs('tfoot', 'align char charoff valign');\n        addAttrs('tbody', 'align char charoff valign');\n        addAttrs('area', 'nohref');\n        addAttrs('body', 'background bgcolor text link vlink alink');\n      }\n      if (type !== 'html4') {\n        addAttrs('input button select textarea', 'autofocus');\n        addAttrs('input textarea', 'placeholder');\n        addAttrs('a', 'download');\n        addAttrs('link script img', 'crossorigin');\n        addAttrs('img', 'loading');\n        addAttrs('iframe', 'sandbox seamless allowfullscreen loading');\n      }\n      each$h(split$1('a form meter progress dfn'), function (name) {\n        if (schema[name]) {\n          delete schema[name].children[name];\n        }\n      });\n      delete schema.caption.children.table;\n      delete schema.script;\n      mapCache[type] = schema;\n      return schema;\n    };\n    var compileElementMap = function (value, mode) {\n      var styles;\n      if (value) {\n        styles = {};\n        if (typeof value === 'string') {\n          value = { '*': value };\n        }\n        each$h(value, function (value, key) {\n          styles[key] = styles[key.toUpperCase()] = mode === 'map' ? makeMap$2(value, /[, ]/) : explode$3(value, /[, ]/);\n        });\n      }\n      return styles;\n    };\n    var Schema = function (settings) {\n      var elements = {};\n      var children = {};\n      var patternElements = [];\n      var customElementsMap = {}, specialElements = {};\n      var createLookupTable = function (option, defaultValue, extendWith) {\n        var value = settings[option];\n        if (!value) {\n          value = mapCache[option];\n          if (!value) {\n            value = makeMap$2(defaultValue, ' ', makeMap$2(defaultValue.toUpperCase(), ' '));\n            value = extend$5(value, extendWith);\n            mapCache[option] = value;\n          }\n        } else {\n          value = makeMap$2(value, /[, ]/, makeMap$2(value.toUpperCase(), /[, ]/));\n        }\n        return value;\n      };\n      settings = settings || {};\n      var schemaItems = compileSchema(settings.schema);\n      if (settings.verify_html === false) {\n        settings.valid_elements = '*[*]';\n      }\n      var validStyles = compileElementMap(settings.valid_styles);\n      var invalidStyles = compileElementMap(settings.invalid_styles, 'map');\n      var validClasses = compileElementMap(settings.valid_classes, 'map');\n      var whiteSpaceElementsMap = createLookupTable('whitespace_elements', 'pre script noscript style textarea video audio iframe object code');\n      var selfClosingElementsMap = createLookupTable('self_closing_elements', 'colgroup dd dt li option p td tfoot th thead tr');\n      var shortEndedElementsMap = createLookupTable('short_ended_elements', 'area base basefont br col frame hr img input isindex link ' + 'meta param embed source wbr track');\n      var boolAttrMap = createLookupTable('boolean_attributes', 'checked compact declare defer disabled ismap multiple nohref noresize ' + 'noshade nowrap readonly selected autoplay loop controls');\n      var nonEmptyOrMoveCaretBeforeOnEnter = 'td th iframe video audio object script code';\n      var nonEmptyElementsMap = createLookupTable('non_empty_elements', nonEmptyOrMoveCaretBeforeOnEnter + ' pre', shortEndedElementsMap);\n      var moveCaretBeforeOnEnterElementsMap = createLookupTable('move_caret_before_on_enter_elements', nonEmptyOrMoveCaretBeforeOnEnter + ' table', shortEndedElementsMap);\n      var textBlockElementsMap = createLookupTable('text_block_elements', 'h1 h2 h3 h4 h5 h6 p div address pre form ' + 'blockquote center dir fieldset header footer article section hgroup aside main nav figure');\n      var blockElementsMap = createLookupTable('block_elements', 'hr table tbody thead tfoot ' + 'th tr td li ol ul caption dl dt dd noscript menu isindex option ' + 'datalist select optgroup figcaption details summary', textBlockElementsMap);\n      var textInlineElementsMap = createLookupTable('text_inline_elements', 'span strong b em i font strike u var cite ' + 'dfn code mark q sup sub samp');\n      each$h((settings.special || 'script noscript iframe noframes noembed title style textarea xmp').split(' '), function (name) {\n        specialElements[name] = new RegExp('</' + name + '[^>]*>', 'gi');\n      });\n      var patternToRegExp = function (str) {\n        return new RegExp('^' + str.replace(/([?+*])/g, '.$1') + '$');\n      };\n      var addValidElements = function (validElements) {\n        var ei, el, ai, al, matches, element, attr, attrData, elementName, attrName, attrType, attributes, attributesOrder, prefix, outputName, globalAttributes, globalAttributesOrder, value;\n        var elementRuleRegExp = /^([#+\\-])?([^\\[!\\/]+)(?:\\/([^\\[!]+))?(?:(!?)\\[([^\\]]+)])?$/, attrRuleRegExp = /^([!\\-])?(\\w+[\\\\:]:\\w+|[^=:<]+)?(?:([=:<])(.*))?$/, hasPatternsRegExp = /[*?+]/;\n        if (validElements) {\n          var validElementsArr = split$1(validElements, ',');\n          if (elements['@']) {\n            globalAttributes = elements['@'].attributes;\n            globalAttributesOrder = elements['@'].attributesOrder;\n          }\n          for (ei = 0, el = validElementsArr.length; ei < el; ei++) {\n            matches = elementRuleRegExp.exec(validElementsArr[ei]);\n            if (matches) {\n              prefix = matches[1];\n              elementName = matches[2];\n              outputName = matches[3];\n              attrData = matches[5];\n              attributes = {};\n              attributesOrder = [];\n              element = {\n                attributes: attributes,\n                attributesOrder: attributesOrder\n              };\n              if (prefix === '#') {\n                element.paddEmpty = true;\n              }\n              if (prefix === '-') {\n                element.removeEmpty = true;\n              }\n              if (matches[4] === '!') {\n                element.removeEmptyAttrs = true;\n              }\n              if (globalAttributes) {\n                each$j(globalAttributes, function (value, key) {\n                  attributes[key] = value;\n                });\n                attributesOrder.push.apply(attributesOrder, globalAttributesOrder);\n              }\n              if (attrData) {\n                attrData = split$1(attrData, '|');\n                for (ai = 0, al = attrData.length; ai < al; ai++) {\n                  matches = attrRuleRegExp.exec(attrData[ai]);\n                  if (matches) {\n                    attr = {};\n                    attrType = matches[1];\n                    attrName = matches[2].replace(/[\\\\:]:/g, ':');\n                    prefix = matches[3];\n                    value = matches[4];\n                    if (attrType === '!') {\n                      element.attributesRequired = element.attributesRequired || [];\n                      element.attributesRequired.push(attrName);\n                      attr.required = true;\n                    }\n                    if (attrType === '-') {\n                      delete attributes[attrName];\n                      attributesOrder.splice(inArray$2(attributesOrder, attrName), 1);\n                      continue;\n                    }\n                    if (prefix) {\n                      if (prefix === '=') {\n                        element.attributesDefault = element.attributesDefault || [];\n                        element.attributesDefault.push({\n                          name: attrName,\n                          value: value\n                        });\n                        attr.defaultValue = value;\n                      }\n                      if (prefix === ':') {\n                        element.attributesForced = element.attributesForced || [];\n                        element.attributesForced.push({\n                          name: attrName,\n                          value: value\n                        });\n                        attr.forcedValue = value;\n                      }\n                      if (prefix === '<') {\n                        attr.validValues = makeMap$2(value, '?');\n                      }\n                    }\n                    if (hasPatternsRegExp.test(attrName)) {\n                      element.attributePatterns = element.attributePatterns || [];\n                      attr.pattern = patternToRegExp(attrName);\n                      element.attributePatterns.push(attr);\n                    } else {\n                      if (!attributes[attrName]) {\n                        attributesOrder.push(attrName);\n                      }\n                      attributes[attrName] = attr;\n                    }\n                  }\n                }\n              }\n              if (!globalAttributes && elementName === '@') {\n                globalAttributes = attributes;\n                globalAttributesOrder = attributesOrder;\n              }\n              if (outputName) {\n                element.outputName = elementName;\n                elements[outputName] = element;\n              }\n              if (hasPatternsRegExp.test(elementName)) {\n                element.pattern = patternToRegExp(elementName);\n                patternElements.push(element);\n              } else {\n                elements[elementName] = element;\n              }\n            }\n          }\n        }\n      };\n      var setValidElements = function (validElements) {\n        elements = {};\n        patternElements = [];\n        addValidElements(validElements);\n        each$h(schemaItems, function (element, name) {\n          children[name] = element.children;\n        });\n      };\n      var addCustomElements = function (customElements) {\n        var customElementRegExp = /^(~)?(.+)$/;\n        if (customElements) {\n          mapCache.text_block_elements = mapCache.block_elements = null;\n          each$h(split$1(customElements, ','), function (rule) {\n            var matches = customElementRegExp.exec(rule), inline = matches[1] === '~', cloneName = inline ? 'span' : 'div', name = matches[2];\n            children[name] = children[cloneName];\n            customElementsMap[name] = cloneName;\n            if (!inline) {\n              blockElementsMap[name.toUpperCase()] = {};\n              blockElementsMap[name] = {};\n            }\n            if (!elements[name]) {\n              var customRule = elements[cloneName];\n              customRule = extend$5({}, customRule);\n              delete customRule.removeEmptyAttrs;\n              delete customRule.removeEmpty;\n              elements[name] = customRule;\n            }\n            each$h(children, function (element, elmName) {\n              if (element[cloneName]) {\n                children[elmName] = element = extend$5({}, children[elmName]);\n                element[name] = element[cloneName];\n              }\n            });\n          });\n        }\n      };\n      var addValidChildren = function (validChildren) {\n        var childRuleRegExp = /^([+\\-]?)([A-Za-z0-9_\\-.\\u00b7\\u00c0-\\u00d6\\u00d8-\\u00f6\\u00f8-\\u037d\\u037f-\\u1fff\\u200c-\\u200d\\u203f-\\u2040\\u2070-\\u218f\\u2c00-\\u2fef\\u3001-\\ud7ff\\uf900-\\ufdcf\\ufdf0-\\ufffd]+)\\[([^\\]]+)]$/;\n        mapCache[settings.schema] = null;\n        if (validChildren) {\n          each$h(split$1(validChildren, ','), function (rule) {\n            var matches = childRuleRegExp.exec(rule);\n            var parent, prefix;\n            if (matches) {\n              prefix = matches[1];\n              if (prefix) {\n                parent = children[matches[2]];\n              } else {\n                parent = children[matches[2]] = { '#comment': {} };\n              }\n              parent = children[matches[2]];\n              each$h(split$1(matches[3], '|'), function (child) {\n                if (prefix === '-') {\n                  delete parent[child];\n                } else {\n                  parent[child] = {};\n                }\n              });\n            }\n          });\n        }\n      };\n      var getElementRule = function (name) {\n        var element = elements[name], i;\n        if (element) {\n          return element;\n        }\n        i = patternElements.length;\n        while (i--) {\n          element = patternElements[i];\n          if (element.pattern.test(name)) {\n            return element;\n          }\n        }\n      };\n      if (!settings.valid_elements) {\n        each$h(schemaItems, function (element, name) {\n          elements[name] = {\n            attributes: element.attributes,\n            attributesOrder: element.attributesOrder\n          };\n          children[name] = element.children;\n        });\n        if (settings.schema !== 'html5') {\n          each$h(split$1('strong/b em/i'), function (item) {\n            var items = split$1(item, '/');\n            elements[items[1]].outputName = items[0];\n          });\n        }\n        each$h(split$1('ol ul sub sup blockquote span font a table tbody strong em b i'), function (name) {\n          if (elements[name]) {\n            elements[name].removeEmpty = true;\n          }\n        });\n        each$h(split$1('p h1 h2 h3 h4 h5 h6 th td pre div address caption li'), function (name) {\n          elements[name].paddEmpty = true;\n        });\n        each$h(split$1('span'), function (name) {\n          elements[name].removeEmptyAttrs = true;\n        });\n      } else {\n        setValidElements(settings.valid_elements);\n      }\n      addCustomElements(settings.custom_elements);\n      addValidChildren(settings.valid_children);\n      addValidElements(settings.extended_valid_elements);\n      addValidChildren('+ol[ul|ol],+ul[ul|ol]');\n      each$h({\n        dd: 'dl',\n        dt: 'dl',\n        li: 'ul ol',\n        td: 'tr',\n        th: 'tr',\n        tr: 'tbody thead tfoot',\n        tbody: 'table',\n        thead: 'table',\n        tfoot: 'table',\n        legend: 'fieldset',\n        area: 'map',\n        param: 'video audio object'\n      }, function (parents, item) {\n        if (elements[item]) {\n          elements[item].parentsRequired = split$1(parents);\n        }\n      });\n      if (settings.invalid_elements) {\n        each$h(explode$3(settings.invalid_elements), function (item) {\n          if (elements[item]) {\n            delete elements[item];\n          }\n        });\n      }\n      if (!getElementRule('span')) {\n        addValidElements('span[!data-mce-type|*]');\n      }\n      var getValidStyles = constant(validStyles);\n      var getInvalidStyles = constant(invalidStyles);\n      var getValidClasses = constant(validClasses);\n      var getBoolAttrs = constant(boolAttrMap);\n      var getBlockElements = constant(blockElementsMap);\n      var getTextBlockElements = constant(textBlockElementsMap);\n      var getTextInlineElements = constant(textInlineElementsMap);\n      var getShortEndedElements = constant(shortEndedElementsMap);\n      var getSelfClosingElements = constant(selfClosingElementsMap);\n      var getNonEmptyElements = constant(nonEmptyElementsMap);\n      var getMoveCaretBeforeOnEnterElements = constant(moveCaretBeforeOnEnterElementsMap);\n      var getWhiteSpaceElements = constant(whiteSpaceElementsMap);\n      var getSpecialElements = constant(specialElements);\n      var isValidChild = function (name, child) {\n        var parent = children[name.toLowerCase()];\n        return !!(parent && parent[child.toLowerCase()]);\n      };\n      var isValid = function (name, attr) {\n        var attrPatterns, i;\n        var rule = getElementRule(name);\n        if (rule) {\n          if (attr) {\n            if (rule.attributes[attr]) {\n              return true;\n            }\n            attrPatterns = rule.attributePatterns;\n            if (attrPatterns) {\n              i = attrPatterns.length;\n              while (i--) {\n                if (attrPatterns[i].pattern.test(name)) {\n                  return true;\n                }\n              }\n            }\n          } else {\n            return true;\n          }\n        }\n        return false;\n      };\n      var getCustomElements = constant(customElementsMap);\n      return {\n        children: children,\n        elements: elements,\n        getValidStyles: getValidStyles,\n        getValidClasses: getValidClasses,\n        getBlockElements: getBlockElements,\n        getInvalidStyles: getInvalidStyles,\n        getShortEndedElements: getShortEndedElements,\n        getTextBlockElements: getTextBlockElements,\n        getTextInlineElements: getTextInlineElements,\n        getBoolAttrs: getBoolAttrs,\n        getElementRule: getElementRule,\n        getSelfClosingElements: getSelfClosingElements,\n        getNonEmptyElements: getNonEmptyElements,\n        getMoveCaretBeforeOnEnterElements: getMoveCaretBeforeOnEnterElements,\n        getWhiteSpaceElements: getWhiteSpaceElements,\n        getSpecialElements: getSpecialElements,\n        isValidChild: isValidChild,\n        isValid: isValid,\n        getCustomElements: getCustomElements,\n        addValidElements: addValidElements,\n        setValidElements: setValidElements,\n        addCustomElements: addCustomElements,\n        addValidChildren: addValidChildren\n      };\n    };\n\n    var toHex = function (match, r, g, b) {\n      var hex = function (val) {\n        val = parseInt(val, 10).toString(16);\n        return val.length > 1 ? val : '0' + val;\n      };\n      return '#' + hex(r) + hex(g) + hex(b);\n    };\n    var Styles = function (settings, schema) {\n      var _this = this;\n      var rgbRegExp = /rgb\\s*\\(\\s*([0-9]+)\\s*,\\s*([0-9]+)\\s*,\\s*([0-9]+)\\s*\\)/gi;\n      var urlOrStrRegExp = /(?:url(?:(?:\\(\\s*\\\"([^\\\"]+)\\\"\\s*\\))|(?:\\(\\s*\\'([^\\']+)\\'\\s*\\))|(?:\\(\\s*([^)\\s]+)\\s*\\))))|(?:\\'([^\\']+)\\')|(?:\\\"([^\\\"]+)\\\")/gi;\n      var styleRegExp = /\\s*([^:]+):\\s*([^;]+);?/g;\n      var trimRightRegExp = /\\s+$/;\n      var i;\n      var encodingLookup = {};\n      var validStyles;\n      var invalidStyles;\n      var invisibleChar = zeroWidth;\n      settings = settings || {};\n      if (schema) {\n        validStyles = schema.getValidStyles();\n        invalidStyles = schema.getInvalidStyles();\n      }\n      var encodingItems = ('\\\\\" \\\\\\' \\\\; \\\\: ; : ' + invisibleChar).split(' ');\n      for (i = 0; i < encodingItems.length; i++) {\n        encodingLookup[encodingItems[i]] = invisibleChar + i;\n        encodingLookup[invisibleChar + i] = encodingItems[i];\n      }\n      return {\n        toHex: function (color) {\n          return color.replace(rgbRegExp, toHex);\n        },\n        parse: function (css) {\n          var styles = {};\n          var matches, name, value, isEncoded;\n          var urlConverter = settings.url_converter;\n          var urlConverterScope = settings.url_converter_scope || _this;\n          var compress = function (prefix, suffix, noJoin) {\n            var top = styles[prefix + '-top' + suffix];\n            if (!top) {\n              return;\n            }\n            var right = styles[prefix + '-right' + suffix];\n            if (!right) {\n              return;\n            }\n            var bottom = styles[prefix + '-bottom' + suffix];\n            if (!bottom) {\n              return;\n            }\n            var left = styles[prefix + '-left' + suffix];\n            if (!left) {\n              return;\n            }\n            var box = [\n              top,\n              right,\n              bottom,\n              left\n            ];\n            i = box.length - 1;\n            while (i--) {\n              if (box[i] !== box[i + 1]) {\n                break;\n              }\n            }\n            if (i > -1 && noJoin) {\n              return;\n            }\n            styles[prefix + suffix] = i === -1 ? box[0] : box.join(' ');\n            delete styles[prefix + '-top' + suffix];\n            delete styles[prefix + '-right' + suffix];\n            delete styles[prefix + '-bottom' + suffix];\n            delete styles[prefix + '-left' + suffix];\n          };\n          var canCompress = function (key) {\n            var value = styles[key], i;\n            if (!value) {\n              return;\n            }\n            value = value.split(' ');\n            i = value.length;\n            while (i--) {\n              if (value[i] !== value[0]) {\n                return false;\n              }\n            }\n            styles[key] = value[0];\n            return true;\n          };\n          var compress2 = function (target, a, b, c) {\n            if (!canCompress(a)) {\n              return;\n            }\n            if (!canCompress(b)) {\n              return;\n            }\n            if (!canCompress(c)) {\n              return;\n            }\n            styles[target] = styles[a] + ' ' + styles[b] + ' ' + styles[c];\n            delete styles[a];\n            delete styles[b];\n            delete styles[c];\n          };\n          var encode = function (str) {\n            isEncoded = true;\n            return encodingLookup[str];\n          };\n          var decode = function (str, keepSlashes) {\n            if (isEncoded) {\n              str = str.replace(/\\uFEFF[0-9]/g, function (str) {\n                return encodingLookup[str];\n              });\n            }\n            if (!keepSlashes) {\n              str = str.replace(/\\\\([\\'\\\";:])/g, '$1');\n            }\n            return str;\n          };\n          var decodeSingleHexSequence = function (escSeq) {\n            return String.fromCharCode(parseInt(escSeq.slice(1), 16));\n          };\n          var decodeHexSequences = function (value) {\n            return value.replace(/\\\\[0-9a-f]+/gi, decodeSingleHexSequence);\n          };\n          var processUrl = function (match, url, url2, url3, str, str2) {\n            str = str || str2;\n            if (str) {\n              str = decode(str);\n              return '\\'' + str.replace(/\\'/g, '\\\\\\'') + '\\'';\n            }\n            url = decode(url || url2 || url3);\n            if (!settings.allow_script_urls) {\n              var scriptUrl = url.replace(/[\\s\\r\\n]+/g, '');\n              if (/(java|vb)script:/i.test(scriptUrl)) {\n                return '';\n              }\n              if (!settings.allow_svg_data_urls && /^data:image\\/svg/i.test(scriptUrl)) {\n                return '';\n              }\n            }\n            if (urlConverter) {\n              url = urlConverter.call(urlConverterScope, url, 'style');\n            }\n            return 'url(\\'' + url.replace(/\\'/g, '\\\\\\'') + '\\')';\n          };\n          if (css) {\n            css = css.replace(/[\\u0000-\\u001F]/g, '');\n            css = css.replace(/\\\\[\\\"\\';:\\uFEFF]/g, encode).replace(/\\\"[^\\\"]+\\\"|\\'[^\\']+\\'/g, function (str) {\n              return str.replace(/[;:]/g, encode);\n            });\n            while (matches = styleRegExp.exec(css)) {\n              styleRegExp.lastIndex = matches.index + matches[0].length;\n              name = matches[1].replace(trimRightRegExp, '').toLowerCase();\n              value = matches[2].replace(trimRightRegExp, '');\n              if (name && value) {\n                name = decodeHexSequences(name);\n                value = decodeHexSequences(value);\n                if (name.indexOf(invisibleChar) !== -1 || name.indexOf('\"') !== -1) {\n                  continue;\n                }\n                if (!settings.allow_script_urls && (name === 'behavior' || /expression\\s*\\(|\\/\\*|\\*\\//.test(value))) {\n                  continue;\n                }\n                if (name === 'font-weight' && value === '700') {\n                  value = 'bold';\n                } else if (name === 'color' || name === 'background-color') {\n                  value = value.toLowerCase();\n                }\n                value = value.replace(rgbRegExp, toHex);\n                value = value.replace(urlOrStrRegExp, processUrl);\n                styles[name] = isEncoded ? decode(value, true) : value;\n              }\n            }\n            compress('border', '', true);\n            compress('border', '-width');\n            compress('border', '-color');\n            compress('border', '-style');\n            compress('padding', '');\n            compress('margin', '');\n            compress2('border', 'border-width', 'border-style', 'border-color');\n            if (styles.border === 'medium none') {\n              delete styles.border;\n            }\n            if (styles['border-image'] === 'none') {\n              delete styles['border-image'];\n            }\n          }\n          return styles;\n        },\n        serialize: function (styles, elementName) {\n          var css = '';\n          var serializeStyles = function (name) {\n            var value;\n            var styleList = validStyles[name];\n            if (styleList) {\n              for (var i_1 = 0, l = styleList.length; i_1 < l; i_1++) {\n                name = styleList[i_1];\n                value = styles[name];\n                if (value) {\n                  css += (css.length > 0 ? ' ' : '') + name + ': ' + value + ';';\n                }\n              }\n            }\n          };\n          var isValid = function (name, elementName) {\n            var styleMap = invalidStyles['*'];\n            if (styleMap && styleMap[name]) {\n              return false;\n            }\n            styleMap = invalidStyles[elementName];\n            return !(styleMap && styleMap[name]);\n          };\n          if (elementName && validStyles) {\n            serializeStyles('*');\n            serializeStyles(elementName);\n          } else {\n            each$j(styles, function (value, name) {\n              if (value && (!invalidStyles || isValid(name, elementName))) {\n                css += (css.length > 0 ? ' ' : '') + name + ': ' + value + ';';\n              }\n            });\n          }\n          return css;\n        }\n      };\n    };\n\n    var deprecated = {\n      keyLocation: true,\n      layerX: true,\n      layerY: true,\n      returnValue: true,\n      webkitMovementX: true,\n      webkitMovementY: true,\n      keyIdentifier: true,\n      mozPressure: true\n    };\n    var isNativeEvent = function (event) {\n      return event instanceof Event || isFunction(event.initEvent);\n    };\n    var hasIsDefaultPrevented = function (event) {\n      return event.isDefaultPrevented === always || event.isDefaultPrevented === never;\n    };\n    var needsNormalizing = function (event) {\n      return isNullable(event.preventDefault) || isNativeEvent(event);\n    };\n    var clone$2 = function (originalEvent, data) {\n      var event = data !== null && data !== void 0 ? data : {};\n      for (var name_1 in originalEvent) {\n        if (!has$2(deprecated, name_1)) {\n          event[name_1] = originalEvent[name_1];\n        }\n      }\n      if (isNonNullable(event.composedPath)) {\n        event.composedPath = function () {\n          return originalEvent.composedPath();\n        };\n      }\n      return event;\n    };\n    var normalize$3 = function (type, originalEvent, fallbackTarget, data) {\n      var _a;\n      var event = clone$2(originalEvent, data);\n      event.type = type;\n      if (isNullable(event.target)) {\n        event.target = (_a = event.srcElement) !== null && _a !== void 0 ? _a : fallbackTarget;\n      }\n      if (needsNormalizing(originalEvent)) {\n        event.preventDefault = function () {\n          event.defaultPrevented = true;\n          event.isDefaultPrevented = always;\n          if (isFunction(originalEvent.preventDefault)) {\n            originalEvent.preventDefault();\n          } else if (isNativeEvent(originalEvent)) {\n            originalEvent.returnValue = false;\n          }\n        };\n        event.stopPropagation = function () {\n          event.cancelBubble = true;\n          event.isPropagationStopped = always;\n          if (isFunction(originalEvent.stopPropagation)) {\n            originalEvent.stopPropagation();\n          } else if (isNativeEvent(originalEvent)) {\n            originalEvent.cancelBubble = true;\n          }\n        };\n        event.stopImmediatePropagation = function () {\n          event.isImmediatePropagationStopped = always;\n          event.stopPropagation();\n        };\n        if (!hasIsDefaultPrevented(event)) {\n          event.isDefaultPrevented = event.defaultPrevented === true ? always : never;\n          event.isPropagationStopped = event.cancelBubble === true ? always : never;\n          event.isImmediatePropagationStopped = never;\n        }\n      }\n      return event;\n    };\n\n    var eventExpandoPrefix = 'mce-data-';\n    var mouseEventRe = /^(?:mouse|contextmenu)|click/;\n    var addEvent = function (target, name, callback, capture) {\n      if (target.addEventListener) {\n        target.addEventListener(name, callback, capture || false);\n      } else if (target.attachEvent) {\n        target.attachEvent('on' + name, callback);\n      }\n    };\n    var removeEvent = function (target, name, callback, capture) {\n      if (target.removeEventListener) {\n        target.removeEventListener(name, callback, capture || false);\n      } else if (target.detachEvent) {\n        target.detachEvent('on' + name, callback);\n      }\n    };\n    var isMouseEvent = function (event) {\n      return isNonNullable(event) && mouseEventRe.test(event.type);\n    };\n    var fix = function (originalEvent, data) {\n      var event = normalize$3(originalEvent.type, originalEvent, document, data);\n      if (isMouseEvent(originalEvent) && isUndefined(originalEvent.pageX) && !isUndefined(originalEvent.clientX)) {\n        var eventDoc = event.target.ownerDocument || document;\n        var doc = eventDoc.documentElement;\n        var body = eventDoc.body;\n        var mouseEvent = event;\n        mouseEvent.pageX = originalEvent.clientX + (doc && doc.scrollLeft || body && body.scrollLeft || 0) - (doc && doc.clientLeft || body && body.clientLeft || 0);\n        mouseEvent.pageY = originalEvent.clientY + (doc && doc.scrollTop || body && body.scrollTop || 0) - (doc && doc.clientTop || body && body.clientTop || 0);\n      }\n      if (isUndefined(event.metaKey)) {\n        event.metaKey = false;\n      }\n      return event;\n    };\n    var bindOnReady = function (win, callback, eventUtils) {\n      var doc = win.document, event = { type: 'ready' };\n      if (eventUtils.domLoaded) {\n        callback(event);\n        return;\n      }\n      var isDocReady = function () {\n        return doc.readyState === 'complete' || doc.readyState === 'interactive' && doc.body;\n      };\n      var readyHandler = function () {\n        removeEvent(win, 'DOMContentLoaded', readyHandler);\n        removeEvent(win, 'load', readyHandler);\n        if (!eventUtils.domLoaded) {\n          eventUtils.domLoaded = true;\n          callback(event);\n        }\n        win = null;\n      };\n      if (isDocReady()) {\n        readyHandler();\n      } else {\n        addEvent(win, 'DOMContentLoaded', readyHandler);\n      }\n      if (!eventUtils.domLoaded) {\n        addEvent(win, 'load', readyHandler);\n      }\n    };\n    var EventUtils = function () {\n      function EventUtils() {\n        this.domLoaded = false;\n        this.events = {};\n        this.count = 1;\n        this.expando = eventExpandoPrefix + (+new Date()).toString(32);\n        this.hasMouseEnterLeave = 'onmouseenter' in document.documentElement;\n        this.hasFocusIn = 'onfocusin' in document.documentElement;\n        this.count = 1;\n      }\n      EventUtils.prototype.bind = function (target, names, callback, scope) {\n        var self = this;\n        var id, callbackList, i, name, fakeName, nativeHandler, capture;\n        var win = window;\n        var defaultNativeHandler = function (evt) {\n          self.executeHandlers(fix(evt || win.event), id);\n        };\n        if (!target || target.nodeType === 3 || target.nodeType === 8) {\n          return;\n        }\n        if (!target[self.expando]) {\n          id = self.count++;\n          target[self.expando] = id;\n          self.events[id] = {};\n        } else {\n          id = target[self.expando];\n        }\n        scope = scope || target;\n        var namesList = names.split(' ');\n        i = namesList.length;\n        while (i--) {\n          name = namesList[i];\n          nativeHandler = defaultNativeHandler;\n          fakeName = capture = false;\n          if (name === 'DOMContentLoaded') {\n            name = 'ready';\n          }\n          if (self.domLoaded && name === 'ready' && target.readyState === 'complete') {\n            callback.call(scope, fix({ type: name }));\n            continue;\n          }\n          if (!self.hasMouseEnterLeave) {\n            fakeName = self.mouseEnterLeave[name];\n            if (fakeName) {\n              nativeHandler = function (evt) {\n                var current = evt.currentTarget;\n                var related = evt.relatedTarget;\n                if (related && current.contains) {\n                  related = current.contains(related);\n                } else {\n                  while (related && related !== current) {\n                    related = related.parentNode;\n                  }\n                }\n                if (!related) {\n                  evt = fix(evt || win.event);\n                  evt.type = evt.type === 'mouseout' ? 'mouseleave' : 'mouseenter';\n                  evt.target = current;\n                  self.executeHandlers(evt, id);\n                }\n              };\n            }\n          }\n          if (!self.hasFocusIn && (name === 'focusin' || name === 'focusout')) {\n            capture = true;\n            fakeName = name === 'focusin' ? 'focus' : 'blur';\n            nativeHandler = function (evt) {\n              evt = fix(evt || win.event);\n              evt.type = evt.type === 'focus' ? 'focusin' : 'focusout';\n              self.executeHandlers(evt, id);\n            };\n          }\n          callbackList = self.events[id][name];\n          if (!callbackList) {\n            self.events[id][name] = callbackList = [{\n                func: callback,\n                scope: scope\n              }];\n            callbackList.fakeName = fakeName;\n            callbackList.capture = capture;\n            callbackList.nativeHandler = nativeHandler;\n            if (name === 'ready') {\n              bindOnReady(target, nativeHandler, self);\n            } else {\n              addEvent(target, fakeName || name, nativeHandler, capture);\n            }\n          } else {\n            if (name === 'ready' && self.domLoaded) {\n              callback(fix({ type: name }));\n            } else {\n              callbackList.push({\n                func: callback,\n                scope: scope\n              });\n            }\n          }\n        }\n        target = callbackList = null;\n        return callback;\n      };\n      EventUtils.prototype.unbind = function (target, names, callback) {\n        var callbackList, i, ci, name, eventMap;\n        if (!target || target.nodeType === 3 || target.nodeType === 8) {\n          return this;\n        }\n        var id = target[this.expando];\n        if (id) {\n          eventMap = this.events[id];\n          if (names) {\n            var namesList = names.split(' ');\n            i = namesList.length;\n            while (i--) {\n              name = namesList[i];\n              callbackList = eventMap[name];\n              if (callbackList) {\n                if (callback) {\n                  ci = callbackList.length;\n                  while (ci--) {\n                    if (callbackList[ci].func === callback) {\n                      var nativeHandler = callbackList.nativeHandler;\n                      var fakeName = callbackList.fakeName, capture = callbackList.capture;\n                      callbackList = callbackList.slice(0, ci).concat(callbackList.slice(ci + 1));\n                      callbackList.nativeHandler = nativeHandler;\n                      callbackList.fakeName = fakeName;\n                      callbackList.capture = capture;\n                      eventMap[name] = callbackList;\n                    }\n                  }\n                }\n                if (!callback || callbackList.length === 0) {\n                  delete eventMap[name];\n                  removeEvent(target, callbackList.fakeName || name, callbackList.nativeHandler, callbackList.capture);\n                }\n              }\n            }\n          } else {\n            each$j(eventMap, function (callbackList, name) {\n              removeEvent(target, callbackList.fakeName || name, callbackList.nativeHandler, callbackList.capture);\n            });\n            eventMap = {};\n          }\n          for (name in eventMap) {\n            if (has$2(eventMap, name)) {\n              return this;\n            }\n          }\n          delete this.events[id];\n          try {\n            delete target[this.expando];\n          } catch (ex) {\n            target[this.expando] = null;\n          }\n        }\n        return this;\n      };\n      EventUtils.prototype.fire = function (target, name, args) {\n        var id;\n        if (!target || target.nodeType === 3 || target.nodeType === 8) {\n          return this;\n        }\n        var event = fix({\n          type: name,\n          target: target\n        }, args);\n        do {\n          id = target[this.expando];\n          if (id) {\n            this.executeHandlers(event, id);\n          }\n          target = target.parentNode || target.ownerDocument || target.defaultView || target.parentWindow;\n        } while (target && !event.isPropagationStopped());\n        return this;\n      };\n      EventUtils.prototype.clean = function (target) {\n        var i, children;\n        if (!target || target.nodeType === 3 || target.nodeType === 8) {\n          return this;\n        }\n        if (target[this.expando]) {\n          this.unbind(target);\n        }\n        if (!target.getElementsByTagName) {\n          target = target.document;\n        }\n        if (target && target.getElementsByTagName) {\n          this.unbind(target);\n          children = target.getElementsByTagName('*');\n          i = children.length;\n          while (i--) {\n            target = children[i];\n            if (target[this.expando]) {\n              this.unbind(target);\n            }\n          }\n        }\n        return this;\n      };\n      EventUtils.prototype.destroy = function () {\n        this.events = {};\n      };\n      EventUtils.prototype.cancel = function (e) {\n        if (e) {\n          e.preventDefault();\n          e.stopImmediatePropagation();\n        }\n        return false;\n      };\n      EventUtils.prototype.executeHandlers = function (evt, id) {\n        var container = this.events[id];\n        var callbackList = container && container[evt.type];\n        if (callbackList) {\n          for (var i = 0, l = callbackList.length; i < l; i++) {\n            var callback = callbackList[i];\n            if (callback && callback.func.call(callback.scope, evt) === false) {\n              evt.preventDefault();\n            }\n            if (evt.isImmediatePropagationStopped()) {\n              return;\n            }\n          }\n        }\n      };\n      EventUtils.Event = new EventUtils();\n      return EventUtils;\n    }();\n\n    var support, Expr, getText, isXML, tokenize, compile, select$1, outermostContext, sortInput, hasDuplicate, setDocument, document$1, docElem, documentIsHTML, rbuggyQSA, rbuggyMatches, matches, contains, expando = 'sizzle' + -new Date(), preferredDoc = window.document, dirruns = 0, done = 0, classCache = createCache(), tokenCache = createCache(), compilerCache = createCache(), sortOrder = function (a, b) {\n        if (a === b) {\n          hasDuplicate = true;\n        }\n        return 0;\n      }, strundefined = typeof undefined, MAX_NEGATIVE = 1 << 31, hasOwn = {}.hasOwnProperty, arr = [], pop = arr.pop, push_native = arr.push, push$1 = arr.push, slice$1 = arr.slice, indexOf = arr.indexOf || function (elem) {\n        var i = 0, len = this.length;\n        for (; i < len; i++) {\n          if (this[i] === elem) {\n            return i;\n          }\n        }\n        return -1;\n      }, booleans = 'checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped', whitespace = '[\\\\x20\\\\t\\\\r\\\\n\\\\f]', identifier = '(?:\\\\\\\\.|[\\\\w-]|[^\\\\x00-\\\\xa0])+', attributes = '\\\\[' + whitespace + '*(' + identifier + ')(?:' + whitespace + '*([*^$|!~]?=)' + whitespace + '*(?:\\'((?:\\\\\\\\.|[^\\\\\\\\\\'])*)\\'|\"((?:\\\\\\\\.|[^\\\\\\\\\"])*)\"|(' + identifier + '))|)' + whitespace + '*\\\\]', pseudos = ':(' + identifier + ')(?:\\\\((' + '(\\'((?:\\\\\\\\.|[^\\\\\\\\\\'])*)\\'|\"((?:\\\\\\\\.|[^\\\\\\\\\"])*)\")|' + '((?:\\\\\\\\.|[^\\\\\\\\()[\\\\]]|' + attributes + ')*)|' + '.*' + ')\\\\)|)', rtrim = new RegExp('^' + whitespace + '+|((?:^|[^\\\\\\\\])(?:\\\\\\\\.)*)' + whitespace + '+$', 'g'), rcomma = new RegExp('^' + whitespace + '*,' + whitespace + '*'), rcombinators = new RegExp('^' + whitespace + '*([>+~]|' + whitespace + ')' + whitespace + '*'), rattributeQuotes = new RegExp('=' + whitespace + '*([^\\\\]\\'\"]*?)' + whitespace + '*\\\\]', 'g'), rpseudo = new RegExp(pseudos), ridentifier = new RegExp('^' + identifier + '$'), matchExpr = {\n        ID: new RegExp('^#(' + identifier + ')'),\n        CLASS: new RegExp('^\\\\.(' + identifier + ')'),\n        TAG: new RegExp('^(' + identifier + '|[*])'),\n        ATTR: new RegExp('^' + attributes),\n        PSEUDO: new RegExp('^' + pseudos),\n        CHILD: new RegExp('^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\\\(' + whitespace + '*(even|odd|(([+-]|)(\\\\d*)n|)' + whitespace + '*(?:([+-]|)' + whitespace + '*(\\\\d+)|))' + whitespace + '*\\\\)|)', 'i'),\n        bool: new RegExp('^(?:' + booleans + ')$', 'i'),\n        needsContext: new RegExp('^' + whitespace + '*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\\\(' + whitespace + '*((?:-\\\\d)?\\\\d*)' + whitespace + '*\\\\)|)(?=[^-]|$)', 'i')\n      }, rinputs = /^(?:input|select|textarea|button)$/i, rheader = /^h\\d$/i, rnative = /^[^{]+\\{\\s*\\[native \\w/, rquickExpr$1 = /^(?:#([\\w-]+)|(\\w+)|\\.([\\w-]+))$/, rsibling = /[+~]/, rescape = /'|\\\\/g, runescape = new RegExp('\\\\\\\\([\\\\da-f]{1,6}' + whitespace + '?|(' + whitespace + ')|.)', 'ig'), funescape = function (_, escaped, escapedWhitespace) {\n        var high = '0x' + escaped - 65536;\n        return high !== high || escapedWhitespace ? escaped : high < 0 ? String.fromCharCode(high + 65536) : String.fromCharCode(high >> 10 | 55296, high & 1023 | 56320);\n      };\n    try {\n      push$1.apply(arr = slice$1.call(preferredDoc.childNodes), preferredDoc.childNodes);\n      arr[preferredDoc.childNodes.length].nodeType;\n    } catch (e) {\n      push$1 = {\n        apply: arr.length ? function (target, els) {\n          push_native.apply(target, slice$1.call(els));\n        } : function (target, els) {\n          var j = target.length, i = 0;\n          while (target[j++] = els[i++]) {\n          }\n          target.length = j - 1;\n        }\n      };\n    }\n    var Sizzle = function (selector, context, results, seed) {\n      var match, elem, m, nodeType, i, groups, old, nid, newContext, newSelector;\n      if ((context ? context.ownerDocument || context : preferredDoc) !== document$1) {\n        setDocument(context);\n      }\n      context = context || document$1;\n      results = results || [];\n      if (!selector || typeof selector !== 'string') {\n        return results;\n      }\n      if ((nodeType = context.nodeType) !== 1 && nodeType !== 9) {\n        return [];\n      }\n      if (documentIsHTML && !seed) {\n        if (match = rquickExpr$1.exec(selector)) {\n          if (m = match[1]) {\n            if (nodeType === 9) {\n              elem = context.getElementById(m);\n              if (elem && elem.parentNode) {\n                if (elem.id === m) {\n                  results.push(elem);\n                  return results;\n                }\n              } else {\n                return results;\n              }\n            } else {\n              if (context.ownerDocument && (elem = context.ownerDocument.getElementById(m)) && contains(context, elem) && elem.id === m) {\n                results.push(elem);\n                return results;\n              }\n            }\n          } else if (match[2]) {\n            push$1.apply(results, context.getElementsByTagName(selector));\n            return results;\n          } else if ((m = match[3]) && support.getElementsByClassName) {\n            push$1.apply(results, context.getElementsByClassName(m));\n            return results;\n          }\n        }\n        if (support.qsa && (!rbuggyQSA || !rbuggyQSA.test(selector))) {\n          nid = old = expando;\n          newContext = context;\n          newSelector = nodeType === 9 && selector;\n          if (nodeType === 1 && context.nodeName.toLowerCase() !== 'object') {\n            groups = tokenize(selector);\n            if (old = context.getAttribute('id')) {\n              nid = old.replace(rescape, '\\\\$&');\n            } else {\n              context.setAttribute('id', nid);\n            }\n            nid = '[id=\\'' + nid + '\\'] ';\n            i = groups.length;\n            while (i--) {\n              groups[i] = nid + toSelector(groups[i]);\n            }\n            newContext = rsibling.test(selector) && testContext(context.parentNode) || context;\n            newSelector = groups.join(',');\n          }\n          if (newSelector) {\n            try {\n              push$1.apply(results, newContext.querySelectorAll(newSelector));\n              return results;\n            } catch (qsaError) {\n            } finally {\n              if (!old) {\n                context.removeAttribute('id');\n              }\n            }\n          }\n        }\n      }\n      return select$1(selector.replace(rtrim, '$1'), context, results, seed);\n    };\n    function createCache() {\n      var keys = [];\n      function cache(key, value) {\n        if (keys.push(key + ' ') > Expr.cacheLength) {\n          delete cache[keys.shift()];\n        }\n        return cache[key + ' '] = value;\n      }\n      return cache;\n    }\n    function markFunction(fn) {\n      fn[expando] = true;\n      return fn;\n    }\n    function siblingCheck(a, b) {\n      var cur = b && a, diff = cur && a.nodeType === 1 && b.nodeType === 1 && (~b.sourceIndex || MAX_NEGATIVE) - (~a.sourceIndex || MAX_NEGATIVE);\n      if (diff) {\n        return diff;\n      }\n      if (cur) {\n        while (cur = cur.nextSibling) {\n          if (cur === b) {\n            return -1;\n          }\n        }\n      }\n      return a ? 1 : -1;\n    }\n    function createInputPseudo(type) {\n      return function (elem) {\n        var name = elem.nodeName.toLowerCase();\n        return name === 'input' && elem.type === type;\n      };\n    }\n    function createButtonPseudo(type) {\n      return function (elem) {\n        var name = elem.nodeName.toLowerCase();\n        return (name === 'input' || name === 'button') && elem.type === type;\n      };\n    }\n    function createPositionalPseudo(fn) {\n      return markFunction(function (argument) {\n        argument = +argument;\n        return markFunction(function (seed, matches) {\n          var j, matchIndexes = fn([], seed.length, argument), i = matchIndexes.length;\n          while (i--) {\n            if (seed[j = matchIndexes[i]]) {\n              seed[j] = !(matches[j] = seed[j]);\n            }\n          }\n        });\n      });\n    }\n    function testContext(context) {\n      return context && typeof context.getElementsByTagName !== strundefined && context;\n    }\n    support = Sizzle.support = {};\n    isXML = Sizzle.isXML = function (elem) {\n      var documentElement = elem && (elem.ownerDocument || elem).documentElement;\n      return documentElement ? documentElement.nodeName !== 'HTML' : false;\n    };\n    setDocument = Sizzle.setDocument = function (node) {\n      var hasCompare, doc = node ? node.ownerDocument || node : preferredDoc, parent = doc.defaultView;\n      function getTop(win) {\n        try {\n          return win.top;\n        } catch (ex) {\n        }\n        return null;\n      }\n      if (doc === document$1 || doc.nodeType !== 9 || !doc.documentElement) {\n        return document$1;\n      }\n      document$1 = doc;\n      docElem = doc.documentElement;\n      documentIsHTML = !isXML(doc);\n      if (parent && parent !== getTop(parent)) {\n        if (parent.addEventListener) {\n          parent.addEventListener('unload', function () {\n            setDocument();\n          }, false);\n        } else if (parent.attachEvent) {\n          parent.attachEvent('onunload', function () {\n            setDocument();\n          });\n        }\n      }\n      support.attributes = true;\n      support.getElementsByTagName = true;\n      support.getElementsByClassName = rnative.test(doc.getElementsByClassName);\n      support.getById = true;\n      Expr.find.ID = function (id, context) {\n        if (typeof context.getElementById !== strundefined && documentIsHTML) {\n          var m = context.getElementById(id);\n          return m && m.parentNode ? [m] : [];\n        }\n      };\n      Expr.filter.ID = function (id) {\n        var attrId = id.replace(runescape, funescape);\n        return function (elem) {\n          return elem.getAttribute('id') === attrId;\n        };\n      };\n      Expr.find.TAG = support.getElementsByTagName ? function (tag, context) {\n        if (typeof context.getElementsByTagName !== strundefined) {\n          return context.getElementsByTagName(tag);\n        }\n      } : function (tag, context) {\n        var elem, tmp = [], i = 0, results = context.getElementsByTagName(tag);\n        if (tag === '*') {\n          while (elem = results[i++]) {\n            if (elem.nodeType === 1) {\n              tmp.push(elem);\n            }\n          }\n          return tmp;\n        }\n        return results;\n      };\n      Expr.find.CLASS = support.getElementsByClassName && function (className, context) {\n        if (documentIsHTML) {\n          return context.getElementsByClassName(className);\n        }\n      };\n      rbuggyMatches = [];\n      rbuggyQSA = [];\n      support.disconnectedMatch = true;\n      rbuggyQSA = rbuggyQSA.length && new RegExp(rbuggyQSA.join('|'));\n      rbuggyMatches = rbuggyMatches.length && new RegExp(rbuggyMatches.join('|'));\n      hasCompare = rnative.test(docElem.compareDocumentPosition);\n      contains = hasCompare || rnative.test(docElem.contains) ? function (a, b) {\n        var adown = a.nodeType === 9 ? a.documentElement : a, bup = b && b.parentNode;\n        return a === bup || !!(bup && bup.nodeType === 1 && (adown.contains ? adown.contains(bup) : a.compareDocumentPosition && a.compareDocumentPosition(bup) & 16));\n      } : function (a, b) {\n        if (b) {\n          while (b = b.parentNode) {\n            if (b === a) {\n              return true;\n            }\n          }\n        }\n        return false;\n      };\n      sortOrder = hasCompare ? function (a, b) {\n        if (a === b) {\n          hasDuplicate = true;\n          return 0;\n        }\n        var compare = !a.compareDocumentPosition - !b.compareDocumentPosition;\n        if (compare) {\n          return compare;\n        }\n        compare = (a.ownerDocument || a) === (b.ownerDocument || b) ? a.compareDocumentPosition(b) : 1;\n        if (compare & 1 || !support.sortDetached && b.compareDocumentPosition(a) === compare) {\n          if (a === doc || a.ownerDocument === preferredDoc && contains(preferredDoc, a)) {\n            return -1;\n          }\n          if (b === doc || b.ownerDocument === preferredDoc && contains(preferredDoc, b)) {\n            return 1;\n          }\n          return sortInput ? indexOf.call(sortInput, a) - indexOf.call(sortInput, b) : 0;\n        }\n        return compare & 4 ? -1 : 1;\n      } : function (a, b) {\n        if (a === b) {\n          hasDuplicate = true;\n          return 0;\n        }\n        var cur, i = 0, aup = a.parentNode, bup = b.parentNode, ap = [a], bp = [b];\n        if (!aup || !bup) {\n          return a === doc ? -1 : b === doc ? 1 : aup ? -1 : bup ? 1 : sortInput ? indexOf.call(sortInput, a) - indexOf.call(sortInput, b) : 0;\n        } else if (aup === bup) {\n          return siblingCheck(a, b);\n        }\n        cur = a;\n        while (cur = cur.parentNode) {\n          ap.unshift(cur);\n        }\n        cur = b;\n        while (cur = cur.parentNode) {\n          bp.unshift(cur);\n        }\n        while (ap[i] === bp[i]) {\n          i++;\n        }\n        return i ? siblingCheck(ap[i], bp[i]) : ap[i] === preferredDoc ? -1 : bp[i] === preferredDoc ? 1 : 0;\n      };\n      return doc;\n    };\n    Sizzle.matches = function (expr, elements) {\n      return Sizzle(expr, null, null, elements);\n    };\n    Sizzle.matchesSelector = function (elem, expr) {\n      if ((elem.ownerDocument || elem) !== document$1) {\n        setDocument(elem);\n      }\n      expr = expr.replace(rattributeQuotes, '=\\'$1\\']');\n      if (support.matchesSelector && documentIsHTML && (!rbuggyMatches || !rbuggyMatches.test(expr)) && (!rbuggyQSA || !rbuggyQSA.test(expr))) {\n        try {\n          var ret = matches.call(elem, expr);\n          if (ret || support.disconnectedMatch || elem.document && elem.document.nodeType !== 11) {\n            return ret;\n          }\n        } catch (e) {\n        }\n      }\n      return Sizzle(expr, document$1, null, [elem]).length > 0;\n    };\n    Sizzle.contains = function (context, elem) {\n      if ((context.ownerDocument || context) !== document$1) {\n        setDocument(context);\n      }\n      return contains(context, elem);\n    };\n    Sizzle.attr = function (elem, name) {\n      if ((elem.ownerDocument || elem) !== document$1) {\n        setDocument(elem);\n      }\n      var fn = Expr.attrHandle[name.toLowerCase()], val = fn && hasOwn.call(Expr.attrHandle, name.toLowerCase()) ? fn(elem, name, !documentIsHTML) : undefined;\n      return val !== undefined ? val : support.attributes || !documentIsHTML ? elem.getAttribute(name) : (val = elem.getAttributeNode(name)) && val.specified ? val.value : null;\n    };\n    Sizzle.error = function (msg) {\n      throw new Error('Syntax error, unrecognized expression: ' + msg);\n    };\n    Sizzle.uniqueSort = function (results) {\n      var elem, duplicates = [], j = 0, i = 0;\n      hasDuplicate = !support.detectDuplicates;\n      sortInput = !support.sortStable && results.slice(0);\n      results.sort(sortOrder);\n      if (hasDuplicate) {\n        while (elem = results[i++]) {\n          if (elem === results[i]) {\n            j = duplicates.push(i);\n          }\n        }\n        while (j--) {\n          results.splice(duplicates[j], 1);\n        }\n      }\n      sortInput = null;\n      return results;\n    };\n    getText = Sizzle.getText = function (elem) {\n      var node, ret = '', i = 0, nodeType = elem.nodeType;\n      if (!nodeType) {\n        while (node = elem[i++]) {\n          ret += getText(node);\n        }\n      } else if (nodeType === 1 || nodeType === 9 || nodeType === 11) {\n        if (typeof elem.textContent === 'string') {\n          return elem.textContent;\n        } else {\n          for (elem = elem.firstChild; elem; elem = elem.nextSibling) {\n            ret += getText(elem);\n          }\n        }\n      } else if (nodeType === 3 || nodeType === 4) {\n        return elem.nodeValue;\n      }\n      return ret;\n    };\n    Expr = Sizzle.selectors = {\n      cacheLength: 50,\n      createPseudo: markFunction,\n      match: matchExpr,\n      attrHandle: {},\n      find: {},\n      relative: {\n        '>': {\n          dir: 'parentNode',\n          first: true\n        },\n        ' ': { dir: 'parentNode' },\n        '+': {\n          dir: 'previousSibling',\n          first: true\n        },\n        '~': { dir: 'previousSibling' }\n      },\n      preFilter: {\n        ATTR: function (match) {\n          match[1] = match[1].replace(runescape, funescape);\n          match[3] = (match[3] || match[4] || match[5] || '').replace(runescape, funescape);\n          if (match[2] === '~=') {\n            match[3] = ' ' + match[3] + ' ';\n          }\n          return match.slice(0, 4);\n        },\n        CHILD: function (match) {\n          match[1] = match[1].toLowerCase();\n          if (match[1].slice(0, 3) === 'nth') {\n            if (!match[3]) {\n              Sizzle.error(match[0]);\n            }\n            match[4] = +(match[4] ? match[5] + (match[6] || 1) : 2 * (match[3] === 'even' || match[3] === 'odd'));\n            match[5] = +(match[7] + match[8] || match[3] === 'odd');\n          } else if (match[3]) {\n            Sizzle.error(match[0]);\n          }\n          return match;\n        },\n        PSEUDO: function (match) {\n          var excess, unquoted = !match[6] && match[2];\n          if (matchExpr.CHILD.test(match[0])) {\n            return null;\n          }\n          if (match[3]) {\n            match[2] = match[4] || match[5] || '';\n          } else if (unquoted && rpseudo.test(unquoted) && (excess = tokenize(unquoted, true)) && (excess = unquoted.indexOf(')', unquoted.length - excess) - unquoted.length)) {\n            match[0] = match[0].slice(0, excess);\n            match[2] = unquoted.slice(0, excess);\n          }\n          return match.slice(0, 3);\n        }\n      },\n      filter: {\n        TAG: function (nodeNameSelector) {\n          var nodeName = nodeNameSelector.replace(runescape, funescape).toLowerCase();\n          return nodeNameSelector === '*' ? function () {\n            return true;\n          } : function (elem) {\n            return elem.nodeName && elem.nodeName.toLowerCase() === nodeName;\n          };\n        },\n        CLASS: function (className) {\n          var pattern = classCache[className + ' '];\n          return pattern || (pattern = new RegExp('(^|' + whitespace + ')' + className + '(' + whitespace + '|$)')) && classCache(className, function (elem) {\n            return pattern.test(typeof elem.className === 'string' && elem.className || typeof elem.getAttribute !== strundefined && elem.getAttribute('class') || '');\n          });\n        },\n        ATTR: function (name, operator, check) {\n          return function (elem) {\n            var result = Sizzle.attr(elem, name);\n            if (result == null) {\n              return operator === '!=';\n            }\n            if (!operator) {\n              return true;\n            }\n            result += '';\n            return operator === '=' ? result === check : operator === '!=' ? result !== check : operator === '^=' ? check && result.indexOf(check) === 0 : operator === '*=' ? check && result.indexOf(check) > -1 : operator === '$=' ? check && result.slice(-check.length) === check : operator === '~=' ? (' ' + result + ' ').indexOf(check) > -1 : operator === '|=' ? result === check || result.slice(0, check.length + 1) === check + '-' : false;\n          };\n        },\n        CHILD: function (type, what, argument, first, last) {\n          var simple = type.slice(0, 3) !== 'nth', forward = type.slice(-4) !== 'last', ofType = what === 'of-type';\n          return first === 1 && last === 0 ? function (elem) {\n            return !!elem.parentNode;\n          } : function (elem, context, xml) {\n            var cache, outerCache, node, diff, nodeIndex, start, dir = simple !== forward ? 'nextSibling' : 'previousSibling', parent = elem.parentNode, name = ofType && elem.nodeName.toLowerCase(), useCache = !xml && !ofType;\n            if (parent) {\n              if (simple) {\n                while (dir) {\n                  node = elem;\n                  while (node = node[dir]) {\n                    if (ofType ? node.nodeName.toLowerCase() === name : node.nodeType === 1) {\n                      return false;\n                    }\n                  }\n                  start = dir = type === 'only' && !start && 'nextSibling';\n                }\n                return true;\n              }\n              start = [forward ? parent.firstChild : parent.lastChild];\n              if (forward && useCache) {\n                outerCache = parent[expando] || (parent[expando] = {});\n                cache = outerCache[type] || [];\n                nodeIndex = cache[0] === dirruns && cache[1];\n                diff = cache[0] === dirruns && cache[2];\n                node = nodeIndex && parent.childNodes[nodeIndex];\n                while (node = ++nodeIndex && node && node[dir] || (diff = nodeIndex = 0) || start.pop()) {\n                  if (node.nodeType === 1 && ++diff && node === elem) {\n                    outerCache[type] = [\n                      dirruns,\n                      nodeIndex,\n                      diff\n                    ];\n                    break;\n                  }\n                }\n              } else if (useCache && (cache = (elem[expando] || (elem[expando] = {}))[type]) && cache[0] === dirruns) {\n                diff = cache[1];\n              } else {\n                while (node = ++nodeIndex && node && node[dir] || (diff = nodeIndex = 0) || start.pop()) {\n                  if ((ofType ? node.nodeName.toLowerCase() === name : node.nodeType === 1) && ++diff) {\n                    if (useCache) {\n                      (node[expando] || (node[expando] = {}))[type] = [\n                        dirruns,\n                        diff\n                      ];\n                    }\n                    if (node === elem) {\n                      break;\n                    }\n                  }\n                }\n              }\n              diff -= last;\n              return diff === first || diff % first === 0 && diff / first >= 0;\n            }\n          };\n        },\n        PSEUDO: function (pseudo, argument) {\n          var args, fn = Expr.pseudos[pseudo] || Expr.setFilters[pseudo.toLowerCase()] || Sizzle.error('unsupported pseudo: ' + pseudo);\n          if (fn[expando]) {\n            return fn(argument);\n          }\n          if (fn.length > 1) {\n            args = [\n              pseudo,\n              pseudo,\n              '',\n              argument\n            ];\n            return Expr.setFilters.hasOwnProperty(pseudo.toLowerCase()) ? markFunction(function (seed, matches) {\n              var idx, matched = fn(seed, argument), i = matched.length;\n              while (i--) {\n                idx = indexOf.call(seed, matched[i]);\n                seed[idx] = !(matches[idx] = matched[i]);\n              }\n            }) : function (elem) {\n              return fn(elem, 0, args);\n            };\n          }\n          return fn;\n        }\n      },\n      pseudos: {\n        not: markFunction(function (selector) {\n          var input = [], results = [], matcher = compile(selector.replace(rtrim, '$1'));\n          return matcher[expando] ? markFunction(function (seed, matches, context, xml) {\n            var elem, unmatched = matcher(seed, null, xml, []), i = seed.length;\n            while (i--) {\n              if (elem = unmatched[i]) {\n                seed[i] = !(matches[i] = elem);\n              }\n            }\n          }) : function (elem, context, xml) {\n            input[0] = elem;\n            matcher(input, null, xml, results);\n            input[0] = null;\n            return !results.pop();\n          };\n        }),\n        has: markFunction(function (selector) {\n          return function (elem) {\n            return Sizzle(selector, elem).length > 0;\n          };\n        }),\n        contains: markFunction(function (text) {\n          text = text.replace(runescape, funescape);\n          return function (elem) {\n            return (elem.textContent || elem.innerText || getText(elem)).indexOf(text) > -1;\n          };\n        }),\n        lang: markFunction(function (lang) {\n          if (!ridentifier.test(lang || '')) {\n            Sizzle.error('unsupported lang: ' + lang);\n          }\n          lang = lang.replace(runescape, funescape).toLowerCase();\n          return function (elem) {\n            var elemLang;\n            do {\n              if (elemLang = documentIsHTML ? elem.lang : elem.getAttribute('xml:lang') || elem.getAttribute('lang')) {\n                elemLang = elemLang.toLowerCase();\n                return elemLang === lang || elemLang.indexOf(lang + '-') === 0;\n              }\n            } while ((elem = elem.parentNode) && elem.nodeType === 1);\n            return false;\n          };\n        }),\n        target: function (elem) {\n          var hash = window.location && window.location.hash;\n          return hash && hash.slice(1) === elem.id;\n        },\n        root: function (elem) {\n          return elem === docElem;\n        },\n        focus: function (elem) {\n          return elem === document$1.activeElement && (!document$1.hasFocus || document$1.hasFocus()) && !!(elem.type || elem.href || ~elem.tabIndex);\n        },\n        enabled: function (elem) {\n          return elem.disabled === false;\n        },\n        disabled: function (elem) {\n          return elem.disabled === true;\n        },\n        checked: function (elem) {\n          var nodeName = elem.nodeName.toLowerCase();\n          return nodeName === 'input' && !!elem.checked || nodeName === 'option' && !!elem.selected;\n        },\n        selected: function (elem) {\n          if (elem.parentNode) {\n            elem.parentNode.selectedIndex;\n          }\n          return elem.selected === true;\n        },\n        empty: function (elem) {\n          for (elem = elem.firstChild; elem; elem = elem.nextSibling) {\n            if (elem.nodeType < 6) {\n              return false;\n            }\n          }\n          return true;\n        },\n        parent: function (elem) {\n          return !Expr.pseudos.empty(elem);\n        },\n        header: function (elem) {\n          return rheader.test(elem.nodeName);\n        },\n        input: function (elem) {\n          return rinputs.test(elem.nodeName);\n        },\n        button: function (elem) {\n          var name = elem.nodeName.toLowerCase();\n          return name === 'input' && elem.type === 'button' || name === 'button';\n        },\n        text: function (elem) {\n          var attr;\n          return elem.nodeName.toLowerCase() === 'input' && elem.type === 'text' && ((attr = elem.getAttribute('type')) == null || attr.toLowerCase() === 'text');\n        },\n        first: createPositionalPseudo(function () {\n          return [0];\n        }),\n        last: createPositionalPseudo(function (matchIndexes, length) {\n          return [length - 1];\n        }),\n        eq: createPositionalPseudo(function (matchIndexes, length, argument) {\n          return [argument < 0 ? argument + length : argument];\n        }),\n        even: createPositionalPseudo(function (matchIndexes, length) {\n          var i = 0;\n          for (; i < length; i += 2) {\n            matchIndexes.push(i);\n          }\n          return matchIndexes;\n        }),\n        odd: createPositionalPseudo(function (matchIndexes, length) {\n          var i = 1;\n          for (; i < length; i += 2) {\n            matchIndexes.push(i);\n          }\n          return matchIndexes;\n        }),\n        lt: createPositionalPseudo(function (matchIndexes, length, argument) {\n          var i = argument < 0 ? argument + length : argument;\n          for (; --i >= 0;) {\n            matchIndexes.push(i);\n          }\n          return matchIndexes;\n        }),\n        gt: createPositionalPseudo(function (matchIndexes, length, argument) {\n          var i = argument < 0 ? argument + length : argument;\n          for (; ++i < length;) {\n            matchIndexes.push(i);\n          }\n          return matchIndexes;\n        })\n      }\n    };\n    Expr.pseudos.nth = Expr.pseudos.eq;\n    each$k([\n      'radio',\n      'checkbox',\n      'file',\n      'password',\n      'image'\n    ], function (i) {\n      Expr.pseudos[i] = createInputPseudo(i);\n    });\n    each$k([\n      'submit',\n      'reset'\n    ], function (i) {\n      Expr.pseudos[i] = createButtonPseudo(i);\n    });\n    function setFilters() {\n    }\n    setFilters.prototype = Expr.filters = Expr.pseudos;\n    Expr.setFilters = new setFilters();\n    tokenize = Sizzle.tokenize = function (selector, parseOnly) {\n      var matched, match, tokens, type, soFar, groups, preFilters, cached = tokenCache[selector + ' '];\n      if (cached) {\n        return parseOnly ? 0 : cached.slice(0);\n      }\n      soFar = selector;\n      groups = [];\n      preFilters = Expr.preFilter;\n      while (soFar) {\n        if (!matched || (match = rcomma.exec(soFar))) {\n          if (match) {\n            soFar = soFar.slice(match[0].length) || soFar;\n          }\n          groups.push(tokens = []);\n        }\n        matched = false;\n        if (match = rcombinators.exec(soFar)) {\n          matched = match.shift();\n          tokens.push({\n            value: matched,\n            type: match[0].replace(rtrim, ' ')\n          });\n          soFar = soFar.slice(matched.length);\n        }\n        for (type in Expr.filter) {\n          if (!Expr.filter.hasOwnProperty(type)) {\n            continue;\n          }\n          if ((match = matchExpr[type].exec(soFar)) && (!preFilters[type] || (match = preFilters[type](match)))) {\n            matched = match.shift();\n            tokens.push({\n              value: matched,\n              type: type,\n              matches: match\n            });\n            soFar = soFar.slice(matched.length);\n          }\n        }\n        if (!matched) {\n          break;\n        }\n      }\n      return parseOnly ? soFar.length : soFar ? Sizzle.error(selector) : tokenCache(selector, groups).slice(0);\n    };\n    function toSelector(tokens) {\n      var i = 0, len = tokens.length, selector = '';\n      for (; i < len; i++) {\n        selector += tokens[i].value;\n      }\n      return selector;\n    }\n    function addCombinator(matcher, combinator, base) {\n      var dir = combinator.dir, checkNonElements = base && dir === 'parentNode', doneName = done++;\n      return combinator.first ? function (elem, context, xml) {\n        while (elem = elem[dir]) {\n          if (elem.nodeType === 1 || checkNonElements) {\n            return matcher(elem, context, xml);\n          }\n        }\n      } : function (elem, context, xml) {\n        var oldCache, outerCache, newCache = [\n            dirruns,\n            doneName\n          ];\n        if (xml) {\n          while (elem = elem[dir]) {\n            if (elem.nodeType === 1 || checkNonElements) {\n              if (matcher(elem, context, xml)) {\n                return true;\n              }\n            }\n          }\n        } else {\n          while (elem = elem[dir]) {\n            if (elem.nodeType === 1 || checkNonElements) {\n              outerCache = elem[expando] || (elem[expando] = {});\n              if ((oldCache = outerCache[dir]) && oldCache[0] === dirruns && oldCache[1] === doneName) {\n                return newCache[2] = oldCache[2];\n              } else {\n                outerCache[dir] = newCache;\n                if (newCache[2] = matcher(elem, context, xml)) {\n                  return true;\n                }\n              }\n            }\n          }\n        }\n      };\n    }\n    function elementMatcher(matchers) {\n      return matchers.length > 1 ? function (elem, context, xml) {\n        var i = matchers.length;\n        while (i--) {\n          if (!matchers[i](elem, context, xml)) {\n            return false;\n          }\n        }\n        return true;\n      } : matchers[0];\n    }\n    function multipleContexts(selector, contexts, results) {\n      var i = 0, len = contexts.length;\n      for (; i < len; i++) {\n        Sizzle(selector, contexts[i], results);\n      }\n      return results;\n    }\n    function condense(unmatched, map, filter, context, xml) {\n      var elem, newUnmatched = [], i = 0, len = unmatched.length, mapped = map != null;\n      for (; i < len; i++) {\n        if (elem = unmatched[i]) {\n          if (!filter || filter(elem, context, xml)) {\n            newUnmatched.push(elem);\n            if (mapped) {\n              map.push(i);\n            }\n          }\n        }\n      }\n      return newUnmatched;\n    }\n    function setMatcher(preFilter, selector, matcher, postFilter, postFinder, postSelector) {\n      if (postFilter && !postFilter[expando]) {\n        postFilter = setMatcher(postFilter);\n      }\n      if (postFinder && !postFinder[expando]) {\n        postFinder = setMatcher(postFinder, postSelector);\n      }\n      return markFunction(function (seed, results, context, xml) {\n        var temp, i, elem, preMap = [], postMap = [], preexisting = results.length, elems = seed || multipleContexts(selector || '*', context.nodeType ? [context] : context, []), matcherIn = preFilter && (seed || !selector) ? condense(elems, preMap, preFilter, context, xml) : elems, matcherOut = matcher ? postFinder || (seed ? preFilter : preexisting || postFilter) ? [] : results : matcherIn;\n        if (matcher) {\n          matcher(matcherIn, matcherOut, context, xml);\n        }\n        if (postFilter) {\n          temp = condense(matcherOut, postMap);\n          postFilter(temp, [], context, xml);\n          i = temp.length;\n          while (i--) {\n            if (elem = temp[i]) {\n              matcherOut[postMap[i]] = !(matcherIn[postMap[i]] = elem);\n            }\n          }\n        }\n        if (seed) {\n          if (postFinder || preFilter) {\n            if (postFinder) {\n              temp = [];\n              i = matcherOut.length;\n              while (i--) {\n                if (elem = matcherOut[i]) {\n                  temp.push(matcherIn[i] = elem);\n                }\n              }\n              postFinder(null, matcherOut = [], temp, xml);\n            }\n            i = matcherOut.length;\n            while (i--) {\n              if ((elem = matcherOut[i]) && (temp = postFinder ? indexOf.call(seed, elem) : preMap[i]) > -1) {\n                seed[temp] = !(results[temp] = elem);\n              }\n            }\n          }\n        } else {\n          matcherOut = condense(matcherOut === results ? matcherOut.splice(preexisting, matcherOut.length) : matcherOut);\n          if (postFinder) {\n            postFinder(null, results, matcherOut, xml);\n          } else {\n            push$1.apply(results, matcherOut);\n          }\n        }\n      });\n    }\n    function matcherFromTokens(tokens) {\n      var checkContext, matcher, j, len = tokens.length, leadingRelative = Expr.relative[tokens[0].type], implicitRelative = leadingRelative || Expr.relative[' '], i = leadingRelative ? 1 : 0, matchContext = addCombinator(function (elem) {\n          return elem === checkContext;\n        }, implicitRelative, true), matchAnyContext = addCombinator(function (elem) {\n          return indexOf.call(checkContext, elem) > -1;\n        }, implicitRelative, true), matchers = [function (elem, context, xml) {\n            var ret = !leadingRelative && (xml || context !== outermostContext) || ((checkContext = context).nodeType ? matchContext(elem, context, xml) : matchAnyContext(elem, context, xml));\n            checkContext = null;\n            return ret;\n          }];\n      for (; i < len; i++) {\n        if (matcher = Expr.relative[tokens[i].type]) {\n          matchers = [addCombinator(elementMatcher(matchers), matcher)];\n        } else {\n          matcher = Expr.filter[tokens[i].type].apply(null, tokens[i].matches);\n          if (matcher[expando]) {\n            j = ++i;\n            for (; j < len; j++) {\n              if (Expr.relative[tokens[j].type]) {\n                break;\n              }\n            }\n            return setMatcher(i > 1 && elementMatcher(matchers), i > 1 && toSelector(tokens.slice(0, i - 1).concat({ value: tokens[i - 2].type === ' ' ? '*' : '' })).replace(rtrim, '$1'), matcher, i < j && matcherFromTokens(tokens.slice(i, j)), j < len && matcherFromTokens(tokens = tokens.slice(j)), j < len && toSelector(tokens));\n          }\n          matchers.push(matcher);\n        }\n      }\n      return elementMatcher(matchers);\n    }\n    function matcherFromGroupMatchers(elementMatchers, setMatchers) {\n      var bySet = setMatchers.length > 0, byElement = elementMatchers.length > 0, superMatcher = function (seed, context, xml, results, outermost) {\n          var elem, j, matcher, matchedCount = 0, i = '0', unmatched = seed && [], setMatched = [], contextBackup = outermostContext, elems = seed || byElement && Expr.find.TAG('*', outermost), dirrunsUnique = dirruns += contextBackup == null ? 1 : Math.random() || 0.1, len = elems.length;\n          if (outermost) {\n            outermostContext = context !== document$1 && context;\n          }\n          for (; i !== len && (elem = elems[i]) != null; i++) {\n            if (byElement && elem) {\n              j = 0;\n              while (matcher = elementMatchers[j++]) {\n                if (matcher(elem, context, xml)) {\n                  results.push(elem);\n                  break;\n                }\n              }\n              if (outermost) {\n                dirruns = dirrunsUnique;\n              }\n            }\n            if (bySet) {\n              if (elem = !matcher && elem) {\n                matchedCount--;\n              }\n              if (seed) {\n                unmatched.push(elem);\n              }\n            }\n          }\n          matchedCount += i;\n          if (bySet && i !== matchedCount) {\n            j = 0;\n            while (matcher = setMatchers[j++]) {\n              matcher(unmatched, setMatched, context, xml);\n            }\n            if (seed) {\n              if (matchedCount > 0) {\n                while (i--) {\n                  if (!(unmatched[i] || setMatched[i])) {\n                    setMatched[i] = pop.call(results);\n                  }\n                }\n              }\n              setMatched = condense(setMatched);\n            }\n            push$1.apply(results, setMatched);\n            if (outermost && !seed && setMatched.length > 0 && matchedCount + setMatchers.length > 1) {\n              Sizzle.uniqueSort(results);\n            }\n          }\n          if (outermost) {\n            dirruns = dirrunsUnique;\n            outermostContext = contextBackup;\n          }\n          return unmatched;\n        };\n      return bySet ? markFunction(superMatcher) : superMatcher;\n    }\n    compile = Sizzle.compile = function (selector, match) {\n      var i, setMatchers = [], elementMatchers = [], cached = compilerCache[selector + ' '];\n      if (!cached) {\n        if (!match) {\n          match = tokenize(selector);\n        }\n        i = match.length;\n        while (i--) {\n          cached = matcherFromTokens(match[i]);\n          if (cached[expando]) {\n            setMatchers.push(cached);\n          } else {\n            elementMatchers.push(cached);\n          }\n        }\n        cached = compilerCache(selector, matcherFromGroupMatchers(elementMatchers, setMatchers));\n        cached.selector = selector;\n      }\n      return cached;\n    };\n    select$1 = Sizzle.select = function (selector, context, results, seed) {\n      var i, tokens, token, type, find, compiled = typeof selector === 'function' && selector, match = !seed && tokenize(selector = compiled.selector || selector);\n      results = results || [];\n      if (match.length === 1) {\n        tokens = match[0] = match[0].slice(0);\n        if (tokens.length > 2 && (token = tokens[0]).type === 'ID' && support.getById && context.nodeType === 9 && documentIsHTML && Expr.relative[tokens[1].type]) {\n          context = (Expr.find.ID(token.matches[0].replace(runescape, funescape), context) || [])[0];\n          if (!context) {\n            return results;\n          } else if (compiled) {\n            context = context.parentNode;\n          }\n          selector = selector.slice(tokens.shift().value.length);\n        }\n        i = matchExpr.needsContext.test(selector) ? 0 : tokens.length;\n        while (i--) {\n          token = tokens[i];\n          if (Expr.relative[type = token.type]) {\n            break;\n          }\n          if (find = Expr.find[type]) {\n            if (seed = find(token.matches[0].replace(runescape, funescape), rsibling.test(tokens[0].type) && testContext(context.parentNode) || context)) {\n              tokens.splice(i, 1);\n              selector = seed.length && toSelector(tokens);\n              if (!selector) {\n                push$1.apply(results, seed);\n                return results;\n              }\n              break;\n            }\n          }\n        }\n      }\n      (compiled || compile(selector, match))(seed, context, !documentIsHTML, results, rsibling.test(selector) && testContext(context.parentNode) || context);\n      return results;\n    };\n    support.sortStable = expando.split('').sort(sortOrder).join('') === expando;\n    support.detectDuplicates = !!hasDuplicate;\n    setDocument();\n    support.sortDetached = true;\n\n    var doc = document;\n    var push = Array.prototype.push;\n    var slice = Array.prototype.slice;\n    var rquickExpr = /^(?:[^#<]*(<[\\w\\W]+>)[^>]*$|#([\\w\\-]*)$)/;\n    var Event$1 = EventUtils.Event;\n    var skipUniques = Tools.makeMap('children,contents,next,prev');\n    var isDefined = function (obj) {\n      return typeof obj !== 'undefined';\n    };\n    var isString = function (obj) {\n      return typeof obj === 'string';\n    };\n    var isWindow = function (obj) {\n      return obj && obj === obj.window;\n    };\n    var createFragment$1 = function (html, fragDoc) {\n      fragDoc = fragDoc || doc;\n      var container = fragDoc.createElement('div');\n      var frag = fragDoc.createDocumentFragment();\n      container.innerHTML = html;\n      var node;\n      while (node = container.firstChild) {\n        frag.appendChild(node);\n      }\n      return frag;\n    };\n    var domManipulate = function (targetNodes, sourceItem, callback, reverse) {\n      var i;\n      if (isString(sourceItem)) {\n        sourceItem = createFragment$1(sourceItem, getElementDocument(targetNodes[0]));\n      } else if (sourceItem.length && !sourceItem.nodeType) {\n        sourceItem = DomQuery.makeArray(sourceItem);\n        if (reverse) {\n          for (i = sourceItem.length - 1; i >= 0; i--) {\n            domManipulate(targetNodes, sourceItem[i], callback, reverse);\n          }\n        } else {\n          for (i = 0; i < sourceItem.length; i++) {\n            domManipulate(targetNodes, sourceItem[i], callback, reverse);\n          }\n        }\n        return targetNodes;\n      }\n      if (sourceItem.nodeType) {\n        i = targetNodes.length;\n        while (i--) {\n          callback.call(targetNodes[i], sourceItem);\n        }\n      }\n      return targetNodes;\n    };\n    var hasClass = function (node, className) {\n      return node && className && (' ' + node.className + ' ').indexOf(' ' + className + ' ') !== -1;\n    };\n    var wrap$2 = function (elements, wrapper, all) {\n      var lastParent, newWrapper;\n      wrapper = DomQuery(wrapper)[0];\n      elements.each(function () {\n        var self = this;\n        if (!all || lastParent !== self.parentNode) {\n          lastParent = self.parentNode;\n          newWrapper = wrapper.cloneNode(false);\n          self.parentNode.insertBefore(newWrapper, self);\n          newWrapper.appendChild(self);\n        } else {\n          newWrapper.appendChild(self);\n        }\n      });\n      return elements;\n    };\n    var numericCssMap = Tools.makeMap('fillOpacity fontWeight lineHeight opacity orphans widows zIndex zoom', ' ');\n    var booleanMap = Tools.makeMap('checked compact declare defer disabled ismap multiple nohref noshade nowrap readonly selected', ' ');\n    var propFix = {\n      for: 'htmlFor',\n      class: 'className',\n      readonly: 'readOnly'\n    };\n    var cssFix = { float: 'cssFloat' };\n    var attrHooks = {}, cssHooks = {};\n    var DomQueryConstructor = function (selector, context) {\n      return new DomQuery.fn.init(selector, context);\n    };\n    var inArray$1 = function (item, array) {\n      var i;\n      if (array.indexOf) {\n        return array.indexOf(item);\n      }\n      i = array.length;\n      while (i--) {\n        if (array[i] === item) {\n          return i;\n        }\n      }\n      return -1;\n    };\n    var whiteSpaceRegExp = /^\\s*|\\s*$/g;\n    var trim$1 = function (str) {\n      return str === null || str === undefined ? '' : ('' + str).replace(whiteSpaceRegExp, '');\n    };\n    var each$g = function (obj, callback) {\n      var length, key, i, value;\n      if (obj) {\n        length = obj.length;\n        if (length === undefined) {\n          for (key in obj) {\n            if (obj.hasOwnProperty(key)) {\n              value = obj[key];\n              if (callback.call(value, key, value) === false) {\n                break;\n              }\n            }\n          }\n        } else {\n          for (i = 0; i < length; i++) {\n            value = obj[i];\n            if (callback.call(value, i, value) === false) {\n              break;\n            }\n          }\n        }\n      }\n      return obj;\n    };\n    var grep$2 = function (array, callback) {\n      var out = [];\n      each$g(array, function (i, item) {\n        if (callback(item, i)) {\n          out.push(item);\n        }\n      });\n      return out;\n    };\n    var getElementDocument = function (element) {\n      if (!element) {\n        return doc;\n      }\n      if (element.nodeType === 9) {\n        return element;\n      }\n      return element.ownerDocument;\n    };\n    DomQueryConstructor.fn = DomQueryConstructor.prototype = {\n      constructor: DomQueryConstructor,\n      selector: '',\n      context: null,\n      length: 0,\n      init: function (selector, context) {\n        var self = this;\n        var match, node;\n        if (!selector) {\n          return self;\n        }\n        if (selector.nodeType) {\n          self.context = self[0] = selector;\n          self.length = 1;\n          return self;\n        }\n        if (context && context.nodeType) {\n          self.context = context;\n        } else {\n          if (context) {\n            return DomQuery(selector).attr(context);\n          }\n          self.context = context = document;\n        }\n        if (isString(selector)) {\n          self.selector = selector;\n          if (selector.charAt(0) === '<' && selector.charAt(selector.length - 1) === '>' && selector.length >= 3) {\n            match = [\n              null,\n              selector,\n              null\n            ];\n          } else {\n            match = rquickExpr.exec(selector);\n          }\n          if (match) {\n            if (match[1]) {\n              node = createFragment$1(selector, getElementDocument(context)).firstChild;\n              while (node) {\n                push.call(self, node);\n                node = node.nextSibling;\n              }\n            } else {\n              node = getElementDocument(context).getElementById(match[2]);\n              if (!node) {\n                return self;\n              }\n              if (node.id !== match[2]) {\n                return self.find(selector);\n              }\n              self.length = 1;\n              self[0] = node;\n            }\n          } else {\n            return DomQuery(context).find(selector);\n          }\n        } else {\n          this.add(selector, false);\n        }\n        return self;\n      },\n      toArray: function () {\n        return Tools.toArray(this);\n      },\n      add: function (items, sort) {\n        var self = this;\n        var nodes, i;\n        if (isString(items)) {\n          return self.add(DomQuery(items));\n        }\n        if (sort !== false) {\n          nodes = DomQuery.unique(self.toArray().concat(DomQuery.makeArray(items)));\n          self.length = nodes.length;\n          for (i = 0; i < nodes.length; i++) {\n            self[i] = nodes[i];\n          }\n        } else {\n          push.apply(self, DomQuery.makeArray(items));\n        }\n        return self;\n      },\n      attr: function (name, value) {\n        var self = this;\n        var hook;\n        if (typeof name === 'object') {\n          each$g(name, function (name, value) {\n            self.attr(name, value);\n          });\n        } else if (isDefined(value)) {\n          this.each(function () {\n            var hook;\n            if (this.nodeType === 1) {\n              hook = attrHooks[name];\n              if (hook && hook.set) {\n                hook.set(this, value);\n                return;\n              }\n              if (value === null) {\n                this.removeAttribute(name, 2);\n              } else {\n                this.setAttribute(name, value, 2);\n              }\n            }\n          });\n        } else {\n          if (self[0] && self[0].nodeType === 1) {\n            hook = attrHooks[name];\n            if (hook && hook.get) {\n              return hook.get(self[0], name);\n            }\n            if (booleanMap[name]) {\n              return self.prop(name) ? name : undefined;\n            }\n            value = self[0].getAttribute(name, 2);\n            if (value === null) {\n              value = undefined;\n            }\n          }\n          return value;\n        }\n        return self;\n      },\n      removeAttr: function (name) {\n        return this.attr(name, null);\n      },\n      prop: function (name, value) {\n        var self = this;\n        name = propFix[name] || name;\n        if (typeof name === 'object') {\n          each$g(name, function (name, value) {\n            self.prop(name, value);\n          });\n        } else if (isDefined(value)) {\n          this.each(function () {\n            if (this.nodeType === 1) {\n              this[name] = value;\n            }\n          });\n        } else {\n          if (self[0] && self[0].nodeType && name in self[0]) {\n            return self[0][name];\n          }\n          return value;\n        }\n        return self;\n      },\n      css: function (name, value) {\n        var self = this;\n        var elm, hook;\n        var camel = function (name) {\n          return name.replace(/-(\\D)/g, function (a, b) {\n            return b.toUpperCase();\n          });\n        };\n        var dashed = function (name) {\n          return name.replace(/[A-Z]/g, function (a) {\n            return '-' + a;\n          });\n        };\n        if (typeof name === 'object') {\n          each$g(name, function (name, value) {\n            self.css(name, value);\n          });\n        } else {\n          if (isDefined(value)) {\n            name = camel(name);\n            if (typeof value === 'number' && !numericCssMap[name]) {\n              value = value.toString() + 'px';\n            }\n            self.each(function () {\n              var style = this.style;\n              hook = cssHooks[name];\n              if (hook && hook.set) {\n                hook.set(this, value);\n                return;\n              }\n              try {\n                this.style[cssFix[name] || name] = value;\n              } catch (ex) {\n              }\n              if (value === null || value === '') {\n                if (style.removeProperty) {\n                  style.removeProperty(dashed(name));\n                } else {\n                  style.removeAttribute(name);\n                }\n              }\n            });\n          } else {\n            elm = self[0];\n            hook = cssHooks[name];\n            if (hook && hook.get) {\n              return hook.get(elm);\n            }\n            if (elm.ownerDocument.defaultView) {\n              try {\n                return elm.ownerDocument.defaultView.getComputedStyle(elm, null).getPropertyValue(dashed(name));\n              } catch (ex) {\n                return undefined;\n              }\n            } else if (elm.currentStyle) {\n              return elm.currentStyle[camel(name)];\n            } else {\n              return '';\n            }\n          }\n        }\n        return self;\n      },\n      remove: function () {\n        var self = this;\n        var node, i = this.length;\n        while (i--) {\n          node = self[i];\n          Event$1.clean(node);\n          if (node.parentNode) {\n            node.parentNode.removeChild(node);\n          }\n        }\n        return this;\n      },\n      empty: function () {\n        var self = this;\n        var node, i = this.length;\n        while (i--) {\n          node = self[i];\n          while (node.firstChild) {\n            node.removeChild(node.firstChild);\n          }\n        }\n        return this;\n      },\n      html: function (value) {\n        var self = this;\n        var i;\n        if (isDefined(value)) {\n          i = self.length;\n          try {\n            while (i--) {\n              self[i].innerHTML = value;\n            }\n          } catch (ex) {\n            DomQuery(self[i]).empty().append(value);\n          }\n          return self;\n        }\n        return self[0] ? self[0].innerHTML : '';\n      },\n      text: function (value) {\n        var self = this;\n        var i;\n        if (isDefined(value)) {\n          i = self.length;\n          while (i--) {\n            if ('innerText' in self[i]) {\n              self[i].innerText = value;\n            } else {\n              self[0].textContent = value;\n            }\n          }\n          return self;\n        }\n        return self[0] ? self[0].innerText || self[0].textContent : '';\n      },\n      append: function () {\n        return domManipulate(this, arguments, function (node) {\n          if (this.nodeType === 1 || this.host && this.host.nodeType === 1) {\n            this.appendChild(node);\n          }\n        });\n      },\n      prepend: function () {\n        return domManipulate(this, arguments, function (node) {\n          if (this.nodeType === 1 || this.host && this.host.nodeType === 1) {\n            this.insertBefore(node, this.firstChild);\n          }\n        }, true);\n      },\n      before: function () {\n        var self = this;\n        if (self[0] && self[0].parentNode) {\n          return domManipulate(self, arguments, function (node) {\n            this.parentNode.insertBefore(node, this);\n          });\n        }\n        return self;\n      },\n      after: function () {\n        var self = this;\n        if (self[0] && self[0].parentNode) {\n          return domManipulate(self, arguments, function (node) {\n            this.parentNode.insertBefore(node, this.nextSibling);\n          }, true);\n        }\n        return self;\n      },\n      appendTo: function (val) {\n        DomQuery(val).append(this);\n        return this;\n      },\n      prependTo: function (val) {\n        DomQuery(val).prepend(this);\n        return this;\n      },\n      replaceWith: function (content) {\n        return this.before(content).remove();\n      },\n      wrap: function (content) {\n        return wrap$2(this, content);\n      },\n      wrapAll: function (content) {\n        return wrap$2(this, content, true);\n      },\n      wrapInner: function (content) {\n        this.each(function () {\n          DomQuery(this).contents().wrapAll(content);\n        });\n        return this;\n      },\n      unwrap: function () {\n        return this.parent().each(function () {\n          DomQuery(this).replaceWith(this.childNodes);\n        });\n      },\n      clone: function () {\n        var result = [];\n        this.each(function () {\n          result.push(this.cloneNode(true));\n        });\n        return DomQuery(result);\n      },\n      addClass: function (className) {\n        return this.toggleClass(className, true);\n      },\n      removeClass: function (className) {\n        return this.toggleClass(className, false);\n      },\n      toggleClass: function (className, state) {\n        var self = this;\n        if (typeof className !== 'string') {\n          return self;\n        }\n        if (className.indexOf(' ') !== -1) {\n          each$g(className.split(' '), function () {\n            self.toggleClass(this, state);\n          });\n        } else {\n          self.each(function (index, node) {\n            var classState = hasClass(node, className);\n            if (classState !== state) {\n              var existingClassName = node.className;\n              if (classState) {\n                node.className = trim$1((' ' + existingClassName + ' ').replace(' ' + className + ' ', ' '));\n              } else {\n                node.className += existingClassName ? ' ' + className : className;\n              }\n            }\n          });\n        }\n        return self;\n      },\n      hasClass: function (className) {\n        return hasClass(this[0], className);\n      },\n      each: function (callback) {\n        return each$g(this, callback);\n      },\n      on: function (name, callback) {\n        return this.each(function () {\n          Event$1.bind(this, name, callback);\n        });\n      },\n      off: function (name, callback) {\n        return this.each(function () {\n          Event$1.unbind(this, name, callback);\n        });\n      },\n      trigger: function (name) {\n        return this.each(function () {\n          if (typeof name === 'object') {\n            Event$1.fire(this, name.type, name);\n          } else {\n            Event$1.fire(this, name);\n          }\n        });\n      },\n      show: function () {\n        return this.css('display', '');\n      },\n      hide: function () {\n        return this.css('display', 'none');\n      },\n      slice: function () {\n        return DomQuery(slice.apply(this, arguments));\n      },\n      eq: function (index) {\n        return index === -1 ? this.slice(index) : this.slice(index, +index + 1);\n      },\n      first: function () {\n        return this.eq(0);\n      },\n      last: function () {\n        return this.eq(-1);\n      },\n      find: function (selector) {\n        var i, l;\n        var ret = [];\n        for (i = 0, l = this.length; i < l; i++) {\n          DomQuery.find(selector, this[i], ret);\n        }\n        return DomQuery(ret);\n      },\n      filter: function (selector) {\n        if (typeof selector === 'function') {\n          return DomQuery(grep$2(this.toArray(), function (item, i) {\n            return selector(i, item);\n          }));\n        }\n        return DomQuery(DomQuery.filter(selector, this.toArray()));\n      },\n      closest: function (selector) {\n        var result = [];\n        if (selector instanceof DomQuery) {\n          selector = selector[0];\n        }\n        this.each(function (i, node) {\n          while (node) {\n            if (typeof selector === 'string' && DomQuery(node).is(selector)) {\n              result.push(node);\n              break;\n            } else if (node === selector) {\n              result.push(node);\n              break;\n            }\n            node = node.parentNode;\n          }\n        });\n        return DomQuery(result);\n      },\n      offset: function (offset) {\n        var elm, doc, docElm;\n        var x = 0, y = 0, pos;\n        if (!offset) {\n          elm = this[0];\n          if (elm) {\n            doc = elm.ownerDocument;\n            docElm = doc.documentElement;\n            if (elm.getBoundingClientRect) {\n              pos = elm.getBoundingClientRect();\n              x = pos.left + (docElm.scrollLeft || doc.body.scrollLeft) - docElm.clientLeft;\n              y = pos.top + (docElm.scrollTop || doc.body.scrollTop) - docElm.clientTop;\n            }\n          }\n          return {\n            left: x,\n            top: y\n          };\n        }\n        return this.css(offset);\n      },\n      push: push,\n      sort: Array.prototype.sort,\n      splice: Array.prototype.splice\n    };\n    Tools.extend(DomQueryConstructor, {\n      extend: Tools.extend,\n      makeArray: function (object) {\n        if (isWindow(object) || object.nodeType) {\n          return [object];\n        }\n        return Tools.toArray(object);\n      },\n      inArray: inArray$1,\n      isArray: Tools.isArray,\n      each: each$g,\n      trim: trim$1,\n      grep: grep$2,\n      find: Sizzle,\n      expr: Sizzle.selectors,\n      unique: Sizzle.uniqueSort,\n      text: Sizzle.getText,\n      contains: Sizzle.contains,\n      filter: function (expr, elems, not) {\n        var i = elems.length;\n        if (not) {\n          expr = ':not(' + expr + ')';\n        }\n        while (i--) {\n          if (elems[i].nodeType !== 1) {\n            elems.splice(i, 1);\n          }\n        }\n        if (elems.length === 1) {\n          elems = DomQuery.find.matchesSelector(elems[0], expr) ? [elems[0]] : [];\n        } else {\n          elems = DomQuery.find.matches(expr, elems);\n        }\n        return elems;\n      }\n    });\n    var dir = function (el, prop, until) {\n      var matched = [];\n      var cur = el[prop];\n      if (typeof until !== 'string' && until instanceof DomQuery) {\n        until = until[0];\n      }\n      while (cur && cur.nodeType !== 9) {\n        if (until !== undefined) {\n          if (cur === until) {\n            break;\n          }\n          if (typeof until === 'string' && DomQuery(cur).is(until)) {\n            break;\n          }\n        }\n        if (cur.nodeType === 1) {\n          matched.push(cur);\n        }\n        cur = cur[prop];\n      }\n      return matched;\n    };\n    var sibling$1 = function (node, siblingName, nodeType, until) {\n      var result = [];\n      if (until instanceof DomQuery) {\n        until = until[0];\n      }\n      for (; node; node = node[siblingName]) {\n        if (nodeType && node.nodeType !== nodeType) {\n          continue;\n        }\n        if (until !== undefined) {\n          if (node === until) {\n            break;\n          }\n          if (typeof until === 'string' && DomQuery(node).is(until)) {\n            break;\n          }\n        }\n        result.push(node);\n      }\n      return result;\n    };\n    var firstSibling = function (node, siblingName, nodeType) {\n      for (node = node[siblingName]; node; node = node[siblingName]) {\n        if (node.nodeType === nodeType) {\n          return node;\n        }\n      }\n      return null;\n    };\n    each$g({\n      parent: function (node) {\n        var parent = node.parentNode;\n        return parent && parent.nodeType !== 11 ? parent : null;\n      },\n      parents: function (node) {\n        return dir(node, 'parentNode');\n      },\n      next: function (node) {\n        return firstSibling(node, 'nextSibling', 1);\n      },\n      prev: function (node) {\n        return firstSibling(node, 'previousSibling', 1);\n      },\n      children: function (node) {\n        return sibling$1(node.firstChild, 'nextSibling', 1);\n      },\n      contents: function (node) {\n        return Tools.toArray((node.nodeName === 'iframe' ? node.contentDocument || node.contentWindow.document : node).childNodes);\n      }\n    }, function (name, fn) {\n      DomQueryConstructor.fn[name] = function (selector) {\n        var self = this;\n        var result = [];\n        self.each(function () {\n          var nodes = fn.call(result, this, selector, result);\n          if (nodes) {\n            if (DomQuery.isArray(nodes)) {\n              result.push.apply(result, nodes);\n            } else {\n              result.push(nodes);\n            }\n          }\n        });\n        if (this.length > 1) {\n          if (!skipUniques[name]) {\n            result = DomQuery.unique(result);\n          }\n          if (name.indexOf('parents') === 0) {\n            result = result.reverse();\n          }\n        }\n        var wrappedResult = DomQuery(result);\n        if (selector) {\n          return wrappedResult.filter(selector);\n        }\n        return wrappedResult;\n      };\n    });\n    each$g({\n      parentsUntil: function (node, until) {\n        return dir(node, 'parentNode', until);\n      },\n      nextUntil: function (node, until) {\n        return sibling$1(node, 'nextSibling', 1, until).slice(1);\n      },\n      prevUntil: function (node, until) {\n        return sibling$1(node, 'previousSibling', 1, until).slice(1);\n      }\n    }, function (name, fn) {\n      DomQueryConstructor.fn[name] = function (selector, filter) {\n        var self = this;\n        var result = [];\n        self.each(function () {\n          var nodes = fn.call(result, this, selector, result);\n          if (nodes) {\n            if (DomQuery.isArray(nodes)) {\n              result.push.apply(result, nodes);\n            } else {\n              result.push(nodes);\n            }\n          }\n        });\n        if (this.length > 1) {\n          result = DomQuery.unique(result);\n          if (name.indexOf('parents') === 0 || name === 'prevUntil') {\n            result = result.reverse();\n          }\n        }\n        var wrappedResult = DomQuery(result);\n        if (filter) {\n          return wrappedResult.filter(filter);\n        }\n        return wrappedResult;\n      };\n    });\n    DomQueryConstructor.fn.is = function (selector) {\n      return !!selector && this.filter(selector).length > 0;\n    };\n    DomQueryConstructor.fn.init.prototype = DomQueryConstructor.fn;\n    DomQueryConstructor.overrideDefaults = function (callback) {\n      var defaults;\n      var sub = function (selector, context) {\n        defaults = defaults || callback();\n        if (arguments.length === 0) {\n          selector = defaults.element;\n        }\n        if (!context) {\n          context = defaults.context;\n        }\n        return new sub.fn.init(selector, context);\n      };\n      DomQuery.extend(sub, this);\n      return sub;\n    };\n    DomQueryConstructor.attrHooks = attrHooks;\n    DomQueryConstructor.cssHooks = cssHooks;\n    var DomQuery = DomQueryConstructor;\n\n    var each$f = Tools.each;\n    var grep$1 = Tools.grep;\n    var isIE = Env.ie;\n    var simpleSelectorRe = /^([a-z0-9],?)+$/i;\n    var setupAttrHooks = function (styles, settings, getContext) {\n      var keepValues = settings.keep_values;\n      var keepUrlHook = {\n        set: function ($elm, value, name) {\n          if (settings.url_converter) {\n            value = settings.url_converter.call(settings.url_converter_scope || getContext(), value, name, $elm[0]);\n          }\n          $elm.attr('data-mce-' + name, value).attr(name, value);\n        },\n        get: function ($elm, name) {\n          return $elm.attr('data-mce-' + name) || $elm.attr(name);\n        }\n      };\n      var attrHooks = {\n        style: {\n          set: function ($elm, value) {\n            if (value !== null && typeof value === 'object') {\n              $elm.css(value);\n              return;\n            }\n            if (keepValues) {\n              $elm.attr('data-mce-style', value);\n            }\n            if (value !== null && typeof value === 'string') {\n              $elm.removeAttr('style');\n              $elm.css(styles.parse(value));\n            } else {\n              $elm.attr('style', value);\n            }\n          },\n          get: function ($elm) {\n            var value = $elm.attr('data-mce-style') || $elm.attr('style');\n            value = styles.serialize(styles.parse(value), $elm[0].nodeName);\n            return value;\n          }\n        }\n      };\n      if (keepValues) {\n        attrHooks.href = attrHooks.src = keepUrlHook;\n      }\n      return attrHooks;\n    };\n    var updateInternalStyleAttr = function (styles, $elm) {\n      var rawValue = $elm.attr('style');\n      var value = styles.serialize(styles.parse(rawValue), $elm[0].nodeName);\n      if (!value) {\n        value = null;\n      }\n      $elm.attr('data-mce-style', value);\n    };\n    var findNodeIndex = function (node, normalized) {\n      var idx = 0, lastNodeType, nodeType;\n      if (node) {\n        for (lastNodeType = node.nodeType, node = node.previousSibling; node; node = node.previousSibling) {\n          nodeType = node.nodeType;\n          if (normalized && nodeType === 3) {\n            if (nodeType === lastNodeType || !node.nodeValue.length) {\n              continue;\n            }\n          }\n          idx++;\n          lastNodeType = nodeType;\n        }\n      }\n      return idx;\n    };\n    var DOMUtils = function (doc, settings) {\n      if (settings === void 0) {\n        settings = {};\n      }\n      var addedStyles = {};\n      var win = window;\n      var files = {};\n      var counter = 0;\n      var stdMode = true;\n      var boxModel = true;\n      var styleSheetLoader = instance.forElement(SugarElement.fromDom(doc), {\n        contentCssCors: settings.contentCssCors,\n        referrerPolicy: settings.referrerPolicy\n      });\n      var boundEvents = [];\n      var schema = settings.schema ? settings.schema : Schema({});\n      var styles = Styles({\n        url_converter: settings.url_converter,\n        url_converter_scope: settings.url_converter_scope\n      }, settings.schema);\n      var events = settings.ownEvents ? new EventUtils() : EventUtils.Event;\n      var blockElementsMap = schema.getBlockElements();\n      var $ = DomQuery.overrideDefaults(function () {\n        return {\n          context: doc,\n          element: self.getRoot()\n        };\n      });\n      var isBlock = function (node) {\n        if (typeof node === 'string') {\n          return !!blockElementsMap[node];\n        } else if (node) {\n          var type = node.nodeType;\n          if (type) {\n            return !!(type === 1 && blockElementsMap[node.nodeName]);\n          }\n        }\n        return false;\n      };\n      var get = function (elm) {\n        return elm && doc && isString$1(elm) ? doc.getElementById(elm) : elm;\n      };\n      var $$ = function (elm) {\n        return $(typeof elm === 'string' ? get(elm) : elm);\n      };\n      var getAttrib = function (elm, name, defaultVal) {\n        var hook, value;\n        var $elm = $$(elm);\n        if ($elm.length) {\n          hook = attrHooks[name];\n          if (hook && hook.get) {\n            value = hook.get($elm, name);\n          } else {\n            value = $elm.attr(name);\n          }\n        }\n        if (typeof value === 'undefined') {\n          value = defaultVal || '';\n        }\n        return value;\n      };\n      var getAttribs = function (elm) {\n        var node = get(elm);\n        if (!node) {\n          return [];\n        }\n        return node.attributes;\n      };\n      var setAttrib = function (elm, name, value) {\n        if (value === '') {\n          value = null;\n        }\n        var $elm = $$(elm);\n        var originalValue = $elm.attr(name);\n        if (!$elm.length) {\n          return;\n        }\n        var hook = attrHooks[name];\n        if (hook && hook.set) {\n          hook.set($elm, value, name);\n        } else {\n          $elm.attr(name, value);\n        }\n        if (originalValue !== value && settings.onSetAttrib) {\n          settings.onSetAttrib({\n            attrElm: $elm,\n            attrName: name,\n            attrValue: value\n          });\n        }\n      };\n      var clone = function (node, deep) {\n        if (!isIE || node.nodeType !== 1 || deep) {\n          return node.cloneNode(deep);\n        } else {\n          var clone_1 = doc.createElement(node.nodeName);\n          each$f(getAttribs(node), function (attr) {\n            setAttrib(clone_1, attr.nodeName, getAttrib(node, attr.nodeName));\n          });\n          return clone_1;\n        }\n      };\n      var getRoot = function () {\n        return settings.root_element || doc.body;\n      };\n      var getViewPort = function (argWin) {\n        var vp = getBounds(argWin);\n        return {\n          x: vp.x,\n          y: vp.y,\n          w: vp.width,\n          h: vp.height\n        };\n      };\n      var getPos$1 = function (elm, rootElm) {\n        return getPos(doc.body, get(elm), rootElm);\n      };\n      var setStyle = function (elm, name, value) {\n        var $elm = isString$1(name) ? $$(elm).css(name, value) : $$(elm).css(name);\n        if (settings.update_styles) {\n          updateInternalStyleAttr(styles, $elm);\n        }\n      };\n      var setStyles = function (elm, stylesArg) {\n        var $elm = $$(elm).css(stylesArg);\n        if (settings.update_styles) {\n          updateInternalStyleAttr(styles, $elm);\n        }\n      };\n      var getStyle = function (elm, name, computed) {\n        var $elm = $$(elm);\n        if (computed) {\n          return $elm.css(name);\n        }\n        name = name.replace(/-(\\D)/g, function (a, b) {\n          return b.toUpperCase();\n        });\n        if (name === 'float') {\n          name = Env.browser.isIE() ? 'styleFloat' : 'cssFloat';\n        }\n        return $elm[0] && $elm[0].style ? $elm[0].style[name] : undefined;\n      };\n      var getSize = function (elm) {\n        var w, h;\n        elm = get(elm);\n        w = getStyle(elm, 'width');\n        h = getStyle(elm, 'height');\n        if (w.indexOf('px') === -1) {\n          w = 0;\n        }\n        if (h.indexOf('px') === -1) {\n          h = 0;\n        }\n        return {\n          w: parseInt(w, 10) || elm.offsetWidth || elm.clientWidth,\n          h: parseInt(h, 10) || elm.offsetHeight || elm.clientHeight\n        };\n      };\n      var getRect = function (elm) {\n        elm = get(elm);\n        var pos = getPos$1(elm);\n        var size = getSize(elm);\n        return {\n          x: pos.x,\n          y: pos.y,\n          w: size.w,\n          h: size.h\n        };\n      };\n      var is = function (elm, selector) {\n        var i;\n        if (!elm) {\n          return false;\n        }\n        if (!Array.isArray(elm)) {\n          if (selector === '*') {\n            return elm.nodeType === 1;\n          }\n          if (simpleSelectorRe.test(selector)) {\n            var selectors = selector.toLowerCase().split(/,/);\n            var elmName = elm.nodeName.toLowerCase();\n            for (i = selectors.length - 1; i >= 0; i--) {\n              if (selectors[i] === elmName) {\n                return true;\n              }\n            }\n            return false;\n          }\n          if (elm.nodeType && elm.nodeType !== 1) {\n            return false;\n          }\n        }\n        var elms = !Array.isArray(elm) ? [elm] : elm;\n        return Sizzle(selector, elms[0].ownerDocument || elms[0], null, elms).length > 0;\n      };\n      var getParents = function (elm, selector, root, collect) {\n        var result = [];\n        var selectorVal;\n        var node = get(elm);\n        collect = collect === undefined;\n        root = root || (getRoot().nodeName !== 'BODY' ? getRoot().parentNode : null);\n        if (Tools.is(selector, 'string')) {\n          selectorVal = selector;\n          if (selector === '*') {\n            selector = function (node) {\n              return node.nodeType === 1;\n            };\n          } else {\n            selector = function (node) {\n              return is(node, selectorVal);\n            };\n          }\n        }\n        while (node) {\n          if (node === root || isNullable(node.nodeType) || isDocument$1(node) || isDocumentFragment(node)) {\n            break;\n          }\n          if (!selector || typeof selector === 'function' && selector(node)) {\n            if (collect) {\n              result.push(node);\n            } else {\n              return [node];\n            }\n          }\n          node = node.parentNode;\n        }\n        return collect ? result : null;\n      };\n      var getParent = function (node, selector, root) {\n        var parents = getParents(node, selector, root, false);\n        return parents && parents.length > 0 ? parents[0] : null;\n      };\n      var _findSib = function (node, selector, name) {\n        var func = selector;\n        if (node) {\n          if (typeof selector === 'string') {\n            func = function (node) {\n              return is(node, selector);\n            };\n          }\n          for (node = node[name]; node; node = node[name]) {\n            if (typeof func === 'function' && func(node)) {\n              return node;\n            }\n          }\n        }\n        return null;\n      };\n      var getNext = function (node, selector) {\n        return _findSib(node, selector, 'nextSibling');\n      };\n      var getPrev = function (node, selector) {\n        return _findSib(node, selector, 'previousSibling');\n      };\n      var select = function (selector, scope) {\n        return Sizzle(selector, get(scope) || settings.root_element || doc, []);\n      };\n      var run = function (elm, func, scope) {\n        var result;\n        var node = typeof elm === 'string' ? get(elm) : elm;\n        if (!node) {\n          return false;\n        }\n        if (Tools.isArray(node) && (node.length || node.length === 0)) {\n          result = [];\n          each$f(node, function (elm, i) {\n            if (elm) {\n              result.push(func.call(scope, typeof elm === 'string' ? get(elm) : elm, i));\n            }\n          });\n          return result;\n        }\n        var context = scope ? scope : this;\n        return func.call(context, node);\n      };\n      var setAttribs = function (elm, attrs) {\n        $$(elm).each(function (i, node) {\n          each$f(attrs, function (value, name) {\n            setAttrib(node, name, value);\n          });\n        });\n      };\n      var setHTML = function (elm, html) {\n        var $elm = $$(elm);\n        if (isIE) {\n          $elm.each(function (i, target) {\n            if (target.canHaveHTML === false) {\n              return;\n            }\n            while (target.firstChild) {\n              target.removeChild(target.firstChild);\n            }\n            try {\n              target.innerHTML = '<br>' + html;\n              target.removeChild(target.firstChild);\n            } catch (ex) {\n              DomQuery('<div></div>').html('<br>' + html).contents().slice(1).appendTo(target);\n            }\n            return html;\n          });\n        } else {\n          $elm.html(html);\n        }\n      };\n      var add = function (parentElm, name, attrs, html, create) {\n        return run(parentElm, function (parentElm) {\n          var newElm = typeof name === 'string' ? doc.createElement(name) : name;\n          setAttribs(newElm, attrs);\n          if (html) {\n            if (typeof html !== 'string' && html.nodeType) {\n              newElm.appendChild(html);\n            } else if (typeof html === 'string') {\n              setHTML(newElm, html);\n            }\n          }\n          return !create ? parentElm.appendChild(newElm) : newElm;\n        });\n      };\n      var create = function (name, attrs, html) {\n        return add(doc.createElement(name), name, attrs, html, true);\n      };\n      var decode = Entities.decode;\n      var encode = Entities.encodeAllRaw;\n      var createHTML = function (name, attrs, html) {\n        var outHtml = '', key;\n        outHtml += '<' + name;\n        for (key in attrs) {\n          if (hasNonNullableKey(attrs, key)) {\n            outHtml += ' ' + key + '=\"' + encode(attrs[key]) + '\"';\n          }\n        }\n        if (typeof html !== 'undefined') {\n          return outHtml + '>' + html + '</' + name + '>';\n        }\n        return outHtml + ' />';\n      };\n      var createFragment = function (html) {\n        var node;\n        var container = doc.createElement('div');\n        var frag = doc.createDocumentFragment();\n        frag.appendChild(container);\n        if (html) {\n          container.innerHTML = html;\n        }\n        while (node = container.firstChild) {\n          frag.appendChild(node);\n        }\n        frag.removeChild(container);\n        return frag;\n      };\n      var remove = function (node, keepChildren) {\n        var $node = $$(node);\n        if (keepChildren) {\n          $node.each(function () {\n            var child;\n            while (child = this.firstChild) {\n              if (child.nodeType === 3 && child.data.length === 0) {\n                this.removeChild(child);\n              } else {\n                this.parentNode.insertBefore(child, this);\n              }\n            }\n          }).remove();\n        } else {\n          $node.remove();\n        }\n        return $node.length > 1 ? $node.toArray() : $node[0];\n      };\n      var removeAllAttribs = function (e) {\n        return run(e, function (e) {\n          var i;\n          var attrs = e.attributes;\n          for (i = attrs.length - 1; i >= 0; i--) {\n            e.removeAttributeNode(attrs.item(i));\n          }\n        });\n      };\n      var parseStyle = function (cssText) {\n        return styles.parse(cssText);\n      };\n      var serializeStyle = function (stylesArg, name) {\n        return styles.serialize(stylesArg, name);\n      };\n      var addStyle = function (cssText) {\n        var head, styleElm;\n        if (self !== DOMUtils.DOM && doc === document) {\n          if (addedStyles[cssText]) {\n            return;\n          }\n          addedStyles[cssText] = true;\n        }\n        styleElm = doc.getElementById('mceDefaultStyles');\n        if (!styleElm) {\n          styleElm = doc.createElement('style');\n          styleElm.id = 'mceDefaultStyles';\n          styleElm.type = 'text/css';\n          head = doc.getElementsByTagName('head')[0];\n          if (head.firstChild) {\n            head.insertBefore(styleElm, head.firstChild);\n          } else {\n            head.appendChild(styleElm);\n          }\n        }\n        if (styleElm.styleSheet) {\n          styleElm.styleSheet.cssText += cssText;\n        } else {\n          styleElm.appendChild(doc.createTextNode(cssText));\n        }\n      };\n      var loadCSS = function (urls) {\n        if (!urls) {\n          urls = '';\n        }\n        each$k(urls.split(','), function (url) {\n          files[url] = true;\n          styleSheetLoader.load(url, noop);\n        });\n      };\n      var toggleClass = function (elm, cls, state) {\n        $$(elm).toggleClass(cls, state).each(function () {\n          if (this.className === '') {\n            DomQuery(this).attr('class', null);\n          }\n        });\n      };\n      var addClass = function (elm, cls) {\n        $$(elm).addClass(cls);\n      };\n      var removeClass = function (elm, cls) {\n        toggleClass(elm, cls, false);\n      };\n      var hasClass = function (elm, cls) {\n        return $$(elm).hasClass(cls);\n      };\n      var show = function (elm) {\n        $$(elm).show();\n      };\n      var hide = function (elm) {\n        $$(elm).hide();\n      };\n      var isHidden = function (elm) {\n        return $$(elm).css('display') === 'none';\n      };\n      var uniqueId = function (prefix) {\n        return (!prefix ? 'mce_' : prefix) + counter++;\n      };\n      var getOuterHTML = function (elm) {\n        var node = typeof elm === 'string' ? get(elm) : elm;\n        return isElement$5(node) ? node.outerHTML : DomQuery('<div></div>').append(DomQuery(node).clone()).html();\n      };\n      var setOuterHTML = function (elm, html) {\n        $$(elm).each(function () {\n          try {\n            if ('outerHTML' in this) {\n              this.outerHTML = html;\n              return;\n            }\n          } catch (ex) {\n          }\n          remove(DomQuery(this).html(html), true);\n        });\n      };\n      var insertAfter = function (node, reference) {\n        var referenceNode = get(reference);\n        return run(node, function (node) {\n          var parent = referenceNode.parentNode;\n          var nextSibling = referenceNode.nextSibling;\n          if (nextSibling) {\n            parent.insertBefore(node, nextSibling);\n          } else {\n            parent.appendChild(node);\n          }\n          return node;\n        });\n      };\n      var replace = function (newElm, oldElm, keepChildren) {\n        return run(oldElm, function (oldElm) {\n          if (Tools.is(oldElm, 'array')) {\n            newElm = newElm.cloneNode(true);\n          }\n          if (keepChildren) {\n            each$f(grep$1(oldElm.childNodes), function (node) {\n              newElm.appendChild(node);\n            });\n          }\n          return oldElm.parentNode.replaceChild(newElm, oldElm);\n        });\n      };\n      var rename = function (elm, name) {\n        var newElm;\n        if (elm.nodeName !== name.toUpperCase()) {\n          newElm = create(name);\n          each$f(getAttribs(elm), function (attrNode) {\n            setAttrib(newElm, attrNode.nodeName, getAttrib(elm, attrNode.nodeName));\n          });\n          replace(newElm, elm, true);\n        }\n        return newElm || elm;\n      };\n      var findCommonAncestor = function (a, b) {\n        var ps = a, pe;\n        while (ps) {\n          pe = b;\n          while (pe && ps !== pe) {\n            pe = pe.parentNode;\n          }\n          if (ps === pe) {\n            break;\n          }\n          ps = ps.parentNode;\n        }\n        if (!ps && a.ownerDocument) {\n          return a.ownerDocument.documentElement;\n        }\n        return ps;\n      };\n      var toHex = function (rgbVal) {\n        return styles.toHex(Tools.trim(rgbVal));\n      };\n      var isNonEmptyElement = function (node) {\n        if (isElement$5(node)) {\n          var isNamedAnchor = node.nodeName.toLowerCase() === 'a' && !getAttrib(node, 'href') && getAttrib(node, 'id');\n          if (getAttrib(node, 'name') || getAttrib(node, 'data-mce-bookmark') || isNamedAnchor) {\n            return true;\n          }\n        }\n        return false;\n      };\n      var isEmpty = function (node, elements) {\n        var type, name, brCount = 0;\n        if (isNonEmptyElement(node)) {\n          return false;\n        }\n        node = node.firstChild;\n        if (node) {\n          var walker = new DomTreeWalker(node, node.parentNode);\n          var whitespace = schema ? schema.getWhiteSpaceElements() : {};\n          elements = elements || (schema ? schema.getNonEmptyElements() : null);\n          do {\n            type = node.nodeType;\n            if (isElement$5(node)) {\n              var bogusVal = node.getAttribute('data-mce-bogus');\n              if (bogusVal) {\n                node = walker.next(bogusVal === 'all');\n                continue;\n              }\n              name = node.nodeName.toLowerCase();\n              if (elements && elements[name]) {\n                if (name === 'br') {\n                  brCount++;\n                  node = walker.next();\n                  continue;\n                }\n                return false;\n              }\n              if (isNonEmptyElement(node)) {\n                return false;\n              }\n            }\n            if (type === 8) {\n              return false;\n            }\n            if (type === 3 && !isWhitespaceText(node.nodeValue)) {\n              return false;\n            }\n            if (type === 3 && node.parentNode && whitespace[node.parentNode.nodeName] && isWhitespaceText(node.nodeValue)) {\n              return false;\n            }\n            node = walker.next();\n          } while (node);\n        }\n        return brCount <= 1;\n      };\n      var createRng = function () {\n        return doc.createRange();\n      };\n      var split = function (parentElm, splitElm, replacementElm) {\n        var range = createRng();\n        var beforeFragment;\n        var afterFragment;\n        var parentNode;\n        if (parentElm && splitElm) {\n          range.setStart(parentElm.parentNode, findNodeIndex(parentElm));\n          range.setEnd(splitElm.parentNode, findNodeIndex(splitElm));\n          beforeFragment = range.extractContents();\n          range = createRng();\n          range.setStart(splitElm.parentNode, findNodeIndex(splitElm) + 1);\n          range.setEnd(parentElm.parentNode, findNodeIndex(parentElm) + 1);\n          afterFragment = range.extractContents();\n          parentNode = parentElm.parentNode;\n          parentNode.insertBefore(trimNode(self, beforeFragment), parentElm);\n          if (replacementElm) {\n            parentNode.insertBefore(replacementElm, parentElm);\n          } else {\n            parentNode.insertBefore(splitElm, parentElm);\n          }\n          parentNode.insertBefore(trimNode(self, afterFragment), parentElm);\n          remove(parentElm);\n          return replacementElm || splitElm;\n        }\n      };\n      var bind = function (target, name, func, scope) {\n        if (Tools.isArray(target)) {\n          var i = target.length;\n          var rv = [];\n          while (i--) {\n            rv[i] = bind(target[i], name, func, scope);\n          }\n          return rv;\n        }\n        if (settings.collect && (target === doc || target === win)) {\n          boundEvents.push([\n            target,\n            name,\n            func,\n            scope\n          ]);\n        }\n        var output = events.bind(target, name, func, scope || self);\n        return output;\n      };\n      var unbind = function (target, name, func) {\n        if (Tools.isArray(target)) {\n          var i = target.length;\n          var rv = [];\n          while (i--) {\n            rv[i] = unbind(target[i], name, func);\n          }\n          return rv;\n        } else {\n          if (boundEvents.length > 0 && (target === doc || target === win)) {\n            var i = boundEvents.length;\n            while (i--) {\n              var item = boundEvents[i];\n              if (target === item[0] && (!name || name === item[1]) && (!func || func === item[2])) {\n                events.unbind(item[0], item[1], item[2]);\n              }\n            }\n          }\n          return events.unbind(target, name, func);\n        }\n      };\n      var fire = function (target, name, evt) {\n        return events.fire(target, name, evt);\n      };\n      var getContentEditable = function (node) {\n        if (node && isElement$5(node)) {\n          var contentEditable = node.getAttribute('data-mce-contenteditable');\n          if (contentEditable && contentEditable !== 'inherit') {\n            return contentEditable;\n          }\n          return node.contentEditable !== 'inherit' ? node.contentEditable : null;\n        } else {\n          return null;\n        }\n      };\n      var getContentEditableParent = function (node) {\n        var root = getRoot();\n        var state = null;\n        for (; node && node !== root; node = node.parentNode) {\n          state = getContentEditable(node);\n          if (state !== null) {\n            break;\n          }\n        }\n        return state;\n      };\n      var destroy = function () {\n        if (boundEvents.length > 0) {\n          var i = boundEvents.length;\n          while (i--) {\n            var item = boundEvents[i];\n            events.unbind(item[0], item[1], item[2]);\n          }\n        }\n        each$j(files, function (_, url) {\n          styleSheetLoader.unload(url);\n          delete files[url];\n        });\n        if (Sizzle.setDocument) {\n          Sizzle.setDocument();\n        }\n      };\n      var isChildOf = function (node, parent) {\n        if (!isIE) {\n          return node === parent || parent.contains(node);\n        } else {\n          while (node) {\n            if (parent === node) {\n              return true;\n            }\n            node = node.parentNode;\n          }\n          return false;\n        }\n      };\n      var dumpRng = function (r) {\n        return 'startContainer: ' + r.startContainer.nodeName + ', startOffset: ' + r.startOffset + ', endContainer: ' + r.endContainer.nodeName + ', endOffset: ' + r.endOffset;\n      };\n      var self = {\n        doc: doc,\n        settings: settings,\n        win: win,\n        files: files,\n        stdMode: stdMode,\n        boxModel: boxModel,\n        styleSheetLoader: styleSheetLoader,\n        boundEvents: boundEvents,\n        styles: styles,\n        schema: schema,\n        events: events,\n        isBlock: isBlock,\n        $: $,\n        $$: $$,\n        root: null,\n        clone: clone,\n        getRoot: getRoot,\n        getViewPort: getViewPort,\n        getRect: getRect,\n        getSize: getSize,\n        getParent: getParent,\n        getParents: getParents,\n        get: get,\n        getNext: getNext,\n        getPrev: getPrev,\n        select: select,\n        is: is,\n        add: add,\n        create: create,\n        createHTML: createHTML,\n        createFragment: createFragment,\n        remove: remove,\n        setStyle: setStyle,\n        getStyle: getStyle,\n        setStyles: setStyles,\n        removeAllAttribs: removeAllAttribs,\n        setAttrib: setAttrib,\n        setAttribs: setAttribs,\n        getAttrib: getAttrib,\n        getPos: getPos$1,\n        parseStyle: parseStyle,\n        serializeStyle: serializeStyle,\n        addStyle: addStyle,\n        loadCSS: loadCSS,\n        addClass: addClass,\n        removeClass: removeClass,\n        hasClass: hasClass,\n        toggleClass: toggleClass,\n        show: show,\n        hide: hide,\n        isHidden: isHidden,\n        uniqueId: uniqueId,\n        setHTML: setHTML,\n        getOuterHTML: getOuterHTML,\n        setOuterHTML: setOuterHTML,\n        decode: decode,\n        encode: encode,\n        insertAfter: insertAfter,\n        replace: replace,\n        rename: rename,\n        findCommonAncestor: findCommonAncestor,\n        toHex: toHex,\n        run: run,\n        getAttribs: getAttribs,\n        isEmpty: isEmpty,\n        createRng: createRng,\n        nodeIndex: findNodeIndex,\n        split: split,\n        bind: bind,\n        unbind: unbind,\n        fire: fire,\n        getContentEditable: getContentEditable,\n        getContentEditableParent: getContentEditableParent,\n        destroy: destroy,\n        isChildOf: isChildOf,\n        dumpRng: dumpRng\n      };\n      var attrHooks = setupAttrHooks(styles, settings, constant(self));\n      return self;\n    };\n    DOMUtils.DOM = DOMUtils(document);\n    DOMUtils.nodeIndex = findNodeIndex;\n\n    var DOM$a = DOMUtils.DOM;\n    var each$e = Tools.each, grep = Tools.grep;\n    var QUEUED = 0;\n    var LOADING = 1;\n    var LOADED = 2;\n    var FAILED = 3;\n    var ScriptLoader = function () {\n      function ScriptLoader(settings) {\n        if (settings === void 0) {\n          settings = {};\n        }\n        this.states = {};\n        this.queue = [];\n        this.scriptLoadedCallbacks = {};\n        this.queueLoadedCallbacks = [];\n        this.loading = 0;\n        this.settings = settings;\n      }\n      ScriptLoader.prototype._setReferrerPolicy = function (referrerPolicy) {\n        this.settings.referrerPolicy = referrerPolicy;\n      };\n      ScriptLoader.prototype.loadScript = function (url, success, failure) {\n        var dom = DOM$a;\n        var elm;\n        var cleanup = function () {\n          dom.remove(id);\n          if (elm) {\n            elm.onerror = elm.onload = elm = null;\n          }\n        };\n        var done = function () {\n          cleanup();\n          success();\n        };\n        var error = function () {\n          cleanup();\n          if (isFunction(failure)) {\n            failure();\n          } else {\n            if (typeof console !== 'undefined' && console.log) {\n              console.log('Failed to load script: ' + url);\n            }\n          }\n        };\n        var id = dom.uniqueId();\n        elm = document.createElement('script');\n        elm.id = id;\n        elm.type = 'text/javascript';\n        elm.src = Tools._addCacheSuffix(url);\n        if (this.settings.referrerPolicy) {\n          dom.setAttrib(elm, 'referrerpolicy', this.settings.referrerPolicy);\n        }\n        elm.onload = done;\n        elm.onerror = error;\n        (document.getElementsByTagName('head')[0] || document.body).appendChild(elm);\n      };\n      ScriptLoader.prototype.isDone = function (url) {\n        return this.states[url] === LOADED;\n      };\n      ScriptLoader.prototype.markDone = function (url) {\n        this.states[url] = LOADED;\n      };\n      ScriptLoader.prototype.add = function (url, success, scope, failure) {\n        var state = this.states[url];\n        this.queue.push(url);\n        if (state === undefined) {\n          this.states[url] = QUEUED;\n        }\n        if (success) {\n          if (!this.scriptLoadedCallbacks[url]) {\n            this.scriptLoadedCallbacks[url] = [];\n          }\n          this.scriptLoadedCallbacks[url].push({\n            success: success,\n            failure: failure,\n            scope: scope || this\n          });\n        }\n      };\n      ScriptLoader.prototype.load = function (url, success, scope, failure) {\n        return this.add(url, success, scope, failure);\n      };\n      ScriptLoader.prototype.remove = function (url) {\n        delete this.states[url];\n        delete this.scriptLoadedCallbacks[url];\n      };\n      ScriptLoader.prototype.loadQueue = function (success, scope, failure) {\n        this.loadScripts(this.queue, success, scope, failure);\n      };\n      ScriptLoader.prototype.loadScripts = function (scripts, success, scope, failure) {\n        var self = this;\n        var failures = [];\n        var execCallbacks = function (name, url) {\n          each$e(self.scriptLoadedCallbacks[url], function (callback) {\n            if (isFunction(callback[name])) {\n              callback[name].call(callback.scope);\n            }\n          });\n          self.scriptLoadedCallbacks[url] = undefined;\n        };\n        self.queueLoadedCallbacks.push({\n          success: success,\n          failure: failure,\n          scope: scope || this\n        });\n        var loadScripts = function () {\n          var loadingScripts = grep(scripts);\n          scripts.length = 0;\n          each$e(loadingScripts, function (url) {\n            if (self.states[url] === LOADED) {\n              execCallbacks('success', url);\n              return;\n            }\n            if (self.states[url] === FAILED) {\n              execCallbacks('failure', url);\n              return;\n            }\n            if (self.states[url] !== LOADING) {\n              self.states[url] = LOADING;\n              self.loading++;\n              self.loadScript(url, function () {\n                self.states[url] = LOADED;\n                self.loading--;\n                execCallbacks('success', url);\n                loadScripts();\n              }, function () {\n                self.states[url] = FAILED;\n                self.loading--;\n                failures.push(url);\n                execCallbacks('failure', url);\n                loadScripts();\n              });\n            }\n          });\n          if (!self.loading) {\n            var notifyCallbacks = self.queueLoadedCallbacks.slice(0);\n            self.queueLoadedCallbacks.length = 0;\n            each$e(notifyCallbacks, function (callback) {\n              if (failures.length === 0) {\n                if (isFunction(callback.success)) {\n                  callback.success.call(callback.scope);\n                }\n              } else {\n                if (isFunction(callback.failure)) {\n                  callback.failure.call(callback.scope, failures);\n                }\n              }\n            });\n          }\n        };\n        loadScripts();\n      };\n      ScriptLoader.ScriptLoader = new ScriptLoader();\n      return ScriptLoader;\n    }();\n\n    var Cell = function (initial) {\n      var value = initial;\n      var get = function () {\n        return value;\n      };\n      var set = function (v) {\n        value = v;\n      };\n      return {\n        get: get,\n        set: set\n      };\n    };\n\n    var isRaw = function (str) {\n      return isObject(str) && has$2(str, 'raw');\n    };\n    var isTokenised = function (str) {\n      return isArray$1(str) && str.length > 1;\n    };\n    var data = {};\n    var currentCode = Cell('en');\n    var getLanguageData = function () {\n      return get$9(data, currentCode.get());\n    };\n    var getData = function () {\n      return map$2(data, function (value) {\n        return __assign({}, value);\n      });\n    };\n    var setCode = function (newCode) {\n      if (newCode) {\n        currentCode.set(newCode);\n      }\n    };\n    var getCode = function () {\n      return currentCode.get();\n    };\n    var add$4 = function (code, items) {\n      var langData = data[code];\n      if (!langData) {\n        data[code] = langData = {};\n      }\n      each$j(items, function (translation, name) {\n        langData[name.toLowerCase()] = translation;\n      });\n    };\n    var translate = function (text) {\n      var langData = getLanguageData().getOr({});\n      var toString = function (obj) {\n        if (isFunction(obj)) {\n          return Object.prototype.toString.call(obj);\n        }\n        return !isEmpty(obj) ? '' + obj : '';\n      };\n      var isEmpty = function (text) {\n        return text === '' || text === null || text === undefined;\n      };\n      var getLangData = function (text) {\n        var textstr = toString(text);\n        return get$9(langData, textstr.toLowerCase()).map(toString).getOr(textstr);\n      };\n      var removeContext = function (str) {\n        return str.replace(/{context:\\w+}$/, '');\n      };\n      if (isEmpty(text)) {\n        return '';\n      }\n      if (isRaw(text)) {\n        return toString(text.raw);\n      }\n      if (isTokenised(text)) {\n        var values_1 = text.slice(1);\n        var substitued = getLangData(text[0]).replace(/\\{([0-9]+)\\}/g, function ($1, $2) {\n          return has$2(values_1, $2) ? toString(values_1[$2]) : $1;\n        });\n        return removeContext(substitued);\n      }\n      return removeContext(getLangData(text));\n    };\n    var isRtl$1 = function () {\n      return getLanguageData().bind(function (items) {\n        return get$9(items, '_dir');\n      }).exists(function (dir) {\n        return dir === 'rtl';\n      });\n    };\n    var hasCode = function (code) {\n      return has$2(data, code);\n    };\n    var I18n = {\n      getData: getData,\n      setCode: setCode,\n      getCode: getCode,\n      add: add$4,\n      translate: translate,\n      isRtl: isRtl$1,\n      hasCode: hasCode\n    };\n\n    var AddOnManager = function () {\n      var items = [];\n      var urls = {};\n      var lookup = {};\n      var _listeners = [];\n      var runListeners = function (name, state) {\n        var matchedListeners = filter$4(_listeners, function (listener) {\n          return listener.name === name && listener.state === state;\n        });\n        each$k(matchedListeners, function (listener) {\n          return listener.callback();\n        });\n      };\n      var get = function (name) {\n        if (lookup[name]) {\n          return lookup[name].instance;\n        }\n        return undefined;\n      };\n      var dependencies = function (name) {\n        var result;\n        if (lookup[name]) {\n          result = lookup[name].dependencies;\n        }\n        return result || [];\n      };\n      var requireLangPack = function (name, languages) {\n        if (AddOnManager.languageLoad !== false) {\n          waitFor(name, function () {\n            var language = I18n.getCode();\n            var wrappedLanguages = ',' + (languages || '') + ',';\n            if (!language || languages && wrappedLanguages.indexOf(',' + language + ',') === -1) {\n              return;\n            }\n            ScriptLoader.ScriptLoader.add(urls[name] + '/langs/' + language + '.js');\n          }, 'loaded');\n        }\n      };\n      var add = function (id, addOn, dependencies) {\n        var addOnConstructor = addOn;\n        items.push(addOnConstructor);\n        lookup[id] = {\n          instance: addOnConstructor,\n          dependencies: dependencies\n        };\n        runListeners(id, 'added');\n        return addOnConstructor;\n      };\n      var remove = function (name) {\n        delete urls[name];\n        delete lookup[name];\n      };\n      var createUrl = function (baseUrl, dep) {\n        if (typeof dep === 'object') {\n          return dep;\n        }\n        return typeof baseUrl === 'string' ? {\n          prefix: '',\n          resource: dep,\n          suffix: ''\n        } : {\n          prefix: baseUrl.prefix,\n          resource: dep,\n          suffix: baseUrl.suffix\n        };\n      };\n      var addComponents = function (pluginName, scripts) {\n        var pluginUrl = urls[pluginName];\n        each$k(scripts, function (script) {\n          ScriptLoader.ScriptLoader.add(pluginUrl + '/' + script);\n        });\n      };\n      var loadDependencies = function (name, addOnUrl, success, scope) {\n        var deps = dependencies(name);\n        each$k(deps, function (dep) {\n          var newUrl = createUrl(addOnUrl, dep);\n          load(newUrl.resource, newUrl, undefined, undefined);\n        });\n        if (success) {\n          if (scope) {\n            success.call(scope);\n          } else {\n            success.call(ScriptLoader);\n          }\n        }\n      };\n      var load = function (name, addOnUrl, success, scope, failure) {\n        if (urls[name]) {\n          return;\n        }\n        var urlString = typeof addOnUrl === 'string' ? addOnUrl : addOnUrl.prefix + addOnUrl.resource + addOnUrl.suffix;\n        if (urlString.indexOf('/') !== 0 && urlString.indexOf('://') === -1) {\n          urlString = AddOnManager.baseURL + '/' + urlString;\n        }\n        urls[name] = urlString.substring(0, urlString.lastIndexOf('/'));\n        var done = function () {\n          runListeners(name, 'loaded');\n          loadDependencies(name, addOnUrl, success, scope);\n        };\n        if (lookup[name]) {\n          done();\n        } else {\n          ScriptLoader.ScriptLoader.add(urlString, done, scope, failure);\n        }\n      };\n      var waitFor = function (name, callback, state) {\n        if (state === void 0) {\n          state = 'added';\n        }\n        if (has$2(lookup, name) && state === 'added') {\n          callback();\n        } else if (has$2(urls, name) && state === 'loaded') {\n          callback();\n        } else {\n          _listeners.push({\n            name: name,\n            state: state,\n            callback: callback\n          });\n        }\n      };\n      return {\n        items: items,\n        urls: urls,\n        lookup: lookup,\n        _listeners: _listeners,\n        get: get,\n        dependencies: dependencies,\n        requireLangPack: requireLangPack,\n        add: add,\n        remove: remove,\n        createUrl: createUrl,\n        addComponents: addComponents,\n        load: load,\n        waitFor: waitFor\n      };\n    };\n    AddOnManager.languageLoad = true;\n    AddOnManager.baseURL = '';\n    AddOnManager.PluginManager = AddOnManager();\n    AddOnManager.ThemeManager = AddOnManager();\n\n    var singleton = function (doRevoke) {\n      var subject = Cell(Optional.none());\n      var revoke = function () {\n        return subject.get().each(doRevoke);\n      };\n      var clear = function () {\n        revoke();\n        subject.set(Optional.none());\n      };\n      var isSet = function () {\n        return subject.get().isSome();\n      };\n      var get = function () {\n        return subject.get();\n      };\n      var set = function (s) {\n        revoke();\n        subject.set(Optional.some(s));\n      };\n      return {\n        clear: clear,\n        isSet: isSet,\n        get: get,\n        set: set\n      };\n    };\n    var value = function () {\n      var subject = singleton(noop);\n      var on = function (f) {\n        return subject.get().each(f);\n      };\n      return __assign(__assign({}, subject), { on: on });\n    };\n\n    var first = function (fn, rate) {\n      var timer = null;\n      var cancel = function () {\n        if (!isNull(timer)) {\n          clearTimeout(timer);\n          timer = null;\n        }\n      };\n      var throttle = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        if (isNull(timer)) {\n          timer = setTimeout(function () {\n            timer = null;\n            fn.apply(null, args);\n          }, rate);\n        }\n      };\n      return {\n        cancel: cancel,\n        throttle: throttle\n      };\n    };\n    var last = function (fn, rate) {\n      var timer = null;\n      var cancel = function () {\n        if (!isNull(timer)) {\n          clearTimeout(timer);\n          timer = null;\n        }\n      };\n      var throttle = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        cancel();\n        timer = setTimeout(function () {\n          timer = null;\n          fn.apply(null, args);\n        }, rate);\n      };\n      return {\n        cancel: cancel,\n        throttle: throttle\n      };\n    };\n\n    var read$4 = function (element, attr) {\n      var value = get$6(element, attr);\n      return value === undefined || value === '' ? [] : value.split(' ');\n    };\n    var add$3 = function (element, attr, id) {\n      var old = read$4(element, attr);\n      var nu = old.concat([id]);\n      set$1(element, attr, nu.join(' '));\n      return true;\n    };\n    var remove$5 = function (element, attr, id) {\n      var nu = filter$4(read$4(element, attr), function (v) {\n        return v !== id;\n      });\n      if (nu.length > 0) {\n        set$1(element, attr, nu.join(' '));\n      } else {\n        remove$6(element, attr);\n      }\n      return false;\n    };\n\n    var supports = function (element) {\n      return element.dom.classList !== undefined;\n    };\n    var get$4 = function (element) {\n      return read$4(element, 'class');\n    };\n    var add$2 = function (element, clazz) {\n      return add$3(element, 'class', clazz);\n    };\n    var remove$4 = function (element, clazz) {\n      return remove$5(element, 'class', clazz);\n    };\n\n    var add$1 = function (element, clazz) {\n      if (supports(element)) {\n        element.dom.classList.add(clazz);\n      } else {\n        add$2(element, clazz);\n      }\n    };\n    var cleanClass = function (element) {\n      var classList = supports(element) ? element.dom.classList : get$4(element);\n      if (classList.length === 0) {\n        remove$6(element, 'class');\n      }\n    };\n    var remove$3 = function (element, clazz) {\n      if (supports(element)) {\n        var classList = element.dom.classList;\n        classList.remove(clazz);\n      } else {\n        remove$4(element, clazz);\n      }\n      cleanClass(element);\n    };\n    var has = function (element, clazz) {\n      return supports(element) && element.dom.classList.contains(clazz);\n    };\n\n    var descendants$1 = function (scope, predicate) {\n      var result = [];\n      each$k(children(scope), function (x) {\n        if (predicate(x)) {\n          result = result.concat([x]);\n        }\n        result = result.concat(descendants$1(x, predicate));\n      });\n      return result;\n    };\n\n    var descendants = function (scope, selector) {\n      return all(selector, scope);\n    };\n\n    var annotation = constant('mce-annotation');\n    var dataAnnotation = constant('data-mce-annotation');\n    var dataAnnotationId = constant('data-mce-annotation-uid');\n\n    var identify = function (editor, annotationName) {\n      var rng = editor.selection.getRng();\n      var start = SugarElement.fromDom(rng.startContainer);\n      var root = SugarElement.fromDom(editor.getBody());\n      var selector = annotationName.fold(function () {\n        return '.' + annotation();\n      }, function (an) {\n        return '[' + dataAnnotation() + '=\"' + an + '\"]';\n      });\n      var newStart = child$1(start, rng.startOffset).getOr(start);\n      var closest = closest$2(newStart, selector, function (n) {\n        return eq(n, root);\n      });\n      var getAttr = function (c, property) {\n        if (has$1(c, property)) {\n          return Optional.some(get$6(c, property));\n        } else {\n          return Optional.none();\n        }\n      };\n      return closest.bind(function (c) {\n        return getAttr(c, '' + dataAnnotationId()).bind(function (uid) {\n          return getAttr(c, '' + dataAnnotation()).map(function (name) {\n            var elements = findMarkers(editor, uid);\n            return {\n              uid: uid,\n              name: name,\n              elements: elements\n            };\n          });\n        });\n      });\n    };\n    var isAnnotation = function (elem) {\n      return isElement$6(elem) && has(elem, annotation());\n    };\n    var findMarkers = function (editor, uid) {\n      var body = SugarElement.fromDom(editor.getBody());\n      return descendants(body, '[' + dataAnnotationId() + '=\"' + uid + '\"]');\n    };\n    var findAll = function (editor, name) {\n      var body = SugarElement.fromDom(editor.getBody());\n      var markers = descendants(body, '[' + dataAnnotation() + '=\"' + name + '\"]');\n      var directory = {};\n      each$k(markers, function (m) {\n        var uid = get$6(m, dataAnnotationId());\n        var nodesAlready = get$9(directory, uid).getOr([]);\n        directory[uid] = nodesAlready.concat([m]);\n      });\n      return directory;\n    };\n\n    var setup$n = function (editor, _registry) {\n      var changeCallbacks = Cell({});\n      var initData = function () {\n        return {\n          listeners: [],\n          previous: value()\n        };\n      };\n      var withCallbacks = function (name, f) {\n        updateCallbacks(name, function (data) {\n          f(data);\n          return data;\n        });\n      };\n      var updateCallbacks = function (name, f) {\n        var callbackMap = changeCallbacks.get();\n        var data = get$9(callbackMap, name).getOrThunk(initData);\n        var outputData = f(data);\n        callbackMap[name] = outputData;\n        changeCallbacks.set(callbackMap);\n      };\n      var fireCallbacks = function (name, uid, elements) {\n        withCallbacks(name, function (data) {\n          each$k(data.listeners, function (f) {\n            return f(true, name, {\n              uid: uid,\n              nodes: map$3(elements, function (elem) {\n                return elem.dom;\n              })\n            });\n          });\n        });\n      };\n      var fireNoAnnotation = function (name) {\n        withCallbacks(name, function (data) {\n          each$k(data.listeners, function (f) {\n            return f(false, name);\n          });\n        });\n      };\n      var onNodeChange = last(function () {\n        var callbackMap = changeCallbacks.get();\n        var annotations = sort(keys(callbackMap));\n        each$k(annotations, function (name) {\n          updateCallbacks(name, function (data) {\n            var prev = data.previous.get();\n            identify(editor, Optional.some(name)).fold(function () {\n              if (prev.isSome()) {\n                fireNoAnnotation(name);\n                data.previous.clear();\n              }\n            }, function (_a) {\n              var uid = _a.uid, name = _a.name, elements = _a.elements;\n              if (!is$1(prev, uid)) {\n                fireCallbacks(name, uid, elements);\n                data.previous.set(uid);\n              }\n            });\n            return {\n              previous: data.previous,\n              listeners: data.listeners\n            };\n          });\n        });\n      }, 30);\n      editor.on('remove', function () {\n        onNodeChange.cancel();\n      });\n      editor.on('NodeChange', function () {\n        onNodeChange.throttle();\n      });\n      var addListener = function (name, f) {\n        updateCallbacks(name, function (data) {\n          return {\n            previous: data.previous,\n            listeners: data.listeners.concat([f])\n          };\n        });\n      };\n      return { addListener: addListener };\n    };\n\n    var setup$m = function (editor, registry) {\n      var identifyParserNode = function (span) {\n        return Optional.from(span.attr(dataAnnotation())).bind(registry.lookup);\n      };\n      editor.on('init', function () {\n        editor.serializer.addNodeFilter('span', function (spans) {\n          each$k(spans, function (span) {\n            identifyParserNode(span).each(function (settings) {\n              if (settings.persistent === false) {\n                span.unwrap();\n              }\n            });\n          });\n        });\n      });\n    };\n\n    var create$7 = function () {\n      var annotations = {};\n      var register = function (name, settings) {\n        annotations[name] = {\n          name: name,\n          settings: settings\n        };\n      };\n      var lookup = function (name) {\n        return get$9(annotations, name).map(function (a) {\n          return a.settings;\n        });\n      };\n      return {\n        register: register,\n        lookup: lookup\n      };\n    };\n\n    var unique = 0;\n    var generate = function (prefix) {\n      var date = new Date();\n      var time = date.getTime();\n      var random = Math.floor(Math.random() * 1000000000);\n      unique++;\n      return prefix + '_' + random + unique + String(time);\n    };\n\n    var add = function (element, classes) {\n      each$k(classes, function (x) {\n        add$1(element, x);\n      });\n    };\n\n    var fromHtml = function (html, scope) {\n      var doc = scope || document;\n      var div = doc.createElement('div');\n      div.innerHTML = html;\n      return children(SugarElement.fromDom(div));\n    };\n    var fromDom$1 = function (nodes) {\n      return map$3(nodes, SugarElement.fromDom);\n    };\n\n    var get$3 = function (element) {\n      return element.dom.innerHTML;\n    };\n    var set = function (element, content) {\n      var owner = owner$1(element);\n      var docDom = owner.dom;\n      var fragment = SugarElement.fromDom(docDom.createDocumentFragment());\n      var contentElements = fromHtml(content, docDom);\n      append(fragment, contentElements);\n      empty(element);\n      append$1(element, fragment);\n    };\n\n    var clone$1 = function (original, isDeep) {\n      return SugarElement.fromDom(original.dom.cloneNode(isDeep));\n    };\n    var shallow = function (original) {\n      return clone$1(original, false);\n    };\n    var deep$1 = function (original) {\n      return clone$1(original, true);\n    };\n\n    var TextWalker = function (startNode, rootNode, isBoundary) {\n      if (isBoundary === void 0) {\n        isBoundary = never;\n      }\n      var walker = new DomTreeWalker(startNode, rootNode);\n      var walk = function (direction) {\n        var next;\n        do {\n          next = walker[direction]();\n        } while (next && !isText$7(next) && !isBoundary(next));\n        return Optional.from(next).filter(isText$7);\n      };\n      return {\n        current: function () {\n          return Optional.from(walker.current()).filter(isText$7);\n        },\n        next: function () {\n          return walk('next');\n        },\n        prev: function () {\n          return walk('prev');\n        },\n        prev2: function () {\n          return walk('prev2');\n        }\n      };\n    };\n\n    var TextSeeker = function (dom, isBoundary) {\n      var isBlockBoundary = isBoundary ? isBoundary : function (node) {\n        return dom.isBlock(node) || isBr$5(node) || isContentEditableFalse$b(node);\n      };\n      var walk = function (node, offset, walker, process) {\n        if (isText$7(node)) {\n          var newOffset = process(node, offset, node.data);\n          if (newOffset !== -1) {\n            return Optional.some({\n              container: node,\n              offset: newOffset\n            });\n          }\n        }\n        return walker().bind(function (next) {\n          return walk(next.container, next.offset, walker, process);\n        });\n      };\n      var backwards = function (node, offset, process, root) {\n        var walker = TextWalker(node, root, isBlockBoundary);\n        return walk(node, offset, function () {\n          return walker.prev().map(function (prev) {\n            return {\n              container: prev,\n              offset: prev.length\n            };\n          });\n        }, process).getOrNull();\n      };\n      var forwards = function (node, offset, process, root) {\n        var walker = TextWalker(node, root, isBlockBoundary);\n        return walk(node, offset, function () {\n          return walker.next().map(function (next) {\n            return {\n              container: next,\n              offset: 0\n            };\n          });\n        }, process).getOrNull();\n      };\n      return {\n        backwards: backwards,\n        forwards: forwards\n      };\n    };\n\n    var round$2 = Math.round;\n    var clone = function (rect) {\n      if (!rect) {\n        return {\n          left: 0,\n          top: 0,\n          bottom: 0,\n          right: 0,\n          width: 0,\n          height: 0\n        };\n      }\n      return {\n        left: round$2(rect.left),\n        top: round$2(rect.top),\n        bottom: round$2(rect.bottom),\n        right: round$2(rect.right),\n        width: round$2(rect.width),\n        height: round$2(rect.height)\n      };\n    };\n    var collapse = function (rect, toStart) {\n      rect = clone(rect);\n      if (toStart) {\n        rect.right = rect.left;\n      } else {\n        rect.left = rect.left + rect.width;\n        rect.right = rect.left;\n      }\n      rect.width = 0;\n      return rect;\n    };\n    var isEqual = function (rect1, rect2) {\n      return rect1.left === rect2.left && rect1.top === rect2.top && rect1.bottom === rect2.bottom && rect1.right === rect2.right;\n    };\n    var isValidOverflow = function (overflowY, rect1, rect2) {\n      return overflowY >= 0 && overflowY <= Math.min(rect1.height, rect2.height) / 2;\n    };\n    var isAbove$1 = function (rect1, rect2) {\n      var halfHeight = Math.min(rect2.height / 2, rect1.height / 2);\n      if (rect1.bottom - halfHeight < rect2.top) {\n        return true;\n      }\n      if (rect1.top > rect2.bottom) {\n        return false;\n      }\n      return isValidOverflow(rect2.top - rect1.bottom, rect1, rect2);\n    };\n    var isBelow$1 = function (rect1, rect2) {\n      if (rect1.top > rect2.bottom) {\n        return true;\n      }\n      if (rect1.bottom < rect2.top) {\n        return false;\n      }\n      return isValidOverflow(rect2.bottom - rect1.top, rect1, rect2);\n    };\n    var containsXY = function (rect, clientX, clientY) {\n      return clientX >= rect.left && clientX <= rect.right && clientY >= rect.top && clientY <= rect.bottom;\n    };\n\n    var clamp$2 = function (value, min, max) {\n      return Math.min(Math.max(value, min), max);\n    };\n\n    var getSelectedNode = function (range) {\n      var startContainer = range.startContainer, startOffset = range.startOffset;\n      if (startContainer.hasChildNodes() && range.endOffset === startOffset + 1) {\n        return startContainer.childNodes[startOffset];\n      }\n      return null;\n    };\n    var getNode$1 = function (container, offset) {\n      if (isElement$5(container) && container.hasChildNodes()) {\n        var childNodes = container.childNodes;\n        var safeOffset = clamp$2(offset, 0, childNodes.length - 1);\n        return childNodes[safeOffset];\n      } else {\n        return container;\n      }\n    };\n    var getNodeUnsafe = function (container, offset) {\n      if (offset < 0 && isElement$5(container) && container.hasChildNodes()) {\n        return undefined;\n      } else {\n        return getNode$1(container, offset);\n      }\n    };\n\n    var extendingChars = new RegExp('[\\u0300-\\u036f\\u0483-\\u0487\\u0488-\\u0489\\u0591-\\u05bd\\u05bf\\u05c1-\\u05c2\\u05c4-\\u05c5\\u05c7\\u0610-\\u061a' + '\\u064b-\\u065f\\u0670\\u06d6-\\u06dc\\u06df-\\u06e4\\u06e7-\\u06e8\\u06ea-\\u06ed\\u0711\\u0730-\\u074a\\u07a6-\\u07b0' + '\\u07eb-\\u07f3\\u0816-\\u0819\\u081b-\\u0823\\u0825-\\u0827\\u0829-\\u082d\\u0859-\\u085b\\u08e3-\\u0902\\u093a\\u093c' + '\\u0941-\\u0948\\u094d\\u0951-\\u0957\\u0962-\\u0963\\u0981\\u09bc\\u09be\\u09c1-\\u09c4\\u09cd\\u09d7\\u09e2-\\u09e3' + '\\u0a01-\\u0a02\\u0a3c\\u0a41-\\u0a42\\u0a47-\\u0a48\\u0a4b-\\u0a4d\\u0a51\\u0a70-\\u0a71\\u0a75\\u0a81-\\u0a82\\u0abc' + '\\u0ac1-\\u0ac5\\u0ac7-\\u0ac8\\u0acd\\u0ae2-\\u0ae3\\u0b01\\u0b3c\\u0b3e\\u0b3f\\u0b41-\\u0b44\\u0b4d\\u0b56\\u0b57' + '\\u0b62-\\u0b63\\u0b82\\u0bbe\\u0bc0\\u0bcd\\u0bd7\\u0c00\\u0c3e-\\u0c40\\u0c46-\\u0c48\\u0c4a-\\u0c4d\\u0c55-\\u0c56' + '\\u0c62-\\u0c63\\u0c81\\u0cbc\\u0cbf\\u0cc2\\u0cc6\\u0ccc-\\u0ccd\\u0cd5-\\u0cd6\\u0ce2-\\u0ce3\\u0d01\\u0d3e\\u0d41-\\u0d44' + '\\u0d4d\\u0d57\\u0d62-\\u0d63\\u0dca\\u0dcf\\u0dd2-\\u0dd4\\u0dd6\\u0ddf\\u0e31\\u0e34-\\u0e3a\\u0e47-\\u0e4e\\u0eb1\\u0eb4-\\u0eb9' + '\\u0ebb-\\u0ebc\\u0ec8-\\u0ecd\\u0f18-\\u0f19\\u0f35\\u0f37\\u0f39\\u0f71-\\u0f7e\\u0f80-\\u0f84\\u0f86-\\u0f87\\u0f8d-\\u0f97' + '\\u0f99-\\u0fbc\\u0fc6\\u102d-\\u1030\\u1032-\\u1037\\u1039-\\u103a\\u103d-\\u103e\\u1058-\\u1059\\u105e-\\u1060\\u1071-\\u1074' + '\\u1082\\u1085-\\u1086\\u108d\\u109d\\u135d-\\u135f\\u1712-\\u1714\\u1732-\\u1734\\u1752-\\u1753\\u1772-\\u1773\\u17b4-\\u17b5' + '\\u17b7-\\u17bd\\u17c6\\u17c9-\\u17d3\\u17dd\\u180b-\\u180d\\u18a9\\u1920-\\u1922\\u1927-\\u1928\\u1932\\u1939-\\u193b\\u1a17-\\u1a18' + '\\u1a1b\\u1a56\\u1a58-\\u1a5e\\u1a60\\u1a62\\u1a65-\\u1a6c\\u1a73-\\u1a7c\\u1a7f\\u1ab0-\\u1abd\\u1ABE\\u1b00-\\u1b03\\u1b34' + '\\u1b36-\\u1b3a\\u1b3c\\u1b42\\u1b6b-\\u1b73\\u1b80-\\u1b81\\u1ba2-\\u1ba5\\u1ba8-\\u1ba9\\u1bab-\\u1bad\\u1be6\\u1be8-\\u1be9' + '\\u1bed\\u1bef-\\u1bf1\\u1c2c-\\u1c33\\u1c36-\\u1c37\\u1cd0-\\u1cd2\\u1cd4-\\u1ce0\\u1ce2-\\u1ce8\\u1ced\\u1cf4\\u1cf8-\\u1cf9' + '\\u1dc0-\\u1df5\\u1dfc-\\u1dff\\u200c-\\u200d\\u20d0-\\u20dc\\u20DD-\\u20E0\\u20e1\\u20E2-\\u20E4\\u20e5-\\u20f0\\u2cef-\\u2cf1' + '\\u2d7f\\u2de0-\\u2dff\\u302a-\\u302d\\u302e-\\u302f\\u3099-\\u309a\\ua66f\\uA670-\\uA672\\ua674-\\ua67d\\ua69e-\\ua69f\\ua6f0-\\ua6f1' + '\\ua802\\ua806\\ua80b\\ua825-\\ua826\\ua8c4\\ua8e0-\\ua8f1\\ua926-\\ua92d\\ua947-\\ua951\\ua980-\\ua982\\ua9b3\\ua9b6-\\ua9b9\\ua9bc' + '\\ua9e5\\uaa29-\\uaa2e\\uaa31-\\uaa32\\uaa35-\\uaa36\\uaa43\\uaa4c\\uaa7c\\uaab0\\uaab2-\\uaab4\\uaab7-\\uaab8\\uaabe-\\uaabf\\uaac1' + '\\uaaec-\\uaaed\\uaaf6\\uabe5\\uabe8\\uabed\\ufb1e\\ufe00-\\ufe0f\\ufe20-\\ufe2f\\uff9e-\\uff9f]');\n    var isExtendingChar = function (ch) {\n      return typeof ch === 'string' && ch.charCodeAt(0) >= 768 && extendingChars.test(ch);\n    };\n\n    var or = function () {\n      var args = [];\n      for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n      }\n      return function (x) {\n        for (var i = 0; i < args.length; i++) {\n          if (args[i](x)) {\n            return true;\n          }\n        }\n        return false;\n      };\n    };\n    var and = function () {\n      var args = [];\n      for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n      }\n      return function (x) {\n        for (var i = 0; i < args.length; i++) {\n          if (!args[i](x)) {\n            return false;\n          }\n        }\n        return true;\n      };\n    };\n\n    var isElement$3 = isElement$5;\n    var isCaretCandidate$2 = isCaretCandidate$3;\n    var isBlock$1 = matchStyleValues('display', 'block table');\n    var isFloated = matchStyleValues('float', 'left right');\n    var isValidElementCaretCandidate = and(isElement$3, isCaretCandidate$2, not(isFloated));\n    var isNotPre = not(matchStyleValues('white-space', 'pre pre-line pre-wrap'));\n    var isText$4 = isText$7;\n    var isBr$2 = isBr$5;\n    var nodeIndex$1 = DOMUtils.nodeIndex;\n    var resolveIndex$1 = getNodeUnsafe;\n    var createRange$1 = function (doc) {\n      return 'createRange' in doc ? doc.createRange() : DOMUtils.DOM.createRng();\n    };\n    var isWhiteSpace$1 = function (chr) {\n      return chr && /[\\r\\n\\t ]/.test(chr);\n    };\n    var isRange = function (rng) {\n      return !!rng.setStart && !!rng.setEnd;\n    };\n    var isHiddenWhiteSpaceRange = function (range) {\n      var container = range.startContainer;\n      var offset = range.startOffset;\n      if (isWhiteSpace$1(range.toString()) && isNotPre(container.parentNode) && isText$7(container)) {\n        var text = container.data;\n        if (isWhiteSpace$1(text[offset - 1]) || isWhiteSpace$1(text[offset + 1])) {\n          return true;\n        }\n      }\n      return false;\n    };\n    var getBrClientRect = function (brNode) {\n      var doc = brNode.ownerDocument;\n      var rng = createRange$1(doc);\n      var nbsp$1 = doc.createTextNode(nbsp);\n      var parentNode = brNode.parentNode;\n      parentNode.insertBefore(nbsp$1, brNode);\n      rng.setStart(nbsp$1, 0);\n      rng.setEnd(nbsp$1, 1);\n      var clientRect = clone(rng.getBoundingClientRect());\n      parentNode.removeChild(nbsp$1);\n      return clientRect;\n    };\n    var getBoundingClientRectWebKitText = function (rng) {\n      var sc = rng.startContainer;\n      var ec = rng.endContainer;\n      var so = rng.startOffset;\n      var eo = rng.endOffset;\n      if (sc === ec && isText$7(ec) && so === 0 && eo === 1) {\n        var newRng = rng.cloneRange();\n        newRng.setEndAfter(ec);\n        return getBoundingClientRect$1(newRng);\n      } else {\n        return null;\n      }\n    };\n    var isZeroRect = function (r) {\n      return r.left === 0 && r.right === 0 && r.top === 0 && r.bottom === 0;\n    };\n    var getBoundingClientRect$1 = function (item) {\n      var clientRect;\n      var clientRects = item.getClientRects();\n      if (clientRects.length > 0) {\n        clientRect = clone(clientRects[0]);\n      } else {\n        clientRect = clone(item.getBoundingClientRect());\n      }\n      if (!isRange(item) && isBr$2(item) && isZeroRect(clientRect)) {\n        return getBrClientRect(item);\n      }\n      if (isZeroRect(clientRect) && isRange(item)) {\n        return getBoundingClientRectWebKitText(item);\n      }\n      return clientRect;\n    };\n    var collapseAndInflateWidth = function (clientRect, toStart) {\n      var newClientRect = collapse(clientRect, toStart);\n      newClientRect.width = 1;\n      newClientRect.right = newClientRect.left + 1;\n      return newClientRect;\n    };\n    var getCaretPositionClientRects = function (caretPosition) {\n      var clientRects = [];\n      var addUniqueAndValidRect = function (clientRect) {\n        if (clientRect.height === 0) {\n          return;\n        }\n        if (clientRects.length > 0) {\n          if (isEqual(clientRect, clientRects[clientRects.length - 1])) {\n            return;\n          }\n        }\n        clientRects.push(clientRect);\n      };\n      var addCharacterOffset = function (container, offset) {\n        var range = createRange$1(container.ownerDocument);\n        if (offset < container.data.length) {\n          if (isExtendingChar(container.data[offset])) {\n            return clientRects;\n          }\n          if (isExtendingChar(container.data[offset - 1])) {\n            range.setStart(container, offset);\n            range.setEnd(container, offset + 1);\n            if (!isHiddenWhiteSpaceRange(range)) {\n              addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect$1(range), false));\n              return clientRects;\n            }\n          }\n        }\n        if (offset > 0) {\n          range.setStart(container, offset - 1);\n          range.setEnd(container, offset);\n          if (!isHiddenWhiteSpaceRange(range)) {\n            addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect$1(range), false));\n          }\n        }\n        if (offset < container.data.length) {\n          range.setStart(container, offset);\n          range.setEnd(container, offset + 1);\n          if (!isHiddenWhiteSpaceRange(range)) {\n            addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect$1(range), true));\n          }\n        }\n      };\n      var container = caretPosition.container();\n      var offset = caretPosition.offset();\n      if (isText$4(container)) {\n        addCharacterOffset(container, offset);\n        return clientRects;\n      }\n      if (isElement$3(container)) {\n        if (caretPosition.isAtEnd()) {\n          var node = resolveIndex$1(container, offset);\n          if (isText$4(node)) {\n            addCharacterOffset(node, node.data.length);\n          }\n          if (isValidElementCaretCandidate(node) && !isBr$2(node)) {\n            addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect$1(node), false));\n          }\n        } else {\n          var node = resolveIndex$1(container, offset);\n          if (isText$4(node)) {\n            addCharacterOffset(node, 0);\n          }\n          if (isValidElementCaretCandidate(node) && caretPosition.isAtEnd()) {\n            addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect$1(node), false));\n            return clientRects;\n          }\n          var beforeNode = resolveIndex$1(caretPosition.container(), caretPosition.offset() - 1);\n          if (isValidElementCaretCandidate(beforeNode) && !isBr$2(beforeNode)) {\n            if (isBlock$1(beforeNode) || isBlock$1(node) || !isValidElementCaretCandidate(node)) {\n              addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect$1(beforeNode), false));\n            }\n          }\n          if (isValidElementCaretCandidate(node)) {\n            addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect$1(node), true));\n          }\n        }\n      }\n      return clientRects;\n    };\n    var CaretPosition = function (container, offset, clientRects) {\n      var isAtStart = function () {\n        if (isText$4(container)) {\n          return offset === 0;\n        }\n        return offset === 0;\n      };\n      var isAtEnd = function () {\n        if (isText$4(container)) {\n          return offset >= container.data.length;\n        }\n        return offset >= container.childNodes.length;\n      };\n      var toRange = function () {\n        var range = createRange$1(container.ownerDocument);\n        range.setStart(container, offset);\n        range.setEnd(container, offset);\n        return range;\n      };\n      var getClientRects = function () {\n        if (!clientRects) {\n          clientRects = getCaretPositionClientRects(CaretPosition(container, offset));\n        }\n        return clientRects;\n      };\n      var isVisible = function () {\n        return getClientRects().length > 0;\n      };\n      var isEqual = function (caretPosition) {\n        return caretPosition && container === caretPosition.container() && offset === caretPosition.offset();\n      };\n      var getNode = function (before) {\n        return resolveIndex$1(container, before ? offset - 1 : offset);\n      };\n      return {\n        container: constant(container),\n        offset: constant(offset),\n        toRange: toRange,\n        getClientRects: getClientRects,\n        isVisible: isVisible,\n        isAtStart: isAtStart,\n        isAtEnd: isAtEnd,\n        isEqual: isEqual,\n        getNode: getNode\n      };\n    };\n    CaretPosition.fromRangeStart = function (range) {\n      return CaretPosition(range.startContainer, range.startOffset);\n    };\n    CaretPosition.fromRangeEnd = function (range) {\n      return CaretPosition(range.endContainer, range.endOffset);\n    };\n    CaretPosition.after = function (node) {\n      return CaretPosition(node.parentNode, nodeIndex$1(node) + 1);\n    };\n    CaretPosition.before = function (node) {\n      return CaretPosition(node.parentNode, nodeIndex$1(node));\n    };\n    CaretPosition.isAbove = function (pos1, pos2) {\n      return lift2(head(pos2.getClientRects()), last$2(pos1.getClientRects()), isAbove$1).getOr(false);\n    };\n    CaretPosition.isBelow = function (pos1, pos2) {\n      return lift2(last$2(pos2.getClientRects()), head(pos1.getClientRects()), isBelow$1).getOr(false);\n    };\n    CaretPosition.isAtStart = function (pos) {\n      return pos ? pos.isAtStart() : false;\n    };\n    CaretPosition.isAtEnd = function (pos) {\n      return pos ? pos.isAtEnd() : false;\n    };\n    CaretPosition.isTextPosition = function (pos) {\n      return pos ? isText$7(pos.container()) : false;\n    };\n    CaretPosition.isElementPosition = function (pos) {\n      return CaretPosition.isTextPosition(pos) === false;\n    };\n\n    var trimEmptyTextNode$1 = function (dom, node) {\n      if (isText$7(node) && node.data.length === 0) {\n        dom.remove(node);\n      }\n    };\n    var insertNode = function (dom, rng, node) {\n      rng.insertNode(node);\n      trimEmptyTextNode$1(dom, node.previousSibling);\n      trimEmptyTextNode$1(dom, node.nextSibling);\n    };\n    var insertFragment = function (dom, rng, frag) {\n      var firstChild = Optional.from(frag.firstChild);\n      var lastChild = Optional.from(frag.lastChild);\n      rng.insertNode(frag);\n      firstChild.each(function (child) {\n        return trimEmptyTextNode$1(dom, child.previousSibling);\n      });\n      lastChild.each(function (child) {\n        return trimEmptyTextNode$1(dom, child.nextSibling);\n      });\n    };\n    var rangeInsertNode = function (dom, rng, node) {\n      if (isDocumentFragment(node)) {\n        insertFragment(dom, rng, node);\n      } else {\n        insertNode(dom, rng, node);\n      }\n    };\n\n    var isText$3 = isText$7;\n    var isBogus = isBogus$2;\n    var nodeIndex = DOMUtils.nodeIndex;\n    var normalizedParent = function (node) {\n      var parentNode = node.parentNode;\n      if (isBogus(parentNode)) {\n        return normalizedParent(parentNode);\n      }\n      return parentNode;\n    };\n    var getChildNodes = function (node) {\n      if (!node) {\n        return [];\n      }\n      return reduce(node.childNodes, function (result, node) {\n        if (isBogus(node) && node.nodeName !== 'BR') {\n          result = result.concat(getChildNodes(node));\n        } else {\n          result.push(node);\n        }\n        return result;\n      }, []);\n    };\n    var normalizedTextOffset = function (node, offset) {\n      while (node = node.previousSibling) {\n        if (!isText$3(node)) {\n          break;\n        }\n        offset += node.data.length;\n      }\n      return offset;\n    };\n    var equal = function (a) {\n      return function (b) {\n        return a === b;\n      };\n    };\n    var normalizedNodeIndex = function (node) {\n      var nodes, index;\n      nodes = getChildNodes(normalizedParent(node));\n      index = findIndex$1(nodes, equal(node), node);\n      nodes = nodes.slice(0, index + 1);\n      var numTextFragments = reduce(nodes, function (result, node, i) {\n        if (isText$3(node) && isText$3(nodes[i - 1])) {\n          result++;\n        }\n        return result;\n      }, 0);\n      nodes = filter$2(nodes, matchNodeNames([node.nodeName]));\n      index = findIndex$1(nodes, equal(node), node);\n      return index - numTextFragments;\n    };\n    var createPathItem = function (node) {\n      var name;\n      if (isText$3(node)) {\n        name = 'text()';\n      } else {\n        name = node.nodeName.toLowerCase();\n      }\n      return name + '[' + normalizedNodeIndex(node) + ']';\n    };\n    var parentsUntil$1 = function (root, node, predicate) {\n      var parents = [];\n      for (node = node.parentNode; node !== root; node = node.parentNode) {\n        if (predicate && predicate(node)) {\n          break;\n        }\n        parents.push(node);\n      }\n      return parents;\n    };\n    var create$6 = function (root, caretPosition) {\n      var container, offset, path = [], outputOffset, childNodes, parents;\n      container = caretPosition.container();\n      offset = caretPosition.offset();\n      if (isText$3(container)) {\n        outputOffset = normalizedTextOffset(container, offset);\n      } else {\n        childNodes = container.childNodes;\n        if (offset >= childNodes.length) {\n          outputOffset = 'after';\n          offset = childNodes.length - 1;\n        } else {\n          outputOffset = 'before';\n        }\n        container = childNodes[offset];\n      }\n      path.push(createPathItem(container));\n      parents = parentsUntil$1(root, container);\n      parents = filter$2(parents, not(isBogus$2));\n      path = path.concat(map$1(parents, function (node) {\n        return createPathItem(node);\n      }));\n      return path.reverse().join('/') + ',' + outputOffset;\n    };\n    var resolvePathItem = function (node, name, index) {\n      var nodes = getChildNodes(node);\n      nodes = filter$2(nodes, function (node, index) {\n        return !isText$3(node) || !isText$3(nodes[index - 1]);\n      });\n      nodes = filter$2(nodes, matchNodeNames([name]));\n      return nodes[index];\n    };\n    var findTextPosition = function (container, offset) {\n      var node = container, targetOffset = 0, dataLen;\n      while (isText$3(node)) {\n        dataLen = node.data.length;\n        if (offset >= targetOffset && offset <= targetOffset + dataLen) {\n          container = node;\n          offset = offset - targetOffset;\n          break;\n        }\n        if (!isText$3(node.nextSibling)) {\n          container = node;\n          offset = dataLen;\n          break;\n        }\n        targetOffset += dataLen;\n        node = node.nextSibling;\n      }\n      if (isText$3(container) && offset > container.data.length) {\n        offset = container.data.length;\n      }\n      return CaretPosition(container, offset);\n    };\n    var resolve$2 = function (root, path) {\n      var offset;\n      if (!path) {\n        return null;\n      }\n      var parts = path.split(',');\n      var paths = parts[0].split('/');\n      offset = parts.length > 1 ? parts[1] : 'before';\n      var container = reduce(paths, function (result, value) {\n        var match = /([\\w\\-\\(\\)]+)\\[([0-9]+)\\]/.exec(value);\n        if (!match) {\n          return null;\n        }\n        if (match[1] === 'text()') {\n          match[1] = '#text';\n        }\n        return resolvePathItem(result, match[1], parseInt(match[2], 10));\n      }, root);\n      if (!container) {\n        return null;\n      }\n      if (!isText$3(container)) {\n        if (offset === 'after') {\n          offset = nodeIndex(container) + 1;\n        } else {\n          offset = nodeIndex(container);\n        }\n        return CaretPosition(container.parentNode, offset);\n      }\n      return findTextPosition(container, parseInt(offset, 10));\n    };\n\n    var isContentEditableFalse$9 = isContentEditableFalse$b;\n    var getNormalizedTextOffset = function (trim, container, offset) {\n      var node, trimmedOffset;\n      trimmedOffset = trim(container.data.slice(0, offset)).length;\n      for (node = container.previousSibling; node && isText$7(node); node = node.previousSibling) {\n        trimmedOffset += trim(node.data).length;\n      }\n      return trimmedOffset;\n    };\n    var getPoint = function (dom, trim, normalized, rng, start) {\n      var container = rng[start ? 'startContainer' : 'endContainer'];\n      var offset = rng[start ? 'startOffset' : 'endOffset'];\n      var point = [];\n      var childNodes, after = 0;\n      var root = dom.getRoot();\n      if (isText$7(container)) {\n        point.push(normalized ? getNormalizedTextOffset(trim, container, offset) : offset);\n      } else {\n        childNodes = container.childNodes;\n        if (offset >= childNodes.length && childNodes.length) {\n          after = 1;\n          offset = Math.max(0, childNodes.length - 1);\n        }\n        point.push(dom.nodeIndex(childNodes[offset], normalized) + after);\n      }\n      for (; container && container !== root; container = container.parentNode) {\n        point.push(dom.nodeIndex(container, normalized));\n      }\n      return point;\n    };\n    var getLocation = function (trim, selection, normalized, rng) {\n      var dom = selection.dom, bookmark = {};\n      bookmark.start = getPoint(dom, trim, normalized, rng, true);\n      if (!selection.isCollapsed()) {\n        bookmark.end = getPoint(dom, trim, normalized, rng, false);\n      }\n      if (isRangeInCaretContainerBlock(rng)) {\n        bookmark.isFakeCaret = true;\n      }\n      return bookmark;\n    };\n    var findIndex = function (dom, name, element) {\n      var count = 0;\n      Tools.each(dom.select(name), function (node) {\n        if (node.getAttribute('data-mce-bogus') === 'all') {\n          return;\n        }\n        if (node === element) {\n          return false;\n        }\n        count++;\n      });\n      return count;\n    };\n    var moveEndPoint$1 = function (rng, start) {\n      var container, offset, childNodes;\n      var prefix = start ? 'start' : 'end';\n      container = rng[prefix + 'Container'];\n      offset = rng[prefix + 'Offset'];\n      if (isElement$5(container) && container.nodeName === 'TR') {\n        childNodes = container.childNodes;\n        container = childNodes[Math.min(start ? offset : offset - 1, childNodes.length - 1)];\n        if (container) {\n          offset = start ? 0 : container.childNodes.length;\n          rng['set' + (start ? 'Start' : 'End')](container, offset);\n        }\n      }\n    };\n    var normalizeTableCellSelection = function (rng) {\n      moveEndPoint$1(rng, true);\n      moveEndPoint$1(rng, false);\n      return rng;\n    };\n    var findSibling = function (node, offset) {\n      var sibling;\n      if (isElement$5(node)) {\n        node = getNode$1(node, offset);\n        if (isContentEditableFalse$9(node)) {\n          return node;\n        }\n      }\n      if (isCaretContainer$2(node)) {\n        if (isText$7(node) && isCaretContainerBlock$1(node)) {\n          node = node.parentNode;\n        }\n        sibling = node.previousSibling;\n        if (isContentEditableFalse$9(sibling)) {\n          return sibling;\n        }\n        sibling = node.nextSibling;\n        if (isContentEditableFalse$9(sibling)) {\n          return sibling;\n        }\n      }\n    };\n    var findAdjacentContentEditableFalseElm = function (rng) {\n      return findSibling(rng.startContainer, rng.startOffset) || findSibling(rng.endContainer, rng.endOffset);\n    };\n    var getOffsetBookmark = function (trim, normalized, selection) {\n      var element = selection.getNode();\n      var name = element ? element.nodeName : null;\n      var rng = selection.getRng();\n      if (isContentEditableFalse$9(element) || name === 'IMG') {\n        return {\n          name: name,\n          index: findIndex(selection.dom, name, element)\n        };\n      }\n      var sibling = findAdjacentContentEditableFalseElm(rng);\n      if (sibling) {\n        name = sibling.tagName;\n        return {\n          name: name,\n          index: findIndex(selection.dom, name, sibling)\n        };\n      }\n      return getLocation(trim, selection, normalized, rng);\n    };\n    var getCaretBookmark = function (selection) {\n      var rng = selection.getRng();\n      return {\n        start: create$6(selection.dom.getRoot(), CaretPosition.fromRangeStart(rng)),\n        end: create$6(selection.dom.getRoot(), CaretPosition.fromRangeEnd(rng))\n      };\n    };\n    var getRangeBookmark = function (selection) {\n      return { rng: selection.getRng() };\n    };\n    var createBookmarkSpan = function (dom, id, filled) {\n      var args = {\n        'data-mce-type': 'bookmark',\n        id: id,\n        'style': 'overflow:hidden;line-height:0px'\n      };\n      return filled ? dom.create('span', args, '&#xFEFF;') : dom.create('span', args);\n    };\n    var getPersistentBookmark = function (selection, filled) {\n      var dom = selection.dom;\n      var rng = selection.getRng();\n      var id = dom.uniqueId();\n      var collapsed = selection.isCollapsed();\n      var element = selection.getNode();\n      var name = element.nodeName;\n      if (name === 'IMG') {\n        return {\n          name: name,\n          index: findIndex(dom, name, element)\n        };\n      }\n      var rng2 = normalizeTableCellSelection(rng.cloneRange());\n      if (!collapsed) {\n        rng2.collapse(false);\n        var endBookmarkNode = createBookmarkSpan(dom, id + '_end', filled);\n        rangeInsertNode(dom, rng2, endBookmarkNode);\n      }\n      rng = normalizeTableCellSelection(rng);\n      rng.collapse(true);\n      var startBookmarkNode = createBookmarkSpan(dom, id + '_start', filled);\n      rangeInsertNode(dom, rng, startBookmarkNode);\n      selection.moveToBookmark({\n        id: id,\n        keep: true\n      });\n      return { id: id };\n    };\n    var getBookmark$2 = function (selection, type, normalized) {\n      if (type === 2) {\n        return getOffsetBookmark(trim$2, normalized, selection);\n      } else if (type === 3) {\n        return getCaretBookmark(selection);\n      } else if (type) {\n        return getRangeBookmark(selection);\n      } else {\n        return getPersistentBookmark(selection, false);\n      }\n    };\n    var getUndoBookmark = curry(getOffsetBookmark, identity, true);\n\n    var DOM$9 = DOMUtils.DOM;\n    var defaultPreviewStyles = 'font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow';\n    var getBodySetting = function (editor, name, defaultValue) {\n      var value = editor.getParam(name, defaultValue);\n      if (value.indexOf('=') !== -1) {\n        var bodyObj = editor.getParam(name, '', 'hash');\n        return get$9(bodyObj, editor.id).getOr(defaultValue);\n      } else {\n        return value;\n      }\n    };\n    var getIframeAttrs = function (editor) {\n      return editor.getParam('iframe_attrs', {});\n    };\n    var getDocType = function (editor) {\n      return editor.getParam('doctype', '<!DOCTYPE html>');\n    };\n    var getDocumentBaseUrl = function (editor) {\n      return editor.getParam('document_base_url', '');\n    };\n    var getBodyId = function (editor) {\n      return getBodySetting(editor, 'body_id', 'tinymce');\n    };\n    var getBodyClass = function (editor) {\n      return getBodySetting(editor, 'body_class', '');\n    };\n    var getContentSecurityPolicy = function (editor) {\n      return editor.getParam('content_security_policy', '');\n    };\n    var shouldPutBrInPre$1 = function (editor) {\n      return editor.getParam('br_in_pre', true);\n    };\n    var getForcedRootBlock = function (editor) {\n      if (editor.getParam('force_p_newlines', false)) {\n        return 'p';\n      }\n      var block = editor.getParam('forced_root_block', 'p');\n      if (block === false) {\n        return '';\n      } else if (block === true) {\n        return 'p';\n      } else {\n        return block;\n      }\n    };\n    var getForcedRootBlockAttrs = function (editor) {\n      return editor.getParam('forced_root_block_attrs', {});\n    };\n    var getBrNewLineSelector = function (editor) {\n      return editor.getParam('br_newline_selector', '.mce-toc h2,figcaption,caption');\n    };\n    var getNoNewLineSelector = function (editor) {\n      return editor.getParam('no_newline_selector', '');\n    };\n    var shouldKeepStyles = function (editor) {\n      return editor.getParam('keep_styles', true);\n    };\n    var shouldEndContainerOnEmptyBlock = function (editor) {\n      return editor.getParam('end_container_on_empty_block', false);\n    };\n    var getFontStyleValues = function (editor) {\n      return Tools.explode(editor.getParam('font_size_style_values', 'xx-small,x-small,small,medium,large,x-large,xx-large'));\n    };\n    var getFontSizeClasses = function (editor) {\n      return Tools.explode(editor.getParam('font_size_classes', ''));\n    };\n    var getImagesDataImgFilter = function (editor) {\n      return editor.getParam('images_dataimg_filter', always, 'function');\n    };\n    var isAutomaticUploadsEnabled = function (editor) {\n      return editor.getParam('automatic_uploads', true, 'boolean');\n    };\n    var shouldReuseFileName = function (editor) {\n      return editor.getParam('images_reuse_filename', false, 'boolean');\n    };\n    var shouldReplaceBlobUris = function (editor) {\n      return editor.getParam('images_replace_blob_uris', true, 'boolean');\n    };\n    var getIconPackName = function (editor) {\n      return editor.getParam('icons', '', 'string');\n    };\n    var getIconsUrl = function (editor) {\n      return editor.getParam('icons_url', '', 'string');\n    };\n    var getImageUploadUrl = function (editor) {\n      return editor.getParam('images_upload_url', '', 'string');\n    };\n    var getImageUploadBasePath = function (editor) {\n      return editor.getParam('images_upload_base_path', '', 'string');\n    };\n    var getImagesUploadCredentials = function (editor) {\n      return editor.getParam('images_upload_credentials', false, 'boolean');\n    };\n    var getImagesUploadHandler = function (editor) {\n      return editor.getParam('images_upload_handler', null, 'function');\n    };\n    var shouldUseContentCssCors = function (editor) {\n      return editor.getParam('content_css_cors', false, 'boolean');\n    };\n    var getReferrerPolicy = function (editor) {\n      return editor.getParam('referrer_policy', '', 'string');\n    };\n    var getLanguageCode = function (editor) {\n      return editor.getParam('language', 'en', 'string');\n    };\n    var getLanguageUrl = function (editor) {\n      return editor.getParam('language_url', '', 'string');\n    };\n    var shouldIndentUseMargin = function (editor) {\n      return editor.getParam('indent_use_margin', false);\n    };\n    var getIndentation = function (editor) {\n      return editor.getParam('indentation', '40px', 'string');\n    };\n    var getContentCss = function (editor) {\n      var contentCss = editor.getParam('content_css');\n      if (isString$1(contentCss)) {\n        return map$3(contentCss.split(','), trim$4);\n      } else if (isArray$1(contentCss)) {\n        return contentCss;\n      } else if (contentCss === false || editor.inline) {\n        return [];\n      } else {\n        return ['default'];\n      }\n    };\n    var getFontCss = function (editor) {\n      var fontCss = editor.getParam('font_css', []);\n      return isArray$1(fontCss) ? fontCss : map$3(fontCss.split(','), trim$4);\n    };\n    var getDirectionality = function (editor) {\n      return editor.getParam('directionality', I18n.isRtl() ? 'rtl' : undefined);\n    };\n    var getInlineBoundarySelector = function (editor) {\n      return editor.getParam('inline_boundaries_selector', 'a[href],code,.mce-annotation', 'string');\n    };\n    var getObjectResizing = function (editor) {\n      var selector = editor.getParam('object_resizing');\n      if (selector === false || Env.iOS) {\n        return false;\n      } else {\n        return isString$1(selector) ? selector : 'table,img,figure.image,div,video,iframe';\n      }\n    };\n    var getResizeImgProportional = function (editor) {\n      return editor.getParam('resize_img_proportional', true, 'boolean');\n    };\n    var getPlaceholder = function (editor) {\n      return editor.getParam('placeholder', DOM$9.getAttrib(editor.getElement(), 'placeholder'), 'string');\n    };\n    var getEventRoot = function (editor) {\n      return editor.getParam('event_root');\n    };\n    var getServiceMessage = function (editor) {\n      return editor.getParam('service_message');\n    };\n    var getTheme = function (editor) {\n      return editor.getParam('theme');\n    };\n    var shouldValidate = function (editor) {\n      return editor.getParam('validate');\n    };\n    var isInlineBoundariesEnabled = function (editor) {\n      return editor.getParam('inline_boundaries') !== false;\n    };\n    var getFormats = function (editor) {\n      return editor.getParam('formats');\n    };\n    var getPreviewStyles = function (editor) {\n      var style = editor.getParam('preview_styles', defaultPreviewStyles);\n      if (isString$1(style)) {\n        return style;\n      } else {\n        return '';\n      }\n    };\n    var canFormatEmptyLines = function (editor) {\n      return editor.getParam('format_empty_lines', false, 'boolean');\n    };\n    var getCustomUiSelector = function (editor) {\n      return editor.getParam('custom_ui_selector', '', 'string');\n    };\n    var getThemeUrl = function (editor) {\n      return editor.getParam('theme_url');\n    };\n    var isInline = function (editor) {\n      return editor.getParam('inline');\n    };\n    var hasHiddenInput = function (editor) {\n      return editor.getParam('hidden_input');\n    };\n    var shouldPatchSubmit = function (editor) {\n      return editor.getParam('submit_patch');\n    };\n    var isEncodingXml = function (editor) {\n      return editor.getParam('encoding') === 'xml';\n    };\n    var shouldAddFormSubmitTrigger = function (editor) {\n      return editor.getParam('add_form_submit_trigger');\n    };\n    var shouldAddUnloadTrigger = function (editor) {\n      return editor.getParam('add_unload_trigger');\n    };\n    var hasForcedRootBlock = function (editor) {\n      return getForcedRootBlock(editor) !== '';\n    };\n    var getCustomUndoRedoLevels = function (editor) {\n      return editor.getParam('custom_undo_redo_levels', 0, 'number');\n    };\n    var shouldDisableNodeChange = function (editor) {\n      return editor.getParam('disable_nodechange');\n    };\n    var isReadOnly$1 = function (editor) {\n      return editor.getParam('readonly');\n    };\n    var hasContentCssCors = function (editor) {\n      return editor.getParam('content_css_cors');\n    };\n    var getPlugins = function (editor) {\n      return editor.getParam('plugins', '', 'string');\n    };\n    var getExternalPlugins$1 = function (editor) {\n      return editor.getParam('external_plugins');\n    };\n    var shouldBlockUnsupportedDrop = function (editor) {\n      return editor.getParam('block_unsupported_drop', true, 'boolean');\n    };\n    var isVisualAidsEnabled = function (editor) {\n      return editor.getParam('visual', true, 'boolean');\n    };\n    var getVisualAidsTableClass = function (editor) {\n      return editor.getParam('visual_table_class', 'mce-item-table', 'string');\n    };\n    var getVisualAidsAnchorClass = function (editor) {\n      return editor.getParam('visual_anchor_class', 'mce-item-anchor', 'string');\n    };\n    var getIframeTitle = function (editor) {\n      return editor.getParam('iframe_aria_text', 'Rich Text Area. Press ALT-0 for help.', 'string');\n    };\n\n    var isElement$2 = isElement$5;\n    var isText$2 = isText$7;\n    var removeNode$1 = function (node) {\n      var parentNode = node.parentNode;\n      if (parentNode) {\n        parentNode.removeChild(node);\n      }\n    };\n    var trimCount = function (text) {\n      var trimmedText = trim$2(text);\n      return {\n        count: text.length - trimmedText.length,\n        text: trimmedText\n      };\n    };\n    var deleteZwspChars = function (caretContainer) {\n      var idx;\n      while ((idx = caretContainer.data.lastIndexOf(ZWSP$1)) !== -1) {\n        caretContainer.deleteData(idx, 1);\n      }\n    };\n    var removeUnchanged = function (caretContainer, pos) {\n      remove$2(caretContainer);\n      return pos;\n    };\n    var removeTextAndReposition = function (caretContainer, pos) {\n      var before = trimCount(caretContainer.data.substr(0, pos.offset()));\n      var after = trimCount(caretContainer.data.substr(pos.offset()));\n      var text = before.text + after.text;\n      if (text.length > 0) {\n        deleteZwspChars(caretContainer);\n        return CaretPosition(caretContainer, pos.offset() - before.count);\n      } else {\n        return pos;\n      }\n    };\n    var removeElementAndReposition = function (caretContainer, pos) {\n      var parentNode = pos.container();\n      var newPosition = indexOf$2(from(parentNode.childNodes), caretContainer).map(function (index) {\n        return index < pos.offset() ? CaretPosition(parentNode, pos.offset() - 1) : pos;\n      }).getOr(pos);\n      remove$2(caretContainer);\n      return newPosition;\n    };\n    var removeTextCaretContainer = function (caretContainer, pos) {\n      return isText$2(caretContainer) && pos.container() === caretContainer ? removeTextAndReposition(caretContainer, pos) : removeUnchanged(caretContainer, pos);\n    };\n    var removeElementCaretContainer = function (caretContainer, pos) {\n      return pos.container() === caretContainer.parentNode ? removeElementAndReposition(caretContainer, pos) : removeUnchanged(caretContainer, pos);\n    };\n    var removeAndReposition = function (container, pos) {\n      return CaretPosition.isTextPosition(pos) ? removeTextCaretContainer(container, pos) : removeElementCaretContainer(container, pos);\n    };\n    var remove$2 = function (caretContainerNode) {\n      if (isElement$2(caretContainerNode) && isCaretContainer$2(caretContainerNode)) {\n        if (hasContent(caretContainerNode)) {\n          caretContainerNode.removeAttribute('data-mce-caret');\n        } else {\n          removeNode$1(caretContainerNode);\n        }\n      }\n      if (isText$2(caretContainerNode)) {\n        deleteZwspChars(caretContainerNode);\n        if (caretContainerNode.data.length === 0) {\n          removeNode$1(caretContainerNode);\n        }\n      }\n    };\n\n    var browser$2 = detect().browser;\n    var isContentEditableFalse$8 = isContentEditableFalse$b;\n    var isMedia$1 = isMedia$2;\n    var isTableCell$3 = isTableCell$5;\n    var inlineFakeCaretSelector = '*[contentEditable=false],video,audio,embed,object';\n    var getAbsoluteClientRect = function (root, element, before) {\n      var clientRect = collapse(element.getBoundingClientRect(), before);\n      var scrollX;\n      var scrollY;\n      if (root.tagName === 'BODY') {\n        var docElm = root.ownerDocument.documentElement;\n        scrollX = root.scrollLeft || docElm.scrollLeft;\n        scrollY = root.scrollTop || docElm.scrollTop;\n      } else {\n        var rootRect = root.getBoundingClientRect();\n        scrollX = root.scrollLeft - rootRect.left;\n        scrollY = root.scrollTop - rootRect.top;\n      }\n      clientRect.left += scrollX;\n      clientRect.right += scrollX;\n      clientRect.top += scrollY;\n      clientRect.bottom += scrollY;\n      clientRect.width = 1;\n      var margin = element.offsetWidth - element.clientWidth;\n      if (margin > 0) {\n        if (before) {\n          margin *= -1;\n        }\n        clientRect.left += margin;\n        clientRect.right += margin;\n      }\n      return clientRect;\n    };\n    var trimInlineCaretContainers = function (root) {\n      var fakeCaretTargetNodes = descendants(SugarElement.fromDom(root), inlineFakeCaretSelector);\n      for (var i = 0; i < fakeCaretTargetNodes.length; i++) {\n        var node = fakeCaretTargetNodes[i].dom;\n        var sibling = node.previousSibling;\n        if (endsWithCaretContainer$1(sibling)) {\n          var data = sibling.data;\n          if (data.length === 1) {\n            sibling.parentNode.removeChild(sibling);\n          } else {\n            sibling.deleteData(data.length - 1, 1);\n          }\n        }\n        sibling = node.nextSibling;\n        if (startsWithCaretContainer$1(sibling)) {\n          var data = sibling.data;\n          if (data.length === 1) {\n            sibling.parentNode.removeChild(sibling);\n          } else {\n            sibling.deleteData(0, 1);\n          }\n        }\n      }\n    };\n    var FakeCaret = function (editor, root, isBlock, hasFocus) {\n      var lastVisualCaret = value();\n      var cursorInterval;\n      var caretContainerNode;\n      var rootBlock = getForcedRootBlock(editor);\n      var caretBlock = rootBlock.length > 0 ? rootBlock : 'p';\n      var show = function (before, element) {\n        var rng;\n        hide();\n        if (isTableCell$3(element)) {\n          return null;\n        }\n        if (isBlock(element)) {\n          caretContainerNode = insertBlock$1(caretBlock, element, before);\n          var clientRect = getAbsoluteClientRect(root, element, before);\n          DomQuery(caretContainerNode).css('top', clientRect.top);\n          var caret = DomQuery('<div class=\"mce-visual-caret\" data-mce-bogus=\"all\"></div>').css(__assign({}, clientRect)).appendTo(root)[0];\n          lastVisualCaret.set({\n            caret: caret,\n            element: element,\n            before: before\n          });\n          if (before) {\n            DomQuery(caret).addClass('mce-visual-caret-before');\n          }\n          startBlink();\n          rng = element.ownerDocument.createRange();\n          rng.setStart(caretContainerNode, 0);\n          rng.setEnd(caretContainerNode, 0);\n        } else {\n          caretContainerNode = insertInline$1(element, before);\n          rng = element.ownerDocument.createRange();\n          if (isInlineFakeCaretTarget(caretContainerNode.nextSibling)) {\n            rng.setStart(caretContainerNode, 0);\n            rng.setEnd(caretContainerNode, 0);\n          } else {\n            rng.setStart(caretContainerNode, 1);\n            rng.setEnd(caretContainerNode, 1);\n          }\n          return rng;\n        }\n        return rng;\n      };\n      var hide = function () {\n        trimInlineCaretContainers(root);\n        if (caretContainerNode) {\n          remove$2(caretContainerNode);\n          caretContainerNode = null;\n        }\n        lastVisualCaret.on(function (caretState) {\n          DomQuery(caretState.caret).remove();\n          lastVisualCaret.clear();\n        });\n        if (cursorInterval) {\n          Delay.clearInterval(cursorInterval);\n          cursorInterval = undefined;\n        }\n      };\n      var startBlink = function () {\n        cursorInterval = Delay.setInterval(function () {\n          if (hasFocus()) {\n            DomQuery('div.mce-visual-caret', root).toggleClass('mce-visual-caret-hidden');\n          } else {\n            DomQuery('div.mce-visual-caret', root).addClass('mce-visual-caret-hidden');\n          }\n        }, 500);\n      };\n      var reposition = function () {\n        lastVisualCaret.on(function (caretState) {\n          var clientRect = getAbsoluteClientRect(root, caretState.element, caretState.before);\n          DomQuery(caretState.caret).css(__assign({}, clientRect));\n        });\n      };\n      var destroy = function () {\n        return Delay.clearInterval(cursorInterval);\n      };\n      var getCss = function () {\n        return '.mce-visual-caret {' + 'position: absolute;' + 'background-color: black;' + 'background-color: currentcolor;' + '}' + '.mce-visual-caret-hidden {' + 'display: none;' + '}' + '*[data-mce-caret] {' + 'position: absolute;' + 'left: -1000px;' + 'right: auto;' + 'top: 0;' + 'margin: 0;' + 'padding: 0;' + '}';\n      };\n      return {\n        show: show,\n        hide: hide,\n        getCss: getCss,\n        reposition: reposition,\n        destroy: destroy\n      };\n    };\n    var isFakeCaretTableBrowser = function () {\n      return browser$2.isIE() || browser$2.isEdge() || browser$2.isFirefox();\n    };\n    var isInlineFakeCaretTarget = function (node) {\n      return isContentEditableFalse$8(node) || isMedia$1(node);\n    };\n    var isFakeCaretTarget = function (node) {\n      return isInlineFakeCaretTarget(node) || isTable$3(node) && isFakeCaretTableBrowser();\n    };\n\n    var isContentEditableFalse$7 = isContentEditableFalse$b;\n    var isMedia = isMedia$2;\n    var isBlockLike = matchStyleValues('display', 'block table table-cell table-caption list-item');\n    var isCaretContainer = isCaretContainer$2;\n    var isCaretContainerBlock = isCaretContainerBlock$1;\n    var isElement$1 = isElement$5;\n    var isCaretCandidate$1 = isCaretCandidate$3;\n    var isForwards = function (direction) {\n      return direction > 0;\n    };\n    var isBackwards = function (direction) {\n      return direction < 0;\n    };\n    var skipCaretContainers = function (walk, shallow) {\n      var node;\n      while (node = walk(shallow)) {\n        if (!isCaretContainerBlock(node)) {\n          return node;\n        }\n      }\n      return null;\n    };\n    var findNode$1 = function (node, direction, predicateFn, rootNode, shallow) {\n      var walker = new DomTreeWalker(node, rootNode);\n      var isCefOrCaretContainer = isContentEditableFalse$7(node) || isCaretContainerBlock(node);\n      if (isBackwards(direction)) {\n        if (isCefOrCaretContainer) {\n          node = skipCaretContainers(walker.prev.bind(walker), true);\n          if (predicateFn(node)) {\n            return node;\n          }\n        }\n        while (node = skipCaretContainers(walker.prev.bind(walker), shallow)) {\n          if (predicateFn(node)) {\n            return node;\n          }\n        }\n      }\n      if (isForwards(direction)) {\n        if (isCefOrCaretContainer) {\n          node = skipCaretContainers(walker.next.bind(walker), true);\n          if (predicateFn(node)) {\n            return node;\n          }\n        }\n        while (node = skipCaretContainers(walker.next.bind(walker), shallow)) {\n          if (predicateFn(node)) {\n            return node;\n          }\n        }\n      }\n      return null;\n    };\n    var getParentBlock$2 = function (node, rootNode) {\n      while (node && node !== rootNode) {\n        if (isBlockLike(node)) {\n          return node;\n        }\n        node = node.parentNode;\n      }\n      return null;\n    };\n    var isInSameBlock = function (caretPosition1, caretPosition2, rootNode) {\n      return getParentBlock$2(caretPosition1.container(), rootNode) === getParentBlock$2(caretPosition2.container(), rootNode);\n    };\n    var getChildNodeAtRelativeOffset = function (relativeOffset, caretPosition) {\n      if (!caretPosition) {\n        return null;\n      }\n      var container = caretPosition.container();\n      var offset = caretPosition.offset();\n      if (!isElement$1(container)) {\n        return null;\n      }\n      return container.childNodes[offset + relativeOffset];\n    };\n    var beforeAfter = function (before, node) {\n      var range = node.ownerDocument.createRange();\n      if (before) {\n        range.setStartBefore(node);\n        range.setEndBefore(node);\n      } else {\n        range.setStartAfter(node);\n        range.setEndAfter(node);\n      }\n      return range;\n    };\n    var isNodesInSameBlock = function (root, node1, node2) {\n      return getParentBlock$2(node1, root) === getParentBlock$2(node2, root);\n    };\n    var lean = function (left, root, node) {\n      var siblingName = left ? 'previousSibling' : 'nextSibling';\n      while (node && node !== root) {\n        var sibling = node[siblingName];\n        if (isCaretContainer(sibling)) {\n          sibling = sibling[siblingName];\n        }\n        if (isContentEditableFalse$7(sibling) || isMedia(sibling)) {\n          if (isNodesInSameBlock(root, sibling, node)) {\n            return sibling;\n          }\n          break;\n        }\n        if (isCaretCandidate$1(sibling)) {\n          break;\n        }\n        node = node.parentNode;\n      }\n      return null;\n    };\n    var before$2 = curry(beforeAfter, true);\n    var after$2 = curry(beforeAfter, false);\n    var normalizeRange = function (direction, root, range) {\n      var node;\n      var leanLeft = curry(lean, true, root);\n      var leanRight = curry(lean, false, root);\n      var container = range.startContainer;\n      var offset = range.startOffset;\n      if (isCaretContainerBlock$1(container)) {\n        if (!isElement$1(container)) {\n          container = container.parentNode;\n        }\n        var location_1 = container.getAttribute('data-mce-caret');\n        if (location_1 === 'before') {\n          node = container.nextSibling;\n          if (isFakeCaretTarget(node)) {\n            return before$2(node);\n          }\n        }\n        if (location_1 === 'after') {\n          node = container.previousSibling;\n          if (isFakeCaretTarget(node)) {\n            return after$2(node);\n          }\n        }\n      }\n      if (!range.collapsed) {\n        return range;\n      }\n      if (isText$7(container)) {\n        if (isCaretContainer(container)) {\n          if (direction === 1) {\n            node = leanRight(container);\n            if (node) {\n              return before$2(node);\n            }\n            node = leanLeft(container);\n            if (node) {\n              return after$2(node);\n            }\n          }\n          if (direction === -1) {\n            node = leanLeft(container);\n            if (node) {\n              return after$2(node);\n            }\n            node = leanRight(container);\n            if (node) {\n              return before$2(node);\n            }\n          }\n          return range;\n        }\n        if (endsWithCaretContainer$1(container) && offset >= container.data.length - 1) {\n          if (direction === 1) {\n            node = leanRight(container);\n            if (node) {\n              return before$2(node);\n            }\n          }\n          return range;\n        }\n        if (startsWithCaretContainer$1(container) && offset <= 1) {\n          if (direction === -1) {\n            node = leanLeft(container);\n            if (node) {\n              return after$2(node);\n            }\n          }\n          return range;\n        }\n        if (offset === container.data.length) {\n          node = leanRight(container);\n          if (node) {\n            return before$2(node);\n          }\n          return range;\n        }\n        if (offset === 0) {\n          node = leanLeft(container);\n          if (node) {\n            return after$2(node);\n          }\n          return range;\n        }\n      }\n      return range;\n    };\n    var getRelativeCefElm = function (forward, caretPosition) {\n      return Optional.from(getChildNodeAtRelativeOffset(forward ? 0 : -1, caretPosition)).filter(isContentEditableFalse$7);\n    };\n    var getNormalizedRangeEndPoint = function (direction, root, range) {\n      var normalizedRange = normalizeRange(direction, root, range);\n      if (direction === -1) {\n        return CaretPosition.fromRangeStart(normalizedRange);\n      }\n      return CaretPosition.fromRangeEnd(normalizedRange);\n    };\n    var getElementFromPosition = function (pos) {\n      return Optional.from(pos.getNode()).map(SugarElement.fromDom);\n    };\n    var getElementFromPrevPosition = function (pos) {\n      return Optional.from(pos.getNode(true)).map(SugarElement.fromDom);\n    };\n    var getVisualCaretPosition = function (walkFn, caretPosition) {\n      while (caretPosition = walkFn(caretPosition)) {\n        if (caretPosition.isVisible()) {\n          return caretPosition;\n        }\n      }\n      return caretPosition;\n    };\n    var isMoveInsideSameBlock = function (from, to) {\n      var inSameBlock = isInSameBlock(from, to);\n      if (!inSameBlock && isBr$5(from.getNode())) {\n        return true;\n      }\n      return inSameBlock;\n    };\n\n    var HDirection;\n    (function (HDirection) {\n      HDirection[HDirection['Backwards'] = -1] = 'Backwards';\n      HDirection[HDirection['Forwards'] = 1] = 'Forwards';\n    }(HDirection || (HDirection = {})));\n    var isContentEditableFalse$6 = isContentEditableFalse$b;\n    var isText$1 = isText$7;\n    var isElement = isElement$5;\n    var isBr$1 = isBr$5;\n    var isCaretCandidate = isCaretCandidate$3;\n    var isAtomic = isAtomic$1;\n    var isEditableCaretCandidate = isEditableCaretCandidate$1;\n    var getParents$3 = function (node, root) {\n      var parents = [];\n      while (node && node !== root) {\n        parents.push(node);\n        node = node.parentNode;\n      }\n      return parents;\n    };\n    var nodeAtIndex = function (container, offset) {\n      if (container.hasChildNodes() && offset < container.childNodes.length) {\n        return container.childNodes[offset];\n      }\n      return null;\n    };\n    var getCaretCandidatePosition = function (direction, node) {\n      if (isForwards(direction)) {\n        if (isCaretCandidate(node.previousSibling) && !isText$1(node.previousSibling)) {\n          return CaretPosition.before(node);\n        }\n        if (isText$1(node)) {\n          return CaretPosition(node, 0);\n        }\n      }\n      if (isBackwards(direction)) {\n        if (isCaretCandidate(node.nextSibling) && !isText$1(node.nextSibling)) {\n          return CaretPosition.after(node);\n        }\n        if (isText$1(node)) {\n          return CaretPosition(node, node.data.length);\n        }\n      }\n      if (isBackwards(direction)) {\n        if (isBr$1(node)) {\n          return CaretPosition.before(node);\n        }\n        return CaretPosition.after(node);\n      }\n      return CaretPosition.before(node);\n    };\n    var moveForwardFromBr = function (root, nextNode) {\n      var nextSibling = nextNode.nextSibling;\n      if (nextSibling && isCaretCandidate(nextSibling)) {\n        if (isText$1(nextSibling)) {\n          return CaretPosition(nextSibling, 0);\n        } else {\n          return CaretPosition.before(nextSibling);\n        }\n      } else {\n        return findCaretPosition$1(HDirection.Forwards, CaretPosition.after(nextNode), root);\n      }\n    };\n    var findCaretPosition$1 = function (direction, startPos, root) {\n      var node;\n      var nextNode;\n      var innerNode;\n      var caretPosition;\n      if (!isElement(root) || !startPos) {\n        return null;\n      }\n      if (startPos.isEqual(CaretPosition.after(root)) && root.lastChild) {\n        caretPosition = CaretPosition.after(root.lastChild);\n        if (isBackwards(direction) && isCaretCandidate(root.lastChild) && isElement(root.lastChild)) {\n          return isBr$1(root.lastChild) ? CaretPosition.before(root.lastChild) : caretPosition;\n        }\n      } else {\n        caretPosition = startPos;\n      }\n      var container = caretPosition.container();\n      var offset = caretPosition.offset();\n      if (isText$1(container)) {\n        if (isBackwards(direction) && offset > 0) {\n          return CaretPosition(container, --offset);\n        }\n        if (isForwards(direction) && offset < container.length) {\n          return CaretPosition(container, ++offset);\n        }\n        node = container;\n      } else {\n        if (isBackwards(direction) && offset > 0) {\n          nextNode = nodeAtIndex(container, offset - 1);\n          if (isCaretCandidate(nextNode)) {\n            if (!isAtomic(nextNode)) {\n              innerNode = findNode$1(nextNode, direction, isEditableCaretCandidate, nextNode);\n              if (innerNode) {\n                if (isText$1(innerNode)) {\n                  return CaretPosition(innerNode, innerNode.data.length);\n                }\n                return CaretPosition.after(innerNode);\n              }\n            }\n            if (isText$1(nextNode)) {\n              return CaretPosition(nextNode, nextNode.data.length);\n            }\n            return CaretPosition.before(nextNode);\n          }\n        }\n        if (isForwards(direction) && offset < container.childNodes.length) {\n          nextNode = nodeAtIndex(container, offset);\n          if (isCaretCandidate(nextNode)) {\n            if (isBr$1(nextNode)) {\n              return moveForwardFromBr(root, nextNode);\n            }\n            if (!isAtomic(nextNode)) {\n              innerNode = findNode$1(nextNode, direction, isEditableCaretCandidate, nextNode);\n              if (innerNode) {\n                if (isText$1(innerNode)) {\n                  return CaretPosition(innerNode, 0);\n                }\n                return CaretPosition.before(innerNode);\n              }\n            }\n            if (isText$1(nextNode)) {\n              return CaretPosition(nextNode, 0);\n            }\n            return CaretPosition.after(nextNode);\n          }\n        }\n        node = nextNode ? nextNode : caretPosition.getNode();\n      }\n      if (isForwards(direction) && caretPosition.isAtEnd() || isBackwards(direction) && caretPosition.isAtStart()) {\n        node = findNode$1(node, direction, always, root, true);\n        if (isEditableCaretCandidate(node, root)) {\n          return getCaretCandidatePosition(direction, node);\n        }\n      }\n      nextNode = findNode$1(node, direction, isEditableCaretCandidate, root);\n      var rootContentEditableFalseElm = last$1(filter$4(getParents$3(container, root), isContentEditableFalse$6));\n      if (rootContentEditableFalseElm && (!nextNode || !rootContentEditableFalseElm.contains(nextNode))) {\n        if (isForwards(direction)) {\n          caretPosition = CaretPosition.after(rootContentEditableFalseElm);\n        } else {\n          caretPosition = CaretPosition.before(rootContentEditableFalseElm);\n        }\n        return caretPosition;\n      }\n      if (nextNode) {\n        return getCaretCandidatePosition(direction, nextNode);\n      }\n      return null;\n    };\n    var CaretWalker = function (root) {\n      return {\n        next: function (caretPosition) {\n          return findCaretPosition$1(HDirection.Forwards, caretPosition, root);\n        },\n        prev: function (caretPosition) {\n          return findCaretPosition$1(HDirection.Backwards, caretPosition, root);\n        }\n      };\n    };\n\n    var walkToPositionIn = function (forward, root, start) {\n      var position = forward ? CaretPosition.before(start) : CaretPosition.after(start);\n      return fromPosition(forward, root, position);\n    };\n    var afterElement = function (node) {\n      return isBr$5(node) ? CaretPosition.before(node) : CaretPosition.after(node);\n    };\n    var isBeforeOrStart = function (position) {\n      if (CaretPosition.isTextPosition(position)) {\n        return position.offset() === 0;\n      } else {\n        return isCaretCandidate$3(position.getNode());\n      }\n    };\n    var isAfterOrEnd = function (position) {\n      if (CaretPosition.isTextPosition(position)) {\n        var container = position.container();\n        return position.offset() === container.data.length;\n      } else {\n        return isCaretCandidate$3(position.getNode(true));\n      }\n    };\n    var isBeforeAfterSameElement = function (from, to) {\n      return !CaretPosition.isTextPosition(from) && !CaretPosition.isTextPosition(to) && from.getNode() === to.getNode(true);\n    };\n    var isAtBr = function (position) {\n      return !CaretPosition.isTextPosition(position) && isBr$5(position.getNode());\n    };\n    var shouldSkipPosition = function (forward, from, to) {\n      if (forward) {\n        return !isBeforeAfterSameElement(from, to) && !isAtBr(from) && isAfterOrEnd(from) && isBeforeOrStart(to);\n      } else {\n        return !isBeforeAfterSameElement(to, from) && isBeforeOrStart(from) && isAfterOrEnd(to);\n      }\n    };\n    var fromPosition = function (forward, root, pos) {\n      var walker = CaretWalker(root);\n      return Optional.from(forward ? walker.next(pos) : walker.prev(pos));\n    };\n    var navigate = function (forward, root, from) {\n      return fromPosition(forward, root, from).bind(function (to) {\n        if (isInSameBlock(from, to, root) && shouldSkipPosition(forward, from, to)) {\n          return fromPosition(forward, root, to);\n        } else {\n          return Optional.some(to);\n        }\n      });\n    };\n    var navigateIgnore = function (forward, root, from, ignoreFilter) {\n      return navigate(forward, root, from).bind(function (pos) {\n        return ignoreFilter(pos) ? navigateIgnore(forward, root, pos, ignoreFilter) : Optional.some(pos);\n      });\n    };\n    var positionIn = function (forward, element) {\n      var startNode = forward ? element.firstChild : element.lastChild;\n      if (isText$7(startNode)) {\n        return Optional.some(CaretPosition(startNode, forward ? 0 : startNode.data.length));\n      } else if (startNode) {\n        if (isCaretCandidate$3(startNode)) {\n          return Optional.some(forward ? CaretPosition.before(startNode) : afterElement(startNode));\n        } else {\n          return walkToPositionIn(forward, element, startNode);\n        }\n      } else {\n        return Optional.none();\n      }\n    };\n    var nextPosition = curry(fromPosition, true);\n    var prevPosition = curry(fromPosition, false);\n    var firstPositionIn = curry(positionIn, true);\n    var lastPositionIn = curry(positionIn, false);\n\n    var CARET_ID$1 = '_mce_caret';\n    var isCaretNode = function (node) {\n      return isElement$5(node) && node.id === CARET_ID$1;\n    };\n    var getParentCaretContainer = function (body, node) {\n      while (node && node !== body) {\n        if (node.id === CARET_ID$1) {\n          return node;\n        }\n        node = node.parentNode;\n      }\n      return null;\n    };\n\n    var isStringPathBookmark = function (bookmark) {\n      return isString$1(bookmark.start);\n    };\n    var isRangeBookmark = function (bookmark) {\n      return has$2(bookmark, 'rng');\n    };\n    var isIdBookmark = function (bookmark) {\n      return has$2(bookmark, 'id');\n    };\n    var isIndexBookmark = function (bookmark) {\n      return has$2(bookmark, 'name');\n    };\n    var isPathBookmark = function (bookmark) {\n      return Tools.isArray(bookmark.start);\n    };\n\n    var addBogus = function (dom, node) {\n      if (isElement$5(node) && dom.isBlock(node) && !node.innerHTML && !Env.ie) {\n        node.innerHTML = '<br data-mce-bogus=\"1\" />';\n      }\n      return node;\n    };\n    var resolveCaretPositionBookmark = function (dom, bookmark) {\n      var pos;\n      var rng = dom.createRng();\n      pos = resolve$2(dom.getRoot(), bookmark.start);\n      rng.setStart(pos.container(), pos.offset());\n      pos = resolve$2(dom.getRoot(), bookmark.end);\n      rng.setEnd(pos.container(), pos.offset());\n      return rng;\n    };\n    var insertZwsp = function (node, rng) {\n      var textNode = node.ownerDocument.createTextNode(ZWSP$1);\n      node.appendChild(textNode);\n      rng.setStart(textNode, 0);\n      rng.setEnd(textNode, 0);\n    };\n    var isEmpty$1 = function (node) {\n      return node.hasChildNodes() === false;\n    };\n    var tryFindRangePosition = function (node, rng) {\n      return lastPositionIn(node).fold(never, function (pos) {\n        rng.setStart(pos.container(), pos.offset());\n        rng.setEnd(pos.container(), pos.offset());\n        return true;\n      });\n    };\n    var padEmptyCaretContainer = function (root, node, rng) {\n      if (isEmpty$1(node) && getParentCaretContainer(root, node)) {\n        insertZwsp(node, rng);\n        return true;\n      } else {\n        return false;\n      }\n    };\n    var setEndPoint = function (dom, start, bookmark, rng) {\n      var point = bookmark[start ? 'start' : 'end'];\n      var i, node, offset, children;\n      var root = dom.getRoot();\n      if (point) {\n        offset = point[0];\n        for (node = root, i = point.length - 1; i >= 1; i--) {\n          children = node.childNodes;\n          if (padEmptyCaretContainer(root, node, rng)) {\n            return true;\n          }\n          if (point[i] > children.length - 1) {\n            if (padEmptyCaretContainer(root, node, rng)) {\n              return true;\n            }\n            return tryFindRangePosition(node, rng);\n          }\n          node = children[point[i]];\n        }\n        if (node.nodeType === 3) {\n          offset = Math.min(point[0], node.nodeValue.length);\n        }\n        if (node.nodeType === 1) {\n          offset = Math.min(point[0], node.childNodes.length);\n        }\n        if (start) {\n          rng.setStart(node, offset);\n        } else {\n          rng.setEnd(node, offset);\n        }\n      }\n      return true;\n    };\n    var isValidTextNode = function (node) {\n      return isText$7(node) && node.data.length > 0;\n    };\n    var restoreEndPoint = function (dom, suffix, bookmark) {\n      var marker = dom.get(bookmark.id + '_' + suffix), node, idx, next, prev;\n      var keep = bookmark.keep;\n      var container, offset;\n      if (marker) {\n        node = marker.parentNode;\n        if (suffix === 'start') {\n          if (!keep) {\n            idx = dom.nodeIndex(marker);\n          } else {\n            if (marker.hasChildNodes()) {\n              node = marker.firstChild;\n              idx = 1;\n            } else if (isValidTextNode(marker.nextSibling)) {\n              node = marker.nextSibling;\n              idx = 0;\n            } else if (isValidTextNode(marker.previousSibling)) {\n              node = marker.previousSibling;\n              idx = marker.previousSibling.data.length;\n            } else {\n              node = marker.parentNode;\n              idx = dom.nodeIndex(marker) + 1;\n            }\n          }\n          container = node;\n          offset = idx;\n        } else {\n          if (!keep) {\n            idx = dom.nodeIndex(marker);\n          } else {\n            if (marker.hasChildNodes()) {\n              node = marker.firstChild;\n              idx = 1;\n            } else if (isValidTextNode(marker.previousSibling)) {\n              node = marker.previousSibling;\n              idx = marker.previousSibling.data.length;\n            } else {\n              node = marker.parentNode;\n              idx = dom.nodeIndex(marker);\n            }\n          }\n          container = node;\n          offset = idx;\n        }\n        if (!keep) {\n          prev = marker.previousSibling;\n          next = marker.nextSibling;\n          Tools.each(Tools.grep(marker.childNodes), function (node) {\n            if (isText$7(node)) {\n              node.nodeValue = node.nodeValue.replace(/\\uFEFF/g, '');\n            }\n          });\n          while (marker = dom.get(bookmark.id + '_' + suffix)) {\n            dom.remove(marker, true);\n          }\n          if (prev && next && prev.nodeType === next.nodeType && isText$7(prev) && !Env.opera) {\n            idx = prev.nodeValue.length;\n            prev.appendData(next.nodeValue);\n            dom.remove(next);\n            container = prev;\n            offset = idx;\n          }\n        }\n        return Optional.some(CaretPosition(container, offset));\n      } else {\n        return Optional.none();\n      }\n    };\n    var resolvePaths = function (dom, bookmark) {\n      var rng = dom.createRng();\n      if (setEndPoint(dom, true, bookmark, rng) && setEndPoint(dom, false, bookmark, rng)) {\n        return Optional.some(rng);\n      } else {\n        return Optional.none();\n      }\n    };\n    var resolveId = function (dom, bookmark) {\n      var startPos = restoreEndPoint(dom, 'start', bookmark);\n      var endPos = restoreEndPoint(dom, 'end', bookmark);\n      return lift2(startPos, endPos.or(startPos), function (spos, epos) {\n        var rng = dom.createRng();\n        rng.setStart(addBogus(dom, spos.container()), spos.offset());\n        rng.setEnd(addBogus(dom, epos.container()), epos.offset());\n        return rng;\n      });\n    };\n    var resolveIndex = function (dom, bookmark) {\n      return Optional.from(dom.select(bookmark.name)[bookmark.index]).map(function (elm) {\n        var rng = dom.createRng();\n        rng.selectNode(elm);\n        return rng;\n      });\n    };\n    var resolve$1 = function (selection, bookmark) {\n      var dom = selection.dom;\n      if (bookmark) {\n        if (isPathBookmark(bookmark)) {\n          return resolvePaths(dom, bookmark);\n        } else if (isStringPathBookmark(bookmark)) {\n          return Optional.some(resolveCaretPositionBookmark(dom, bookmark));\n        } else if (isIdBookmark(bookmark)) {\n          return resolveId(dom, bookmark);\n        } else if (isIndexBookmark(bookmark)) {\n          return resolveIndex(dom, bookmark);\n        } else if (isRangeBookmark(bookmark)) {\n          return Optional.some(bookmark.rng);\n        }\n      }\n      return Optional.none();\n    };\n\n    var getBookmark$1 = function (selection, type, normalized) {\n      return getBookmark$2(selection, type, normalized);\n    };\n    var moveToBookmark = function (selection, bookmark) {\n      resolve$1(selection, bookmark).each(function (rng) {\n        selection.setRng(rng);\n      });\n    };\n    var isBookmarkNode$1 = function (node) {\n      return isElement$5(node) && node.tagName === 'SPAN' && node.getAttribute('data-mce-type') === 'bookmark';\n    };\n\n    var is = function (expected) {\n      return function (actual) {\n        return expected === actual;\n      };\n    };\n    var isNbsp = is(nbsp);\n    var isWhiteSpace = function (chr) {\n      return chr !== '' && ' \\f\\n\\r\\t\\x0B'.indexOf(chr) !== -1;\n    };\n    var isContent = function (chr) {\n      return !isWhiteSpace(chr) && !isNbsp(chr);\n    };\n\n    var isNode = function (node) {\n      return !!node.nodeType;\n    };\n    var isInlineBlock = function (node) {\n      return node && /^(IMG)$/.test(node.nodeName);\n    };\n    var moveStart = function (dom, selection, rng) {\n      var offset = rng.startOffset;\n      var container = rng.startContainer;\n      if (container === rng.endContainer) {\n        if (isInlineBlock(container.childNodes[offset])) {\n          return;\n        }\n      }\n      if (isElement$5(container)) {\n        var nodes = container.childNodes;\n        var walker = void 0;\n        if (offset < nodes.length) {\n          container = nodes[offset];\n          walker = new DomTreeWalker(container, dom.getParent(container, dom.isBlock));\n        } else {\n          container = nodes[nodes.length - 1];\n          walker = new DomTreeWalker(container, dom.getParent(container, dom.isBlock));\n          walker.next(true);\n        }\n        for (var node = walker.current(); node; node = walker.next()) {\n          if (isText$7(node) && !isWhiteSpaceNode$1(node)) {\n            rng.setStart(node, 0);\n            selection.setRng(rng);\n            return;\n          }\n        }\n      }\n    };\n    var getNonWhiteSpaceSibling = function (node, next, inc) {\n      if (node) {\n        var nextName = next ? 'nextSibling' : 'previousSibling';\n        for (node = inc ? node : node[nextName]; node; node = node[nextName]) {\n          if (isElement$5(node) || !isWhiteSpaceNode$1(node)) {\n            return node;\n          }\n        }\n      }\n    };\n    var isTextBlock$1 = function (editor, name) {\n      if (isNode(name)) {\n        name = name.nodeName;\n      }\n      return !!editor.schema.getTextBlockElements()[name.toLowerCase()];\n    };\n    var isValid = function (ed, parent, child) {\n      return ed.schema.isValidChild(parent, child);\n    };\n    var isWhiteSpaceNode$1 = function (node, allowSpaces) {\n      if (allowSpaces === void 0) {\n        allowSpaces = false;\n      }\n      if (isNonNullable(node) && isText$7(node)) {\n        var data = allowSpaces ? node.data.replace(/ /g, '\\xA0') : node.data;\n        return isWhitespaceText(data);\n      } else {\n        return false;\n      }\n    };\n    var isEmptyTextNode$1 = function (node) {\n      return isNonNullable(node) && isText$7(node) && node.length === 0;\n    };\n    var replaceVars = function (value, vars) {\n      if (isFunction(value)) {\n        value = value(vars);\n      } else if (isNonNullable(vars)) {\n        value = value.replace(/%(\\w+)/g, function (str, name) {\n          return vars[name] || str;\n        });\n      }\n      return value;\n    };\n    var isEq$5 = function (str1, str2) {\n      str1 = str1 || '';\n      str2 = str2 || '';\n      str1 = '' + (str1.nodeName || str1);\n      str2 = '' + (str2.nodeName || str2);\n      return str1.toLowerCase() === str2.toLowerCase();\n    };\n    var normalizeStyleValue = function (dom, value, name) {\n      if (name === 'color' || name === 'backgroundColor') {\n        value = dom.toHex(value);\n      }\n      if (name === 'fontWeight' && value === 700) {\n        value = 'bold';\n      }\n      if (name === 'fontFamily') {\n        value = value.replace(/[\\'\\\"]/g, '').replace(/,\\s+/g, ',');\n      }\n      return '' + value;\n    };\n    var getStyle = function (dom, node, name) {\n      return normalizeStyleValue(dom, dom.getStyle(node, name), name);\n    };\n    var getTextDecoration = function (dom, node) {\n      var decoration;\n      dom.getParent(node, function (n) {\n        decoration = dom.getStyle(n, 'text-decoration');\n        return decoration && decoration !== 'none';\n      });\n      return decoration;\n    };\n    var getParents$2 = function (dom, node, selector) {\n      return dom.getParents(node, selector, dom.getRoot());\n    };\n    var isVariableFormatName = function (editor, formatName) {\n      var hasVariableValues = function (format) {\n        var isVariableValue = function (val) {\n          return val.length > 1 && val.charAt(0) === '%';\n        };\n        return exists([\n          'styles',\n          'attributes'\n        ], function (key) {\n          return get$9(format, key).exists(function (field) {\n            var fieldValues = isArray$1(field) ? field : values(field);\n            return exists(fieldValues, isVariableValue);\n          });\n        });\n      };\n      return exists(editor.formatter.get(formatName), hasVariableValues);\n    };\n    var areSimilarFormats = function (editor, formatName, otherFormatName) {\n      var validKeys = [\n        'inline',\n        'block',\n        'selector',\n        'attributes',\n        'styles',\n        'classes'\n      ];\n      var filterObj = function (format) {\n        return filter$3(format, function (_, key) {\n          return exists(validKeys, function (validKey) {\n            return validKey === key;\n          });\n        });\n      };\n      return exists(editor.formatter.get(formatName), function (fmt1) {\n        var filteredFmt1 = filterObj(fmt1);\n        return exists(editor.formatter.get(otherFormatName), function (fmt2) {\n          var filteredFmt2 = filterObj(fmt2);\n          return equal$1(filteredFmt1, filteredFmt2);\n        });\n      });\n    };\n    var isBlockFormat = function (format) {\n      return hasNonNullableKey(format, 'block');\n    };\n    var isSelectorFormat = function (format) {\n      return hasNonNullableKey(format, 'selector');\n    };\n    var isInlineFormat = function (format) {\n      return hasNonNullableKey(format, 'inline');\n    };\n    var isMixedFormat = function (format) {\n      return isSelectorFormat(format) && isInlineFormat(format) && is$1(get$9(format, 'mixed'), true);\n    };\n    var shouldExpandToSelector = function (format) {\n      return isSelectorFormat(format) && format.expand !== false && !isInlineFormat(format);\n    };\n\n    var isBookmarkNode = isBookmarkNode$1;\n    var getParents$1 = getParents$2;\n    var isWhiteSpaceNode = isWhiteSpaceNode$1;\n    var isTextBlock = isTextBlock$1;\n    var isBogusBr = function (node) {\n      return isBr$5(node) && node.getAttribute('data-mce-bogus') && !node.nextSibling;\n    };\n    var findParentContentEditable = function (dom, node) {\n      var parent = node;\n      while (parent) {\n        if (isElement$5(parent) && dom.getContentEditable(parent)) {\n          return dom.getContentEditable(parent) === 'false' ? parent : node;\n        }\n        parent = parent.parentNode;\n      }\n      return node;\n    };\n    var walkText = function (start, node, offset, predicate) {\n      var str = node.data;\n      for (var i = offset; start ? i >= 0 : i < str.length; start ? i-- : i++) {\n        if (predicate(str.charAt(i))) {\n          return start ? i + 1 : i;\n        }\n      }\n      return -1;\n    };\n    var findSpace = function (start, node, offset) {\n      return walkText(start, node, offset, function (c) {\n        return isNbsp(c) || isWhiteSpace(c);\n      });\n    };\n    var findContent = function (start, node, offset) {\n      return walkText(start, node, offset, isContent);\n    };\n    var findWordEndPoint = function (dom, body, container, offset, start, includeTrailingSpaces) {\n      var lastTextNode;\n      var rootNode = dom.getParent(container, dom.isBlock) || body;\n      var walk = function (container, offset, pred) {\n        var textSeeker = TextSeeker(dom);\n        var walker = start ? textSeeker.backwards : textSeeker.forwards;\n        return Optional.from(walker(container, offset, function (text, textOffset) {\n          if (isBookmarkNode(text.parentNode)) {\n            return -1;\n          } else {\n            lastTextNode = text;\n            return pred(start, text, textOffset);\n          }\n        }, rootNode));\n      };\n      var spaceResult = walk(container, offset, findSpace);\n      return spaceResult.bind(function (result) {\n        return includeTrailingSpaces ? walk(result.container, result.offset + (start ? -1 : 0), findContent) : Optional.some(result);\n      }).orThunk(function () {\n        return lastTextNode ? Optional.some({\n          container: lastTextNode,\n          offset: start ? 0 : lastTextNode.length\n        }) : Optional.none();\n      });\n    };\n    var findSelectorEndPoint = function (dom, formatList, rng, container, siblingName) {\n      if (isText$7(container) && isEmpty$3(container.data) && container[siblingName]) {\n        container = container[siblingName];\n      }\n      var parents = getParents$1(dom, container);\n      for (var i = 0; i < parents.length; i++) {\n        for (var y = 0; y < formatList.length; y++) {\n          var curFormat = formatList[y];\n          if (isNonNullable(curFormat.collapsed) && curFormat.collapsed !== rng.collapsed) {\n            continue;\n          }\n          if (isSelectorFormat(curFormat) && dom.is(parents[i], curFormat.selector)) {\n            return parents[i];\n          }\n        }\n      }\n      return container;\n    };\n    var findBlockEndPoint = function (editor, formatList, container, siblingName) {\n      var node = container;\n      var dom = editor.dom;\n      var root = dom.getRoot();\n      var format = formatList[0];\n      if (isBlockFormat(format) && !format.wrapper) {\n        node = dom.getParent(container, format.block, root);\n      }\n      if (!node) {\n        var scopeRoot = dom.getParent(container, 'LI,TD,TH');\n        node = dom.getParent(isText$7(container) ? container.parentNode : container, function (node) {\n          return node !== root && isTextBlock(editor, node);\n        }, scopeRoot);\n      }\n      if (node && isBlockFormat(format) && format.wrapper) {\n        node = getParents$1(dom, node, 'ul,ol').reverse()[0] || node;\n      }\n      if (!node) {\n        node = container;\n        while (node[siblingName] && !dom.isBlock(node[siblingName])) {\n          node = node[siblingName];\n          if (isEq$5(node, 'br')) {\n            break;\n          }\n        }\n      }\n      return node || container;\n    };\n    var isAtBlockBoundary$1 = function (dom, root, container, siblingName) {\n      var parent = container.parentNode;\n      if (isNonNullable(container[siblingName])) {\n        return false;\n      } else if (parent === root || isNullable(parent) || dom.isBlock(parent)) {\n        return true;\n      } else {\n        return isAtBlockBoundary$1(dom, root, parent, siblingName);\n      }\n    };\n    var findParentContainer = function (dom, formatList, container, offset, start) {\n      var parent = container;\n      var siblingName = start ? 'previousSibling' : 'nextSibling';\n      var root = dom.getRoot();\n      if (isText$7(container) && !isWhiteSpaceNode(container)) {\n        if (start ? offset > 0 : offset < container.data.length) {\n          return container;\n        }\n      }\n      while (true) {\n        if (!formatList[0].block_expand && dom.isBlock(parent)) {\n          return parent;\n        }\n        for (var sibling = parent[siblingName]; sibling; sibling = sibling[siblingName]) {\n          var allowSpaces = isText$7(sibling) && !isAtBlockBoundary$1(dom, root, sibling, siblingName);\n          if (!isBookmarkNode(sibling) && !isBogusBr(sibling) && !isWhiteSpaceNode(sibling, allowSpaces)) {\n            return parent;\n          }\n        }\n        if (parent === root || parent.parentNode === root) {\n          container = parent;\n          break;\n        }\n        parent = parent.parentNode;\n      }\n      return container;\n    };\n    var isSelfOrParentBookmark = function (container) {\n      return isBookmarkNode(container.parentNode) || isBookmarkNode(container);\n    };\n    var expandRng = function (editor, rng, formatList, includeTrailingSpace) {\n      if (includeTrailingSpace === void 0) {\n        includeTrailingSpace = false;\n      }\n      var startContainer = rng.startContainer, startOffset = rng.startOffset, endContainer = rng.endContainer, endOffset = rng.endOffset;\n      var dom = editor.dom;\n      var format = formatList[0];\n      if (isElement$5(startContainer) && startContainer.hasChildNodes()) {\n        startContainer = getNode$1(startContainer, startOffset);\n        if (isText$7(startContainer)) {\n          startOffset = 0;\n        }\n      }\n      if (isElement$5(endContainer) && endContainer.hasChildNodes()) {\n        endContainer = getNode$1(endContainer, rng.collapsed ? endOffset : endOffset - 1);\n        if (isText$7(endContainer)) {\n          endOffset = endContainer.nodeValue.length;\n        }\n      }\n      startContainer = findParentContentEditable(dom, startContainer);\n      endContainer = findParentContentEditable(dom, endContainer);\n      if (isSelfOrParentBookmark(startContainer)) {\n        startContainer = isBookmarkNode(startContainer) ? startContainer : startContainer.parentNode;\n        if (rng.collapsed) {\n          startContainer = startContainer.previousSibling || startContainer;\n        } else {\n          startContainer = startContainer.nextSibling || startContainer;\n        }\n        if (isText$7(startContainer)) {\n          startOffset = rng.collapsed ? startContainer.length : 0;\n        }\n      }\n      if (isSelfOrParentBookmark(endContainer)) {\n        endContainer = isBookmarkNode(endContainer) ? endContainer : endContainer.parentNode;\n        if (rng.collapsed) {\n          endContainer = endContainer.nextSibling || endContainer;\n        } else {\n          endContainer = endContainer.previousSibling || endContainer;\n        }\n        if (isText$7(endContainer)) {\n          endOffset = rng.collapsed ? 0 : endContainer.length;\n        }\n      }\n      if (rng.collapsed) {\n        var startPoint = findWordEndPoint(dom, editor.getBody(), startContainer, startOffset, true, includeTrailingSpace);\n        startPoint.each(function (_a) {\n          var container = _a.container, offset = _a.offset;\n          startContainer = container;\n          startOffset = offset;\n        });\n        var endPoint = findWordEndPoint(dom, editor.getBody(), endContainer, endOffset, false, includeTrailingSpace);\n        endPoint.each(function (_a) {\n          var container = _a.container, offset = _a.offset;\n          endContainer = container;\n          endOffset = offset;\n        });\n      }\n      if (isInlineFormat(format) || format.block_expand) {\n        if (!isInlineFormat(format) || (!isText$7(startContainer) || startOffset === 0)) {\n          startContainer = findParentContainer(dom, formatList, startContainer, startOffset, true);\n        }\n        if (!isInlineFormat(format) || (!isText$7(endContainer) || endOffset === endContainer.nodeValue.length)) {\n          endContainer = findParentContainer(dom, formatList, endContainer, endOffset, false);\n        }\n      }\n      if (shouldExpandToSelector(format)) {\n        startContainer = findSelectorEndPoint(dom, formatList, rng, startContainer, 'previousSibling');\n        endContainer = findSelectorEndPoint(dom, formatList, rng, endContainer, 'nextSibling');\n      }\n      if (isBlockFormat(format) || isSelectorFormat(format)) {\n        startContainer = findBlockEndPoint(editor, formatList, startContainer, 'previousSibling');\n        endContainer = findBlockEndPoint(editor, formatList, endContainer, 'nextSibling');\n        if (isBlockFormat(format)) {\n          if (!dom.isBlock(startContainer)) {\n            startContainer = findParentContainer(dom, formatList, startContainer, startOffset, true);\n          }\n          if (!dom.isBlock(endContainer)) {\n            endContainer = findParentContainer(dom, formatList, endContainer, endOffset, false);\n          }\n        }\n      }\n      if (isElement$5(startContainer)) {\n        startOffset = dom.nodeIndex(startContainer);\n        startContainer = startContainer.parentNode;\n      }\n      if (isElement$5(endContainer)) {\n        endOffset = dom.nodeIndex(endContainer) + 1;\n        endContainer = endContainer.parentNode;\n      }\n      return {\n        startContainer: startContainer,\n        startOffset: startOffset,\n        endContainer: endContainer,\n        endOffset: endOffset\n      };\n    };\n\n    var walk$2 = function (dom, rng, callback) {\n      var startOffset = rng.startOffset;\n      var startContainer = getNode$1(rng.startContainer, startOffset);\n      var endOffset = rng.endOffset;\n      var endContainer = getNode$1(rng.endContainer, endOffset - 1);\n      var exclude = function (nodes) {\n        var firstNode = nodes[0];\n        if (isText$7(firstNode) && firstNode === startContainer && startOffset >= firstNode.data.length) {\n          nodes.splice(0, 1);\n        }\n        var lastNode = nodes[nodes.length - 1];\n        if (endOffset === 0 && nodes.length > 0 && lastNode === endContainer && isText$7(lastNode)) {\n          nodes.splice(nodes.length - 1, 1);\n        }\n        return nodes;\n      };\n      var collectSiblings = function (node, name, endNode) {\n        var siblings = [];\n        for (; node && node !== endNode; node = node[name]) {\n          siblings.push(node);\n        }\n        return siblings;\n      };\n      var findEndPoint = function (node, root) {\n        return dom.getParent(node, function (node) {\n          return node.parentNode === root;\n        }, root);\n      };\n      var walkBoundary = function (startNode, endNode, next) {\n        var siblingName = next ? 'nextSibling' : 'previousSibling';\n        for (var node = startNode, parent_1 = node.parentNode; node && node !== endNode; node = parent_1) {\n          parent_1 = node.parentNode;\n          var siblings_1 = collectSiblings(node === startNode ? node : node[siblingName], siblingName);\n          if (siblings_1.length) {\n            if (!next) {\n              siblings_1.reverse();\n            }\n            callback(exclude(siblings_1));\n          }\n        }\n      };\n      if (startContainer === endContainer) {\n        return callback(exclude([startContainer]));\n      }\n      var ancestor = dom.findCommonAncestor(startContainer, endContainer);\n      if (dom.isChildOf(startContainer, endContainer)) {\n        return walkBoundary(startContainer, ancestor, true);\n      }\n      if (dom.isChildOf(endContainer, startContainer)) {\n        return walkBoundary(endContainer, ancestor);\n      }\n      var startPoint = findEndPoint(startContainer, ancestor) || startContainer;\n      var endPoint = findEndPoint(endContainer, ancestor) || endContainer;\n      walkBoundary(startContainer, startPoint, true);\n      var siblings = collectSiblings(startPoint === startContainer ? startPoint : startPoint.nextSibling, 'nextSibling', endPoint === endContainer ? endPoint.nextSibling : endPoint);\n      if (siblings.length) {\n        callback(exclude(siblings));\n      }\n      walkBoundary(endContainer, endPoint);\n    };\n\n    var getRanges = function (selection) {\n      var ranges = [];\n      if (selection) {\n        for (var i = 0; i < selection.rangeCount; i++) {\n          ranges.push(selection.getRangeAt(i));\n        }\n      }\n      return ranges;\n    };\n    var getSelectedNodes = function (ranges) {\n      return bind(ranges, function (range) {\n        var node = getSelectedNode(range);\n        return node ? [SugarElement.fromDom(node)] : [];\n      });\n    };\n    var hasMultipleRanges = function (selection) {\n      return getRanges(selection).length > 1;\n    };\n\n    var getCellsFromRanges = function (ranges) {\n      return filter$4(getSelectedNodes(ranges), isTableCell$4);\n    };\n    var getCellsFromElement = function (elm) {\n      return descendants(elm, 'td[data-mce-selected],th[data-mce-selected]');\n    };\n    var getCellsFromElementOrRanges = function (ranges, element) {\n      var selectedCells = getCellsFromElement(element);\n      return selectedCells.length > 0 ? selectedCells : getCellsFromRanges(ranges);\n    };\n    var getCellsFromEditor = function (editor) {\n      return getCellsFromElementOrRanges(getRanges(editor.selection.getSel()), SugarElement.fromDom(editor.getBody()));\n    };\n    var getClosestTable = function (cell, isRoot) {\n      return ancestor$2(cell, 'table', isRoot);\n    };\n\n    var getStartNode = function (rng) {\n      var sc = rng.startContainer, so = rng.startOffset;\n      if (isText$7(sc)) {\n        return so === 0 ? Optional.some(SugarElement.fromDom(sc)) : Optional.none();\n      } else {\n        return Optional.from(sc.childNodes[so]).map(SugarElement.fromDom);\n      }\n    };\n    var getEndNode = function (rng) {\n      var ec = rng.endContainer, eo = rng.endOffset;\n      if (isText$7(ec)) {\n        return eo === ec.data.length ? Optional.some(SugarElement.fromDom(ec)) : Optional.none();\n      } else {\n        return Optional.from(ec.childNodes[eo - 1]).map(SugarElement.fromDom);\n      }\n    };\n    var getFirstChildren = function (node) {\n      return firstChild(node).fold(constant([node]), function (child) {\n        return [node].concat(getFirstChildren(child));\n      });\n    };\n    var getLastChildren$1 = function (node) {\n      return lastChild(node).fold(constant([node]), function (child) {\n        if (name(child) === 'br') {\n          return prevSibling(child).map(function (sibling) {\n            return [node].concat(getLastChildren$1(sibling));\n          }).getOr([]);\n        } else {\n          return [node].concat(getLastChildren$1(child));\n        }\n      });\n    };\n    var hasAllContentsSelected = function (elm, rng) {\n      return lift2(getStartNode(rng), getEndNode(rng), function (startNode, endNode) {\n        var start = find$3(getFirstChildren(elm), curry(eq, startNode));\n        var end = find$3(getLastChildren$1(elm), curry(eq, endNode));\n        return start.isSome() && end.isSome();\n      }).getOr(false);\n    };\n    var moveEndPoint = function (dom, rng, node, start) {\n      var root = node, walker = new DomTreeWalker(node, root);\n      var moveCaretBeforeOnEnterElementsMap = filter$3(dom.schema.getMoveCaretBeforeOnEnterElements(), function (_, name) {\n        return !contains$3([\n          'td',\n          'th',\n          'table'\n        ], name.toLowerCase());\n      });\n      do {\n        if (isText$7(node) && Tools.trim(node.nodeValue).length !== 0) {\n          if (start) {\n            rng.setStart(node, 0);\n          } else {\n            rng.setEnd(node, node.nodeValue.length);\n          }\n          return;\n        }\n        if (moveCaretBeforeOnEnterElementsMap[node.nodeName]) {\n          if (start) {\n            rng.setStartBefore(node);\n          } else {\n            if (node.nodeName === 'BR') {\n              rng.setEndBefore(node);\n            } else {\n              rng.setEndAfter(node);\n            }\n          }\n          return;\n        }\n      } while (node = start ? walker.next() : walker.prev());\n      if (root.nodeName === 'BODY') {\n        if (start) {\n          rng.setStart(root, 0);\n        } else {\n          rng.setEnd(root, root.childNodes.length);\n        }\n      }\n    };\n    var hasAnyRanges = function (editor) {\n      var sel = editor.selection.getSel();\n      return sel && sel.rangeCount > 0;\n    };\n    var runOnRanges = function (editor, executor) {\n      var fakeSelectionNodes = getCellsFromEditor(editor);\n      if (fakeSelectionNodes.length > 0) {\n        each$k(fakeSelectionNodes, function (elem) {\n          var node = elem.dom;\n          var fakeNodeRng = editor.dom.createRng();\n          fakeNodeRng.setStartBefore(node);\n          fakeNodeRng.setEndAfter(node);\n          executor(fakeNodeRng, true);\n        });\n      } else {\n        executor(editor.selection.getRng(), false);\n      }\n    };\n    var preserve = function (selection, fillBookmark, executor) {\n      var bookmark = getPersistentBookmark(selection, fillBookmark);\n      executor(bookmark);\n      selection.moveToBookmark(bookmark);\n    };\n\n    var NodeValue = function (is, name) {\n      var get = function (element) {\n        if (!is(element)) {\n          throw new Error('Can only get ' + name + ' value of a ' + name + ' node');\n        }\n        return getOption(element).getOr('');\n      };\n      var getOption = function (element) {\n        return is(element) ? Optional.from(element.dom.nodeValue) : Optional.none();\n      };\n      var set = function (element, value) {\n        if (!is(element)) {\n          throw new Error('Can only set raw ' + name + ' value of a ' + name + ' node');\n        }\n        element.dom.nodeValue = value;\n      };\n      return {\n        get: get,\n        getOption: getOption,\n        set: set\n      };\n    };\n\n    var api$1 = NodeValue(isText$8, 'text');\n    var get$2 = function (element) {\n      return api$1.get(element);\n    };\n\n    var isZeroWidth = function (elem) {\n      return isText$8(elem) && get$2(elem) === ZWSP$1;\n    };\n    var context = function (editor, elem, wrapName, nodeName) {\n      return parent(elem).fold(function () {\n        return 'skipping';\n      }, function (parent) {\n        if (nodeName === 'br' || isZeroWidth(elem)) {\n          return 'valid';\n        } else if (isAnnotation(elem)) {\n          return 'existing';\n        } else if (isCaretNode(elem.dom)) {\n          return 'caret';\n        } else if (!isValid(editor, wrapName, nodeName) || !isValid(editor, name(parent), wrapName)) {\n          return 'invalid-child';\n        } else {\n          return 'valid';\n        }\n      });\n    };\n\n    var applyWordGrab = function (editor, rng) {\n      var r = expandRng(editor, rng, [{ inline: 'span' }]);\n      rng.setStart(r.startContainer, r.startOffset);\n      rng.setEnd(r.endContainer, r.endOffset);\n      editor.selection.setRng(rng);\n    };\n    var makeAnnotation = function (eDoc, _a, annotationName, decorate) {\n      var _b = _a.uid, uid = _b === void 0 ? generate('mce-annotation') : _b, data = __rest(_a, ['uid']);\n      var master = SugarElement.fromTag('span', eDoc);\n      add$1(master, annotation());\n      set$1(master, '' + dataAnnotationId(), uid);\n      set$1(master, '' + dataAnnotation(), annotationName);\n      var _c = decorate(uid, data), _d = _c.attributes, attributes = _d === void 0 ? {} : _d, _e = _c.classes, classes = _e === void 0 ? [] : _e;\n      setAll$1(master, attributes);\n      add(master, classes);\n      return master;\n    };\n    var annotate = function (editor, rng, annotationName, decorate, data) {\n      var newWrappers = [];\n      var master = makeAnnotation(editor.getDoc(), data, annotationName, decorate);\n      var wrapper = value();\n      var finishWrapper = function () {\n        wrapper.clear();\n      };\n      var getOrOpenWrapper = function () {\n        return wrapper.get().getOrThunk(function () {\n          var nu = shallow(master);\n          newWrappers.push(nu);\n          wrapper.set(nu);\n          return nu;\n        });\n      };\n      var processElements = function (elems) {\n        each$k(elems, processElement);\n      };\n      var processElement = function (elem) {\n        var ctx = context(editor, elem, 'span', name(elem));\n        switch (ctx) {\n        case 'invalid-child': {\n            finishWrapper();\n            var children$1 = children(elem);\n            processElements(children$1);\n            finishWrapper();\n            break;\n          }\n        case 'valid': {\n            var w = getOrOpenWrapper();\n            wrap$3(elem, w);\n            break;\n          }\n        }\n      };\n      var processNodes = function (nodes) {\n        var elems = map$3(nodes, SugarElement.fromDom);\n        processElements(elems);\n      };\n      walk$2(editor.dom, rng, function (nodes) {\n        finishWrapper();\n        processNodes(nodes);\n      });\n      return newWrappers;\n    };\n    var annotateWithBookmark = function (editor, name, settings, data) {\n      editor.undoManager.transact(function () {\n        var selection = editor.selection;\n        var initialRng = selection.getRng();\n        var hasFakeSelection = getCellsFromEditor(editor).length > 0;\n        if (initialRng.collapsed && !hasFakeSelection) {\n          applyWordGrab(editor, initialRng);\n        }\n        if (selection.getRng().collapsed && !hasFakeSelection) {\n          var wrapper = makeAnnotation(editor.getDoc(), data, name, settings.decorate);\n          set(wrapper, nbsp);\n          selection.getRng().insertNode(wrapper.dom);\n          selection.select(wrapper.dom);\n        } else {\n          preserve(selection, false, function () {\n            runOnRanges(editor, function (selectionRng) {\n              annotate(editor, selectionRng, name, settings.decorate, data);\n            });\n          });\n        }\n      });\n    };\n\n    var Annotator = function (editor) {\n      var registry = create$7();\n      setup$m(editor, registry);\n      var changes = setup$n(editor);\n      return {\n        register: function (name, settings) {\n          registry.register(name, settings);\n        },\n        annotate: function (name, data) {\n          registry.lookup(name).each(function (settings) {\n            annotateWithBookmark(editor, name, settings, data);\n          });\n        },\n        annotationChanged: function (name, callback) {\n          changes.addListener(name, callback);\n        },\n        remove: function (name) {\n          identify(editor, Optional.some(name)).each(function (_a) {\n            var elements = _a.elements;\n            each$k(elements, unwrap);\n          });\n        },\n        getAll: function (name) {\n          var directory = findAll(editor, name);\n          return map$2(directory, function (elems) {\n            return map$3(elems, function (elem) {\n              return elem.dom;\n            });\n          });\n        }\n      };\n    };\n\n    var BookmarkManager = function (selection) {\n      return {\n        getBookmark: curry(getBookmark$1, selection),\n        moveToBookmark: curry(moveToBookmark, selection)\n      };\n    };\n    BookmarkManager.isBookmarkNode = isBookmarkNode$1;\n\n    var getContentEditableRoot$1 = function (root, node) {\n      while (node && node !== root) {\n        if (isContentEditableTrue$4(node) || isContentEditableFalse$b(node)) {\n          return node;\n        }\n        node = node.parentNode;\n      }\n      return null;\n    };\n\n    var isXYWithinRange = function (clientX, clientY, range) {\n      if (range.collapsed) {\n        return false;\n      }\n      if (Env.browser.isIE() && range.startOffset === range.endOffset - 1 && range.startContainer === range.endContainer) {\n        var elm = range.startContainer.childNodes[range.startOffset];\n        if (isElement$5(elm)) {\n          return exists(elm.getClientRects(), function (rect) {\n            return containsXY(rect, clientX, clientY);\n          });\n        }\n      }\n      return exists(range.getClientRects(), function (rect) {\n        return containsXY(rect, clientX, clientY);\n      });\n    };\n\n    var firePreProcess = function (editor, args) {\n      return editor.fire('PreProcess', args);\n    };\n    var firePostProcess = function (editor, args) {\n      return editor.fire('PostProcess', args);\n    };\n    var fireRemove = function (editor) {\n      return editor.fire('remove');\n    };\n    var fireDetach = function (editor) {\n      return editor.fire('detach');\n    };\n    var fireSwitchMode = function (editor, mode) {\n      return editor.fire('SwitchMode', { mode: mode });\n    };\n    var fireObjectResizeStart = function (editor, target, width, height, origin) {\n      editor.fire('ObjectResizeStart', {\n        target: target,\n        width: width,\n        height: height,\n        origin: origin\n      });\n    };\n    var fireObjectResized = function (editor, target, width, height, origin) {\n      editor.fire('ObjectResized', {\n        target: target,\n        width: width,\n        height: height,\n        origin: origin\n      });\n    };\n    var firePreInit = function (editor) {\n      return editor.fire('PreInit');\n    };\n    var firePostRender = function (editor) {\n      return editor.fire('PostRender');\n    };\n    var fireInit = function (editor) {\n      return editor.fire('Init');\n    };\n    var firePlaceholderToggle = function (editor, state) {\n      return editor.fire('PlaceholderToggle', { state: state });\n    };\n    var fireError = function (editor, errorType, error) {\n      return editor.fire(errorType, error);\n    };\n    var fireFormatApply = function (editor, format, node, vars) {\n      return editor.fire('FormatApply', {\n        format: format,\n        node: node,\n        vars: vars\n      });\n    };\n    var fireFormatRemove = function (editor, format, node, vars) {\n      return editor.fire('FormatRemove', {\n        format: format,\n        node: node,\n        vars: vars\n      });\n    };\n\n    var VK = {\n      BACKSPACE: 8,\n      DELETE: 46,\n      DOWN: 40,\n      ENTER: 13,\n      LEFT: 37,\n      RIGHT: 39,\n      SPACEBAR: 32,\n      TAB: 9,\n      UP: 38,\n      PAGE_UP: 33,\n      PAGE_DOWN: 34,\n      END: 35,\n      HOME: 36,\n      modifierPressed: function (e) {\n        return e.shiftKey || e.ctrlKey || e.altKey || VK.metaKeyPressed(e);\n      },\n      metaKeyPressed: function (e) {\n        return Env.mac ? e.metaKey : e.ctrlKey && !e.altKey;\n      }\n    };\n\n    var isContentEditableFalse$5 = isContentEditableFalse$b;\n    var ControlSelection = function (selection, editor) {\n      var elementSelectionAttr = 'data-mce-selected';\n      var dom = editor.dom, each = Tools.each;\n      var selectedElm, selectedElmGhost, resizeHelper, selectedHandle, resizeBackdrop;\n      var startX, startY, selectedElmX, selectedElmY, startW, startH, ratio, resizeStarted;\n      var width, height;\n      var editableDoc = editor.getDoc(), rootDocument = document;\n      var abs = Math.abs, round = Math.round, rootElement = editor.getBody();\n      var startScrollWidth, startScrollHeight;\n      var resizeHandles = {\n        nw: [\n          0,\n          0,\n          -1,\n          -1\n        ],\n        ne: [\n          1,\n          0,\n          1,\n          -1\n        ],\n        se: [\n          1,\n          1,\n          1,\n          1\n        ],\n        sw: [\n          0,\n          1,\n          -1,\n          1\n        ]\n      };\n      var isImage = function (elm) {\n        return elm && (elm.nodeName === 'IMG' || editor.dom.is(elm, 'figure.image'));\n      };\n      var isMedia = function (elm) {\n        return isMedia$2(elm) || dom.hasClass(elm, 'mce-preview-object');\n      };\n      var isEventOnImageOutsideRange = function (evt, range) {\n        if (evt.type === 'longpress' || evt.type.indexOf('touch') === 0) {\n          var touch = evt.touches[0];\n          return isImage(evt.target) && !isXYWithinRange(touch.clientX, touch.clientY, range);\n        } else {\n          return isImage(evt.target) && !isXYWithinRange(evt.clientX, evt.clientY, range);\n        }\n      };\n      var contextMenuSelectImage = function (evt) {\n        var target = evt.target;\n        if (isEventOnImageOutsideRange(evt, editor.selection.getRng()) && !evt.isDefaultPrevented()) {\n          editor.selection.select(target);\n        }\n      };\n      var getResizeTargets = function (elm) {\n        if (dom.is(elm, 'figure.image')) {\n          return [elm.querySelector('img')];\n        } else if (dom.hasClass(elm, 'mce-preview-object') && isNonNullable(elm.firstElementChild)) {\n          return [\n            elm,\n            elm.firstElementChild\n          ];\n        } else {\n          return [elm];\n        }\n      };\n      var isResizable = function (elm) {\n        var selector = getObjectResizing(editor);\n        if (!selector) {\n          return false;\n        }\n        if (elm.getAttribute('data-mce-resize') === 'false') {\n          return false;\n        }\n        if (elm === editor.getBody()) {\n          return false;\n        }\n        if (dom.hasClass(elm, 'mce-preview-object')) {\n          return is$2(SugarElement.fromDom(elm.firstElementChild), selector);\n        } else {\n          return is$2(SugarElement.fromDom(elm), selector);\n        }\n      };\n      var createGhostElement = function (elm) {\n        if (isMedia(elm)) {\n          return dom.create('img', { src: Env.transparentSrc });\n        } else {\n          return elm.cloneNode(true);\n        }\n      };\n      var setSizeProp = function (element, name, value) {\n        if (isNonNullable(value)) {\n          var targets = getResizeTargets(element);\n          each$k(targets, function (target) {\n            if (target.style[name] || !editor.schema.isValid(target.nodeName.toLowerCase(), name)) {\n              dom.setStyle(target, name, value);\n            } else {\n              dom.setAttrib(target, name, '' + value);\n            }\n          });\n        }\n      };\n      var setGhostElmSize = function (ghostElm, width, height) {\n        setSizeProp(ghostElm, 'width', width);\n        setSizeProp(ghostElm, 'height', height);\n      };\n      var resizeGhostElement = function (e) {\n        var deltaX, deltaY, proportional;\n        var resizeHelperX, resizeHelperY;\n        deltaX = e.screenX - startX;\n        deltaY = e.screenY - startY;\n        width = deltaX * selectedHandle[2] + startW;\n        height = deltaY * selectedHandle[3] + startH;\n        width = width < 5 ? 5 : width;\n        height = height < 5 ? 5 : height;\n        if ((isImage(selectedElm) || isMedia(selectedElm)) && getResizeImgProportional(editor) !== false) {\n          proportional = !VK.modifierPressed(e);\n        } else {\n          proportional = VK.modifierPressed(e);\n        }\n        if (proportional) {\n          if (abs(deltaX) > abs(deltaY)) {\n            height = round(width * ratio);\n            width = round(height / ratio);\n          } else {\n            width = round(height / ratio);\n            height = round(width * ratio);\n          }\n        }\n        setGhostElmSize(selectedElmGhost, width, height);\n        resizeHelperX = selectedHandle.startPos.x + deltaX;\n        resizeHelperY = selectedHandle.startPos.y + deltaY;\n        resizeHelperX = resizeHelperX > 0 ? resizeHelperX : 0;\n        resizeHelperY = resizeHelperY > 0 ? resizeHelperY : 0;\n        dom.setStyles(resizeHelper, {\n          left: resizeHelperX,\n          top: resizeHelperY,\n          display: 'block'\n        });\n        resizeHelper.innerHTML = width + ' &times; ' + height;\n        if (selectedHandle[2] < 0 && selectedElmGhost.clientWidth <= width) {\n          dom.setStyle(selectedElmGhost, 'left', selectedElmX + (startW - width));\n        }\n        if (selectedHandle[3] < 0 && selectedElmGhost.clientHeight <= height) {\n          dom.setStyle(selectedElmGhost, 'top', selectedElmY + (startH - height));\n        }\n        deltaX = rootElement.scrollWidth - startScrollWidth;\n        deltaY = rootElement.scrollHeight - startScrollHeight;\n        if (deltaX + deltaY !== 0) {\n          dom.setStyles(resizeHelper, {\n            left: resizeHelperX - deltaX,\n            top: resizeHelperY - deltaY\n          });\n        }\n        if (!resizeStarted) {\n          fireObjectResizeStart(editor, selectedElm, startW, startH, 'corner-' + selectedHandle.name);\n          resizeStarted = true;\n        }\n      };\n      var endGhostResize = function () {\n        var wasResizeStarted = resizeStarted;\n        resizeStarted = false;\n        if (wasResizeStarted) {\n          setSizeProp(selectedElm, 'width', width);\n          setSizeProp(selectedElm, 'height', height);\n        }\n        dom.unbind(editableDoc, 'mousemove', resizeGhostElement);\n        dom.unbind(editableDoc, 'mouseup', endGhostResize);\n        if (rootDocument !== editableDoc) {\n          dom.unbind(rootDocument, 'mousemove', resizeGhostElement);\n          dom.unbind(rootDocument, 'mouseup', endGhostResize);\n        }\n        dom.remove(selectedElmGhost);\n        dom.remove(resizeHelper);\n        dom.remove(resizeBackdrop);\n        showResizeRect(selectedElm);\n        if (wasResizeStarted) {\n          fireObjectResized(editor, selectedElm, width, height, 'corner-' + selectedHandle.name);\n          dom.setAttrib(selectedElm, 'style', dom.getAttrib(selectedElm, 'style'));\n        }\n        editor.nodeChanged();\n      };\n      var showResizeRect = function (targetElm) {\n        unbindResizeHandleEvents();\n        var position = dom.getPos(targetElm, rootElement);\n        var selectedElmX = position.x;\n        var selectedElmY = position.y;\n        var rect = targetElm.getBoundingClientRect();\n        var targetWidth = rect.width || rect.right - rect.left;\n        var targetHeight = rect.height || rect.bottom - rect.top;\n        if (selectedElm !== targetElm) {\n          hideResizeRect();\n          selectedElm = targetElm;\n          width = height = 0;\n        }\n        var e = editor.fire('ObjectSelected', { target: targetElm });\n        var selectedValue = dom.getAttrib(selectedElm, elementSelectionAttr, '1');\n        if (isResizable(targetElm) && !e.isDefaultPrevented()) {\n          each(resizeHandles, function (handle, name) {\n            var handleElm;\n            var startDrag = function (e) {\n              var target = getResizeTargets(selectedElm)[0];\n              startX = e.screenX;\n              startY = e.screenY;\n              startW = target.clientWidth;\n              startH = target.clientHeight;\n              ratio = startH / startW;\n              selectedHandle = handle;\n              selectedHandle.name = name;\n              selectedHandle.startPos = {\n                x: targetWidth * handle[0] + selectedElmX,\n                y: targetHeight * handle[1] + selectedElmY\n              };\n              startScrollWidth = rootElement.scrollWidth;\n              startScrollHeight = rootElement.scrollHeight;\n              resizeBackdrop = dom.add(rootElement, 'div', { class: 'mce-resize-backdrop' });\n              dom.setStyles(resizeBackdrop, {\n                position: 'fixed',\n                left: '0',\n                top: '0',\n                width: '100%',\n                height: '100%'\n              });\n              selectedElmGhost = createGhostElement(selectedElm);\n              dom.addClass(selectedElmGhost, 'mce-clonedresizable');\n              dom.setAttrib(selectedElmGhost, 'data-mce-bogus', 'all');\n              selectedElmGhost.contentEditable = 'false';\n              dom.setStyles(selectedElmGhost, {\n                left: selectedElmX,\n                top: selectedElmY,\n                margin: 0\n              });\n              setGhostElmSize(selectedElmGhost, targetWidth, targetHeight);\n              selectedElmGhost.removeAttribute(elementSelectionAttr);\n              rootElement.appendChild(selectedElmGhost);\n              dom.bind(editableDoc, 'mousemove', resizeGhostElement);\n              dom.bind(editableDoc, 'mouseup', endGhostResize);\n              if (rootDocument !== editableDoc) {\n                dom.bind(rootDocument, 'mousemove', resizeGhostElement);\n                dom.bind(rootDocument, 'mouseup', endGhostResize);\n              }\n              resizeHelper = dom.add(rootElement, 'div', {\n                'class': 'mce-resize-helper',\n                'data-mce-bogus': 'all'\n              }, startW + ' &times; ' + startH);\n            };\n            handleElm = dom.get('mceResizeHandle' + name);\n            if (handleElm) {\n              dom.remove(handleElm);\n            }\n            handleElm = dom.add(rootElement, 'div', {\n              'id': 'mceResizeHandle' + name,\n              'data-mce-bogus': 'all',\n              'class': 'mce-resizehandle',\n              'unselectable': true,\n              'style': 'cursor:' + name + '-resize; margin:0; padding:0'\n            });\n            if (Env.ie === 11) {\n              handleElm.contentEditable = false;\n            }\n            dom.bind(handleElm, 'mousedown', function (e) {\n              e.stopImmediatePropagation();\n              e.preventDefault();\n              startDrag(e);\n            });\n            handle.elm = handleElm;\n            dom.setStyles(handleElm, {\n              left: targetWidth * handle[0] + selectedElmX - handleElm.offsetWidth / 2,\n              top: targetHeight * handle[1] + selectedElmY - handleElm.offsetHeight / 2\n            });\n          });\n        } else {\n          hideResizeRect();\n        }\n        if (!dom.getAttrib(selectedElm, elementSelectionAttr)) {\n          selectedElm.setAttribute(elementSelectionAttr, selectedValue);\n        }\n      };\n      var hideResizeRect = function () {\n        unbindResizeHandleEvents();\n        if (selectedElm) {\n          selectedElm.removeAttribute(elementSelectionAttr);\n        }\n        each$j(resizeHandles, function (value, name) {\n          var handleElm = dom.get('mceResizeHandle' + name);\n          if (handleElm) {\n            dom.unbind(handleElm);\n            dom.remove(handleElm);\n          }\n        });\n      };\n      var updateResizeRect = function (e) {\n        var startElm, controlElm;\n        var isChildOrEqual = function (node, parent) {\n          if (node) {\n            do {\n              if (node === parent) {\n                return true;\n              }\n            } while (node = node.parentNode);\n          }\n        };\n        if (resizeStarted || editor.removed) {\n          return;\n        }\n        each(dom.select('img[data-mce-selected],hr[data-mce-selected]'), function (img) {\n          img.removeAttribute(elementSelectionAttr);\n        });\n        controlElm = e.type === 'mousedown' ? e.target : selection.getNode();\n        controlElm = dom.$(controlElm).closest('table,img,figure.image,hr,video,span.mce-preview-object')[0];\n        if (isChildOrEqual(controlElm, rootElement)) {\n          disableGeckoResize();\n          startElm = selection.getStart(true);\n          if (isChildOrEqual(startElm, controlElm) && isChildOrEqual(selection.getEnd(true), controlElm)) {\n            showResizeRect(controlElm);\n            return;\n          }\n        }\n        hideResizeRect();\n      };\n      var isWithinContentEditableFalse = function (elm) {\n        return isContentEditableFalse$5(getContentEditableRoot$1(editor.getBody(), elm));\n      };\n      var unbindResizeHandleEvents = function () {\n        each$j(resizeHandles, function (handle) {\n          if (handle.elm) {\n            dom.unbind(handle.elm);\n            delete handle.elm;\n          }\n        });\n      };\n      var disableGeckoResize = function () {\n        try {\n          editor.getDoc().execCommand('enableObjectResizing', false, 'false');\n        } catch (ex) {\n        }\n      };\n      editor.on('init', function () {\n        disableGeckoResize();\n        if (Env.browser.isIE() || Env.browser.isEdge()) {\n          editor.on('mousedown click', function (e) {\n            var target = e.target, nodeName = target.nodeName;\n            if (!resizeStarted && /^(TABLE|IMG|HR)$/.test(nodeName) && !isWithinContentEditableFalse(target)) {\n              if (e.button !== 2) {\n                editor.selection.select(target, nodeName === 'TABLE');\n              }\n              if (e.type === 'mousedown') {\n                editor.nodeChanged();\n              }\n            }\n          });\n          var handleMSControlSelect_1 = function (e) {\n            var delayedSelect = function (node) {\n              Delay.setEditorTimeout(editor, function () {\n                return editor.selection.select(node);\n              });\n            };\n            if (isWithinContentEditableFalse(e.target) || isMedia$2(e.target)) {\n              e.preventDefault();\n              delayedSelect(e.target);\n              return;\n            }\n            if (/^(TABLE|IMG|HR)$/.test(e.target.nodeName)) {\n              e.preventDefault();\n              if (e.target.tagName === 'IMG') {\n                delayedSelect(e.target);\n              }\n            }\n          };\n          dom.bind(rootElement, 'mscontrolselect', handleMSControlSelect_1);\n          editor.on('remove', function () {\n            return dom.unbind(rootElement, 'mscontrolselect', handleMSControlSelect_1);\n          });\n        }\n        var throttledUpdateResizeRect = Delay.throttle(function (e) {\n          if (!editor.composing) {\n            updateResizeRect(e);\n          }\n        });\n        editor.on('nodechange ResizeEditor ResizeWindow ResizeContent drop FullscreenStateChanged', throttledUpdateResizeRect);\n        editor.on('keyup compositionend', function (e) {\n          if (selectedElm && selectedElm.nodeName === 'TABLE') {\n            throttledUpdateResizeRect(e);\n          }\n        });\n        editor.on('hide blur', hideResizeRect);\n        editor.on('contextmenu longpress', contextMenuSelectImage, true);\n      });\n      editor.on('remove', unbindResizeHandleEvents);\n      var destroy = function () {\n        selectedElm = selectedElmGhost = resizeBackdrop = null;\n      };\n      return {\n        isResizable: isResizable,\n        showResizeRect: showResizeRect,\n        hideResizeRect: hideResizeRect,\n        updateResizeRect: updateResizeRect,\n        destroy: destroy\n      };\n    };\n\n    var hasCeProperty = function (node) {\n      return isContentEditableTrue$4(node) || isContentEditableFalse$b(node);\n    };\n    var findParent$1 = function (node, rootNode, predicate) {\n      while (node && node !== rootNode) {\n        if (predicate(node)) {\n          return node;\n        }\n        node = node.parentNode;\n      }\n      return null;\n    };\n    var findClosestIeRange = function (clientX, clientY, doc) {\n      var rects;\n      var element = doc.elementFromPoint(clientX, clientY);\n      var rng = doc.body.createTextRange();\n      if (!element || element.tagName === 'HTML') {\n        element = doc.body;\n      }\n      rng.moveToElementText(element);\n      rects = Tools.toArray(rng.getClientRects());\n      rects = rects.sort(function (a, b) {\n        a = Math.abs(Math.max(a.top - clientY, a.bottom - clientY));\n        b = Math.abs(Math.max(b.top - clientY, b.bottom - clientY));\n        return a - b;\n      });\n      if (rects.length > 0) {\n        clientY = (rects[0].bottom + rects[0].top) / 2;\n        try {\n          rng.moveToPoint(clientX, clientY);\n          rng.collapse(true);\n          return rng;\n        } catch (ex) {\n        }\n      }\n      return null;\n    };\n    var moveOutOfContentEditableFalse = function (rng, rootNode) {\n      var parentElement = rng && rng.parentElement ? rng.parentElement() : null;\n      return isContentEditableFalse$b(findParent$1(parentElement, rootNode, hasCeProperty)) ? null : rng;\n    };\n    var fromPoint = function (clientX, clientY, doc) {\n      var rng, point;\n      var pointDoc = doc;\n      if (pointDoc.caretPositionFromPoint) {\n        point = pointDoc.caretPositionFromPoint(clientX, clientY);\n        if (point) {\n          rng = doc.createRange();\n          rng.setStart(point.offsetNode, point.offset);\n          rng.collapse(true);\n        }\n      } else if (pointDoc.caretRangeFromPoint) {\n        rng = pointDoc.caretRangeFromPoint(clientX, clientY);\n      } else if (pointDoc.body.createTextRange) {\n        rng = pointDoc.body.createTextRange();\n        try {\n          rng.moveToPoint(clientX, clientY);\n          rng.collapse(true);\n        } catch (ex) {\n          rng = findClosestIeRange(clientX, clientY, doc);\n        }\n        return moveOutOfContentEditableFalse(rng, doc.body);\n      }\n      return rng;\n    };\n\n    var isEq$4 = function (rng1, rng2) {\n      return rng1 && rng2 && (rng1.startContainer === rng2.startContainer && rng1.startOffset === rng2.startOffset) && (rng1.endContainer === rng2.endContainer && rng1.endOffset === rng2.endOffset);\n    };\n\n    var findParent = function (node, rootNode, predicate) {\n      while (node && node !== rootNode) {\n        if (predicate(node)) {\n          return node;\n        }\n        node = node.parentNode;\n      }\n      return null;\n    };\n    var hasParent$1 = function (node, rootNode, predicate) {\n      return findParent(node, rootNode, predicate) !== null;\n    };\n    var hasParentWithName = function (node, rootNode, name) {\n      return hasParent$1(node, rootNode, function (node) {\n        return node.nodeName === name;\n      });\n    };\n    var isTable = function (node) {\n      return node && node.nodeName === 'TABLE';\n    };\n    var isTableCell$2 = function (node) {\n      return node && /^(TD|TH|CAPTION)$/.test(node.nodeName);\n    };\n    var isCeFalseCaretContainer = function (node, rootNode) {\n      return isCaretContainer$2(node) && hasParent$1(node, rootNode, isCaretNode) === false;\n    };\n    var hasBrBeforeAfter = function (dom, node, left) {\n      var walker = new DomTreeWalker(node, dom.getParent(node.parentNode, dom.isBlock) || dom.getRoot());\n      while (node = walker[left ? 'prev' : 'next']()) {\n        if (isBr$5(node)) {\n          return true;\n        }\n      }\n    };\n    var isPrevNode = function (node, name) {\n      return node.previousSibling && node.previousSibling.nodeName === name;\n    };\n    var hasContentEditableFalseParent = function (body, node) {\n      while (node && node !== body) {\n        if (isContentEditableFalse$b(node)) {\n          return true;\n        }\n        node = node.parentNode;\n      }\n      return false;\n    };\n    var findTextNodeRelative = function (dom, isAfterNode, collapsed, left, startNode) {\n      var lastInlineElement;\n      var body = dom.getRoot();\n      var node;\n      var nonEmptyElementsMap = dom.schema.getNonEmptyElements();\n      var parentBlockContainer = dom.getParent(startNode.parentNode, dom.isBlock) || body;\n      if (left && isBr$5(startNode) && isAfterNode && dom.isEmpty(parentBlockContainer)) {\n        return Optional.some(CaretPosition(startNode.parentNode, dom.nodeIndex(startNode)));\n      }\n      var walker = new DomTreeWalker(startNode, parentBlockContainer);\n      while (node = walker[left ? 'prev' : 'next']()) {\n        if (dom.getContentEditableParent(node) === 'false' || isCeFalseCaretContainer(node, body)) {\n          return Optional.none();\n        }\n        if (isText$7(node) && node.nodeValue.length > 0) {\n          if (hasParentWithName(node, body, 'A') === false) {\n            return Optional.some(CaretPosition(node, left ? node.nodeValue.length : 0));\n          }\n          return Optional.none();\n        }\n        if (dom.isBlock(node) || nonEmptyElementsMap[node.nodeName.toLowerCase()]) {\n          return Optional.none();\n        }\n        lastInlineElement = node;\n      }\n      if (collapsed && lastInlineElement) {\n        return Optional.some(CaretPosition(lastInlineElement, 0));\n      }\n      return Optional.none();\n    };\n    var normalizeEndPoint = function (dom, collapsed, start, rng) {\n      var container, offset;\n      var body = dom.getRoot();\n      var node;\n      var directionLeft, normalized = false;\n      container = rng[(start ? 'start' : 'end') + 'Container'];\n      offset = rng[(start ? 'start' : 'end') + 'Offset'];\n      var isAfterNode = isElement$5(container) && offset === container.childNodes.length;\n      var nonEmptyElementsMap = dom.schema.getNonEmptyElements();\n      directionLeft = start;\n      if (isCaretContainer$2(container)) {\n        return Optional.none();\n      }\n      if (isElement$5(container) && offset > container.childNodes.length - 1) {\n        directionLeft = false;\n      }\n      if (isDocument$1(container)) {\n        container = body;\n        offset = 0;\n      }\n      if (container === body) {\n        if (directionLeft) {\n          node = container.childNodes[offset > 0 ? offset - 1 : 0];\n          if (node) {\n            if (isCaretContainer$2(node)) {\n              return Optional.none();\n            }\n            if (nonEmptyElementsMap[node.nodeName] || isTable(node)) {\n              return Optional.none();\n            }\n          }\n        }\n        if (container.hasChildNodes()) {\n          offset = Math.min(!directionLeft && offset > 0 ? offset - 1 : offset, container.childNodes.length - 1);\n          container = container.childNodes[offset];\n          offset = isText$7(container) && isAfterNode ? container.data.length : 0;\n          if (!collapsed && container === body.lastChild && isTable(container)) {\n            return Optional.none();\n          }\n          if (hasContentEditableFalseParent(body, container) || isCaretContainer$2(container)) {\n            return Optional.none();\n          }\n          if (container.hasChildNodes() && isTable(container) === false) {\n            node = container;\n            var walker = new DomTreeWalker(container, body);\n            do {\n              if (isContentEditableFalse$b(node) || isCaretContainer$2(node)) {\n                normalized = false;\n                break;\n              }\n              if (isText$7(node) && node.nodeValue.length > 0) {\n                offset = directionLeft ? 0 : node.nodeValue.length;\n                container = node;\n                normalized = true;\n                break;\n              }\n              if (nonEmptyElementsMap[node.nodeName.toLowerCase()] && !isTableCell$2(node)) {\n                offset = dom.nodeIndex(node);\n                container = node.parentNode;\n                if (!directionLeft) {\n                  offset++;\n                }\n                normalized = true;\n                break;\n              }\n            } while (node = directionLeft ? walker.next() : walker.prev());\n          }\n        }\n      }\n      if (collapsed) {\n        if (isText$7(container) && offset === 0) {\n          findTextNodeRelative(dom, isAfterNode, collapsed, true, container).each(function (pos) {\n            container = pos.container();\n            offset = pos.offset();\n            normalized = true;\n          });\n        }\n        if (isElement$5(container)) {\n          node = container.childNodes[offset];\n          if (!node) {\n            node = container.childNodes[offset - 1];\n          }\n          if (node && isBr$5(node) && !isPrevNode(node, 'A') && !hasBrBeforeAfter(dom, node, false) && !hasBrBeforeAfter(dom, node, true)) {\n            findTextNodeRelative(dom, isAfterNode, collapsed, true, node).each(function (pos) {\n              container = pos.container();\n              offset = pos.offset();\n              normalized = true;\n            });\n          }\n        }\n      }\n      if (directionLeft && !collapsed && isText$7(container) && offset === container.nodeValue.length) {\n        findTextNodeRelative(dom, isAfterNode, collapsed, false, container).each(function (pos) {\n          container = pos.container();\n          offset = pos.offset();\n          normalized = true;\n        });\n      }\n      return normalized ? Optional.some(CaretPosition(container, offset)) : Optional.none();\n    };\n    var normalize$2 = function (dom, rng) {\n      var collapsed = rng.collapsed, normRng = rng.cloneRange();\n      var startPos = CaretPosition.fromRangeStart(rng);\n      normalizeEndPoint(dom, collapsed, true, normRng).each(function (pos) {\n        if (!collapsed || !CaretPosition.isAbove(startPos, pos)) {\n          normRng.setStart(pos.container(), pos.offset());\n        }\n      });\n      if (!collapsed) {\n        normalizeEndPoint(dom, collapsed, false, normRng).each(function (pos) {\n          normRng.setEnd(pos.container(), pos.offset());\n        });\n      }\n      if (collapsed) {\n        normRng.collapse(true);\n      }\n      return isEq$4(rng, normRng) ? Optional.none() : Optional.some(normRng);\n    };\n\n    var splitText = function (node, offset) {\n      return node.splitText(offset);\n    };\n    var split = function (rng) {\n      var startContainer = rng.startContainer, startOffset = rng.startOffset, endContainer = rng.endContainer, endOffset = rng.endOffset;\n      if (startContainer === endContainer && isText$7(startContainer)) {\n        if (startOffset > 0 && startOffset < startContainer.nodeValue.length) {\n          endContainer = splitText(startContainer, startOffset);\n          startContainer = endContainer.previousSibling;\n          if (endOffset > startOffset) {\n            endOffset = endOffset - startOffset;\n            startContainer = endContainer = splitText(endContainer, endOffset).previousSibling;\n            endOffset = endContainer.nodeValue.length;\n            startOffset = 0;\n          } else {\n            endOffset = 0;\n          }\n        }\n      } else {\n        if (isText$7(startContainer) && startOffset > 0 && startOffset < startContainer.nodeValue.length) {\n          startContainer = splitText(startContainer, startOffset);\n          startOffset = 0;\n        }\n        if (isText$7(endContainer) && endOffset > 0 && endOffset < endContainer.nodeValue.length) {\n          endContainer = splitText(endContainer, endOffset).previousSibling;\n          endOffset = endContainer.nodeValue.length;\n        }\n      }\n      return {\n        startContainer: startContainer,\n        startOffset: startOffset,\n        endContainer: endContainer,\n        endOffset: endOffset\n      };\n    };\n\n    var RangeUtils = function (dom) {\n      var walk = function (rng, callback) {\n        return walk$2(dom, rng, callback);\n      };\n      var split$1 = split;\n      var normalize = function (rng) {\n        return normalize$2(dom, rng).fold(never, function (normalizedRng) {\n          rng.setStart(normalizedRng.startContainer, normalizedRng.startOffset);\n          rng.setEnd(normalizedRng.endContainer, normalizedRng.endOffset);\n          return true;\n        });\n      };\n      return {\n        walk: walk,\n        split: split$1,\n        normalize: normalize\n      };\n    };\n    RangeUtils.compareRanges = isEq$4;\n    RangeUtils.getCaretRangeFromPoint = fromPoint;\n    RangeUtils.getSelectedNode = getSelectedNode;\n    RangeUtils.getNode = getNode$1;\n\n    var Dimension = function (name, getOffset) {\n      var set = function (element, h) {\n        if (!isNumber(h) && !h.match(/^[0-9]+$/)) {\n          throw new Error(name + '.set accepts only positive integer values. Value was ' + h);\n        }\n        var dom = element.dom;\n        if (isSupported(dom)) {\n          dom.style[name] = h + 'px';\n        }\n      };\n      var get = function (element) {\n        var r = getOffset(element);\n        if (r <= 0 || r === null) {\n          var css = get$5(element, name);\n          return parseFloat(css) || 0;\n        }\n        return r;\n      };\n      var getOuter = get;\n      var aggregate = function (element, properties) {\n        return foldl(properties, function (acc, property) {\n          var val = get$5(element, property);\n          var value = val === undefined ? 0 : parseInt(val, 10);\n          return isNaN(value) ? acc : acc + value;\n        }, 0);\n      };\n      var max = function (element, value, properties) {\n        var cumulativeInclusions = aggregate(element, properties);\n        var absoluteMax = value > cumulativeInclusions ? value - cumulativeInclusions : 0;\n        return absoluteMax;\n      };\n      return {\n        set: set,\n        get: get,\n        getOuter: getOuter,\n        aggregate: aggregate,\n        max: max\n      };\n    };\n\n    var api = Dimension('height', function (element) {\n      var dom = element.dom;\n      return inBody(element) ? dom.getBoundingClientRect().height : dom.offsetHeight;\n    });\n    var get$1 = function (element) {\n      return api.get(element);\n    };\n\n    var walkUp = function (navigation, doc) {\n      var frame = navigation.view(doc);\n      return frame.fold(constant([]), function (f) {\n        var parent = navigation.owner(f);\n        var rest = walkUp(navigation, parent);\n        return [f].concat(rest);\n      });\n    };\n    var pathTo = function (element, navigation) {\n      var d = navigation.owner(element);\n      return walkUp(navigation, d);\n    };\n\n    var view = function (doc) {\n      var _a;\n      var element = doc.dom === document ? Optional.none() : Optional.from((_a = doc.dom.defaultView) === null || _a === void 0 ? void 0 : _a.frameElement);\n      return element.map(SugarElement.fromDom);\n    };\n    var owner = function (element) {\n      return documentOrOwner(element);\n    };\n\n    var Navigation = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        view: view,\n        owner: owner\n    });\n\n    var find$1 = function (element) {\n      var doc = SugarElement.fromDom(document);\n      var scroll = get$8(doc);\n      var frames = pathTo(element, Navigation);\n      var offset = viewport(element);\n      var r = foldr(frames, function (b, a) {\n        var loc = viewport(a);\n        return {\n          left: b.left + loc.left,\n          top: b.top + loc.top\n        };\n      }, {\n        left: 0,\n        top: 0\n      });\n      return SugarPosition(r.left + offset.left + scroll.left, r.top + offset.top + scroll.top);\n    };\n\n    var excludeFromDescend = function (element) {\n      return name(element) === 'textarea';\n    };\n    var fireScrollIntoViewEvent = function (editor, data) {\n      var scrollEvent = editor.fire('ScrollIntoView', data);\n      return scrollEvent.isDefaultPrevented();\n    };\n    var fireAfterScrollIntoViewEvent = function (editor, data) {\n      editor.fire('AfterScrollIntoView', data);\n    };\n    var descend = function (element, offset) {\n      var children$1 = children(element);\n      if (children$1.length === 0 || excludeFromDescend(element)) {\n        return {\n          element: element,\n          offset: offset\n        };\n      } else if (offset < children$1.length && !excludeFromDescend(children$1[offset])) {\n        return {\n          element: children$1[offset],\n          offset: 0\n        };\n      } else {\n        var last = children$1[children$1.length - 1];\n        if (excludeFromDescend(last)) {\n          return {\n            element: element,\n            offset: offset\n          };\n        } else {\n          if (name(last) === 'img') {\n            return {\n              element: last,\n              offset: 1\n            };\n          } else if (isText$8(last)) {\n            return {\n              element: last,\n              offset: get$2(last).length\n            };\n          } else {\n            return {\n              element: last,\n              offset: children(last).length\n            };\n          }\n        }\n      }\n    };\n    var markerInfo = function (element, cleanupFun) {\n      var pos = absolute(element);\n      var height = get$1(element);\n      return {\n        element: element,\n        bottom: pos.top + height,\n        height: height,\n        pos: pos,\n        cleanup: cleanupFun\n      };\n    };\n    var createMarker = function (element, offset) {\n      var startPoint = descend(element, offset);\n      var span = SugarElement.fromHtml('<span data-mce-bogus=\"all\">' + ZWSP$1 + '</span>');\n      before$4(startPoint.element, span);\n      return markerInfo(span, function () {\n        return remove$7(span);\n      });\n    };\n    var elementMarker = function (element) {\n      return markerInfo(SugarElement.fromDom(element), noop);\n    };\n    var withMarker = function (editor, f, rng, alignToTop) {\n      preserveWith(editor, function (_s, _e) {\n        return applyWithMarker(editor, f, rng, alignToTop);\n      }, rng);\n    };\n    var withScrollEvents = function (editor, doc, f, marker, alignToTop) {\n      var data = {\n        elm: marker.element.dom,\n        alignToTop: alignToTop\n      };\n      if (fireScrollIntoViewEvent(editor, data)) {\n        return;\n      }\n      var scrollTop = get$8(doc).top;\n      f(doc, scrollTop, marker, alignToTop);\n      fireAfterScrollIntoViewEvent(editor, data);\n    };\n    var applyWithMarker = function (editor, f, rng, alignToTop) {\n      var body = SugarElement.fromDom(editor.getBody());\n      var doc = SugarElement.fromDom(editor.getDoc());\n      reflow(body);\n      var marker = createMarker(SugarElement.fromDom(rng.startContainer), rng.startOffset);\n      withScrollEvents(editor, doc, f, marker, alignToTop);\n      marker.cleanup();\n    };\n    var withElement = function (editor, element, f, alignToTop) {\n      var doc = SugarElement.fromDom(editor.getDoc());\n      withScrollEvents(editor, doc, f, elementMarker(element), alignToTop);\n    };\n    var preserveWith = function (editor, f, rng) {\n      var startElement = rng.startContainer;\n      var startOffset = rng.startOffset;\n      var endElement = rng.endContainer;\n      var endOffset = rng.endOffset;\n      f(SugarElement.fromDom(startElement), SugarElement.fromDom(endElement));\n      var newRng = editor.dom.createRng();\n      newRng.setStart(startElement, startOffset);\n      newRng.setEnd(endElement, endOffset);\n      editor.selection.setRng(rng);\n    };\n    var scrollToMarker = function (marker, viewHeight, alignToTop, doc) {\n      var pos = marker.pos;\n      if (alignToTop) {\n        to(pos.left, pos.top, doc);\n      } else {\n        var y = pos.top - viewHeight + marker.height;\n        to(pos.left, y, doc);\n      }\n    };\n    var intoWindowIfNeeded = function (doc, scrollTop, viewHeight, marker, alignToTop) {\n      var viewportBottom = viewHeight + scrollTop;\n      var markerTop = marker.pos.top;\n      var markerBottom = marker.bottom;\n      var largerThanViewport = markerBottom - markerTop >= viewHeight;\n      if (markerTop < scrollTop) {\n        scrollToMarker(marker, viewHeight, alignToTop !== false, doc);\n      } else if (markerTop > viewportBottom) {\n        var align = largerThanViewport ? alignToTop !== false : alignToTop === true;\n        scrollToMarker(marker, viewHeight, align, doc);\n      } else if (markerBottom > viewportBottom && !largerThanViewport) {\n        scrollToMarker(marker, viewHeight, alignToTop === true, doc);\n      }\n    };\n    var intoWindow = function (doc, scrollTop, marker, alignToTop) {\n      var viewHeight = doc.dom.defaultView.innerHeight;\n      intoWindowIfNeeded(doc, scrollTop, viewHeight, marker, alignToTop);\n    };\n    var intoFrame = function (doc, scrollTop, marker, alignToTop) {\n      var frameViewHeight = doc.dom.defaultView.innerHeight;\n      intoWindowIfNeeded(doc, scrollTop, frameViewHeight, marker, alignToTop);\n      var op = find$1(marker.element);\n      var viewportBounds = getBounds(window);\n      if (op.top < viewportBounds.y) {\n        intoView(marker.element, alignToTop !== false);\n      } else if (op.top > viewportBounds.bottom) {\n        intoView(marker.element, alignToTop === true);\n      }\n    };\n    var rangeIntoWindow = function (editor, rng, alignToTop) {\n      return withMarker(editor, intoWindow, rng, alignToTop);\n    };\n    var elementIntoWindow = function (editor, element, alignToTop) {\n      return withElement(editor, element, intoWindow, alignToTop);\n    };\n    var rangeIntoFrame = function (editor, rng, alignToTop) {\n      return withMarker(editor, intoFrame, rng, alignToTop);\n    };\n    var elementIntoFrame = function (editor, element, alignToTop) {\n      return withElement(editor, element, intoFrame, alignToTop);\n    };\n    var scrollElementIntoView = function (editor, element, alignToTop) {\n      var scroller = editor.inline ? elementIntoWindow : elementIntoFrame;\n      scroller(editor, element, alignToTop);\n    };\n    var scrollRangeIntoView = function (editor, rng, alignToTop) {\n      var scroller = editor.inline ? rangeIntoWindow : rangeIntoFrame;\n      scroller(editor, rng, alignToTop);\n    };\n\n    var getDocument = function () {\n      return SugarElement.fromDom(document);\n    };\n\n    var focus$1 = function (element) {\n      return element.dom.focus();\n    };\n    var hasFocus$1 = function (element) {\n      var root = getRootNode(element).dom;\n      return element.dom === root.activeElement;\n    };\n    var active = function (root) {\n      if (root === void 0) {\n        root = getDocument();\n      }\n      return Optional.from(root.dom.activeElement).map(SugarElement.fromDom);\n    };\n    var search = function (element) {\n      return active(getRootNode(element)).filter(function (e) {\n        return element.dom.contains(e.dom);\n      });\n    };\n\n    var create$5 = function (start, soffset, finish, foffset) {\n      return {\n        start: start,\n        soffset: soffset,\n        finish: finish,\n        foffset: foffset\n      };\n    };\n    var SimRange = { create: create$5 };\n\n    var adt$1 = Adt.generate([\n      { before: ['element'] },\n      {\n        on: [\n          'element',\n          'offset'\n        ]\n      },\n      { after: ['element'] }\n    ]);\n    var cata = function (subject, onBefore, onOn, onAfter) {\n      return subject.fold(onBefore, onOn, onAfter);\n    };\n    var getStart$2 = function (situ) {\n      return situ.fold(identity, identity, identity);\n    };\n    var before$1 = adt$1.before;\n    var on = adt$1.on;\n    var after$1 = adt$1.after;\n    var Situ = {\n      before: before$1,\n      on: on,\n      after: after$1,\n      cata: cata,\n      getStart: getStart$2\n    };\n\n    var adt = Adt.generate([\n      { domRange: ['rng'] },\n      {\n        relative: [\n          'startSitu',\n          'finishSitu'\n        ]\n      },\n      {\n        exact: [\n          'start',\n          'soffset',\n          'finish',\n          'foffset'\n        ]\n      }\n    ]);\n    var exactFromRange = function (simRange) {\n      return adt.exact(simRange.start, simRange.soffset, simRange.finish, simRange.foffset);\n    };\n    var getStart$1 = function (selection) {\n      return selection.match({\n        domRange: function (rng) {\n          return SugarElement.fromDom(rng.startContainer);\n        },\n        relative: function (startSitu, _finishSitu) {\n          return Situ.getStart(startSitu);\n        },\n        exact: function (start, _soffset, _finish, _foffset) {\n          return start;\n        }\n      });\n    };\n    var domRange = adt.domRange;\n    var relative = adt.relative;\n    var exact = adt.exact;\n    var getWin = function (selection) {\n      var start = getStart$1(selection);\n      return defaultView(start);\n    };\n    var range = SimRange.create;\n    var SimSelection = {\n      domRange: domRange,\n      relative: relative,\n      exact: exact,\n      exactFromRange: exactFromRange,\n      getWin: getWin,\n      range: range\n    };\n\n    var browser$1 = detect().browser;\n    var clamp$1 = function (offset, element) {\n      var max = isText$8(element) ? get$2(element).length : children(element).length + 1;\n      if (offset > max) {\n        return max;\n      } else if (offset < 0) {\n        return 0;\n      }\n      return offset;\n    };\n    var normalizeRng = function (rng) {\n      return SimSelection.range(rng.start, clamp$1(rng.soffset, rng.start), rng.finish, clamp$1(rng.foffset, rng.finish));\n    };\n    var isOrContains = function (root, elm) {\n      return !isRestrictedNode(elm.dom) && (contains$1(root, elm) || eq(root, elm));\n    };\n    var isRngInRoot = function (root) {\n      return function (rng) {\n        return isOrContains(root, rng.start) && isOrContains(root, rng.finish);\n      };\n    };\n    var shouldStore = function (editor) {\n      return editor.inline === true || browser$1.isIE();\n    };\n    var nativeRangeToSelectionRange = function (r) {\n      return SimSelection.range(SugarElement.fromDom(r.startContainer), r.startOffset, SugarElement.fromDom(r.endContainer), r.endOffset);\n    };\n    var readRange = function (win) {\n      var selection = win.getSelection();\n      var rng = !selection || selection.rangeCount === 0 ? Optional.none() : Optional.from(selection.getRangeAt(0));\n      return rng.map(nativeRangeToSelectionRange);\n    };\n    var getBookmark = function (root) {\n      var win = defaultView(root);\n      return readRange(win.dom).filter(isRngInRoot(root));\n    };\n    var validate = function (root, bookmark) {\n      return Optional.from(bookmark).filter(isRngInRoot(root)).map(normalizeRng);\n    };\n    var bookmarkToNativeRng = function (bookmark) {\n      var rng = document.createRange();\n      try {\n        rng.setStart(bookmark.start.dom, bookmark.soffset);\n        rng.setEnd(bookmark.finish.dom, bookmark.foffset);\n        return Optional.some(rng);\n      } catch (_) {\n        return Optional.none();\n      }\n    };\n    var store = function (editor) {\n      var newBookmark = shouldStore(editor) ? getBookmark(SugarElement.fromDom(editor.getBody())) : Optional.none();\n      editor.bookmark = newBookmark.isSome() ? newBookmark : editor.bookmark;\n    };\n    var storeNative = function (editor, rng) {\n      var root = SugarElement.fromDom(editor.getBody());\n      var range = shouldStore(editor) ? Optional.from(rng) : Optional.none();\n      var newBookmark = range.map(nativeRangeToSelectionRange).filter(isRngInRoot(root));\n      editor.bookmark = newBookmark.isSome() ? newBookmark : editor.bookmark;\n    };\n    var getRng = function (editor) {\n      var bookmark = editor.bookmark ? editor.bookmark : Optional.none();\n      return bookmark.bind(function (x) {\n        return validate(SugarElement.fromDom(editor.getBody()), x);\n      }).bind(bookmarkToNativeRng);\n    };\n    var restore = function (editor) {\n      getRng(editor).each(function (rng) {\n        return editor.selection.setRng(rng);\n      });\n    };\n\n    var isEditorUIElement$1 = function (elm) {\n      var className = elm.className.toString();\n      return className.indexOf('tox-') !== -1 || className.indexOf('mce-') !== -1;\n    };\n    var FocusManager = { isEditorUIElement: isEditorUIElement$1 };\n\n    var isManualNodeChange = function (e) {\n      return e.type === 'nodechange' && e.selectionChange;\n    };\n    var registerPageMouseUp = function (editor, throttledStore) {\n      var mouseUpPage = function () {\n        throttledStore.throttle();\n      };\n      DOMUtils.DOM.bind(document, 'mouseup', mouseUpPage);\n      editor.on('remove', function () {\n        DOMUtils.DOM.unbind(document, 'mouseup', mouseUpPage);\n      });\n    };\n    var registerFocusOut = function (editor) {\n      editor.on('focusout', function () {\n        store(editor);\n      });\n    };\n    var registerMouseUp = function (editor, throttledStore) {\n      editor.on('mouseup touchend', function (_e) {\n        throttledStore.throttle();\n      });\n    };\n    var registerEditorEvents = function (editor, throttledStore) {\n      var browser = detect().browser;\n      if (browser.isIE()) {\n        registerFocusOut(editor);\n      } else {\n        registerMouseUp(editor, throttledStore);\n      }\n      editor.on('keyup NodeChange', function (e) {\n        if (!isManualNodeChange(e)) {\n          store(editor);\n        }\n      });\n    };\n    var register$3 = function (editor) {\n      var throttledStore = first(function () {\n        store(editor);\n      }, 0);\n      editor.on('init', function () {\n        if (editor.inline) {\n          registerPageMouseUp(editor, throttledStore);\n        }\n        registerEditorEvents(editor, throttledStore);\n      });\n      editor.on('remove', function () {\n        throttledStore.cancel();\n      });\n    };\n\n    var documentFocusInHandler;\n    var DOM$8 = DOMUtils.DOM;\n    var isEditorUIElement = function (elm) {\n      return FocusManager.isEditorUIElement(elm);\n    };\n    var isEditorContentAreaElement = function (elm) {\n      var classList = elm.classList;\n      if (classList !== undefined) {\n        return classList.contains('tox-edit-area') || classList.contains('tox-edit-area__iframe') || classList.contains('mce-content-body');\n      } else {\n        return false;\n      }\n    };\n    var isUIElement = function (editor, elm) {\n      var customSelector = getCustomUiSelector(editor);\n      var parent = DOM$8.getParent(elm, function (elm) {\n        return isEditorUIElement(elm) || (customSelector ? editor.dom.is(elm, customSelector) : false);\n      });\n      return parent !== null;\n    };\n    var getActiveElement = function (editor) {\n      try {\n        var root = getRootNode(SugarElement.fromDom(editor.getElement()));\n        return active(root).fold(function () {\n          return document.body;\n        }, function (x) {\n          return x.dom;\n        });\n      } catch (ex) {\n        return document.body;\n      }\n    };\n    var registerEvents$1 = function (editorManager, e) {\n      var editor = e.editor;\n      register$3(editor);\n      editor.on('focusin', function () {\n        var focusedEditor = editorManager.focusedEditor;\n        if (focusedEditor !== editor) {\n          if (focusedEditor) {\n            focusedEditor.fire('blur', { focusedEditor: editor });\n          }\n          editorManager.setActive(editor);\n          editorManager.focusedEditor = editor;\n          editor.fire('focus', { blurredEditor: focusedEditor });\n          editor.focus(true);\n        }\n      });\n      editor.on('focusout', function () {\n        Delay.setEditorTimeout(editor, function () {\n          var focusedEditor = editorManager.focusedEditor;\n          if (!isUIElement(editor, getActiveElement(editor)) && focusedEditor === editor) {\n            editor.fire('blur', { focusedEditor: null });\n            editorManager.focusedEditor = null;\n          }\n        });\n      });\n      if (!documentFocusInHandler) {\n        documentFocusInHandler = function (e) {\n          var activeEditor = editorManager.activeEditor;\n          if (activeEditor) {\n            getOriginalEventTarget(e).each(function (target) {\n              if (target.ownerDocument === document) {\n                if (target !== document.body && !isUIElement(activeEditor, target) && editorManager.focusedEditor === activeEditor) {\n                  activeEditor.fire('blur', { focusedEditor: null });\n                  editorManager.focusedEditor = null;\n                }\n              }\n            });\n          }\n        };\n        DOM$8.bind(document, 'focusin', documentFocusInHandler);\n      }\n    };\n    var unregisterDocumentEvents = function (editorManager, e) {\n      if (editorManager.focusedEditor === e.editor) {\n        editorManager.focusedEditor = null;\n      }\n      if (!editorManager.activeEditor) {\n        DOM$8.unbind(document, 'focusin', documentFocusInHandler);\n        documentFocusInHandler = null;\n      }\n    };\n    var setup$l = function (editorManager) {\n      editorManager.on('AddEditor', curry(registerEvents$1, editorManager));\n      editorManager.on('RemoveEditor', curry(unregisterDocumentEvents, editorManager));\n    };\n\n    var getContentEditableHost = function (editor, node) {\n      return editor.dom.getParent(node, function (node) {\n        return editor.dom.getContentEditable(node) === 'true';\n      });\n    };\n    var getCollapsedNode = function (rng) {\n      return rng.collapsed ? Optional.from(getNode$1(rng.startContainer, rng.startOffset)).map(SugarElement.fromDom) : Optional.none();\n    };\n    var getFocusInElement = function (root, rng) {\n      return getCollapsedNode(rng).bind(function (node) {\n        if (isTableSection(node)) {\n          return Optional.some(node);\n        } else if (contains$1(root, node) === false) {\n          return Optional.some(root);\n        } else {\n          return Optional.none();\n        }\n      });\n    };\n    var normalizeSelection$1 = function (editor, rng) {\n      getFocusInElement(SugarElement.fromDom(editor.getBody()), rng).bind(function (elm) {\n        return firstPositionIn(elm.dom);\n      }).fold(function () {\n        editor.selection.normalize();\n        return;\n      }, function (caretPos) {\n        return editor.selection.setRng(caretPos.toRange());\n      });\n    };\n    var focusBody = function (body) {\n      if (body.setActive) {\n        try {\n          body.setActive();\n        } catch (ex) {\n          body.focus();\n        }\n      } else {\n        body.focus();\n      }\n    };\n    var hasElementFocus = function (elm) {\n      return hasFocus$1(elm) || search(elm).isSome();\n    };\n    var hasIframeFocus = function (editor) {\n      return editor.iframeElement && hasFocus$1(SugarElement.fromDom(editor.iframeElement));\n    };\n    var hasInlineFocus = function (editor) {\n      var rawBody = editor.getBody();\n      return rawBody && hasElementFocus(SugarElement.fromDom(rawBody));\n    };\n    var hasUiFocus = function (editor) {\n      var dos = getRootNode(SugarElement.fromDom(editor.getElement()));\n      return active(dos).filter(function (elem) {\n        return !isEditorContentAreaElement(elem.dom) && isUIElement(editor, elem.dom);\n      }).isSome();\n    };\n    var hasFocus = function (editor) {\n      return editor.inline ? hasInlineFocus(editor) : hasIframeFocus(editor);\n    };\n    var hasEditorOrUiFocus = function (editor) {\n      return hasFocus(editor) || hasUiFocus(editor);\n    };\n    var focusEditor = function (editor) {\n      var selection = editor.selection;\n      var body = editor.getBody();\n      var rng = selection.getRng();\n      editor.quirks.refreshContentEditable();\n      if (editor.bookmark !== undefined && hasFocus(editor) === false) {\n        getRng(editor).each(function (bookmarkRng) {\n          editor.selection.setRng(bookmarkRng);\n          rng = bookmarkRng;\n        });\n      }\n      var contentEditableHost = getContentEditableHost(editor, selection.getNode());\n      if (editor.$.contains(body, contentEditableHost)) {\n        focusBody(contentEditableHost);\n        normalizeSelection$1(editor, rng);\n        activateEditor(editor);\n        return;\n      }\n      if (!editor.inline) {\n        if (!Env.opera) {\n          focusBody(body);\n        }\n        editor.getWin().focus();\n      }\n      if (Env.gecko || editor.inline) {\n        focusBody(body);\n        normalizeSelection$1(editor, rng);\n      }\n      activateEditor(editor);\n    };\n    var activateEditor = function (editor) {\n      return editor.editorManager.setActive(editor);\n    };\n    var focus = function (editor, skipFocus) {\n      if (editor.removed) {\n        return;\n      }\n      if (skipFocus) {\n        activateEditor(editor);\n      } else {\n        focusEditor(editor);\n      }\n    };\n\n    var getEndpointElement = function (root, rng, start, real, resolve) {\n      var container = start ? rng.startContainer : rng.endContainer;\n      var offset = start ? rng.startOffset : rng.endOffset;\n      return Optional.from(container).map(SugarElement.fromDom).map(function (elm) {\n        return !real || !rng.collapsed ? child$1(elm, resolve(elm, offset)).getOr(elm) : elm;\n      }).bind(function (elm) {\n        return isElement$6(elm) ? Optional.some(elm) : parent(elm).filter(isElement$6);\n      }).map(function (elm) {\n        return elm.dom;\n      }).getOr(root);\n    };\n    var getStart = function (root, rng, real) {\n      return getEndpointElement(root, rng, true, real, function (elm, offset) {\n        return Math.min(childNodesCount(elm), offset);\n      });\n    };\n    var getEnd = function (root, rng, real) {\n      return getEndpointElement(root, rng, false, real, function (elm, offset) {\n        return offset > 0 ? offset - 1 : offset;\n      });\n    };\n    var skipEmptyTextNodes = function (node, forwards) {\n      var orig = node;\n      while (node && isText$7(node) && node.length === 0) {\n        node = forwards ? node.nextSibling : node.previousSibling;\n      }\n      return node || orig;\n    };\n    var getNode = function (root, rng) {\n      var elm, startContainer, endContainer;\n      if (!rng) {\n        return root;\n      }\n      startContainer = rng.startContainer;\n      endContainer = rng.endContainer;\n      var startOffset = rng.startOffset;\n      var endOffset = rng.endOffset;\n      elm = rng.commonAncestorContainer;\n      if (!rng.collapsed) {\n        if (startContainer === endContainer) {\n          if (endOffset - startOffset < 2) {\n            if (startContainer.hasChildNodes()) {\n              elm = startContainer.childNodes[startOffset];\n            }\n          }\n        }\n        if (startContainer.nodeType === 3 && endContainer.nodeType === 3) {\n          if (startContainer.length === startOffset) {\n            startContainer = skipEmptyTextNodes(startContainer.nextSibling, true);\n          } else {\n            startContainer = startContainer.parentNode;\n          }\n          if (endOffset === 0) {\n            endContainer = skipEmptyTextNodes(endContainer.previousSibling, false);\n          } else {\n            endContainer = endContainer.parentNode;\n          }\n          if (startContainer && startContainer === endContainer) {\n            return startContainer;\n          }\n        }\n      }\n      if (elm && elm.nodeType === 3) {\n        return elm.parentNode;\n      }\n      return elm;\n    };\n    var getSelectedBlocks = function (dom, rng, startElm, endElm) {\n      var node;\n      var selectedBlocks = [];\n      var root = dom.getRoot();\n      startElm = dom.getParent(startElm || getStart(root, rng, rng.collapsed), dom.isBlock);\n      endElm = dom.getParent(endElm || getEnd(root, rng, rng.collapsed), dom.isBlock);\n      if (startElm && startElm !== root) {\n        selectedBlocks.push(startElm);\n      }\n      if (startElm && endElm && startElm !== endElm) {\n        node = startElm;\n        var walker = new DomTreeWalker(startElm, root);\n        while ((node = walker.next()) && node !== endElm) {\n          if (dom.isBlock(node)) {\n            selectedBlocks.push(node);\n          }\n        }\n      }\n      if (endElm && startElm !== endElm && endElm !== root) {\n        selectedBlocks.push(endElm);\n      }\n      return selectedBlocks;\n    };\n    var select = function (dom, node, content) {\n      return Optional.from(node).map(function (node) {\n        var idx = dom.nodeIndex(node);\n        var rng = dom.createRng();\n        rng.setStart(node.parentNode, idx);\n        rng.setEnd(node.parentNode, idx + 1);\n        if (content) {\n          moveEndPoint(dom, rng, node, true);\n          moveEndPoint(dom, rng, node, false);\n        }\n        return rng;\n      });\n    };\n\n    var processRanges = function (editor, ranges) {\n      return map$3(ranges, function (range) {\n        var evt = editor.fire('GetSelectionRange', { range: range });\n        return evt.range !== range ? evt.range : range;\n      });\n    };\n\n    var typeLookup = {\n      '#text': 3,\n      '#comment': 8,\n      '#cdata': 4,\n      '#pi': 7,\n      '#doctype': 10,\n      '#document-fragment': 11\n    };\n    var walk$1 = function (node, root, prev) {\n      var startName = prev ? 'lastChild' : 'firstChild';\n      var siblingName = prev ? 'prev' : 'next';\n      if (node[startName]) {\n        return node[startName];\n      }\n      if (node !== root) {\n        var sibling = node[siblingName];\n        if (sibling) {\n          return sibling;\n        }\n        for (var parent_1 = node.parent; parent_1 && parent_1 !== root; parent_1 = parent_1.parent) {\n          sibling = parent_1[siblingName];\n          if (sibling) {\n            return sibling;\n          }\n        }\n      }\n    };\n    var isEmptyTextNode = function (node) {\n      if (!isWhitespaceText(node.value)) {\n        return false;\n      }\n      var parentNode = node.parent;\n      if (parentNode && (parentNode.name !== 'span' || parentNode.attr('style')) && /^[ ]+$/.test(node.value)) {\n        return false;\n      }\n      return true;\n    };\n    var isNonEmptyElement = function (node) {\n      var isNamedAnchor = node.name === 'a' && !node.attr('href') && node.attr('id');\n      return node.attr('name') || node.attr('id') && !node.firstChild || node.attr('data-mce-bookmark') || isNamedAnchor;\n    };\n    var AstNode = function () {\n      function AstNode(name, type) {\n        this.name = name;\n        this.type = type;\n        if (type === 1) {\n          this.attributes = [];\n          this.attributes.map = {};\n        }\n      }\n      AstNode.create = function (name, attrs) {\n        var node = new AstNode(name, typeLookup[name] || 1);\n        if (attrs) {\n          each$j(attrs, function (value, attrName) {\n            node.attr(attrName, value);\n          });\n        }\n        return node;\n      };\n      AstNode.prototype.replace = function (node) {\n        var self = this;\n        if (node.parent) {\n          node.remove();\n        }\n        self.insert(node, self);\n        self.remove();\n        return self;\n      };\n      AstNode.prototype.attr = function (name, value) {\n        var self = this;\n        var attrs;\n        if (typeof name !== 'string') {\n          if (name !== undefined && name !== null) {\n            each$j(name, function (value, key) {\n              self.attr(key, value);\n            });\n          }\n          return self;\n        }\n        if (attrs = self.attributes) {\n          if (value !== undefined) {\n            if (value === null) {\n              if (name in attrs.map) {\n                delete attrs.map[name];\n                var i = attrs.length;\n                while (i--) {\n                  if (attrs[i].name === name) {\n                    attrs.splice(i, 1);\n                    return self;\n                  }\n                }\n              }\n              return self;\n            }\n            if (name in attrs.map) {\n              var i = attrs.length;\n              while (i--) {\n                if (attrs[i].name === name) {\n                  attrs[i].value = value;\n                  break;\n                }\n              }\n            } else {\n              attrs.push({\n                name: name,\n                value: value\n              });\n            }\n            attrs.map[name] = value;\n            return self;\n          }\n          return attrs.map[name];\n        }\n      };\n      AstNode.prototype.clone = function () {\n        var self = this;\n        var clone = new AstNode(self.name, self.type);\n        var selfAttrs;\n        if (selfAttrs = self.attributes) {\n          var cloneAttrs = [];\n          cloneAttrs.map = {};\n          for (var i = 0, l = selfAttrs.length; i < l; i++) {\n            var selfAttr = selfAttrs[i];\n            if (selfAttr.name !== 'id') {\n              cloneAttrs[cloneAttrs.length] = {\n                name: selfAttr.name,\n                value: selfAttr.value\n              };\n              cloneAttrs.map[selfAttr.name] = selfAttr.value;\n            }\n          }\n          clone.attributes = cloneAttrs;\n        }\n        clone.value = self.value;\n        clone.shortEnded = self.shortEnded;\n        return clone;\n      };\n      AstNode.prototype.wrap = function (wrapper) {\n        var self = this;\n        self.parent.insert(wrapper, self);\n        wrapper.append(self);\n        return self;\n      };\n      AstNode.prototype.unwrap = function () {\n        var self = this;\n        for (var node = self.firstChild; node;) {\n          var next = node.next;\n          self.insert(node, self, true);\n          node = next;\n        }\n        self.remove();\n      };\n      AstNode.prototype.remove = function () {\n        var self = this, parent = self.parent, next = self.next, prev = self.prev;\n        if (parent) {\n          if (parent.firstChild === self) {\n            parent.firstChild = next;\n            if (next) {\n              next.prev = null;\n            }\n          } else {\n            prev.next = next;\n          }\n          if (parent.lastChild === self) {\n            parent.lastChild = prev;\n            if (prev) {\n              prev.next = null;\n            }\n          } else {\n            next.prev = prev;\n          }\n          self.parent = self.next = self.prev = null;\n        }\n        return self;\n      };\n      AstNode.prototype.append = function (node) {\n        var self = this;\n        if (node.parent) {\n          node.remove();\n        }\n        var last = self.lastChild;\n        if (last) {\n          last.next = node;\n          node.prev = last;\n          self.lastChild = node;\n        } else {\n          self.lastChild = self.firstChild = node;\n        }\n        node.parent = self;\n        return node;\n      };\n      AstNode.prototype.insert = function (node, refNode, before) {\n        if (node.parent) {\n          node.remove();\n        }\n        var parent = refNode.parent || this;\n        if (before) {\n          if (refNode === parent.firstChild) {\n            parent.firstChild = node;\n          } else {\n            refNode.prev.next = node;\n          }\n          node.prev = refNode.prev;\n          node.next = refNode;\n          refNode.prev = node;\n        } else {\n          if (refNode === parent.lastChild) {\n            parent.lastChild = node;\n          } else {\n            refNode.next.prev = node;\n          }\n          node.next = refNode.next;\n          node.prev = refNode;\n          refNode.next = node;\n        }\n        node.parent = parent;\n        return node;\n      };\n      AstNode.prototype.getAll = function (name) {\n        var self = this;\n        var collection = [];\n        for (var node = self.firstChild; node; node = walk$1(node, self)) {\n          if (node.name === name) {\n            collection.push(node);\n          }\n        }\n        return collection;\n      };\n      AstNode.prototype.children = function () {\n        var self = this;\n        var collection = [];\n        for (var node = self.firstChild; node; node = node.next) {\n          collection.push(node);\n        }\n        return collection;\n      };\n      AstNode.prototype.empty = function () {\n        var self = this;\n        if (self.firstChild) {\n          var nodes = [];\n          for (var node = self.firstChild; node; node = walk$1(node, self)) {\n            nodes.push(node);\n          }\n          var i = nodes.length;\n          while (i--) {\n            var node = nodes[i];\n            node.parent = node.firstChild = node.lastChild = node.next = node.prev = null;\n          }\n        }\n        self.firstChild = self.lastChild = null;\n        return self;\n      };\n      AstNode.prototype.isEmpty = function (elements, whitespace, predicate) {\n        if (whitespace === void 0) {\n          whitespace = {};\n        }\n        var self = this;\n        var node = self.firstChild;\n        if (isNonEmptyElement(self)) {\n          return false;\n        }\n        if (node) {\n          do {\n            if (node.type === 1) {\n              if (node.attr('data-mce-bogus')) {\n                continue;\n              }\n              if (elements[node.name]) {\n                return false;\n              }\n              if (isNonEmptyElement(node)) {\n                return false;\n              }\n            }\n            if (node.type === 8) {\n              return false;\n            }\n            if (node.type === 3 && !isEmptyTextNode(node)) {\n              return false;\n            }\n            if (node.type === 3 && node.parent && whitespace[node.parent.name] && isWhitespaceText(node.value)) {\n              return false;\n            }\n            if (predicate && predicate(node)) {\n              return false;\n            }\n          } while (node = walk$1(node, self));\n        }\n        return true;\n      };\n      AstNode.prototype.walk = function (prev) {\n        return walk$1(this, null, prev);\n      };\n      return AstNode;\n    }();\n\n    var extractBase64DataUris = function (html) {\n      var dataImageUri = /data:[^;]+;base64,([a-z0-9\\+\\/=\\s]+)/gi;\n      var chunks = [];\n      var uris = {};\n      var prefix = generate('img');\n      var matches;\n      var index = 0;\n      var count = 0;\n      while (matches = dataImageUri.exec(html)) {\n        var uri = matches[0];\n        var imageId = prefix + '_' + count++;\n        uris[imageId] = uri;\n        if (index < matches.index) {\n          chunks.push(html.substr(index, matches.index - index));\n        }\n        chunks.push(imageId);\n        index = matches.index + uri.length;\n      }\n      var re = new RegExp(prefix + '_[0-9]+', 'g');\n      if (index === 0) {\n        return {\n          prefix: prefix,\n          uris: uris,\n          html: html,\n          re: re\n        };\n      } else {\n        if (index < html.length) {\n          chunks.push(html.substr(index));\n        }\n        return {\n          prefix: prefix,\n          uris: uris,\n          html: chunks.join(''),\n          re: re\n        };\n      }\n    };\n    var restoreDataUris = function (html, result) {\n      return html.replace(result.re, function (imageId) {\n        return get$9(result.uris, imageId).getOr(imageId);\n      });\n    };\n    var parseDataUri$1 = function (uri) {\n      var matches = /data:([^;]+);base64,([a-z0-9\\+\\/=\\s]+)/i.exec(uri);\n      if (matches) {\n        return Optional.some({\n          type: matches[1],\n          data: decodeURIComponent(matches[2])\n        });\n      } else {\n        return Optional.none();\n      }\n    };\n\n    var safeSvgDataUrlElements = [\n      'img',\n      'video'\n    ];\n    var filteredClobberElements = Tools.makeMap('button,fieldset,form,iframe,img,image,input,object,output,select,textarea');\n    var isValidPrefixAttrName = function (name) {\n      return name.indexOf('data-') === 0 || name.indexOf('aria-') === 0;\n    };\n    var blockSvgDataUris = function (allowSvgDataUrls, tagName) {\n      var allowed = isNullable(allowSvgDataUrls) ? contains$3(safeSvgDataUrlElements, tagName) : allowSvgDataUrls;\n      return !allowed;\n    };\n    var isInvalidUri = function (settings, uri, tagName) {\n      if (settings.allow_html_data_urls) {\n        return false;\n      } else if (/^data:image\\//i.test(uri)) {\n        return blockSvgDataUris(settings.allow_svg_data_urls, tagName) && /^data:image\\/svg\\+xml/i.test(uri);\n      } else {\n        return /^data:/i.test(uri);\n      }\n    };\n    var findMatchingEndTagIndex = function (schema, html, startIndex) {\n      var startTagRegExp = /<([!?\\/])?([A-Za-z0-9\\-_:.]+)/g;\n      var endTagRegExp = /(?:\\s(?:[^'\">]+(?:\"[^\"]*\"|'[^']*'))*[^\"'>]*(?:\"[^\">]*|'[^'>]*)?|\\s*|\\/)>/g;\n      var shortEndedElements = schema.getShortEndedElements();\n      var count = 1, index = startIndex;\n      while (count !== 0) {\n        startTagRegExp.lastIndex = index;\n        while (true) {\n          var startMatch = startTagRegExp.exec(html);\n          if (startMatch === null) {\n            return index;\n          } else if (startMatch[1] === '!') {\n            if (startsWith(startMatch[2], '--')) {\n              index = findCommentEndIndex(html, false, startMatch.index + '!--'.length);\n            } else {\n              index = findCommentEndIndex(html, true, startMatch.index + 1);\n            }\n            break;\n          } else {\n            endTagRegExp.lastIndex = startTagRegExp.lastIndex;\n            var endMatch = endTagRegExp.exec(html);\n            if (isNull(endMatch) || endMatch.index !== startTagRegExp.lastIndex) {\n              continue;\n            }\n            if (startMatch[1] === '/') {\n              count -= 1;\n            } else if (!has$2(shortEndedElements, startMatch[2])) {\n              count += 1;\n            }\n            index = startTagRegExp.lastIndex + endMatch[0].length;\n            break;\n          }\n        }\n      }\n      return index;\n    };\n    var isConditionalComment = function (html, startIndex) {\n      return /^\\s*\\[if [\\w\\W]+\\]>.*<!\\[endif\\](--!?)?>/.test(html.substr(startIndex));\n    };\n    var findCommentEndIndex = function (html, isBogus, startIndex) {\n      if (startIndex === void 0) {\n        startIndex = 0;\n      }\n      var lcHtml = html.toLowerCase();\n      if (lcHtml.indexOf('[if ', startIndex) !== -1 && isConditionalComment(lcHtml, startIndex)) {\n        var endIfIndex = lcHtml.indexOf('[endif]', startIndex);\n        return lcHtml.indexOf('>', endIfIndex);\n      } else {\n        if (isBogus) {\n          var endIndex = lcHtml.indexOf('>', startIndex);\n          return endIndex !== -1 ? endIndex : lcHtml.length;\n        } else {\n          var endCommentRegexp = /--!?>/g;\n          endCommentRegexp.lastIndex = startIndex;\n          var match = endCommentRegexp.exec(html);\n          return match ? match.index + match[0].length : lcHtml.length;\n        }\n      }\n    };\n    var checkBogusAttribute = function (regExp, attrString) {\n      var matches = regExp.exec(attrString);\n      if (matches) {\n        var name_1 = matches[1];\n        var value = matches[2];\n        return typeof name_1 === 'string' && name_1.toLowerCase() === 'data-mce-bogus' ? value : null;\n      } else {\n        return null;\n      }\n    };\n    var SaxParser = function (settings, schema) {\n      var _a;\n      if (schema === void 0) {\n        schema = Schema();\n      }\n      settings = settings || {};\n      var doc = (_a = settings.document) !== null && _a !== void 0 ? _a : document;\n      var form = doc.createElement('form');\n      if (settings.fix_self_closing !== false) {\n        settings.fix_self_closing = true;\n      }\n      var comment = settings.comment ? settings.comment : noop;\n      var cdata = settings.cdata ? settings.cdata : noop;\n      var text = settings.text ? settings.text : noop;\n      var start = settings.start ? settings.start : noop;\n      var end = settings.end ? settings.end : noop;\n      var pi = settings.pi ? settings.pi : noop;\n      var doctype = settings.doctype ? settings.doctype : noop;\n      var parseInternal = function (base64Extract, format) {\n        if (format === void 0) {\n          format = 'html';\n        }\n        var html = base64Extract.html;\n        var matches, index = 0, value, endRegExp;\n        var stack = [];\n        var attrList, i, textData, name;\n        var isInternalElement, isShortEnded;\n        var elementRule, isValidElement, attr, attribsValue, validAttributesMap, validAttributePatterns;\n        var attributesRequired, attributesDefault, attributesForced;\n        var anyAttributesRequired, attrValue, idCount = 0;\n        var decode = Entities.decode;\n        var filteredUrlAttrs = Tools.makeMap('src,href,data,background,action,formaction,poster,xlink:href');\n        var scriptUriRegExp = /((java|vb)script|mhtml):/i;\n        var parsingMode = format === 'html' ? 0 : 1;\n        var processEndTag = function (name) {\n          var pos, i;\n          pos = stack.length;\n          while (pos--) {\n            if (stack[pos].name === name) {\n              break;\n            }\n          }\n          if (pos >= 0) {\n            for (i = stack.length - 1; i >= pos; i--) {\n              name = stack[i];\n              if (name.valid) {\n                end(name.name);\n              }\n            }\n            stack.length = pos;\n          }\n        };\n        var processText = function (value, raw) {\n          return text(restoreDataUris(value, base64Extract), raw);\n        };\n        var processComment = function (value) {\n          if (value === '') {\n            return;\n          }\n          if (value.charAt(0) === '>') {\n            value = ' ' + value;\n          }\n          if (!settings.allow_conditional_comments && value.substr(0, 3).toLowerCase() === '[if') {\n            value = ' ' + value;\n          }\n          comment(restoreDataUris(value, base64Extract));\n        };\n        var processAttr = function (value) {\n          return restoreDataUris(value, base64Extract);\n        };\n        var processMalformedComment = function (value, startIndex) {\n          var startTag = value || '';\n          var isBogus = !startsWith(startTag, '--');\n          var endIndex = findCommentEndIndex(html, isBogus, startIndex);\n          value = html.substr(startIndex, endIndex - startIndex);\n          processComment(isBogus ? startTag + value : value);\n          return endIndex + 1;\n        };\n        var parseAttribute = function (tagName, name, value, val2, val3) {\n          var attrRule, i;\n          var trimRegExp = /[\\s\\u0000-\\u001F]+/g;\n          name = name.toLowerCase();\n          value = processAttr(name in fillAttrsMap ? name : decode(value || val2 || val3 || ''));\n          if (validate && !isInternalElement && isValidPrefixAttrName(name) === false) {\n            attrRule = validAttributesMap[name];\n            if (!attrRule && validAttributePatterns) {\n              i = validAttributePatterns.length;\n              while (i--) {\n                attrRule = validAttributePatterns[i];\n                if (attrRule.pattern.test(name)) {\n                  break;\n                }\n              }\n              if (i === -1) {\n                attrRule = null;\n              }\n            }\n            if (!attrRule) {\n              return;\n            }\n            if (attrRule.validValues && !(value in attrRule.validValues)) {\n              return;\n            }\n          }\n          var isNameOrId = name === 'name' || name === 'id';\n          if (isNameOrId && tagName in filteredClobberElements && (value in doc || value in form)) {\n            return;\n          }\n          if (filteredUrlAttrs[name] && !settings.allow_script_urls) {\n            var uri = value.replace(trimRegExp, '');\n            try {\n              uri = decodeURIComponent(uri);\n            } catch (ex) {\n              uri = unescape(uri);\n            }\n            if (scriptUriRegExp.test(uri)) {\n              return;\n            }\n            if (isInvalidUri(settings, uri, tagName)) {\n              return;\n            }\n          }\n          if (isInternalElement && (name in filteredUrlAttrs || name.indexOf('on') === 0)) {\n            return;\n          }\n          attrList.map[name] = value;\n          attrList.push({\n            name: name,\n            value: value\n          });\n        };\n        var tokenRegExp = new RegExp('<(?:' + '(?:!--([\\\\w\\\\W]*?)--!?>)|' + '(?:!\\\\[CDATA\\\\[([\\\\w\\\\W]*?)\\\\]\\\\]>)|' + '(?:![Dd][Oo][Cc][Tt][Yy][Pp][Ee]([\\\\w\\\\W]*?)>)|' + '(?:!(--)?)|' + '(?:\\\\?([^\\\\s\\\\/<>]+) ?([\\\\w\\\\W]*?)[?/]>)|' + '(?:\\\\/([A-Za-z][A-Za-z0-9\\\\-_\\\\:\\\\.]*)>)|' + '(?:([A-Za-z][A-Za-z0-9\\\\-_:.]*)(\\\\s(?:[^\\'\">]+(?:\"[^\"]*\"|\\'[^\\']*\\'))*[^\"\\'>]*(?:\"[^\">]*|\\'[^\\'>]*)?|\\\\s*|\\\\/)>)' + ')', 'g');\n        var attrRegExp = /([\\w:\\-]+)(?:\\s*=\\s*(?:(?:\\\"((?:[^\\\"])*)\\\")|(?:\\'((?:[^\\'])*)\\')|([^>\\s]+)))?/g;\n        var shortEndedElements = schema.getShortEndedElements();\n        var selfClosing = settings.self_closing_elements || schema.getSelfClosingElements();\n        var fillAttrsMap = schema.getBoolAttrs();\n        var validate = settings.validate;\n        var removeInternalElements = settings.remove_internals;\n        var fixSelfClosing = settings.fix_self_closing;\n        var specialElements = schema.getSpecialElements();\n        var processHtml = html + '>';\n        while (matches = tokenRegExp.exec(processHtml)) {\n          var matchText = matches[0];\n          if (index < matches.index) {\n            processText(decode(html.substr(index, matches.index - index)));\n          }\n          if (value = matches[7]) {\n            value = value.toLowerCase();\n            if (value.charAt(0) === ':') {\n              value = value.substr(1);\n            }\n            processEndTag(value);\n          } else if (value = matches[8]) {\n            if (matches.index + matchText.length > html.length) {\n              processText(decode(html.substr(matches.index)));\n              index = matches.index + matchText.length;\n              continue;\n            }\n            value = value.toLowerCase();\n            if (value.charAt(0) === ':') {\n              value = value.substr(1);\n            }\n            isShortEnded = value in shortEndedElements;\n            if (fixSelfClosing && selfClosing[value] && stack.length > 0 && stack[stack.length - 1].name === value) {\n              processEndTag(value);\n            }\n            var bogusValue = checkBogusAttribute(attrRegExp, matches[9]);\n            if (bogusValue !== null) {\n              if (bogusValue === 'all') {\n                index = findMatchingEndTagIndex(schema, html, tokenRegExp.lastIndex);\n                tokenRegExp.lastIndex = index;\n                continue;\n              }\n              isValidElement = false;\n            }\n            if (!validate || (elementRule = schema.getElementRule(value))) {\n              isValidElement = true;\n              if (validate) {\n                validAttributesMap = elementRule.attributes;\n                validAttributePatterns = elementRule.attributePatterns;\n              }\n              if (attribsValue = matches[9]) {\n                isInternalElement = attribsValue.indexOf('data-mce-type') !== -1;\n                if (isInternalElement && removeInternalElements) {\n                  isValidElement = false;\n                }\n                attrList = [];\n                attrList.map = {};\n                attribsValue.replace(attrRegExp, function (match, name, val, val2, val3) {\n                  parseAttribute(value, name, val, val2, val3);\n                  return '';\n                });\n              } else {\n                attrList = [];\n                attrList.map = {};\n              }\n              if (validate && !isInternalElement) {\n                attributesRequired = elementRule.attributesRequired;\n                attributesDefault = elementRule.attributesDefault;\n                attributesForced = elementRule.attributesForced;\n                anyAttributesRequired = elementRule.removeEmptyAttrs;\n                if (anyAttributesRequired && !attrList.length) {\n                  isValidElement = false;\n                }\n                if (attributesForced) {\n                  i = attributesForced.length;\n                  while (i--) {\n                    attr = attributesForced[i];\n                    name = attr.name;\n                    attrValue = attr.value;\n                    if (attrValue === '{$uid}') {\n                      attrValue = 'mce_' + idCount++;\n                    }\n                    attrList.map[name] = attrValue;\n                    attrList.push({\n                      name: name,\n                      value: attrValue\n                    });\n                  }\n                }\n                if (attributesDefault) {\n                  i = attributesDefault.length;\n                  while (i--) {\n                    attr = attributesDefault[i];\n                    name = attr.name;\n                    if (!(name in attrList.map)) {\n                      attrValue = attr.value;\n                      if (attrValue === '{$uid}') {\n                        attrValue = 'mce_' + idCount++;\n                      }\n                      attrList.map[name] = attrValue;\n                      attrList.push({\n                        name: name,\n                        value: attrValue\n                      });\n                    }\n                  }\n                }\n                if (attributesRequired) {\n                  i = attributesRequired.length;\n                  while (i--) {\n                    if (attributesRequired[i] in attrList.map) {\n                      break;\n                    }\n                  }\n                  if (i === -1) {\n                    isValidElement = false;\n                  }\n                }\n                if (attr = attrList.map['data-mce-bogus']) {\n                  if (attr === 'all') {\n                    index = findMatchingEndTagIndex(schema, html, tokenRegExp.lastIndex);\n                    tokenRegExp.lastIndex = index;\n                    continue;\n                  }\n                  isValidElement = false;\n                }\n              }\n              if (isValidElement) {\n                start(value, attrList, isShortEnded);\n              }\n            } else {\n              isValidElement = false;\n            }\n            if (endRegExp = specialElements[value]) {\n              endRegExp.lastIndex = index = matches.index + matchText.length;\n              if (matches = endRegExp.exec(html)) {\n                if (isValidElement) {\n                  textData = html.substr(index, matches.index - index);\n                }\n                index = matches.index + matches[0].length;\n              } else {\n                textData = html.substr(index);\n                index = html.length;\n              }\n              if (isValidElement) {\n                if (textData.length > 0) {\n                  processText(textData, true);\n                }\n                end(value);\n              }\n              tokenRegExp.lastIndex = index;\n              continue;\n            }\n            if (!isShortEnded) {\n              if (!attribsValue || attribsValue.indexOf('/') !== attribsValue.length - 1) {\n                stack.push({\n                  name: value,\n                  valid: isValidElement\n                });\n              } else if (isValidElement) {\n                end(value);\n              }\n            }\n          } else if (value = matches[1]) {\n            processComment(value);\n          } else if (value = matches[2]) {\n            var isValidCdataSection = parsingMode === 1 || settings.preserve_cdata || stack.length > 0 && schema.isValidChild(stack[stack.length - 1].name, '#cdata');\n            if (isValidCdataSection) {\n              cdata(value);\n            } else {\n              index = processMalformedComment('', matches.index + 2);\n              tokenRegExp.lastIndex = index;\n              continue;\n            }\n          } else if (value = matches[3]) {\n            doctype(value);\n          } else if ((value = matches[4]) || matchText === '<!') {\n            index = processMalformedComment(value, matches.index + matchText.length);\n            tokenRegExp.lastIndex = index;\n            continue;\n          } else if (value = matches[5]) {\n            if (parsingMode === 1) {\n              pi(value, matches[6]);\n            } else {\n              index = processMalformedComment('?', matches.index + 2);\n              tokenRegExp.lastIndex = index;\n              continue;\n            }\n          }\n          index = matches.index + matchText.length;\n        }\n        if (index < html.length) {\n          processText(decode(html.substr(index)));\n        }\n        for (i = stack.length - 1; i >= 0; i--) {\n          value = stack[i];\n          if (value.valid) {\n            end(value.name);\n          }\n        }\n      };\n      var parse = function (html, format) {\n        if (format === void 0) {\n          format = 'html';\n        }\n        parseInternal(extractBase64DataUris(html), format);\n      };\n      return { parse: parse };\n    };\n    SaxParser.findEndTag = findMatchingEndTagIndex;\n\n    var trimHtml = function (tempAttrs, html) {\n      var trimContentRegExp = new RegExp(['\\\\s?(' + tempAttrs.join('|') + ')=\"[^\"]+\"'].join('|'), 'gi');\n      return html.replace(trimContentRegExp, '');\n    };\n    var trimInternal = function (serializer, html) {\n      var bogusAllRegExp = /<(\\w+) [^>]*data-mce-bogus=\"all\"[^>]*>/g;\n      var schema = serializer.schema;\n      var content = trimHtml(serializer.getTempAttrs(), html);\n      var shortEndedElements = schema.getShortEndedElements();\n      var matches;\n      while (matches = bogusAllRegExp.exec(content)) {\n        var index = bogusAllRegExp.lastIndex;\n        var matchLength = matches[0].length;\n        var endTagIndex = void 0;\n        if (shortEndedElements[matches[1]]) {\n          endTagIndex = index;\n        } else {\n          endTagIndex = SaxParser.findEndTag(schema, content, index);\n        }\n        content = content.substring(0, index - matchLength) + content.substring(endTagIndex);\n        bogusAllRegExp.lastIndex = index - matchLength;\n      }\n      return trim$2(content);\n    };\n    var trimExternal = trimInternal;\n\n    var trimEmptyContents = function (editor, html) {\n      var blockName = getForcedRootBlock(editor);\n      var emptyRegExp = new RegExp('^(<' + blockName + '[^>]*>(&nbsp;|&#160;|\\\\s|\\xA0|<br \\\\/>|)<\\\\/' + blockName + '>[\\r\\n]*|<br \\\\/>[\\r\\n]*)$');\n      return html.replace(emptyRegExp, '');\n    };\n    var setupArgs$3 = function (args, format) {\n      return __assign(__assign({}, args), {\n        format: format,\n        get: true,\n        getInner: true\n      });\n    };\n    var getContentFromBody = function (editor, args, format, body) {\n      var defaultedArgs = setupArgs$3(args, format);\n      var updatedArgs = args.no_events ? defaultedArgs : editor.fire('BeforeGetContent', defaultedArgs);\n      var content;\n      if (updatedArgs.format === 'raw') {\n        content = Tools.trim(trimExternal(editor.serializer, body.innerHTML));\n      } else if (updatedArgs.format === 'text') {\n        content = editor.dom.isEmpty(body) ? '' : trim$2(body.innerText || body.textContent);\n      } else if (updatedArgs.format === 'tree') {\n        content = editor.serializer.serialize(body, updatedArgs);\n      } else {\n        content = trimEmptyContents(editor, editor.serializer.serialize(body, updatedArgs));\n      }\n      if (!contains$3([\n          'text',\n          'tree'\n        ], updatedArgs.format) && !isWsPreserveElement(SugarElement.fromDom(body))) {\n        updatedArgs.content = Tools.trim(content);\n      } else {\n        updatedArgs.content = content;\n      }\n      if (updatedArgs.no_events) {\n        return updatedArgs.content;\n      } else {\n        return editor.fire('GetContent', updatedArgs).content;\n      }\n    };\n    var getContentInternal = function (editor, args, format) {\n      return Optional.from(editor.getBody()).fold(constant(args.format === 'tree' ? new AstNode('body', 11) : ''), function (body) {\n        return getContentFromBody(editor, args, format, body);\n      });\n    };\n\n    var each$d = Tools.each;\n    var ElementUtils = function (dom) {\n      var compare = function (node1, node2) {\n        if (node1.nodeName !== node2.nodeName) {\n          return false;\n        }\n        var getAttribs = function (node) {\n          var attribs = {};\n          each$d(dom.getAttribs(node), function (attr) {\n            var name = attr.nodeName.toLowerCase();\n            if (name.indexOf('_') !== 0 && name !== 'style' && name.indexOf('data-') !== 0) {\n              attribs[name] = dom.getAttrib(node, name);\n            }\n          });\n          return attribs;\n        };\n        var compareObjects = function (obj1, obj2) {\n          var value, name;\n          for (name in obj1) {\n            if (has$2(obj1, name)) {\n              value = obj2[name];\n              if (typeof value === 'undefined') {\n                return false;\n              }\n              if (obj1[name] !== value) {\n                return false;\n              }\n              delete obj2[name];\n            }\n          }\n          for (name in obj2) {\n            if (has$2(obj2, name)) {\n              return false;\n            }\n          }\n          return true;\n        };\n        if (!compareObjects(getAttribs(node1), getAttribs(node2))) {\n          return false;\n        }\n        if (!compareObjects(dom.parseStyle(dom.getAttrib(node1, 'style')), dom.parseStyle(dom.getAttrib(node2, 'style')))) {\n          return false;\n        }\n        return !isBookmarkNode$1(node1) && !isBookmarkNode$1(node2);\n      };\n      return { compare: compare };\n    };\n\n    var makeMap$1 = Tools.makeMap;\n    var Writer = function (settings) {\n      var html = [];\n      settings = settings || {};\n      var indent = settings.indent;\n      var indentBefore = makeMap$1(settings.indent_before || '');\n      var indentAfter = makeMap$1(settings.indent_after || '');\n      var encode = Entities.getEncodeFunc(settings.entity_encoding || 'raw', settings.entities);\n      var htmlOutput = settings.element_format === 'html';\n      return {\n        start: function (name, attrs, empty) {\n          var i, l, attr, value;\n          if (indent && indentBefore[name] && html.length > 0) {\n            value = html[html.length - 1];\n            if (value.length > 0 && value !== '\\n') {\n              html.push('\\n');\n            }\n          }\n          html.push('<', name);\n          if (attrs) {\n            for (i = 0, l = attrs.length; i < l; i++) {\n              attr = attrs[i];\n              html.push(' ', attr.name, '=\"', encode(attr.value, true), '\"');\n            }\n          }\n          if (!empty || htmlOutput) {\n            html[html.length] = '>';\n          } else {\n            html[html.length] = ' />';\n          }\n          if (empty && indent && indentAfter[name] && html.length > 0) {\n            value = html[html.length - 1];\n            if (value.length > 0 && value !== '\\n') {\n              html.push('\\n');\n            }\n          }\n        },\n        end: function (name) {\n          var value;\n          html.push('</', name, '>');\n          if (indent && indentAfter[name] && html.length > 0) {\n            value = html[html.length - 1];\n            if (value.length > 0 && value !== '\\n') {\n              html.push('\\n');\n            }\n          }\n        },\n        text: function (text, raw) {\n          if (text.length > 0) {\n            html[html.length] = raw ? text : encode(text);\n          }\n        },\n        cdata: function (text) {\n          html.push('<![CDATA[', text, ']]>');\n        },\n        comment: function (text) {\n          html.push('<!--', text, '-->');\n        },\n        pi: function (name, text) {\n          if (text) {\n            html.push('<?', name, ' ', encode(text), '?>');\n          } else {\n            html.push('<?', name, '?>');\n          }\n          if (indent) {\n            html.push('\\n');\n          }\n        },\n        doctype: function (text) {\n          html.push('<!DOCTYPE', text, '>', indent ? '\\n' : '');\n        },\n        reset: function () {\n          html.length = 0;\n        },\n        getContent: function () {\n          return html.join('').replace(/\\n$/, '');\n        }\n      };\n    };\n\n    var HtmlSerializer = function (settings, schema) {\n      if (schema === void 0) {\n        schema = Schema();\n      }\n      var writer = Writer(settings);\n      settings = settings || {};\n      settings.validate = 'validate' in settings ? settings.validate : true;\n      var serialize = function (node) {\n        var validate = settings.validate;\n        var handlers = {\n          3: function (node) {\n            writer.text(node.value, node.raw);\n          },\n          8: function (node) {\n            writer.comment(node.value);\n          },\n          7: function (node) {\n            writer.pi(node.name, node.value);\n          },\n          10: function (node) {\n            writer.doctype(node.value);\n          },\n          4: function (node) {\n            writer.cdata(node.value);\n          },\n          11: function (node) {\n            if (node = node.firstChild) {\n              do {\n                walk(node);\n              } while (node = node.next);\n            }\n          }\n        };\n        writer.reset();\n        var walk = function (node) {\n          var handler = handlers[node.type];\n          if (!handler) {\n            var name_1 = node.name;\n            var isEmpty = node.shortEnded;\n            var attrs = node.attributes;\n            if (validate && attrs && attrs.length > 1) {\n              var sortedAttrs = [];\n              sortedAttrs.map = {};\n              var elementRule = schema.getElementRule(node.name);\n              if (elementRule) {\n                for (var i = 0, l = elementRule.attributesOrder.length; i < l; i++) {\n                  var attrName = elementRule.attributesOrder[i];\n                  if (attrName in attrs.map) {\n                    var attrValue = attrs.map[attrName];\n                    sortedAttrs.map[attrName] = attrValue;\n                    sortedAttrs.push({\n                      name: attrName,\n                      value: attrValue\n                    });\n                  }\n                }\n                for (var i = 0, l = attrs.length; i < l; i++) {\n                  var attrName = attrs[i].name;\n                  if (!(attrName in sortedAttrs.map)) {\n                    var attrValue = attrs.map[attrName];\n                    sortedAttrs.map[attrName] = attrValue;\n                    sortedAttrs.push({\n                      name: attrName,\n                      value: attrValue\n                    });\n                  }\n                }\n                attrs = sortedAttrs;\n              }\n            }\n            writer.start(node.name, attrs, isEmpty);\n            if (!isEmpty) {\n              if (node = node.firstChild) {\n                do {\n                  walk(node);\n                } while (node = node.next);\n              }\n              writer.end(name_1);\n            }\n          } else {\n            handler(node);\n          }\n        };\n        if (node.type === 1 && !settings.inner) {\n          walk(node);\n        } else {\n          handlers[11](node);\n        }\n        return writer.getContent();\n      };\n      return { serialize: serialize };\n    };\n\n    var nonInheritableStyles = new Set();\n    (function () {\n      var nonInheritableStylesArr = [\n        'margin',\n        'margin-left',\n        'margin-right',\n        'margin-top',\n        'margin-bottom',\n        'padding',\n        'padding-left',\n        'padding-right',\n        'padding-top',\n        'padding-bottom',\n        'border',\n        'border-width',\n        'border-style',\n        'border-color',\n        'background',\n        'background-attachment',\n        'background-clip',\n        'background-color',\n        'background-image',\n        'background-origin',\n        'background-position',\n        'background-repeat',\n        'background-size',\n        'float',\n        'position',\n        'left',\n        'right',\n        'top',\n        'bottom',\n        'z-index',\n        'display',\n        'transform',\n        'width',\n        'max-width',\n        'min-width',\n        'height',\n        'max-height',\n        'min-height',\n        'overflow',\n        'overflow-x',\n        'overflow-y',\n        'text-overflow',\n        'vertical-align',\n        'transition',\n        'transition-delay',\n        'transition-duration',\n        'transition-property',\n        'transition-timing-function'\n      ];\n      each$k(nonInheritableStylesArr, function (style) {\n        nonInheritableStyles.add(style);\n      });\n    }());\n    var shorthandStyleProps = [\n      'font',\n      'text-decoration',\n      'text-emphasis'\n    ];\n    var getStyleProps = function (dom, node) {\n      return keys(dom.parseStyle(dom.getAttrib(node, 'style')));\n    };\n    var isNonInheritableStyle = function (style) {\n      return nonInheritableStyles.has(style);\n    };\n    var hasInheritableStyles = function (dom, node) {\n      return forall(getStyleProps(dom, node), function (style) {\n        return !isNonInheritableStyle(style);\n      });\n    };\n    var getLonghandStyleProps = function (styles) {\n      return filter$4(styles, function (style) {\n        return exists(shorthandStyleProps, function (prop) {\n          return startsWith(style, prop);\n        });\n      });\n    };\n    var hasStyleConflict = function (dom, node, parentNode) {\n      var nodeStyleProps = getStyleProps(dom, node);\n      var parentNodeStyleProps = getStyleProps(dom, parentNode);\n      var valueMismatch = function (prop) {\n        var nodeValue = dom.getStyle(node, prop);\n        var parentValue = dom.getStyle(parentNode, prop);\n        return isNotEmpty(nodeValue) && isNotEmpty(parentValue) && nodeValue !== parentValue;\n      };\n      return exists(nodeStyleProps, function (nodeStyleProp) {\n        var propExists = function (props) {\n          return exists(props, function (prop) {\n            return prop === nodeStyleProp;\n          });\n        };\n        if (!propExists(parentNodeStyleProps) && propExists(shorthandStyleProps)) {\n          var longhandProps = getLonghandStyleProps(parentNodeStyleProps);\n          return exists(longhandProps, valueMismatch);\n        } else {\n          return valueMismatch(nodeStyleProp);\n        }\n      });\n    };\n\n    var isChar = function (forward, predicate, pos) {\n      return Optional.from(pos.container()).filter(isText$7).exists(function (text) {\n        var delta = forward ? 0 : -1;\n        return predicate(text.data.charAt(pos.offset() + delta));\n      });\n    };\n    var isBeforeSpace = curry(isChar, true, isWhiteSpace);\n    var isAfterSpace = curry(isChar, false, isWhiteSpace);\n    var isEmptyText = function (pos) {\n      var container = pos.container();\n      return isText$7(container) && (container.data.length === 0 || isZwsp(container.data) && BookmarkManager.isBookmarkNode(container.parentNode));\n    };\n    var matchesElementPosition = function (before, predicate) {\n      return function (pos) {\n        return Optional.from(getChildNodeAtRelativeOffset(before ? 0 : -1, pos)).filter(predicate).isSome();\n      };\n    };\n    var isImageBlock = function (node) {\n      return isImg(node) && get$5(SugarElement.fromDom(node), 'display') === 'block';\n    };\n    var isCefNode = function (node) {\n      return isContentEditableFalse$b(node) && !isBogusAll$1(node);\n    };\n    var isBeforeImageBlock = matchesElementPosition(true, isImageBlock);\n    var isAfterImageBlock = matchesElementPosition(false, isImageBlock);\n    var isBeforeMedia = matchesElementPosition(true, isMedia$2);\n    var isAfterMedia = matchesElementPosition(false, isMedia$2);\n    var isBeforeTable = matchesElementPosition(true, isTable$3);\n    var isAfterTable = matchesElementPosition(false, isTable$3);\n    var isBeforeContentEditableFalse = matchesElementPosition(true, isCefNode);\n    var isAfterContentEditableFalse = matchesElementPosition(false, isCefNode);\n\n    var getLastChildren = function (elm) {\n      var children = [];\n      var rawNode = elm.dom;\n      while (rawNode) {\n        children.push(SugarElement.fromDom(rawNode));\n        rawNode = rawNode.lastChild;\n      }\n      return children;\n    };\n    var removeTrailingBr = function (elm) {\n      var allBrs = descendants(elm, 'br');\n      var brs = filter$4(getLastChildren(elm).slice(-1), isBr$4);\n      if (allBrs.length === brs.length) {\n        each$k(brs, remove$7);\n      }\n    };\n    var fillWithPaddingBr = function (elm) {\n      empty(elm);\n      append$1(elm, SugarElement.fromHtml('<br data-mce-bogus=\"1\">'));\n    };\n    var trimBlockTrailingBr = function (elm) {\n      lastChild(elm).each(function (lastChild) {\n        prevSibling(lastChild).each(function (lastChildPrevSibling) {\n          if (isBlock$2(elm) && isBr$4(lastChild) && isBlock$2(lastChildPrevSibling)) {\n            remove$7(lastChild);\n          }\n        });\n      });\n    };\n\n    var dropLast = function (xs) {\n      return xs.slice(0, -1);\n    };\n    var parentsUntil = function (start, root, predicate) {\n      if (contains$1(root, start)) {\n        return dropLast(parents$1(start, function (elm) {\n          return predicate(elm) || eq(elm, root);\n        }));\n      } else {\n        return [];\n      }\n    };\n    var parents = function (start, root) {\n      return parentsUntil(start, root, never);\n    };\n    var parentsAndSelf = function (start, root) {\n      return [start].concat(parents(start, root));\n    };\n\n    var navigateIgnoreEmptyTextNodes = function (forward, root, from) {\n      return navigateIgnore(forward, root, from, isEmptyText);\n    };\n    var getClosestBlock$1 = function (root, pos) {\n      return find$3(parentsAndSelf(SugarElement.fromDom(pos.container()), root), isBlock$2);\n    };\n    var isAtBeforeAfterBlockBoundary = function (forward, root, pos) {\n      return navigateIgnoreEmptyTextNodes(forward, root.dom, pos).forall(function (newPos) {\n        return getClosestBlock$1(root, pos).fold(function () {\n          return isInSameBlock(newPos, pos, root.dom) === false;\n        }, function (fromBlock) {\n          return isInSameBlock(newPos, pos, root.dom) === false && contains$1(fromBlock, SugarElement.fromDom(newPos.container()));\n        });\n      });\n    };\n    var isAtBlockBoundary = function (forward, root, pos) {\n      return getClosestBlock$1(root, pos).fold(function () {\n        return navigateIgnoreEmptyTextNodes(forward, root.dom, pos).forall(function (newPos) {\n          return isInSameBlock(newPos, pos, root.dom) === false;\n        });\n      }, function (parent) {\n        return navigateIgnoreEmptyTextNodes(forward, parent.dom, pos).isNone();\n      });\n    };\n    var isAtStartOfBlock = curry(isAtBlockBoundary, false);\n    var isAtEndOfBlock = curry(isAtBlockBoundary, true);\n    var isBeforeBlock = curry(isAtBeforeAfterBlockBoundary, false);\n    var isAfterBlock = curry(isAtBeforeAfterBlockBoundary, true);\n\n    var isBr = function (pos) {\n      return getElementFromPosition(pos).exists(isBr$4);\n    };\n    var findBr = function (forward, root, pos) {\n      var parentBlocks = filter$4(parentsAndSelf(SugarElement.fromDom(pos.container()), root), isBlock$2);\n      var scope = head(parentBlocks).getOr(root);\n      return fromPosition(forward, scope.dom, pos).filter(isBr);\n    };\n    var isBeforeBr$1 = function (root, pos) {\n      return getElementFromPosition(pos).exists(isBr$4) || findBr(true, root, pos).isSome();\n    };\n    var isAfterBr = function (root, pos) {\n      return getElementFromPrevPosition(pos).exists(isBr$4) || findBr(false, root, pos).isSome();\n    };\n    var findPreviousBr = curry(findBr, false);\n    var findNextBr = curry(findBr, true);\n\n    var isInMiddleOfText = function (pos) {\n      return CaretPosition.isTextPosition(pos) && !pos.isAtStart() && !pos.isAtEnd();\n    };\n    var getClosestBlock = function (root, pos) {\n      var parentBlocks = filter$4(parentsAndSelf(SugarElement.fromDom(pos.container()), root), isBlock$2);\n      return head(parentBlocks).getOr(root);\n    };\n    var hasSpaceBefore = function (root, pos) {\n      if (isInMiddleOfText(pos)) {\n        return isAfterSpace(pos);\n      } else {\n        return isAfterSpace(pos) || prevPosition(getClosestBlock(root, pos).dom, pos).exists(isAfterSpace);\n      }\n    };\n    var hasSpaceAfter = function (root, pos) {\n      if (isInMiddleOfText(pos)) {\n        return isBeforeSpace(pos);\n      } else {\n        return isBeforeSpace(pos) || nextPosition(getClosestBlock(root, pos).dom, pos).exists(isBeforeSpace);\n      }\n    };\n    var isPreValue = function (value) {\n      return contains$3([\n        'pre',\n        'pre-wrap'\n      ], value);\n    };\n    var isInPre = function (pos) {\n      return getElementFromPosition(pos).bind(function (elm) {\n        return closest$3(elm, isElement$6);\n      }).exists(function (elm) {\n        return isPreValue(get$5(elm, 'white-space'));\n      });\n    };\n    var isAtBeginningOfBody = function (root, pos) {\n      return prevPosition(root.dom, pos).isNone();\n    };\n    var isAtEndOfBody = function (root, pos) {\n      return nextPosition(root.dom, pos).isNone();\n    };\n    var isAtLineBoundary = function (root, pos) {\n      return isAtBeginningOfBody(root, pos) || isAtEndOfBody(root, pos) || isAtStartOfBlock(root, pos) || isAtEndOfBlock(root, pos) || isAfterBr(root, pos) || isBeforeBr$1(root, pos);\n    };\n    var needsToHaveNbsp = function (root, pos) {\n      if (isInPre(pos)) {\n        return false;\n      } else {\n        return isAtLineBoundary(root, pos) || hasSpaceBefore(root, pos) || hasSpaceAfter(root, pos);\n      }\n    };\n    var needsToBeNbspLeft = function (root, pos) {\n      if (isInPre(pos)) {\n        return false;\n      } else {\n        return isAtStartOfBlock(root, pos) || isBeforeBlock(root, pos) || isAfterBr(root, pos) || hasSpaceBefore(root, pos);\n      }\n    };\n    var leanRight = function (pos) {\n      var container = pos.container();\n      var offset = pos.offset();\n      if (isText$7(container) && offset < container.data.length) {\n        return CaretPosition(container, offset + 1);\n      } else {\n        return pos;\n      }\n    };\n    var needsToBeNbspRight = function (root, pos) {\n      if (isInPre(pos)) {\n        return false;\n      } else {\n        return isAtEndOfBlock(root, pos) || isAfterBlock(root, pos) || isBeforeBr$1(root, pos) || hasSpaceAfter(root, pos);\n      }\n    };\n    var needsToBeNbsp = function (root, pos) {\n      return needsToBeNbspLeft(root, pos) || needsToBeNbspRight(root, leanRight(pos));\n    };\n    var isNbspAt = function (text, offset) {\n      return isNbsp(text.charAt(offset));\n    };\n    var hasNbsp = function (pos) {\n      var container = pos.container();\n      return isText$7(container) && contains$2(container.data, nbsp);\n    };\n    var normalizeNbspMiddle = function (text) {\n      var chars = text.split('');\n      return map$3(chars, function (chr, i) {\n        if (isNbsp(chr) && i > 0 && i < chars.length - 1 && isContent(chars[i - 1]) && isContent(chars[i + 1])) {\n          return ' ';\n        } else {\n          return chr;\n        }\n      }).join('');\n    };\n    var normalizeNbspAtStart = function (root, node) {\n      var text = node.data;\n      var firstPos = CaretPosition(node, 0);\n      if (isNbspAt(text, 0) && !needsToBeNbsp(root, firstPos)) {\n        node.data = ' ' + text.slice(1);\n        return true;\n      } else {\n        return false;\n      }\n    };\n    var normalizeNbspInMiddleOfTextNode = function (node) {\n      var text = node.data;\n      var newText = normalizeNbspMiddle(text);\n      if (newText !== text) {\n        node.data = newText;\n        return true;\n      } else {\n        return false;\n      }\n    };\n    var normalizeNbspAtEnd = function (root, node) {\n      var text = node.data;\n      var lastPos = CaretPosition(node, text.length - 1);\n      if (isNbspAt(text, text.length - 1) && !needsToBeNbsp(root, lastPos)) {\n        node.data = text.slice(0, -1) + ' ';\n        return true;\n      } else {\n        return false;\n      }\n    };\n    var normalizeNbsps = function (root, pos) {\n      return Optional.some(pos).filter(hasNbsp).bind(function (pos) {\n        var container = pos.container();\n        var normalized = normalizeNbspAtStart(root, container) || normalizeNbspInMiddleOfTextNode(container) || normalizeNbspAtEnd(root, container);\n        return normalized ? Optional.some(pos) : Optional.none();\n      });\n    };\n    var normalizeNbspsInEditor = function (editor) {\n      var root = SugarElement.fromDom(editor.getBody());\n      if (editor.selection.isCollapsed()) {\n        normalizeNbsps(root, CaretPosition.fromRangeStart(editor.selection.getRng())).each(function (pos) {\n          editor.selection.setRng(pos.toRange());\n        });\n      }\n    };\n\n    var normalizeContent = function (content, isStartOfContent, isEndOfContent) {\n      var result = foldl(content, function (acc, c) {\n        if (isWhiteSpace(c) || isNbsp(c)) {\n          if (acc.previousCharIsSpace || acc.str === '' && isStartOfContent || acc.str.length === content.length - 1 && isEndOfContent) {\n            return {\n              previousCharIsSpace: false,\n              str: acc.str + nbsp\n            };\n          } else {\n            return {\n              previousCharIsSpace: true,\n              str: acc.str + ' '\n            };\n          }\n        } else {\n          return {\n            previousCharIsSpace: false,\n            str: acc.str + c\n          };\n        }\n      }, {\n        previousCharIsSpace: false,\n        str: ''\n      });\n      return result.str;\n    };\n    var normalize$1 = function (node, offset, count) {\n      if (count === 0) {\n        return;\n      }\n      var elm = SugarElement.fromDom(node);\n      var root = ancestor$3(elm, isBlock$2).getOr(elm);\n      var whitespace = node.data.slice(offset, offset + count);\n      var isEndOfContent = offset + count >= node.data.length && needsToBeNbspRight(root, CaretPosition(node, node.data.length));\n      var isStartOfContent = offset === 0 && needsToBeNbspLeft(root, CaretPosition(node, 0));\n      node.replaceData(offset, count, normalizeContent(whitespace, isStartOfContent, isEndOfContent));\n    };\n    var normalizeWhitespaceAfter = function (node, offset) {\n      var content = node.data.slice(offset);\n      var whitespaceCount = content.length - lTrim(content).length;\n      normalize$1(node, offset, whitespaceCount);\n    };\n    var normalizeWhitespaceBefore = function (node, offset) {\n      var content = node.data.slice(0, offset);\n      var whitespaceCount = content.length - rTrim(content).length;\n      normalize$1(node, offset - whitespaceCount, whitespaceCount);\n    };\n    var mergeTextNodes = function (prevNode, nextNode, normalizeWhitespace, mergeToPrev) {\n      if (mergeToPrev === void 0) {\n        mergeToPrev = true;\n      }\n      var whitespaceOffset = rTrim(prevNode.data).length;\n      var newNode = mergeToPrev ? prevNode : nextNode;\n      var removeNode = mergeToPrev ? nextNode : prevNode;\n      if (mergeToPrev) {\n        newNode.appendData(removeNode.data);\n      } else {\n        newNode.insertData(0, removeNode.data);\n      }\n      remove$7(SugarElement.fromDom(removeNode));\n      if (normalizeWhitespace) {\n        normalizeWhitespaceAfter(newNode, whitespaceOffset);\n      }\n      return newNode;\n    };\n\n    var needsReposition = function (pos, elm) {\n      var container = pos.container();\n      var offset = pos.offset();\n      return CaretPosition.isTextPosition(pos) === false && container === elm.parentNode && offset > CaretPosition.before(elm).offset();\n    };\n    var reposition = function (elm, pos) {\n      return needsReposition(pos, elm) ? CaretPosition(pos.container(), pos.offset() - 1) : pos;\n    };\n    var beforeOrStartOf = function (node) {\n      return isText$7(node) ? CaretPosition(node, 0) : CaretPosition.before(node);\n    };\n    var afterOrEndOf = function (node) {\n      return isText$7(node) ? CaretPosition(node, node.data.length) : CaretPosition.after(node);\n    };\n    var getPreviousSiblingCaretPosition = function (elm) {\n      if (isCaretCandidate$3(elm.previousSibling)) {\n        return Optional.some(afterOrEndOf(elm.previousSibling));\n      } else {\n        return elm.previousSibling ? lastPositionIn(elm.previousSibling) : Optional.none();\n      }\n    };\n    var getNextSiblingCaretPosition = function (elm) {\n      if (isCaretCandidate$3(elm.nextSibling)) {\n        return Optional.some(beforeOrStartOf(elm.nextSibling));\n      } else {\n        return elm.nextSibling ? firstPositionIn(elm.nextSibling) : Optional.none();\n      }\n    };\n    var findCaretPositionBackwardsFromElm = function (rootElement, elm) {\n      var startPosition = CaretPosition.before(elm.previousSibling ? elm.previousSibling : elm.parentNode);\n      return prevPosition(rootElement, startPosition).fold(function () {\n        return nextPosition(rootElement, CaretPosition.after(elm));\n      }, Optional.some);\n    };\n    var findCaretPositionForwardsFromElm = function (rootElement, elm) {\n      return nextPosition(rootElement, CaretPosition.after(elm)).fold(function () {\n        return prevPosition(rootElement, CaretPosition.before(elm));\n      }, Optional.some);\n    };\n    var findCaretPositionBackwards = function (rootElement, elm) {\n      return getPreviousSiblingCaretPosition(elm).orThunk(function () {\n        return getNextSiblingCaretPosition(elm);\n      }).orThunk(function () {\n        return findCaretPositionBackwardsFromElm(rootElement, elm);\n      });\n    };\n    var findCaretPositionForward = function (rootElement, elm) {\n      return getNextSiblingCaretPosition(elm).orThunk(function () {\n        return getPreviousSiblingCaretPosition(elm);\n      }).orThunk(function () {\n        return findCaretPositionForwardsFromElm(rootElement, elm);\n      });\n    };\n    var findCaretPosition = function (forward, rootElement, elm) {\n      return forward ? findCaretPositionForward(rootElement, elm) : findCaretPositionBackwards(rootElement, elm);\n    };\n    var findCaretPosOutsideElmAfterDelete = function (forward, rootElement, elm) {\n      return findCaretPosition(forward, rootElement, elm).map(curry(reposition, elm));\n    };\n    var setSelection$1 = function (editor, forward, pos) {\n      pos.fold(function () {\n        editor.focus();\n      }, function (pos) {\n        editor.selection.setRng(pos.toRange(), forward);\n      });\n    };\n    var eqRawNode = function (rawNode) {\n      return function (elm) {\n        return elm.dom === rawNode;\n      };\n    };\n    var isBlock = function (editor, elm) {\n      return elm && has$2(editor.schema.getBlockElements(), name(elm));\n    };\n    var paddEmptyBlock = function (elm) {\n      if (isEmpty$2(elm)) {\n        var br = SugarElement.fromHtml('<br data-mce-bogus=\"1\">');\n        empty(elm);\n        append$1(elm, br);\n        return Optional.some(CaretPosition.before(br.dom));\n      } else {\n        return Optional.none();\n      }\n    };\n    var deleteNormalized = function (elm, afterDeletePosOpt, normalizeWhitespace) {\n      var prevTextOpt = prevSibling(elm).filter(isText$8);\n      var nextTextOpt = nextSibling(elm).filter(isText$8);\n      remove$7(elm);\n      return lift3(prevTextOpt, nextTextOpt, afterDeletePosOpt, function (prev, next, pos) {\n        var prevNode = prev.dom, nextNode = next.dom;\n        var offset = prevNode.data.length;\n        mergeTextNodes(prevNode, nextNode, normalizeWhitespace);\n        return pos.container() === nextNode ? CaretPosition(prevNode, offset) : pos;\n      }).orThunk(function () {\n        if (normalizeWhitespace) {\n          prevTextOpt.each(function (elm) {\n            return normalizeWhitespaceBefore(elm.dom, elm.dom.length);\n          });\n          nextTextOpt.each(function (elm) {\n            return normalizeWhitespaceAfter(elm.dom, 0);\n          });\n        }\n        return afterDeletePosOpt;\n      });\n    };\n    var isInlineElement = function (editor, element) {\n      return has$2(editor.schema.getTextInlineElements(), name(element));\n    };\n    var deleteElement$2 = function (editor, forward, elm, moveCaret) {\n      if (moveCaret === void 0) {\n        moveCaret = true;\n      }\n      var afterDeletePos = findCaretPosOutsideElmAfterDelete(forward, editor.getBody(), elm.dom);\n      var parentBlock = ancestor$3(elm, curry(isBlock, editor), eqRawNode(editor.getBody()));\n      var normalizedAfterDeletePos = deleteNormalized(elm, afterDeletePos, isInlineElement(editor, elm));\n      if (editor.dom.isEmpty(editor.getBody())) {\n        editor.setContent('');\n        editor.selection.setCursorLocation();\n      } else {\n        parentBlock.bind(paddEmptyBlock).fold(function () {\n          if (moveCaret) {\n            setSelection$1(editor, forward, normalizedAfterDeletePos);\n          }\n        }, function (paddPos) {\n          if (moveCaret) {\n            setSelection$1(editor, forward, Optional.some(paddPos));\n          }\n        });\n      }\n    };\n\n    var isRootFromElement = function (root) {\n      return function (cur) {\n        return eq(root, cur);\n      };\n    };\n    var getTableCells = function (table) {\n      return descendants(table, 'td,th');\n    };\n    var getTableDetailsFromRange = function (rng, isRoot) {\n      var getTable = function (node) {\n        return getClosestTable(SugarElement.fromDom(node), isRoot);\n      };\n      var startTable = getTable(rng.startContainer);\n      var endTable = getTable(rng.endContainer);\n      var isStartInTable = startTable.isSome();\n      var isEndInTable = endTable.isSome();\n      var isSameTable = lift2(startTable, endTable, eq).getOr(false);\n      var isMultiTable = !isSameTable && isStartInTable && isEndInTable;\n      return {\n        startTable: startTable,\n        endTable: endTable,\n        isStartInTable: isStartInTable,\n        isEndInTable: isEndInTable,\n        isSameTable: isSameTable,\n        isMultiTable: isMultiTable\n      };\n    };\n\n    var tableCellRng = function (start, end) {\n      return {\n        start: start,\n        end: end\n      };\n    };\n    var tableSelection = function (rng, table, cells) {\n      return {\n        rng: rng,\n        table: table,\n        cells: cells\n      };\n    };\n    var deleteAction = Adt.generate([\n      {\n        singleCellTable: [\n          'rng',\n          'cell'\n        ]\n      },\n      { fullTable: ['table'] },\n      {\n        partialTable: [\n          'cells',\n          'outsideDetails'\n        ]\n      },\n      {\n        multiTable: [\n          'startTableCells',\n          'endTableCells',\n          'betweenRng'\n        ]\n      }\n    ]);\n    var getClosestCell$1 = function (container, isRoot) {\n      return closest$2(SugarElement.fromDom(container), 'td,th', isRoot);\n    };\n    var isExpandedCellRng = function (cellRng) {\n      return !eq(cellRng.start, cellRng.end);\n    };\n    var getTableFromCellRng = function (cellRng, isRoot) {\n      return getClosestTable(cellRng.start, isRoot).bind(function (startParentTable) {\n        return getClosestTable(cellRng.end, isRoot).bind(function (endParentTable) {\n          return someIf(eq(startParentTable, endParentTable), startParentTable);\n        });\n      });\n    };\n    var isSingleCellTable = function (cellRng, isRoot) {\n      return !isExpandedCellRng(cellRng) && getTableFromCellRng(cellRng, isRoot).exists(function (table) {\n        var rows = table.dom.rows;\n        return rows.length === 1 && rows[0].cells.length === 1;\n      });\n    };\n    var getCellRng = function (rng, isRoot) {\n      var startCell = getClosestCell$1(rng.startContainer, isRoot);\n      var endCell = getClosestCell$1(rng.endContainer, isRoot);\n      return lift2(startCell, endCell, tableCellRng);\n    };\n    var getCellRangeFromStartTable = function (isRoot) {\n      return function (startCell) {\n        return getClosestTable(startCell, isRoot).bind(function (table) {\n          return last$2(getTableCells(table)).map(function (endCell) {\n            return tableCellRng(startCell, endCell);\n          });\n        });\n      };\n    };\n    var getCellRangeFromEndTable = function (isRoot) {\n      return function (endCell) {\n        return getClosestTable(endCell, isRoot).bind(function (table) {\n          return head(getTableCells(table)).map(function (startCell) {\n            return tableCellRng(startCell, endCell);\n          });\n        });\n      };\n    };\n    var getTableSelectionFromCellRng = function (isRoot) {\n      return function (cellRng) {\n        return getTableFromCellRng(cellRng, isRoot).map(function (table) {\n          return tableSelection(cellRng, table, getTableCells(table));\n        });\n      };\n    };\n    var getTableSelections = function (cellRng, selectionDetails, rng, isRoot) {\n      if (rng.collapsed || !cellRng.forall(isExpandedCellRng)) {\n        return Optional.none();\n      } else if (selectionDetails.isSameTable) {\n        var sameTableSelection = cellRng.bind(getTableSelectionFromCellRng(isRoot));\n        return Optional.some({\n          start: sameTableSelection,\n          end: sameTableSelection\n        });\n      } else {\n        var startCell = getClosestCell$1(rng.startContainer, isRoot);\n        var endCell = getClosestCell$1(rng.endContainer, isRoot);\n        var startTableSelection = startCell.bind(getCellRangeFromStartTable(isRoot)).bind(getTableSelectionFromCellRng(isRoot));\n        var endTableSelection = endCell.bind(getCellRangeFromEndTable(isRoot)).bind(getTableSelectionFromCellRng(isRoot));\n        return Optional.some({\n          start: startTableSelection,\n          end: endTableSelection\n        });\n      }\n    };\n    var getCellIndex = function (cells, cell) {\n      return findIndex$2(cells, function (x) {\n        return eq(x, cell);\n      });\n    };\n    var getSelectedCells = function (tableSelection) {\n      return lift2(getCellIndex(tableSelection.cells, tableSelection.rng.start), getCellIndex(tableSelection.cells, tableSelection.rng.end), function (startIndex, endIndex) {\n        return tableSelection.cells.slice(startIndex, endIndex + 1);\n      });\n    };\n    var isSingleCellTableContentSelected = function (optCellRng, rng, isRoot) {\n      return optCellRng.exists(function (cellRng) {\n        return isSingleCellTable(cellRng, isRoot) && hasAllContentsSelected(cellRng.start, rng);\n      });\n    };\n    var unselectCells = function (rng, selectionDetails) {\n      var startTable = selectionDetails.startTable, endTable = selectionDetails.endTable;\n      var otherContentRng = rng.cloneRange();\n      startTable.each(function (table) {\n        return otherContentRng.setStartAfter(table.dom);\n      });\n      endTable.each(function (table) {\n        return otherContentRng.setEndBefore(table.dom);\n      });\n      return otherContentRng;\n    };\n    var handleSingleTable = function (cellRng, selectionDetails, rng, isRoot) {\n      return getTableSelections(cellRng, selectionDetails, rng, isRoot).bind(function (_a) {\n        var start = _a.start, end = _a.end;\n        return start.or(end);\n      }).bind(function (tableSelection) {\n        var isSameTable = selectionDetails.isSameTable;\n        var selectedCells = getSelectedCells(tableSelection).getOr([]);\n        if (isSameTable && tableSelection.cells.length === selectedCells.length) {\n          return Optional.some(deleteAction.fullTable(tableSelection.table));\n        } else if (selectedCells.length > 0) {\n          if (isSameTable) {\n            return Optional.some(deleteAction.partialTable(selectedCells, Optional.none()));\n          } else {\n            var otherContentRng = unselectCells(rng, selectionDetails);\n            return Optional.some(deleteAction.partialTable(selectedCells, Optional.some(__assign(__assign({}, selectionDetails), { rng: otherContentRng }))));\n          }\n        } else {\n          return Optional.none();\n        }\n      });\n    };\n    var handleMultiTable = function (cellRng, selectionDetails, rng, isRoot) {\n      return getTableSelections(cellRng, selectionDetails, rng, isRoot).bind(function (_a) {\n        var start = _a.start, end = _a.end;\n        var startTableSelectedCells = start.bind(getSelectedCells).getOr([]);\n        var endTableSelectedCells = end.bind(getSelectedCells).getOr([]);\n        if (startTableSelectedCells.length > 0 && endTableSelectedCells.length > 0) {\n          var otherContentRng = unselectCells(rng, selectionDetails);\n          return Optional.some(deleteAction.multiTable(startTableSelectedCells, endTableSelectedCells, otherContentRng));\n        } else {\n          return Optional.none();\n        }\n      });\n    };\n    var getActionFromRange = function (root, rng) {\n      var isRoot = isRootFromElement(root);\n      var optCellRng = getCellRng(rng, isRoot);\n      var selectionDetails = getTableDetailsFromRange(rng, isRoot);\n      if (isSingleCellTableContentSelected(optCellRng, rng, isRoot)) {\n        return optCellRng.map(function (cellRng) {\n          return deleteAction.singleCellTable(rng, cellRng.start);\n        });\n      } else if (selectionDetails.isMultiTable) {\n        return handleMultiTable(optCellRng, selectionDetails, rng, isRoot);\n      } else {\n        return handleSingleTable(optCellRng, selectionDetails, rng, isRoot);\n      }\n    };\n\n    var freefallRtl = function (root) {\n      var child = isComment$1(root) ? prevSibling(root) : lastChild(root);\n      return child.bind(freefallRtl).orThunk(function () {\n        return Optional.some(root);\n      });\n    };\n    var cleanCells = function (cells) {\n      return each$k(cells, function (cell) {\n        remove$6(cell, 'contenteditable');\n        fillWithPaddingBr(cell);\n      });\n    };\n    var getOutsideBlock = function (editor, container) {\n      return Optional.from(editor.dom.getParent(container, editor.dom.isBlock)).map(SugarElement.fromDom);\n    };\n    var handleEmptyBlock = function (editor, startInTable, emptyBlock) {\n      emptyBlock.each(function (block) {\n        if (startInTable) {\n          remove$7(block);\n        } else {\n          fillWithPaddingBr(block);\n          editor.selection.setCursorLocation(block.dom, 0);\n        }\n      });\n    };\n    var setCursorInCell = function (editor, cell) {\n      var selectedCells = getCellsFromEditor(editor);\n      editor.selection.setCursorLocation(cell.dom, 0);\n      if (selectedCells.length > 1) {\n        set$1(cell, 'data-mce-selected', '1');\n      }\n    };\n    var emptySingleTableCells = function (editor, cells, outsideDetails) {\n      cleanCells(cells);\n      outsideDetails.map(function (_a) {\n        var rng = _a.rng, isStartInTable = _a.isStartInTable;\n        var outsideBlock = getOutsideBlock(editor, isStartInTable ? rng.endContainer : rng.startContainer);\n        rng.deleteContents();\n        handleEmptyBlock(editor, isStartInTable, outsideBlock.filter(isEmpty$2));\n      });\n      if (outsideDetails.forall(function (details) {\n          return details.isStartInTable;\n        })) {\n        setCursorInCell(editor, cells[0]);\n      } else {\n        editor.selection.collapse(true);\n      }\n      return true;\n    };\n    var emptyMultiTableCells = function (editor, startTableCells, endTableCells, betweenRng) {\n      cleanCells(startTableCells.concat(endTableCells));\n      betweenRng.deleteContents();\n      setCursorInCell(editor, startTableCells[0]);\n      return true;\n    };\n    var deleteCellContents = function (editor, rng, cell) {\n      rng.deleteContents();\n      var lastNode = freefallRtl(cell).getOr(cell);\n      var lastBlock = SugarElement.fromDom(editor.dom.getParent(lastNode.dom, editor.dom.isBlock));\n      if (isEmpty$2(lastBlock)) {\n        fillWithPaddingBr(lastBlock);\n        editor.selection.setCursorLocation(lastBlock.dom, 0);\n      }\n      if (!eq(cell, lastBlock)) {\n        var additionalCleanupNodes = is$1(parent(lastBlock), cell) ? [] : siblings(lastBlock);\n        each$k(additionalCleanupNodes.concat(children(cell)), function (node) {\n          if (!eq(node, lastBlock) && !contains$1(node, lastBlock)) {\n            remove$7(node);\n          }\n        });\n      }\n      return true;\n    };\n    var deleteTableElement = function (editor, table) {\n      deleteElement$2(editor, false, table);\n      return true;\n    };\n    var deleteCellRange = function (editor, rootElm, rng) {\n      return getActionFromRange(rootElm, rng).map(function (action) {\n        return action.fold(curry(deleteCellContents, editor), curry(deleteTableElement, editor), curry(emptySingleTableCells, editor), curry(emptyMultiTableCells, editor));\n      });\n    };\n    var deleteCaptionRange = function (editor, caption) {\n      return emptyElement(editor, caption);\n    };\n    var deleteTableRange = function (editor, rootElm, rng, startElm) {\n      return getParentCaption(rootElm, startElm).fold(function () {\n        return deleteCellRange(editor, rootElm, rng);\n      }, function (caption) {\n        return deleteCaptionRange(editor, caption);\n      }).getOr(false);\n    };\n    var deleteRange$2 = function (editor, startElm, selectedCells) {\n      var rootNode = SugarElement.fromDom(editor.getBody());\n      var rng = editor.selection.getRng();\n      return selectedCells.length !== 0 ? emptySingleTableCells(editor, selectedCells, Optional.none()) : deleteTableRange(editor, rootNode, rng, startElm);\n    };\n    var getParentCell = function (rootElm, elm) {\n      return find$3(parentsAndSelf(elm, rootElm), isTableCell$4);\n    };\n    var getParentCaption = function (rootElm, elm) {\n      return find$3(parentsAndSelf(elm, rootElm), isTag('caption'));\n    };\n    var deleteBetweenCells = function (editor, rootElm, forward, fromCell, from) {\n      return navigate(forward, editor.getBody(), from).bind(function (to) {\n        return getParentCell(rootElm, SugarElement.fromDom(to.getNode())).map(function (toCell) {\n          return eq(toCell, fromCell) === false;\n        });\n      });\n    };\n    var emptyElement = function (editor, elm) {\n      fillWithPaddingBr(elm);\n      editor.selection.setCursorLocation(elm.dom, 0);\n      return Optional.some(true);\n    };\n    var isDeleteOfLastCharPos = function (fromCaption, forward, from, to) {\n      return firstPositionIn(fromCaption.dom).bind(function (first) {\n        return lastPositionIn(fromCaption.dom).map(function (last) {\n          return forward ? from.isEqual(first) && to.isEqual(last) : from.isEqual(last) && to.isEqual(first);\n        });\n      }).getOr(true);\n    };\n    var emptyCaretCaption = function (editor, elm) {\n      return emptyElement(editor, elm);\n    };\n    var validateCaretCaption = function (rootElm, fromCaption, to) {\n      return getParentCaption(rootElm, SugarElement.fromDom(to.getNode())).map(function (toCaption) {\n        return eq(toCaption, fromCaption) === false;\n      });\n    };\n    var deleteCaretInsideCaption = function (editor, rootElm, forward, fromCaption, from) {\n      return navigate(forward, editor.getBody(), from).bind(function (to) {\n        return isDeleteOfLastCharPos(fromCaption, forward, from, to) ? emptyCaretCaption(editor, fromCaption) : validateCaretCaption(rootElm, fromCaption, to);\n      }).or(Optional.some(true));\n    };\n    var deleteCaretCells = function (editor, forward, rootElm, startElm) {\n      var from = CaretPosition.fromRangeStart(editor.selection.getRng());\n      return getParentCell(rootElm, startElm).bind(function (fromCell) {\n        return isEmpty$2(fromCell) ? emptyElement(editor, fromCell) : deleteBetweenCells(editor, rootElm, forward, fromCell, from);\n      }).getOr(false);\n    };\n    var deleteCaretCaption = function (editor, forward, rootElm, fromCaption) {\n      var from = CaretPosition.fromRangeStart(editor.selection.getRng());\n      return isEmpty$2(fromCaption) ? emptyElement(editor, fromCaption) : deleteCaretInsideCaption(editor, rootElm, forward, fromCaption, from);\n    };\n    var isNearTable = function (forward, pos) {\n      return forward ? isBeforeTable(pos) : isAfterTable(pos);\n    };\n    var isBeforeOrAfterTable = function (editor, forward) {\n      var fromPos = CaretPosition.fromRangeStart(editor.selection.getRng());\n      return isNearTable(forward, fromPos) || fromPosition(forward, editor.getBody(), fromPos).exists(function (pos) {\n        return isNearTable(forward, pos);\n      });\n    };\n    var deleteCaret$3 = function (editor, forward, startElm) {\n      var rootElm = SugarElement.fromDom(editor.getBody());\n      return getParentCaption(rootElm, startElm).fold(function () {\n        return deleteCaretCells(editor, forward, rootElm, startElm) || isBeforeOrAfterTable(editor, forward);\n      }, function (fromCaption) {\n        return deleteCaretCaption(editor, forward, rootElm, fromCaption).getOr(false);\n      });\n    };\n    var backspaceDelete$9 = function (editor, forward) {\n      var startElm = SugarElement.fromDom(editor.selection.getStart(true));\n      var cells = getCellsFromEditor(editor);\n      return editor.selection.isCollapsed() && cells.length === 0 ? deleteCaret$3(editor, forward, startElm) : deleteRange$2(editor, startElm, cells);\n    };\n\n    var createRange = function (sc, so, ec, eo) {\n      var rng = document.createRange();\n      rng.setStart(sc, so);\n      rng.setEnd(ec, eo);\n      return rng;\n    };\n    var normalizeBlockSelectionRange = function (rng) {\n      var startPos = CaretPosition.fromRangeStart(rng);\n      var endPos = CaretPosition.fromRangeEnd(rng);\n      var rootNode = rng.commonAncestorContainer;\n      return fromPosition(false, rootNode, endPos).map(function (newEndPos) {\n        if (!isInSameBlock(startPos, endPos, rootNode) && isInSameBlock(startPos, newEndPos, rootNode)) {\n          return createRange(startPos.container(), startPos.offset(), newEndPos.container(), newEndPos.offset());\n        } else {\n          return rng;\n        }\n      }).getOr(rng);\n    };\n    var normalize = function (rng) {\n      return rng.collapsed ? rng : normalizeBlockSelectionRange(rng);\n    };\n\n    var hasOnlyOneChild$1 = function (node) {\n      return node.firstChild && node.firstChild === node.lastChild;\n    };\n    var isPaddingNode = function (node) {\n      return node.name === 'br' || node.value === nbsp;\n    };\n    var isPaddedEmptyBlock = function (schema, node) {\n      var blockElements = schema.getBlockElements();\n      return blockElements[node.name] && hasOnlyOneChild$1(node) && isPaddingNode(node.firstChild);\n    };\n    var isEmptyFragmentElement = function (schema, node) {\n      var nonEmptyElements = schema.getNonEmptyElements();\n      return node && (node.isEmpty(nonEmptyElements) || isPaddedEmptyBlock(schema, node));\n    };\n    var isListFragment = function (schema, fragment) {\n      var firstChild = fragment.firstChild;\n      var lastChild = fragment.lastChild;\n      if (firstChild && firstChild.name === 'meta') {\n        firstChild = firstChild.next;\n      }\n      if (lastChild && lastChild.attr('id') === 'mce_marker') {\n        lastChild = lastChild.prev;\n      }\n      if (isEmptyFragmentElement(schema, lastChild)) {\n        lastChild = lastChild.prev;\n      }\n      if (!firstChild || firstChild !== lastChild) {\n        return false;\n      }\n      return firstChild.name === 'ul' || firstChild.name === 'ol';\n    };\n    var cleanupDomFragment = function (domFragment) {\n      var firstChild = domFragment.firstChild;\n      var lastChild = domFragment.lastChild;\n      if (firstChild && firstChild.nodeName === 'META') {\n        firstChild.parentNode.removeChild(firstChild);\n      }\n      if (lastChild && lastChild.id === 'mce_marker') {\n        lastChild.parentNode.removeChild(lastChild);\n      }\n      return domFragment;\n    };\n    var toDomFragment = function (dom, serializer, fragment) {\n      var html = serializer.serialize(fragment);\n      var domFragment = dom.createFragment(html);\n      return cleanupDomFragment(domFragment);\n    };\n    var listItems = function (elm) {\n      return filter$4(elm.childNodes, function (child) {\n        return child.nodeName === 'LI';\n      });\n    };\n    var isPadding = function (node) {\n      return node.data === nbsp || isBr$5(node);\n    };\n    var isListItemPadded = function (node) {\n      return node && node.firstChild && node.firstChild === node.lastChild && isPadding(node.firstChild);\n    };\n    var isEmptyOrPadded = function (elm) {\n      return !elm.firstChild || isListItemPadded(elm);\n    };\n    var trimListItems = function (elms) {\n      return elms.length > 0 && isEmptyOrPadded(elms[elms.length - 1]) ? elms.slice(0, -1) : elms;\n    };\n    var getParentLi = function (dom, node) {\n      var parentBlock = dom.getParent(node, dom.isBlock);\n      return parentBlock && parentBlock.nodeName === 'LI' ? parentBlock : null;\n    };\n    var isParentBlockLi = function (dom, node) {\n      return !!getParentLi(dom, node);\n    };\n    var getSplit = function (parentNode, rng) {\n      var beforeRng = rng.cloneRange();\n      var afterRng = rng.cloneRange();\n      beforeRng.setStartBefore(parentNode);\n      afterRng.setEndAfter(parentNode);\n      return [\n        beforeRng.cloneContents(),\n        afterRng.cloneContents()\n      ];\n    };\n    var findFirstIn = function (node, rootNode) {\n      var caretPos = CaretPosition.before(node);\n      var caretWalker = CaretWalker(rootNode);\n      var newCaretPos = caretWalker.next(caretPos);\n      return newCaretPos ? newCaretPos.toRange() : null;\n    };\n    var findLastOf = function (node, rootNode) {\n      var caretPos = CaretPosition.after(node);\n      var caretWalker = CaretWalker(rootNode);\n      var newCaretPos = caretWalker.prev(caretPos);\n      return newCaretPos ? newCaretPos.toRange() : null;\n    };\n    var insertMiddle = function (target, elms, rootNode, rng) {\n      var parts = getSplit(target, rng);\n      var parentElm = target.parentNode;\n      parentElm.insertBefore(parts[0], target);\n      Tools.each(elms, function (li) {\n        parentElm.insertBefore(li, target);\n      });\n      parentElm.insertBefore(parts[1], target);\n      parentElm.removeChild(target);\n      return findLastOf(elms[elms.length - 1], rootNode);\n    };\n    var insertBefore$1 = function (target, elms, rootNode) {\n      var parentElm = target.parentNode;\n      Tools.each(elms, function (elm) {\n        parentElm.insertBefore(elm, target);\n      });\n      return findFirstIn(target, rootNode);\n    };\n    var insertAfter$1 = function (target, elms, rootNode, dom) {\n      dom.insertAfter(elms.reverse(), target);\n      return findLastOf(elms[0], rootNode);\n    };\n    var insertAtCaret$1 = function (serializer, dom, rng, fragment) {\n      var domFragment = toDomFragment(dom, serializer, fragment);\n      var liTarget = getParentLi(dom, rng.startContainer);\n      var liElms = trimListItems(listItems(domFragment.firstChild));\n      var BEGINNING = 1, END = 2;\n      var rootNode = dom.getRoot();\n      var isAt = function (location) {\n        var caretPos = CaretPosition.fromRangeStart(rng);\n        var caretWalker = CaretWalker(dom.getRoot());\n        var newPos = location === BEGINNING ? caretWalker.prev(caretPos) : caretWalker.next(caretPos);\n        return newPos ? getParentLi(dom, newPos.getNode()) !== liTarget : true;\n      };\n      if (isAt(BEGINNING)) {\n        return insertBefore$1(liTarget, liElms, rootNode);\n      } else if (isAt(END)) {\n        return insertAfter$1(liTarget, liElms, rootNode, dom);\n      }\n      return insertMiddle(liTarget, liElms, rootNode, rng);\n    };\n\n    var trimOrPadLeftRight = function (dom, rng, html) {\n      var root = SugarElement.fromDom(dom.getRoot());\n      if (needsToBeNbspLeft(root, CaretPosition.fromRangeStart(rng))) {\n        html = html.replace(/^ /, '&nbsp;');\n      } else {\n        html = html.replace(/^&nbsp;/, ' ');\n      }\n      if (needsToBeNbspRight(root, CaretPosition.fromRangeEnd(rng))) {\n        html = html.replace(/(&nbsp;| )(<br( \\/)>)?$/, '&nbsp;');\n      } else {\n        html = html.replace(/&nbsp;(<br( \\/)?>)?$/, ' ');\n      }\n      return html;\n    };\n\n    var isTableCell$1 = isTableCell$5;\n    var isTableCellContentSelected = function (dom, rng, cell) {\n      if (cell !== null) {\n        var endCell = dom.getParent(rng.endContainer, isTableCell$1);\n        return cell === endCell && hasAllContentsSelected(SugarElement.fromDom(cell), rng);\n      } else {\n        return false;\n      }\n    };\n    var validInsertion = function (editor, value, parentNode) {\n      if (parentNode.getAttribute('data-mce-bogus') === 'all') {\n        parentNode.parentNode.insertBefore(editor.dom.createFragment(value), parentNode);\n      } else {\n        var node = parentNode.firstChild;\n        var node2 = parentNode.lastChild;\n        if (!node || node === node2 && node.nodeName === 'BR') {\n          editor.dom.setHTML(parentNode, value);\n        } else {\n          editor.selection.setContent(value);\n        }\n      }\n    };\n    var trimBrsFromTableCell = function (dom, elm) {\n      Optional.from(dom.getParent(elm, 'td,th')).map(SugarElement.fromDom).each(trimBlockTrailingBr);\n    };\n    var reduceInlineTextElements = function (editor, merge) {\n      var textInlineElements = editor.schema.getTextInlineElements();\n      var dom = editor.dom;\n      if (merge) {\n        var root_1 = editor.getBody();\n        var elementUtils_1 = ElementUtils(dom);\n        Tools.each(dom.select('*[data-mce-fragment]'), function (node) {\n          var isInline = isNonNullable(textInlineElements[node.nodeName.toLowerCase()]);\n          if (isInline && hasInheritableStyles(dom, node)) {\n            for (var parentNode = node.parentNode; isNonNullable(parentNode) && parentNode !== root_1; parentNode = parentNode.parentNode) {\n              var styleConflict = hasStyleConflict(dom, node, parentNode);\n              if (styleConflict) {\n                break;\n              }\n              if (elementUtils_1.compare(parentNode, node)) {\n                dom.remove(node, true);\n                break;\n              }\n            }\n          }\n        });\n      }\n    };\n    var markFragmentElements = function (fragment) {\n      var node = fragment;\n      while (node = node.walk()) {\n        if (node.type === 1) {\n          node.attr('data-mce-fragment', '1');\n        }\n      }\n    };\n    var unmarkFragmentElements = function (elm) {\n      Tools.each(elm.getElementsByTagName('*'), function (elm) {\n        elm.removeAttribute('data-mce-fragment');\n      });\n    };\n    var isPartOfFragment = function (node) {\n      return !!node.getAttribute('data-mce-fragment');\n    };\n    var canHaveChildren = function (editor, node) {\n      return node && !editor.schema.getShortEndedElements()[node.nodeName];\n    };\n    var moveSelectionToMarker = function (editor, marker) {\n      var nextRng;\n      var dom = editor.dom;\n      var selection = editor.selection;\n      var getContentEditableFalseParent = function (node) {\n        var root = editor.getBody();\n        for (; node && node !== root; node = node.parentNode) {\n          if (dom.getContentEditable(node) === 'false') {\n            return node;\n          }\n        }\n        return null;\n      };\n      if (!marker) {\n        return;\n      }\n      selection.scrollIntoView(marker);\n      var parentEditableFalseElm = getContentEditableFalseParent(marker);\n      if (parentEditableFalseElm) {\n        dom.remove(marker);\n        selection.select(parentEditableFalseElm);\n        return;\n      }\n      var rng = dom.createRng();\n      var node = marker.previousSibling;\n      if (isText$7(node)) {\n        rng.setStart(node, node.nodeValue.length);\n        if (!Env.ie) {\n          var node2 = marker.nextSibling;\n          if (isText$7(node2)) {\n            node.appendData(node2.data);\n            node2.parentNode.removeChild(node2);\n          }\n        }\n      } else {\n        rng.setStartBefore(marker);\n        rng.setEndBefore(marker);\n      }\n      var findNextCaretRng = function (rng) {\n        var caretPos = CaretPosition.fromRangeStart(rng);\n        var caretWalker = CaretWalker(editor.getBody());\n        caretPos = caretWalker.next(caretPos);\n        if (caretPos) {\n          return caretPos.toRange();\n        }\n      };\n      var parentBlock = dom.getParent(marker, dom.isBlock);\n      dom.remove(marker);\n      if (parentBlock && dom.isEmpty(parentBlock)) {\n        editor.$(parentBlock).empty();\n        rng.setStart(parentBlock, 0);\n        rng.setEnd(parentBlock, 0);\n        if (!isTableCell$1(parentBlock) && !isPartOfFragment(parentBlock) && (nextRng = findNextCaretRng(rng))) {\n          rng = nextRng;\n          dom.remove(parentBlock);\n        } else {\n          dom.add(parentBlock, dom.create('br', { 'data-mce-bogus': '1' }));\n        }\n      }\n      selection.setRng(rng);\n    };\n    var deleteSelectedContent = function (editor) {\n      var dom = editor.dom;\n      var rng = normalize(editor.selection.getRng());\n      editor.selection.setRng(rng);\n      var startCell = dom.getParent(rng.startContainer, isTableCell$1);\n      if (isTableCellContentSelected(dom, rng, startCell)) {\n        deleteCellContents(editor, rng, SugarElement.fromDom(startCell));\n      } else {\n        editor.getDoc().execCommand('Delete', false, null);\n      }\n    };\n    var insertHtmlAtCaret = function (editor, value, details) {\n      var parentNode;\n      var rng, node;\n      var selection = editor.selection;\n      var dom = editor.dom;\n      if (/^ | $/.test(value)) {\n        value = trimOrPadLeftRight(dom, selection.getRng(), value);\n      }\n      var parser = editor.parser;\n      var merge = details.merge;\n      var serializer = HtmlSerializer({ validate: shouldValidate(editor) }, editor.schema);\n      var bookmarkHtml = '<span id=\"mce_marker\" data-mce-type=\"bookmark\">&#xFEFF;</span>';\n      var args = editor.fire('BeforeSetContent', {\n        content: value,\n        format: 'html',\n        selection: true,\n        paste: details.paste\n      });\n      if (args.isDefaultPrevented()) {\n        editor.fire('SetContent', {\n          content: args.content,\n          format: 'html',\n          selection: true,\n          paste: details.paste\n        });\n        return;\n      }\n      value = args.content;\n      if (value.indexOf('{$caret}') === -1) {\n        value += '{$caret}';\n      }\n      value = value.replace(/\\{\\$caret\\}/, bookmarkHtml);\n      rng = selection.getRng();\n      var caretElement = rng.startContainer || (rng.parentElement ? rng.parentElement() : null);\n      var body = editor.getBody();\n      if (caretElement === body && selection.isCollapsed()) {\n        if (dom.isBlock(body.firstChild) && canHaveChildren(editor, body.firstChild) && dom.isEmpty(body.firstChild)) {\n          rng = dom.createRng();\n          rng.setStart(body.firstChild, 0);\n          rng.setEnd(body.firstChild, 0);\n          selection.setRng(rng);\n        }\n      }\n      if (!selection.isCollapsed()) {\n        deleteSelectedContent(editor);\n      }\n      parentNode = selection.getNode();\n      var parserArgs = {\n        context: parentNode.nodeName.toLowerCase(),\n        data: details.data,\n        insert: true\n      };\n      var fragment = parser.parse(value, parserArgs);\n      if (details.paste === true && isListFragment(editor.schema, fragment) && isParentBlockLi(dom, parentNode)) {\n        rng = insertAtCaret$1(serializer, dom, selection.getRng(), fragment);\n        selection.setRng(rng);\n        editor.fire('SetContent', args);\n        return;\n      }\n      markFragmentElements(fragment);\n      node = fragment.lastChild;\n      if (node.attr('id') === 'mce_marker') {\n        var marker = node;\n        for (node = node.prev; node; node = node.walk(true)) {\n          if (node.type === 3 || !dom.isBlock(node.name)) {\n            if (editor.schema.isValidChild(node.parent.name, 'span')) {\n              node.parent.insert(marker, node, node.name === 'br');\n            }\n            break;\n          }\n        }\n      }\n      editor._selectionOverrides.showBlockCaretContainer(parentNode);\n      if (!parserArgs.invalid) {\n        value = serializer.serialize(fragment);\n        validInsertion(editor, value, parentNode);\n      } else {\n        editor.selection.setContent(bookmarkHtml);\n        parentNode = selection.getNode();\n        var rootNode = editor.getBody();\n        if (parentNode.nodeType === 9) {\n          parentNode = node = rootNode;\n        } else {\n          node = parentNode;\n        }\n        while (node !== rootNode) {\n          parentNode = node;\n          node = node.parentNode;\n        }\n        value = parentNode === rootNode ? rootNode.innerHTML : dom.getOuterHTML(parentNode);\n        value = serializer.serialize(parser.parse(value.replace(/<span (id=\"mce_marker\"|id=mce_marker).+?<\\/span>/i, function () {\n          return serializer.serialize(fragment);\n        })));\n        if (parentNode === rootNode) {\n          dom.setHTML(rootNode, value);\n        } else {\n          dom.setOuterHTML(parentNode, value);\n        }\n      }\n      reduceInlineTextElements(editor, merge);\n      moveSelectionToMarker(editor, dom.get('mce_marker'));\n      unmarkFragmentElements(editor.getBody());\n      trimBrsFromTableCell(dom, selection.getStart());\n      editor.fire('SetContent', args);\n      editor.addVisual();\n    };\n\n    var traverse = function (node, fn) {\n      fn(node);\n      if (node.firstChild) {\n        traverse(node.firstChild, fn);\n      }\n      if (node.next) {\n        traverse(node.next, fn);\n      }\n    };\n    var findMatchingNodes = function (nodeFilters, attributeFilters, node) {\n      var nodeMatches = {};\n      var attrMatches = {};\n      var matches = [];\n      if (node.firstChild) {\n        traverse(node.firstChild, function (node) {\n          each$k(nodeFilters, function (filter) {\n            if (filter.name === node.name) {\n              if (nodeMatches[filter.name]) {\n                nodeMatches[filter.name].nodes.push(node);\n              } else {\n                nodeMatches[filter.name] = {\n                  filter: filter,\n                  nodes: [node]\n                };\n              }\n            }\n          });\n          each$k(attributeFilters, function (filter) {\n            if (typeof node.attr(filter.name) === 'string') {\n              if (attrMatches[filter.name]) {\n                attrMatches[filter.name].nodes.push(node);\n              } else {\n                attrMatches[filter.name] = {\n                  filter: filter,\n                  nodes: [node]\n                };\n              }\n            }\n          });\n        });\n      }\n      for (var name_1 in nodeMatches) {\n        if (has$2(nodeMatches, name_1)) {\n          matches.push(nodeMatches[name_1]);\n        }\n      }\n      for (var name_2 in attrMatches) {\n        if (has$2(attrMatches, name_2)) {\n          matches.push(attrMatches[name_2]);\n        }\n      }\n      return matches;\n    };\n    var filter$1 = function (nodeFilters, attributeFilters, node) {\n      var matches = findMatchingNodes(nodeFilters, attributeFilters, node);\n      each$k(matches, function (match) {\n        each$k(match.filter.callbacks, function (callback) {\n          callback(match.nodes, match.filter.name, {});\n        });\n      });\n    };\n\n    var defaultFormat$1 = 'html';\n    var isTreeNode = function (content) {\n      return content instanceof AstNode;\n    };\n    var moveSelection = function (editor) {\n      if (hasFocus(editor)) {\n        firstPositionIn(editor.getBody()).each(function (pos) {\n          var node = pos.getNode();\n          var caretPos = isTable$3(node) ? firstPositionIn(node).getOr(pos) : pos;\n          editor.selection.setRng(caretPos.toRange());\n        });\n      }\n    };\n    var setEditorHtml = function (editor, html, noSelection) {\n      editor.dom.setHTML(editor.getBody(), html);\n      if (noSelection !== true) {\n        moveSelection(editor);\n      }\n    };\n    var setContentString = function (editor, body, content, args) {\n      if (content.length === 0 || /^\\s+$/.test(content)) {\n        var padd = '<br data-mce-bogus=\"1\">';\n        if (body.nodeName === 'TABLE') {\n          content = '<tr><td>' + padd + '</td></tr>';\n        } else if (/^(UL|OL)$/.test(body.nodeName)) {\n          content = '<li>' + padd + '</li>';\n        }\n        var forcedRootBlockName = getForcedRootBlock(editor);\n        if (forcedRootBlockName && editor.schema.isValidChild(body.nodeName.toLowerCase(), forcedRootBlockName.toLowerCase())) {\n          content = padd;\n          content = editor.dom.createHTML(forcedRootBlockName, getForcedRootBlockAttrs(editor), content);\n        } else if (!content) {\n          content = '<br data-mce-bogus=\"1\">';\n        }\n        setEditorHtml(editor, content, args.no_selection);\n        editor.fire('SetContent', args);\n      } else {\n        if (args.format !== 'raw') {\n          content = HtmlSerializer({ validate: editor.validate }, editor.schema).serialize(editor.parser.parse(content, {\n            isRootContent: true,\n            insert: true\n          }));\n        }\n        args.content = isWsPreserveElement(SugarElement.fromDom(body)) ? content : Tools.trim(content);\n        setEditorHtml(editor, args.content, args.no_selection);\n        if (!args.no_events) {\n          editor.fire('SetContent', args);\n        }\n      }\n      return args.content;\n    };\n    var setContentTree = function (editor, body, content, args) {\n      filter$1(editor.parser.getNodeFilters(), editor.parser.getAttributeFilters(), content);\n      var html = HtmlSerializer({ validate: editor.validate }, editor.schema).serialize(content);\n      args.content = isWsPreserveElement(SugarElement.fromDom(body)) ? html : Tools.trim(html);\n      setEditorHtml(editor, args.content, args.no_selection);\n      if (!args.no_events) {\n        editor.fire('SetContent', args);\n      }\n      return content;\n    };\n    var setupArgs$2 = function (args, content) {\n      return __assign(__assign({ format: defaultFormat$1 }, args), {\n        set: true,\n        content: isTreeNode(content) ? '' : content\n      });\n    };\n    var setContentInternal = function (editor, content, args) {\n      var defaultedArgs = setupArgs$2(args, content);\n      var updatedArgs = args.no_events ? defaultedArgs : editor.fire('BeforeSetContent', defaultedArgs);\n      if (!isTreeNode(content)) {\n        content = updatedArgs.content;\n      }\n      return Optional.from(editor.getBody()).fold(constant(content), function (body) {\n        return isTreeNode(content) ? setContentTree(editor, body, content, updatedArgs) : setContentString(editor, body, content, updatedArgs);\n      });\n    };\n\n    var sibling = function (scope, predicate) {\n      return sibling$2(scope, predicate).isSome();\n    };\n\n    var ensureIsRoot = function (isRoot) {\n      return isFunction(isRoot) ? isRoot : never;\n    };\n    var ancestor = function (scope, transform, isRoot) {\n      var element = scope.dom;\n      var stop = ensureIsRoot(isRoot);\n      while (element.parentNode) {\n        element = element.parentNode;\n        var el = SugarElement.fromDom(element);\n        var transformed = transform(el);\n        if (transformed.isSome()) {\n          return transformed;\n        } else if (stop(el)) {\n          break;\n        }\n      }\n      return Optional.none();\n    };\n    var closest$1 = function (scope, transform, isRoot) {\n      var current = transform(scope);\n      var stop = ensureIsRoot(isRoot);\n      return current.orThunk(function () {\n        return stop(scope) ? Optional.none() : ancestor(scope, transform, stop);\n      });\n    };\n\n    var isEq$3 = isEq$5;\n    var matchesUnInheritedFormatSelector = function (ed, node, name) {\n      var formatList = ed.formatter.get(name);\n      if (formatList) {\n        for (var i = 0; i < formatList.length; i++) {\n          var format = formatList[i];\n          if (isSelectorFormat(format) && format.inherit === false && ed.dom.is(node, format.selector)) {\n            return true;\n          }\n        }\n      }\n      return false;\n    };\n    var matchParents = function (editor, node, name, vars, similar) {\n      var root = editor.dom.getRoot();\n      if (node === root) {\n        return false;\n      }\n      node = editor.dom.getParent(node, function (node) {\n        if (matchesUnInheritedFormatSelector(editor, node, name)) {\n          return true;\n        }\n        return node.parentNode === root || !!matchNode(editor, node, name, vars, true);\n      });\n      return !!matchNode(editor, node, name, vars, similar);\n    };\n    var matchName$1 = function (dom, node, format) {\n      if (isEq$3(node, format.inline)) {\n        return true;\n      }\n      if (isEq$3(node, format.block)) {\n        return true;\n      }\n      if (format.selector) {\n        return node.nodeType === 1 && dom.is(node, format.selector);\n      }\n    };\n    var matchItems = function (dom, node, format, itemName, similar, vars) {\n      var items = format[itemName];\n      if (isFunction(format.onmatch)) {\n        return format.onmatch(node, format, itemName);\n      }\n      if (items) {\n        if (isUndefined(items.length)) {\n          for (var key in items) {\n            if (has$2(items, key)) {\n              var value = itemName === 'attributes' ? dom.getAttrib(node, key) : getStyle(dom, node, key);\n              var expectedValue = replaceVars(items[key], vars);\n              var isEmptyValue = isNullable(value) || isEmpty$3(value);\n              if (isEmptyValue && isNullable(expectedValue)) {\n                continue;\n              }\n              if (similar && isEmptyValue && !format.exact) {\n                return false;\n              }\n              if ((!similar || format.exact) && !isEq$3(value, normalizeStyleValue(dom, expectedValue, key))) {\n                return false;\n              }\n            }\n          }\n        } else {\n          for (var i = 0; i < items.length; i++) {\n            if (itemName === 'attributes' ? dom.getAttrib(node, items[i]) : getStyle(dom, node, items[i])) {\n              return true;\n            }\n          }\n        }\n      }\n      return true;\n    };\n    var matchNode = function (ed, node, name, vars, similar) {\n      var formatList = ed.formatter.get(name);\n      var dom = ed.dom;\n      if (formatList && node) {\n        for (var i = 0; i < formatList.length; i++) {\n          var format = formatList[i];\n          if (matchName$1(ed.dom, node, format) && matchItems(dom, node, format, 'attributes', similar, vars) && matchItems(dom, node, format, 'styles', similar, vars)) {\n            var classes = format.classes;\n            if (classes) {\n              for (var x = 0; x < classes.length; x++) {\n                if (!ed.dom.hasClass(node, replaceVars(classes[x], vars))) {\n                  return;\n                }\n              }\n            }\n            return format;\n          }\n        }\n      }\n    };\n    var match$2 = function (editor, name, vars, node, similar) {\n      if (node) {\n        return matchParents(editor, node, name, vars, similar);\n      }\n      node = editor.selection.getNode();\n      if (matchParents(editor, node, name, vars, similar)) {\n        return true;\n      }\n      var startNode = editor.selection.getStart();\n      if (startNode !== node) {\n        if (matchParents(editor, startNode, name, vars, similar)) {\n          return true;\n        }\n      }\n      return false;\n    };\n    var matchAll = function (editor, names, vars) {\n      var matchedFormatNames = [];\n      var checkedMap = {};\n      var startElement = editor.selection.getStart();\n      editor.dom.getParent(startElement, function (node) {\n        for (var i = 0; i < names.length; i++) {\n          var name_1 = names[i];\n          if (!checkedMap[name_1] && matchNode(editor, node, name_1, vars)) {\n            checkedMap[name_1] = true;\n            matchedFormatNames.push(name_1);\n          }\n        }\n      }, editor.dom.getRoot());\n      return matchedFormatNames;\n    };\n    var closest = function (editor, names) {\n      var isRoot = function (elm) {\n        return eq(elm, SugarElement.fromDom(editor.getBody()));\n      };\n      var match = function (elm, name) {\n        return matchNode(editor, elm.dom, name) ? Optional.some(name) : Optional.none();\n      };\n      return Optional.from(editor.selection.getStart(true)).bind(function (rawElm) {\n        return closest$1(SugarElement.fromDom(rawElm), function (elm) {\n          return findMap(names, function (name) {\n            return match(elm, name);\n          });\n        }, isRoot);\n      }).getOrNull();\n    };\n    var canApply = function (editor, name) {\n      var formatList = editor.formatter.get(name);\n      var dom = editor.dom;\n      if (formatList) {\n        var startNode = editor.selection.getStart();\n        var parents = getParents$2(dom, startNode);\n        for (var x = formatList.length - 1; x >= 0; x--) {\n          var format = formatList[x];\n          if (!isSelectorFormat(format) || isNonNullable(format.defaultBlock)) {\n            return true;\n          }\n          for (var i = parents.length - 1; i >= 0; i--) {\n            if (dom.is(parents[i], format.selector)) {\n              return true;\n            }\n          }\n        }\n      }\n      return false;\n    };\n    var matchAllOnNode = function (editor, node, formatNames) {\n      return foldl(formatNames, function (acc, name) {\n        var matchSimilar = isVariableFormatName(editor, name);\n        if (editor.formatter.matchNode(node, name, {}, matchSimilar)) {\n          return acc.concat([name]);\n        } else {\n          return acc;\n        }\n      }, []);\n    };\n\n    var ZWSP = ZWSP$1, CARET_ID = '_mce_caret';\n    var importNode = function (ownerDocument, node) {\n      return ownerDocument.importNode(node, true);\n    };\n    var getEmptyCaretContainers = function (node) {\n      var nodes = [];\n      while (node) {\n        if (node.nodeType === 3 && node.nodeValue !== ZWSP || node.childNodes.length > 1) {\n          return [];\n        }\n        if (node.nodeType === 1) {\n          nodes.push(node);\n        }\n        node = node.firstChild;\n      }\n      return nodes;\n    };\n    var isCaretContainerEmpty = function (node) {\n      return getEmptyCaretContainers(node).length > 0;\n    };\n    var findFirstTextNode = function (node) {\n      if (node) {\n        var walker = new DomTreeWalker(node, node);\n        for (node = walker.current(); node; node = walker.next()) {\n          if (isText$7(node)) {\n            return node;\n          }\n        }\n      }\n      return null;\n    };\n    var createCaretContainer = function (fill) {\n      var caretContainer = SugarElement.fromTag('span');\n      setAll$1(caretContainer, {\n        'id': CARET_ID,\n        'data-mce-bogus': '1',\n        'data-mce-type': 'format-caret'\n      });\n      if (fill) {\n        append$1(caretContainer, SugarElement.fromText(ZWSP));\n      }\n      return caretContainer;\n    };\n    var trimZwspFromCaretContainer = function (caretContainerNode) {\n      var textNode = findFirstTextNode(caretContainerNode);\n      if (textNode && textNode.nodeValue.charAt(0) === ZWSP) {\n        textNode.deleteData(0, 1);\n      }\n      return textNode;\n    };\n    var removeCaretContainerNode = function (editor, node, moveCaret) {\n      if (moveCaret === void 0) {\n        moveCaret = true;\n      }\n      var dom = editor.dom, selection = editor.selection;\n      if (isCaretContainerEmpty(node)) {\n        deleteElement$2(editor, false, SugarElement.fromDom(node), moveCaret);\n      } else {\n        var rng = selection.getRng();\n        var block = dom.getParent(node, dom.isBlock);\n        var startContainer = rng.startContainer;\n        var startOffset = rng.startOffset;\n        var endContainer = rng.endContainer;\n        var endOffset = rng.endOffset;\n        var textNode = trimZwspFromCaretContainer(node);\n        dom.remove(node, true);\n        if (startContainer === textNode && startOffset > 0) {\n          rng.setStart(textNode, startOffset - 1);\n        }\n        if (endContainer === textNode && endOffset > 0) {\n          rng.setEnd(textNode, endOffset - 1);\n        }\n        if (block && dom.isEmpty(block)) {\n          fillWithPaddingBr(SugarElement.fromDom(block));\n        }\n        selection.setRng(rng);\n      }\n    };\n    var removeCaretContainer = function (editor, node, moveCaret) {\n      if (moveCaret === void 0) {\n        moveCaret = true;\n      }\n      var dom = editor.dom, selection = editor.selection;\n      if (!node) {\n        node = getParentCaretContainer(editor.getBody(), selection.getStart());\n        if (!node) {\n          while (node = dom.get(CARET_ID)) {\n            removeCaretContainerNode(editor, node, false);\n          }\n        }\n      } else {\n        removeCaretContainerNode(editor, node, moveCaret);\n      }\n    };\n    var insertCaretContainerNode = function (editor, caretContainer, formatNode) {\n      var dom = editor.dom, block = dom.getParent(formatNode, curry(isTextBlock$1, editor));\n      if (block && dom.isEmpty(block)) {\n        formatNode.parentNode.replaceChild(caretContainer, formatNode);\n      } else {\n        removeTrailingBr(SugarElement.fromDom(formatNode));\n        if (dom.isEmpty(formatNode)) {\n          formatNode.parentNode.replaceChild(caretContainer, formatNode);\n        } else {\n          dom.insertAfter(caretContainer, formatNode);\n        }\n      }\n    };\n    var appendNode = function (parentNode, node) {\n      parentNode.appendChild(node);\n      return node;\n    };\n    var insertFormatNodesIntoCaretContainer = function (formatNodes, caretContainer) {\n      var innerMostFormatNode = foldr(formatNodes, function (parentNode, formatNode) {\n        return appendNode(parentNode, formatNode.cloneNode(false));\n      }, caretContainer);\n      return appendNode(innerMostFormatNode, innerMostFormatNode.ownerDocument.createTextNode(ZWSP));\n    };\n    var cleanFormatNode = function (editor, caretContainer, formatNode, name, vars, similar) {\n      var formatter = editor.formatter;\n      var dom = editor.dom;\n      var validFormats = filter$4(keys(formatter.get()), function (formatName) {\n        return formatName !== name && !contains$2(formatName, 'removeformat');\n      });\n      var matchedFormats = matchAllOnNode(editor, formatNode, validFormats);\n      var uniqueFormats = filter$4(matchedFormats, function (fmtName) {\n        return !areSimilarFormats(editor, fmtName, name);\n      });\n      if (uniqueFormats.length > 0) {\n        var clonedFormatNode = formatNode.cloneNode(false);\n        dom.add(caretContainer, clonedFormatNode);\n        formatter.remove(name, vars, clonedFormatNode, similar);\n        dom.remove(clonedFormatNode);\n        return Optional.some(clonedFormatNode);\n      } else {\n        return Optional.none();\n      }\n    };\n    var applyCaretFormat = function (editor, name, vars) {\n      var caretContainer, textNode;\n      var selection = editor.selection;\n      var selectionRng = selection.getRng();\n      var offset = selectionRng.startOffset;\n      var container = selectionRng.startContainer;\n      var text = container.nodeValue;\n      caretContainer = getParentCaretContainer(editor.getBody(), selection.getStart());\n      if (caretContainer) {\n        textNode = findFirstTextNode(caretContainer);\n      }\n      var wordcharRegex = /[^\\s\\u00a0\\u00ad\\u200b\\ufeff]/;\n      if (text && offset > 0 && offset < text.length && wordcharRegex.test(text.charAt(offset)) && wordcharRegex.test(text.charAt(offset - 1))) {\n        var bookmark = selection.getBookmark();\n        selectionRng.collapse(true);\n        var rng = expandRng(editor, selectionRng, editor.formatter.get(name));\n        rng = split(rng);\n        editor.formatter.apply(name, vars, rng);\n        selection.moveToBookmark(bookmark);\n      } else {\n        if (!caretContainer || textNode.nodeValue !== ZWSP) {\n          caretContainer = importNode(editor.getDoc(), createCaretContainer(true).dom);\n          textNode = caretContainer.firstChild;\n          selectionRng.insertNode(caretContainer);\n          offset = 1;\n          editor.formatter.apply(name, vars, caretContainer);\n        } else {\n          editor.formatter.apply(name, vars, caretContainer);\n        }\n        selection.setCursorLocation(textNode, offset);\n      }\n    };\n    var removeCaretFormat = function (editor, name, vars, similar) {\n      var dom = editor.dom;\n      var selection = editor.selection;\n      var hasContentAfter, node, formatNode;\n      var parents = [];\n      var rng = selection.getRng();\n      var container = rng.startContainer;\n      var offset = rng.startOffset;\n      node = container;\n      if (container.nodeType === 3) {\n        if (offset !== container.nodeValue.length) {\n          hasContentAfter = true;\n        }\n        node = node.parentNode;\n      }\n      while (node) {\n        if (matchNode(editor, node, name, vars, similar)) {\n          formatNode = node;\n          break;\n        }\n        if (node.nextSibling) {\n          hasContentAfter = true;\n        }\n        parents.push(node);\n        node = node.parentNode;\n      }\n      if (!formatNode) {\n        return;\n      }\n      if (hasContentAfter) {\n        var bookmark = selection.getBookmark();\n        rng.collapse(true);\n        var expandedRng = expandRng(editor, rng, editor.formatter.get(name), true);\n        expandedRng = split(expandedRng);\n        editor.formatter.remove(name, vars, expandedRng, similar);\n        selection.moveToBookmark(bookmark);\n      } else {\n        var caretContainer = getParentCaretContainer(editor.getBody(), formatNode);\n        var newCaretContainer = createCaretContainer(false).dom;\n        insertCaretContainerNode(editor, newCaretContainer, caretContainer !== null ? caretContainer : formatNode);\n        var cleanedFormatNode = cleanFormatNode(editor, newCaretContainer, formatNode, name, vars, similar);\n        var caretTextNode = insertFormatNodesIntoCaretContainer(parents.concat(cleanedFormatNode.toArray()), newCaretContainer);\n        removeCaretContainerNode(editor, caretContainer, false);\n        selection.setCursorLocation(caretTextNode, 1);\n        if (dom.isEmpty(formatNode)) {\n          dom.remove(formatNode);\n        }\n      }\n    };\n    var disableCaretContainer = function (editor, keyCode) {\n      var selection = editor.selection, body = editor.getBody();\n      removeCaretContainer(editor, null, false);\n      if ((keyCode === 8 || keyCode === 46) && selection.isCollapsed() && selection.getStart().innerHTML === ZWSP) {\n        removeCaretContainer(editor, getParentCaretContainer(body, selection.getStart()));\n      }\n      if (keyCode === 37 || keyCode === 39) {\n        removeCaretContainer(editor, getParentCaretContainer(body, selection.getStart()));\n      }\n    };\n    var setup$k = function (editor) {\n      editor.on('mouseup keydown', function (e) {\n        disableCaretContainer(editor, e.keyCode);\n      });\n    };\n    var replaceWithCaretFormat = function (targetNode, formatNodes) {\n      var caretContainer = createCaretContainer(false);\n      var innerMost = insertFormatNodesIntoCaretContainer(formatNodes, caretContainer.dom);\n      before$4(SugarElement.fromDom(targetNode), caretContainer);\n      remove$7(SugarElement.fromDom(targetNode));\n      return CaretPosition(innerMost, 0);\n    };\n    var isFormatElement = function (editor, element) {\n      var inlineElements = editor.schema.getTextInlineElements();\n      return has$2(inlineElements, name(element)) && !isCaretNode(element.dom) && !isBogus$2(element.dom);\n    };\n    var isEmptyCaretFormatElement = function (element) {\n      return isCaretNode(element.dom) && isCaretContainerEmpty(element.dom);\n    };\n\n    var postProcessHooks = {};\n    var filter = filter$2;\n    var each$c = each$i;\n    var addPostProcessHook = function (name, hook) {\n      var hooks = postProcessHooks[name];\n      if (!hooks) {\n        postProcessHooks[name] = [];\n      }\n      postProcessHooks[name].push(hook);\n    };\n    var postProcess$1 = function (name, editor) {\n      each$c(postProcessHooks[name], function (hook) {\n        hook(editor);\n      });\n    };\n    addPostProcessHook('pre', function (editor) {\n      var rng = editor.selection.getRng();\n      var blocks;\n      var hasPreSibling = function (pre) {\n        return isPre(pre.previousSibling) && indexOf$1(blocks, pre.previousSibling) !== -1;\n      };\n      var joinPre = function (pre1, pre2) {\n        DomQuery(pre2).remove();\n        DomQuery(pre1).append('<br><br>').append(pre2.childNodes);\n      };\n      var isPre = matchNodeNames(['pre']);\n      if (!rng.collapsed) {\n        blocks = editor.selection.getSelectedBlocks();\n        each$c(filter(filter(blocks, isPre), hasPreSibling), function (pre) {\n          joinPre(pre.previousSibling, pre);\n        });\n      }\n    });\n\n    var each$b = Tools.each;\n    var isElementNode$1 = function (node) {\n      return isElement$5(node) && !isBookmarkNode$1(node) && !isCaretNode(node) && !isBogus$2(node);\n    };\n    var findElementSibling = function (node, siblingName) {\n      for (var sibling = node; sibling; sibling = sibling[siblingName]) {\n        if (isText$7(sibling) && isNotEmpty(sibling.data)) {\n          return node;\n        }\n        if (isElement$5(sibling) && !isBookmarkNode$1(sibling)) {\n          return sibling;\n        }\n      }\n      return node;\n    };\n    var mergeSiblingsNodes = function (dom, prev, next) {\n      var elementUtils = ElementUtils(dom);\n      if (prev && next) {\n        prev = findElementSibling(prev, 'previousSibling');\n        next = findElementSibling(next, 'nextSibling');\n        if (elementUtils.compare(prev, next)) {\n          for (var sibling = prev.nextSibling; sibling && sibling !== next;) {\n            var tmpSibling = sibling;\n            sibling = sibling.nextSibling;\n            prev.appendChild(tmpSibling);\n          }\n          dom.remove(next);\n          Tools.each(Tools.grep(next.childNodes), function (node) {\n            prev.appendChild(node);\n          });\n          return prev;\n        }\n      }\n      return next;\n    };\n    var mergeSiblings = function (dom, format, vars, node) {\n      if (node && format.merge_siblings !== false) {\n        var newNode = mergeSiblingsNodes(dom, getNonWhiteSpaceSibling(node), node);\n        mergeSiblingsNodes(dom, newNode, getNonWhiteSpaceSibling(newNode, true));\n      }\n    };\n    var clearChildStyles = function (dom, format, node) {\n      if (format.clear_child_styles) {\n        var selector = format.links ? '*:not(a)' : '*';\n        each$b(dom.select(selector, node), function (node) {\n          if (isElementNode$1(node)) {\n            each$b(format.styles, function (value, name) {\n              dom.setStyle(node, name, '');\n            });\n          }\n        });\n      }\n    };\n    var processChildElements = function (node, filter, process) {\n      each$b(node.childNodes, function (node) {\n        if (isElementNode$1(node)) {\n          if (filter(node)) {\n            process(node);\n          }\n          if (node.hasChildNodes()) {\n            processChildElements(node, filter, process);\n          }\n        }\n      });\n    };\n    var unwrapEmptySpan = function (dom, node) {\n      if (node.nodeName === 'SPAN' && dom.getAttribs(node).length === 0) {\n        dom.remove(node, true);\n      }\n    };\n    var hasStyle = function (dom, name) {\n      return function (node) {\n        return !!(node && getStyle(dom, node, name));\n      };\n    };\n    var applyStyle = function (dom, name, value) {\n      return function (node) {\n        dom.setStyle(node, name, value);\n        if (node.getAttribute('style') === '') {\n          node.removeAttribute('style');\n        }\n        unwrapEmptySpan(dom, node);\n      };\n    };\n\n    var removeResult = Adt.generate([\n      { keep: [] },\n      { rename: ['name'] },\n      { removed: [] }\n    ]);\n    var MCE_ATTR_RE = /^(src|href|style)$/;\n    var each$a = Tools.each;\n    var isEq$2 = isEq$5;\n    var isTableCellOrRow = function (node) {\n      return /^(TR|TH|TD)$/.test(node.nodeName);\n    };\n    var isChildOfInlineParent = function (dom, node, parent) {\n      return dom.isChildOf(node, parent) && node !== parent && !dom.isBlock(parent);\n    };\n    var getContainer = function (ed, rng, start) {\n      var container = rng[start ? 'startContainer' : 'endContainer'];\n      var offset = rng[start ? 'startOffset' : 'endOffset'];\n      if (isElement$5(container)) {\n        var lastIdx = container.childNodes.length - 1;\n        if (!start && offset) {\n          offset--;\n        }\n        container = container.childNodes[offset > lastIdx ? lastIdx : offset];\n      }\n      if (isText$7(container) && start && offset >= container.nodeValue.length) {\n        container = new DomTreeWalker(container, ed.getBody()).next() || container;\n      }\n      if (isText$7(container) && !start && offset === 0) {\n        container = new DomTreeWalker(container, ed.getBody()).prev() || container;\n      }\n      return container;\n    };\n    var normalizeTableSelection = function (node, start) {\n      var prop = start ? 'firstChild' : 'lastChild';\n      if (isTableCellOrRow(node) && node[prop]) {\n        var childNode = node[prop];\n        if (node.nodeName === 'TR') {\n          return childNode[prop] || childNode;\n        } else {\n          return childNode;\n        }\n      }\n      return node;\n    };\n    var wrap$1 = function (dom, node, name, attrs) {\n      var wrapper = dom.create(name, attrs);\n      node.parentNode.insertBefore(wrapper, node);\n      wrapper.appendChild(node);\n      return wrapper;\n    };\n    var wrapWithSiblings = function (dom, node, next, name, attrs) {\n      var start = SugarElement.fromDom(node);\n      var wrapper = SugarElement.fromDom(dom.create(name, attrs));\n      var siblings = next ? nextSiblings(start) : prevSiblings(start);\n      append(wrapper, siblings);\n      if (next) {\n        before$4(start, wrapper);\n        prepend(wrapper, start);\n      } else {\n        after$3(start, wrapper);\n        append$1(wrapper, start);\n      }\n      return wrapper.dom;\n    };\n    var matchName = function (dom, node, format) {\n      if (isInlineFormat(format) && isEq$2(node, format.inline)) {\n        return true;\n      }\n      if (isBlockFormat(format) && isEq$2(node, format.block)) {\n        return true;\n      }\n      if (isSelectorFormat(format)) {\n        return isElement$5(node) && dom.is(node, format.selector);\n      }\n    };\n    var isColorFormatAndAnchor = function (node, format) {\n      return format.links && node.nodeName === 'A';\n    };\n    var find = function (dom, node, next, inc) {\n      var sibling = getNonWhiteSpaceSibling(node, next, inc);\n      return isNullable(sibling) || sibling.nodeName === 'BR' || dom.isBlock(sibling);\n    };\n    var removeNode = function (ed, node, format) {\n      var parentNode = node.parentNode;\n      var rootBlockElm;\n      var dom = ed.dom, forcedRootBlock = getForcedRootBlock(ed);\n      if (isBlockFormat(format)) {\n        if (!forcedRootBlock) {\n          if (dom.isBlock(node) && !dom.isBlock(parentNode)) {\n            if (!find(dom, node, false) && !find(dom, node.firstChild, true, true)) {\n              node.insertBefore(dom.create('br'), node.firstChild);\n            }\n            if (!find(dom, node, true) && !find(dom, node.lastChild, false, true)) {\n              node.appendChild(dom.create('br'));\n            }\n          }\n        } else {\n          if (parentNode === dom.getRoot()) {\n            if (!format.list_block || !isEq$2(node, format.list_block)) {\n              each$k(from(node.childNodes), function (node) {\n                if (isValid(ed, forcedRootBlock, node.nodeName.toLowerCase())) {\n                  if (!rootBlockElm) {\n                    rootBlockElm = wrap$1(dom, node, forcedRootBlock);\n                    dom.setAttribs(rootBlockElm, ed.settings.forced_root_block_attrs);\n                  } else {\n                    rootBlockElm.appendChild(node);\n                  }\n                } else {\n                  rootBlockElm = null;\n                }\n              });\n            }\n          }\n        }\n      }\n      if (isMixedFormat(format) && !isEq$2(format.inline, node)) {\n        return;\n      }\n      dom.remove(node, true);\n    };\n    var removeFormatInternal = function (ed, format, vars, node, compareNode) {\n      var stylesModified;\n      var dom = ed.dom;\n      if (!matchName(dom, node, format) && !isColorFormatAndAnchor(node, format)) {\n        return removeResult.keep();\n      }\n      var elm = node;\n      if (isInlineFormat(format) && format.remove === 'all' && isArray$1(format.preserve_attributes)) {\n        var attrsToPreserve = filter$4(dom.getAttribs(elm), function (attr) {\n          return contains$3(format.preserve_attributes, attr.name.toLowerCase());\n        });\n        dom.removeAllAttribs(elm);\n        each$k(attrsToPreserve, function (attr) {\n          return dom.setAttrib(elm, attr.name, attr.value);\n        });\n        if (attrsToPreserve.length > 0) {\n          return removeResult.rename('span');\n        }\n      }\n      if (format.remove !== 'all') {\n        each$a(format.styles, function (value, name) {\n          value = normalizeStyleValue(dom, replaceVars(value, vars), name + '');\n          if (isNumber(name)) {\n            name = value;\n            compareNode = null;\n          }\n          if (format.remove_similar || (!compareNode || isEq$2(getStyle(dom, compareNode, name), value))) {\n            dom.setStyle(elm, name, '');\n          }\n          stylesModified = true;\n        });\n        if (stylesModified && dom.getAttrib(elm, 'style') === '') {\n          elm.removeAttribute('style');\n          elm.removeAttribute('data-mce-style');\n        }\n        each$a(format.attributes, function (value, name) {\n          var valueOut;\n          value = replaceVars(value, vars);\n          if (isNumber(name)) {\n            name = value;\n            compareNode = null;\n          }\n          if (format.remove_similar || (!compareNode || isEq$2(dom.getAttrib(compareNode, name), value))) {\n            if (name === 'class') {\n              value = dom.getAttrib(elm, name);\n              if (value) {\n                valueOut = '';\n                each$k(value.split(/\\s+/), function (cls) {\n                  if (/mce\\-\\w+/.test(cls)) {\n                    valueOut += (valueOut ? ' ' : '') + cls;\n                  }\n                });\n                if (valueOut) {\n                  dom.setAttrib(elm, name, valueOut);\n                  return;\n                }\n              }\n            }\n            if (MCE_ATTR_RE.test(name)) {\n              elm.removeAttribute('data-mce-' + name);\n            }\n            if (name === 'style' && matchNodeNames(['li'])(elm) && dom.getStyle(elm, 'list-style-type') === 'none') {\n              elm.removeAttribute(name);\n              dom.setStyle(elm, 'list-style-type', 'none');\n              return;\n            }\n            if (name === 'class') {\n              elm.removeAttribute('className');\n            }\n            elm.removeAttribute(name);\n          }\n        });\n        each$a(format.classes, function (value) {\n          value = replaceVars(value, vars);\n          if (!compareNode || dom.hasClass(compareNode, value)) {\n            dom.removeClass(elm, value);\n          }\n        });\n        var attrs = dom.getAttribs(elm);\n        for (var i = 0; i < attrs.length; i++) {\n          var attrName = attrs[i].nodeName;\n          if (attrName.indexOf('_') !== 0 && attrName.indexOf('data-') !== 0) {\n            return removeResult.keep();\n          }\n        }\n      }\n      if (format.remove !== 'none') {\n        removeNode(ed, elm, format);\n        return removeResult.removed();\n      }\n      return removeResult.keep();\n    };\n    var removeFormat$1 = function (ed, format, vars, node, compareNode) {\n      return removeFormatInternal(ed, format, vars, node, compareNode).fold(never, function (newName) {\n        ed.dom.rename(node, newName);\n        return true;\n      }, always);\n    };\n    var findFormatRoot = function (editor, container, name, vars, similar) {\n      var formatRoot;\n      each$k(getParents$2(editor.dom, container.parentNode).reverse(), function (parent) {\n        if (!formatRoot && parent.id !== '_start' && parent.id !== '_end') {\n          var format = matchNode(editor, parent, name, vars, similar);\n          if (format && format.split !== false) {\n            formatRoot = parent;\n          }\n        }\n      });\n      return formatRoot;\n    };\n    var removeFormatFromClone = function (editor, format, vars, clone) {\n      return removeFormatInternal(editor, format, vars, clone, clone).fold(constant(clone), function (newName) {\n        var fragment = editor.dom.createFragment();\n        fragment.appendChild(clone);\n        return editor.dom.rename(clone, newName);\n      }, constant(null));\n    };\n    var wrapAndSplit = function (editor, formatList, formatRoot, container, target, split, format, vars) {\n      var clone, lastClone, firstClone;\n      var dom = editor.dom;\n      if (formatRoot) {\n        var formatRootParent = formatRoot.parentNode;\n        for (var parent_1 = container.parentNode; parent_1 && parent_1 !== formatRootParent; parent_1 = parent_1.parentNode) {\n          clone = dom.clone(parent_1, false);\n          for (var i = 0; i < formatList.length; i++) {\n            clone = removeFormatFromClone(editor, formatList[i], vars, clone);\n            if (clone === null) {\n              break;\n            }\n          }\n          if (clone) {\n            if (lastClone) {\n              clone.appendChild(lastClone);\n            }\n            if (!firstClone) {\n              firstClone = clone;\n            }\n            lastClone = clone;\n          }\n        }\n        if (split && (!format.mixed || !dom.isBlock(formatRoot))) {\n          container = dom.split(formatRoot, container);\n        }\n        if (lastClone) {\n          target.parentNode.insertBefore(lastClone, target);\n          firstClone.appendChild(target);\n          if (isInlineFormat(format)) {\n            mergeSiblings(dom, format, vars, lastClone);\n          }\n        }\n      }\n      return container;\n    };\n    var remove$1 = function (ed, name, vars, node, similar) {\n      var formatList = ed.formatter.get(name);\n      var format = formatList[0];\n      var contentEditable = true;\n      var dom = ed.dom;\n      var selection = ed.selection;\n      var splitToFormatRoot = function (container) {\n        var formatRoot = findFormatRoot(ed, container, name, vars, similar);\n        return wrapAndSplit(ed, formatList, formatRoot, container, container, true, format, vars);\n      };\n      var isRemoveBookmarkNode = function (node) {\n        return isBookmarkNode$1(node) && isElement$5(node) && (node.id === '_start' || node.id === '_end');\n      };\n      var removeNodeFormat = function (node) {\n        return exists(formatList, function (fmt) {\n          return removeFormat$1(ed, fmt, vars, node, node);\n        });\n      };\n      var process = function (node) {\n        var lastContentEditable = true;\n        var hasContentEditableState = false;\n        if (isElement$5(node) && dom.getContentEditable(node)) {\n          lastContentEditable = contentEditable;\n          contentEditable = dom.getContentEditable(node) === 'true';\n          hasContentEditableState = true;\n        }\n        var children = from(node.childNodes);\n        if (contentEditable && !hasContentEditableState) {\n          var removed = removeNodeFormat(node);\n          var parentNode = node.parentNode;\n          if (!removed && isNonNullable(parentNode) && shouldExpandToSelector(format)) {\n            removeNodeFormat(parentNode);\n          }\n        }\n        if (format.deep) {\n          if (children.length) {\n            for (var i = 0; i < children.length; i++) {\n              process(children[i]);\n            }\n            if (hasContentEditableState) {\n              contentEditable = lastContentEditable;\n            }\n          }\n        }\n        var textDecorations = [\n          'underline',\n          'line-through',\n          'overline'\n        ];\n        each$k(textDecorations, function (decoration) {\n          if (isElement$5(node) && ed.dom.getStyle(node, 'text-decoration') === decoration && node.parentNode && getTextDecoration(dom, node.parentNode) === decoration) {\n            removeFormat$1(ed, {\n              deep: false,\n              exact: true,\n              inline: 'span',\n              styles: { textDecoration: decoration }\n            }, null, node);\n          }\n        });\n      };\n      var unwrap = function (start) {\n        var node = dom.get(start ? '_start' : '_end');\n        var out = node[start ? 'firstChild' : 'lastChild'];\n        if (isRemoveBookmarkNode(out)) {\n          out = out[start ? 'firstChild' : 'lastChild'];\n        }\n        if (isText$7(out) && out.data.length === 0) {\n          out = start ? node.previousSibling || node.nextSibling : node.nextSibling || node.previousSibling;\n        }\n        dom.remove(node, true);\n        return out;\n      };\n      var removeRngStyle = function (rng) {\n        var startContainer, endContainer;\n        var expandedRng = expandRng(ed, rng, formatList, rng.collapsed);\n        if (format.split) {\n          expandedRng = split(expandedRng);\n          startContainer = getContainer(ed, expandedRng, true);\n          endContainer = getContainer(ed, expandedRng);\n          if (startContainer !== endContainer) {\n            startContainer = normalizeTableSelection(startContainer, true);\n            endContainer = normalizeTableSelection(endContainer, false);\n            if (isChildOfInlineParent(dom, startContainer, endContainer)) {\n              var marker = Optional.from(startContainer.firstChild).getOr(startContainer);\n              splitToFormatRoot(wrapWithSiblings(dom, marker, true, 'span', {\n                'id': '_start',\n                'data-mce-type': 'bookmark'\n              }));\n              unwrap(true);\n              return;\n            }\n            if (isChildOfInlineParent(dom, endContainer, startContainer)) {\n              var marker = Optional.from(endContainer.lastChild).getOr(endContainer);\n              splitToFormatRoot(wrapWithSiblings(dom, marker, false, 'span', {\n                'id': '_end',\n                'data-mce-type': 'bookmark'\n              }));\n              unwrap(false);\n              return;\n            }\n            startContainer = wrap$1(dom, startContainer, 'span', {\n              'id': '_start',\n              'data-mce-type': 'bookmark'\n            });\n            endContainer = wrap$1(dom, endContainer, 'span', {\n              'id': '_end',\n              'data-mce-type': 'bookmark'\n            });\n            var newRng = dom.createRng();\n            newRng.setStartAfter(startContainer);\n            newRng.setEndBefore(endContainer);\n            walk$2(dom, newRng, function (nodes) {\n              each$k(nodes, function (n) {\n                if (!isBookmarkNode$1(n) && !isBookmarkNode$1(n.parentNode)) {\n                  splitToFormatRoot(n);\n                }\n              });\n            });\n            splitToFormatRoot(startContainer);\n            splitToFormatRoot(endContainer);\n            startContainer = unwrap(true);\n            endContainer = unwrap();\n          } else {\n            startContainer = endContainer = splitToFormatRoot(startContainer);\n          }\n          expandedRng.startContainer = startContainer.parentNode ? startContainer.parentNode : startContainer;\n          expandedRng.startOffset = dom.nodeIndex(startContainer);\n          expandedRng.endContainer = endContainer.parentNode ? endContainer.parentNode : endContainer;\n          expandedRng.endOffset = dom.nodeIndex(endContainer) + 1;\n        }\n        walk$2(dom, expandedRng, function (nodes) {\n          each$k(nodes, process);\n        });\n      };\n      if (node) {\n        if (isNode(node)) {\n          var rng = dom.createRng();\n          rng.setStartBefore(node);\n          rng.setEndAfter(node);\n          removeRngStyle(rng);\n        } else {\n          removeRngStyle(node);\n        }\n        fireFormatRemove(ed, name, node, vars);\n        return;\n      }\n      if (dom.getContentEditable(selection.getNode()) === 'false') {\n        node = selection.getNode();\n        for (var i = 0; i < formatList.length; i++) {\n          if (formatList[i].ceFalseOverride) {\n            if (removeFormat$1(ed, formatList[i], vars, node, node)) {\n              break;\n            }\n          }\n        }\n        fireFormatRemove(ed, name, node, vars);\n        return;\n      }\n      if (!selection.isCollapsed() || !isInlineFormat(format) || getCellsFromEditor(ed).length) {\n        preserve(selection, true, function () {\n          runOnRanges(ed, removeRngStyle);\n        });\n        if (isInlineFormat(format) && match$2(ed, name, vars, selection.getStart())) {\n          moveStart(dom, selection, selection.getRng());\n        }\n        ed.nodeChanged();\n      } else {\n        removeCaretFormat(ed, name, vars, similar);\n      }\n      fireFormatRemove(ed, name, node, vars);\n    };\n\n    var each$9 = Tools.each;\n    var mergeTextDecorationsAndColor = function (dom, format, vars, node) {\n      var processTextDecorationsAndColor = function (n) {\n        if (n.nodeType === 1 && n.parentNode && n.parentNode.nodeType === 1) {\n          var textDecoration = getTextDecoration(dom, n.parentNode);\n          if (dom.getStyle(n, 'color') && textDecoration) {\n            dom.setStyle(n, 'text-decoration', textDecoration);\n          } else if (dom.getStyle(n, 'text-decoration') === textDecoration) {\n            dom.setStyle(n, 'text-decoration', null);\n          }\n        }\n      };\n      if (format.styles && (format.styles.color || format.styles.textDecoration)) {\n        Tools.walk(node, processTextDecorationsAndColor, 'childNodes');\n        processTextDecorationsAndColor(node);\n      }\n    };\n    var mergeBackgroundColorAndFontSize = function (dom, format, vars, node) {\n      if (format.styles && format.styles.backgroundColor) {\n        processChildElements(node, hasStyle(dom, 'fontSize'), applyStyle(dom, 'backgroundColor', replaceVars(format.styles.backgroundColor, vars)));\n      }\n    };\n    var mergeSubSup = function (dom, format, vars, node) {\n      if (isInlineFormat(format) && (format.inline === 'sub' || format.inline === 'sup')) {\n        processChildElements(node, hasStyle(dom, 'fontSize'), applyStyle(dom, 'fontSize', ''));\n        dom.remove(dom.select(format.inline === 'sup' ? 'sub' : 'sup', node), true);\n      }\n    };\n    var mergeWithChildren = function (editor, formatList, vars, node) {\n      each$9(formatList, function (format) {\n        if (isInlineFormat(format)) {\n          each$9(editor.dom.select(format.inline, node), function (child) {\n            if (!isElementNode$1(child)) {\n              return;\n            }\n            removeFormat$1(editor, format, vars, child, format.exact ? child : null);\n          });\n        }\n        clearChildStyles(editor.dom, format, node);\n      });\n    };\n    var mergeWithParents = function (editor, format, name, vars, node) {\n      if (matchNode(editor, node.parentNode, name, vars)) {\n        if (removeFormat$1(editor, format, vars, node)) {\n          return;\n        }\n      }\n      if (format.merge_with_parents) {\n        editor.dom.getParent(node.parentNode, function (parent) {\n          if (matchNode(editor, parent, name, vars)) {\n            removeFormat$1(editor, format, vars, node);\n            return true;\n          }\n        });\n      }\n    };\n\n    var each$8 = Tools.each;\n    var isElementNode = function (node) {\n      return isElement$5(node) && !isBookmarkNode$1(node) && !isCaretNode(node) && !isBogus$2(node);\n    };\n    var canFormatBR = function (editor, format, node, parentName) {\n      if (canFormatEmptyLines(editor) && isInlineFormat(format)) {\n        var validBRParentElements = __assign(__assign({}, editor.schema.getTextBlockElements()), {\n          td: {},\n          th: {},\n          li: {},\n          dt: {},\n          dd: {},\n          figcaption: {},\n          caption: {},\n          details: {},\n          summary: {}\n        });\n        var hasCaretNodeSibling = sibling(SugarElement.fromDom(node), function (sibling) {\n          return isCaretNode(sibling.dom);\n        });\n        return hasNonNullableKey(validBRParentElements, parentName) && isEmpty$2(SugarElement.fromDom(node.parentNode), false) && !hasCaretNodeSibling;\n      } else {\n        return false;\n      }\n    };\n    var applyFormat$1 = function (ed, name, vars, node) {\n      var formatList = ed.formatter.get(name);\n      var format = formatList[0];\n      var isCollapsed = !node && ed.selection.isCollapsed();\n      var dom = ed.dom;\n      var selection = ed.selection;\n      var setElementFormat = function (elm, fmt) {\n        if (fmt === void 0) {\n          fmt = format;\n        }\n        if (isFunction(fmt.onformat)) {\n          fmt.onformat(elm, fmt, vars, node);\n        }\n        each$8(fmt.styles, function (value, name) {\n          dom.setStyle(elm, name, replaceVars(value, vars));\n        });\n        if (fmt.styles) {\n          var styleVal = dom.getAttrib(elm, 'style');\n          if (styleVal) {\n            dom.setAttrib(elm, 'data-mce-style', styleVal);\n          }\n        }\n        each$8(fmt.attributes, function (value, name) {\n          dom.setAttrib(elm, name, replaceVars(value, vars));\n        });\n        each$8(fmt.classes, function (value) {\n          value = replaceVars(value, vars);\n          if (!dom.hasClass(elm, value)) {\n            dom.addClass(elm, value);\n          }\n        });\n      };\n      var applyNodeStyle = function (formatList, node) {\n        var found = false;\n        each$8(formatList, function (format) {\n          if (!isSelectorFormat(format)) {\n            return false;\n          }\n          if (isNonNullable(format.collapsed) && format.collapsed !== isCollapsed) {\n            return;\n          }\n          if (dom.is(node, format.selector) && !isCaretNode(node)) {\n            setElementFormat(node, format);\n            found = true;\n            return false;\n          }\n        });\n        return found;\n      };\n      var createWrapElement = function (wrapName) {\n        if (isString$1(wrapName)) {\n          var wrapElm = dom.create(wrapName);\n          setElementFormat(wrapElm);\n          return wrapElm;\n        } else {\n          return null;\n        }\n      };\n      var applyRngStyle = function (dom, rng, nodeSpecific) {\n        var newWrappers = [];\n        var contentEditable = true;\n        var wrapName = format.inline || format.block;\n        var wrapElm = createWrapElement(wrapName);\n        walk$2(dom, rng, function (nodes) {\n          var currentWrapElm;\n          var process = function (node) {\n            var hasContentEditableState = false;\n            var lastContentEditable = contentEditable;\n            var nodeName = node.nodeName.toLowerCase();\n            var parentNode = node.parentNode;\n            var parentName = parentNode.nodeName.toLowerCase();\n            if (isElement$5(node) && dom.getContentEditable(node)) {\n              lastContentEditable = contentEditable;\n              contentEditable = dom.getContentEditable(node) === 'true';\n              hasContentEditableState = true;\n            }\n            if (isBr$5(node) && !canFormatBR(ed, format, node, parentName)) {\n              currentWrapElm = null;\n              if (isBlockFormat(format)) {\n                dom.remove(node);\n              }\n              return;\n            }\n            if (isBlockFormat(format) && format.wrapper && matchNode(ed, node, name, vars)) {\n              currentWrapElm = null;\n              return;\n            }\n            if (contentEditable && !hasContentEditableState && isBlockFormat(format) && !format.wrapper && isTextBlock$1(ed, nodeName) && isValid(ed, parentName, wrapName)) {\n              var elm = dom.rename(node, wrapName);\n              setElementFormat(elm);\n              newWrappers.push(elm);\n              currentWrapElm = null;\n              return;\n            }\n            if (isSelectorFormat(format)) {\n              var found = applyNodeStyle(formatList, node);\n              if (!found && isNonNullable(parentNode) && shouldExpandToSelector(format)) {\n                found = applyNodeStyle(formatList, parentNode);\n              }\n              if (!isInlineFormat(format) || found) {\n                currentWrapElm = null;\n                return;\n              }\n            }\n            if (contentEditable && !hasContentEditableState && isValid(ed, wrapName, nodeName) && isValid(ed, parentName, wrapName) && !(!nodeSpecific && isText$7(node) && isZwsp(node.data)) && !isCaretNode(node) && (!isInlineFormat(format) || !dom.isBlock(node))) {\n              if (!currentWrapElm) {\n                currentWrapElm = dom.clone(wrapElm, false);\n                node.parentNode.insertBefore(currentWrapElm, node);\n                newWrappers.push(currentWrapElm);\n              }\n              currentWrapElm.appendChild(node);\n            } else {\n              currentWrapElm = null;\n              each$k(from(node.childNodes), process);\n              if (hasContentEditableState) {\n                contentEditable = lastContentEditable;\n              }\n              currentWrapElm = null;\n            }\n          };\n          each$k(nodes, process);\n        });\n        if (format.links === true) {\n          each$k(newWrappers, function (node) {\n            var process = function (node) {\n              if (node.nodeName === 'A') {\n                setElementFormat(node, format);\n              }\n              each$k(from(node.childNodes), process);\n            };\n            process(node);\n          });\n        }\n        each$k(newWrappers, function (node) {\n          var getChildCount = function (node) {\n            var count = 0;\n            each$k(node.childNodes, function (node) {\n              if (!isEmptyTextNode$1(node) && !isBookmarkNode$1(node)) {\n                count++;\n              }\n            });\n            return count;\n          };\n          var mergeStyles = function (node) {\n            var childElement = find$3(node.childNodes, isElementNode).filter(function (child) {\n              return matchName$1(dom, child, format);\n            });\n            return childElement.map(function (child) {\n              var clone = dom.clone(child, false);\n              setElementFormat(clone);\n              dom.replace(clone, node, true);\n              dom.remove(child, true);\n              return clone;\n            }).getOr(node);\n          };\n          var childCount = getChildCount(node);\n          if ((newWrappers.length > 1 || !dom.isBlock(node)) && childCount === 0) {\n            dom.remove(node, true);\n            return;\n          }\n          if (isInlineFormat(format) || isBlockFormat(format) && format.wrapper) {\n            if (!format.exact && childCount === 1) {\n              node = mergeStyles(node);\n            }\n            mergeWithChildren(ed, formatList, vars, node);\n            mergeWithParents(ed, format, name, vars, node);\n            mergeBackgroundColorAndFontSize(dom, format, vars, node);\n            mergeTextDecorationsAndColor(dom, format, vars, node);\n            mergeSubSup(dom, format, vars, node);\n            mergeSiblings(dom, format, vars, node);\n          }\n        });\n      };\n      if (dom.getContentEditable(selection.getNode()) === 'false') {\n        node = selection.getNode();\n        for (var i = 0, l = formatList.length; i < l; i++) {\n          var formatItem = formatList[i];\n          if (formatItem.ceFalseOverride && isSelectorFormat(formatItem) && dom.is(node, formatItem.selector)) {\n            setElementFormat(node, formatItem);\n            break;\n          }\n        }\n        fireFormatApply(ed, name, node, vars);\n        return;\n      }\n      if (format) {\n        if (node) {\n          if (isNode(node)) {\n            if (!applyNodeStyle(formatList, node)) {\n              var rng = dom.createRng();\n              rng.setStartBefore(node);\n              rng.setEndAfter(node);\n              applyRngStyle(dom, expandRng(ed, rng, formatList), true);\n            }\n          } else {\n            applyRngStyle(dom, node, true);\n          }\n        } else {\n          if (!isCollapsed || !isInlineFormat(format) || getCellsFromEditor(ed).length) {\n            var curSelNode = selection.getNode();\n            var firstFormat = formatList[0];\n            if (!ed.settings.forced_root_block && firstFormat.defaultBlock && !dom.getParent(curSelNode, dom.isBlock)) {\n              applyFormat$1(ed, firstFormat.defaultBlock);\n            }\n            selection.setRng(normalize(selection.getRng()));\n            preserve(selection, true, function () {\n              runOnRanges(ed, function (selectionRng, fake) {\n                var expandedRng = fake ? selectionRng : expandRng(ed, selectionRng, formatList);\n                applyRngStyle(dom, expandedRng, false);\n              });\n            });\n            moveStart(dom, selection, selection.getRng());\n            ed.nodeChanged();\n          } else {\n            applyCaretFormat(ed, name, vars);\n          }\n        }\n        postProcess$1(name, ed);\n      }\n      fireFormatApply(ed, name, node, vars);\n    };\n\n    var hasVars = function (value) {\n      return has$2(value, 'vars');\n    };\n    var setup$j = function (registeredFormatListeners, editor) {\n      registeredFormatListeners.set({});\n      editor.on('NodeChange', function (e) {\n        updateAndFireChangeCallbacks(editor, e.element, registeredFormatListeners.get());\n      });\n      editor.on('FormatApply FormatRemove', function (e) {\n        var element = Optional.from(e.node).map(function (nodeOrRange) {\n          return isNode(nodeOrRange) ? nodeOrRange : nodeOrRange.startContainer;\n        }).bind(function (node) {\n          return isElement$5(node) ? Optional.some(node) : Optional.from(node.parentElement);\n        }).getOrThunk(function () {\n          return fallbackElement(editor);\n        });\n        updateAndFireChangeCallbacks(editor, element, registeredFormatListeners.get());\n      });\n    };\n    var fallbackElement = function (editor) {\n      return editor.selection.getStart();\n    };\n    var matchingNode = function (editor, parents, format, similar, vars) {\n      var isMatchingNode = function (node) {\n        var matchingFormat = editor.formatter.matchNode(node, format, vars !== null && vars !== void 0 ? vars : {}, similar);\n        return !isUndefined(matchingFormat);\n      };\n      var isUnableToMatch = function (node) {\n        if (matchesUnInheritedFormatSelector(editor, node, format)) {\n          return true;\n        } else {\n          if (!similar) {\n            return isNonNullable(editor.formatter.matchNode(node, format, vars, true));\n          } else {\n            return false;\n          }\n        }\n      };\n      return findUntil$1(parents, isMatchingNode, isUnableToMatch);\n    };\n    var getParents = function (editor, elm) {\n      var element = elm !== null && elm !== void 0 ? elm : fallbackElement(editor);\n      return filter$4(getParents$2(editor.dom, element), function (node) {\n        return isElement$5(node) && !isBogus$2(node);\n      });\n    };\n    var updateAndFireChangeCallbacks = function (editor, elm, registeredCallbacks) {\n      var parents = getParents(editor, elm);\n      each$j(registeredCallbacks, function (data, format) {\n        var runIfChanged = function (spec) {\n          var match = matchingNode(editor, parents, format, spec.similar, hasVars(spec) ? spec.vars : undefined);\n          var isSet = match.isSome();\n          if (spec.state.get() !== isSet) {\n            spec.state.set(isSet);\n            var node_1 = match.getOr(elm);\n            if (hasVars(spec)) {\n              spec.callback(isSet, {\n                node: node_1,\n                format: format,\n                parents: parents\n              });\n            } else {\n              each$k(spec.callbacks, function (callback) {\n                return callback(isSet, {\n                  node: node_1,\n                  format: format,\n                  parents: parents\n                });\n              });\n            }\n          }\n        };\n        each$k([\n          data.withSimilar,\n          data.withoutSimilar\n        ], runIfChanged);\n        each$k(data.withVars, runIfChanged);\n      });\n    };\n    var addListeners = function (editor, registeredFormatListeners, formats, callback, similar, vars) {\n      var formatChangeItems = registeredFormatListeners.get();\n      each$k(formats.split(','), function (format) {\n        var group = get$9(formatChangeItems, format).getOrThunk(function () {\n          var base = {\n            withSimilar: {\n              state: Cell(false),\n              similar: true,\n              callbacks: []\n            },\n            withoutSimilar: {\n              state: Cell(false),\n              similar: false,\n              callbacks: []\n            },\n            withVars: []\n          };\n          formatChangeItems[format] = base;\n          return base;\n        });\n        var getCurrent = function () {\n          var parents = getParents(editor);\n          return matchingNode(editor, parents, format, similar, vars).isSome();\n        };\n        if (isUndefined(vars)) {\n          var toAppendTo = similar ? group.withSimilar : group.withoutSimilar;\n          toAppendTo.callbacks.push(callback);\n          if (toAppendTo.callbacks.length === 1) {\n            toAppendTo.state.set(getCurrent());\n          }\n        } else {\n          group.withVars.push({\n            state: Cell(getCurrent()),\n            similar: similar,\n            vars: vars,\n            callback: callback\n          });\n        }\n      });\n      registeredFormatListeners.set(formatChangeItems);\n    };\n    var removeListeners = function (registeredFormatListeners, formats, callback) {\n      var formatChangeItems = registeredFormatListeners.get();\n      each$k(formats.split(','), function (format) {\n        return get$9(formatChangeItems, format).each(function (group) {\n          formatChangeItems[format] = {\n            withSimilar: __assign(__assign({}, group.withSimilar), {\n              callbacks: filter$4(group.withSimilar.callbacks, function (cb) {\n                return cb !== callback;\n              })\n            }),\n            withoutSimilar: __assign(__assign({}, group.withoutSimilar), {\n              callbacks: filter$4(group.withoutSimilar.callbacks, function (cb) {\n                return cb !== callback;\n              })\n            }),\n            withVars: filter$4(group.withVars, function (item) {\n              return item.callback !== callback;\n            })\n          };\n        });\n      });\n      registeredFormatListeners.set(formatChangeItems);\n    };\n    var formatChangedInternal = function (editor, registeredFormatListeners, formats, callback, similar, vars) {\n      if (registeredFormatListeners.get() === null) {\n        setup$j(registeredFormatListeners, editor);\n      }\n      addListeners(editor, registeredFormatListeners, formats, callback, similar, vars);\n      return {\n        unbind: function () {\n          return removeListeners(registeredFormatListeners, formats, callback);\n        }\n      };\n    };\n\n    var toggle = function (editor, name, vars, node) {\n      var fmt = editor.formatter.get(name);\n      if (match$2(editor, name, vars, node) && (!('toggle' in fmt[0]) || fmt[0].toggle)) {\n        remove$1(editor, name, vars, node);\n      } else {\n        applyFormat$1(editor, name, vars, node);\n      }\n    };\n\n    var fromElements = function (elements, scope) {\n      var doc = scope || document;\n      var fragment = doc.createDocumentFragment();\n      each$k(elements, function (element) {\n        fragment.appendChild(element.dom);\n      });\n      return SugarElement.fromDom(fragment);\n    };\n\n    var tableModel = function (element, width, rows) {\n      return {\n        element: element,\n        width: width,\n        rows: rows\n      };\n    };\n    var tableRow = function (element, cells) {\n      return {\n        element: element,\n        cells: cells\n      };\n    };\n    var cellPosition = function (x, y) {\n      return {\n        x: x,\n        y: y\n      };\n    };\n    var getSpan = function (td, key) {\n      var value = parseInt(get$6(td, key), 10);\n      return isNaN(value) ? 1 : value;\n    };\n    var fillout = function (table, x, y, tr, td) {\n      var rowspan = getSpan(td, 'rowspan');\n      var colspan = getSpan(td, 'colspan');\n      var rows = table.rows;\n      for (var y2 = y; y2 < y + rowspan; y2++) {\n        if (!rows[y2]) {\n          rows[y2] = tableRow(deep$1(tr), []);\n        }\n        for (var x2 = x; x2 < x + colspan; x2++) {\n          var cells = rows[y2].cells;\n          cells[x2] = y2 === y && x2 === x ? td : shallow(td);\n        }\n      }\n    };\n    var cellExists = function (table, x, y) {\n      var rows = table.rows;\n      var cells = rows[y] ? rows[y].cells : [];\n      return !!cells[x];\n    };\n    var skipCellsX = function (table, x, y) {\n      while (cellExists(table, x, y)) {\n        x++;\n      }\n      return x;\n    };\n    var getWidth = function (rows) {\n      return foldl(rows, function (acc, row) {\n        return row.cells.length > acc ? row.cells.length : acc;\n      }, 0);\n    };\n    var findElementPos = function (table, element) {\n      var rows = table.rows;\n      for (var y = 0; y < rows.length; y++) {\n        var cells = rows[y].cells;\n        for (var x = 0; x < cells.length; x++) {\n          if (eq(cells[x], element)) {\n            return Optional.some(cellPosition(x, y));\n          }\n        }\n      }\n      return Optional.none();\n    };\n    var extractRows = function (table, sx, sy, ex, ey) {\n      var newRows = [];\n      var rows = table.rows;\n      for (var y = sy; y <= ey; y++) {\n        var cells = rows[y].cells;\n        var slice = sx < ex ? cells.slice(sx, ex + 1) : cells.slice(ex, sx + 1);\n        newRows.push(tableRow(rows[y].element, slice));\n      }\n      return newRows;\n    };\n    var subTable = function (table, startPos, endPos) {\n      var sx = startPos.x, sy = startPos.y;\n      var ex = endPos.x, ey = endPos.y;\n      var newRows = sy < ey ? extractRows(table, sx, sy, ex, ey) : extractRows(table, sx, ey, ex, sy);\n      return tableModel(table.element, getWidth(newRows), newRows);\n    };\n    var createDomTable = function (table, rows) {\n      var tableElement = shallow(table.element);\n      var tableBody = SugarElement.fromTag('tbody');\n      append(tableBody, rows);\n      append$1(tableElement, tableBody);\n      return tableElement;\n    };\n    var modelRowsToDomRows = function (table) {\n      return map$3(table.rows, function (row) {\n        var cells = map$3(row.cells, function (cell) {\n          var td = deep$1(cell);\n          remove$6(td, 'colspan');\n          remove$6(td, 'rowspan');\n          return td;\n        });\n        var tr = shallow(row.element);\n        append(tr, cells);\n        return tr;\n      });\n    };\n    var fromDom = function (tableElm) {\n      var table = tableModel(shallow(tableElm), 0, []);\n      each$k(descendants(tableElm, 'tr'), function (tr, y) {\n        each$k(descendants(tr, 'td,th'), function (td, x) {\n          fillout(table, skipCellsX(table, x, y), y, tr, td);\n        });\n      });\n      return tableModel(table.element, getWidth(table.rows), table.rows);\n    };\n    var toDom = function (table) {\n      return createDomTable(table, modelRowsToDomRows(table));\n    };\n    var subsection = function (table, startElement, endElement) {\n      return findElementPos(table, startElement).bind(function (startPos) {\n        return findElementPos(table, endElement).map(function (endPos) {\n          return subTable(table, startPos, endPos);\n        });\n      });\n    };\n\n    var findParentListContainer = function (parents) {\n      return find$3(parents, function (elm) {\n        return name(elm) === 'ul' || name(elm) === 'ol';\n      });\n    };\n    var getFullySelectedListWrappers = function (parents, rng) {\n      return find$3(parents, function (elm) {\n        return name(elm) === 'li' && hasAllContentsSelected(elm, rng);\n      }).fold(constant([]), function (_li) {\n        return findParentListContainer(parents).map(function (listCont) {\n          var listElm = SugarElement.fromTag(name(listCont));\n          var listStyles = filter$3(getAllRaw(listCont), function (_style, name) {\n            return startsWith(name, 'list-style');\n          });\n          setAll(listElm, listStyles);\n          return [\n            SugarElement.fromTag('li'),\n            listElm\n          ];\n        }).getOr([]);\n      });\n    };\n    var wrap = function (innerElm, elms) {\n      var wrapped = foldl(elms, function (acc, elm) {\n        append$1(elm, acc);\n        return elm;\n      }, innerElm);\n      return elms.length > 0 ? fromElements([wrapped]) : wrapped;\n    };\n    var directListWrappers = function (commonAnchorContainer) {\n      if (isListItem(commonAnchorContainer)) {\n        return parent(commonAnchorContainer).filter(isList).fold(constant([]), function (listElm) {\n          return [\n            commonAnchorContainer,\n            listElm\n          ];\n        });\n      } else {\n        return isList(commonAnchorContainer) ? [commonAnchorContainer] : [];\n      }\n    };\n    var getWrapElements = function (rootNode, rng) {\n      var commonAnchorContainer = SugarElement.fromDom(rng.commonAncestorContainer);\n      var parents = parentsAndSelf(commonAnchorContainer, rootNode);\n      var wrapElements = filter$4(parents, function (elm) {\n        return isInline$1(elm) || isHeading(elm);\n      });\n      var listWrappers = getFullySelectedListWrappers(parents, rng);\n      var allWrappers = wrapElements.concat(listWrappers.length ? listWrappers : directListWrappers(commonAnchorContainer));\n      return map$3(allWrappers, shallow);\n    };\n    var emptyFragment = function () {\n      return fromElements([]);\n    };\n    var getFragmentFromRange = function (rootNode, rng) {\n      return wrap(SugarElement.fromDom(rng.cloneContents()), getWrapElements(rootNode, rng));\n    };\n    var getParentTable = function (rootElm, cell) {\n      return ancestor$2(cell, 'table', curry(eq, rootElm));\n    };\n    var getTableFragment = function (rootNode, selectedTableCells) {\n      return getParentTable(rootNode, selectedTableCells[0]).bind(function (tableElm) {\n        var firstCell = selectedTableCells[0];\n        var lastCell = selectedTableCells[selectedTableCells.length - 1];\n        var fullTableModel = fromDom(tableElm);\n        return subsection(fullTableModel, firstCell, lastCell).map(function (sectionedTableModel) {\n          return fromElements([toDom(sectionedTableModel)]);\n        });\n      }).getOrThunk(emptyFragment);\n    };\n    var getSelectionFragment = function (rootNode, ranges) {\n      return ranges.length > 0 && ranges[0].collapsed ? emptyFragment() : getFragmentFromRange(rootNode, ranges[0]);\n    };\n    var read$3 = function (rootNode, ranges) {\n      var selectedCells = getCellsFromElementOrRanges(ranges, rootNode);\n      return selectedCells.length > 0 ? getTableFragment(rootNode, selectedCells) : getSelectionFragment(rootNode, ranges);\n    };\n\n    var trimLeadingCollapsibleText = function (text) {\n      return text.replace(/^[ \\f\\n\\r\\t\\v]+/, '');\n    };\n    var isCollapsibleWhitespace = function (text, index) {\n      return index >= 0 && index < text.length && isWhiteSpace(text.charAt(index));\n    };\n    var getInnerText = function (bin, shouldTrim) {\n      var text = trim$2(bin.innerText);\n      return shouldTrim ? trimLeadingCollapsibleText(text) : text;\n    };\n    var getContextNodeName = function (parentBlockOpt) {\n      return parentBlockOpt.map(function (block) {\n        return block.nodeName;\n      }).getOr('div').toLowerCase();\n    };\n    var getTextContent = function (editor) {\n      return Optional.from(editor.selection.getRng()).map(function (rng) {\n        var parentBlockOpt = Optional.from(editor.dom.getParent(rng.commonAncestorContainer, editor.dom.isBlock));\n        var body = editor.getBody();\n        var contextNodeName = getContextNodeName(parentBlockOpt);\n        var shouldTrimSpaces = Env.browser.isIE() && contextNodeName !== 'pre';\n        var bin = editor.dom.add(body, contextNodeName, {\n          'data-mce-bogus': 'all',\n          'style': 'overflow: hidden; opacity: 0;'\n        }, rng.cloneContents());\n        var text = getInnerText(bin, shouldTrimSpaces);\n        var nonRenderedText = trim$2(bin.textContent);\n        editor.dom.remove(bin);\n        if (isCollapsibleWhitespace(nonRenderedText, 0) || isCollapsibleWhitespace(nonRenderedText, nonRenderedText.length - 1)) {\n          var parentBlock = parentBlockOpt.getOr(body);\n          var parentBlockText = getInnerText(parentBlock, shouldTrimSpaces);\n          var textIndex = parentBlockText.indexOf(text);\n          if (textIndex === -1) {\n            return text;\n          } else {\n            var hasProceedingSpace = isCollapsibleWhitespace(parentBlockText, textIndex - 1);\n            var hasTrailingSpace = isCollapsibleWhitespace(parentBlockText, textIndex + text.length);\n            return (hasProceedingSpace ? ' ' : '') + text + (hasTrailingSpace ? ' ' : '');\n          }\n        } else {\n          return text;\n        }\n      }).getOr('');\n    };\n    var getSerializedContent = function (editor, args) {\n      var rng = editor.selection.getRng(), tmpElm = editor.dom.create('body');\n      var sel = editor.selection.getSel();\n      var ranges = processRanges(editor, getRanges(sel));\n      var fragment = args.contextual ? read$3(SugarElement.fromDom(editor.getBody()), ranges).dom : rng.cloneContents();\n      if (fragment) {\n        tmpElm.appendChild(fragment);\n      }\n      return editor.selection.serializer.serialize(tmpElm, args);\n    };\n    var setupArgs$1 = function (args, format) {\n      return __assign(__assign({}, args), {\n        format: format,\n        get: true,\n        selection: true\n      });\n    };\n    var getSelectedContentInternal = function (editor, format, args) {\n      if (args === void 0) {\n        args = {};\n      }\n      var defaultedArgs = setupArgs$1(args, format);\n      var updatedArgs = editor.fire('BeforeGetContent', defaultedArgs);\n      if (updatedArgs.isDefaultPrevented()) {\n        editor.fire('GetContent', updatedArgs);\n        return updatedArgs.content;\n      }\n      if (updatedArgs.format === 'text') {\n        return getTextContent(editor);\n      } else {\n        updatedArgs.getInner = true;\n        var content = getSerializedContent(editor, updatedArgs);\n        if (updatedArgs.format === 'tree') {\n          return content;\n        } else {\n          updatedArgs.content = editor.selection.isCollapsed() ? '' : content;\n          editor.fire('GetContent', updatedArgs);\n          return updatedArgs.content;\n        }\n      }\n    };\n\n    var KEEP = 0, INSERT = 1, DELETE = 2;\n    var diff = function (left, right) {\n      var size = left.length + right.length + 2;\n      var vDown = new Array(size);\n      var vUp = new Array(size);\n      var snake = function (start, end, diag) {\n        return {\n          start: start,\n          end: end,\n          diag: diag\n        };\n      };\n      var buildScript = function (start1, end1, start2, end2, script) {\n        var middle = getMiddleSnake(start1, end1, start2, end2);\n        if (middle === null || middle.start === end1 && middle.diag === end1 - end2 || middle.end === start1 && middle.diag === start1 - start2) {\n          var i = start1;\n          var j = start2;\n          while (i < end1 || j < end2) {\n            if (i < end1 && j < end2 && left[i] === right[j]) {\n              script.push([\n                KEEP,\n                left[i]\n              ]);\n              ++i;\n              ++j;\n            } else {\n              if (end1 - start1 > end2 - start2) {\n                script.push([\n                  DELETE,\n                  left[i]\n                ]);\n                ++i;\n              } else {\n                script.push([\n                  INSERT,\n                  right[j]\n                ]);\n                ++j;\n              }\n            }\n          }\n        } else {\n          buildScript(start1, middle.start, start2, middle.start - middle.diag, script);\n          for (var i2 = middle.start; i2 < middle.end; ++i2) {\n            script.push([\n              KEEP,\n              left[i2]\n            ]);\n          }\n          buildScript(middle.end, end1, middle.end - middle.diag, end2, script);\n        }\n      };\n      var buildSnake = function (start, diag, end1, end2) {\n        var end = start;\n        while (end - diag < end2 && end < end1 && left[end] === right[end - diag]) {\n          ++end;\n        }\n        return snake(start, end, diag);\n      };\n      var getMiddleSnake = function (start1, end1, start2, end2) {\n        var m = end1 - start1;\n        var n = end2 - start2;\n        if (m === 0 || n === 0) {\n          return null;\n        }\n        var delta = m - n;\n        var sum = n + m;\n        var offset = (sum % 2 === 0 ? sum : sum + 1) / 2;\n        vDown[1 + offset] = start1;\n        vUp[1 + offset] = end1 + 1;\n        var d, k, i, x, y;\n        for (d = 0; d <= offset; ++d) {\n          for (k = -d; k <= d; k += 2) {\n            i = k + offset;\n            if (k === -d || k !== d && vDown[i - 1] < vDown[i + 1]) {\n              vDown[i] = vDown[i + 1];\n            } else {\n              vDown[i] = vDown[i - 1] + 1;\n            }\n            x = vDown[i];\n            y = x - start1 + start2 - k;\n            while (x < end1 && y < end2 && left[x] === right[y]) {\n              vDown[i] = ++x;\n              ++y;\n            }\n            if (delta % 2 !== 0 && delta - d <= k && k <= delta + d) {\n              if (vUp[i - delta] <= vDown[i]) {\n                return buildSnake(vUp[i - delta], k + start1 - start2, end1, end2);\n              }\n            }\n          }\n          for (k = delta - d; k <= delta + d; k += 2) {\n            i = k + offset - delta;\n            if (k === delta - d || k !== delta + d && vUp[i + 1] <= vUp[i - 1]) {\n              vUp[i] = vUp[i + 1] - 1;\n            } else {\n              vUp[i] = vUp[i - 1];\n            }\n            x = vUp[i] - 1;\n            y = x - start1 + start2 - k;\n            while (x >= start1 && y >= start2 && left[x] === right[y]) {\n              vUp[i] = x--;\n              y--;\n            }\n            if (delta % 2 === 0 && -d <= k && k <= d) {\n              if (vUp[i] <= vDown[i + delta]) {\n                return buildSnake(vUp[i], k + start1 - start2, end1, end2);\n              }\n            }\n          }\n        }\n      };\n      var script = [];\n      buildScript(0, left.length, 0, right.length, script);\n      return script;\n    };\n\n    var getOuterHtml = function (elm) {\n      if (isElement$5(elm)) {\n        return elm.outerHTML;\n      } else if (isText$7(elm)) {\n        return Entities.encodeRaw(elm.data, false);\n      } else if (isComment(elm)) {\n        return '<!--' + elm.data + '-->';\n      }\n      return '';\n    };\n    var createFragment = function (html) {\n      var node;\n      var container = document.createElement('div');\n      var frag = document.createDocumentFragment();\n      if (html) {\n        container.innerHTML = html;\n      }\n      while (node = container.firstChild) {\n        frag.appendChild(node);\n      }\n      return frag;\n    };\n    var insertAt = function (elm, html, index) {\n      var fragment = createFragment(html);\n      if (elm.hasChildNodes() && index < elm.childNodes.length) {\n        var target = elm.childNodes[index];\n        target.parentNode.insertBefore(fragment, target);\n      } else {\n        elm.appendChild(fragment);\n      }\n    };\n    var removeAt = function (elm, index) {\n      if (elm.hasChildNodes() && index < elm.childNodes.length) {\n        var target = elm.childNodes[index];\n        target.parentNode.removeChild(target);\n      }\n    };\n    var applyDiff = function (diff, elm) {\n      var index = 0;\n      each$k(diff, function (action) {\n        if (action[0] === KEEP) {\n          index++;\n        } else if (action[0] === INSERT) {\n          insertAt(elm, action[1], index);\n          index++;\n        } else if (action[0] === DELETE) {\n          removeAt(elm, index);\n        }\n      });\n    };\n    var read$2 = function (elm) {\n      return filter$4(map$3(from(elm.childNodes), getOuterHtml), function (item) {\n        return item.length > 0;\n      });\n    };\n    var write = function (fragments, elm) {\n      var currentFragments = map$3(from(elm.childNodes), getOuterHtml);\n      applyDiff(diff(currentFragments, fragments), elm);\n      return elm;\n    };\n\n    var lazyTempDocument = cached(function () {\n      return document.implementation.createHTMLDocument('undo');\n    });\n    var hasIframes = function (html) {\n      return html.indexOf('</iframe>') !== -1;\n    };\n    var createFragmentedLevel = function (fragments) {\n      return {\n        type: 'fragmented',\n        fragments: fragments,\n        content: '',\n        bookmark: null,\n        beforeBookmark: null\n      };\n    };\n    var createCompleteLevel = function (content) {\n      return {\n        type: 'complete',\n        fragments: null,\n        content: content,\n        bookmark: null,\n        beforeBookmark: null\n      };\n    };\n    var createFromEditor = function (editor) {\n      var fragments = read$2(editor.getBody());\n      var trimmedFragments = bind(fragments, function (html) {\n        var trimmed = trimInternal(editor.serializer, html);\n        return trimmed.length > 0 ? [trimmed] : [];\n      });\n      var content = trimmedFragments.join('');\n      return hasIframes(content) ? createFragmentedLevel(trimmedFragments) : createCompleteLevel(content);\n    };\n    var applyToEditor = function (editor, level, before) {\n      var bookmark = before ? level.beforeBookmark : level.bookmark;\n      if (level.type === 'fragmented') {\n        write(level.fragments, editor.getBody());\n      } else {\n        editor.setContent(level.content, {\n          format: 'raw',\n          no_selection: isNonNullable(bookmark) && isPathBookmark(bookmark) ? !bookmark.isFakeCaret : true\n        });\n      }\n      editor.selection.moveToBookmark(bookmark);\n    };\n    var getLevelContent = function (level) {\n      return level.type === 'fragmented' ? level.fragments.join('') : level.content;\n    };\n    var getCleanLevelContent = function (level) {\n      var elm = SugarElement.fromTag('body', lazyTempDocument());\n      set(elm, getLevelContent(level));\n      each$k(descendants(elm, '*[data-mce-bogus]'), unwrap);\n      return get$3(elm);\n    };\n    var hasEqualContent = function (level1, level2) {\n      return getLevelContent(level1) === getLevelContent(level2);\n    };\n    var hasEqualCleanedContent = function (level1, level2) {\n      return getCleanLevelContent(level1) === getCleanLevelContent(level2);\n    };\n    var isEq$1 = function (level1, level2) {\n      if (!level1 || !level2) {\n        return false;\n      } else if (hasEqualContent(level1, level2)) {\n        return true;\n      } else {\n        return hasEqualCleanedContent(level1, level2);\n      }\n    };\n\n    var isUnlocked = function (locks) {\n      return locks.get() === 0;\n    };\n\n    var setTyping = function (undoManager, typing, locks) {\n      if (isUnlocked(locks)) {\n        undoManager.typing = typing;\n      }\n    };\n    var endTyping = function (undoManager, locks) {\n      if (undoManager.typing) {\n        setTyping(undoManager, false, locks);\n        undoManager.add();\n      }\n    };\n    var endTypingLevelIgnoreLocks = function (undoManager) {\n      if (undoManager.typing) {\n        undoManager.typing = false;\n        undoManager.add();\n      }\n    };\n\n    var beforeChange$1 = function (editor, locks, beforeBookmark) {\n      if (isUnlocked(locks)) {\n        beforeBookmark.set(getUndoBookmark(editor.selection));\n      }\n    };\n    var addUndoLevel$1 = function (editor, undoManager, index, locks, beforeBookmark, level, event) {\n      var currentLevel = createFromEditor(editor);\n      level = level || {};\n      level = Tools.extend(level, currentLevel);\n      if (isUnlocked(locks) === false || editor.removed) {\n        return null;\n      }\n      var lastLevel = undoManager.data[index.get()];\n      if (editor.fire('BeforeAddUndo', {\n          level: level,\n          lastLevel: lastLevel,\n          originalEvent: event\n        }).isDefaultPrevented()) {\n        return null;\n      }\n      if (lastLevel && isEq$1(lastLevel, level)) {\n        return null;\n      }\n      if (undoManager.data[index.get()]) {\n        beforeBookmark.get().each(function (bm) {\n          undoManager.data[index.get()].beforeBookmark = bm;\n        });\n      }\n      var customUndoRedoLevels = getCustomUndoRedoLevels(editor);\n      if (customUndoRedoLevels) {\n        if (undoManager.data.length > customUndoRedoLevels) {\n          for (var i = 0; i < undoManager.data.length - 1; i++) {\n            undoManager.data[i] = undoManager.data[i + 1];\n          }\n          undoManager.data.length--;\n          index.set(undoManager.data.length);\n        }\n      }\n      level.bookmark = getUndoBookmark(editor.selection);\n      if (index.get() < undoManager.data.length - 1) {\n        undoManager.data.length = index.get() + 1;\n      }\n      undoManager.data.push(level);\n      index.set(undoManager.data.length - 1);\n      var args = {\n        level: level,\n        lastLevel: lastLevel,\n        originalEvent: event\n      };\n      if (index.get() > 0) {\n        editor.setDirty(true);\n        editor.fire('AddUndo', args);\n        editor.fire('change', args);\n      } else {\n        editor.fire('AddUndo', args);\n      }\n      return level;\n    };\n    var clear$1 = function (editor, undoManager, index) {\n      undoManager.data = [];\n      index.set(0);\n      undoManager.typing = false;\n      editor.fire('ClearUndos');\n    };\n    var extra$1 = function (editor, undoManager, index, callback1, callback2) {\n      if (undoManager.transact(callback1)) {\n        var bookmark = undoManager.data[index.get()].bookmark;\n        var lastLevel = undoManager.data[index.get() - 1];\n        applyToEditor(editor, lastLevel, true);\n        if (undoManager.transact(callback2)) {\n          undoManager.data[index.get() - 1].beforeBookmark = bookmark;\n        }\n      }\n    };\n    var redo$1 = function (editor, index, data) {\n      var level;\n      if (index.get() < data.length - 1) {\n        index.set(index.get() + 1);\n        level = data[index.get()];\n        applyToEditor(editor, level, false);\n        editor.setDirty(true);\n        editor.fire('Redo', { level: level });\n      }\n      return level;\n    };\n    var undo$1 = function (editor, undoManager, locks, index) {\n      var level;\n      if (undoManager.typing) {\n        undoManager.add();\n        undoManager.typing = false;\n        setTyping(undoManager, false, locks);\n      }\n      if (index.get() > 0) {\n        index.set(index.get() - 1);\n        level = undoManager.data[index.get()];\n        applyToEditor(editor, level, true);\n        editor.setDirty(true);\n        editor.fire('Undo', { level: level });\n      }\n      return level;\n    };\n    var reset$1 = function (undoManager) {\n      undoManager.clear();\n      undoManager.add();\n    };\n    var hasUndo$1 = function (editor, undoManager, index) {\n      return index.get() > 0 || undoManager.typing && undoManager.data[0] && !isEq$1(createFromEditor(editor), undoManager.data[0]);\n    };\n    var hasRedo$1 = function (undoManager, index) {\n      return index.get() < undoManager.data.length - 1 && !undoManager.typing;\n    };\n    var transact$1 = function (undoManager, locks, callback) {\n      endTyping(undoManager, locks);\n      undoManager.beforeChange();\n      undoManager.ignore(callback);\n      return undoManager.add();\n    };\n    var ignore$1 = function (locks, callback) {\n      try {\n        locks.set(locks.get() + 1);\n        callback();\n      } finally {\n        locks.set(locks.get() - 1);\n      }\n    };\n\n    var addVisualInternal = function (editor, elm) {\n      var dom = editor.dom;\n      var scope = isNonNullable(elm) ? elm : editor.getBody();\n      if (isUndefined(editor.hasVisual)) {\n        editor.hasVisual = isVisualAidsEnabled(editor);\n      }\n      each$k(dom.select('table,a', scope), function (matchedElm) {\n        switch (matchedElm.nodeName) {\n        case 'TABLE':\n          var cls = getVisualAidsTableClass(editor);\n          var value = dom.getAttrib(matchedElm, 'border');\n          if ((!value || value === '0') && editor.hasVisual) {\n            dom.addClass(matchedElm, cls);\n          } else {\n            dom.removeClass(matchedElm, cls);\n          }\n          break;\n        case 'A':\n          if (!dom.getAttrib(matchedElm, 'href')) {\n            var value_1 = dom.getAttrib(matchedElm, 'name') || matchedElm.id;\n            var cls_1 = getVisualAidsAnchorClass(editor);\n            if (value_1 && editor.hasVisual) {\n              dom.addClass(matchedElm, cls_1);\n            } else {\n              dom.removeClass(matchedElm, cls_1);\n            }\n          }\n          break;\n        }\n      });\n      editor.fire('VisualAid', {\n        element: elm,\n        hasVisual: editor.hasVisual\n      });\n    };\n\n    var makePlainAdaptor = function (editor) {\n      return {\n        undoManager: {\n          beforeChange: function (locks, beforeBookmark) {\n            return beforeChange$1(editor, locks, beforeBookmark);\n          },\n          add: function (undoManager, index, locks, beforeBookmark, level, event) {\n            return addUndoLevel$1(editor, undoManager, index, locks, beforeBookmark, level, event);\n          },\n          undo: function (undoManager, locks, index) {\n            return undo$1(editor, undoManager, locks, index);\n          },\n          redo: function (index, data) {\n            return redo$1(editor, index, data);\n          },\n          clear: function (undoManager, index) {\n            return clear$1(editor, undoManager, index);\n          },\n          reset: function (undoManager) {\n            return reset$1(undoManager);\n          },\n          hasUndo: function (undoManager, index) {\n            return hasUndo$1(editor, undoManager, index);\n          },\n          hasRedo: function (undoManager, index) {\n            return hasRedo$1(undoManager, index);\n          },\n          transact: function (undoManager, locks, callback) {\n            return transact$1(undoManager, locks, callback);\n          },\n          ignore: function (locks, callback) {\n            return ignore$1(locks, callback);\n          },\n          extra: function (undoManager, index, callback1, callback2) {\n            return extra$1(editor, undoManager, index, callback1, callback2);\n          }\n        },\n        formatter: {\n          match: function (name, vars, node, similar) {\n            return match$2(editor, name, vars, node, similar);\n          },\n          matchAll: function (names, vars) {\n            return matchAll(editor, names, vars);\n          },\n          matchNode: function (node, name, vars, similar) {\n            return matchNode(editor, node, name, vars, similar);\n          },\n          canApply: function (name) {\n            return canApply(editor, name);\n          },\n          closest: function (names) {\n            return closest(editor, names);\n          },\n          apply: function (name, vars, node) {\n            return applyFormat$1(editor, name, vars, node);\n          },\n          remove: function (name, vars, node, similar) {\n            return remove$1(editor, name, vars, node, similar);\n          },\n          toggle: function (name, vars, node) {\n            return toggle(editor, name, vars, node);\n          },\n          formatChanged: function (registeredFormatListeners, formats, callback, similar, vars) {\n            return formatChangedInternal(editor, registeredFormatListeners, formats, callback, similar, vars);\n          }\n        },\n        editor: {\n          getContent: function (args, format) {\n            return getContentInternal(editor, args, format);\n          },\n          setContent: function (content, args) {\n            return setContentInternal(editor, content, args);\n          },\n          insertContent: function (value, details) {\n            return insertHtmlAtCaret(editor, value, details);\n          },\n          addVisual: function (elm) {\n            return addVisualInternal(editor, elm);\n          }\n        },\n        selection: {\n          getContent: function (format, args) {\n            return getSelectedContentInternal(editor, format, args);\n          }\n        },\n        raw: {\n          getModel: function () {\n            return Optional.none();\n          }\n        }\n      };\n    };\n    var makeRtcAdaptor = function (rtcEditor) {\n      var defaultVars = function (vars) {\n        return isObject(vars) ? vars : {};\n      };\n      var undoManager = rtcEditor.undoManager, formatter = rtcEditor.formatter, editor = rtcEditor.editor, selection = rtcEditor.selection, raw = rtcEditor.raw;\n      return {\n        undoManager: {\n          beforeChange: undoManager.beforeChange,\n          add: undoManager.add,\n          undo: undoManager.undo,\n          redo: undoManager.redo,\n          clear: undoManager.clear,\n          reset: undoManager.reset,\n          hasUndo: undoManager.hasUndo,\n          hasRedo: undoManager.hasRedo,\n          transact: function (_undoManager, _locks, fn) {\n            return undoManager.transact(fn);\n          },\n          ignore: function (_locks, callback) {\n            return undoManager.ignore(callback);\n          },\n          extra: function (_undoManager, _index, callback1, callback2) {\n            return undoManager.extra(callback1, callback2);\n          }\n        },\n        formatter: {\n          match: function (name, vars, _node, similar) {\n            return formatter.match(name, defaultVars(vars), similar);\n          },\n          matchAll: formatter.matchAll,\n          matchNode: formatter.matchNode,\n          canApply: function (name) {\n            return formatter.canApply(name);\n          },\n          closest: function (names) {\n            return formatter.closest(names);\n          },\n          apply: function (name, vars, _node) {\n            return formatter.apply(name, defaultVars(vars));\n          },\n          remove: function (name, vars, _node, _similar) {\n            return formatter.remove(name, defaultVars(vars));\n          },\n          toggle: function (name, vars, _node) {\n            return formatter.toggle(name, defaultVars(vars));\n          },\n          formatChanged: function (_rfl, formats, callback, similar, vars) {\n            return formatter.formatChanged(formats, callback, similar, vars);\n          }\n        },\n        editor: {\n          getContent: function (args, _format) {\n            return editor.getContent(args);\n          },\n          setContent: function (content, args) {\n            return editor.setContent(content, args);\n          },\n          insertContent: function (content, _details) {\n            return editor.insertContent(content);\n          },\n          addVisual: editor.addVisual\n        },\n        selection: {\n          getContent: function (_format, args) {\n            return selection.getContent(args);\n          }\n        },\n        raw: {\n          getModel: function () {\n            return Optional.some(raw.getRawModel());\n          }\n        }\n      };\n    };\n    var makeNoopAdaptor = function () {\n      var nul = constant(null);\n      var empty = constant('');\n      return {\n        undoManager: {\n          beforeChange: noop,\n          add: nul,\n          undo: nul,\n          redo: nul,\n          clear: noop,\n          reset: noop,\n          hasUndo: never,\n          hasRedo: never,\n          transact: nul,\n          ignore: noop,\n          extra: noop\n        },\n        formatter: {\n          match: never,\n          matchAll: constant([]),\n          matchNode: constant(undefined),\n          canApply: never,\n          closest: empty,\n          apply: noop,\n          remove: noop,\n          toggle: noop,\n          formatChanged: constant({ unbind: noop })\n        },\n        editor: {\n          getContent: empty,\n          setContent: empty,\n          insertContent: noop,\n          addVisual: noop\n        },\n        selection: { getContent: empty },\n        raw: { getModel: constant(Optional.none()) }\n      };\n    };\n    var isRtc = function (editor) {\n      return has$2(editor.plugins, 'rtc');\n    };\n    var getRtcSetup = function (editor) {\n      return get$9(editor.plugins, 'rtc').bind(function (rtcPlugin) {\n        return Optional.from(rtcPlugin.setup);\n      });\n    };\n    var setup$i = function (editor) {\n      var editorCast = editor;\n      return getRtcSetup(editor).fold(function () {\n        editorCast.rtcInstance = makePlainAdaptor(editor);\n        return Optional.none();\n      }, function (setup) {\n        editorCast.rtcInstance = makeNoopAdaptor();\n        return Optional.some(function () {\n          return setup().then(function (rtcEditor) {\n            editorCast.rtcInstance = makeRtcAdaptor(rtcEditor);\n            return rtcEditor.rtc.isRemote;\n          });\n        });\n      });\n    };\n    var getRtcInstanceWithFallback = function (editor) {\n      return editor.rtcInstance ? editor.rtcInstance : makePlainAdaptor(editor);\n    };\n    var getRtcInstanceWithError = function (editor) {\n      var rtcInstance = editor.rtcInstance;\n      if (!rtcInstance) {\n        throw new Error('Failed to get RTC instance not yet initialized.');\n      } else {\n        return rtcInstance;\n      }\n    };\n    var beforeChange = function (editor, locks, beforeBookmark) {\n      getRtcInstanceWithError(editor).undoManager.beforeChange(locks, beforeBookmark);\n    };\n    var addUndoLevel = function (editor, undoManager, index, locks, beforeBookmark, level, event) {\n      return getRtcInstanceWithError(editor).undoManager.add(undoManager, index, locks, beforeBookmark, level, event);\n    };\n    var undo = function (editor, undoManager, locks, index) {\n      return getRtcInstanceWithError(editor).undoManager.undo(undoManager, locks, index);\n    };\n    var redo = function (editor, index, data) {\n      return getRtcInstanceWithError(editor).undoManager.redo(index, data);\n    };\n    var clear = function (editor, undoManager, index) {\n      getRtcInstanceWithError(editor).undoManager.clear(undoManager, index);\n    };\n    var reset = function (editor, undoManager) {\n      getRtcInstanceWithError(editor).undoManager.reset(undoManager);\n    };\n    var hasUndo = function (editor, undoManager, index) {\n      return getRtcInstanceWithError(editor).undoManager.hasUndo(undoManager, index);\n    };\n    var hasRedo = function (editor, undoManager, index) {\n      return getRtcInstanceWithError(editor).undoManager.hasRedo(undoManager, index);\n    };\n    var transact = function (editor, undoManager, locks, callback) {\n      return getRtcInstanceWithError(editor).undoManager.transact(undoManager, locks, callback);\n    };\n    var ignore = function (editor, locks, callback) {\n      getRtcInstanceWithError(editor).undoManager.ignore(locks, callback);\n    };\n    var extra = function (editor, undoManager, index, callback1, callback2) {\n      getRtcInstanceWithError(editor).undoManager.extra(undoManager, index, callback1, callback2);\n    };\n    var matchFormat = function (editor, name, vars, node, similar) {\n      return getRtcInstanceWithError(editor).formatter.match(name, vars, node, similar);\n    };\n    var matchAllFormats = function (editor, names, vars) {\n      return getRtcInstanceWithError(editor).formatter.matchAll(names, vars);\n    };\n    var matchNodeFormat = function (editor, node, name, vars, similar) {\n      return getRtcInstanceWithError(editor).formatter.matchNode(node, name, vars, similar);\n    };\n    var canApplyFormat = function (editor, name) {\n      return getRtcInstanceWithError(editor).formatter.canApply(name);\n    };\n    var closestFormat = function (editor, names) {\n      return getRtcInstanceWithError(editor).formatter.closest(names);\n    };\n    var applyFormat = function (editor, name, vars, node) {\n      getRtcInstanceWithError(editor).formatter.apply(name, vars, node);\n    };\n    var removeFormat = function (editor, name, vars, node, similar) {\n      getRtcInstanceWithError(editor).formatter.remove(name, vars, node, similar);\n    };\n    var toggleFormat = function (editor, name, vars, node) {\n      getRtcInstanceWithError(editor).formatter.toggle(name, vars, node);\n    };\n    var formatChanged = function (editor, registeredFormatListeners, formats, callback, similar, vars) {\n      return getRtcInstanceWithError(editor).formatter.formatChanged(registeredFormatListeners, formats, callback, similar, vars);\n    };\n    var getContent$2 = function (editor, args, format) {\n      return getRtcInstanceWithFallback(editor).editor.getContent(args, format);\n    };\n    var setContent$2 = function (editor, content, args) {\n      return getRtcInstanceWithFallback(editor).editor.setContent(content, args);\n    };\n    var insertContent = function (editor, value, details) {\n      return getRtcInstanceWithFallback(editor).editor.insertContent(value, details);\n    };\n    var getSelectedContent = function (editor, format, args) {\n      return getRtcInstanceWithError(editor).selection.getContent(format, args);\n    };\n    var addVisual$1 = function (editor, elm) {\n      return getRtcInstanceWithError(editor).editor.addVisual(elm);\n    };\n\n    var getContent$1 = function (editor, args) {\n      if (args === void 0) {\n        args = {};\n      }\n      var format = args.format ? args.format : 'html';\n      return getSelectedContent(editor, format, args);\n    };\n\n    var removeEmpty = function (text) {\n      if (text.dom.length === 0) {\n        remove$7(text);\n        return Optional.none();\n      } else {\n        return Optional.some(text);\n      }\n    };\n    var walkPastBookmark = function (node, start) {\n      return node.filter(function (elm) {\n        return BookmarkManager.isBookmarkNode(elm.dom);\n      }).bind(start ? nextSibling : prevSibling);\n    };\n    var merge = function (outer, inner, rng, start) {\n      var outerElm = outer.dom;\n      var innerElm = inner.dom;\n      var oldLength = start ? outerElm.length : innerElm.length;\n      if (start) {\n        mergeTextNodes(outerElm, innerElm, false, !start);\n        rng.setStart(innerElm, oldLength);\n      } else {\n        mergeTextNodes(innerElm, outerElm, false, !start);\n        rng.setEnd(innerElm, oldLength);\n      }\n    };\n    var normalizeTextIfRequired = function (inner, start) {\n      parent(inner).each(function (root) {\n        var text = inner.dom;\n        if (start && needsToBeNbspLeft(root, CaretPosition(text, 0))) {\n          normalizeWhitespaceAfter(text, 0);\n        } else if (!start && needsToBeNbspRight(root, CaretPosition(text, text.length))) {\n          normalizeWhitespaceBefore(text, text.length);\n        }\n      });\n    };\n    var mergeAndNormalizeText = function (outerNode, innerNode, rng, start) {\n      outerNode.bind(function (outer) {\n        var normalizer = start ? normalizeWhitespaceBefore : normalizeWhitespaceAfter;\n        normalizer(outer.dom, start ? outer.dom.length : 0);\n        return innerNode.filter(isText$8).map(function (inner) {\n          return merge(outer, inner, rng, start);\n        });\n      }).orThunk(function () {\n        var innerTextNode = walkPastBookmark(innerNode, start).or(innerNode).filter(isText$8);\n        return innerTextNode.map(function (inner) {\n          return normalizeTextIfRequired(inner, start);\n        });\n      });\n    };\n    var rngSetContent = function (rng, fragment) {\n      var firstChild = Optional.from(fragment.firstChild).map(SugarElement.fromDom);\n      var lastChild = Optional.from(fragment.lastChild).map(SugarElement.fromDom);\n      rng.deleteContents();\n      rng.insertNode(fragment);\n      var prevText = firstChild.bind(prevSibling).filter(isText$8).bind(removeEmpty);\n      var nextText = lastChild.bind(nextSibling).filter(isText$8).bind(removeEmpty);\n      mergeAndNormalizeText(prevText, firstChild, rng, true);\n      mergeAndNormalizeText(nextText, lastChild, rng, false);\n      rng.collapse(false);\n    };\n    var setupArgs = function (args, content) {\n      return __assign(__assign({ format: 'html' }, args), {\n        set: true,\n        selection: true,\n        content: content\n      });\n    };\n    var cleanContent = function (editor, args) {\n      if (args.format !== 'raw') {\n        var rng = editor.selection.getRng();\n        var contextBlock = editor.dom.getParent(rng.commonAncestorContainer, editor.dom.isBlock);\n        var contextArgs = contextBlock ? { context: contextBlock.nodeName.toLowerCase() } : {};\n        var node = editor.parser.parse(args.content, __assign(__assign({\n          isRootContent: true,\n          forced_root_block: false\n        }, contextArgs), args));\n        return HtmlSerializer({ validate: editor.validate }, editor.schema).serialize(node);\n      } else {\n        return args.content;\n      }\n    };\n    var setContent$1 = function (editor, content, args) {\n      if (args === void 0) {\n        args = {};\n      }\n      var defaultedArgs = setupArgs(args, content);\n      var updatedArgs = defaultedArgs;\n      if (!defaultedArgs.no_events) {\n        var eventArgs = editor.fire('BeforeSetContent', defaultedArgs);\n        if (eventArgs.isDefaultPrevented()) {\n          editor.fire('SetContent', eventArgs);\n          return;\n        } else {\n          updatedArgs = eventArgs;\n        }\n      }\n      updatedArgs.content = cleanContent(editor, updatedArgs);\n      var rng = editor.selection.getRng();\n      rngSetContent(rng, rng.createContextualFragment(updatedArgs.content));\n      editor.selection.setRng(rng);\n      scrollRangeIntoView(editor, rng);\n      if (!updatedArgs.no_events) {\n        editor.fire('SetContent', updatedArgs);\n      }\n    };\n\n    var deleteFromCallbackMap = function (callbackMap, selector, callback) {\n      if (callbackMap && has$2(callbackMap, selector)) {\n        var newCallbacks = filter$4(callbackMap[selector], function (cb) {\n          return cb !== callback;\n        });\n        if (newCallbacks.length === 0) {\n          delete callbackMap[selector];\n        } else {\n          callbackMap[selector] = newCallbacks;\n        }\n      }\n    };\n    function SelectorChanged (dom, editor) {\n      var selectorChangedData;\n      var currentSelectors;\n      return {\n        selectorChangedWithUnbind: function (selector, callback) {\n          if (!selectorChangedData) {\n            selectorChangedData = {};\n            currentSelectors = {};\n            editor.on('NodeChange', function (e) {\n              var node = e.element, parents = dom.getParents(node, null, dom.getRoot()), matchedSelectors = {};\n              Tools.each(selectorChangedData, function (callbacks, selector) {\n                Tools.each(parents, function (node) {\n                  if (dom.is(node, selector)) {\n                    if (!currentSelectors[selector]) {\n                      Tools.each(callbacks, function (callback) {\n                        callback(true, {\n                          node: node,\n                          selector: selector,\n                          parents: parents\n                        });\n                      });\n                      currentSelectors[selector] = callbacks;\n                    }\n                    matchedSelectors[selector] = callbacks;\n                    return false;\n                  }\n                });\n              });\n              Tools.each(currentSelectors, function (callbacks, selector) {\n                if (!matchedSelectors[selector]) {\n                  delete currentSelectors[selector];\n                  Tools.each(callbacks, function (callback) {\n                    callback(false, {\n                      node: node,\n                      selector: selector,\n                      parents: parents\n                    });\n                  });\n                }\n              });\n            });\n          }\n          if (!selectorChangedData[selector]) {\n            selectorChangedData[selector] = [];\n          }\n          selectorChangedData[selector].push(callback);\n          return {\n            unbind: function () {\n              deleteFromCallbackMap(selectorChangedData, selector, callback);\n              deleteFromCallbackMap(currentSelectors, selector, callback);\n            }\n          };\n        }\n      };\n    }\n\n    var isNativeIeSelection = function (rng) {\n      return !!rng.select;\n    };\n    var isAttachedToDom = function (node) {\n      return !!(node && node.ownerDocument) && contains$1(SugarElement.fromDom(node.ownerDocument), SugarElement.fromDom(node));\n    };\n    var isValidRange = function (rng) {\n      if (!rng) {\n        return false;\n      } else if (isNativeIeSelection(rng)) {\n        return true;\n      } else {\n        return isAttachedToDom(rng.startContainer) && isAttachedToDom(rng.endContainer);\n      }\n    };\n    var EditorSelection = function (dom, win, serializer, editor) {\n      var selectedRange;\n      var explicitRange;\n      var selectorChangedWithUnbind = SelectorChanged(dom, editor).selectorChangedWithUnbind;\n      var setCursorLocation = function (node, offset) {\n        var rng = dom.createRng();\n        if (isNonNullable(node) && isNonNullable(offset)) {\n          rng.setStart(node, offset);\n          rng.setEnd(node, offset);\n          setRng(rng);\n          collapse(false);\n        } else {\n          moveEndPoint(dom, rng, editor.getBody(), true);\n          setRng(rng);\n        }\n      };\n      var getContent = function (args) {\n        return getContent$1(editor, args);\n      };\n      var setContent = function (content, args) {\n        return setContent$1(editor, content, args);\n      };\n      var getStart$1 = function (real) {\n        return getStart(editor.getBody(), getRng$1(), real);\n      };\n      var getEnd$1 = function (real) {\n        return getEnd(editor.getBody(), getRng$1(), real);\n      };\n      var getBookmark = function (type, normalized) {\n        return bookmarkManager.getBookmark(type, normalized);\n      };\n      var moveToBookmark = function (bookmark) {\n        return bookmarkManager.moveToBookmark(bookmark);\n      };\n      var select$1 = function (node, content) {\n        select(dom, node, content).each(setRng);\n        return node;\n      };\n      var isCollapsed = function () {\n        var rng = getRng$1(), sel = getSel();\n        if (!rng || rng.item) {\n          return false;\n        }\n        if (rng.compareEndPoints) {\n          return rng.compareEndPoints('StartToEnd', rng) === 0;\n        }\n        return !sel || rng.collapsed;\n      };\n      var collapse = function (toStart) {\n        var rng = getRng$1();\n        rng.collapse(!!toStart);\n        setRng(rng);\n      };\n      var getSel = function () {\n        return win.getSelection ? win.getSelection() : win.document.selection;\n      };\n      var getRng$1 = function () {\n        var selection, rng, elm;\n        var tryCompareBoundaryPoints = function (how, sourceRange, destinationRange) {\n          try {\n            return sourceRange.compareBoundaryPoints(how, destinationRange);\n          } catch (ex) {\n            return -1;\n          }\n        };\n        var doc = win.document;\n        if (editor.bookmark !== undefined && hasFocus(editor) === false) {\n          var bookmark = getRng(editor);\n          if (bookmark.isSome()) {\n            return bookmark.map(function (r) {\n              return processRanges(editor, [r])[0];\n            }).getOr(doc.createRange());\n          }\n        }\n        try {\n          if ((selection = getSel()) && !isRestrictedNode(selection.anchorNode)) {\n            if (selection.rangeCount > 0) {\n              rng = selection.getRangeAt(0);\n            } else {\n              rng = selection.createRange ? selection.createRange() : doc.createRange();\n            }\n            rng = processRanges(editor, [rng])[0];\n          }\n        } catch (ex) {\n        }\n        if (!rng) {\n          rng = doc.createRange ? doc.createRange() : doc.body.createTextRange();\n        }\n        if (rng.setStart && rng.startContainer.nodeType === 9 && rng.collapsed) {\n          elm = dom.getRoot();\n          rng.setStart(elm, 0);\n          rng.setEnd(elm, 0);\n        }\n        if (selectedRange && explicitRange) {\n          if (tryCompareBoundaryPoints(rng.START_TO_START, rng, selectedRange) === 0 && tryCompareBoundaryPoints(rng.END_TO_END, rng, selectedRange) === 0) {\n            rng = explicitRange;\n          } else {\n            selectedRange = null;\n            explicitRange = null;\n          }\n        }\n        return rng;\n      };\n      var setRng = function (rng, forward) {\n        var node;\n        if (!isValidRange(rng)) {\n          return;\n        }\n        var ieRange = isNativeIeSelection(rng) ? rng : null;\n        if (ieRange) {\n          explicitRange = null;\n          try {\n            ieRange.select();\n          } catch (ex) {\n          }\n          return;\n        }\n        var sel = getSel();\n        var evt = editor.fire('SetSelectionRange', {\n          range: rng,\n          forward: forward\n        });\n        rng = evt.range;\n        if (sel) {\n          explicitRange = rng;\n          try {\n            sel.removeAllRanges();\n            sel.addRange(rng);\n          } catch (ex) {\n          }\n          if (forward === false && sel.extend) {\n            sel.collapse(rng.endContainer, rng.endOffset);\n            sel.extend(rng.startContainer, rng.startOffset);\n          }\n          selectedRange = sel.rangeCount > 0 ? sel.getRangeAt(0) : null;\n        }\n        if (!rng.collapsed && rng.startContainer === rng.endContainer && sel.setBaseAndExtent && !Env.ie) {\n          if (rng.endOffset - rng.startOffset < 2) {\n            if (rng.startContainer.hasChildNodes()) {\n              node = rng.startContainer.childNodes[rng.startOffset];\n              if (node && node.tagName === 'IMG') {\n                sel.setBaseAndExtent(rng.startContainer, rng.startOffset, rng.endContainer, rng.endOffset);\n                if (sel.anchorNode !== rng.startContainer || sel.focusNode !== rng.endContainer) {\n                  sel.setBaseAndExtent(node, 0, node, 1);\n                }\n              }\n            }\n          }\n        }\n        editor.fire('AfterSetSelectionRange', {\n          range: rng,\n          forward: forward\n        });\n      };\n      var setNode = function (elm) {\n        setContent(dom.getOuterHTML(elm));\n        return elm;\n      };\n      var getNode$1 = function () {\n        return getNode(editor.getBody(), getRng$1());\n      };\n      var getSelectedBlocks$1 = function (startElm, endElm) {\n        return getSelectedBlocks(dom, getRng$1(), startElm, endElm);\n      };\n      var isForward = function () {\n        var sel = getSel();\n        var anchorNode = sel === null || sel === void 0 ? void 0 : sel.anchorNode;\n        var focusNode = sel === null || sel === void 0 ? void 0 : sel.focusNode;\n        if (!sel || !anchorNode || !focusNode || isRestrictedNode(anchorNode) || isRestrictedNode(focusNode)) {\n          return true;\n        }\n        var anchorRange = dom.createRng();\n        anchorRange.setStart(anchorNode, sel.anchorOffset);\n        anchorRange.collapse(true);\n        var focusRange = dom.createRng();\n        focusRange.setStart(focusNode, sel.focusOffset);\n        focusRange.collapse(true);\n        return anchorRange.compareBoundaryPoints(anchorRange.START_TO_START, focusRange) <= 0;\n      };\n      var normalize = function () {\n        var rng = getRng$1();\n        var sel = getSel();\n        if (!hasMultipleRanges(sel) && hasAnyRanges(editor)) {\n          var normRng = normalize$2(dom, rng);\n          normRng.each(function (normRng) {\n            setRng(normRng, isForward());\n          });\n          return normRng.getOr(rng);\n        }\n        return rng;\n      };\n      var selectorChanged = function (selector, callback) {\n        selectorChangedWithUnbind(selector, callback);\n        return exports;\n      };\n      var getScrollContainer = function () {\n        var scrollContainer;\n        var node = dom.getRoot();\n        while (node && node.nodeName !== 'BODY') {\n          if (node.scrollHeight > node.clientHeight) {\n            scrollContainer = node;\n            break;\n          }\n          node = node.parentNode;\n        }\n        return scrollContainer;\n      };\n      var scrollIntoView = function (elm, alignToTop) {\n        return scrollElementIntoView(editor, elm, alignToTop);\n      };\n      var placeCaretAt = function (clientX, clientY) {\n        return setRng(fromPoint(clientX, clientY, editor.getDoc()));\n      };\n      var getBoundingClientRect = function () {\n        var rng = getRng$1();\n        return rng.collapsed ? CaretPosition.fromRangeStart(rng).getClientRects()[0] : rng.getBoundingClientRect();\n      };\n      var destroy = function () {\n        win = selectedRange = explicitRange = null;\n        controlSelection.destroy();\n      };\n      var exports = {\n        bookmarkManager: null,\n        controlSelection: null,\n        dom: dom,\n        win: win,\n        serializer: serializer,\n        editor: editor,\n        collapse: collapse,\n        setCursorLocation: setCursorLocation,\n        getContent: getContent,\n        setContent: setContent,\n        getBookmark: getBookmark,\n        moveToBookmark: moveToBookmark,\n        select: select$1,\n        isCollapsed: isCollapsed,\n        isForward: isForward,\n        setNode: setNode,\n        getNode: getNode$1,\n        getSel: getSel,\n        setRng: setRng,\n        getRng: getRng$1,\n        getStart: getStart$1,\n        getEnd: getEnd$1,\n        getSelectedBlocks: getSelectedBlocks$1,\n        normalize: normalize,\n        selectorChanged: selectorChanged,\n        selectorChangedWithUnbind: selectorChangedWithUnbind,\n        getScrollContainer: getScrollContainer,\n        scrollIntoView: scrollIntoView,\n        placeCaretAt: placeCaretAt,\n        getBoundingClientRect: getBoundingClientRect,\n        destroy: destroy\n      };\n      var bookmarkManager = BookmarkManager(exports);\n      var controlSelection = ControlSelection(exports, editor);\n      exports.bookmarkManager = bookmarkManager;\n      exports.controlSelection = controlSelection;\n      return exports;\n    };\n\n    var removeAttrs = function (node, names) {\n      each$k(names, function (name) {\n        node.attr(name, null);\n      });\n    };\n    var addFontToSpansFilter = function (domParser, styles, fontSizes) {\n      domParser.addNodeFilter('font', function (nodes) {\n        each$k(nodes, function (node) {\n          var props = styles.parse(node.attr('style'));\n          var color = node.attr('color');\n          var face = node.attr('face');\n          var size = node.attr('size');\n          if (color) {\n            props.color = color;\n          }\n          if (face) {\n            props['font-family'] = face;\n          }\n          if (size) {\n            props['font-size'] = fontSizes[parseInt(node.attr('size'), 10) - 1];\n          }\n          node.name = 'span';\n          node.attr('style', styles.serialize(props));\n          removeAttrs(node, [\n            'color',\n            'face',\n            'size'\n          ]);\n        });\n      });\n    };\n    var addStrikeToSpanFilter = function (domParser, styles) {\n      domParser.addNodeFilter('strike', function (nodes) {\n        each$k(nodes, function (node) {\n          var props = styles.parse(node.attr('style'));\n          props['text-decoration'] = 'line-through';\n          node.name = 'span';\n          node.attr('style', styles.serialize(props));\n        });\n      });\n    };\n    var addFilters = function (domParser, settings) {\n      var styles = Styles();\n      if (settings.convert_fonts_to_spans) {\n        addFontToSpansFilter(domParser, styles, Tools.explode(settings.font_size_legacy_values));\n      }\n      addStrikeToSpanFilter(domParser, styles);\n    };\n    var register$2 = function (domParser, settings) {\n      if (settings.inline_styles) {\n        addFilters(domParser, settings);\n      }\n    };\n\n    var blobUriToBlob = function (url) {\n      return new promiseObj(function (resolve, reject) {\n        var rejectWithError = function () {\n          reject('Cannot convert ' + url + ' to Blob. Resource might not exist or is inaccessible.');\n        };\n        try {\n          var xhr_1 = new XMLHttpRequest();\n          xhr_1.open('GET', url, true);\n          xhr_1.responseType = 'blob';\n          xhr_1.onload = function () {\n            if (xhr_1.status === 200) {\n              resolve(xhr_1.response);\n            } else {\n              rejectWithError();\n            }\n          };\n          xhr_1.onerror = rejectWithError;\n          xhr_1.send();\n        } catch (ex) {\n          rejectWithError();\n        }\n      });\n    };\n    var parseDataUri = function (uri) {\n      var type;\n      var uriParts = decodeURIComponent(uri).split(',');\n      var matches = /data:([^;]+)/.exec(uriParts[0]);\n      if (matches) {\n        type = matches[1];\n      }\n      return {\n        type: type,\n        data: uriParts[1]\n      };\n    };\n    var buildBlob = function (type, data) {\n      var str;\n      try {\n        str = atob(data);\n      } catch (e) {\n        return Optional.none();\n      }\n      var arr = new Uint8Array(str.length);\n      for (var i = 0; i < arr.length; i++) {\n        arr[i] = str.charCodeAt(i);\n      }\n      return Optional.some(new Blob([arr], { type: type }));\n    };\n    var dataUriToBlob = function (uri) {\n      return new promiseObj(function (resolve) {\n        var _a = parseDataUri(uri), type = _a.type, data = _a.data;\n        buildBlob(type, data).fold(function () {\n          return resolve(new Blob([]));\n        }, resolve);\n      });\n    };\n    var uriToBlob = function (url) {\n      if (url.indexOf('blob:') === 0) {\n        return blobUriToBlob(url);\n      }\n      if (url.indexOf('data:') === 0) {\n        return dataUriToBlob(url);\n      }\n      return null;\n    };\n    var blobToDataUri = function (blob) {\n      return new promiseObj(function (resolve) {\n        var reader = new FileReader();\n        reader.onloadend = function () {\n          resolve(reader.result);\n        };\n        reader.readAsDataURL(blob);\n      });\n    };\n\n    var count$1 = 0;\n    var uniqueId = function (prefix) {\n      return (prefix || 'blobid') + count$1++;\n    };\n    var imageToBlobInfo = function (blobCache, img, resolve, reject) {\n      var base64, blobInfo;\n      if (img.src.indexOf('blob:') === 0) {\n        blobInfo = blobCache.getByUri(img.src);\n        if (blobInfo) {\n          resolve({\n            image: img,\n            blobInfo: blobInfo\n          });\n        } else {\n          uriToBlob(img.src).then(function (blob) {\n            blobToDataUri(blob).then(function (dataUri) {\n              base64 = parseDataUri(dataUri).data;\n              blobInfo = blobCache.create(uniqueId(), blob, base64);\n              blobCache.add(blobInfo);\n              resolve({\n                image: img,\n                blobInfo: blobInfo\n              });\n            });\n          }, function (err) {\n            reject(err);\n          });\n        }\n        return;\n      }\n      var _a = parseDataUri(img.src), data = _a.data, type = _a.type;\n      base64 = data;\n      blobInfo = blobCache.getByData(base64, type);\n      if (blobInfo) {\n        resolve({\n          image: img,\n          blobInfo: blobInfo\n        });\n      } else {\n        uriToBlob(img.src).then(function (blob) {\n          blobInfo = blobCache.create(uniqueId(), blob, base64);\n          blobCache.add(blobInfo);\n          resolve({\n            image: img,\n            blobInfo: blobInfo\n          });\n        }, function (err) {\n          reject(err);\n        });\n      }\n    };\n    var getAllImages = function (elm) {\n      return elm ? from(elm.getElementsByTagName('img')) : [];\n    };\n    var ImageScanner = function (uploadStatus, blobCache) {\n      var cachedPromises = {};\n      var findAll = function (elm, predicate) {\n        if (!predicate) {\n          predicate = always;\n        }\n        var images = filter$4(getAllImages(elm), function (img) {\n          var src = img.src;\n          if (!Env.fileApi) {\n            return false;\n          }\n          if (img.hasAttribute('data-mce-bogus')) {\n            return false;\n          }\n          if (img.hasAttribute('data-mce-placeholder')) {\n            return false;\n          }\n          if (!src || src === Env.transparentSrc) {\n            return false;\n          }\n          if (src.indexOf('blob:') === 0) {\n            return !uploadStatus.isUploaded(src) && predicate(img);\n          }\n          if (src.indexOf('data:') === 0) {\n            return predicate(img);\n          }\n          return false;\n        });\n        var promises = map$3(images, function (img) {\n          if (cachedPromises[img.src] !== undefined) {\n            return new promiseObj(function (resolve) {\n              cachedPromises[img.src].then(function (imageInfo) {\n                if (typeof imageInfo === 'string') {\n                  return imageInfo;\n                }\n                resolve({\n                  image: img,\n                  blobInfo: imageInfo.blobInfo\n                });\n              });\n            });\n          }\n          var newPromise = new promiseObj(function (resolve, reject) {\n            imageToBlobInfo(blobCache, img, resolve, reject);\n          }).then(function (result) {\n            delete cachedPromises[result.image.src];\n            return result;\n          }).catch(function (error) {\n            delete cachedPromises[img.src];\n            return error;\n          });\n          cachedPromises[img.src] = newPromise;\n          return newPromise;\n        });\n        return promiseObj.all(promises);\n      };\n      return { findAll: findAll };\n    };\n\n    var paddEmptyNode = function (settings, args, blockElements, node) {\n      var brPreferred = settings.padd_empty_with_br || args.insert;\n      if (brPreferred && blockElements[node.name]) {\n        node.empty().append(new AstNode('br', 1)).shortEnded = true;\n      } else {\n        node.empty().append(new AstNode('#text', 3)).value = nbsp;\n      }\n    };\n    var isPaddedWithNbsp = function (node) {\n      return hasOnlyChild(node, '#text') && node.firstChild.value === nbsp;\n    };\n    var hasOnlyChild = function (node, name) {\n      return node && node.firstChild && node.firstChild === node.lastChild && node.firstChild.name === name;\n    };\n    var isPadded = function (schema, node) {\n      var rule = schema.getElementRule(node.name);\n      return rule && rule.paddEmpty;\n    };\n    var isEmpty = function (schema, nonEmptyElements, whitespaceElements, node) {\n      return node.isEmpty(nonEmptyElements, whitespaceElements, function (node) {\n        return isPadded(schema, node);\n      });\n    };\n    var isLineBreakNode = function (node, blockElements) {\n      return node && (has$2(blockElements, node.name) || node.name === 'br');\n    };\n\n    var isBogusImage = function (img) {\n      return isNonNullable(img.attr('data-mce-bogus'));\n    };\n    var isInternalImageSource = function (img) {\n      return img.attr('src') === Env.transparentSrc || isNonNullable(img.attr('data-mce-placeholder'));\n    };\n    var isValidDataImg = function (img, settings) {\n      if (settings.images_dataimg_filter) {\n        var imgElem_1 = new Image();\n        imgElem_1.src = img.attr('src');\n        each$j(img.attributes.map, function (value, key) {\n          imgElem_1.setAttribute(key, value);\n        });\n        return settings.images_dataimg_filter(imgElem_1);\n      } else {\n        return true;\n      }\n    };\n    var registerBase64ImageFilter = function (parser, settings) {\n      var blobCache = settings.blob_cache;\n      var processImage = function (img) {\n        var inputSrc = img.attr('src');\n        if (isInternalImageSource(img) || isBogusImage(img)) {\n          return;\n        }\n        parseDataUri$1(inputSrc).filter(function () {\n          return isValidDataImg(img, settings);\n        }).bind(function (_a) {\n          var type = _a.type, data = _a.data;\n          return Optional.from(blobCache.getByData(data, type)).orThunk(function () {\n            return buildBlob(type, data).map(function (blob) {\n              var blobInfo = blobCache.create(uniqueId(), blob, data);\n              blobCache.add(blobInfo);\n              return blobInfo;\n            });\n          });\n        }).each(function (blobInfo) {\n          img.attr('src', blobInfo.blobUri());\n        });\n      };\n      if (blobCache) {\n        parser.addAttributeFilter('src', function (nodes) {\n          return each$k(nodes, processImage);\n        });\n      }\n    };\n    var register$1 = function (parser, settings) {\n      var schema = parser.schema;\n      if (settings.remove_trailing_brs) {\n        parser.addNodeFilter('br', function (nodes, _, args) {\n          var i;\n          var l = nodes.length;\n          var node;\n          var blockElements = Tools.extend({}, schema.getBlockElements());\n          var nonEmptyElements = schema.getNonEmptyElements();\n          var parent, lastParent, prev, prevName;\n          var whiteSpaceElements = schema.getWhiteSpaceElements();\n          var elementRule, textNode;\n          blockElements.body = 1;\n          for (i = 0; i < l; i++) {\n            node = nodes[i];\n            parent = node.parent;\n            if (blockElements[node.parent.name] && node === parent.lastChild) {\n              prev = node.prev;\n              while (prev) {\n                prevName = prev.name;\n                if (prevName !== 'span' || prev.attr('data-mce-type') !== 'bookmark') {\n                  if (prevName === 'br') {\n                    node = null;\n                  }\n                  break;\n                }\n                prev = prev.prev;\n              }\n              if (node) {\n                node.remove();\n                if (isEmpty(schema, nonEmptyElements, whiteSpaceElements, parent)) {\n                  elementRule = schema.getElementRule(parent.name);\n                  if (elementRule) {\n                    if (elementRule.removeEmpty) {\n                      parent.remove();\n                    } else if (elementRule.paddEmpty) {\n                      paddEmptyNode(settings, args, blockElements, parent);\n                    }\n                  }\n                }\n              }\n            } else {\n              lastParent = node;\n              while (parent && parent.firstChild === lastParent && parent.lastChild === lastParent) {\n                lastParent = parent;\n                if (blockElements[parent.name]) {\n                  break;\n                }\n                parent = parent.parent;\n              }\n              if (lastParent === parent && settings.padd_empty_with_br !== true) {\n                textNode = new AstNode('#text', 3);\n                textNode.value = nbsp;\n                node.replace(textNode);\n              }\n            }\n          }\n        });\n      }\n      parser.addAttributeFilter('href', function (nodes) {\n        var i = nodes.length;\n        var appendRel = function (rel) {\n          var parts = rel.split(' ').filter(function (p) {\n            return p.length > 0;\n          });\n          return parts.concat(['noopener']).sort().join(' ');\n        };\n        var addNoOpener = function (rel) {\n          var newRel = rel ? Tools.trim(rel) : '';\n          if (!/\\b(noopener)\\b/g.test(newRel)) {\n            return appendRel(newRel);\n          } else {\n            return newRel;\n          }\n        };\n        if (!settings.allow_unsafe_link_target) {\n          while (i--) {\n            var node = nodes[i];\n            if (node.name === 'a' && node.attr('target') === '_blank') {\n              node.attr('rel', addNoOpener(node.attr('rel')));\n            }\n          }\n        }\n      });\n      if (!settings.allow_html_in_named_anchor) {\n        parser.addAttributeFilter('id,name', function (nodes) {\n          var i = nodes.length, sibling, prevSibling, parent, node;\n          while (i--) {\n            node = nodes[i];\n            if (node.name === 'a' && node.firstChild && !node.attr('href')) {\n              parent = node.parent;\n              sibling = node.lastChild;\n              do {\n                prevSibling = sibling.prev;\n                parent.insert(sibling, node);\n                sibling = prevSibling;\n              } while (sibling);\n            }\n          }\n        });\n      }\n      if (settings.fix_list_elements) {\n        parser.addNodeFilter('ul,ol', function (nodes) {\n          var i = nodes.length, node, parentNode;\n          while (i--) {\n            node = nodes[i];\n            parentNode = node.parent;\n            if (parentNode.name === 'ul' || parentNode.name === 'ol') {\n              if (node.prev && node.prev.name === 'li') {\n                node.prev.append(node);\n              } else {\n                var li = new AstNode('li', 1);\n                li.attr('style', 'list-style-type: none');\n                node.wrap(li);\n              }\n            }\n          }\n        });\n      }\n      if (settings.validate && schema.getValidClasses()) {\n        parser.addAttributeFilter('class', function (nodes) {\n          var validClasses = schema.getValidClasses();\n          var i = nodes.length;\n          while (i--) {\n            var node = nodes[i];\n            var classList = node.attr('class').split(' ');\n            var classValue = '';\n            for (var ci = 0; ci < classList.length; ci++) {\n              var className = classList[ci];\n              var valid = false;\n              var validClassesMap = validClasses['*'];\n              if (validClassesMap && validClassesMap[className]) {\n                valid = true;\n              }\n              validClassesMap = validClasses[node.name];\n              if (!valid && validClassesMap && validClassesMap[className]) {\n                valid = true;\n              }\n              if (valid) {\n                if (classValue) {\n                  classValue += ' ';\n                }\n                classValue += className;\n              }\n            }\n            if (!classValue.length) {\n              classValue = null;\n            }\n            node.attr('class', classValue);\n          }\n        });\n      }\n      registerBase64ImageFilter(parser, settings);\n    };\n\n    var makeMap = Tools.makeMap, each$7 = Tools.each, explode$2 = Tools.explode, extend$4 = Tools.extend;\n    var DomParser = function (settings, schema) {\n      if (schema === void 0) {\n        schema = Schema();\n      }\n      var nodeFilters = {};\n      var attributeFilters = [];\n      var matchedNodes = {};\n      var matchedAttributes = {};\n      settings = settings || {};\n      settings.validate = 'validate' in settings ? settings.validate : true;\n      settings.root_name = settings.root_name || 'body';\n      var fixInvalidChildren = function (nodes) {\n        var nonSplitableElements = makeMap('tr,td,th,tbody,thead,tfoot,table');\n        var nonEmptyElements = schema.getNonEmptyElements();\n        var whitespaceElements = schema.getWhiteSpaceElements();\n        var textBlockElements = schema.getTextBlockElements();\n        var specialElements = schema.getSpecialElements();\n        var removeOrUnwrapInvalidNode = function (node, originalNodeParent) {\n          if (originalNodeParent === void 0) {\n            originalNodeParent = node.parent;\n          }\n          if (specialElements[node.name]) {\n            node.empty().remove();\n          } else {\n            var children = node.children();\n            for (var _i = 0, children_1 = children; _i < children_1.length; _i++) {\n              var childNode = children_1[_i];\n              if (!schema.isValidChild(originalNodeParent.name, childNode.name)) {\n                removeOrUnwrapInvalidNode(childNode, originalNodeParent);\n              }\n            }\n            node.unwrap();\n          }\n        };\n        for (var ni = 0; ni < nodes.length; ni++) {\n          var node = nodes[ni];\n          var parent_1 = void 0, newParent = void 0, tempNode = void 0;\n          if (!node.parent || node.fixed) {\n            continue;\n          }\n          if (textBlockElements[node.name] && node.parent.name === 'li') {\n            var sibling = node.next;\n            while (sibling) {\n              if (textBlockElements[sibling.name]) {\n                sibling.name = 'li';\n                sibling.fixed = true;\n                node.parent.insert(sibling, node.parent);\n              } else {\n                break;\n              }\n              sibling = sibling.next;\n            }\n            node.unwrap();\n            continue;\n          }\n          var parents = [node];\n          for (parent_1 = node.parent; parent_1 && !schema.isValidChild(parent_1.name, node.name) && !nonSplitableElements[parent_1.name]; parent_1 = parent_1.parent) {\n            parents.push(parent_1);\n          }\n          if (parent_1 && parents.length > 1) {\n            if (schema.isValidChild(parent_1.name, node.name)) {\n              parents.reverse();\n              newParent = filterNode(parents[0].clone());\n              var currentNode = newParent;\n              for (var i = 0; i < parents.length - 1; i++) {\n                if (schema.isValidChild(currentNode.name, parents[i].name)) {\n                  tempNode = filterNode(parents[i].clone());\n                  currentNode.append(tempNode);\n                } else {\n                  tempNode = currentNode;\n                }\n                for (var childNode = parents[i].firstChild; childNode && childNode !== parents[i + 1];) {\n                  var nextNode = childNode.next;\n                  tempNode.append(childNode);\n                  childNode = nextNode;\n                }\n                currentNode = tempNode;\n              }\n              if (!isEmpty(schema, nonEmptyElements, whitespaceElements, newParent)) {\n                parent_1.insert(newParent, parents[0], true);\n                parent_1.insert(node, newParent);\n              } else {\n                parent_1.insert(node, parents[0], true);\n              }\n              parent_1 = parents[0];\n              if (isEmpty(schema, nonEmptyElements, whitespaceElements, parent_1) || hasOnlyChild(parent_1, 'br')) {\n                parent_1.empty().remove();\n              }\n            } else {\n              removeOrUnwrapInvalidNode(node);\n            }\n          } else if (node.parent) {\n            if (node.name === 'li') {\n              var sibling = node.prev;\n              if (sibling && (sibling.name === 'ul' || sibling.name === 'ol')) {\n                sibling.append(node);\n                continue;\n              }\n              sibling = node.next;\n              if (sibling && (sibling.name === 'ul' || sibling.name === 'ol')) {\n                sibling.insert(node, sibling.firstChild, true);\n                continue;\n              }\n              node.wrap(filterNode(new AstNode('ul', 1)));\n              continue;\n            }\n            if (schema.isValidChild(node.parent.name, 'div') && schema.isValidChild('div', node.name)) {\n              node.wrap(filterNode(new AstNode('div', 1)));\n            } else {\n              removeOrUnwrapInvalidNode(node);\n            }\n          }\n        }\n      };\n      var filterNode = function (node) {\n        var name = node.name;\n        if (name in nodeFilters) {\n          var list = matchedNodes[name];\n          if (list) {\n            list.push(node);\n          } else {\n            matchedNodes[name] = [node];\n          }\n        }\n        var i = attributeFilters.length;\n        while (i--) {\n          var attrName = attributeFilters[i].name;\n          if (attrName in node.attributes.map) {\n            var list = matchedAttributes[attrName];\n            if (list) {\n              list.push(node);\n            } else {\n              matchedAttributes[attrName] = [node];\n            }\n          }\n        }\n        return node;\n      };\n      var addNodeFilter = function (name, callback) {\n        each$7(explode$2(name), function (name) {\n          var list = nodeFilters[name];\n          if (!list) {\n            nodeFilters[name] = list = [];\n          }\n          list.push(callback);\n        });\n      };\n      var getNodeFilters = function () {\n        var out = [];\n        for (var name_1 in nodeFilters) {\n          if (has$2(nodeFilters, name_1)) {\n            out.push({\n              name: name_1,\n              callbacks: nodeFilters[name_1]\n            });\n          }\n        }\n        return out;\n      };\n      var addAttributeFilter = function (name, callback) {\n        each$7(explode$2(name), function (name) {\n          var i;\n          for (i = 0; i < attributeFilters.length; i++) {\n            if (attributeFilters[i].name === name) {\n              attributeFilters[i].callbacks.push(callback);\n              return;\n            }\n          }\n          attributeFilters.push({\n            name: name,\n            callbacks: [callback]\n          });\n        });\n      };\n      var getAttributeFilters = function () {\n        return [].concat(attributeFilters);\n      };\n      var parse = function (html, args) {\n        var nodes, i, l, fi, fl, list, name;\n        var invalidChildren = [];\n        var node;\n        var getRootBlockName = function (name) {\n          if (name === false) {\n            return '';\n          } else if (name === true) {\n            return 'p';\n          } else {\n            return name;\n          }\n        };\n        args = args || {};\n        matchedNodes = {};\n        matchedAttributes = {};\n        var blockElements = extend$4(makeMap('script,style,head,html,body,title,meta,param'), schema.getBlockElements());\n        var nonEmptyElements = schema.getNonEmptyElements();\n        var children = schema.children;\n        var validate = settings.validate;\n        var forcedRootBlockName = 'forced_root_block' in args ? args.forced_root_block : settings.forced_root_block;\n        var rootBlockName = getRootBlockName(forcedRootBlockName);\n        var whiteSpaceElements = schema.getWhiteSpaceElements();\n        var startWhiteSpaceRegExp = /^[ \\t\\r\\n]+/;\n        var endWhiteSpaceRegExp = /[ \\t\\r\\n]+$/;\n        var allWhiteSpaceRegExp = /[ \\t\\r\\n]+/g;\n        var isAllWhiteSpaceRegExp = /^[ \\t\\r\\n]+$/;\n        var isInWhiteSpacePreservedElement = has$2(whiteSpaceElements, args.context) || has$2(whiteSpaceElements, settings.root_name);\n        var addRootBlocks = function () {\n          var node = rootNode.firstChild, rootBlockNode = null;\n          var trim = function (rootBlock) {\n            if (rootBlock) {\n              node = rootBlock.firstChild;\n              if (node && node.type === 3) {\n                node.value = node.value.replace(startWhiteSpaceRegExp, '');\n              }\n              node = rootBlock.lastChild;\n              if (node && node.type === 3) {\n                node.value = node.value.replace(endWhiteSpaceRegExp, '');\n              }\n            }\n          };\n          if (!schema.isValidChild(rootNode.name, rootBlockName.toLowerCase())) {\n            return;\n          }\n          while (node) {\n            var next = node.next;\n            if (node.type === 3 || node.type === 1 && node.name !== 'p' && !blockElements[node.name] && !node.attr('data-mce-type')) {\n              if (!rootBlockNode) {\n                rootBlockNode = createNode(rootBlockName, 1);\n                rootBlockNode.attr(settings.forced_root_block_attrs);\n                rootNode.insert(rootBlockNode, node);\n                rootBlockNode.append(node);\n              } else {\n                rootBlockNode.append(node);\n              }\n            } else {\n              trim(rootBlockNode);\n              rootBlockNode = null;\n            }\n            node = next;\n          }\n          trim(rootBlockNode);\n        };\n        var createNode = function (name, type) {\n          var node = new AstNode(name, type);\n          var list;\n          if (name in nodeFilters) {\n            list = matchedNodes[name];\n            if (list) {\n              list.push(node);\n            } else {\n              matchedNodes[name] = [node];\n            }\n          }\n          return node;\n        };\n        var removeWhitespaceBefore = function (node) {\n          var blockElements = schema.getBlockElements();\n          for (var textNode = node.prev; textNode && textNode.type === 3;) {\n            var textVal = textNode.value.replace(endWhiteSpaceRegExp, '');\n            if (textVal.length > 0) {\n              textNode.value = textVal;\n              return;\n            }\n            var textNodeNext = textNode.next;\n            if (textNodeNext) {\n              if (textNodeNext.type === 3 && textNodeNext.value.length) {\n                textNode = textNode.prev;\n                continue;\n              }\n              if (!blockElements[textNodeNext.name] && textNodeNext.name !== 'script' && textNodeNext.name !== 'style') {\n                textNode = textNode.prev;\n                continue;\n              }\n            }\n            var sibling = textNode.prev;\n            textNode.remove();\n            textNode = sibling;\n          }\n        };\n        var cloneAndExcludeBlocks = function (input) {\n          var output = {};\n          for (var name_2 in input) {\n            if (name_2 !== 'li' && name_2 !== 'p') {\n              output[name_2] = input[name_2];\n            }\n          }\n          return output;\n        };\n        var parser = SaxParser({\n          validate: validate,\n          document: settings.document,\n          allow_html_data_urls: settings.allow_html_data_urls,\n          allow_svg_data_urls: settings.allow_svg_data_urls,\n          allow_script_urls: settings.allow_script_urls,\n          allow_conditional_comments: settings.allow_conditional_comments,\n          preserve_cdata: settings.preserve_cdata,\n          self_closing_elements: cloneAndExcludeBlocks(schema.getSelfClosingElements()),\n          cdata: function (text) {\n            node.append(createNode('#cdata', 4)).value = text;\n          },\n          text: function (text, raw) {\n            var textNode;\n            if (!isInWhiteSpacePreservedElement) {\n              text = text.replace(allWhiteSpaceRegExp, ' ');\n              if (isLineBreakNode(node.lastChild, blockElements)) {\n                text = text.replace(startWhiteSpaceRegExp, '');\n              }\n            }\n            if (text.length !== 0) {\n              textNode = createNode('#text', 3);\n              textNode.raw = !!raw;\n              node.append(textNode).value = text;\n            }\n          },\n          comment: function (text) {\n            node.append(createNode('#comment', 8)).value = text;\n          },\n          pi: function (name, text) {\n            node.append(createNode(name, 7)).value = text;\n            removeWhitespaceBefore(node);\n          },\n          doctype: function (text) {\n            var newNode = node.append(createNode('#doctype', 10));\n            newNode.value = text;\n            removeWhitespaceBefore(node);\n          },\n          start: function (name, attrs, empty) {\n            var elementRule = validate ? schema.getElementRule(name) : {};\n            if (elementRule) {\n              var newNode = createNode(elementRule.outputName || name, 1);\n              newNode.attributes = attrs;\n              newNode.shortEnded = empty;\n              node.append(newNode);\n              var parent_2 = children[node.name];\n              if (parent_2 && children[newNode.name] && !parent_2[newNode.name]) {\n                invalidChildren.push(newNode);\n              }\n              var attrFiltersLen = attributeFilters.length;\n              while (attrFiltersLen--) {\n                var attrName = attributeFilters[attrFiltersLen].name;\n                if (attrName in attrs.map) {\n                  list = matchedAttributes[attrName];\n                  if (list) {\n                    list.push(newNode);\n                  } else {\n                    matchedAttributes[attrName] = [newNode];\n                  }\n                }\n              }\n              if (blockElements[name]) {\n                removeWhitespaceBefore(newNode);\n              }\n              if (!empty) {\n                node = newNode;\n              }\n              if (!isInWhiteSpacePreservedElement && whiteSpaceElements[name]) {\n                isInWhiteSpacePreservedElement = true;\n              }\n            }\n          },\n          end: function (name) {\n            var textNode, text, sibling, tempNode;\n            var elementRule = validate ? schema.getElementRule(name) : {};\n            if (elementRule) {\n              if (blockElements[name]) {\n                if (!isInWhiteSpacePreservedElement) {\n                  textNode = node.firstChild;\n                  if (textNode && textNode.type === 3) {\n                    text = textNode.value.replace(startWhiteSpaceRegExp, '');\n                    if (text.length > 0) {\n                      textNode.value = text;\n                      textNode = textNode.next;\n                    } else {\n                      sibling = textNode.next;\n                      textNode.remove();\n                      textNode = sibling;\n                      while (textNode && textNode.type === 3) {\n                        text = textNode.value;\n                        sibling = textNode.next;\n                        if (text.length === 0 || isAllWhiteSpaceRegExp.test(text)) {\n                          textNode.remove();\n                          textNode = sibling;\n                        }\n                        textNode = sibling;\n                      }\n                    }\n                  }\n                  textNode = node.lastChild;\n                  if (textNode && textNode.type === 3) {\n                    text = textNode.value.replace(endWhiteSpaceRegExp, '');\n                    if (text.length > 0) {\n                      textNode.value = text;\n                      textNode = textNode.prev;\n                    } else {\n                      sibling = textNode.prev;\n                      textNode.remove();\n                      textNode = sibling;\n                      while (textNode && textNode.type === 3) {\n                        text = textNode.value;\n                        sibling = textNode.prev;\n                        if (text.length === 0 || isAllWhiteSpaceRegExp.test(text)) {\n                          textNode.remove();\n                          textNode = sibling;\n                        }\n                        textNode = sibling;\n                      }\n                    }\n                  }\n                }\n              }\n              if (isInWhiteSpacePreservedElement && whiteSpaceElements[name]) {\n                isInWhiteSpacePreservedElement = false;\n              }\n              if (elementRule.removeEmpty && isEmpty(schema, nonEmptyElements, whiteSpaceElements, node)) {\n                tempNode = node.parent;\n                if (blockElements[node.name]) {\n                  node.empty().remove();\n                } else {\n                  node.unwrap();\n                }\n                node = tempNode;\n                return;\n              }\n              if (elementRule.paddEmpty && (isPaddedWithNbsp(node) || isEmpty(schema, nonEmptyElements, whiteSpaceElements, node))) {\n                paddEmptyNode(settings, args, blockElements, node);\n              }\n              node = node.parent;\n            }\n          }\n        }, schema);\n        var rootNode = node = new AstNode(args.context || settings.root_name, 11);\n        parser.parse(html, args.format);\n        if (validate && invalidChildren.length) {\n          if (!args.context) {\n            fixInvalidChildren(invalidChildren);\n          } else {\n            args.invalid = true;\n          }\n        }\n        if (rootBlockName && (rootNode.name === 'body' || args.isRootContent)) {\n          addRootBlocks();\n        }\n        if (!args.invalid) {\n          for (name in matchedNodes) {\n            if (!has$2(matchedNodes, name)) {\n              continue;\n            }\n            list = nodeFilters[name];\n            nodes = matchedNodes[name];\n            fi = nodes.length;\n            while (fi--) {\n              if (!nodes[fi].parent) {\n                nodes.splice(fi, 1);\n              }\n            }\n            for (i = 0, l = list.length; i < l; i++) {\n              list[i](nodes, name, args);\n            }\n          }\n          for (i = 0, l = attributeFilters.length; i < l; i++) {\n            list = attributeFilters[i];\n            if (list.name in matchedAttributes) {\n              nodes = matchedAttributes[list.name];\n              fi = nodes.length;\n              while (fi--) {\n                if (!nodes[fi].parent) {\n                  nodes.splice(fi, 1);\n                }\n              }\n              for (fi = 0, fl = list.callbacks.length; fi < fl; fi++) {\n                list.callbacks[fi](nodes, list.name, args);\n              }\n            }\n          }\n        }\n        return rootNode;\n      };\n      var exports = {\n        schema: schema,\n        addAttributeFilter: addAttributeFilter,\n        getAttributeFilters: getAttributeFilters,\n        addNodeFilter: addNodeFilter,\n        getNodeFilters: getNodeFilters,\n        filterNode: filterNode,\n        parse: parse\n      };\n      register$1(exports, settings);\n      register$2(exports, settings);\n      return exports;\n    };\n\n    var register = function (htmlParser, settings, dom) {\n      htmlParser.addAttributeFilter('data-mce-tabindex', function (nodes, name) {\n        var i = nodes.length;\n        while (i--) {\n          var node = nodes[i];\n          node.attr('tabindex', node.attr('data-mce-tabindex'));\n          node.attr(name, null);\n        }\n      });\n      htmlParser.addAttributeFilter('src,href,style', function (nodes, name) {\n        var internalName = 'data-mce-' + name;\n        var urlConverter = settings.url_converter;\n        var urlConverterScope = settings.url_converter_scope;\n        var i = nodes.length;\n        while (i--) {\n          var node = nodes[i];\n          var value = node.attr(internalName);\n          if (value !== undefined) {\n            node.attr(name, value.length > 0 ? value : null);\n            node.attr(internalName, null);\n          } else {\n            value = node.attr(name);\n            if (name === 'style') {\n              value = dom.serializeStyle(dom.parseStyle(value), node.name);\n            } else if (urlConverter) {\n              value = urlConverter.call(urlConverterScope, value, name, node.name);\n            }\n            node.attr(name, value.length > 0 ? value : null);\n          }\n        }\n      });\n      htmlParser.addAttributeFilter('class', function (nodes) {\n        var i = nodes.length;\n        while (i--) {\n          var node = nodes[i];\n          var value = node.attr('class');\n          if (value) {\n            value = node.attr('class').replace(/(?:^|\\s)mce-item-\\w+(?!\\S)/g, '');\n            node.attr('class', value.length > 0 ? value : null);\n          }\n        }\n      });\n      htmlParser.addAttributeFilter('data-mce-type', function (nodes, name, args) {\n        var i = nodes.length;\n        while (i--) {\n          var node = nodes[i];\n          if (node.attr('data-mce-type') === 'bookmark' && !args.cleanup) {\n            var hasChildren = Optional.from(node.firstChild).exists(function (firstChild) {\n              return !isZwsp(firstChild.value);\n            });\n            if (hasChildren) {\n              node.unwrap();\n            } else {\n              node.remove();\n            }\n          }\n        }\n      });\n      htmlParser.addNodeFilter('noscript', function (nodes) {\n        var i = nodes.length;\n        while (i--) {\n          var node = nodes[i].firstChild;\n          if (node) {\n            node.value = Entities.decode(node.value);\n          }\n        }\n      });\n      htmlParser.addNodeFilter('script,style', function (nodes, name) {\n        var trim = function (value) {\n          return value.replace(/(<!--\\[CDATA\\[|\\]\\]-->)/g, '\\n').replace(/^[\\r\\n]*|[\\r\\n]*$/g, '').replace(/^\\s*((<!--)?(\\s*\\/\\/)?\\s*<!\\[CDATA\\[|(<!--\\s*)?\\/\\*\\s*<!\\[CDATA\\[\\s*\\*\\/|(\\/\\/)?\\s*<!--|\\/\\*\\s*<!--\\s*\\*\\/)\\s*[\\r\\n]*/gi, '').replace(/\\s*(\\/\\*\\s*\\]\\]>\\s*\\*\\/(-->)?|\\s*\\/\\/\\s*\\]\\]>(-->)?|\\/\\/\\s*(-->)?|\\]\\]>|\\/\\*\\s*-->\\s*\\*\\/|\\s*-->\\s*)\\s*$/g, '');\n        };\n        var i = nodes.length;\n        while (i--) {\n          var node = nodes[i];\n          var value = node.firstChild ? node.firstChild.value : '';\n          if (name === 'script') {\n            var type = node.attr('type');\n            if (type) {\n              node.attr('type', type === 'mce-no/type' ? null : type.replace(/^mce\\-/, ''));\n            }\n            if (settings.element_format === 'xhtml' && value.length > 0) {\n              node.firstChild.value = '// <![CDATA[\\n' + trim(value) + '\\n// ]]>';\n            }\n          } else {\n            if (settings.element_format === 'xhtml' && value.length > 0) {\n              node.firstChild.value = '<!--\\n' + trim(value) + '\\n-->';\n            }\n          }\n        }\n      });\n      htmlParser.addNodeFilter('#comment', function (nodes) {\n        var i = nodes.length;\n        while (i--) {\n          var node = nodes[i];\n          if (settings.preserve_cdata && node.value.indexOf('[CDATA[') === 0) {\n            node.name = '#cdata';\n            node.type = 4;\n            node.value = dom.decode(node.value.replace(/^\\[CDATA\\[|\\]\\]$/g, ''));\n          } else if (node.value.indexOf('mce:protected ') === 0) {\n            node.name = '#text';\n            node.type = 3;\n            node.raw = true;\n            node.value = unescape(node.value).substr(14);\n          }\n        }\n      });\n      htmlParser.addNodeFilter('xml:namespace,input', function (nodes, name) {\n        var i = nodes.length;\n        while (i--) {\n          var node = nodes[i];\n          if (node.type === 7) {\n            node.remove();\n          } else if (node.type === 1) {\n            if (name === 'input' && !node.attr('type')) {\n              node.attr('type', 'text');\n            }\n          }\n        }\n      });\n      htmlParser.addAttributeFilter('data-mce-type', function (nodes) {\n        each$k(nodes, function (node) {\n          if (node.attr('data-mce-type') === 'format-caret') {\n            if (node.isEmpty(htmlParser.schema.getNonEmptyElements())) {\n              node.remove();\n            } else {\n              node.unwrap();\n            }\n          }\n        });\n      });\n      htmlParser.addAttributeFilter('data-mce-src,data-mce-href,data-mce-style,' + 'data-mce-selected,data-mce-expando,' + 'data-mce-type,data-mce-resize,data-mce-placeholder', function (nodes, name) {\n        var i = nodes.length;\n        while (i--) {\n          nodes[i].attr(name, null);\n        }\n      });\n    };\n    var trimTrailingBr = function (rootNode) {\n      var isBr = function (node) {\n        return node && node.name === 'br';\n      };\n      var brNode1 = rootNode.lastChild;\n      if (isBr(brNode1)) {\n        var brNode2 = brNode1.prev;\n        if (isBr(brNode2)) {\n          brNode1.remove();\n          brNode2.remove();\n        }\n      }\n    };\n\n    var preProcess = function (editor, node, args) {\n      var oldDoc;\n      var dom = editor.dom;\n      var clonedNode = node.cloneNode(true);\n      var impl = document.implementation;\n      if (impl.createHTMLDocument) {\n        var doc_1 = impl.createHTMLDocument('');\n        Tools.each(clonedNode.nodeName === 'BODY' ? clonedNode.childNodes : [clonedNode], function (node) {\n          doc_1.body.appendChild(doc_1.importNode(node, true));\n        });\n        if (clonedNode.nodeName !== 'BODY') {\n          clonedNode = doc_1.body.firstChild;\n        } else {\n          clonedNode = doc_1.body;\n        }\n        oldDoc = dom.doc;\n        dom.doc = doc_1;\n      }\n      firePreProcess(editor, __assign(__assign({}, args), { node: clonedNode }));\n      if (oldDoc) {\n        dom.doc = oldDoc;\n      }\n      return clonedNode;\n    };\n    var shouldFireEvent = function (editor, args) {\n      return editor && editor.hasEventListeners('PreProcess') && !args.no_events;\n    };\n    var process = function (editor, node, args) {\n      return shouldFireEvent(editor, args) ? preProcess(editor, node, args) : node;\n    };\n\n    var addTempAttr = function (htmlParser, tempAttrs, name) {\n      if (Tools.inArray(tempAttrs, name) === -1) {\n        htmlParser.addAttributeFilter(name, function (nodes, name) {\n          var i = nodes.length;\n          while (i--) {\n            nodes[i].attr(name, null);\n          }\n        });\n        tempAttrs.push(name);\n      }\n    };\n    var postProcess = function (editor, args, content) {\n      if (!args.no_events && editor) {\n        var outArgs = firePostProcess(editor, __assign(__assign({}, args), { content: content }));\n        return outArgs.content;\n      } else {\n        return content;\n      }\n    };\n    var getHtmlFromNode = function (dom, node, args) {\n      var html = trim$2(args.getInner ? node.innerHTML : dom.getOuterHTML(node));\n      return args.selection || isWsPreserveElement(SugarElement.fromDom(node)) ? html : Tools.trim(html);\n    };\n    var parseHtml = function (htmlParser, html, args) {\n      var parserArgs = args.selection ? __assign({ forced_root_block: false }, args) : args;\n      var rootNode = htmlParser.parse(html, parserArgs);\n      trimTrailingBr(rootNode);\n      return rootNode;\n    };\n    var serializeNode = function (settings, schema, node) {\n      var htmlSerializer = HtmlSerializer(settings, schema);\n      return htmlSerializer.serialize(node);\n    };\n    var toHtml = function (editor, settings, schema, rootNode, args) {\n      var content = serializeNode(settings, schema, rootNode);\n      return postProcess(editor, args, content);\n    };\n    var DomSerializerImpl = function (settings, editor) {\n      var tempAttrs = ['data-mce-selected'];\n      var dom = editor && editor.dom ? editor.dom : DOMUtils.DOM;\n      var schema = editor && editor.schema ? editor.schema : Schema(settings);\n      settings.entity_encoding = settings.entity_encoding || 'named';\n      settings.remove_trailing_brs = 'remove_trailing_brs' in settings ? settings.remove_trailing_brs : true;\n      var htmlParser = DomParser(settings, schema);\n      register(htmlParser, settings, dom);\n      var serialize = function (node, parserArgs) {\n        if (parserArgs === void 0) {\n          parserArgs = {};\n        }\n        var args = __assign({ format: 'html' }, parserArgs);\n        var targetNode = process(editor, node, args);\n        var html = getHtmlFromNode(dom, targetNode, args);\n        var rootNode = parseHtml(htmlParser, html, args);\n        return args.format === 'tree' ? rootNode : toHtml(editor, settings, schema, rootNode, args);\n      };\n      return {\n        schema: schema,\n        addNodeFilter: htmlParser.addNodeFilter,\n        addAttributeFilter: htmlParser.addAttributeFilter,\n        serialize: serialize,\n        addRules: schema.addValidElements,\n        setRules: schema.setValidElements,\n        addTempAttr: curry(addTempAttr, htmlParser, tempAttrs),\n        getTempAttrs: constant(tempAttrs),\n        getNodeFilters: htmlParser.getNodeFilters,\n        getAttributeFilters: htmlParser.getAttributeFilters\n      };\n    };\n\n    var DomSerializer = function (settings, editor) {\n      var domSerializer = DomSerializerImpl(settings, editor);\n      return {\n        schema: domSerializer.schema,\n        addNodeFilter: domSerializer.addNodeFilter,\n        addAttributeFilter: domSerializer.addAttributeFilter,\n        serialize: domSerializer.serialize,\n        addRules: domSerializer.addRules,\n        setRules: domSerializer.setRules,\n        addTempAttr: domSerializer.addTempAttr,\n        getTempAttrs: domSerializer.getTempAttrs,\n        getNodeFilters: domSerializer.getNodeFilters,\n        getAttributeFilters: domSerializer.getAttributeFilters\n      };\n    };\n\n    var defaultFormat = 'html';\n    var getContent = function (editor, args) {\n      if (args === void 0) {\n        args = {};\n      }\n      var format = args.format ? args.format : defaultFormat;\n      return getContent$2(editor, args, format);\n    };\n\n    var setContent = function (editor, content, args) {\n      if (args === void 0) {\n        args = {};\n      }\n      return setContent$2(editor, content, args);\n    };\n\n    var DOM$7 = DOMUtils.DOM;\n    var restoreOriginalStyles = function (editor) {\n      DOM$7.setStyle(editor.id, 'display', editor.orgDisplay);\n    };\n    var safeDestroy = function (x) {\n      return Optional.from(x).each(function (x) {\n        return x.destroy();\n      });\n    };\n    var clearDomReferences = function (editor) {\n      editor.contentAreaContainer = editor.formElement = editor.container = editor.editorContainer = null;\n      editor.bodyElement = editor.contentDocument = editor.contentWindow = null;\n      editor.iframeElement = editor.targetElm = null;\n      if (editor.selection) {\n        editor.selection = editor.selection.win = editor.selection.dom = editor.selection.dom.doc = null;\n      }\n    };\n    var restoreForm = function (editor) {\n      var form = editor.formElement;\n      if (form) {\n        if (form._mceOldSubmit) {\n          form.submit = form._mceOldSubmit;\n          form._mceOldSubmit = null;\n        }\n        DOM$7.unbind(form, 'submit reset', editor.formEventDelegate);\n      }\n    };\n    var remove = function (editor) {\n      if (!editor.removed) {\n        var _selectionOverrides = editor._selectionOverrides, editorUpload = editor.editorUpload;\n        var body = editor.getBody();\n        var element = editor.getElement();\n        if (body) {\n          editor.save({ is_removing: true });\n        }\n        editor.removed = true;\n        editor.unbindAllNativeEvents();\n        if (editor.hasHiddenInput && element) {\n          DOM$7.remove(element.nextSibling);\n        }\n        fireRemove(editor);\n        editor.editorManager.remove(editor);\n        if (!editor.inline && body) {\n          restoreOriginalStyles(editor);\n        }\n        fireDetach(editor);\n        DOM$7.remove(editor.getContainer());\n        safeDestroy(_selectionOverrides);\n        safeDestroy(editorUpload);\n        editor.destroy();\n      }\n    };\n    var destroy = function (editor, automatic) {\n      var selection = editor.selection, dom = editor.dom;\n      if (editor.destroyed) {\n        return;\n      }\n      if (!automatic && !editor.removed) {\n        editor.remove();\n        return;\n      }\n      if (!automatic) {\n        editor.editorManager.off('beforeunload', editor._beforeUnload);\n        if (editor.theme && editor.theme.destroy) {\n          editor.theme.destroy();\n        }\n        safeDestroy(selection);\n        safeDestroy(dom);\n      }\n      restoreForm(editor);\n      clearDomReferences(editor);\n      editor.destroyed = true;\n    };\n\n    var deep = function (old, nu) {\n      var bothObjects = isObject(old) && isObject(nu);\n      return bothObjects ? deepMerge(old, nu) : nu;\n    };\n    var baseMerge = function (merger) {\n      return function () {\n        var objects = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          objects[_i] = arguments[_i];\n        }\n        if (objects.length === 0) {\n          throw new Error('Can\\'t merge zero objects');\n        }\n        var ret = {};\n        for (var j = 0; j < objects.length; j++) {\n          var curObject = objects[j];\n          for (var key in curObject) {\n            if (has$2(curObject, key)) {\n              ret[key] = merger(ret[key], curObject[key]);\n            }\n          }\n        }\n        return ret;\n      };\n    };\n    var deepMerge = baseMerge(deep);\n\n    var sectionResult = function (sections, settings) {\n      return {\n        sections: constant(sections),\n        settings: constant(settings)\n      };\n    };\n    var deviceDetection = detect().deviceType;\n    var isTouch = deviceDetection.isTouch();\n    var isPhone = deviceDetection.isPhone();\n    var isTablet = deviceDetection.isTablet();\n    var legacyMobilePlugins = [\n      'lists',\n      'autolink',\n      'autosave'\n    ];\n    var defaultTouchSettings = {\n      table_grid: false,\n      object_resizing: false,\n      resize: false\n    };\n    var normalizePlugins = function (plugins) {\n      var pluginNames = isArray$1(plugins) ? plugins.join(' ') : plugins;\n      var trimmedPlugins = map$3(isString$1(pluginNames) ? pluginNames.split(' ') : [], trim$4);\n      return filter$4(trimmedPlugins, function (item) {\n        return item.length > 0;\n      });\n    };\n    var filterLegacyMobilePlugins = function (plugins) {\n      return filter$4(plugins, curry(contains$3, legacyMobilePlugins));\n    };\n    var extractSections = function (keys, settings) {\n      var result = bifilter(settings, function (value, key) {\n        return contains$3(keys, key);\n      });\n      return sectionResult(result.t, result.f);\n    };\n    var getSection = function (sectionResult, name, defaults) {\n      if (defaults === void 0) {\n        defaults = {};\n      }\n      var sections = sectionResult.sections();\n      var sectionSettings = get$9(sections, name).getOr({});\n      return Tools.extend({}, defaults, sectionSettings);\n    };\n    var hasSection = function (sectionResult, name) {\n      return has$2(sectionResult.sections(), name);\n    };\n    var isSectionTheme = function (sectionResult, name, theme) {\n      var section = sectionResult.sections();\n      return hasSection(sectionResult, name) && section[name].theme === theme;\n    };\n    var getSectionConfig = function (sectionResult, name) {\n      return hasSection(sectionResult, name) ? sectionResult.sections()[name] : {};\n    };\n    var getToolbarMode = function (settings, defaultVal) {\n      return get$9(settings, 'toolbar_mode').orThunk(function () {\n        return get$9(settings, 'toolbar_drawer').map(function (val) {\n          return val === false ? 'wrap' : val;\n        });\n      }).getOr(defaultVal);\n    };\n    var getDefaultSettings = function (settings, id, documentBaseUrl, isTouch, editor) {\n      var baseDefaults = {\n        id: id,\n        theme: 'silver',\n        toolbar_mode: getToolbarMode(settings, 'floating'),\n        plugins: '',\n        document_base_url: documentBaseUrl,\n        add_form_submit_trigger: true,\n        submit_patch: true,\n        add_unload_trigger: true,\n        convert_urls: true,\n        relative_urls: true,\n        remove_script_host: true,\n        object_resizing: true,\n        doctype: '<!DOCTYPE html>',\n        visual: true,\n        font_size_legacy_values: 'xx-small,small,medium,large,x-large,xx-large,300%',\n        forced_root_block: 'p',\n        hidden_input: true,\n        inline_styles: true,\n        convert_fonts_to_spans: true,\n        indent: true,\n        indent_before: 'p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,' + 'tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist',\n        indent_after: 'p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,' + 'tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist',\n        entity_encoding: 'named',\n        url_converter: editor.convertURL,\n        url_converter_scope: editor\n      };\n      return __assign(__assign({}, baseDefaults), isTouch ? defaultTouchSettings : {});\n    };\n    var getDefaultMobileSettings = function (mobileSettings, isPhone) {\n      var defaultMobileSettings = {\n        resize: false,\n        toolbar_mode: getToolbarMode(mobileSettings, 'scrolling'),\n        toolbar_sticky: false\n      };\n      var defaultPhoneSettings = { menubar: false };\n      return __assign(__assign(__assign({}, defaultTouchSettings), defaultMobileSettings), isPhone ? defaultPhoneSettings : {});\n    };\n    var getExternalPlugins = function (overrideSettings, settings) {\n      var userDefinedExternalPlugins = settings.external_plugins ? settings.external_plugins : {};\n      if (overrideSettings && overrideSettings.external_plugins) {\n        return Tools.extend({}, overrideSettings.external_plugins, userDefinedExternalPlugins);\n      } else {\n        return userDefinedExternalPlugins;\n      }\n    };\n    var combinePlugins = function (forcedPlugins, plugins) {\n      return [].concat(normalizePlugins(forcedPlugins)).concat(normalizePlugins(plugins));\n    };\n    var getPlatformPlugins = function (isMobileDevice, sectionResult, desktopPlugins, mobilePlugins) {\n      if (isMobileDevice && isSectionTheme(sectionResult, 'mobile', 'mobile')) {\n        return filterLegacyMobilePlugins(mobilePlugins);\n      } else if (isMobileDevice && hasSection(sectionResult, 'mobile')) {\n        return mobilePlugins;\n      } else {\n        return desktopPlugins;\n      }\n    };\n    var processPlugins = function (isMobileDevice, sectionResult, defaultOverrideSettings, settings) {\n      var forcedPlugins = normalizePlugins(defaultOverrideSettings.forced_plugins);\n      var desktopPlugins = normalizePlugins(settings.plugins);\n      var mobileConfig = getSectionConfig(sectionResult, 'mobile');\n      var mobilePlugins = mobileConfig.plugins ? normalizePlugins(mobileConfig.plugins) : desktopPlugins;\n      var platformPlugins = getPlatformPlugins(isMobileDevice, sectionResult, desktopPlugins, mobilePlugins);\n      var combinedPlugins = combinePlugins(forcedPlugins, platformPlugins);\n      if (Env.browser.isIE() && contains$3(combinedPlugins, 'rtc')) {\n        throw new Error('RTC plugin is not supported on IE 11.');\n      }\n      return Tools.extend(settings, { plugins: combinedPlugins.join(' ') });\n    };\n    var isOnMobile = function (isMobileDevice, sectionResult) {\n      return isMobileDevice && hasSection(sectionResult, 'mobile');\n    };\n    var combineSettings = function (isMobileDevice, isPhone, defaultSettings, defaultOverrideSettings, settings) {\n      var defaultDeviceSettings = isMobileDevice ? { mobile: getDefaultMobileSettings(settings.mobile || {}, isPhone) } : {};\n      var sectionResult = extractSections(['mobile'], deepMerge(defaultDeviceSettings, settings));\n      var extendedSettings = Tools.extend(defaultSettings, defaultOverrideSettings, sectionResult.settings(), isOnMobile(isMobileDevice, sectionResult) ? getSection(sectionResult, 'mobile') : {}, {\n        validate: true,\n        external_plugins: getExternalPlugins(defaultOverrideSettings, sectionResult.settings())\n      });\n      return processPlugins(isMobileDevice, sectionResult, defaultOverrideSettings, extendedSettings);\n    };\n    var getEditorSettings = function (editor, id, documentBaseUrl, defaultOverrideSettings, settings) {\n      var defaultSettings = getDefaultSettings(settings, id, documentBaseUrl, isTouch, editor);\n      return combineSettings(isPhone || isTablet, isPhone, defaultSettings, defaultOverrideSettings, settings);\n    };\n    var getFiltered = function (predicate, editor, name) {\n      return Optional.from(editor.settings[name]).filter(predicate);\n    };\n    var getParamObject = function (value) {\n      var output = {};\n      if (typeof value === 'string') {\n        each$k(value.indexOf('=') > 0 ? value.split(/[;,](?![^=;,]*(?:[;,]|$))/) : value.split(','), function (val) {\n          var arr = val.split('=');\n          if (arr.length > 1) {\n            output[Tools.trim(arr[0])] = Tools.trim(arr[1]);\n          } else {\n            output[Tools.trim(arr[0])] = Tools.trim(arr[0]);\n          }\n        });\n      } else {\n        output = value;\n      }\n      return output;\n    };\n    var isArrayOf = function (p) {\n      return function (a) {\n        return isArray$1(a) && forall(a, p);\n      };\n    };\n    var getParam = function (editor, name, defaultVal, type) {\n      var value = name in editor.settings ? editor.settings[name] : defaultVal;\n      if (type === 'hash') {\n        return getParamObject(value);\n      } else if (type === 'string') {\n        return getFiltered(isString$1, editor, name).getOr(defaultVal);\n      } else if (type === 'number') {\n        return getFiltered(isNumber, editor, name).getOr(defaultVal);\n      } else if (type === 'boolean') {\n        return getFiltered(isBoolean, editor, name).getOr(defaultVal);\n      } else if (type === 'object') {\n        return getFiltered(isObject, editor, name).getOr(defaultVal);\n      } else if (type === 'array') {\n        return getFiltered(isArray$1, editor, name).getOr(defaultVal);\n      } else if (type === 'string[]') {\n        return getFiltered(isArrayOf(isString$1), editor, name).getOr(defaultVal);\n      } else if (type === 'function') {\n        return getFiltered(isFunction, editor, name).getOr(defaultVal);\n      } else {\n        return value;\n      }\n    };\n\n    var CreateIconManager = function () {\n      var lookup = {};\n      var add = function (id, iconPack) {\n        lookup[id] = iconPack;\n      };\n      var get = function (id) {\n        if (lookup[id]) {\n          return lookup[id];\n        }\n        return { icons: {} };\n      };\n      var has = function (id) {\n        return has$2(lookup, id);\n      };\n      return {\n        add: add,\n        get: get,\n        has: has\n      };\n    };\n    var IconManager = CreateIconManager();\n\n    var getProp = function (propName, elm) {\n      var rawElm = elm.dom;\n      return rawElm[propName];\n    };\n    var getComputedSizeProp = function (propName, elm) {\n      return parseInt(get$5(elm, propName), 10);\n    };\n    var getClientWidth = curry(getProp, 'clientWidth');\n    var getClientHeight = curry(getProp, 'clientHeight');\n    var getMarginTop = curry(getComputedSizeProp, 'margin-top');\n    var getMarginLeft = curry(getComputedSizeProp, 'margin-left');\n    var getBoundingClientRect = function (elm) {\n      return elm.dom.getBoundingClientRect();\n    };\n    var isInsideElementContentArea = function (bodyElm, clientX, clientY) {\n      var clientWidth = getClientWidth(bodyElm);\n      var clientHeight = getClientHeight(bodyElm);\n      return clientX >= 0 && clientY >= 0 && clientX <= clientWidth && clientY <= clientHeight;\n    };\n    var transpose = function (inline, elm, clientX, clientY) {\n      var clientRect = getBoundingClientRect(elm);\n      var deltaX = inline ? clientRect.left + elm.dom.clientLeft + getMarginLeft(elm) : 0;\n      var deltaY = inline ? clientRect.top + elm.dom.clientTop + getMarginTop(elm) : 0;\n      var x = clientX - deltaX;\n      var y = clientY - deltaY;\n      return {\n        x: x,\n        y: y\n      };\n    };\n    var isXYInContentArea = function (editor, clientX, clientY) {\n      var bodyElm = SugarElement.fromDom(editor.getBody());\n      var targetElm = editor.inline ? bodyElm : documentElement(bodyElm);\n      var transposedPoint = transpose(editor.inline, targetElm, clientX, clientY);\n      return isInsideElementContentArea(targetElm, transposedPoint.x, transposedPoint.y);\n    };\n    var fromDomSafe = function (node) {\n      return Optional.from(node).map(SugarElement.fromDom);\n    };\n    var isEditorAttachedToDom = function (editor) {\n      var rawContainer = editor.inline ? editor.getBody() : editor.getContentAreaContainer();\n      return fromDomSafe(rawContainer).map(inBody).getOr(false);\n    };\n\n    var NotificationManagerImpl = function () {\n      var unimplemented = function () {\n        throw new Error('Theme did not provide a NotificationManager implementation.');\n      };\n      return {\n        open: unimplemented,\n        close: unimplemented,\n        reposition: unimplemented,\n        getArgs: unimplemented\n      };\n    };\n\n    var NotificationManager = function (editor) {\n      var notifications = [];\n      var getImplementation = function () {\n        var theme = editor.theme;\n        return theme && theme.getNotificationManagerImpl ? theme.getNotificationManagerImpl() : NotificationManagerImpl();\n      };\n      var getTopNotification = function () {\n        return Optional.from(notifications[0]);\n      };\n      var isEqual = function (a, b) {\n        return a.type === b.type && a.text === b.text && !a.progressBar && !a.timeout && !b.progressBar && !b.timeout;\n      };\n      var reposition = function () {\n        if (notifications.length > 0) {\n          getImplementation().reposition(notifications);\n        }\n      };\n      var addNotification = function (notification) {\n        notifications.push(notification);\n      };\n      var closeNotification = function (notification) {\n        findIndex$2(notifications, function (otherNotification) {\n          return otherNotification === notification;\n        }).each(function (index) {\n          notifications.splice(index, 1);\n        });\n      };\n      var open = function (spec, fireEvent) {\n        if (fireEvent === void 0) {\n          fireEvent = true;\n        }\n        if (editor.removed || !isEditorAttachedToDom(editor)) {\n          return;\n        }\n        if (fireEvent) {\n          editor.fire('BeforeOpenNotification', { notification: spec });\n        }\n        return find$3(notifications, function (notification) {\n          return isEqual(getImplementation().getArgs(notification), spec);\n        }).getOrThunk(function () {\n          editor.editorManager.setActive(editor);\n          var notification = getImplementation().open(spec, function () {\n            closeNotification(notification);\n            reposition();\n            getTopNotification().fold(function () {\n              return editor.focus();\n            }, function (top) {\n              return focus$1(SugarElement.fromDom(top.getEl()));\n            });\n          });\n          addNotification(notification);\n          reposition();\n          editor.fire('OpenNotification', { notification: __assign({}, notification) });\n          return notification;\n        });\n      };\n      var close = function () {\n        getTopNotification().each(function (notification) {\n          getImplementation().close(notification);\n          closeNotification(notification);\n          reposition();\n        });\n      };\n      var getNotifications = constant(notifications);\n      var registerEvents = function (editor) {\n        editor.on('SkinLoaded', function () {\n          var serviceMessage = getServiceMessage(editor);\n          if (serviceMessage) {\n            open({\n              text: serviceMessage,\n              type: 'warning',\n              timeout: 0\n            }, false);\n          }\n        });\n        editor.on('ResizeEditor ResizeWindow NodeChange', function () {\n          Delay.requestAnimationFrame(reposition);\n        });\n        editor.on('remove', function () {\n          each$k(notifications.slice(), function (notification) {\n            getImplementation().close(notification);\n          });\n        });\n      };\n      registerEvents(editor);\n      return {\n        open: open,\n        close: close,\n        getNotifications: getNotifications\n      };\n    };\n\n    var PluginManager = AddOnManager.PluginManager;\n\n    var ThemeManager = AddOnManager.ThemeManager;\n\n    function WindowManagerImpl () {\n      var unimplemented = function () {\n        throw new Error('Theme did not provide a WindowManager implementation.');\n      };\n      return {\n        open: unimplemented,\n        openUrl: unimplemented,\n        alert: unimplemented,\n        confirm: unimplemented,\n        close: unimplemented,\n        getParams: unimplemented,\n        setParams: unimplemented\n      };\n    }\n\n    var WindowManager = function (editor) {\n      var dialogs = [];\n      var getImplementation = function () {\n        var theme = editor.theme;\n        return theme && theme.getWindowManagerImpl ? theme.getWindowManagerImpl() : WindowManagerImpl();\n      };\n      var funcBind = function (scope, f) {\n        return function () {\n          var args = [];\n          for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n          }\n          return f ? f.apply(scope, args) : undefined;\n        };\n      };\n      var fireOpenEvent = function (dialog) {\n        editor.fire('OpenWindow', { dialog: dialog });\n      };\n      var fireCloseEvent = function (dialog) {\n        editor.fire('CloseWindow', { dialog: dialog });\n      };\n      var addDialog = function (dialog) {\n        dialogs.push(dialog);\n        fireOpenEvent(dialog);\n      };\n      var closeDialog = function (dialog) {\n        fireCloseEvent(dialog);\n        dialogs = filter$4(dialogs, function (otherDialog) {\n          return otherDialog !== dialog;\n        });\n        if (dialogs.length === 0) {\n          editor.focus();\n        }\n      };\n      var getTopDialog = function () {\n        return Optional.from(dialogs[dialogs.length - 1]);\n      };\n      var storeSelectionAndOpenDialog = function (openDialog) {\n        editor.editorManager.setActive(editor);\n        store(editor);\n        var dialog = openDialog();\n        addDialog(dialog);\n        return dialog;\n      };\n      var open = function (args, params) {\n        return storeSelectionAndOpenDialog(function () {\n          return getImplementation().open(args, params, closeDialog);\n        });\n      };\n      var openUrl = function (args) {\n        return storeSelectionAndOpenDialog(function () {\n          return getImplementation().openUrl(args, closeDialog);\n        });\n      };\n      var alert = function (message, callback, scope) {\n        var windowManagerImpl = getImplementation();\n        windowManagerImpl.alert(message, funcBind(scope ? scope : windowManagerImpl, callback));\n      };\n      var confirm = function (message, callback, scope) {\n        var windowManagerImpl = getImplementation();\n        windowManagerImpl.confirm(message, funcBind(scope ? scope : windowManagerImpl, callback));\n      };\n      var close = function () {\n        getTopDialog().each(function (dialog) {\n          getImplementation().close(dialog);\n          closeDialog(dialog);\n        });\n      };\n      editor.on('remove', function () {\n        each$k(dialogs, function (dialog) {\n          getImplementation().close(dialog);\n        });\n      });\n      return {\n        open: open,\n        openUrl: openUrl,\n        alert: alert,\n        confirm: confirm,\n        close: close\n      };\n    };\n\n    var displayNotification = function (editor, message) {\n      editor.notificationManager.open({\n        type: 'error',\n        text: message\n      });\n    };\n    var displayError = function (editor, message) {\n      if (editor._skinLoaded) {\n        displayNotification(editor, message);\n      } else {\n        editor.on('SkinLoaded', function () {\n          displayNotification(editor, message);\n        });\n      }\n    };\n    var uploadError = function (editor, message) {\n      displayError(editor, I18n.translate([\n        'Failed to upload image: {0}',\n        message\n      ]));\n    };\n    var logError = function (editor, errorType, msg) {\n      fireError(editor, errorType, { message: msg });\n      console.error(msg);\n    };\n    var createLoadError = function (type, url, name) {\n      return name ? 'Failed to load ' + type + ': ' + name + ' from url ' + url : 'Failed to load ' + type + ' url: ' + url;\n    };\n    var pluginLoadError = function (editor, url, name) {\n      logError(editor, 'PluginLoadError', createLoadError('plugin', url, name));\n    };\n    var iconsLoadError = function (editor, url, name) {\n      logError(editor, 'IconsLoadError', createLoadError('icons', url, name));\n    };\n    var languageLoadError = function (editor, url, name) {\n      logError(editor, 'LanguageLoadError', createLoadError('language', url, name));\n    };\n    var pluginInitError = function (editor, name, err) {\n      var message = I18n.translate([\n        'Failed to initialize plugin: {0}',\n        name\n      ]);\n      fireError(editor, 'PluginLoadError', { message: message });\n      initError(message, err);\n      displayError(editor, message);\n    };\n    var initError = function (message) {\n      var x = [];\n      for (var _i = 1; _i < arguments.length; _i++) {\n        x[_i - 1] = arguments[_i];\n      }\n      var console = window.console;\n      if (console) {\n        if (console.error) {\n          console.error.apply(console, __spreadArray([message], x));\n        } else {\n          console.log.apply(console, __spreadArray([message], x));\n        }\n      }\n    };\n\n    var isContentCssSkinName = function (url) {\n      return /^[a-z0-9\\-]+$/i.test(url);\n    };\n    var getContentCssUrls = function (editor) {\n      return transformToUrls(editor, getContentCss(editor));\n    };\n    var getFontCssUrls = function (editor) {\n      return transformToUrls(editor, getFontCss(editor));\n    };\n    var transformToUrls = function (editor, cssLinks) {\n      var skinUrl = editor.editorManager.baseURL + '/skins/content';\n      var suffix = editor.editorManager.suffix;\n      var contentCssFile = 'content' + suffix + '.css';\n      var inline = editor.inline === true;\n      return map$3(cssLinks, function (url) {\n        if (isContentCssSkinName(url) && !inline) {\n          return skinUrl + '/' + url + '/' + contentCssFile;\n        } else {\n          return editor.documentBaseURI.toAbsolute(url);\n        }\n      });\n    };\n    var appendContentCssFromSettings = function (editor) {\n      editor.contentCSS = editor.contentCSS.concat(getContentCssUrls(editor), getFontCssUrls(editor));\n    };\n\n    var UploadStatus = function () {\n      var PENDING = 1, UPLOADED = 2;\n      var blobUriStatuses = {};\n      var createStatus = function (status, resultUri) {\n        return {\n          status: status,\n          resultUri: resultUri\n        };\n      };\n      var hasBlobUri = function (blobUri) {\n        return blobUri in blobUriStatuses;\n      };\n      var getResultUri = function (blobUri) {\n        var result = blobUriStatuses[blobUri];\n        return result ? result.resultUri : null;\n      };\n      var isPending = function (blobUri) {\n        return hasBlobUri(blobUri) ? blobUriStatuses[blobUri].status === PENDING : false;\n      };\n      var isUploaded = function (blobUri) {\n        return hasBlobUri(blobUri) ? blobUriStatuses[blobUri].status === UPLOADED : false;\n      };\n      var markPending = function (blobUri) {\n        blobUriStatuses[blobUri] = createStatus(PENDING, null);\n      };\n      var markUploaded = function (blobUri, resultUri) {\n        blobUriStatuses[blobUri] = createStatus(UPLOADED, resultUri);\n      };\n      var removeFailed = function (blobUri) {\n        delete blobUriStatuses[blobUri];\n      };\n      var destroy = function () {\n        blobUriStatuses = {};\n      };\n      return {\n        hasBlobUri: hasBlobUri,\n        getResultUri: getResultUri,\n        isPending: isPending,\n        isUploaded: isUploaded,\n        markPending: markPending,\n        markUploaded: markUploaded,\n        removeFailed: removeFailed,\n        destroy: destroy\n      };\n    };\n\n    var count = 0;\n    var seed = function () {\n      var rnd = function () {\n        return Math.round(Math.random() * 4294967295).toString(36);\n      };\n      var now = new Date().getTime();\n      return 's' + now.toString(36) + rnd() + rnd() + rnd();\n    };\n    var uuid = function (prefix) {\n      return prefix + count++ + seed();\n    };\n\n    var BlobCache = function () {\n      var cache = [];\n      var mimeToExt = function (mime) {\n        var mimes = {\n          'image/jpeg': 'jpg',\n          'image/jpg': 'jpg',\n          'image/gif': 'gif',\n          'image/png': 'png',\n          'image/apng': 'apng',\n          'image/avif': 'avif',\n          'image/svg+xml': 'svg',\n          'image/webp': 'webp',\n          'image/bmp': 'bmp',\n          'image/tiff': 'tiff'\n        };\n        return mimes[mime.toLowerCase()] || 'dat';\n      };\n      var create = function (o, blob, base64, name, filename) {\n        if (isString$1(o)) {\n          var id = o;\n          return toBlobInfo({\n            id: id,\n            name: name,\n            filename: filename,\n            blob: blob,\n            base64: base64\n          });\n        } else if (isObject(o)) {\n          return toBlobInfo(o);\n        } else {\n          throw new Error('Unknown input type');\n        }\n      };\n      var toBlobInfo = function (o) {\n        if (!o.blob || !o.base64) {\n          throw new Error('blob and base64 representations of the image are required for BlobInfo to be created');\n        }\n        var id = o.id || uuid('blobid');\n        var name = o.name || id;\n        var blob = o.blob;\n        return {\n          id: constant(id),\n          name: constant(name),\n          filename: constant(o.filename || name + '.' + mimeToExt(blob.type)),\n          blob: constant(blob),\n          base64: constant(o.base64),\n          blobUri: constant(o.blobUri || URL.createObjectURL(blob)),\n          uri: constant(o.uri)\n        };\n      };\n      var add = function (blobInfo) {\n        if (!get(blobInfo.id())) {\n          cache.push(blobInfo);\n        }\n      };\n      var findFirst = function (predicate) {\n        return find$3(cache, predicate).getOrUndefined();\n      };\n      var get = function (id) {\n        return findFirst(function (cachedBlobInfo) {\n          return cachedBlobInfo.id() === id;\n        });\n      };\n      var getByUri = function (blobUri) {\n        return findFirst(function (blobInfo) {\n          return blobInfo.blobUri() === blobUri;\n        });\n      };\n      var getByData = function (base64, type) {\n        return findFirst(function (blobInfo) {\n          return blobInfo.base64() === base64 && blobInfo.blob().type === type;\n        });\n      };\n      var removeByUri = function (blobUri) {\n        cache = filter$4(cache, function (blobInfo) {\n          if (blobInfo.blobUri() === blobUri) {\n            URL.revokeObjectURL(blobInfo.blobUri());\n            return false;\n          }\n          return true;\n        });\n      };\n      var destroy = function () {\n        each$k(cache, function (cachedBlobInfo) {\n          URL.revokeObjectURL(cachedBlobInfo.blobUri());\n        });\n        cache = [];\n      };\n      return {\n        create: create,\n        add: add,\n        get: get,\n        getByUri: getByUri,\n        getByData: getByData,\n        findFirst: findFirst,\n        removeByUri: removeByUri,\n        destroy: destroy\n      };\n    };\n\n    var Uploader = function (uploadStatus, settings) {\n      var pendingPromises = {};\n      var pathJoin = function (path1, path2) {\n        if (path1) {\n          return path1.replace(/\\/$/, '') + '/' + path2.replace(/^\\//, '');\n        }\n        return path2;\n      };\n      var defaultHandler = function (blobInfo, success, failure, progress) {\n        var xhr = new XMLHttpRequest();\n        xhr.open('POST', settings.url);\n        xhr.withCredentials = settings.credentials;\n        xhr.upload.onprogress = function (e) {\n          progress(e.loaded / e.total * 100);\n        };\n        xhr.onerror = function () {\n          failure('Image upload failed due to a XHR Transport error. Code: ' + xhr.status);\n        };\n        xhr.onload = function () {\n          if (xhr.status < 200 || xhr.status >= 300) {\n            failure('HTTP Error: ' + xhr.status);\n            return;\n          }\n          var json = JSON.parse(xhr.responseText);\n          if (!json || typeof json.location !== 'string') {\n            failure('Invalid JSON: ' + xhr.responseText);\n            return;\n          }\n          success(pathJoin(settings.basePath, json.location));\n        };\n        var formData = new FormData();\n        formData.append('file', blobInfo.blob(), blobInfo.filename());\n        xhr.send(formData);\n      };\n      var noUpload = function () {\n        return new promiseObj(function (resolve) {\n          resolve([]);\n        });\n      };\n      var handlerSuccess = function (blobInfo, url) {\n        return {\n          url: url,\n          blobInfo: blobInfo,\n          status: true\n        };\n      };\n      var handlerFailure = function (blobInfo, message, options) {\n        return {\n          url: '',\n          blobInfo: blobInfo,\n          status: false,\n          error: {\n            message: message,\n            options: options\n          }\n        };\n      };\n      var resolvePending = function (blobUri, result) {\n        Tools.each(pendingPromises[blobUri], function (resolve) {\n          resolve(result);\n        });\n        delete pendingPromises[blobUri];\n      };\n      var uploadBlobInfo = function (blobInfo, handler, openNotification) {\n        uploadStatus.markPending(blobInfo.blobUri());\n        return new promiseObj(function (resolve) {\n          var notification, progress;\n          try {\n            var closeNotification_1 = function () {\n              if (notification) {\n                notification.close();\n                progress = noop;\n              }\n            };\n            var success = function (url) {\n              closeNotification_1();\n              uploadStatus.markUploaded(blobInfo.blobUri(), url);\n              resolvePending(blobInfo.blobUri(), handlerSuccess(blobInfo, url));\n              resolve(handlerSuccess(blobInfo, url));\n            };\n            var failure = function (error, options) {\n              var failureOptions = options ? options : {};\n              closeNotification_1();\n              uploadStatus.removeFailed(blobInfo.blobUri());\n              resolvePending(blobInfo.blobUri(), handlerFailure(blobInfo, error, failureOptions));\n              resolve(handlerFailure(blobInfo, error, failureOptions));\n            };\n            progress = function (percent) {\n              if (percent < 0 || percent > 100) {\n                return;\n              }\n              Optional.from(notification).orThunk(function () {\n                return Optional.from(openNotification).map(apply);\n              }).each(function (n) {\n                notification = n;\n                n.progressBar.value(percent);\n              });\n            };\n            handler(blobInfo, success, failure, progress);\n          } catch (ex) {\n            resolve(handlerFailure(blobInfo, ex.message, {}));\n          }\n        });\n      };\n      var isDefaultHandler = function (handler) {\n        return handler === defaultHandler;\n      };\n      var pendingUploadBlobInfo = function (blobInfo) {\n        var blobUri = blobInfo.blobUri();\n        return new promiseObj(function (resolve) {\n          pendingPromises[blobUri] = pendingPromises[blobUri] || [];\n          pendingPromises[blobUri].push(resolve);\n        });\n      };\n      var uploadBlobs = function (blobInfos, openNotification) {\n        blobInfos = Tools.grep(blobInfos, function (blobInfo) {\n          return !uploadStatus.isUploaded(blobInfo.blobUri());\n        });\n        return promiseObj.all(Tools.map(blobInfos, function (blobInfo) {\n          return uploadStatus.isPending(blobInfo.blobUri()) ? pendingUploadBlobInfo(blobInfo) : uploadBlobInfo(blobInfo, settings.handler, openNotification);\n        }));\n      };\n      var upload = function (blobInfos, openNotification) {\n        return !settings.url && isDefaultHandler(settings.handler) ? noUpload() : uploadBlobs(blobInfos, openNotification);\n      };\n      if (isFunction(settings.handler) === false) {\n        settings.handler = defaultHandler;\n      }\n      return { upload: upload };\n    };\n\n    var openNotification = function (editor) {\n      return function () {\n        return editor.notificationManager.open({\n          text: editor.translate('Image uploading...'),\n          type: 'info',\n          timeout: -1,\n          progressBar: true\n        });\n      };\n    };\n    var createUploader = function (editor, uploadStatus) {\n      return Uploader(uploadStatus, {\n        url: getImageUploadUrl(editor),\n        basePath: getImageUploadBasePath(editor),\n        credentials: getImagesUploadCredentials(editor),\n        handler: getImagesUploadHandler(editor)\n      });\n    };\n    var ImageUploader = function (editor) {\n      var uploadStatus = UploadStatus();\n      var uploader = createUploader(editor, uploadStatus);\n      return {\n        upload: function (blobInfos, showNotification) {\n          if (showNotification === void 0) {\n            showNotification = true;\n          }\n          return uploader.upload(blobInfos, showNotification ? openNotification(editor) : undefined);\n        }\n      };\n    };\n\n    var UploadChangeHandler = function (editor) {\n      var lastChangedLevel = Cell(null);\n      editor.on('change AddUndo', function (e) {\n        lastChangedLevel.set(__assign({}, e.level));\n      });\n      var fireIfChanged = function () {\n        var data = editor.undoManager.data;\n        last$2(data).filter(function (level) {\n          return !isEq$1(lastChangedLevel.get(), level);\n        }).each(function (level) {\n          editor.setDirty(true);\n          editor.fire('change', {\n            level: level,\n            lastLevel: get$a(data, data.length - 2).getOrNull()\n          });\n        });\n      };\n      return { fireIfChanged: fireIfChanged };\n    };\n    var EditorUpload = function (editor) {\n      var blobCache = BlobCache();\n      var uploader, imageScanner;\n      var uploadStatus = UploadStatus();\n      var urlFilters = [];\n      var changeHandler = UploadChangeHandler(editor);\n      var aliveGuard = function (callback) {\n        return function (result) {\n          if (editor.selection) {\n            return callback(result);\n          }\n          return [];\n        };\n      };\n      var cacheInvalidator = function (url) {\n        return url + (url.indexOf('?') === -1 ? '?' : '&') + new Date().getTime();\n      };\n      var replaceString = function (content, search, replace) {\n        var index = 0;\n        do {\n          index = content.indexOf(search, index);\n          if (index !== -1) {\n            content = content.substring(0, index) + replace + content.substr(index + search.length);\n            index += replace.length - search.length + 1;\n          }\n        } while (index !== -1);\n        return content;\n      };\n      var replaceImageUrl = function (content, targetUrl, replacementUrl) {\n        var replacementString = 'src=\"' + replacementUrl + '\"' + (replacementUrl === Env.transparentSrc ? ' data-mce-placeholder=\"1\"' : '');\n        content = replaceString(content, 'src=\"' + targetUrl + '\"', replacementString);\n        content = replaceString(content, 'data-mce-src=\"' + targetUrl + '\"', 'data-mce-src=\"' + replacementUrl + '\"');\n        return content;\n      };\n      var replaceUrlInUndoStack = function (targetUrl, replacementUrl) {\n        each$k(editor.undoManager.data, function (level) {\n          if (level.type === 'fragmented') {\n            level.fragments = map$3(level.fragments, function (fragment) {\n              return replaceImageUrl(fragment, targetUrl, replacementUrl);\n            });\n          } else {\n            level.content = replaceImageUrl(level.content, targetUrl, replacementUrl);\n          }\n        });\n      };\n      var replaceImageUriInView = function (image, resultUri) {\n        var src = editor.convertURL(resultUri, 'src');\n        replaceUrlInUndoStack(image.src, resultUri);\n        editor.$(image).attr({\n          'src': shouldReuseFileName(editor) ? cacheInvalidator(resultUri) : resultUri,\n          'data-mce-src': src\n        });\n      };\n      var uploadImages = function (callback) {\n        if (!uploader) {\n          uploader = createUploader(editor, uploadStatus);\n        }\n        return scanForImages().then(aliveGuard(function (imageInfos) {\n          var blobInfos = map$3(imageInfos, function (imageInfo) {\n            return imageInfo.blobInfo;\n          });\n          return uploader.upload(blobInfos, openNotification(editor)).then(aliveGuard(function (result) {\n            var imagesToRemove = [];\n            var filteredResult = map$3(result, function (uploadInfo, index) {\n              var blobInfo = imageInfos[index].blobInfo;\n              var image = imageInfos[index].image;\n              if (uploadInfo.status && shouldReplaceBlobUris(editor)) {\n                blobCache.removeByUri(image.src);\n                if (isRtc(editor)) ; else {\n                  replaceImageUriInView(image, uploadInfo.url);\n                }\n              } else if (uploadInfo.error) {\n                if (uploadInfo.error.options.remove) {\n                  replaceUrlInUndoStack(image.getAttribute('src'), Env.transparentSrc);\n                  imagesToRemove.push(image);\n                }\n                uploadError(editor, uploadInfo.error.message);\n              }\n              return {\n                element: image,\n                status: uploadInfo.status,\n                uploadUri: uploadInfo.url,\n                blobInfo: blobInfo\n              };\n            });\n            if (filteredResult.length > 0) {\n              changeHandler.fireIfChanged();\n            }\n            if (imagesToRemove.length > 0) {\n              if (isRtc(editor)) {\n                console.error('Removing images on failed uploads is currently unsupported for RTC');\n              } else {\n                editor.undoManager.transact(function () {\n                  each$k(imagesToRemove, function (element) {\n                    editor.dom.remove(element);\n                    blobCache.removeByUri(element.src);\n                  });\n                });\n              }\n            }\n            if (callback) {\n              callback(filteredResult);\n            }\n            return filteredResult;\n          }));\n        }));\n      };\n      var uploadImagesAuto = function (callback) {\n        if (isAutomaticUploadsEnabled(editor)) {\n          return uploadImages(callback);\n        }\n      };\n      var isValidDataUriImage = function (imgElm) {\n        if (forall(urlFilters, function (filter) {\n            return filter(imgElm);\n          }) === false) {\n          return false;\n        }\n        if (imgElm.getAttribute('src').indexOf('data:') === 0) {\n          var dataImgFilter = getImagesDataImgFilter(editor);\n          return dataImgFilter(imgElm);\n        }\n        return true;\n      };\n      var addFilter = function (filter) {\n        urlFilters.push(filter);\n      };\n      var scanForImages = function () {\n        if (!imageScanner) {\n          imageScanner = ImageScanner(uploadStatus, blobCache);\n        }\n        return imageScanner.findAll(editor.getBody(), isValidDataUriImage).then(aliveGuard(function (result) {\n          result = filter$4(result, function (resultItem) {\n            if (typeof resultItem === 'string') {\n              displayError(editor, resultItem);\n              return false;\n            }\n            return true;\n          });\n          if (isRtc(editor)) ; else {\n            each$k(result, function (resultItem) {\n              replaceUrlInUndoStack(resultItem.image.src, resultItem.blobInfo.blobUri());\n              resultItem.image.src = resultItem.blobInfo.blobUri();\n              resultItem.image.removeAttribute('data-mce-src');\n            });\n          }\n          return result;\n        }));\n      };\n      var destroy = function () {\n        blobCache.destroy();\n        uploadStatus.destroy();\n        imageScanner = uploader = null;\n      };\n      var replaceBlobUris = function (content) {\n        return content.replace(/src=\"(blob:[^\"]+)\"/g, function (match, blobUri) {\n          var resultUri = uploadStatus.getResultUri(blobUri);\n          if (resultUri) {\n            return 'src=\"' + resultUri + '\"';\n          }\n          var blobInfo = blobCache.getByUri(blobUri);\n          if (!blobInfo) {\n            blobInfo = foldl(editor.editorManager.get(), function (result, editor) {\n              return result || editor.editorUpload && editor.editorUpload.blobCache.getByUri(blobUri);\n            }, null);\n          }\n          if (blobInfo) {\n            var blob = blobInfo.blob();\n            return 'src=\"data:' + blob.type + ';base64,' + blobInfo.base64() + '\"';\n          }\n          return match;\n        });\n      };\n      editor.on('SetContent', function () {\n        if (isAutomaticUploadsEnabled(editor)) {\n          uploadImagesAuto();\n        } else {\n          scanForImages();\n        }\n      });\n      editor.on('RawSaveContent', function (e) {\n        e.content = replaceBlobUris(e.content);\n      });\n      editor.on('GetContent', function (e) {\n        if (e.source_view || e.format === 'raw' || e.format === 'tree') {\n          return;\n        }\n        e.content = replaceBlobUris(e.content);\n      });\n      editor.on('PostRender', function () {\n        editor.parser.addNodeFilter('img', function (images) {\n          each$k(images, function (img) {\n            var src = img.attr('src');\n            if (blobCache.getByUri(src)) {\n              return;\n            }\n            var resultUri = uploadStatus.getResultUri(src);\n            if (resultUri) {\n              img.attr('src', resultUri);\n            }\n          });\n        });\n      });\n      return {\n        blobCache: blobCache,\n        addFilter: addFilter,\n        uploadImages: uploadImages,\n        uploadImagesAuto: uploadImagesAuto,\n        scanForImages: scanForImages,\n        destroy: destroy\n      };\n    };\n\n    var get = function (dom) {\n      var formats = {\n        valigntop: [{\n            selector: 'td,th',\n            styles: { verticalAlign: 'top' }\n          }],\n        valignmiddle: [{\n            selector: 'td,th',\n            styles: { verticalAlign: 'middle' }\n          }],\n        valignbottom: [{\n            selector: 'td,th',\n            styles: { verticalAlign: 'bottom' }\n          }],\n        alignleft: [\n          {\n            selector: 'figure.image',\n            collapsed: false,\n            classes: 'align-left',\n            ceFalseOverride: true,\n            preview: 'font-family font-size'\n          },\n          {\n            selector: 'figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li',\n            styles: { textAlign: 'left' },\n            inherit: false,\n            preview: false,\n            defaultBlock: 'div'\n          },\n          {\n            selector: 'img,table,audio,video',\n            collapsed: false,\n            styles: { float: 'left' },\n            preview: 'font-family font-size'\n          }\n        ],\n        aligncenter: [\n          {\n            selector: 'figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li',\n            styles: { textAlign: 'center' },\n            inherit: false,\n            preview: 'font-family font-size',\n            defaultBlock: 'div'\n          },\n          {\n            selector: 'figure.image',\n            collapsed: false,\n            classes: 'align-center',\n            ceFalseOverride: true,\n            preview: 'font-family font-size'\n          },\n          {\n            selector: 'img,audio,video',\n            collapsed: false,\n            styles: {\n              display: 'block',\n              marginLeft: 'auto',\n              marginRight: 'auto'\n            },\n            preview: false\n          },\n          {\n            selector: 'table',\n            collapsed: false,\n            styles: {\n              marginLeft: 'auto',\n              marginRight: 'auto'\n            },\n            preview: 'font-family font-size'\n          }\n        ],\n        alignright: [\n          {\n            selector: 'figure.image',\n            collapsed: false,\n            classes: 'align-right',\n            ceFalseOverride: true,\n            preview: 'font-family font-size'\n          },\n          {\n            selector: 'figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li',\n            styles: { textAlign: 'right' },\n            inherit: false,\n            preview: 'font-family font-size',\n            defaultBlock: 'div'\n          },\n          {\n            selector: 'img,table,audio,video',\n            collapsed: false,\n            styles: { float: 'right' },\n            preview: 'font-family font-size'\n          }\n        ],\n        alignjustify: [{\n            selector: 'figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li',\n            styles: { textAlign: 'justify' },\n            inherit: false,\n            defaultBlock: 'div',\n            preview: 'font-family font-size'\n          }],\n        bold: [\n          {\n            inline: 'strong',\n            remove: 'all',\n            preserve_attributes: [\n              'class',\n              'style'\n            ]\n          },\n          {\n            inline: 'span',\n            styles: { fontWeight: 'bold' }\n          },\n          {\n            inline: 'b',\n            remove: 'all',\n            preserve_attributes: [\n              'class',\n              'style'\n            ]\n          }\n        ],\n        italic: [\n          {\n            inline: 'em',\n            remove: 'all',\n            preserve_attributes: [\n              'class',\n              'style'\n            ]\n          },\n          {\n            inline: 'span',\n            styles: { fontStyle: 'italic' }\n          },\n          {\n            inline: 'i',\n            remove: 'all',\n            preserve_attributes: [\n              'class',\n              'style'\n            ]\n          }\n        ],\n        underline: [\n          {\n            inline: 'span',\n            styles: { textDecoration: 'underline' },\n            exact: true\n          },\n          {\n            inline: 'u',\n            remove: 'all',\n            preserve_attributes: [\n              'class',\n              'style'\n            ]\n          }\n        ],\n        strikethrough: [\n          {\n            inline: 'span',\n            styles: { textDecoration: 'line-through' },\n            exact: true\n          },\n          {\n            inline: 'strike',\n            remove: 'all',\n            preserve_attributes: [\n              'class',\n              'style'\n            ]\n          },\n          {\n            inline: 's',\n            remove: 'all',\n            preserve_attributes: [\n              'class',\n              'style'\n            ]\n          }\n        ],\n        forecolor: {\n          inline: 'span',\n          styles: { color: '%value' },\n          links: true,\n          remove_similar: true,\n          clear_child_styles: true\n        },\n        hilitecolor: {\n          inline: 'span',\n          styles: { backgroundColor: '%value' },\n          links: true,\n          remove_similar: true,\n          clear_child_styles: true\n        },\n        fontname: {\n          inline: 'span',\n          toggle: false,\n          styles: { fontFamily: '%value' },\n          clear_child_styles: true\n        },\n        fontsize: {\n          inline: 'span',\n          toggle: false,\n          styles: { fontSize: '%value' },\n          clear_child_styles: true\n        },\n        lineheight: {\n          selector: 'h1,h2,h3,h4,h5,h6,p,li,td,th,div',\n          defaultBlock: 'p',\n          styles: { lineHeight: '%value' }\n        },\n        fontsize_class: {\n          inline: 'span',\n          attributes: { class: '%value' }\n        },\n        blockquote: {\n          block: 'blockquote',\n          wrapper: true,\n          remove: 'all'\n        },\n        subscript: { inline: 'sub' },\n        superscript: { inline: 'sup' },\n        code: { inline: 'code' },\n        link: {\n          inline: 'a',\n          selector: 'a',\n          remove: 'all',\n          split: true,\n          deep: true,\n          onmatch: function (node, _fmt, _itemName) {\n            return isElement$5(node) && node.hasAttribute('href');\n          },\n          onformat: function (elm, _fmt, vars) {\n            Tools.each(vars, function (value, key) {\n              dom.setAttrib(elm, key, value);\n            });\n          }\n        },\n        lang: {\n          inline: 'span',\n          clear_child_styles: true,\n          remove_similar: true,\n          attributes: {\n            'lang': '%value',\n            'data-mce-lang': function (vars) {\n              var _a;\n              return (_a = vars === null || vars === void 0 ? void 0 : vars.customValue) !== null && _a !== void 0 ? _a : null;\n            }\n          }\n        },\n        removeformat: [\n          {\n            selector: 'b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small',\n            remove: 'all',\n            split: true,\n            expand: false,\n            block_expand: true,\n            deep: true\n          },\n          {\n            selector: 'span',\n            attributes: [\n              'style',\n              'class'\n            ],\n            remove: 'empty',\n            split: true,\n            expand: false,\n            deep: true\n          },\n          {\n            selector: '*',\n            attributes: [\n              'style',\n              'class'\n            ],\n            split: false,\n            expand: false,\n            deep: true\n          }\n        ]\n      };\n      Tools.each('p h1 h2 h3 h4 h5 h6 div address pre dt dd samp'.split(/\\s/), function (name) {\n        formats[name] = {\n          block: name,\n          remove: 'all'\n        };\n      });\n      return formats;\n    };\n\n    var FormatRegistry = function (editor) {\n      var formats = {};\n      var get$1 = function (name) {\n        return isNonNullable(name) ? formats[name] : formats;\n      };\n      var has = function (name) {\n        return has$2(formats, name);\n      };\n      var register = function (name, format) {\n        if (name) {\n          if (!isString$1(name)) {\n            each$j(name, function (format, name) {\n              register(name, format);\n            });\n          } else {\n            if (!isArray$1(format)) {\n              format = [format];\n            }\n            each$k(format, function (format) {\n              if (isUndefined(format.deep)) {\n                format.deep = !isSelectorFormat(format);\n              }\n              if (isUndefined(format.split)) {\n                format.split = !isSelectorFormat(format) || isInlineFormat(format);\n              }\n              if (isUndefined(format.remove) && isSelectorFormat(format) && !isInlineFormat(format)) {\n                format.remove = 'none';\n              }\n              if (isSelectorFormat(format) && isInlineFormat(format)) {\n                format.mixed = true;\n                format.block_expand = true;\n              }\n              if (isString$1(format.classes)) {\n                format.classes = format.classes.split(/\\s+/);\n              }\n            });\n            formats[name] = format;\n          }\n        }\n      };\n      var unregister = function (name) {\n        if (name && formats[name]) {\n          delete formats[name];\n        }\n        return formats;\n      };\n      register(get(editor.dom));\n      register(getFormats(editor));\n      return {\n        get: get$1,\n        has: has,\n        register: register,\n        unregister: unregister\n      };\n    };\n\n    var each$6 = Tools.each;\n    var dom = DOMUtils.DOM;\n    var parsedSelectorToHtml = function (ancestry, editor) {\n      var elm, item, fragment;\n      var schema = editor && editor.schema || Schema({});\n      var decorate = function (elm, item) {\n        if (item.classes.length) {\n          dom.addClass(elm, item.classes.join(' '));\n        }\n        dom.setAttribs(elm, item.attrs);\n      };\n      var createElement = function (sItem) {\n        item = typeof sItem === 'string' ? {\n          name: sItem,\n          classes: [],\n          attrs: {}\n        } : sItem;\n        var elm = dom.create(item.name);\n        decorate(elm, item);\n        return elm;\n      };\n      var getRequiredParent = function (elm, candidate) {\n        var name = typeof elm !== 'string' ? elm.nodeName.toLowerCase() : elm;\n        var elmRule = schema.getElementRule(name);\n        var parentsRequired = elmRule && elmRule.parentsRequired;\n        if (parentsRequired && parentsRequired.length) {\n          return candidate && Tools.inArray(parentsRequired, candidate) !== -1 ? candidate : parentsRequired[0];\n        } else {\n          return false;\n        }\n      };\n      var wrapInHtml = function (elm, ancestry, siblings) {\n        var parent, parentCandidate;\n        var ancestor = ancestry.length > 0 && ancestry[0];\n        var ancestorName = ancestor && ancestor.name;\n        var parentRequired = getRequiredParent(elm, ancestorName);\n        if (parentRequired) {\n          if (ancestorName === parentRequired) {\n            parentCandidate = ancestry[0];\n            ancestry = ancestry.slice(1);\n          } else {\n            parentCandidate = parentRequired;\n          }\n        } else if (ancestor) {\n          parentCandidate = ancestry[0];\n          ancestry = ancestry.slice(1);\n        } else if (!siblings) {\n          return elm;\n        }\n        if (parentCandidate) {\n          parent = createElement(parentCandidate);\n          parent.appendChild(elm);\n        }\n        if (siblings) {\n          if (!parent) {\n            parent = dom.create('div');\n            parent.appendChild(elm);\n          }\n          Tools.each(siblings, function (sibling) {\n            var siblingElm = createElement(sibling);\n            parent.insertBefore(siblingElm, elm);\n          });\n        }\n        return wrapInHtml(parent, ancestry, parentCandidate && parentCandidate.siblings);\n      };\n      if (ancestry && ancestry.length) {\n        item = ancestry[0];\n        elm = createElement(item);\n        fragment = dom.create('div');\n        fragment.appendChild(wrapInHtml(elm, ancestry.slice(1), item.siblings));\n        return fragment;\n      } else {\n        return '';\n      }\n    };\n    var parseSelectorItem = function (item) {\n      var tagName;\n      var obj = {\n        classes: [],\n        attrs: {}\n      };\n      item = obj.selector = Tools.trim(item);\n      if (item !== '*') {\n        tagName = item.replace(/(?:([#\\.]|::?)([\\w\\-]+)|(\\[)([^\\]]+)\\]?)/g, function ($0, $1, $2, $3, $4) {\n          switch ($1) {\n          case '#':\n            obj.attrs.id = $2;\n            break;\n          case '.':\n            obj.classes.push($2);\n            break;\n          case ':':\n            if (Tools.inArray('checked disabled enabled read-only required'.split(' '), $2) !== -1) {\n              obj.attrs[$2] = $2;\n            }\n            break;\n          }\n          if ($3 === '[') {\n            var m = $4.match(/([\\w\\-]+)(?:\\=\\\"([^\\\"]+))?/);\n            if (m) {\n              obj.attrs[m[1]] = m[2];\n            }\n          }\n          return '';\n        });\n      }\n      obj.name = tagName || 'div';\n      return obj;\n    };\n    var parseSelector = function (selector) {\n      if (!selector || typeof selector !== 'string') {\n        return [];\n      }\n      selector = selector.split(/\\s*,\\s*/)[0];\n      selector = selector.replace(/\\s*(~\\+|~|\\+|>)\\s*/g, '$1');\n      return Tools.map(selector.split(/(?:>|\\s+(?![^\\[\\]]+\\]))/), function (item) {\n        var siblings = Tools.map(item.split(/(?:~\\+|~|\\+)/), parseSelectorItem);\n        var obj = siblings.pop();\n        if (siblings.length) {\n          obj.siblings = siblings;\n        }\n        return obj;\n      }).reverse();\n    };\n    var getCssText = function (editor, format) {\n      var name, previewFrag;\n      var previewCss = '', parentFontSize;\n      var previewStyles = getPreviewStyles(editor);\n      if (previewStyles === '') {\n        return '';\n      }\n      var removeVars = function (val) {\n        return val.replace(/%(\\w+)/g, '');\n      };\n      if (typeof format === 'string') {\n        format = editor.formatter.get(format);\n        if (!format) {\n          return;\n        }\n        format = format[0];\n      }\n      if ('preview' in format) {\n        var previewOpt = get$9(format, 'preview');\n        if (is$1(previewOpt, false)) {\n          return '';\n        } else {\n          previewStyles = previewOpt.getOr(previewStyles);\n        }\n      }\n      name = format.block || format.inline || 'span';\n      var items = parseSelector(format.selector);\n      if (items.length) {\n        if (!items[0].name) {\n          items[0].name = name;\n        }\n        name = format.selector;\n        previewFrag = parsedSelectorToHtml(items, editor);\n      } else {\n        previewFrag = parsedSelectorToHtml([name], editor);\n      }\n      var previewElm = dom.select(name, previewFrag)[0] || previewFrag.firstChild;\n      each$6(format.styles, function (value, name) {\n        var newValue = removeVars(value);\n        if (newValue) {\n          dom.setStyle(previewElm, name, newValue);\n        }\n      });\n      each$6(format.attributes, function (value, name) {\n        var newValue = removeVars(value);\n        if (newValue) {\n          dom.setAttrib(previewElm, name, newValue);\n        }\n      });\n      each$6(format.classes, function (value) {\n        var newValue = removeVars(value);\n        if (!dom.hasClass(previewElm, newValue)) {\n          dom.addClass(previewElm, newValue);\n        }\n      });\n      editor.fire('PreviewFormats');\n      dom.setStyles(previewFrag, {\n        position: 'absolute',\n        left: -65535\n      });\n      editor.getBody().appendChild(previewFrag);\n      parentFontSize = dom.getStyle(editor.getBody(), 'fontSize', true);\n      parentFontSize = /px$/.test(parentFontSize) ? parseInt(parentFontSize, 10) : 0;\n      each$6(previewStyles.split(' '), function (name) {\n        var value = dom.getStyle(previewElm, name, true);\n        if (name === 'background-color' && /transparent|rgba\\s*\\([^)]+,\\s*0\\)/.test(value)) {\n          value = dom.getStyle(editor.getBody(), name, true);\n          if (dom.toHex(value).toLowerCase() === '#ffffff') {\n            return;\n          }\n        }\n        if (name === 'color') {\n          if (dom.toHex(value).toLowerCase() === '#000000') {\n            return;\n          }\n        }\n        if (name === 'font-size') {\n          if (/em|%$/.test(value)) {\n            if (parentFontSize === 0) {\n              return;\n            }\n            var numValue = parseFloat(value) / (/%$/.test(value) ? 100 : 1);\n            value = numValue * parentFontSize + 'px';\n          }\n        }\n        if (name === 'border' && value) {\n          previewCss += 'padding:0 2px;';\n        }\n        previewCss += name + ':' + value + ';';\n      });\n      editor.fire('AfterPreviewFormats');\n      dom.remove(previewFrag);\n      return previewCss;\n    };\n\n    var setup$h = function (editor) {\n      editor.addShortcut('meta+b', '', 'Bold');\n      editor.addShortcut('meta+i', '', 'Italic');\n      editor.addShortcut('meta+u', '', 'Underline');\n      for (var i = 1; i <= 6; i++) {\n        editor.addShortcut('access+' + i, '', [\n          'FormatBlock',\n          false,\n          'h' + i\n        ]);\n      }\n      editor.addShortcut('access+7', '', [\n        'FormatBlock',\n        false,\n        'p'\n      ]);\n      editor.addShortcut('access+8', '', [\n        'FormatBlock',\n        false,\n        'div'\n      ]);\n      editor.addShortcut('access+9', '', [\n        'FormatBlock',\n        false,\n        'address'\n      ]);\n    };\n\n    var Formatter = function (editor) {\n      var formats = FormatRegistry(editor);\n      var formatChangeState = Cell(null);\n      setup$h(editor);\n      setup$k(editor);\n      return {\n        get: formats.get,\n        has: formats.has,\n        register: formats.register,\n        unregister: formats.unregister,\n        apply: function (name, vars, node) {\n          applyFormat(editor, name, vars, node);\n        },\n        remove: function (name, vars, node, similar) {\n          removeFormat(editor, name, vars, node, similar);\n        },\n        toggle: function (name, vars, node) {\n          toggleFormat(editor, name, vars, node);\n        },\n        match: function (name, vars, node, similar) {\n          return matchFormat(editor, name, vars, node, similar);\n        },\n        closest: function (names) {\n          return closestFormat(editor, names);\n        },\n        matchAll: function (names, vars) {\n          return matchAllFormats(editor, names, vars);\n        },\n        matchNode: function (node, name, vars, similar) {\n          return matchNodeFormat(editor, node, name, vars, similar);\n        },\n        canApply: function (name) {\n          return canApplyFormat(editor, name);\n        },\n        formatChanged: function (formats, callback, similar, vars) {\n          return formatChanged(editor, formatChangeState, formats, callback, similar, vars);\n        },\n        getCssText: curry(getCssText, editor)\n      };\n    };\n\n    var shouldIgnoreCommand = function (cmd) {\n      switch (cmd.toLowerCase()) {\n      case 'undo':\n      case 'redo':\n      case 'mcerepaint':\n      case 'mcefocus':\n        return true;\n      default:\n        return false;\n      }\n    };\n    var registerEvents = function (editor, undoManager, locks) {\n      var isFirstTypedCharacter = Cell(false);\n      var addNonTypingUndoLevel = function (e) {\n        setTyping(undoManager, false, locks);\n        undoManager.add({}, e);\n      };\n      editor.on('init', function () {\n        undoManager.add();\n      });\n      editor.on('BeforeExecCommand', function (e) {\n        var cmd = e.command;\n        if (!shouldIgnoreCommand(cmd)) {\n          endTyping(undoManager, locks);\n          undoManager.beforeChange();\n        }\n      });\n      editor.on('ExecCommand', function (e) {\n        var cmd = e.command;\n        if (!shouldIgnoreCommand(cmd)) {\n          addNonTypingUndoLevel(e);\n        }\n      });\n      editor.on('ObjectResizeStart cut', function () {\n        undoManager.beforeChange();\n      });\n      editor.on('SaveContent ObjectResized blur', addNonTypingUndoLevel);\n      editor.on('dragend', addNonTypingUndoLevel);\n      editor.on('keyup', function (e) {\n        var keyCode = e.keyCode;\n        if (e.isDefaultPrevented()) {\n          return;\n        }\n        if (keyCode >= 33 && keyCode <= 36 || keyCode >= 37 && keyCode <= 40 || keyCode === 45 || e.ctrlKey) {\n          addNonTypingUndoLevel();\n          editor.nodeChanged();\n        }\n        if (keyCode === 46 || keyCode === 8) {\n          editor.nodeChanged();\n        }\n        if (isFirstTypedCharacter.get() && undoManager.typing && isEq$1(createFromEditor(editor), undoManager.data[0]) === false) {\n          if (editor.isDirty() === false) {\n            editor.setDirty(true);\n            editor.fire('change', {\n              level: undoManager.data[0],\n              lastLevel: null\n            });\n          }\n          editor.fire('TypingUndo');\n          isFirstTypedCharacter.set(false);\n          editor.nodeChanged();\n        }\n      });\n      editor.on('keydown', function (e) {\n        var keyCode = e.keyCode;\n        if (e.isDefaultPrevented()) {\n          return;\n        }\n        if (keyCode >= 33 && keyCode <= 36 || keyCode >= 37 && keyCode <= 40 || keyCode === 45) {\n          if (undoManager.typing) {\n            addNonTypingUndoLevel(e);\n          }\n          return;\n        }\n        var modKey = e.ctrlKey && !e.altKey || e.metaKey;\n        if ((keyCode < 16 || keyCode > 20) && keyCode !== 224 && keyCode !== 91 && !undoManager.typing && !modKey) {\n          undoManager.beforeChange();\n          setTyping(undoManager, true, locks);\n          undoManager.add({}, e);\n          isFirstTypedCharacter.set(true);\n        }\n      });\n      editor.on('mousedown', function (e) {\n        if (undoManager.typing) {\n          addNonTypingUndoLevel(e);\n        }\n      });\n      var isInsertReplacementText = function (event) {\n        return event.inputType === 'insertReplacementText';\n      };\n      var isInsertTextDataNull = function (event) {\n        return event.inputType === 'insertText' && event.data === null;\n      };\n      var isInsertFromPasteOrDrop = function (event) {\n        return event.inputType === 'insertFromPaste' || event.inputType === 'insertFromDrop';\n      };\n      editor.on('input', function (e) {\n        if (e.inputType && (isInsertReplacementText(e) || isInsertTextDataNull(e) || isInsertFromPasteOrDrop(e))) {\n          addNonTypingUndoLevel(e);\n        }\n      });\n      editor.on('AddUndo Undo Redo ClearUndos', function (e) {\n        if (!e.isDefaultPrevented()) {\n          editor.nodeChanged();\n        }\n      });\n    };\n    var addKeyboardShortcuts = function (editor) {\n      editor.addShortcut('meta+z', '', 'Undo');\n      editor.addShortcut('meta+y,meta+shift+z', '', 'Redo');\n    };\n\n    var UndoManager = function (editor) {\n      var beforeBookmark = value();\n      var locks = Cell(0);\n      var index = Cell(0);\n      var undoManager = {\n        data: [],\n        typing: false,\n        beforeChange: function () {\n          beforeChange(editor, locks, beforeBookmark);\n        },\n        add: function (level, event) {\n          return addUndoLevel(editor, undoManager, index, locks, beforeBookmark, level, event);\n        },\n        undo: function () {\n          return undo(editor, undoManager, locks, index);\n        },\n        redo: function () {\n          return redo(editor, index, undoManager.data);\n        },\n        clear: function () {\n          clear(editor, undoManager, index);\n        },\n        reset: function () {\n          reset(editor, undoManager);\n        },\n        hasUndo: function () {\n          return hasUndo(editor, undoManager, index);\n        },\n        hasRedo: function () {\n          return hasRedo(editor, undoManager, index);\n        },\n        transact: function (callback) {\n          return transact(editor, undoManager, locks, callback);\n        },\n        ignore: function (callback) {\n          ignore(editor, locks, callback);\n        },\n        extra: function (callback1, callback2) {\n          extra(editor, undoManager, index, callback1, callback2);\n        }\n      };\n      if (!isRtc(editor)) {\n        registerEvents(editor, undoManager, locks);\n      }\n      addKeyboardShortcuts(editor);\n      return undoManager;\n    };\n\n    var nonTypingKeycodes = [\n      9,\n      27,\n      VK.HOME,\n      VK.END,\n      19,\n      20,\n      44,\n      144,\n      145,\n      33,\n      34,\n      45,\n      16,\n      17,\n      18,\n      91,\n      92,\n      93,\n      VK.DOWN,\n      VK.UP,\n      VK.LEFT,\n      VK.RIGHT\n    ].concat(Env.browser.isFirefox() ? [224] : []);\n    var placeholderAttr = 'data-mce-placeholder';\n    var isKeyboardEvent = function (e) {\n      return e.type === 'keydown' || e.type === 'keyup';\n    };\n    var isDeleteEvent = function (e) {\n      var keyCode = e.keyCode;\n      return keyCode === VK.BACKSPACE || keyCode === VK.DELETE;\n    };\n    var isNonTypingKeyboardEvent = function (e) {\n      if (isKeyboardEvent(e)) {\n        var keyCode = e.keyCode;\n        return !isDeleteEvent(e) && (VK.metaKeyPressed(e) || e.altKey || keyCode >= 112 && keyCode <= 123 || contains$3(nonTypingKeycodes, keyCode));\n      } else {\n        return false;\n      }\n    };\n    var isTypingKeyboardEvent = function (e) {\n      return isKeyboardEvent(e) && !(isDeleteEvent(e) || e.type === 'keyup' && e.keyCode === 229);\n    };\n    var isVisuallyEmpty = function (dom, rootElm, forcedRootBlock) {\n      if (isEmpty$2(SugarElement.fromDom(rootElm), false)) {\n        var isForcedRootBlockFalse = forcedRootBlock === '';\n        var firstElement = rootElm.firstElementChild;\n        if (!firstElement) {\n          return true;\n        } else if (dom.getStyle(rootElm.firstElementChild, 'padding-left') || dom.getStyle(rootElm.firstElementChild, 'padding-right')) {\n          return false;\n        } else {\n          return isForcedRootBlockFalse ? !dom.isBlock(firstElement) : forcedRootBlock === firstElement.nodeName.toLowerCase();\n        }\n      } else {\n        return false;\n      }\n    };\n    var setup$g = function (editor) {\n      var dom = editor.dom;\n      var rootBlock = getForcedRootBlock(editor);\n      var placeholder = getPlaceholder(editor);\n      var updatePlaceholder = function (e, initial) {\n        if (isNonTypingKeyboardEvent(e)) {\n          return;\n        }\n        var body = editor.getBody();\n        var showPlaceholder = isTypingKeyboardEvent(e) ? false : isVisuallyEmpty(dom, body, rootBlock);\n        var isPlaceholderShown = dom.getAttrib(body, placeholderAttr) !== '';\n        if (isPlaceholderShown !== showPlaceholder || initial) {\n          dom.setAttrib(body, placeholderAttr, showPlaceholder ? placeholder : null);\n          dom.setAttrib(body, 'aria-placeholder', showPlaceholder ? placeholder : null);\n          firePlaceholderToggle(editor, showPlaceholder);\n          editor.on(showPlaceholder ? 'keydown' : 'keyup', updatePlaceholder);\n          editor.off(showPlaceholder ? 'keyup' : 'keydown', updatePlaceholder);\n        }\n      };\n      if (placeholder) {\n        editor.on('init', function (e) {\n          updatePlaceholder(e, true);\n          editor.on('change SetContent ExecCommand', updatePlaceholder);\n          editor.on('paste', function (e) {\n            return Delay.setEditorTimeout(editor, function () {\n              return updatePlaceholder(e);\n            });\n          });\n        });\n      }\n    };\n\n    var strongRtl = /[\\u0591-\\u07FF\\uFB1D-\\uFDFF\\uFE70-\\uFEFC]/;\n    var hasStrongRtl = function (text) {\n      return strongRtl.test(text);\n    };\n\n    var isInlineTarget = function (editor, elm) {\n      return is$2(SugarElement.fromDom(elm), getInlineBoundarySelector(editor));\n    };\n    var isRtl = function (element) {\n      return DOMUtils.DOM.getStyle(element, 'direction', true) === 'rtl' || hasStrongRtl(element.textContent);\n    };\n    var findInlineParents = function (isInlineTarget, rootNode, pos) {\n      return filter$4(DOMUtils.DOM.getParents(pos.container(), '*', rootNode), isInlineTarget);\n    };\n    var findRootInline = function (isInlineTarget, rootNode, pos) {\n      var parents = findInlineParents(isInlineTarget, rootNode, pos);\n      return Optional.from(parents[parents.length - 1]);\n    };\n    var hasSameParentBlock = function (rootNode, node1, node2) {\n      var block1 = getParentBlock$2(node1, rootNode);\n      var block2 = getParentBlock$2(node2, rootNode);\n      return block1 && block1 === block2;\n    };\n    var isAtZwsp = function (pos) {\n      return isBeforeInline(pos) || isAfterInline(pos);\n    };\n    var normalizePosition = function (forward, pos) {\n      if (!pos) {\n        return pos;\n      }\n      var container = pos.container(), offset = pos.offset();\n      if (forward) {\n        if (isCaretContainerInline(container)) {\n          if (isText$7(container.nextSibling)) {\n            return CaretPosition(container.nextSibling, 0);\n          } else {\n            return CaretPosition.after(container);\n          }\n        } else {\n          return isBeforeInline(pos) ? CaretPosition(container, offset + 1) : pos;\n        }\n      } else {\n        if (isCaretContainerInline(container)) {\n          if (isText$7(container.previousSibling)) {\n            return CaretPosition(container.previousSibling, container.previousSibling.data.length);\n          } else {\n            return CaretPosition.before(container);\n          }\n        } else {\n          return isAfterInline(pos) ? CaretPosition(container, offset - 1) : pos;\n        }\n      }\n    };\n    var normalizeForwards = curry(normalizePosition, true);\n    var normalizeBackwards = curry(normalizePosition, false);\n\n    var isBeforeRoot = function (rootNode) {\n      return function (elm) {\n        return eq(rootNode, SugarElement.fromDom(elm.dom.parentNode));\n      };\n    };\n    var isTextBlockOrListItem = function (element) {\n      return isTextBlock$2(element) || isListItem(element);\n    };\n    var getParentBlock$1 = function (rootNode, elm) {\n      if (contains$1(rootNode, elm)) {\n        return closest$3(elm, isTextBlockOrListItem, isBeforeRoot(rootNode));\n      } else {\n        return Optional.none();\n      }\n    };\n    var placeCaretInEmptyBody = function (editor) {\n      var body = editor.getBody();\n      var node = body.firstChild && editor.dom.isBlock(body.firstChild) ? body.firstChild : body;\n      editor.selection.setCursorLocation(node, 0);\n    };\n    var paddEmptyBody = function (editor) {\n      if (editor.dom.isEmpty(editor.getBody())) {\n        editor.setContent('');\n        placeCaretInEmptyBody(editor);\n      }\n    };\n    var willDeleteLastPositionInElement = function (forward, fromPos, elm) {\n      return lift2(firstPositionIn(elm), lastPositionIn(elm), function (firstPos, lastPos) {\n        var normalizedFirstPos = normalizePosition(true, firstPos);\n        var normalizedLastPos = normalizePosition(false, lastPos);\n        var normalizedFromPos = normalizePosition(false, fromPos);\n        if (forward) {\n          return nextPosition(elm, normalizedFromPos).exists(function (nextPos) {\n            return nextPos.isEqual(normalizedLastPos) && fromPos.isEqual(normalizedFirstPos);\n          });\n        } else {\n          return prevPosition(elm, normalizedFromPos).exists(function (prevPos) {\n            return prevPos.isEqual(normalizedFirstPos) && fromPos.isEqual(normalizedLastPos);\n          });\n        }\n      }).getOr(true);\n    };\n\n    var blockPosition = function (block, position) {\n      return {\n        block: block,\n        position: position\n      };\n    };\n    var blockBoundary = function (from, to) {\n      return {\n        from: from,\n        to: to\n      };\n    };\n    var getBlockPosition = function (rootNode, pos) {\n      var rootElm = SugarElement.fromDom(rootNode);\n      var containerElm = SugarElement.fromDom(pos.container());\n      return getParentBlock$1(rootElm, containerElm).map(function (block) {\n        return blockPosition(block, pos);\n      });\n    };\n    var isDifferentBlocks = function (blockBoundary) {\n      return eq(blockBoundary.from.block, blockBoundary.to.block) === false;\n    };\n    var hasSameParent = function (blockBoundary) {\n      return parent(blockBoundary.from.block).bind(function (parent1) {\n        return parent(blockBoundary.to.block).filter(function (parent2) {\n          return eq(parent1, parent2);\n        });\n      }).isSome();\n    };\n    var isEditable$1 = function (blockBoundary) {\n      return isContentEditableFalse$b(blockBoundary.from.block.dom) === false && isContentEditableFalse$b(blockBoundary.to.block.dom) === false;\n    };\n    var skipLastBr = function (rootNode, forward, blockPosition) {\n      if (isBr$5(blockPosition.position.getNode()) && isEmpty$2(blockPosition.block) === false) {\n        return positionIn(false, blockPosition.block.dom).bind(function (lastPositionInBlock) {\n          if (lastPositionInBlock.isEqual(blockPosition.position)) {\n            return fromPosition(forward, rootNode, lastPositionInBlock).bind(function (to) {\n              return getBlockPosition(rootNode, to);\n            });\n          } else {\n            return Optional.some(blockPosition);\n          }\n        }).getOr(blockPosition);\n      } else {\n        return blockPosition;\n      }\n    };\n    var readFromRange = function (rootNode, forward, rng) {\n      var fromBlockPos = getBlockPosition(rootNode, CaretPosition.fromRangeStart(rng));\n      var toBlockPos = fromBlockPos.bind(function (blockPos) {\n        return fromPosition(forward, rootNode, blockPos.position).bind(function (to) {\n          return getBlockPosition(rootNode, to).map(function (blockPos) {\n            return skipLastBr(rootNode, forward, blockPos);\n          });\n        });\n      });\n      return lift2(fromBlockPos, toBlockPos, blockBoundary).filter(function (blockBoundary) {\n        return isDifferentBlocks(blockBoundary) && hasSameParent(blockBoundary) && isEditable$1(blockBoundary);\n      });\n    };\n    var read$1 = function (rootNode, forward, rng) {\n      return rng.collapsed ? readFromRange(rootNode, forward, rng) : Optional.none();\n    };\n\n    var getChildrenUntilBlockBoundary = function (block) {\n      var children$1 = children(block);\n      return findIndex$2(children$1, isBlock$2).fold(constant(children$1), function (index) {\n        return children$1.slice(0, index);\n      });\n    };\n    var extractChildren = function (block) {\n      var children = getChildrenUntilBlockBoundary(block);\n      each$k(children, remove$7);\n      return children;\n    };\n    var removeEmptyRoot = function (rootNode, block) {\n      var parents = parentsAndSelf(block, rootNode);\n      return find$3(parents.reverse(), function (element) {\n        return isEmpty$2(element);\n      }).each(remove$7);\n    };\n    var isEmptyBefore = function (el) {\n      return filter$4(prevSiblings(el), function (el) {\n        return !isEmpty$2(el);\n      }).length === 0;\n    };\n    var nestedBlockMerge = function (rootNode, fromBlock, toBlock, insertionPoint) {\n      if (isEmpty$2(toBlock)) {\n        fillWithPaddingBr(toBlock);\n        return firstPositionIn(toBlock.dom);\n      }\n      if (isEmptyBefore(insertionPoint) && isEmpty$2(fromBlock)) {\n        before$4(insertionPoint, SugarElement.fromTag('br'));\n      }\n      var position = prevPosition(toBlock.dom, CaretPosition.before(insertionPoint.dom));\n      each$k(extractChildren(fromBlock), function (child) {\n        before$4(insertionPoint, child);\n      });\n      removeEmptyRoot(rootNode, fromBlock);\n      return position;\n    };\n    var sidelongBlockMerge = function (rootNode, fromBlock, toBlock) {\n      if (isEmpty$2(toBlock)) {\n        remove$7(toBlock);\n        if (isEmpty$2(fromBlock)) {\n          fillWithPaddingBr(fromBlock);\n        }\n        return firstPositionIn(fromBlock.dom);\n      }\n      var position = lastPositionIn(toBlock.dom);\n      each$k(extractChildren(fromBlock), function (child) {\n        append$1(toBlock, child);\n      });\n      removeEmptyRoot(rootNode, fromBlock);\n      return position;\n    };\n    var findInsertionPoint = function (toBlock, block) {\n      var parentsAndSelf$1 = parentsAndSelf(block, toBlock);\n      return Optional.from(parentsAndSelf$1[parentsAndSelf$1.length - 1]);\n    };\n    var getInsertionPoint = function (fromBlock, toBlock) {\n      return contains$1(toBlock, fromBlock) ? findInsertionPoint(toBlock, fromBlock) : Optional.none();\n    };\n    var trimBr = function (first, block) {\n      positionIn(first, block.dom).map(function (position) {\n        return position.getNode();\n      }).map(SugarElement.fromDom).filter(isBr$4).each(remove$7);\n    };\n    var mergeBlockInto = function (rootNode, fromBlock, toBlock) {\n      trimBr(true, fromBlock);\n      trimBr(false, toBlock);\n      return getInsertionPoint(fromBlock, toBlock).fold(curry(sidelongBlockMerge, rootNode, fromBlock, toBlock), curry(nestedBlockMerge, rootNode, fromBlock, toBlock));\n    };\n    var mergeBlocks = function (rootNode, forward, block1, block2) {\n      return forward ? mergeBlockInto(rootNode, block2, block1) : mergeBlockInto(rootNode, block1, block2);\n    };\n\n    var backspaceDelete$8 = function (editor, forward) {\n      var rootNode = SugarElement.fromDom(editor.getBody());\n      var position = read$1(rootNode.dom, forward, editor.selection.getRng()).bind(function (blockBoundary) {\n        return mergeBlocks(rootNode, forward, blockBoundary.from.block, blockBoundary.to.block);\n      });\n      position.each(function (pos) {\n        editor.selection.setRng(pos.toRange());\n      });\n      return position.isSome();\n    };\n\n    var deleteRangeMergeBlocks = function (rootNode, selection) {\n      var rng = selection.getRng();\n      return lift2(getParentBlock$1(rootNode, SugarElement.fromDom(rng.startContainer)), getParentBlock$1(rootNode, SugarElement.fromDom(rng.endContainer)), function (block1, block2) {\n        if (eq(block1, block2) === false) {\n          rng.deleteContents();\n          mergeBlocks(rootNode, true, block1, block2).each(function (pos) {\n            selection.setRng(pos.toRange());\n          });\n          return true;\n        } else {\n          return false;\n        }\n      }).getOr(false);\n    };\n    var isRawNodeInTable = function (root, rawNode) {\n      var node = SugarElement.fromDom(rawNode);\n      var isRoot = curry(eq, root);\n      return ancestor$3(node, isTableCell$4, isRoot).isSome();\n    };\n    var isSelectionInTable = function (root, rng) {\n      return isRawNodeInTable(root, rng.startContainer) || isRawNodeInTable(root, rng.endContainer);\n    };\n    var isEverythingSelected = function (root, rng) {\n      var noPrevious = prevPosition(root.dom, CaretPosition.fromRangeStart(rng)).isNone();\n      var noNext = nextPosition(root.dom, CaretPosition.fromRangeEnd(rng)).isNone();\n      return !isSelectionInTable(root, rng) && noPrevious && noNext;\n    };\n    var emptyEditor = function (editor) {\n      editor.setContent('');\n      editor.selection.setCursorLocation();\n      return true;\n    };\n    var deleteRange$1 = function (editor) {\n      var rootNode = SugarElement.fromDom(editor.getBody());\n      var rng = editor.selection.getRng();\n      return isEverythingSelected(rootNode, rng) ? emptyEditor(editor) : deleteRangeMergeBlocks(rootNode, editor.selection);\n    };\n    var backspaceDelete$7 = function (editor, _forward) {\n      return editor.selection.isCollapsed() ? false : deleteRange$1(editor);\n    };\n\n    var isContentEditableTrue$2 = isContentEditableTrue$4;\n    var isContentEditableFalse$4 = isContentEditableFalse$b;\n    var showCaret = function (direction, editor, node, before, scrollIntoView) {\n      return Optional.from(editor._selectionOverrides.showCaret(direction, node, before, scrollIntoView));\n    };\n    var getNodeRange = function (node) {\n      var rng = node.ownerDocument.createRange();\n      rng.selectNode(node);\n      return rng;\n    };\n    var selectNode = function (editor, node) {\n      var e = editor.fire('BeforeObjectSelected', { target: node });\n      if (e.isDefaultPrevented()) {\n        return Optional.none();\n      }\n      return Optional.some(getNodeRange(node));\n    };\n    var renderCaretAtRange = function (editor, range, scrollIntoView) {\n      var normalizedRange = normalizeRange(1, editor.getBody(), range);\n      var caretPosition = CaretPosition.fromRangeStart(normalizedRange);\n      var caretPositionNode = caretPosition.getNode();\n      if (isInlineFakeCaretTarget(caretPositionNode)) {\n        return showCaret(1, editor, caretPositionNode, !caretPosition.isAtEnd(), false);\n      }\n      var caretPositionBeforeNode = caretPosition.getNode(true);\n      if (isInlineFakeCaretTarget(caretPositionBeforeNode)) {\n        return showCaret(1, editor, caretPositionBeforeNode, false, false);\n      }\n      var ceRoot = editor.dom.getParent(caretPosition.getNode(), function (node) {\n        return isContentEditableFalse$4(node) || isContentEditableTrue$2(node);\n      });\n      if (isInlineFakeCaretTarget(ceRoot)) {\n        return showCaret(1, editor, ceRoot, false, scrollIntoView);\n      }\n      return Optional.none();\n    };\n    var renderRangeCaret = function (editor, range, scrollIntoView) {\n      return range.collapsed ? renderCaretAtRange(editor, range, scrollIntoView).getOr(range) : range;\n    };\n\n    var isBeforeBoundary = function (pos) {\n      return isBeforeContentEditableFalse(pos) || isBeforeMedia(pos);\n    };\n    var isAfterBoundary = function (pos) {\n      return isAfterContentEditableFalse(pos) || isAfterMedia(pos);\n    };\n    var trimEmptyTextNode = function (dom, node) {\n      if (isText$7(node) && node.data.length === 0) {\n        dom.remove(node);\n      }\n    };\n    var deleteContentAndShowCaret = function (editor, range, node, direction, forward, peekCaretPosition) {\n      showCaret(direction, editor, peekCaretPosition.getNode(!forward), forward, true).each(function (caretRange) {\n        if (range.collapsed) {\n          var deleteRange = range.cloneRange();\n          if (forward) {\n            deleteRange.setEnd(caretRange.startContainer, caretRange.startOffset);\n          } else {\n            deleteRange.setStart(caretRange.endContainer, caretRange.endOffset);\n          }\n          deleteRange.deleteContents();\n        } else {\n          range.deleteContents();\n        }\n        editor.selection.setRng(caretRange);\n      });\n      trimEmptyTextNode(editor.dom, node);\n      return true;\n    };\n    var deleteBoundaryText = function (editor, forward) {\n      var range = editor.selection.getRng();\n      if (!isText$7(range.commonAncestorContainer)) {\n        return false;\n      }\n      var direction = forward ? HDirection.Forwards : HDirection.Backwards;\n      var caretWalker = CaretWalker(editor.getBody());\n      var getNextPosFn = curry(getVisualCaretPosition, forward ? caretWalker.next : caretWalker.prev);\n      var isBeforeFn = forward ? isBeforeBoundary : isAfterBoundary;\n      var caretPosition = getNormalizedRangeEndPoint(direction, editor.getBody(), range);\n      var nextCaretPosition = normalizePosition(forward, getNextPosFn(caretPosition));\n      if (!nextCaretPosition || !isMoveInsideSameBlock(caretPosition, nextCaretPosition)) {\n        return false;\n      } else if (isBeforeFn(nextCaretPosition)) {\n        return deleteContentAndShowCaret(editor, range, caretPosition.getNode(), direction, forward, nextCaretPosition);\n      }\n      var peekCaretPosition = getNextPosFn(nextCaretPosition);\n      if (peekCaretPosition && isBeforeFn(peekCaretPosition)) {\n        if (isMoveInsideSameBlock(nextCaretPosition, peekCaretPosition)) {\n          return deleteContentAndShowCaret(editor, range, caretPosition.getNode(), direction, forward, peekCaretPosition);\n        }\n      }\n      return false;\n    };\n    var backspaceDelete$6 = function (editor, forward) {\n      return deleteBoundaryText(editor, forward);\n    };\n\n    var isCompoundElement = function (node) {\n      return isTableCell$4(SugarElement.fromDom(node)) || isListItem(SugarElement.fromDom(node));\n    };\n    var DeleteAction = Adt.generate([\n      { remove: ['element'] },\n      { moveToElement: ['element'] },\n      { moveToPosition: ['position'] }\n    ]);\n    var isAtContentEditableBlockCaret = function (forward, from) {\n      var elm = from.getNode(forward === false);\n      var caretLocation = forward ? 'after' : 'before';\n      return isElement$5(elm) && elm.getAttribute('data-mce-caret') === caretLocation;\n    };\n    var isDeleteFromCefDifferentBlocks = function (root, forward, from, to) {\n      var inSameBlock = function (elm) {\n        return isInline$1(SugarElement.fromDom(elm)) && !isInSameBlock(from, to, root);\n      };\n      return getRelativeCefElm(!forward, from).fold(function () {\n        return getRelativeCefElm(forward, to).fold(never, inSameBlock);\n      }, inSameBlock);\n    };\n    var deleteEmptyBlockOrMoveToCef = function (root, forward, from, to) {\n      var toCefElm = to.getNode(forward === false);\n      return getParentBlock$1(SugarElement.fromDom(root), SugarElement.fromDom(from.getNode())).map(function (blockElm) {\n        return isEmpty$2(blockElm) ? DeleteAction.remove(blockElm.dom) : DeleteAction.moveToElement(toCefElm);\n      }).orThunk(function () {\n        return Optional.some(DeleteAction.moveToElement(toCefElm));\n      });\n    };\n    var findCefPosition = function (root, forward, from) {\n      return fromPosition(forward, root, from).bind(function (to) {\n        if (isCompoundElement(to.getNode())) {\n          return Optional.none();\n        } else if (isDeleteFromCefDifferentBlocks(root, forward, from, to)) {\n          return Optional.none();\n        } else if (forward && isContentEditableFalse$b(to.getNode())) {\n          return deleteEmptyBlockOrMoveToCef(root, forward, from, to);\n        } else if (forward === false && isContentEditableFalse$b(to.getNode(true))) {\n          return deleteEmptyBlockOrMoveToCef(root, forward, from, to);\n        } else if (forward && isAfterContentEditableFalse(from)) {\n          return Optional.some(DeleteAction.moveToPosition(to));\n        } else if (forward === false && isBeforeContentEditableFalse(from)) {\n          return Optional.some(DeleteAction.moveToPosition(to));\n        } else {\n          return Optional.none();\n        }\n      });\n    };\n    var getContentEditableBlockAction = function (forward, elm) {\n      if (forward && isContentEditableFalse$b(elm.nextSibling)) {\n        return Optional.some(DeleteAction.moveToElement(elm.nextSibling));\n      } else if (forward === false && isContentEditableFalse$b(elm.previousSibling)) {\n        return Optional.some(DeleteAction.moveToElement(elm.previousSibling));\n      } else {\n        return Optional.none();\n      }\n    };\n    var skipMoveToActionFromInlineCefToContent = function (root, from, deleteAction) {\n      return deleteAction.fold(function (elm) {\n        return Optional.some(DeleteAction.remove(elm));\n      }, function (elm) {\n        return Optional.some(DeleteAction.moveToElement(elm));\n      }, function (to) {\n        if (isInSameBlock(from, to, root)) {\n          return Optional.none();\n        } else {\n          return Optional.some(DeleteAction.moveToPosition(to));\n        }\n      });\n    };\n    var getContentEditableAction = function (root, forward, from) {\n      if (isAtContentEditableBlockCaret(forward, from)) {\n        return getContentEditableBlockAction(forward, from.getNode(forward === false)).fold(function () {\n          return findCefPosition(root, forward, from);\n        }, Optional.some);\n      } else {\n        return findCefPosition(root, forward, from).bind(function (deleteAction) {\n          return skipMoveToActionFromInlineCefToContent(root, from, deleteAction);\n        });\n      }\n    };\n    var read = function (root, forward, rng) {\n      var normalizedRange = normalizeRange(forward ? 1 : -1, root, rng);\n      var from = CaretPosition.fromRangeStart(normalizedRange);\n      var rootElement = SugarElement.fromDom(root);\n      if (forward === false && isAfterContentEditableFalse(from)) {\n        return Optional.some(DeleteAction.remove(from.getNode(true)));\n      } else if (forward && isBeforeContentEditableFalse(from)) {\n        return Optional.some(DeleteAction.remove(from.getNode()));\n      } else if (forward === false && isBeforeContentEditableFalse(from) && isAfterBr(rootElement, from)) {\n        return findPreviousBr(rootElement, from).map(function (br) {\n          return DeleteAction.remove(br.getNode());\n        });\n      } else if (forward && isAfterContentEditableFalse(from) && isBeforeBr$1(rootElement, from)) {\n        return findNextBr(rootElement, from).map(function (br) {\n          return DeleteAction.remove(br.getNode());\n        });\n      } else {\n        return getContentEditableAction(root, forward, from);\n      }\n    };\n\n    var deleteElement$1 = function (editor, forward) {\n      return function (element) {\n        editor._selectionOverrides.hideFakeCaret();\n        deleteElement$2(editor, forward, SugarElement.fromDom(element));\n        return true;\n      };\n    };\n    var moveToElement = function (editor, forward) {\n      return function (element) {\n        var pos = forward ? CaretPosition.before(element) : CaretPosition.after(element);\n        editor.selection.setRng(pos.toRange());\n        return true;\n      };\n    };\n    var moveToPosition = function (editor) {\n      return function (pos) {\n        editor.selection.setRng(pos.toRange());\n        return true;\n      };\n    };\n    var getAncestorCe = function (editor, node) {\n      return Optional.from(getContentEditableRoot$1(editor.getBody(), node));\n    };\n    var backspaceDeleteCaret = function (editor, forward) {\n      var selectedNode = editor.selection.getNode();\n      return getAncestorCe(editor, selectedNode).filter(isContentEditableFalse$b).fold(function () {\n        return read(editor.getBody(), forward, editor.selection.getRng()).exists(function (deleteAction) {\n          return deleteAction.fold(deleteElement$1(editor, forward), moveToElement(editor, forward), moveToPosition(editor));\n        });\n      }, always);\n    };\n    var deleteOffscreenSelection = function (rootElement) {\n      each$k(descendants(rootElement, '.mce-offscreen-selection'), remove$7);\n    };\n    var backspaceDeleteRange = function (editor, forward) {\n      var selectedNode = editor.selection.getNode();\n      if (isContentEditableFalse$b(selectedNode) && !isTableCell$5(selectedNode)) {\n        var hasCefAncestor = getAncestorCe(editor, selectedNode.parentNode).filter(isContentEditableFalse$b);\n        return hasCefAncestor.fold(function () {\n          deleteOffscreenSelection(SugarElement.fromDom(editor.getBody()));\n          deleteElement$2(editor, forward, SugarElement.fromDom(editor.selection.getNode()));\n          paddEmptyBody(editor);\n          return true;\n        }, always);\n      }\n      return false;\n    };\n    var paddEmptyElement = function (editor) {\n      var dom = editor.dom, selection = editor.selection;\n      var ceRoot = getContentEditableRoot$1(editor.getBody(), selection.getNode());\n      if (isContentEditableTrue$4(ceRoot) && dom.isBlock(ceRoot) && dom.isEmpty(ceRoot)) {\n        var br = dom.create('br', { 'data-mce-bogus': '1' });\n        dom.setHTML(ceRoot, '');\n        ceRoot.appendChild(br);\n        selection.setRng(CaretPosition.before(br).toRange());\n      }\n      return true;\n    };\n    var backspaceDelete$5 = function (editor, forward) {\n      if (editor.selection.isCollapsed()) {\n        return backspaceDeleteCaret(editor, forward);\n      } else {\n        return backspaceDeleteRange(editor, forward);\n      }\n    };\n\n    var deleteCaret$2 = function (editor, forward) {\n      var fromPos = CaretPosition.fromRangeStart(editor.selection.getRng());\n      return fromPosition(forward, editor.getBody(), fromPos).filter(function (pos) {\n        return forward ? isBeforeImageBlock(pos) : isAfterImageBlock(pos);\n      }).bind(function (pos) {\n        return Optional.from(getChildNodeAtRelativeOffset(forward ? 0 : -1, pos));\n      }).exists(function (elm) {\n        editor.selection.select(elm);\n        return true;\n      });\n    };\n    var backspaceDelete$4 = function (editor, forward) {\n      return editor.selection.isCollapsed() ? deleteCaret$2(editor, forward) : false;\n    };\n\n    var isText = isText$7;\n    var startsWithCaretContainer = function (node) {\n      return isText(node) && node.data[0] === ZWSP$1;\n    };\n    var endsWithCaretContainer = function (node) {\n      return isText(node) && node.data[node.data.length - 1] === ZWSP$1;\n    };\n    var createZwsp = function (node) {\n      return node.ownerDocument.createTextNode(ZWSP$1);\n    };\n    var insertBefore = function (node) {\n      if (isText(node.previousSibling)) {\n        if (endsWithCaretContainer(node.previousSibling)) {\n          return node.previousSibling;\n        } else {\n          node.previousSibling.appendData(ZWSP$1);\n          return node.previousSibling;\n        }\n      } else if (isText(node)) {\n        if (startsWithCaretContainer(node)) {\n          return node;\n        } else {\n          node.insertData(0, ZWSP$1);\n          return node;\n        }\n      } else {\n        var newNode = createZwsp(node);\n        node.parentNode.insertBefore(newNode, node);\n        return newNode;\n      }\n    };\n    var insertAfter = function (node) {\n      if (isText(node.nextSibling)) {\n        if (startsWithCaretContainer(node.nextSibling)) {\n          return node.nextSibling;\n        } else {\n          node.nextSibling.insertData(0, ZWSP$1);\n          return node.nextSibling;\n        }\n      } else if (isText(node)) {\n        if (endsWithCaretContainer(node)) {\n          return node;\n        } else {\n          node.appendData(ZWSP$1);\n          return node;\n        }\n      } else {\n        var newNode = createZwsp(node);\n        if (node.nextSibling) {\n          node.parentNode.insertBefore(newNode, node.nextSibling);\n        } else {\n          node.parentNode.appendChild(newNode);\n        }\n        return newNode;\n      }\n    };\n    var insertInline = function (before, node) {\n      return before ? insertBefore(node) : insertAfter(node);\n    };\n    var insertInlineBefore = curry(insertInline, true);\n    var insertInlineAfter = curry(insertInline, false);\n\n    var insertInlinePos = function (pos, before) {\n      if (isText$7(pos.container())) {\n        return insertInline(before, pos.container());\n      } else {\n        return insertInline(before, pos.getNode());\n      }\n    };\n    var isPosCaretContainer = function (pos, caret) {\n      var caretNode = caret.get();\n      return caretNode && pos.container() === caretNode && isCaretContainerInline(caretNode);\n    };\n    var renderCaret = function (caret, location) {\n      return location.fold(function (element) {\n        remove$2(caret.get());\n        var text = insertInlineBefore(element);\n        caret.set(text);\n        return Optional.some(CaretPosition(text, text.length - 1));\n      }, function (element) {\n        return firstPositionIn(element).map(function (pos) {\n          if (!isPosCaretContainer(pos, caret)) {\n            remove$2(caret.get());\n            var text = insertInlinePos(pos, true);\n            caret.set(text);\n            return CaretPosition(text, 1);\n          } else {\n            return CaretPosition(caret.get(), 1);\n          }\n        });\n      }, function (element) {\n        return lastPositionIn(element).map(function (pos) {\n          if (!isPosCaretContainer(pos, caret)) {\n            remove$2(caret.get());\n            var text = insertInlinePos(pos, false);\n            caret.set(text);\n            return CaretPosition(text, text.length - 1);\n          } else {\n            return CaretPosition(caret.get(), caret.get().length - 1);\n          }\n        });\n      }, function (element) {\n        remove$2(caret.get());\n        var text = insertInlineAfter(element);\n        caret.set(text);\n        return Optional.some(CaretPosition(text, 1));\n      });\n    };\n\n    var evaluateUntil = function (fns, args) {\n      for (var i = 0; i < fns.length; i++) {\n        var result = fns[i].apply(null, args);\n        if (result.isSome()) {\n          return result;\n        }\n      }\n      return Optional.none();\n    };\n\n    var Location = Adt.generate([\n      { before: ['element'] },\n      { start: ['element'] },\n      { end: ['element'] },\n      { after: ['element'] }\n    ]);\n    var rescope$1 = function (rootNode, node) {\n      var parentBlock = getParentBlock$2(node, rootNode);\n      return parentBlock ? parentBlock : rootNode;\n    };\n    var before = function (isInlineTarget, rootNode, pos) {\n      var nPos = normalizeForwards(pos);\n      var scope = rescope$1(rootNode, nPos.container());\n      return findRootInline(isInlineTarget, scope, nPos).fold(function () {\n        return nextPosition(scope, nPos).bind(curry(findRootInline, isInlineTarget, scope)).map(function (inline) {\n          return Location.before(inline);\n        });\n      }, Optional.none);\n    };\n    var isNotInsideFormatCaretContainer = function (rootNode, elm) {\n      return getParentCaretContainer(rootNode, elm) === null;\n    };\n    var findInsideRootInline = function (isInlineTarget, rootNode, pos) {\n      return findRootInline(isInlineTarget, rootNode, pos).filter(curry(isNotInsideFormatCaretContainer, rootNode));\n    };\n    var start$1 = function (isInlineTarget, rootNode, pos) {\n      var nPos = normalizeBackwards(pos);\n      return findInsideRootInline(isInlineTarget, rootNode, nPos).bind(function (inline) {\n        var prevPos = prevPosition(inline, nPos);\n        return prevPos.isNone() ? Optional.some(Location.start(inline)) : Optional.none();\n      });\n    };\n    var end = function (isInlineTarget, rootNode, pos) {\n      var nPos = normalizeForwards(pos);\n      return findInsideRootInline(isInlineTarget, rootNode, nPos).bind(function (inline) {\n        var nextPos = nextPosition(inline, nPos);\n        return nextPos.isNone() ? Optional.some(Location.end(inline)) : Optional.none();\n      });\n    };\n    var after = function (isInlineTarget, rootNode, pos) {\n      var nPos = normalizeBackwards(pos);\n      var scope = rescope$1(rootNode, nPos.container());\n      return findRootInline(isInlineTarget, scope, nPos).fold(function () {\n        return prevPosition(scope, nPos).bind(curry(findRootInline, isInlineTarget, scope)).map(function (inline) {\n          return Location.after(inline);\n        });\n      }, Optional.none);\n    };\n    var isValidLocation = function (location) {\n      return isRtl(getElement(location)) === false;\n    };\n    var readLocation = function (isInlineTarget, rootNode, pos) {\n      var location = evaluateUntil([\n        before,\n        start$1,\n        end,\n        after\n      ], [\n        isInlineTarget,\n        rootNode,\n        pos\n      ]);\n      return location.filter(isValidLocation);\n    };\n    var getElement = function (location) {\n      return location.fold(identity, identity, identity, identity);\n    };\n    var getName = function (location) {\n      return location.fold(constant('before'), constant('start'), constant('end'), constant('after'));\n    };\n    var outside = function (location) {\n      return location.fold(Location.before, Location.before, Location.after, Location.after);\n    };\n    var inside = function (location) {\n      return location.fold(Location.start, Location.start, Location.end, Location.end);\n    };\n    var isEq = function (location1, location2) {\n      return getName(location1) === getName(location2) && getElement(location1) === getElement(location2);\n    };\n    var betweenInlines = function (forward, isInlineTarget, rootNode, from, to, location) {\n      return lift2(findRootInline(isInlineTarget, rootNode, from), findRootInline(isInlineTarget, rootNode, to), function (fromInline, toInline) {\n        if (fromInline !== toInline && hasSameParentBlock(rootNode, fromInline, toInline)) {\n          return Location.after(forward ? fromInline : toInline);\n        } else {\n          return location;\n        }\n      }).getOr(location);\n    };\n    var skipNoMovement = function (fromLocation, toLocation) {\n      return fromLocation.fold(always, function (fromLocation) {\n        return !isEq(fromLocation, toLocation);\n      });\n    };\n    var findLocationTraverse = function (forward, isInlineTarget, rootNode, fromLocation, pos) {\n      var from = normalizePosition(forward, pos);\n      var to = fromPosition(forward, rootNode, from).map(curry(normalizePosition, forward));\n      var location = to.fold(function () {\n        return fromLocation.map(outside);\n      }, function (to) {\n        return readLocation(isInlineTarget, rootNode, to).map(curry(betweenInlines, forward, isInlineTarget, rootNode, from, to)).filter(curry(skipNoMovement, fromLocation));\n      });\n      return location.filter(isValidLocation);\n    };\n    var findLocationSimple = function (forward, location) {\n      if (forward) {\n        return location.fold(compose(Optional.some, Location.start), Optional.none, compose(Optional.some, Location.after), Optional.none);\n      } else {\n        return location.fold(Optional.none, compose(Optional.some, Location.before), Optional.none, compose(Optional.some, Location.end));\n      }\n    };\n    var findLocation$1 = function (forward, isInlineTarget, rootNode, pos) {\n      var from = normalizePosition(forward, pos);\n      var fromLocation = readLocation(isInlineTarget, rootNode, from);\n      return readLocation(isInlineTarget, rootNode, from).bind(curry(findLocationSimple, forward)).orThunk(function () {\n        return findLocationTraverse(forward, isInlineTarget, rootNode, fromLocation, pos);\n      });\n    };\n    curry(findLocation$1, false);\n    curry(findLocation$1, true);\n\n    var hasSelectionModifyApi = function (editor) {\n      return isFunction(editor.selection.getSel().modify);\n    };\n    var moveRel = function (forward, selection, pos) {\n      var delta = forward ? 1 : -1;\n      selection.setRng(CaretPosition(pos.container(), pos.offset() + delta).toRange());\n      selection.getSel().modify('move', forward ? 'forward' : 'backward', 'word');\n      return true;\n    };\n    var moveByWord = function (forward, editor) {\n      var rng = editor.selection.getRng();\n      var pos = forward ? CaretPosition.fromRangeEnd(rng) : CaretPosition.fromRangeStart(rng);\n      if (!hasSelectionModifyApi(editor)) {\n        return false;\n      } else if (forward && isBeforeInline(pos)) {\n        return moveRel(true, editor.selection, pos);\n      } else if (!forward && isAfterInline(pos)) {\n        return moveRel(false, editor.selection, pos);\n      } else {\n        return false;\n      }\n    };\n\n    var BreakType;\n    (function (BreakType) {\n      BreakType[BreakType['Br'] = 0] = 'Br';\n      BreakType[BreakType['Block'] = 1] = 'Block';\n      BreakType[BreakType['Wrap'] = 2] = 'Wrap';\n      BreakType[BreakType['Eol'] = 3] = 'Eol';\n    }(BreakType || (BreakType = {})));\n    var flip = function (direction, positions) {\n      return direction === HDirection.Backwards ? reverse(positions) : positions;\n    };\n    var walk = function (direction, caretWalker, pos) {\n      return direction === HDirection.Forwards ? caretWalker.next(pos) : caretWalker.prev(pos);\n    };\n    var getBreakType = function (scope, direction, currentPos, nextPos) {\n      if (isBr$5(nextPos.getNode(direction === HDirection.Forwards))) {\n        return BreakType.Br;\n      } else if (isInSameBlock(currentPos, nextPos) === false) {\n        return BreakType.Block;\n      } else {\n        return BreakType.Wrap;\n      }\n    };\n    var getPositionsUntil = function (predicate, direction, scope, start) {\n      var caretWalker = CaretWalker(scope);\n      var currentPos = start;\n      var positions = [];\n      while (currentPos) {\n        var nextPos = walk(direction, caretWalker, currentPos);\n        if (!nextPos) {\n          break;\n        }\n        if (isBr$5(nextPos.getNode(false))) {\n          if (direction === HDirection.Forwards) {\n            return {\n              positions: flip(direction, positions).concat([nextPos]),\n              breakType: BreakType.Br,\n              breakAt: Optional.some(nextPos)\n            };\n          } else {\n            return {\n              positions: flip(direction, positions),\n              breakType: BreakType.Br,\n              breakAt: Optional.some(nextPos)\n            };\n          }\n        }\n        if (!nextPos.isVisible()) {\n          currentPos = nextPos;\n          continue;\n        }\n        if (predicate(currentPos, nextPos)) {\n          var breakType = getBreakType(scope, direction, currentPos, nextPos);\n          return {\n            positions: flip(direction, positions),\n            breakType: breakType,\n            breakAt: Optional.some(nextPos)\n          };\n        }\n        positions.push(nextPos);\n        currentPos = nextPos;\n      }\n      return {\n        positions: flip(direction, positions),\n        breakType: BreakType.Eol,\n        breakAt: Optional.none()\n      };\n    };\n    var getAdjacentLinePositions = function (direction, getPositionsUntilBreak, scope, start) {\n      return getPositionsUntilBreak(scope, start).breakAt.map(function (pos) {\n        var positions = getPositionsUntilBreak(scope, pos).positions;\n        return direction === HDirection.Backwards ? positions.concat(pos) : [pos].concat(positions);\n      }).getOr([]);\n    };\n    var findClosestHorizontalPositionFromPoint = function (positions, x) {\n      return foldl(positions, function (acc, newPos) {\n        return acc.fold(function () {\n          return Optional.some(newPos);\n        }, function (lastPos) {\n          return lift2(head(lastPos.getClientRects()), head(newPos.getClientRects()), function (lastRect, newRect) {\n            var lastDist = Math.abs(x - lastRect.left);\n            var newDist = Math.abs(x - newRect.left);\n            return newDist <= lastDist ? newPos : lastPos;\n          }).or(acc);\n        });\n      }, Optional.none());\n    };\n    var findClosestHorizontalPosition = function (positions, pos) {\n      return head(pos.getClientRects()).bind(function (targetRect) {\n        return findClosestHorizontalPositionFromPoint(positions, targetRect.left);\n      });\n    };\n    var getPositionsUntilPreviousLine = curry(getPositionsUntil, CaretPosition.isAbove, -1);\n    var getPositionsUntilNextLine = curry(getPositionsUntil, CaretPosition.isBelow, 1);\n    var getPositionsAbove = curry(getAdjacentLinePositions, -1, getPositionsUntilPreviousLine);\n    var getPositionsBelow = curry(getAdjacentLinePositions, 1, getPositionsUntilNextLine);\n    var isAtFirstLine = function (scope, pos) {\n      return getPositionsUntilPreviousLine(scope, pos).breakAt.isNone();\n    };\n    var isAtLastLine = function (scope, pos) {\n      return getPositionsUntilNextLine(scope, pos).breakAt.isNone();\n    };\n    var getFirstLinePositions = function (scope) {\n      return firstPositionIn(scope).map(function (pos) {\n        return [pos].concat(getPositionsUntilNextLine(scope, pos).positions);\n      }).getOr([]);\n    };\n    var getLastLinePositions = function (scope) {\n      return lastPositionIn(scope).map(function (pos) {\n        return getPositionsUntilPreviousLine(scope, pos).positions.concat(pos);\n      }).getOr([]);\n    };\n\n    var getNodeClientRects = function (node) {\n      var toArrayWithNode = function (clientRects) {\n        return map$3(clientRects, function (rect) {\n          var clientRect = clone(rect);\n          clientRect.node = node;\n          return clientRect;\n        });\n      };\n      if (isElement$5(node)) {\n        return toArrayWithNode(node.getClientRects());\n      }\n      if (isText$7(node)) {\n        var rng = node.ownerDocument.createRange();\n        rng.setStart(node, 0);\n        rng.setEnd(node, node.data.length);\n        return toArrayWithNode(rng.getClientRects());\n      }\n    };\n    var getClientRects = function (nodes) {\n      return bind(nodes, getNodeClientRects);\n    };\n\n    var VDirection;\n    (function (VDirection) {\n      VDirection[VDirection['Up'] = -1] = 'Up';\n      VDirection[VDirection['Down'] = 1] = 'Down';\n    }(VDirection || (VDirection = {})));\n    var findUntil = function (direction, root, predicateFn, node) {\n      while (node = findNode$1(node, direction, isEditableCaretCandidate$1, root)) {\n        if (predicateFn(node)) {\n          return;\n        }\n      }\n    };\n    var walkUntil$1 = function (direction, isAboveFn, isBeflowFn, root, predicateFn, caretPosition) {\n      var line = 0;\n      var result = [];\n      var add = function (node) {\n        var clientRects = getClientRects([node]);\n        if (direction === -1) {\n          clientRects = clientRects.reverse();\n        }\n        for (var i = 0; i < clientRects.length; i++) {\n          var clientRect = clientRects[i];\n          if (isBeflowFn(clientRect, targetClientRect)) {\n            continue;\n          }\n          if (result.length > 0 && isAboveFn(clientRect, last$1(result))) {\n            line++;\n          }\n          clientRect.line = line;\n          if (predicateFn(clientRect)) {\n            return true;\n          }\n          result.push(clientRect);\n        }\n      };\n      var targetClientRect = last$1(caretPosition.getClientRects());\n      if (!targetClientRect) {\n        return result;\n      }\n      var node = caretPosition.getNode();\n      add(node);\n      findUntil(direction, root, add, node);\n      return result;\n    };\n    var aboveLineNumber = function (lineNumber, clientRect) {\n      return clientRect.line > lineNumber;\n    };\n    var isLineNumber = function (lineNumber, clientRect) {\n      return clientRect.line === lineNumber;\n    };\n    var upUntil = curry(walkUntil$1, VDirection.Up, isAbove$1, isBelow$1);\n    var downUntil = curry(walkUntil$1, VDirection.Down, isBelow$1, isAbove$1);\n    var positionsUntil = function (direction, root, predicateFn, node) {\n      var caretWalker = CaretWalker(root);\n      var walkFn;\n      var isBelowFn;\n      var isAboveFn;\n      var caretPosition;\n      var result = [];\n      var line = 0;\n      var getClientRect = function (caretPosition) {\n        if (direction === 1) {\n          return last$1(caretPosition.getClientRects());\n        }\n        return last$1(caretPosition.getClientRects());\n      };\n      if (direction === 1) {\n        walkFn = caretWalker.next;\n        isBelowFn = isBelow$1;\n        isAboveFn = isAbove$1;\n        caretPosition = CaretPosition.after(node);\n      } else {\n        walkFn = caretWalker.prev;\n        isBelowFn = isAbove$1;\n        isAboveFn = isBelow$1;\n        caretPosition = CaretPosition.before(node);\n      }\n      var targetClientRect = getClientRect(caretPosition);\n      do {\n        if (!caretPosition.isVisible()) {\n          continue;\n        }\n        var rect = getClientRect(caretPosition);\n        if (isAboveFn(rect, targetClientRect)) {\n          continue;\n        }\n        if (result.length > 0 && isBelowFn(rect, last$1(result))) {\n          line++;\n        }\n        var clientRect = clone(rect);\n        clientRect.position = caretPosition;\n        clientRect.line = line;\n        if (predicateFn(clientRect)) {\n          return result;\n        }\n        result.push(clientRect);\n      } while (caretPosition = walkFn(caretPosition));\n      return result;\n    };\n    var isAboveLine = function (lineNumber) {\n      return function (clientRect) {\n        return aboveLineNumber(lineNumber, clientRect);\n      };\n    };\n    var isLine = function (lineNumber) {\n      return function (clientRect) {\n        return isLineNumber(lineNumber, clientRect);\n      };\n    };\n\n    var isContentEditableFalse$3 = isContentEditableFalse$b;\n    var findNode = findNode$1;\n    var distanceToRectLeft = function (clientRect, clientX) {\n      return Math.abs(clientRect.left - clientX);\n    };\n    var distanceToRectRight = function (clientRect, clientX) {\n      return Math.abs(clientRect.right - clientX);\n    };\n    var isInsideX = function (clientX, clientRect) {\n      return clientX >= clientRect.left && clientX <= clientRect.right;\n    };\n    var isInsideY = function (clientY, clientRect) {\n      return clientY >= clientRect.top && clientY <= clientRect.bottom;\n    };\n    var findClosestClientRect = function (clientRects, clientX) {\n      return reduce(clientRects, function (oldClientRect, clientRect) {\n        var oldDistance = Math.min(distanceToRectLeft(oldClientRect, clientX), distanceToRectRight(oldClientRect, clientX));\n        var newDistance = Math.min(distanceToRectLeft(clientRect, clientX), distanceToRectRight(clientRect, clientX));\n        if (isInsideX(clientX, clientRect)) {\n          return clientRect;\n        }\n        if (isInsideX(clientX, oldClientRect)) {\n          return oldClientRect;\n        }\n        if (newDistance === oldDistance && isContentEditableFalse$3(clientRect.node)) {\n          return clientRect;\n        }\n        if (newDistance < oldDistance) {\n          return clientRect;\n        }\n        return oldClientRect;\n      });\n    };\n    var walkUntil = function (direction, root, predicateFn, startNode, includeChildren) {\n      var node = findNode(startNode, direction, isEditableCaretCandidate$1, root, !includeChildren);\n      do {\n        if (!node || predicateFn(node)) {\n          return;\n        }\n      } while (node = findNode(node, direction, isEditableCaretCandidate$1, root));\n    };\n    var findLineNodeRects = function (root, targetNodeRect, includeChildren) {\n      if (includeChildren === void 0) {\n        includeChildren = true;\n      }\n      var clientRects = [];\n      var collect = function (checkPosFn, node) {\n        var lineRects = filter$4(getClientRects([node]), function (clientRect) {\n          return !checkPosFn(clientRect, targetNodeRect);\n        });\n        clientRects = clientRects.concat(lineRects);\n        return lineRects.length === 0;\n      };\n      clientRects.push(targetNodeRect);\n      walkUntil(VDirection.Up, root, curry(collect, isAbove$1), targetNodeRect.node, includeChildren);\n      walkUntil(VDirection.Down, root, curry(collect, isBelow$1), targetNodeRect.node, includeChildren);\n      return clientRects;\n    };\n    var getFakeCaretTargets = function (root) {\n      return filter$4(from(root.getElementsByTagName('*')), isFakeCaretTarget);\n    };\n    var caretInfo = function (clientRect, clientX) {\n      return {\n        node: clientRect.node,\n        before: distanceToRectLeft(clientRect, clientX) < distanceToRectRight(clientRect, clientX)\n      };\n    };\n    var closestFakeCaret = function (root, clientX, clientY) {\n      var fakeTargetNodeRects = getClientRects(getFakeCaretTargets(root));\n      var targetNodeRects = filter$4(fakeTargetNodeRects, curry(isInsideY, clientY));\n      var closestNodeRect = findClosestClientRect(targetNodeRects, clientX);\n      if (closestNodeRect) {\n        var includeChildren = !isTable$3(closestNodeRect.node) && !isMedia$2(closestNodeRect.node);\n        closestNodeRect = findClosestClientRect(findLineNodeRects(root, closestNodeRect, includeChildren), clientX);\n        if (closestNodeRect && isFakeCaretTarget(closestNodeRect.node)) {\n          return caretInfo(closestNodeRect, clientX);\n        }\n      }\n      return null;\n    };\n\n    var moveToRange = function (editor, rng) {\n      editor.selection.setRng(rng);\n      scrollRangeIntoView(editor, editor.selection.getRng());\n    };\n    var renderRangeCaretOpt = function (editor, range, scrollIntoView) {\n      return Optional.some(renderRangeCaret(editor, range, scrollIntoView));\n    };\n    var moveHorizontally = function (editor, direction, range, isBefore, isAfter, isElement) {\n      var forwards = direction === HDirection.Forwards;\n      var caretWalker = CaretWalker(editor.getBody());\n      var getNextPosFn = curry(getVisualCaretPosition, forwards ? caretWalker.next : caretWalker.prev);\n      var isBeforeFn = forwards ? isBefore : isAfter;\n      if (!range.collapsed) {\n        var node = getSelectedNode(range);\n        if (isElement(node)) {\n          return showCaret(direction, editor, node, direction === HDirection.Backwards, false);\n        }\n      }\n      var caretPosition = getNormalizedRangeEndPoint(direction, editor.getBody(), range);\n      if (isBeforeFn(caretPosition)) {\n        return selectNode(editor, caretPosition.getNode(!forwards));\n      }\n      var nextCaretPosition = normalizePosition(forwards, getNextPosFn(caretPosition));\n      var rangeIsInContainerBlock = isRangeInCaretContainerBlock(range);\n      if (!nextCaretPosition) {\n        return rangeIsInContainerBlock ? Optional.some(range) : Optional.none();\n      }\n      if (isBeforeFn(nextCaretPosition)) {\n        return showCaret(direction, editor, nextCaretPosition.getNode(!forwards), forwards, false);\n      }\n      var peekCaretPosition = getNextPosFn(nextCaretPosition);\n      if (peekCaretPosition && isBeforeFn(peekCaretPosition)) {\n        if (isMoveInsideSameBlock(nextCaretPosition, peekCaretPosition)) {\n          return showCaret(direction, editor, peekCaretPosition.getNode(!forwards), forwards, false);\n        }\n      }\n      if (rangeIsInContainerBlock) {\n        return renderRangeCaretOpt(editor, nextCaretPosition.toRange(), false);\n      }\n      return Optional.none();\n    };\n    var moveVertically = function (editor, direction, range, isBefore, isAfter, isElement) {\n      var caretPosition = getNormalizedRangeEndPoint(direction, editor.getBody(), range);\n      var caretClientRect = last$1(caretPosition.getClientRects());\n      var forwards = direction === VDirection.Down;\n      if (!caretClientRect) {\n        return Optional.none();\n      }\n      var walkerFn = forwards ? downUntil : upUntil;\n      var linePositions = walkerFn(editor.getBody(), isAboveLine(1), caretPosition);\n      var nextLinePositions = filter$4(linePositions, isLine(1));\n      var clientX = caretClientRect.left;\n      var nextLineRect = findClosestClientRect(nextLinePositions, clientX);\n      if (nextLineRect && isElement(nextLineRect.node)) {\n        var dist1 = Math.abs(clientX - nextLineRect.left);\n        var dist2 = Math.abs(clientX - nextLineRect.right);\n        return showCaret(direction, editor, nextLineRect.node, dist1 < dist2, false);\n      }\n      var currentNode;\n      if (isBefore(caretPosition)) {\n        currentNode = caretPosition.getNode();\n      } else if (isAfter(caretPosition)) {\n        currentNode = caretPosition.getNode(true);\n      } else {\n        currentNode = getSelectedNode(range);\n      }\n      if (currentNode) {\n        var caretPositions = positionsUntil(direction, editor.getBody(), isAboveLine(1), currentNode);\n        var closestNextLineRect = findClosestClientRect(filter$4(caretPositions, isLine(1)), clientX);\n        if (closestNextLineRect) {\n          return renderRangeCaretOpt(editor, closestNextLineRect.position.toRange(), false);\n        }\n        closestNextLineRect = last$1(filter$4(caretPositions, isLine(0)));\n        if (closestNextLineRect) {\n          return renderRangeCaretOpt(editor, closestNextLineRect.position.toRange(), false);\n        }\n      }\n      if (nextLinePositions.length === 0) {\n        return getLineEndPoint(editor, forwards).filter(forwards ? isAfter : isBefore).map(function (pos) {\n          return renderRangeCaret(editor, pos.toRange(), false);\n        });\n      }\n      return Optional.none();\n    };\n    var getLineEndPoint = function (editor, forward) {\n      var rng = editor.selection.getRng();\n      var body = editor.getBody();\n      if (forward) {\n        var from = CaretPosition.fromRangeEnd(rng);\n        var result = getPositionsUntilNextLine(body, from);\n        return last$2(result.positions);\n      } else {\n        var from = CaretPosition.fromRangeStart(rng);\n        var result = getPositionsUntilPreviousLine(body, from);\n        return head(result.positions);\n      }\n    };\n    var moveToLineEndPoint$3 = function (editor, forward, isElementPosition) {\n      return getLineEndPoint(editor, forward).filter(isElementPosition).exists(function (pos) {\n        editor.selection.setRng(pos.toRange());\n        return true;\n      });\n    };\n\n    var setCaretPosition = function (editor, pos) {\n      var rng = editor.dom.createRng();\n      rng.setStart(pos.container(), pos.offset());\n      rng.setEnd(pos.container(), pos.offset());\n      editor.selection.setRng(rng);\n    };\n    var setSelected = function (state, elm) {\n      if (state) {\n        elm.setAttribute('data-mce-selected', 'inline-boundary');\n      } else {\n        elm.removeAttribute('data-mce-selected');\n      }\n    };\n    var renderCaretLocation = function (editor, caret, location) {\n      return renderCaret(caret, location).map(function (pos) {\n        setCaretPosition(editor, pos);\n        return location;\n      });\n    };\n    var findLocation = function (editor, caret, forward) {\n      var rootNode = editor.getBody();\n      var from = CaretPosition.fromRangeStart(editor.selection.getRng());\n      var isInlineTarget$1 = curry(isInlineTarget, editor);\n      var location = findLocation$1(forward, isInlineTarget$1, rootNode, from);\n      return location.bind(function (location) {\n        return renderCaretLocation(editor, caret, location);\n      });\n    };\n    var toggleInlines = function (isInlineTarget, dom, elms) {\n      var inlineBoundaries = map$3(descendants(SugarElement.fromDom(dom.getRoot()), '*[data-mce-selected=\"inline-boundary\"]'), function (e) {\n        return e.dom;\n      });\n      var selectedInlines = filter$4(inlineBoundaries, isInlineTarget);\n      var targetInlines = filter$4(elms, isInlineTarget);\n      each$k(difference(selectedInlines, targetInlines), curry(setSelected, false));\n      each$k(difference(targetInlines, selectedInlines), curry(setSelected, true));\n    };\n    var safeRemoveCaretContainer = function (editor, caret) {\n      if (editor.selection.isCollapsed() && editor.composing !== true && caret.get()) {\n        var pos = CaretPosition.fromRangeStart(editor.selection.getRng());\n        if (CaretPosition.isTextPosition(pos) && isAtZwsp(pos) === false) {\n          setCaretPosition(editor, removeAndReposition(caret.get(), pos));\n          caret.set(null);\n        }\n      }\n    };\n    var renderInsideInlineCaret = function (isInlineTarget, editor, caret, elms) {\n      if (editor.selection.isCollapsed()) {\n        var inlines = filter$4(elms, isInlineTarget);\n        each$k(inlines, function (_inline) {\n          var pos = CaretPosition.fromRangeStart(editor.selection.getRng());\n          readLocation(isInlineTarget, editor.getBody(), pos).bind(function (location) {\n            return renderCaretLocation(editor, caret, location);\n          });\n        });\n      }\n    };\n    var move$2 = function (editor, caret, forward) {\n      return isInlineBoundariesEnabled(editor) ? findLocation(editor, caret, forward).isSome() : false;\n    };\n    var moveWord = function (forward, editor, _caret) {\n      return isInlineBoundariesEnabled(editor) ? moveByWord(forward, editor) : false;\n    };\n    var setupSelectedState = function (editor) {\n      var caret = Cell(null);\n      var isInlineTarget$1 = curry(isInlineTarget, editor);\n      editor.on('NodeChange', function (e) {\n        if (isInlineBoundariesEnabled(editor) && !(Env.browser.isIE() && e.initial)) {\n          toggleInlines(isInlineTarget$1, editor.dom, e.parents);\n          safeRemoveCaretContainer(editor, caret);\n          renderInsideInlineCaret(isInlineTarget$1, editor, caret, e.parents);\n        }\n      });\n      return caret;\n    };\n    var moveNextWord = curry(moveWord, true);\n    var movePrevWord = curry(moveWord, false);\n    var moveToLineEndPoint$2 = function (editor, forward, caret) {\n      if (isInlineBoundariesEnabled(editor)) {\n        var linePoint = getLineEndPoint(editor, forward).getOrThunk(function () {\n          var rng = editor.selection.getRng();\n          return forward ? CaretPosition.fromRangeEnd(rng) : CaretPosition.fromRangeStart(rng);\n        });\n        return readLocation(curry(isInlineTarget, editor), editor.getBody(), linePoint).exists(function (loc) {\n          var outsideLoc = outside(loc);\n          return renderCaret(caret, outsideLoc).exists(function (pos) {\n            setCaretPosition(editor, pos);\n            return true;\n          });\n        });\n      } else {\n        return false;\n      }\n    };\n\n    var rangeFromPositions = function (from, to) {\n      var range = document.createRange();\n      range.setStart(from.container(), from.offset());\n      range.setEnd(to.container(), to.offset());\n      return range;\n    };\n    var hasOnlyTwoOrLessPositionsLeft = function (elm) {\n      return lift2(firstPositionIn(elm), lastPositionIn(elm), function (firstPos, lastPos) {\n        var normalizedFirstPos = normalizePosition(true, firstPos);\n        var normalizedLastPos = normalizePosition(false, lastPos);\n        return nextPosition(elm, normalizedFirstPos).forall(function (pos) {\n          return pos.isEqual(normalizedLastPos);\n        });\n      }).getOr(true);\n    };\n    var setCaretLocation = function (editor, caret) {\n      return function (location) {\n        return renderCaret(caret, location).exists(function (pos) {\n          setCaretPosition(editor, pos);\n          return true;\n        });\n      };\n    };\n    var deleteFromTo = function (editor, caret, from, to) {\n      var rootNode = editor.getBody();\n      var isInlineTarget$1 = curry(isInlineTarget, editor);\n      editor.undoManager.ignore(function () {\n        editor.selection.setRng(rangeFromPositions(from, to));\n        editor.execCommand('Delete');\n        readLocation(isInlineTarget$1, rootNode, CaretPosition.fromRangeStart(editor.selection.getRng())).map(inside).map(setCaretLocation(editor, caret));\n      });\n      editor.nodeChanged();\n    };\n    var rescope = function (rootNode, node) {\n      var parentBlock = getParentBlock$2(node, rootNode);\n      return parentBlock ? parentBlock : rootNode;\n    };\n    var backspaceDeleteCollapsed = function (editor, caret, forward, from) {\n      var rootNode = rescope(editor.getBody(), from.container());\n      var isInlineTarget$1 = curry(isInlineTarget, editor);\n      var fromLocation = readLocation(isInlineTarget$1, rootNode, from);\n      return fromLocation.bind(function (location) {\n        if (forward) {\n          return location.fold(constant(Optional.some(inside(location))), Optional.none, constant(Optional.some(outside(location))), Optional.none);\n        } else {\n          return location.fold(Optional.none, constant(Optional.some(outside(location))), Optional.none, constant(Optional.some(inside(location))));\n        }\n      }).map(setCaretLocation(editor, caret)).getOrThunk(function () {\n        var toPosition = navigate(forward, rootNode, from);\n        var toLocation = toPosition.bind(function (pos) {\n          return readLocation(isInlineTarget$1, rootNode, pos);\n        });\n        return lift2(fromLocation, toLocation, function () {\n          return findRootInline(isInlineTarget$1, rootNode, from).exists(function (elm) {\n            if (hasOnlyTwoOrLessPositionsLeft(elm)) {\n              deleteElement$2(editor, forward, SugarElement.fromDom(elm));\n              return true;\n            } else {\n              return false;\n            }\n          });\n        }).orThunk(function () {\n          return toLocation.bind(function (_) {\n            return toPosition.map(function (to) {\n              if (forward) {\n                deleteFromTo(editor, caret, from, to);\n              } else {\n                deleteFromTo(editor, caret, to, from);\n              }\n              return true;\n            });\n          });\n        }).getOr(false);\n      });\n    };\n    var backspaceDelete$3 = function (editor, caret, forward) {\n      if (editor.selection.isCollapsed() && isInlineBoundariesEnabled(editor)) {\n        var from = CaretPosition.fromRangeStart(editor.selection.getRng());\n        return backspaceDeleteCollapsed(editor, caret, forward, from);\n      }\n      return false;\n    };\n\n    var getParentInlines = function (rootElm, startElm) {\n      var parents = parentsAndSelf(startElm, rootElm);\n      return findIndex$2(parents, isBlock$2).fold(constant(parents), function (index) {\n        return parents.slice(0, index);\n      });\n    };\n    var hasOnlyOneChild = function (elm) {\n      return childNodesCount(elm) === 1;\n    };\n    var deleteLastPosition = function (forward, editor, target, parentInlines) {\n      var isFormatElement$1 = curry(isFormatElement, editor);\n      var formatNodes = map$3(filter$4(parentInlines, isFormatElement$1), function (elm) {\n        return elm.dom;\n      });\n      if (formatNodes.length === 0) {\n        deleteElement$2(editor, forward, target);\n      } else {\n        var pos = replaceWithCaretFormat(target.dom, formatNodes);\n        editor.selection.setRng(pos.toRange());\n      }\n    };\n    var deleteCaret$1 = function (editor, forward) {\n      var rootElm = SugarElement.fromDom(editor.getBody());\n      var startElm = SugarElement.fromDom(editor.selection.getStart());\n      var parentInlines = filter$4(getParentInlines(rootElm, startElm), hasOnlyOneChild);\n      return last$2(parentInlines).exists(function (target) {\n        var fromPos = CaretPosition.fromRangeStart(editor.selection.getRng());\n        if (willDeleteLastPositionInElement(forward, fromPos, target.dom) && !isEmptyCaretFormatElement(target)) {\n          deleteLastPosition(forward, editor, target, parentInlines);\n          return true;\n        } else {\n          return false;\n        }\n      });\n    };\n    var backspaceDelete$2 = function (editor, forward) {\n      return editor.selection.isCollapsed() ? deleteCaret$1(editor, forward) : false;\n    };\n\n    var deleteElement = function (editor, forward, element) {\n      editor._selectionOverrides.hideFakeCaret();\n      deleteElement$2(editor, forward, SugarElement.fromDom(element));\n      return true;\n    };\n    var deleteCaret = function (editor, forward) {\n      var isNearMedia = forward ? isBeforeMedia : isAfterMedia;\n      var direction = forward ? HDirection.Forwards : HDirection.Backwards;\n      var fromPos = getNormalizedRangeEndPoint(direction, editor.getBody(), editor.selection.getRng());\n      if (isNearMedia(fromPos)) {\n        return deleteElement(editor, forward, fromPos.getNode(!forward));\n      } else {\n        return Optional.from(normalizePosition(forward, fromPos)).filter(function (pos) {\n          return isNearMedia(pos) && isMoveInsideSameBlock(fromPos, pos);\n        }).exists(function (pos) {\n          return deleteElement(editor, forward, pos.getNode(!forward));\n        });\n      }\n    };\n    var deleteRange = function (editor, forward) {\n      var selectedNode = editor.selection.getNode();\n      return isMedia$2(selectedNode) ? deleteElement(editor, forward, selectedNode) : false;\n    };\n    var backspaceDelete$1 = function (editor, forward) {\n      return editor.selection.isCollapsed() ? deleteCaret(editor, forward) : deleteRange(editor, forward);\n    };\n\n    var isEditable = function (target) {\n      return closest$3(target, function (elm) {\n        return isContentEditableTrue$4(elm.dom) || isContentEditableFalse$b(elm.dom);\n      }).exists(function (elm) {\n        return isContentEditableTrue$4(elm.dom);\n      });\n    };\n    var parseIndentValue = function (value) {\n      var number = parseInt(value, 10);\n      return isNaN(number) ? 0 : number;\n    };\n    var getIndentStyleName = function (useMargin, element) {\n      var indentStyleName = useMargin || isTable$2(element) ? 'margin' : 'padding';\n      var suffix = get$5(element, 'direction') === 'rtl' ? '-right' : '-left';\n      return indentStyleName + suffix;\n    };\n    var indentElement = function (dom, command, useMargin, value, unit, element) {\n      var indentStyleName = getIndentStyleName(useMargin, SugarElement.fromDom(element));\n      if (command === 'outdent') {\n        var styleValue = Math.max(0, parseIndentValue(element.style[indentStyleName]) - value);\n        dom.setStyle(element, indentStyleName, styleValue ? styleValue + unit : '');\n      } else {\n        var styleValue = parseIndentValue(element.style[indentStyleName]) + value + unit;\n        dom.setStyle(element, indentStyleName, styleValue);\n      }\n    };\n    var validateBlocks = function (editor, blocks) {\n      return forall(blocks, function (block) {\n        var indentStyleName = getIndentStyleName(shouldIndentUseMargin(editor), block);\n        var intentValue = getRaw(block, indentStyleName).map(parseIndentValue).getOr(0);\n        var contentEditable = editor.dom.getContentEditable(block.dom);\n        return contentEditable !== 'false' && intentValue > 0;\n      });\n    };\n    var canOutdent = function (editor) {\n      var blocks = getBlocksToIndent(editor);\n      return !editor.mode.isReadOnly() && (blocks.length > 1 || validateBlocks(editor, blocks));\n    };\n    var isListComponent = function (el) {\n      return isList(el) || isListItem(el);\n    };\n    var parentIsListComponent = function (el) {\n      return parent(el).exists(isListComponent);\n    };\n    var getBlocksToIndent = function (editor) {\n      return filter$4(fromDom$1(editor.selection.getSelectedBlocks()), function (el) {\n        return !isListComponent(el) && !parentIsListComponent(el) && isEditable(el);\n      });\n    };\n    var handle = function (editor, command) {\n      var dom = editor.dom, selection = editor.selection, formatter = editor.formatter;\n      var indentation = getIndentation(editor);\n      var indentUnit = /[a-z%]+$/i.exec(indentation)[0];\n      var indentValue = parseInt(indentation, 10);\n      var useMargin = shouldIndentUseMargin(editor);\n      var forcedRootBlock = getForcedRootBlock(editor);\n      if (!editor.queryCommandState('InsertUnorderedList') && !editor.queryCommandState('InsertOrderedList')) {\n        if (forcedRootBlock === '' && !dom.getParent(selection.getNode(), dom.isBlock)) {\n          formatter.apply('div');\n        }\n      }\n      each$k(getBlocksToIndent(editor), function (block) {\n        indentElement(dom, command, useMargin, indentValue, indentUnit, block.dom);\n      });\n    };\n\n    var backspaceDelete = function (editor, _forward) {\n      if (editor.selection.isCollapsed() && canOutdent(editor)) {\n        var dom = editor.dom;\n        var rng = editor.selection.getRng();\n        var pos = CaretPosition.fromRangeStart(rng);\n        var block = dom.getParent(rng.startContainer, dom.isBlock);\n        if (block !== null && isAtStartOfBlock(SugarElement.fromDom(block), pos)) {\n          handle(editor, 'outdent');\n          return true;\n        }\n      }\n      return false;\n    };\n\n    var nativeCommand = function (editor, command) {\n      editor.getDoc().execCommand(command, false, null);\n    };\n    var deleteCommand = function (editor, caret) {\n      if (backspaceDelete(editor)) {\n        return;\n      } else if (backspaceDelete$5(editor, false)) {\n        return;\n      } else if (backspaceDelete$6(editor, false)) {\n        return;\n      } else if (backspaceDelete$3(editor, caret, false)) {\n        return;\n      } else if (backspaceDelete$8(editor, false)) {\n        return;\n      } else if (backspaceDelete$9(editor)) {\n        return;\n      } else if (backspaceDelete$4(editor, false)) {\n        return;\n      } else if (backspaceDelete$1(editor, false)) {\n        return;\n      } else if (backspaceDelete$7(editor)) {\n        return;\n      } else if (backspaceDelete$2(editor, false)) {\n        return;\n      } else {\n        nativeCommand(editor, 'Delete');\n        paddEmptyBody(editor);\n      }\n    };\n    var forwardDeleteCommand = function (editor, caret) {\n      if (backspaceDelete$5(editor, true)) {\n        return;\n      } else if (backspaceDelete$6(editor, true)) {\n        return;\n      } else if (backspaceDelete$3(editor, caret, true)) {\n        return;\n      } else if (backspaceDelete$8(editor, true)) {\n        return;\n      } else if (backspaceDelete$9(editor)) {\n        return;\n      } else if (backspaceDelete$4(editor, true)) {\n        return;\n      } else if (backspaceDelete$1(editor, true)) {\n        return;\n      } else if (backspaceDelete$7(editor)) {\n        return;\n      } else if (backspaceDelete$2(editor, true)) {\n        return;\n      } else {\n        nativeCommand(editor, 'ForwardDelete');\n      }\n    };\n    var setup$f = function (editor, caret) {\n      editor.addCommand('delete', function () {\n        deleteCommand(editor, caret);\n      });\n      editor.addCommand('forwardDelete', function () {\n        forwardDeleteCommand(editor, caret);\n      });\n    };\n\n    var SIGNIFICANT_MOVE = 5;\n    var LONGPRESS_DELAY = 400;\n    var getTouch = function (event) {\n      if (event.touches === undefined || event.touches.length !== 1) {\n        return Optional.none();\n      }\n      return Optional.some(event.touches[0]);\n    };\n    var isFarEnough = function (touch, data) {\n      var distX = Math.abs(touch.clientX - data.x);\n      var distY = Math.abs(touch.clientY - data.y);\n      return distX > SIGNIFICANT_MOVE || distY > SIGNIFICANT_MOVE;\n    };\n    var setup$e = function (editor) {\n      var startData = value();\n      var longpressFired = Cell(false);\n      var debounceLongpress = last(function (e) {\n        editor.fire('longpress', __assign(__assign({}, e), { type: 'longpress' }));\n        longpressFired.set(true);\n      }, LONGPRESS_DELAY);\n      editor.on('touchstart', function (e) {\n        getTouch(e).each(function (touch) {\n          debounceLongpress.cancel();\n          var data = {\n            x: touch.clientX,\n            y: touch.clientY,\n            target: e.target\n          };\n          debounceLongpress.throttle(e);\n          longpressFired.set(false);\n          startData.set(data);\n        });\n      }, true);\n      editor.on('touchmove', function (e) {\n        debounceLongpress.cancel();\n        getTouch(e).each(function (touch) {\n          startData.on(function (data) {\n            if (isFarEnough(touch, data)) {\n              startData.clear();\n              longpressFired.set(false);\n              editor.fire('longpresscancel');\n            }\n          });\n        });\n      }, true);\n      editor.on('touchend touchcancel', function (e) {\n        debounceLongpress.cancel();\n        if (e.type === 'touchcancel') {\n          return;\n        }\n        startData.get().filter(function (data) {\n          return data.target.isEqualNode(e.target);\n        }).each(function () {\n          if (longpressFired.get()) {\n            e.preventDefault();\n          } else {\n            editor.fire('tap', __assign(__assign({}, e), { type: 'tap' }));\n          }\n        });\n      }, true);\n    };\n\n    var isBlockElement = function (blockElements, node) {\n      return has$2(blockElements, node.nodeName);\n    };\n    var isValidTarget = function (blockElements, node) {\n      if (isText$7(node)) {\n        return true;\n      } else if (isElement$5(node)) {\n        return !isBlockElement(blockElements, node) && !isBookmarkNode$1(node);\n      } else {\n        return false;\n      }\n    };\n    var hasBlockParent = function (blockElements, root, node) {\n      return exists(parents(SugarElement.fromDom(node), SugarElement.fromDom(root)), function (elm) {\n        return isBlockElement(blockElements, elm.dom);\n      });\n    };\n    var shouldRemoveTextNode = function (blockElements, node) {\n      if (isText$7(node)) {\n        if (node.nodeValue.length === 0) {\n          return true;\n        } else if (/^\\s+$/.test(node.nodeValue) && (!node.nextSibling || isBlockElement(blockElements, node.nextSibling))) {\n          return true;\n        }\n      }\n      return false;\n    };\n    var addRootBlocks = function (editor) {\n      var dom = editor.dom, selection = editor.selection;\n      var schema = editor.schema, blockElements = schema.getBlockElements();\n      var node = selection.getStart();\n      var rootNode = editor.getBody();\n      var rootBlockNode, tempNode, wrapped;\n      var forcedRootBlock = getForcedRootBlock(editor);\n      if (!node || !isElement$5(node) || !forcedRootBlock) {\n        return;\n      }\n      var rootNodeName = rootNode.nodeName.toLowerCase();\n      if (!schema.isValidChild(rootNodeName, forcedRootBlock.toLowerCase()) || hasBlockParent(blockElements, rootNode, node)) {\n        return;\n      }\n      var rng = selection.getRng();\n      var startContainer = rng.startContainer;\n      var startOffset = rng.startOffset;\n      var endContainer = rng.endContainer;\n      var endOffset = rng.endOffset;\n      var restoreSelection = hasFocus(editor);\n      node = rootNode.firstChild;\n      while (node) {\n        if (isValidTarget(blockElements, node)) {\n          if (shouldRemoveTextNode(blockElements, node)) {\n            tempNode = node;\n            node = node.nextSibling;\n            dom.remove(tempNode);\n            continue;\n          }\n          if (!rootBlockNode) {\n            rootBlockNode = dom.create(forcedRootBlock, getForcedRootBlockAttrs(editor));\n            node.parentNode.insertBefore(rootBlockNode, node);\n            wrapped = true;\n          }\n          tempNode = node;\n          node = node.nextSibling;\n          rootBlockNode.appendChild(tempNode);\n        } else {\n          rootBlockNode = null;\n          node = node.nextSibling;\n        }\n      }\n      if (wrapped && restoreSelection) {\n        rng.setStart(startContainer, startOffset);\n        rng.setEnd(endContainer, endOffset);\n        selection.setRng(rng);\n        editor.nodeChanged();\n      }\n    };\n    var setup$d = function (editor) {\n      if (getForcedRootBlock(editor)) {\n        editor.on('NodeChange', curry(addRootBlocks, editor));\n      }\n    };\n\n    var findBlockCaretContainer = function (editor) {\n      return descendant(SugarElement.fromDom(editor.getBody()), '*[data-mce-caret]').map(function (elm) {\n        return elm.dom;\n      }).getOrNull();\n    };\n    var removeIeControlRect = function (editor) {\n      editor.selection.setRng(editor.selection.getRng());\n    };\n    var showBlockCaretContainer = function (editor, blockCaretContainer) {\n      if (blockCaretContainer.hasAttribute('data-mce-caret')) {\n        showCaretContainerBlock(blockCaretContainer);\n        removeIeControlRect(editor);\n        editor.selection.scrollIntoView(blockCaretContainer);\n      }\n    };\n    var handleBlockContainer = function (editor, e) {\n      var blockCaretContainer = findBlockCaretContainer(editor);\n      if (!blockCaretContainer) {\n        return;\n      }\n      if (e.type === 'compositionstart') {\n        e.preventDefault();\n        e.stopPropagation();\n        showBlockCaretContainer(editor, blockCaretContainer);\n        return;\n      }\n      if (hasContent(blockCaretContainer)) {\n        showBlockCaretContainer(editor, blockCaretContainer);\n        editor.undoManager.add();\n      }\n    };\n    var setup$c = function (editor) {\n      editor.on('keyup compositionstart', curry(handleBlockContainer, editor));\n    };\n\n    var isContentEditableFalse$2 = isContentEditableFalse$b;\n    var moveToCeFalseHorizontally = function (direction, editor, range) {\n      return moveHorizontally(editor, direction, range, isBeforeContentEditableFalse, isAfterContentEditableFalse, isContentEditableFalse$2);\n    };\n    var moveToCeFalseVertically = function (direction, editor, range) {\n      var isBefore = function (caretPosition) {\n        return isBeforeContentEditableFalse(caretPosition) || isBeforeTable(caretPosition);\n      };\n      var isAfter = function (caretPosition) {\n        return isAfterContentEditableFalse(caretPosition) || isAfterTable(caretPosition);\n      };\n      return moveVertically(editor, direction, range, isBefore, isAfter, isContentEditableFalse$2);\n    };\n    var createTextBlock = function (editor) {\n      var textBlock = editor.dom.create(getForcedRootBlock(editor));\n      if (!Env.ie || Env.ie >= 11) {\n        textBlock.innerHTML = '<br data-mce-bogus=\"1\">';\n      }\n      return textBlock;\n    };\n    var exitPreBlock = function (editor, direction, range) {\n      var caretWalker = CaretWalker(editor.getBody());\n      var getVisualCaretPosition$1 = curry(getVisualCaretPosition, direction === 1 ? caretWalker.next : caretWalker.prev);\n      if (range.collapsed && hasForcedRootBlock(editor)) {\n        var pre = editor.dom.getParent(range.startContainer, 'PRE');\n        if (!pre) {\n          return;\n        }\n        var caretPos = getVisualCaretPosition$1(CaretPosition.fromRangeStart(range));\n        if (!caretPos) {\n          var newBlock = createTextBlock(editor);\n          if (direction === 1) {\n            editor.$(pre).after(newBlock);\n          } else {\n            editor.$(pre).before(newBlock);\n          }\n          editor.selection.select(newBlock, true);\n          editor.selection.collapse();\n        }\n      }\n    };\n    var getHorizontalRange = function (editor, forward) {\n      var direction = forward ? HDirection.Forwards : HDirection.Backwards;\n      var range = editor.selection.getRng();\n      return moveToCeFalseHorizontally(direction, editor, range).orThunk(function () {\n        exitPreBlock(editor, direction, range);\n        return Optional.none();\n      });\n    };\n    var getVerticalRange = function (editor, down) {\n      var direction = down ? 1 : -1;\n      var range = editor.selection.getRng();\n      return moveToCeFalseVertically(direction, editor, range).orThunk(function () {\n        exitPreBlock(editor, direction, range);\n        return Optional.none();\n      });\n    };\n    var moveH$2 = function (editor, forward) {\n      return getHorizontalRange(editor, forward).exists(function (newRange) {\n        moveToRange(editor, newRange);\n        return true;\n      });\n    };\n    var moveV$3 = function (editor, down) {\n      return getVerticalRange(editor, down).exists(function (newRange) {\n        moveToRange(editor, newRange);\n        return true;\n      });\n    };\n    var moveToLineEndPoint$1 = function (editor, forward) {\n      var isCefPosition = forward ? isAfterContentEditableFalse : isBeforeContentEditableFalse;\n      return moveToLineEndPoint$3(editor, forward, isCefPosition);\n    };\n\n    var isTarget = function (node) {\n      return contains$3(['figcaption'], name(node));\n    };\n    var rangeBefore = function (target) {\n      var rng = document.createRange();\n      rng.setStartBefore(target.dom);\n      rng.setEndBefore(target.dom);\n      return rng;\n    };\n    var insertElement = function (root, elm, forward) {\n      if (forward) {\n        append$1(root, elm);\n      } else {\n        prepend(root, elm);\n      }\n    };\n    var insertBr = function (root, forward) {\n      var br = SugarElement.fromTag('br');\n      insertElement(root, br, forward);\n      return rangeBefore(br);\n    };\n    var insertBlock = function (root, forward, blockName, attrs) {\n      var block = SugarElement.fromTag(blockName);\n      var br = SugarElement.fromTag('br');\n      setAll$1(block, attrs);\n      append$1(block, br);\n      insertElement(root, block, forward);\n      return rangeBefore(br);\n    };\n    var insertEmptyLine = function (root, rootBlockName, attrs, forward) {\n      if (rootBlockName === '') {\n        return insertBr(root, forward);\n      } else {\n        return insertBlock(root, forward, rootBlockName, attrs);\n      }\n    };\n    var getClosestTargetBlock = function (pos, root) {\n      var isRoot = curry(eq, root);\n      return closest$3(SugarElement.fromDom(pos.container()), isBlock$2, isRoot).filter(isTarget);\n    };\n    var isAtFirstOrLastLine = function (root, forward, pos) {\n      return forward ? isAtLastLine(root.dom, pos) : isAtFirstLine(root.dom, pos);\n    };\n    var moveCaretToNewEmptyLine = function (editor, forward) {\n      var root = SugarElement.fromDom(editor.getBody());\n      var pos = CaretPosition.fromRangeStart(editor.selection.getRng());\n      var rootBlock = getForcedRootBlock(editor);\n      var rootBlockAttrs = getForcedRootBlockAttrs(editor);\n      return getClosestTargetBlock(pos, root).exists(function () {\n        if (isAtFirstOrLastLine(root, forward, pos)) {\n          var rng = insertEmptyLine(root, rootBlock, rootBlockAttrs, forward);\n          editor.selection.setRng(rng);\n          return true;\n        } else {\n          return false;\n        }\n      });\n    };\n    var moveV$2 = function (editor, forward) {\n      if (editor.selection.isCollapsed()) {\n        return moveCaretToNewEmptyLine(editor, forward);\n      } else {\n        return false;\n      }\n    };\n\n    var defaultPatterns = function (patterns) {\n      return map$3(patterns, function (pattern) {\n        return __assign({\n          shiftKey: false,\n          altKey: false,\n          ctrlKey: false,\n          metaKey: false,\n          keyCode: 0,\n          action: noop\n        }, pattern);\n      });\n    };\n    var matchesEvent = function (pattern, evt) {\n      return evt.keyCode === pattern.keyCode && evt.shiftKey === pattern.shiftKey && evt.altKey === pattern.altKey && evt.ctrlKey === pattern.ctrlKey && evt.metaKey === pattern.metaKey;\n    };\n    var match$1 = function (patterns, evt) {\n      return bind(defaultPatterns(patterns), function (pattern) {\n        return matchesEvent(pattern, evt) ? [pattern] : [];\n      });\n    };\n    var action = function (f) {\n      var x = [];\n      for (var _i = 1; _i < arguments.length; _i++) {\n        x[_i - 1] = arguments[_i];\n      }\n      return function () {\n        return f.apply(null, x);\n      };\n    };\n    var execute = function (patterns, evt) {\n      return find$3(match$1(patterns, evt), function (pattern) {\n        return pattern.action();\n      });\n    };\n\n    var moveH$1 = function (editor, forward) {\n      var direction = forward ? HDirection.Forwards : HDirection.Backwards;\n      var range = editor.selection.getRng();\n      return moveHorizontally(editor, direction, range, isBeforeMedia, isAfterMedia, isMedia$2).exists(function (newRange) {\n        moveToRange(editor, newRange);\n        return true;\n      });\n    };\n    var moveV$1 = function (editor, down) {\n      var direction = down ? 1 : -1;\n      var range = editor.selection.getRng();\n      return moveVertically(editor, direction, range, isBeforeMedia, isAfterMedia, isMedia$2).exists(function (newRange) {\n        moveToRange(editor, newRange);\n        return true;\n      });\n    };\n    var moveToLineEndPoint = function (editor, forward) {\n      var isNearMedia = forward ? isAfterMedia : isBeforeMedia;\n      return moveToLineEndPoint$3(editor, forward, isNearMedia);\n    };\n\n    var deflate = function (rect, delta) {\n      return {\n        left: rect.left - delta,\n        top: rect.top - delta,\n        right: rect.right + delta * 2,\n        bottom: rect.bottom + delta * 2,\n        width: rect.width + delta,\n        height: rect.height + delta\n      };\n    };\n    var getCorners = function (getYAxisValue, tds) {\n      return bind(tds, function (td) {\n        var rect = deflate(clone(td.getBoundingClientRect()), -1);\n        return [\n          {\n            x: rect.left,\n            y: getYAxisValue(rect),\n            cell: td\n          },\n          {\n            x: rect.right,\n            y: getYAxisValue(rect),\n            cell: td\n          }\n        ];\n      });\n    };\n    var findClosestCorner = function (corners, x, y) {\n      return foldl(corners, function (acc, newCorner) {\n        return acc.fold(function () {\n          return Optional.some(newCorner);\n        }, function (oldCorner) {\n          var oldDist = Math.sqrt(Math.abs(oldCorner.x - x) + Math.abs(oldCorner.y - y));\n          var newDist = Math.sqrt(Math.abs(newCorner.x - x) + Math.abs(newCorner.y - y));\n          return Optional.some(newDist < oldDist ? newCorner : oldCorner);\n        });\n      }, Optional.none());\n    };\n    var getClosestCell = function (getYAxisValue, isTargetCorner, table, x, y) {\n      var cells = descendants(SugarElement.fromDom(table), 'td,th,caption').map(function (e) {\n        return e.dom;\n      });\n      var corners = filter$4(getCorners(getYAxisValue, cells), function (corner) {\n        return isTargetCorner(corner, y);\n      });\n      return findClosestCorner(corners, x, y).map(function (corner) {\n        return corner.cell;\n      });\n    };\n    var getBottomValue = function (rect) {\n      return rect.bottom;\n    };\n    var getTopValue = function (rect) {\n      return rect.top;\n    };\n    var isAbove = function (corner, y) {\n      return corner.y < y;\n    };\n    var isBelow = function (corner, y) {\n      return corner.y > y;\n    };\n    var getClosestCellAbove = curry(getClosestCell, getBottomValue, isAbove);\n    var getClosestCellBelow = curry(getClosestCell, getTopValue, isBelow);\n    var findClosestPositionInAboveCell = function (table, pos) {\n      return head(pos.getClientRects()).bind(function (rect) {\n        return getClosestCellAbove(table, rect.left, rect.top);\n      }).bind(function (cell) {\n        return findClosestHorizontalPosition(getLastLinePositions(cell), pos);\n      });\n    };\n    var findClosestPositionInBelowCell = function (table, pos) {\n      return last$2(pos.getClientRects()).bind(function (rect) {\n        return getClosestCellBelow(table, rect.left, rect.top);\n      }).bind(function (cell) {\n        return findClosestHorizontalPosition(getFirstLinePositions(cell), pos);\n      });\n    };\n\n    var hasNextBreak = function (getPositionsUntil, scope, lineInfo) {\n      return lineInfo.breakAt.exists(function (breakPos) {\n        return getPositionsUntil(scope, breakPos).breakAt.isSome();\n      });\n    };\n    var startsWithWrapBreak = function (lineInfo) {\n      return lineInfo.breakType === BreakType.Wrap && lineInfo.positions.length === 0;\n    };\n    var startsWithBrBreak = function (lineInfo) {\n      return lineInfo.breakType === BreakType.Br && lineInfo.positions.length === 1;\n    };\n    var isAtTableCellLine = function (getPositionsUntil, scope, pos) {\n      var lineInfo = getPositionsUntil(scope, pos);\n      if (startsWithWrapBreak(lineInfo) || !isBr$5(pos.getNode()) && startsWithBrBreak(lineInfo)) {\n        return !hasNextBreak(getPositionsUntil, scope, lineInfo);\n      } else {\n        return lineInfo.breakAt.isNone();\n      }\n    };\n    var isAtFirstTableCellLine = curry(isAtTableCellLine, getPositionsUntilPreviousLine);\n    var isAtLastTableCellLine = curry(isAtTableCellLine, getPositionsUntilNextLine);\n    var isCaretAtStartOrEndOfTable = function (forward, rng, table) {\n      var caretPos = CaretPosition.fromRangeStart(rng);\n      return positionIn(!forward, table).exists(function (pos) {\n        return pos.isEqual(caretPos);\n      });\n    };\n    var navigateHorizontally = function (editor, forward, table, _td) {\n      var rng = editor.selection.getRng();\n      var direction = forward ? 1 : -1;\n      if (isFakeCaretTableBrowser() && isCaretAtStartOrEndOfTable(forward, rng, table)) {\n        showCaret(direction, editor, table, !forward, false).each(function (newRng) {\n          moveToRange(editor, newRng);\n        });\n        return true;\n      }\n      return false;\n    };\n    var getClosestAbovePosition = function (root, table, start) {\n      return findClosestPositionInAboveCell(table, start).orThunk(function () {\n        return head(start.getClientRects()).bind(function (rect) {\n          return findClosestHorizontalPositionFromPoint(getPositionsAbove(root, CaretPosition.before(table)), rect.left);\n        });\n      }).getOr(CaretPosition.before(table));\n    };\n    var getClosestBelowPosition = function (root, table, start) {\n      return findClosestPositionInBelowCell(table, start).orThunk(function () {\n        return head(start.getClientRects()).bind(function (rect) {\n          return findClosestHorizontalPositionFromPoint(getPositionsBelow(root, CaretPosition.after(table)), rect.left);\n        });\n      }).getOr(CaretPosition.after(table));\n    };\n    var getTable = function (previous, pos) {\n      var node = pos.getNode(previous);\n      return isElement$5(node) && node.nodeName === 'TABLE' ? Optional.some(node) : Optional.none();\n    };\n    var renderBlock = function (down, editor, table, pos) {\n      var forcedRootBlock = getForcedRootBlock(editor);\n      if (forcedRootBlock) {\n        editor.undoManager.transact(function () {\n          var element = SugarElement.fromTag(forcedRootBlock);\n          setAll$1(element, getForcedRootBlockAttrs(editor));\n          append$1(element, SugarElement.fromTag('br'));\n          if (down) {\n            after$3(SugarElement.fromDom(table), element);\n          } else {\n            before$4(SugarElement.fromDom(table), element);\n          }\n          var rng = editor.dom.createRng();\n          rng.setStart(element.dom, 0);\n          rng.setEnd(element.dom, 0);\n          moveToRange(editor, rng);\n        });\n      } else {\n        moveToRange(editor, pos.toRange());\n      }\n    };\n    var moveCaret = function (editor, down, pos) {\n      var table = down ? getTable(true, pos) : getTable(false, pos);\n      var last = down === false;\n      table.fold(function () {\n        return moveToRange(editor, pos.toRange());\n      }, function (table) {\n        return positionIn(last, editor.getBody()).filter(function (lastPos) {\n          return lastPos.isEqual(pos);\n        }).fold(function () {\n          return moveToRange(editor, pos.toRange());\n        }, function (_) {\n          return renderBlock(down, editor, table, pos);\n        });\n      });\n    };\n    var navigateVertically = function (editor, down, table, td) {\n      var rng = editor.selection.getRng();\n      var pos = CaretPosition.fromRangeStart(rng);\n      var root = editor.getBody();\n      if (!down && isAtFirstTableCellLine(td, pos)) {\n        var newPos = getClosestAbovePosition(root, table, pos);\n        moveCaret(editor, down, newPos);\n        return true;\n      } else if (down && isAtLastTableCellLine(td, pos)) {\n        var newPos = getClosestBelowPosition(root, table, pos);\n        moveCaret(editor, down, newPos);\n        return true;\n      } else {\n        return false;\n      }\n    };\n    var move$1 = function (editor, forward, mover) {\n      return Optional.from(editor.dom.getParent(editor.selection.getNode(), 'td,th')).bind(function (td) {\n        return Optional.from(editor.dom.getParent(td, 'table')).map(function (table) {\n          return mover(editor, forward, table, td);\n        });\n      }).getOr(false);\n    };\n    var moveH = function (editor, forward) {\n      return move$1(editor, forward, navigateHorizontally);\n    };\n    var moveV = function (editor, forward) {\n      return move$1(editor, forward, navigateVertically);\n    };\n\n    var executeKeydownOverride$3 = function (editor, caret, evt) {\n      var os = detect().os;\n      execute([\n        {\n          keyCode: VK.RIGHT,\n          action: action(moveH$2, editor, true)\n        },\n        {\n          keyCode: VK.LEFT,\n          action: action(moveH$2, editor, false)\n        },\n        {\n          keyCode: VK.UP,\n          action: action(moveV$3, editor, false)\n        },\n        {\n          keyCode: VK.DOWN,\n          action: action(moveV$3, editor, true)\n        },\n        {\n          keyCode: VK.RIGHT,\n          action: action(moveH, editor, true)\n        },\n        {\n          keyCode: VK.LEFT,\n          action: action(moveH, editor, false)\n        },\n        {\n          keyCode: VK.UP,\n          action: action(moveV, editor, false)\n        },\n        {\n          keyCode: VK.DOWN,\n          action: action(moveV, editor, true)\n        },\n        {\n          keyCode: VK.RIGHT,\n          action: action(moveH$1, editor, true)\n        },\n        {\n          keyCode: VK.LEFT,\n          action: action(moveH$1, editor, false)\n        },\n        {\n          keyCode: VK.UP,\n          action: action(moveV$1, editor, false)\n        },\n        {\n          keyCode: VK.DOWN,\n          action: action(moveV$1, editor, true)\n        },\n        {\n          keyCode: VK.RIGHT,\n          action: action(move$2, editor, caret, true)\n        },\n        {\n          keyCode: VK.LEFT,\n          action: action(move$2, editor, caret, false)\n        },\n        {\n          keyCode: VK.RIGHT,\n          ctrlKey: !os.isOSX(),\n          altKey: os.isOSX(),\n          action: action(moveNextWord, editor, caret)\n        },\n        {\n          keyCode: VK.LEFT,\n          ctrlKey: !os.isOSX(),\n          altKey: os.isOSX(),\n          action: action(movePrevWord, editor, caret)\n        },\n        {\n          keyCode: VK.UP,\n          action: action(moveV$2, editor, false)\n        },\n        {\n          keyCode: VK.DOWN,\n          action: action(moveV$2, editor, true)\n        }\n      ], evt).each(function (_) {\n        evt.preventDefault();\n      });\n    };\n    var setup$b = function (editor, caret) {\n      editor.on('keydown', function (evt) {\n        if (evt.isDefaultPrevented() === false) {\n          executeKeydownOverride$3(editor, caret, evt);\n        }\n      });\n    };\n\n    var executeKeydownOverride$2 = function (editor, caret, evt) {\n      execute([\n        {\n          keyCode: VK.BACKSPACE,\n          action: action(backspaceDelete, editor, false)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: action(backspaceDelete$5, editor, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: action(backspaceDelete$5, editor, true)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: action(backspaceDelete$6, editor, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: action(backspaceDelete$6, editor, true)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: action(backspaceDelete$3, editor, caret, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: action(backspaceDelete$3, editor, caret, true)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: action(backspaceDelete$9, editor, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: action(backspaceDelete$9, editor, true)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: action(backspaceDelete$4, editor, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: action(backspaceDelete$4, editor, true)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: action(backspaceDelete$1, editor, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: action(backspaceDelete$1, editor, true)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: action(backspaceDelete$7, editor, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: action(backspaceDelete$7, editor, true)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: action(backspaceDelete$8, editor, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: action(backspaceDelete$8, editor, true)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: action(backspaceDelete$2, editor, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: action(backspaceDelete$2, editor, true)\n        }\n      ], evt).each(function (_) {\n        evt.preventDefault();\n      });\n    };\n    var executeKeyupOverride = function (editor, evt) {\n      execute([\n        {\n          keyCode: VK.BACKSPACE,\n          action: action(paddEmptyElement, editor)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: action(paddEmptyElement, editor)\n        }\n      ], evt);\n    };\n    var setup$a = function (editor, caret) {\n      editor.on('keydown', function (evt) {\n        if (evt.isDefaultPrevented() === false) {\n          executeKeydownOverride$2(editor, caret, evt);\n        }\n      });\n      editor.on('keyup', function (evt) {\n        if (evt.isDefaultPrevented() === false) {\n          executeKeyupOverride(editor, evt);\n        }\n      });\n    };\n\n    var firstNonWhiteSpaceNodeSibling = function (node) {\n      while (node) {\n        if (node.nodeType === 1 || node.nodeType === 3 && node.data && /[\\r\\n\\s]/.test(node.data)) {\n          return node;\n        }\n        node = node.nextSibling;\n      }\n    };\n    var moveToCaretPosition = function (editor, root) {\n      var node, lastNode = root;\n      var dom = editor.dom;\n      var moveCaretBeforeOnEnterElementsMap = editor.schema.getMoveCaretBeforeOnEnterElements();\n      if (!root) {\n        return;\n      }\n      if (/^(LI|DT|DD)$/.test(root.nodeName)) {\n        var firstChild = firstNonWhiteSpaceNodeSibling(root.firstChild);\n        if (firstChild && /^(UL|OL|DL)$/.test(firstChild.nodeName)) {\n          root.insertBefore(dom.doc.createTextNode(nbsp), root.firstChild);\n        }\n      }\n      var rng = dom.createRng();\n      root.normalize();\n      if (root.hasChildNodes()) {\n        var walker = new DomTreeWalker(root, root);\n        while (node = walker.current()) {\n          if (isText$7(node)) {\n            rng.setStart(node, 0);\n            rng.setEnd(node, 0);\n            break;\n          }\n          if (moveCaretBeforeOnEnterElementsMap[node.nodeName.toLowerCase()]) {\n            rng.setStartBefore(node);\n            rng.setEndBefore(node);\n            break;\n          }\n          lastNode = node;\n          node = walker.next();\n        }\n        if (!node) {\n          rng.setStart(lastNode, 0);\n          rng.setEnd(lastNode, 0);\n        }\n      } else {\n        if (isBr$5(root)) {\n          if (root.nextSibling && dom.isBlock(root.nextSibling)) {\n            rng.setStartBefore(root);\n            rng.setEndBefore(root);\n          } else {\n            rng.setStartAfter(root);\n            rng.setEndAfter(root);\n          }\n        } else {\n          rng.setStart(root, 0);\n          rng.setEnd(root, 0);\n        }\n      }\n      editor.selection.setRng(rng);\n      scrollRangeIntoView(editor, rng);\n    };\n    var getEditableRoot$1 = function (dom, node) {\n      var root = dom.getRoot();\n      var parent, editableRoot;\n      parent = node;\n      while (parent !== root && dom.getContentEditable(parent) !== 'false') {\n        if (dom.getContentEditable(parent) === 'true') {\n          editableRoot = parent;\n        }\n        parent = parent.parentNode;\n      }\n      return parent !== root ? editableRoot : root;\n    };\n    var getParentBlock = function (editor) {\n      return Optional.from(editor.dom.getParent(editor.selection.getStart(true), editor.dom.isBlock));\n    };\n    var getParentBlockName = function (editor) {\n      return getParentBlock(editor).fold(constant(''), function (parentBlock) {\n        return parentBlock.nodeName.toUpperCase();\n      });\n    };\n    var isListItemParentBlock = function (editor) {\n      return getParentBlock(editor).filter(function (elm) {\n        return isListItem(SugarElement.fromDom(elm));\n      }).isSome();\n    };\n\n    var hasFirstChild = function (elm, name) {\n      return elm.firstChild && elm.firstChild.nodeName === name;\n    };\n    var isFirstChild = function (elm) {\n      var _a;\n      return ((_a = elm.parentNode) === null || _a === void 0 ? void 0 : _a.firstChild) === elm;\n    };\n    var hasParent = function (elm, parentName) {\n      return elm && elm.parentNode && elm.parentNode.nodeName === parentName;\n    };\n    var isListBlock = function (elm) {\n      return elm && /^(OL|UL|LI)$/.test(elm.nodeName);\n    };\n    var isNestedList = function (elm) {\n      return isListBlock(elm) && isListBlock(elm.parentNode);\n    };\n    var getContainerBlock = function (containerBlock) {\n      var containerBlockParent = containerBlock.parentNode;\n      if (/^(LI|DT|DD)$/.test(containerBlockParent.nodeName)) {\n        return containerBlockParent;\n      }\n      return containerBlock;\n    };\n    var isFirstOrLastLi = function (containerBlock, parentBlock, first) {\n      var node = containerBlock[first ? 'firstChild' : 'lastChild'];\n      while (node) {\n        if (isElement$5(node)) {\n          break;\n        }\n        node = node[first ? 'nextSibling' : 'previousSibling'];\n      }\n      return node === parentBlock;\n    };\n    var insert$3 = function (editor, createNewBlock, containerBlock, parentBlock, newBlockName) {\n      var dom = editor.dom;\n      var rng = editor.selection.getRng();\n      if (containerBlock === editor.getBody()) {\n        return;\n      }\n      if (isNestedList(containerBlock)) {\n        newBlockName = 'LI';\n      }\n      var newBlock = newBlockName ? createNewBlock(newBlockName) : dom.create('BR');\n      if (isFirstOrLastLi(containerBlock, parentBlock, true) && isFirstOrLastLi(containerBlock, parentBlock, false)) {\n        if (hasParent(containerBlock, 'LI')) {\n          var containerBlockParent = getContainerBlock(containerBlock);\n          dom.insertAfter(newBlock, containerBlockParent);\n          if (isFirstChild(containerBlock)) {\n            dom.remove(containerBlockParent);\n          } else {\n            dom.remove(containerBlock);\n          }\n        } else {\n          dom.replace(newBlock, containerBlock);\n        }\n      } else if (isFirstOrLastLi(containerBlock, parentBlock, true)) {\n        if (hasParent(containerBlock, 'LI')) {\n          dom.insertAfter(newBlock, getContainerBlock(containerBlock));\n          newBlock.appendChild(dom.doc.createTextNode(' '));\n          newBlock.appendChild(containerBlock);\n        } else {\n          containerBlock.parentNode.insertBefore(newBlock, containerBlock);\n        }\n        dom.remove(parentBlock);\n      } else if (isFirstOrLastLi(containerBlock, parentBlock, false)) {\n        dom.insertAfter(newBlock, getContainerBlock(containerBlock));\n        dom.remove(parentBlock);\n      } else {\n        containerBlock = getContainerBlock(containerBlock);\n        var tmpRng = rng.cloneRange();\n        tmpRng.setStartAfter(parentBlock);\n        tmpRng.setEndAfter(containerBlock);\n        var fragment = tmpRng.extractContents();\n        if (newBlockName === 'LI' && hasFirstChild(fragment, 'LI')) {\n          newBlock = fragment.firstChild;\n          dom.insertAfter(fragment, containerBlock);\n        } else {\n          dom.insertAfter(fragment, containerBlock);\n          dom.insertAfter(newBlock, containerBlock);\n        }\n        dom.remove(parentBlock);\n      }\n      moveToCaretPosition(editor, newBlock);\n    };\n\n    var trimZwsp = function (fragment) {\n      each$k(descendants$1(SugarElement.fromDom(fragment), isText$8), function (text) {\n        var rawNode = text.dom;\n        rawNode.nodeValue = trim$2(rawNode.nodeValue);\n      });\n    };\n    var isEmptyAnchor = function (dom, elm) {\n      return elm && elm.nodeName === 'A' && dom.isEmpty(elm);\n    };\n    var isTableCell = function (node) {\n      return node && /^(TD|TH|CAPTION)$/.test(node.nodeName);\n    };\n    var emptyBlock = function (elm) {\n      elm.innerHTML = '<br data-mce-bogus=\"1\">';\n    };\n    var containerAndSiblingName = function (container, nodeName) {\n      return container.nodeName === nodeName || container.previousSibling && container.previousSibling.nodeName === nodeName;\n    };\n    var canSplitBlock = function (dom, node) {\n      return node && dom.isBlock(node) && !/^(TD|TH|CAPTION|FORM)$/.test(node.nodeName) && !/^(fixed|absolute)/i.test(node.style.position) && dom.getContentEditable(node) !== 'true';\n    };\n    var trimInlineElementsOnLeftSideOfBlock = function (dom, nonEmptyElementsMap, block) {\n      var node = block;\n      var firstChilds = [];\n      var i;\n      if (!node) {\n        return;\n      }\n      while (node = node.firstChild) {\n        if (dom.isBlock(node)) {\n          return;\n        }\n        if (isElement$5(node) && !nonEmptyElementsMap[node.nodeName.toLowerCase()]) {\n          firstChilds.push(node);\n        }\n      }\n      i = firstChilds.length;\n      while (i--) {\n        node = firstChilds[i];\n        if (!node.hasChildNodes() || node.firstChild === node.lastChild && node.firstChild.nodeValue === '') {\n          dom.remove(node);\n        } else {\n          if (isEmptyAnchor(dom, node)) {\n            dom.remove(node);\n          }\n        }\n      }\n    };\n    var normalizeZwspOffset = function (start, container, offset) {\n      if (isText$7(container) === false) {\n        return offset;\n      } else if (start) {\n        return offset === 1 && container.data.charAt(offset - 1) === ZWSP$1 ? 0 : offset;\n      } else {\n        return offset === container.data.length - 1 && container.data.charAt(offset) === ZWSP$1 ? container.data.length : offset;\n      }\n    };\n    var includeZwspInRange = function (rng) {\n      var newRng = rng.cloneRange();\n      newRng.setStart(rng.startContainer, normalizeZwspOffset(true, rng.startContainer, rng.startOffset));\n      newRng.setEnd(rng.endContainer, normalizeZwspOffset(false, rng.endContainer, rng.endOffset));\n      return newRng;\n    };\n    var trimLeadingLineBreaks = function (node) {\n      do {\n        if (isText$7(node)) {\n          node.nodeValue = node.nodeValue.replace(/^[\\r\\n]+/, '');\n        }\n        node = node.firstChild;\n      } while (node);\n    };\n    var getEditableRoot = function (dom, node) {\n      var root = dom.getRoot();\n      var parent, editableRoot;\n      parent = node;\n      while (parent !== root && dom.getContentEditable(parent) !== 'false') {\n        if (dom.getContentEditable(parent) === 'true') {\n          editableRoot = parent;\n        }\n        parent = parent.parentNode;\n      }\n      return parent !== root ? editableRoot : root;\n    };\n    var applyAttributes = function (editor, node, forcedRootBlockAttrs) {\n      var dom = editor.dom;\n      Optional.from(forcedRootBlockAttrs.style).map(dom.parseStyle).each(function (attrStyles) {\n        var currentStyles = getAllRaw(SugarElement.fromDom(node));\n        var newStyles = __assign(__assign({}, currentStyles), attrStyles);\n        dom.setStyles(node, newStyles);\n      });\n      var attrClassesOpt = Optional.from(forcedRootBlockAttrs.class).map(function (attrClasses) {\n        return attrClasses.split(/\\s+/);\n      });\n      var currentClassesOpt = Optional.from(node.className).map(function (currentClasses) {\n        return filter$4(currentClasses.split(/\\s+/), function (clazz) {\n          return clazz !== '';\n        });\n      });\n      lift2(attrClassesOpt, currentClassesOpt, function (attrClasses, currentClasses) {\n        var filteredClasses = filter$4(currentClasses, function (clazz) {\n          return !contains$3(attrClasses, clazz);\n        });\n        var newClasses = __spreadArray(__spreadArray([], attrClasses), filteredClasses);\n        dom.setAttrib(node, 'class', newClasses.join(' '));\n      });\n      var appliedAttrs = [\n        'style',\n        'class'\n      ];\n      var remainingAttrs = filter$3(forcedRootBlockAttrs, function (_, attrs) {\n        return !contains$3(appliedAttrs, attrs);\n      });\n      dom.setAttribs(node, remainingAttrs);\n    };\n    var setForcedBlockAttrs = function (editor, node) {\n      var forcedRootBlockName = getForcedRootBlock(editor);\n      if (forcedRootBlockName && forcedRootBlockName.toLowerCase() === node.tagName.toLowerCase()) {\n        var forcedRootBlockAttrs = getForcedRootBlockAttrs(editor);\n        applyAttributes(editor, node, forcedRootBlockAttrs);\n      }\n    };\n    var wrapSelfAndSiblingsInDefaultBlock = function (editor, newBlockName, rng, container, offset) {\n      var newBlock, parentBlock, startNode, node, next, rootBlockName;\n      var blockName = newBlockName || 'P';\n      var dom = editor.dom, editableRoot = getEditableRoot(dom, container);\n      parentBlock = dom.getParent(container, dom.isBlock);\n      if (!parentBlock || !canSplitBlock(dom, parentBlock)) {\n        parentBlock = parentBlock || editableRoot;\n        if (parentBlock === editor.getBody() || isTableCell(parentBlock)) {\n          rootBlockName = parentBlock.nodeName.toLowerCase();\n        } else {\n          rootBlockName = parentBlock.parentNode.nodeName.toLowerCase();\n        }\n        if (!parentBlock.hasChildNodes()) {\n          newBlock = dom.create(blockName);\n          setForcedBlockAttrs(editor, newBlock);\n          parentBlock.appendChild(newBlock);\n          rng.setStart(newBlock, 0);\n          rng.setEnd(newBlock, 0);\n          return newBlock;\n        }\n        node = container;\n        while (node.parentNode !== parentBlock) {\n          node = node.parentNode;\n        }\n        while (node && !dom.isBlock(node)) {\n          startNode = node;\n          node = node.previousSibling;\n        }\n        if (startNode && editor.schema.isValidChild(rootBlockName, blockName.toLowerCase())) {\n          newBlock = dom.create(blockName);\n          setForcedBlockAttrs(editor, newBlock);\n          startNode.parentNode.insertBefore(newBlock, startNode);\n          node = startNode;\n          while (node && !dom.isBlock(node)) {\n            next = node.nextSibling;\n            newBlock.appendChild(node);\n            node = next;\n          }\n          rng.setStart(container, offset);\n          rng.setEnd(container, offset);\n        }\n      }\n      return container;\n    };\n    var addBrToBlockIfNeeded = function (dom, block) {\n      block.normalize();\n      var lastChild = block.lastChild;\n      if (!lastChild || /^(left|right)$/gi.test(dom.getStyle(lastChild, 'float', true))) {\n        dom.add(block, 'br');\n      }\n    };\n    var insert$2 = function (editor, evt) {\n      var tmpRng, container, offset, parentBlock;\n      var newBlock, fragment, containerBlock, parentBlockName, newBlockName, isAfterLastNodeInContainer;\n      var dom = editor.dom;\n      var schema = editor.schema, nonEmptyElementsMap = schema.getNonEmptyElements();\n      var rng = editor.selection.getRng();\n      var createNewBlock = function (name) {\n        var node = container, block, clonedNode, caretNode;\n        var textInlineElements = schema.getTextInlineElements();\n        if (name || parentBlockName === 'TABLE' || parentBlockName === 'HR') {\n          block = dom.create(name || newBlockName);\n        } else {\n          block = parentBlock.cloneNode(false);\n        }\n        caretNode = block;\n        if (shouldKeepStyles(editor) === false) {\n          dom.setAttrib(block, 'style', null);\n          dom.setAttrib(block, 'class', null);\n        } else {\n          do {\n            if (textInlineElements[node.nodeName]) {\n              if (isCaretNode(node) || isBookmarkNode$1(node)) {\n                continue;\n              }\n              clonedNode = node.cloneNode(false);\n              dom.setAttrib(clonedNode, 'id', '');\n              if (block.hasChildNodes()) {\n                clonedNode.appendChild(block.firstChild);\n                block.appendChild(clonedNode);\n              } else {\n                caretNode = clonedNode;\n                block.appendChild(clonedNode);\n              }\n            }\n          } while ((node = node.parentNode) && node !== editableRoot);\n        }\n        setForcedBlockAttrs(editor, block);\n        emptyBlock(caretNode);\n        return block;\n      };\n      var isCaretAtStartOrEndOfBlock = function (start) {\n        var node, name;\n        var normalizedOffset = normalizeZwspOffset(start, container, offset);\n        if (isText$7(container) && (start ? normalizedOffset > 0 : normalizedOffset < container.nodeValue.length)) {\n          return false;\n        }\n        if (container.parentNode === parentBlock && isAfterLastNodeInContainer && !start) {\n          return true;\n        }\n        if (start && isElement$5(container) && container === parentBlock.firstChild) {\n          return true;\n        }\n        if (containerAndSiblingName(container, 'TABLE') || containerAndSiblingName(container, 'HR')) {\n          return isAfterLastNodeInContainer && !start || !isAfterLastNodeInContainer && start;\n        }\n        var walker = new DomTreeWalker(container, parentBlock);\n        if (isText$7(container)) {\n          if (start && normalizedOffset === 0) {\n            walker.prev();\n          } else if (!start && normalizedOffset === container.nodeValue.length) {\n            walker.next();\n          }\n        }\n        while (node = walker.current()) {\n          if (isElement$5(node)) {\n            if (!node.getAttribute('data-mce-bogus')) {\n              name = node.nodeName.toLowerCase();\n              if (nonEmptyElementsMap[name] && name !== 'br') {\n                return false;\n              }\n            }\n          } else if (isText$7(node) && !isWhitespaceText(node.nodeValue)) {\n            return false;\n          }\n          if (start) {\n            walker.prev();\n          } else {\n            walker.next();\n          }\n        }\n        return true;\n      };\n      var insertNewBlockAfter = function () {\n        if (/^(H[1-6]|PRE|FIGURE)$/.test(parentBlockName) && containerBlockName !== 'HGROUP') {\n          newBlock = createNewBlock(newBlockName);\n        } else {\n          newBlock = createNewBlock();\n        }\n        if (shouldEndContainerOnEmptyBlock(editor) && canSplitBlock(dom, containerBlock) && dom.isEmpty(parentBlock)) {\n          newBlock = dom.split(containerBlock, parentBlock);\n        } else {\n          dom.insertAfter(newBlock, parentBlock);\n        }\n        moveToCaretPosition(editor, newBlock);\n      };\n      normalize$2(dom, rng).each(function (normRng) {\n        rng.setStart(normRng.startContainer, normRng.startOffset);\n        rng.setEnd(normRng.endContainer, normRng.endOffset);\n      });\n      container = rng.startContainer;\n      offset = rng.startOffset;\n      newBlockName = getForcedRootBlock(editor);\n      var shiftKey = !!(evt && evt.shiftKey);\n      var ctrlKey = !!(evt && evt.ctrlKey);\n      if (isElement$5(container) && container.hasChildNodes()) {\n        isAfterLastNodeInContainer = offset > container.childNodes.length - 1;\n        container = container.childNodes[Math.min(offset, container.childNodes.length - 1)] || container;\n        if (isAfterLastNodeInContainer && isText$7(container)) {\n          offset = container.nodeValue.length;\n        } else {\n          offset = 0;\n        }\n      }\n      var editableRoot = getEditableRoot(dom, container);\n      if (!editableRoot) {\n        return;\n      }\n      if (newBlockName && !shiftKey || !newBlockName && shiftKey) {\n        container = wrapSelfAndSiblingsInDefaultBlock(editor, newBlockName, rng, container, offset);\n      }\n      parentBlock = dom.getParent(container, dom.isBlock);\n      containerBlock = parentBlock ? dom.getParent(parentBlock.parentNode, dom.isBlock) : null;\n      parentBlockName = parentBlock ? parentBlock.nodeName.toUpperCase() : '';\n      var containerBlockName = containerBlock ? containerBlock.nodeName.toUpperCase() : '';\n      if (containerBlockName === 'LI' && !ctrlKey) {\n        parentBlock = containerBlock;\n        containerBlock = containerBlock.parentNode;\n        parentBlockName = containerBlockName;\n      }\n      if (/^(LI|DT|DD)$/.test(parentBlockName)) {\n        if (dom.isEmpty(parentBlock)) {\n          insert$3(editor, createNewBlock, containerBlock, parentBlock, newBlockName);\n          return;\n        }\n      }\n      if (newBlockName && parentBlock === editor.getBody()) {\n        return;\n      }\n      newBlockName = newBlockName || 'P';\n      if (isCaretContainerBlock$1(parentBlock)) {\n        newBlock = showCaretContainerBlock(parentBlock);\n        if (dom.isEmpty(parentBlock)) {\n          emptyBlock(parentBlock);\n        }\n        setForcedBlockAttrs(editor, newBlock);\n        moveToCaretPosition(editor, newBlock);\n      } else if (isCaretAtStartOrEndOfBlock()) {\n        insertNewBlockAfter();\n      } else if (isCaretAtStartOrEndOfBlock(true)) {\n        newBlock = parentBlock.parentNode.insertBefore(createNewBlock(), parentBlock);\n        moveToCaretPosition(editor, containerAndSiblingName(parentBlock, 'HR') ? newBlock : parentBlock);\n      } else {\n        tmpRng = includeZwspInRange(rng).cloneRange();\n        tmpRng.setEndAfter(parentBlock);\n        fragment = tmpRng.extractContents();\n        trimZwsp(fragment);\n        trimLeadingLineBreaks(fragment);\n        newBlock = fragment.firstChild;\n        dom.insertAfter(fragment, parentBlock);\n        trimInlineElementsOnLeftSideOfBlock(dom, nonEmptyElementsMap, newBlock);\n        addBrToBlockIfNeeded(dom, parentBlock);\n        if (dom.isEmpty(parentBlock)) {\n          emptyBlock(parentBlock);\n        }\n        newBlock.normalize();\n        if (dom.isEmpty(newBlock)) {\n          dom.remove(newBlock);\n          insertNewBlockAfter();\n        } else {\n          setForcedBlockAttrs(editor, newBlock);\n          moveToCaretPosition(editor, newBlock);\n        }\n      }\n      dom.setAttrib(newBlock, 'id', '');\n      editor.fire('NewBlock', { newBlock: newBlock });\n    };\n\n    var hasRightSideContent = function (schema, container, parentBlock) {\n      var walker = new DomTreeWalker(container, parentBlock);\n      var node;\n      var nonEmptyElementsMap = schema.getNonEmptyElements();\n      while (node = walker.next()) {\n        if (nonEmptyElementsMap[node.nodeName.toLowerCase()] || node.length > 0) {\n          return true;\n        }\n      }\n    };\n    var moveSelectionToBr = function (editor, brElm, extraBr) {\n      var rng = editor.dom.createRng();\n      if (!extraBr) {\n        rng.setStartAfter(brElm);\n        rng.setEndAfter(brElm);\n      } else {\n        rng.setStartBefore(brElm);\n        rng.setEndBefore(brElm);\n      }\n      editor.selection.setRng(rng);\n      scrollRangeIntoView(editor, rng);\n    };\n    var insertBrAtCaret = function (editor, evt) {\n      var selection = editor.selection;\n      var dom = editor.dom;\n      var rng = selection.getRng();\n      var brElm;\n      var extraBr;\n      normalize$2(dom, rng).each(function (normRng) {\n        rng.setStart(normRng.startContainer, normRng.startOffset);\n        rng.setEnd(normRng.endContainer, normRng.endOffset);\n      });\n      var offset = rng.startOffset;\n      var container = rng.startContainer;\n      if (container.nodeType === 1 && container.hasChildNodes()) {\n        var isAfterLastNodeInContainer = offset > container.childNodes.length - 1;\n        container = container.childNodes[Math.min(offset, container.childNodes.length - 1)] || container;\n        if (isAfterLastNodeInContainer && container.nodeType === 3) {\n          offset = container.nodeValue.length;\n        } else {\n          offset = 0;\n        }\n      }\n      var parentBlock = dom.getParent(container, dom.isBlock);\n      var containerBlock = parentBlock ? dom.getParent(parentBlock.parentNode, dom.isBlock) : null;\n      var containerBlockName = containerBlock ? containerBlock.nodeName.toUpperCase() : '';\n      var isControlKey = !!(evt && evt.ctrlKey);\n      if (containerBlockName === 'LI' && !isControlKey) {\n        parentBlock = containerBlock;\n      }\n      if (container && container.nodeType === 3 && offset >= container.nodeValue.length) {\n        if (!hasRightSideContent(editor.schema, container, parentBlock)) {\n          brElm = dom.create('br');\n          rng.insertNode(brElm);\n          rng.setStartAfter(brElm);\n          rng.setEndAfter(brElm);\n          extraBr = true;\n        }\n      }\n      brElm = dom.create('br');\n      rangeInsertNode(dom, rng, brElm);\n      moveSelectionToBr(editor, brElm, extraBr);\n      editor.undoManager.add();\n    };\n    var insertBrBefore = function (editor, inline) {\n      var br = SugarElement.fromTag('br');\n      before$4(SugarElement.fromDom(inline), br);\n      editor.undoManager.add();\n    };\n    var insertBrAfter = function (editor, inline) {\n      if (!hasBrAfter(editor.getBody(), inline)) {\n        after$3(SugarElement.fromDom(inline), SugarElement.fromTag('br'));\n      }\n      var br = SugarElement.fromTag('br');\n      after$3(SugarElement.fromDom(inline), br);\n      moveSelectionToBr(editor, br.dom, false);\n      editor.undoManager.add();\n    };\n    var isBeforeBr = function (pos) {\n      return isBr$5(pos.getNode());\n    };\n    var hasBrAfter = function (rootNode, startNode) {\n      if (isBeforeBr(CaretPosition.after(startNode))) {\n        return true;\n      } else {\n        return nextPosition(rootNode, CaretPosition.after(startNode)).map(function (pos) {\n          return isBr$5(pos.getNode());\n        }).getOr(false);\n      }\n    };\n    var isAnchorLink = function (elm) {\n      return elm && elm.nodeName === 'A' && 'href' in elm;\n    };\n    var isInsideAnchor = function (location) {\n      return location.fold(never, isAnchorLink, isAnchorLink, never);\n    };\n    var readInlineAnchorLocation = function (editor) {\n      var isInlineTarget$1 = curry(isInlineTarget, editor);\n      var position = CaretPosition.fromRangeStart(editor.selection.getRng());\n      return readLocation(isInlineTarget$1, editor.getBody(), position).filter(isInsideAnchor);\n    };\n    var insertBrOutsideAnchor = function (editor, location) {\n      location.fold(noop, curry(insertBrBefore, editor), curry(insertBrAfter, editor), noop);\n    };\n    var insert$1 = function (editor, evt) {\n      var anchorLocation = readInlineAnchorLocation(editor);\n      if (anchorLocation.isSome()) {\n        anchorLocation.each(curry(insertBrOutsideAnchor, editor));\n      } else {\n        insertBrAtCaret(editor, evt);\n      }\n    };\n\n    var matchesSelector = function (editor, selector) {\n      return getParentBlock(editor).filter(function (parentBlock) {\n        return selector.length > 0 && is$2(SugarElement.fromDom(parentBlock), selector);\n      }).isSome();\n    };\n    var shouldInsertBr = function (editor) {\n      return matchesSelector(editor, getBrNewLineSelector(editor));\n    };\n    var shouldBlockNewLine$1 = function (editor) {\n      return matchesSelector(editor, getNoNewLineSelector(editor));\n    };\n\n    var newLineAction = Adt.generate([\n      { br: [] },\n      { block: [] },\n      { none: [] }\n    ]);\n    var shouldBlockNewLine = function (editor, _shiftKey) {\n      return shouldBlockNewLine$1(editor);\n    };\n    var isBrMode = function (requiredState) {\n      return function (editor, _shiftKey) {\n        var brMode = getForcedRootBlock(editor) === '';\n        return brMode === requiredState;\n      };\n    };\n    var inListBlock = function (requiredState) {\n      return function (editor, _shiftKey) {\n        return isListItemParentBlock(editor) === requiredState;\n      };\n    };\n    var inBlock = function (blockName, requiredState) {\n      return function (editor, _shiftKey) {\n        var state = getParentBlockName(editor) === blockName.toUpperCase();\n        return state === requiredState;\n      };\n    };\n    var inPreBlock = function (requiredState) {\n      return inBlock('pre', requiredState);\n    };\n    var inSummaryBlock = function () {\n      return inBlock('summary', true);\n    };\n    var shouldPutBrInPre = function (requiredState) {\n      return function (editor, _shiftKey) {\n        return shouldPutBrInPre$1(editor) === requiredState;\n      };\n    };\n    var inBrContext = function (editor, _shiftKey) {\n      return shouldInsertBr(editor);\n    };\n    var hasShiftKey = function (_editor, shiftKey) {\n      return shiftKey;\n    };\n    var canInsertIntoEditableRoot = function (editor) {\n      var forcedRootBlock = getForcedRootBlock(editor);\n      var rootEditable = getEditableRoot$1(editor.dom, editor.selection.getStart());\n      return rootEditable && editor.schema.isValidChild(rootEditable.nodeName, forcedRootBlock ? forcedRootBlock : 'P');\n    };\n    var match = function (predicates, action) {\n      return function (editor, shiftKey) {\n        var isMatch = foldl(predicates, function (res, p) {\n          return res && p(editor, shiftKey);\n        }, true);\n        return isMatch ? Optional.some(action) : Optional.none();\n      };\n    };\n    var getAction = function (editor, evt) {\n      return evaluateUntil([\n        match([shouldBlockNewLine], newLineAction.none()),\n        match([inSummaryBlock()], newLineAction.br()),\n        match([\n          inPreBlock(true),\n          shouldPutBrInPre(false),\n          hasShiftKey\n        ], newLineAction.br()),\n        match([\n          inPreBlock(true),\n          shouldPutBrInPre(false)\n        ], newLineAction.block()),\n        match([\n          inPreBlock(true),\n          shouldPutBrInPre(true),\n          hasShiftKey\n        ], newLineAction.block()),\n        match([\n          inPreBlock(true),\n          shouldPutBrInPre(true)\n        ], newLineAction.br()),\n        match([\n          inListBlock(true),\n          hasShiftKey\n        ], newLineAction.br()),\n        match([inListBlock(true)], newLineAction.block()),\n        match([\n          isBrMode(true),\n          hasShiftKey,\n          canInsertIntoEditableRoot\n        ], newLineAction.block()),\n        match([isBrMode(true)], newLineAction.br()),\n        match([inBrContext], newLineAction.br()),\n        match([\n          isBrMode(false),\n          hasShiftKey\n        ], newLineAction.br()),\n        match([canInsertIntoEditableRoot], newLineAction.block())\n      ], [\n        editor,\n        !!(evt && evt.shiftKey)\n      ]).getOr(newLineAction.none());\n    };\n\n    var insert = function (editor, evt) {\n      getAction(editor, evt).fold(function () {\n        insert$1(editor, evt);\n      }, function () {\n        insert$2(editor, evt);\n      }, noop);\n    };\n\n    var handleEnterKeyEvent = function (editor, event) {\n      if (event.isDefaultPrevented()) {\n        return;\n      }\n      event.preventDefault();\n      endTypingLevelIgnoreLocks(editor.undoManager);\n      editor.undoManager.transact(function () {\n        if (editor.selection.isCollapsed() === false) {\n          editor.execCommand('Delete');\n        }\n        insert(editor, event);\n      });\n    };\n    var setup$9 = function (editor) {\n      editor.on('keydown', function (event) {\n        if (event.keyCode === VK.ENTER) {\n          handleEnterKeyEvent(editor, event);\n        }\n      });\n    };\n\n    var executeKeydownOverride$1 = function (editor, caret, evt) {\n      execute([\n        {\n          keyCode: VK.END,\n          action: action(moveToLineEndPoint$1, editor, true)\n        },\n        {\n          keyCode: VK.HOME,\n          action: action(moveToLineEndPoint$1, editor, false)\n        },\n        {\n          keyCode: VK.END,\n          action: action(moveToLineEndPoint, editor, true)\n        },\n        {\n          keyCode: VK.HOME,\n          action: action(moveToLineEndPoint, editor, false)\n        },\n        {\n          keyCode: VK.END,\n          action: action(moveToLineEndPoint$2, editor, true, caret)\n        },\n        {\n          keyCode: VK.HOME,\n          action: action(moveToLineEndPoint$2, editor, false, caret)\n        }\n      ], evt).each(function (_) {\n        evt.preventDefault();\n      });\n    };\n    var setup$8 = function (editor, caret) {\n      editor.on('keydown', function (evt) {\n        if (evt.isDefaultPrevented() === false) {\n          executeKeydownOverride$1(editor, caret, evt);\n        }\n      });\n    };\n\n    var browser = detect().browser;\n    var setupIeInput = function (editor) {\n      var keypressThrotter = first(function () {\n        if (!editor.composing) {\n          normalizeNbspsInEditor(editor);\n        }\n      }, 0);\n      if (browser.isIE()) {\n        editor.on('keypress', function (_e) {\n          keypressThrotter.throttle();\n        });\n        editor.on('remove', function (_e) {\n          keypressThrotter.cancel();\n        });\n      }\n    };\n    var setup$7 = function (editor) {\n      setupIeInput(editor);\n      editor.on('input', function (e) {\n        if (e.isComposing === false) {\n          normalizeNbspsInEditor(editor);\n        }\n      });\n    };\n\n    var platform = detect();\n    var executeKeyupAction = function (editor, caret, evt) {\n      execute([\n        {\n          keyCode: VK.PAGE_UP,\n          action: action(moveToLineEndPoint$2, editor, false, caret)\n        },\n        {\n          keyCode: VK.PAGE_DOWN,\n          action: action(moveToLineEndPoint$2, editor, true, caret)\n        }\n      ], evt);\n    };\n    var stopImmediatePropagation = function (e) {\n      return e.stopImmediatePropagation();\n    };\n    var isPageUpDown = function (evt) {\n      return evt.keyCode === VK.PAGE_UP || evt.keyCode === VK.PAGE_DOWN;\n    };\n    var setNodeChangeBlocker = function (blocked, editor, block) {\n      if (block && !blocked.get()) {\n        editor.on('NodeChange', stopImmediatePropagation, true);\n      } else if (!block && blocked.get()) {\n        editor.off('NodeChange', stopImmediatePropagation);\n      }\n      blocked.set(block);\n    };\n    var setup$6 = function (editor, caret) {\n      if (platform.os.isOSX()) {\n        return;\n      }\n      var blocked = Cell(false);\n      editor.on('keydown', function (evt) {\n        if (isPageUpDown(evt)) {\n          setNodeChangeBlocker(blocked, editor, true);\n        }\n      });\n      editor.on('keyup', function (evt) {\n        if (evt.isDefaultPrevented() === false) {\n          executeKeyupAction(editor, caret, evt);\n        }\n        if (isPageUpDown(evt) && blocked.get()) {\n          setNodeChangeBlocker(blocked, editor, false);\n          editor.nodeChanged();\n        }\n      });\n    };\n\n    var insertTextAtPosition = function (text, pos) {\n      var container = pos.container();\n      var offset = pos.offset();\n      if (isText$7(container)) {\n        container.insertData(offset, text);\n        return Optional.some(CaretPosition(container, offset + text.length));\n      } else {\n        return getElementFromPosition(pos).map(function (elm) {\n          var textNode = SugarElement.fromText(text);\n          if (pos.isAtEnd()) {\n            after$3(elm, textNode);\n          } else {\n            before$4(elm, textNode);\n          }\n          return CaretPosition(textNode.dom, text.length);\n        });\n      }\n    };\n    var insertNbspAtPosition = curry(insertTextAtPosition, nbsp);\n    var insertSpaceAtPosition = curry(insertTextAtPosition, ' ');\n\n    var locationToCaretPosition = function (root) {\n      return function (location) {\n        return location.fold(function (element) {\n          return prevPosition(root.dom, CaretPosition.before(element));\n        }, function (element) {\n          return firstPositionIn(element);\n        }, function (element) {\n          return lastPositionIn(element);\n        }, function (element) {\n          return nextPosition(root.dom, CaretPosition.after(element));\n        });\n      };\n    };\n    var insertInlineBoundarySpaceOrNbsp = function (root, pos) {\n      return function (checkPos) {\n        return needsToHaveNbsp(root, checkPos) ? insertNbspAtPosition(pos) : insertSpaceAtPosition(pos);\n      };\n    };\n    var setSelection = function (editor) {\n      return function (pos) {\n        editor.selection.setRng(pos.toRange());\n        editor.nodeChanged();\n        return true;\n      };\n    };\n    var insertSpaceOrNbspAtSelection = function (editor) {\n      var pos = CaretPosition.fromRangeStart(editor.selection.getRng());\n      var root = SugarElement.fromDom(editor.getBody());\n      if (editor.selection.isCollapsed()) {\n        var isInlineTarget$1 = curry(isInlineTarget, editor);\n        var caretPosition = CaretPosition.fromRangeStart(editor.selection.getRng());\n        return readLocation(isInlineTarget$1, editor.getBody(), caretPosition).bind(locationToCaretPosition(root)).bind(insertInlineBoundarySpaceOrNbsp(root, pos)).exists(setSelection(editor));\n      } else {\n        return false;\n      }\n    };\n\n    var executeKeydownOverride = function (editor, evt) {\n      execute([{\n          keyCode: VK.SPACEBAR,\n          action: action(insertSpaceOrNbspAtSelection, editor)\n        }], evt).each(function (_) {\n        evt.preventDefault();\n      });\n    };\n    var setup$5 = function (editor) {\n      editor.on('keydown', function (evt) {\n        if (evt.isDefaultPrevented() === false) {\n          executeKeydownOverride(editor, evt);\n        }\n      });\n    };\n\n    var registerKeyboardOverrides = function (editor) {\n      var caret = setupSelectedState(editor);\n      setup$c(editor);\n      setup$b(editor, caret);\n      setup$a(editor, caret);\n      setup$9(editor);\n      setup$5(editor);\n      setup$7(editor);\n      setup$8(editor, caret);\n      setup$6(editor, caret);\n      return caret;\n    };\n    var setup$4 = function (editor) {\n      if (!isRtc(editor)) {\n        return registerKeyboardOverrides(editor);\n      } else {\n        return Cell(null);\n      }\n    };\n\n    var NodeChange = function () {\n      function NodeChange(editor) {\n        this.lastPath = [];\n        this.editor = editor;\n        var lastRng;\n        var self = this;\n        if (!('onselectionchange' in editor.getDoc())) {\n          editor.on('NodeChange click mouseup keyup focus', function (e) {\n            var nativeRng = editor.selection.getRng();\n            var fakeRng = {\n              startContainer: nativeRng.startContainer,\n              startOffset: nativeRng.startOffset,\n              endContainer: nativeRng.endContainer,\n              endOffset: nativeRng.endOffset\n            };\n            if (e.type === 'nodechange' || !isEq$4(fakeRng, lastRng)) {\n              editor.fire('SelectionChange');\n            }\n            lastRng = fakeRng;\n          });\n        }\n        editor.on('contextmenu', function () {\n          editor.fire('SelectionChange');\n        });\n        editor.on('SelectionChange', function () {\n          var startElm = editor.selection.getStart(true);\n          if (!startElm || !Env.range && editor.selection.isCollapsed()) {\n            return;\n          }\n          if (hasAnyRanges(editor) && !self.isSameElementPath(startElm) && editor.dom.isChildOf(startElm, editor.getBody())) {\n            editor.nodeChanged({ selectionChange: true });\n          }\n        });\n        editor.on('mouseup', function (e) {\n          if (!e.isDefaultPrevented() && hasAnyRanges(editor)) {\n            if (editor.selection.getNode().nodeName === 'IMG') {\n              Delay.setEditorTimeout(editor, function () {\n                editor.nodeChanged();\n              });\n            } else {\n              editor.nodeChanged();\n            }\n          }\n        });\n      }\n      NodeChange.prototype.nodeChanged = function (args) {\n        var selection = this.editor.selection;\n        var node, parents, root;\n        if (this.editor.initialized && selection && !shouldDisableNodeChange(this.editor) && !this.editor.mode.isReadOnly()) {\n          root = this.editor.getBody();\n          node = selection.getStart(true) || root;\n          if (node.ownerDocument !== this.editor.getDoc() || !this.editor.dom.isChildOf(node, root)) {\n            node = root;\n          }\n          parents = [];\n          this.editor.dom.getParent(node, function (node) {\n            if (node === root) {\n              return true;\n            }\n            parents.push(node);\n          });\n          args = args || {};\n          args.element = node;\n          args.parents = parents;\n          this.editor.fire('NodeChange', args);\n        }\n      };\n      NodeChange.prototype.isSameElementPath = function (startElm) {\n        var i;\n        var currentPath = this.editor.$(startElm).parentsUntil(this.editor.getBody()).add(startElm);\n        if (currentPath.length === this.lastPath.length) {\n          for (i = currentPath.length; i >= 0; i--) {\n            if (currentPath[i] !== this.lastPath[i]) {\n              break;\n            }\n          }\n          if (i === -1) {\n            this.lastPath = currentPath;\n            return true;\n          }\n        }\n        this.lastPath = currentPath;\n        return false;\n      };\n      return NodeChange;\n    }();\n\n    var preventSummaryToggle = function (editor) {\n      editor.on('click', function (e) {\n        if (editor.dom.getParent(e.target, 'details')) {\n          e.preventDefault();\n        }\n      });\n    };\n    var filterDetails = function (editor) {\n      editor.parser.addNodeFilter('details', function (elms) {\n        each$k(elms, function (details) {\n          details.attr('data-mce-open', details.attr('open'));\n          details.attr('open', 'open');\n        });\n      });\n      editor.serializer.addNodeFilter('details', function (elms) {\n        each$k(elms, function (details) {\n          var open = details.attr('data-mce-open');\n          details.attr('open', isString$1(open) ? open : null);\n          details.attr('data-mce-open', null);\n        });\n      });\n    };\n    var setup$3 = function (editor) {\n      preventSummaryToggle(editor);\n      filterDetails(editor);\n    };\n\n    var isTextBlockNode = function (node) {\n      return isElement$5(node) && isTextBlock$2(SugarElement.fromDom(node));\n    };\n    var normalizeSelection = function (editor) {\n      var rng = editor.selection.getRng();\n      var startPos = CaretPosition.fromRangeStart(rng);\n      var endPos = CaretPosition.fromRangeEnd(rng);\n      if (CaretPosition.isElementPosition(startPos)) {\n        var container = startPos.container();\n        if (isTextBlockNode(container)) {\n          firstPositionIn(container).each(function (pos) {\n            return rng.setStart(pos.container(), pos.offset());\n          });\n        }\n      }\n      if (CaretPosition.isElementPosition(endPos)) {\n        var container = startPos.container();\n        if (isTextBlockNode(container)) {\n          lastPositionIn(container).each(function (pos) {\n            return rng.setEnd(pos.container(), pos.offset());\n          });\n        }\n      }\n      editor.selection.setRng(normalize(rng));\n    };\n    var setup$2 = function (editor) {\n      editor.on('click', function (e) {\n        if (e.detail >= 3) {\n          normalizeSelection(editor);\n        }\n      });\n    };\n\n    var getAbsolutePosition = function (elm) {\n      var clientRect = elm.getBoundingClientRect();\n      var doc = elm.ownerDocument;\n      var docElem = doc.documentElement;\n      var win = doc.defaultView;\n      return {\n        top: clientRect.top + win.pageYOffset - docElem.clientTop,\n        left: clientRect.left + win.pageXOffset - docElem.clientLeft\n      };\n    };\n    var getBodyPosition = function (editor) {\n      return editor.inline ? getAbsolutePosition(editor.getBody()) : {\n        left: 0,\n        top: 0\n      };\n    };\n    var getScrollPosition = function (editor) {\n      var body = editor.getBody();\n      return editor.inline ? {\n        left: body.scrollLeft,\n        top: body.scrollTop\n      } : {\n        left: 0,\n        top: 0\n      };\n    };\n    var getBodyScroll = function (editor) {\n      var body = editor.getBody(), docElm = editor.getDoc().documentElement;\n      var inlineScroll = {\n        left: body.scrollLeft,\n        top: body.scrollTop\n      };\n      var iframeScroll = {\n        left: body.scrollLeft || docElm.scrollLeft,\n        top: body.scrollTop || docElm.scrollTop\n      };\n      return editor.inline ? inlineScroll : iframeScroll;\n    };\n    var getMousePosition = function (editor, event) {\n      if (event.target.ownerDocument !== editor.getDoc()) {\n        var iframePosition = getAbsolutePosition(editor.getContentAreaContainer());\n        var scrollPosition = getBodyScroll(editor);\n        return {\n          left: event.pageX - iframePosition.left + scrollPosition.left,\n          top: event.pageY - iframePosition.top + scrollPosition.top\n        };\n      }\n      return {\n        left: event.pageX,\n        top: event.pageY\n      };\n    };\n    var calculatePosition = function (bodyPosition, scrollPosition, mousePosition) {\n      return {\n        pageX: mousePosition.left - bodyPosition.left + scrollPosition.left,\n        pageY: mousePosition.top - bodyPosition.top + scrollPosition.top\n      };\n    };\n    var calc = function (editor, event) {\n      return calculatePosition(getBodyPosition(editor), getScrollPosition(editor), getMousePosition(editor, event));\n    };\n\n    var isContentEditableFalse$1 = isContentEditableFalse$b, isContentEditableTrue$1 = isContentEditableTrue$4;\n    var isDraggable = function (rootElm, elm) {\n      return isContentEditableFalse$1(elm) && elm !== rootElm;\n    };\n    var isValidDropTarget = function (editor, targetElement, dragElement) {\n      if (targetElement === dragElement || editor.dom.isChildOf(targetElement, dragElement)) {\n        return false;\n      }\n      return !isContentEditableFalse$1(targetElement);\n    };\n    var cloneElement = function (elm) {\n      var cloneElm = elm.cloneNode(true);\n      cloneElm.removeAttribute('data-mce-selected');\n      return cloneElm;\n    };\n    var createGhost = function (editor, elm, width, height) {\n      var dom = editor.dom;\n      var clonedElm = elm.cloneNode(true);\n      dom.setStyles(clonedElm, {\n        width: width,\n        height: height\n      });\n      dom.setAttrib(clonedElm, 'data-mce-selected', null);\n      var ghostElm = dom.create('div', {\n        'class': 'mce-drag-container',\n        'data-mce-bogus': 'all',\n        'unselectable': 'on',\n        'contenteditable': 'false'\n      });\n      dom.setStyles(ghostElm, {\n        position: 'absolute',\n        opacity: 0.5,\n        overflow: 'hidden',\n        border: 0,\n        padding: 0,\n        margin: 0,\n        width: width,\n        height: height\n      });\n      dom.setStyles(clonedElm, {\n        margin: 0,\n        boxSizing: 'border-box'\n      });\n      ghostElm.appendChild(clonedElm);\n      return ghostElm;\n    };\n    var appendGhostToBody = function (ghostElm, bodyElm) {\n      if (ghostElm.parentNode !== bodyElm) {\n        bodyElm.appendChild(ghostElm);\n      }\n    };\n    var moveGhost = function (ghostElm, position, width, height, maxX, maxY) {\n      var overflowX = 0, overflowY = 0;\n      ghostElm.style.left = position.pageX + 'px';\n      ghostElm.style.top = position.pageY + 'px';\n      if (position.pageX + width > maxX) {\n        overflowX = position.pageX + width - maxX;\n      }\n      if (position.pageY + height > maxY) {\n        overflowY = position.pageY + height - maxY;\n      }\n      ghostElm.style.width = width - overflowX + 'px';\n      ghostElm.style.height = height - overflowY + 'px';\n    };\n    var removeElement = function (elm) {\n      if (elm && elm.parentNode) {\n        elm.parentNode.removeChild(elm);\n      }\n    };\n    var isLeftMouseButtonPressed = function (e) {\n      return e.button === 0;\n    };\n    var applyRelPos = function (state, position) {\n      return {\n        pageX: position.pageX - state.relX,\n        pageY: position.pageY + 5\n      };\n    };\n    var start = function (state, editor) {\n      return function (e) {\n        if (isLeftMouseButtonPressed(e)) {\n          var ceElm = find$3(editor.dom.getParents(e.target), or(isContentEditableFalse$1, isContentEditableTrue$1)).getOr(null);\n          if (isDraggable(editor.getBody(), ceElm)) {\n            var elmPos = editor.dom.getPos(ceElm);\n            var bodyElm = editor.getBody();\n            var docElm = editor.getDoc().documentElement;\n            state.set({\n              element: ceElm,\n              dragging: false,\n              screenX: e.screenX,\n              screenY: e.screenY,\n              maxX: (editor.inline ? bodyElm.scrollWidth : docElm.offsetWidth) - 2,\n              maxY: (editor.inline ? bodyElm.scrollHeight : docElm.offsetHeight) - 2,\n              relX: e.pageX - elmPos.x,\n              relY: e.pageY - elmPos.y,\n              width: ceElm.offsetWidth,\n              height: ceElm.offsetHeight,\n              ghost: createGhost(editor, ceElm, ceElm.offsetWidth, ceElm.offsetHeight)\n            });\n          }\n        }\n      };\n    };\n    var move = function (state, editor) {\n      var throttledPlaceCaretAt = Delay.throttle(function (clientX, clientY) {\n        editor._selectionOverrides.hideFakeCaret();\n        editor.selection.placeCaretAt(clientX, clientY);\n      }, 0);\n      editor.on('remove', throttledPlaceCaretAt.stop);\n      return function (e) {\n        return state.on(function (state) {\n          var movement = Math.max(Math.abs(e.screenX - state.screenX), Math.abs(e.screenY - state.screenY));\n          if (!state.dragging && movement > 10) {\n            var args = editor.fire('dragstart', { target: state.element });\n            if (args.isDefaultPrevented()) {\n              return;\n            }\n            state.dragging = true;\n            editor.focus();\n          }\n          if (state.dragging) {\n            var targetPos = applyRelPos(state, calc(editor, e));\n            appendGhostToBody(state.ghost, editor.getBody());\n            moveGhost(state.ghost, targetPos, state.width, state.height, state.maxX, state.maxY);\n            throttledPlaceCaretAt(e.clientX, e.clientY);\n          }\n        });\n      };\n    };\n    var getRawTarget = function (selection) {\n      var rng = selection.getSel().getRangeAt(0);\n      var startContainer = rng.startContainer;\n      return startContainer.nodeType === 3 ? startContainer.parentNode : startContainer;\n    };\n    var drop = function (state, editor) {\n      return function (e) {\n        state.on(function (state) {\n          if (state.dragging) {\n            if (isValidDropTarget(editor, getRawTarget(editor.selection), state.element)) {\n              var targetClone_1 = cloneElement(state.element);\n              var args = editor.fire('drop', {\n                clientX: e.clientX,\n                clientY: e.clientY\n              });\n              if (!args.isDefaultPrevented()) {\n                editor.undoManager.transact(function () {\n                  removeElement(state.element);\n                  editor.insertContent(editor.dom.getOuterHTML(targetClone_1));\n                  editor._selectionOverrides.hideFakeCaret();\n                });\n              }\n            }\n          }\n        });\n        removeDragState(state);\n      };\n    };\n    var stop = function (state, editor) {\n      return function () {\n        state.on(function (state) {\n          if (state.dragging) {\n            editor.fire('dragend');\n          }\n        });\n        removeDragState(state);\n      };\n    };\n    var removeDragState = function (state) {\n      state.on(function (state) {\n        removeElement(state.ghost);\n      });\n      state.clear();\n    };\n    var bindFakeDragEvents = function (editor) {\n      var state = value();\n      var pageDom = DOMUtils.DOM;\n      var rootDocument = document;\n      var dragStartHandler = start(state, editor);\n      var dragHandler = move(state, editor);\n      var dropHandler = drop(state, editor);\n      var dragEndHandler = stop(state, editor);\n      editor.on('mousedown', dragStartHandler);\n      editor.on('mousemove', dragHandler);\n      editor.on('mouseup', dropHandler);\n      pageDom.bind(rootDocument, 'mousemove', dragHandler);\n      pageDom.bind(rootDocument, 'mouseup', dragEndHandler);\n      editor.on('remove', function () {\n        pageDom.unbind(rootDocument, 'mousemove', dragHandler);\n        pageDom.unbind(rootDocument, 'mouseup', dragEndHandler);\n      });\n    };\n    var blockIeDrop = function (editor) {\n      editor.on('drop', function (e) {\n        var realTarget = typeof e.clientX !== 'undefined' ? editor.getDoc().elementFromPoint(e.clientX, e.clientY) : null;\n        if (isContentEditableFalse$1(realTarget) || editor.dom.getContentEditableParent(realTarget) === 'false') {\n          e.preventDefault();\n        }\n      });\n    };\n    var blockUnsupportedFileDrop = function (editor) {\n      var preventFileDrop = function (e) {\n        if (!e.isDefaultPrevented()) {\n          var dataTransfer = e.dataTransfer;\n          if (dataTransfer && (contains$3(dataTransfer.types, 'Files') || dataTransfer.files.length > 0)) {\n            e.preventDefault();\n            if (e.type === 'drop') {\n              displayError(editor, 'Dropped file type is not supported');\n            }\n          }\n        }\n      };\n      var preventFileDropIfUIElement = function (e) {\n        if (isUIElement(editor, e.target)) {\n          preventFileDrop(e);\n        }\n      };\n      var setup = function () {\n        var pageDom = DOMUtils.DOM;\n        var dom = editor.dom;\n        var doc = document;\n        var editorRoot = editor.inline ? editor.getBody() : editor.getDoc();\n        var eventNames = [\n          'drop',\n          'dragover'\n        ];\n        each$k(eventNames, function (name) {\n          pageDom.bind(doc, name, preventFileDropIfUIElement);\n          dom.bind(editorRoot, name, preventFileDrop);\n        });\n        editor.on('remove', function () {\n          each$k(eventNames, function (name) {\n            pageDom.unbind(doc, name, preventFileDropIfUIElement);\n            dom.unbind(editorRoot, name, preventFileDrop);\n          });\n        });\n      };\n      editor.on('init', function () {\n        Delay.setEditorTimeout(editor, setup, 0);\n      });\n    };\n    var init$2 = function (editor) {\n      bindFakeDragEvents(editor);\n      blockIeDrop(editor);\n      if (shouldBlockUnsupportedDrop(editor)) {\n        blockUnsupportedFileDrop(editor);\n      }\n    };\n\n    var setup$1 = function (editor) {\n      var renderFocusCaret = first(function () {\n        if (!editor.removed && editor.getBody().contains(document.activeElement)) {\n          var rng = editor.selection.getRng();\n          if (rng.collapsed) {\n            var caretRange = renderRangeCaret(editor, rng, false);\n            editor.selection.setRng(caretRange);\n          }\n        }\n      }, 0);\n      editor.on('focus', function () {\n        renderFocusCaret.throttle();\n      });\n      editor.on('blur', function () {\n        renderFocusCaret.cancel();\n      });\n    };\n\n    var setup = function (editor) {\n      editor.on('init', function () {\n        editor.on('focusin', function (e) {\n          var target = e.target;\n          if (isMedia$2(target)) {\n            var ceRoot = getContentEditableRoot$1(editor.getBody(), target);\n            var node = isContentEditableFalse$b(ceRoot) ? ceRoot : target;\n            if (editor.selection.getNode() !== node) {\n              selectNode(editor, node).each(function (rng) {\n                return editor.selection.setRng(rng);\n              });\n            }\n          }\n        });\n      });\n    };\n\n    var isContentEditableTrue = isContentEditableTrue$4;\n    var isContentEditableFalse = isContentEditableFalse$b;\n    var getContentEditableRoot = function (editor, node) {\n      return getContentEditableRoot$1(editor.getBody(), node);\n    };\n    var SelectionOverrides = function (editor) {\n      var selection = editor.selection, dom = editor.dom;\n      var isBlock = dom.isBlock;\n      var rootNode = editor.getBody();\n      var fakeCaret = FakeCaret(editor, rootNode, isBlock, function () {\n        return hasFocus(editor);\n      });\n      var realSelectionId = 'sel-' + dom.uniqueId();\n      var elementSelectionAttr = 'data-mce-selected';\n      var selectedElement;\n      var isFakeSelectionElement = function (node) {\n        return dom.hasClass(node, 'mce-offscreen-selection');\n      };\n      var isFakeSelectionTargetElement = function (node) {\n        return node !== rootNode && (isContentEditableFalse(node) || isMedia$2(node)) && dom.isChildOf(node, rootNode);\n      };\n      var isNearFakeSelectionElement = function (pos) {\n        return isBeforeContentEditableFalse(pos) || isAfterContentEditableFalse(pos) || isBeforeMedia(pos) || isAfterMedia(pos);\n      };\n      var getRealSelectionElement = function () {\n        var container = dom.get(realSelectionId);\n        return container ? container.getElementsByTagName('*')[0] : container;\n      };\n      var setRange = function (range) {\n        if (range) {\n          selection.setRng(range);\n        }\n      };\n      var getRange = selection.getRng;\n      var showCaret = function (direction, node, before, scrollIntoView) {\n        if (scrollIntoView === void 0) {\n          scrollIntoView = true;\n        }\n        var e = editor.fire('ShowCaret', {\n          target: node,\n          direction: direction,\n          before: before\n        });\n        if (e.isDefaultPrevented()) {\n          return null;\n        }\n        if (scrollIntoView) {\n          selection.scrollIntoView(node, direction === -1);\n        }\n        return fakeCaret.show(before, node);\n      };\n      var showBlockCaretContainer = function (blockCaretContainer) {\n        if (blockCaretContainer.hasAttribute('data-mce-caret')) {\n          showCaretContainerBlock(blockCaretContainer);\n          setRange(getRange());\n          selection.scrollIntoView(blockCaretContainer);\n        }\n      };\n      var registerEvents = function () {\n        editor.on('mouseup', function (e) {\n          var range = getRange();\n          if (range.collapsed && isXYInContentArea(editor, e.clientX, e.clientY)) {\n            renderCaretAtRange(editor, range, false).each(setRange);\n          }\n        });\n        editor.on('click', function (e) {\n          var contentEditableRoot = getContentEditableRoot(editor, e.target);\n          if (contentEditableRoot) {\n            if (isContentEditableFalse(contentEditableRoot)) {\n              e.preventDefault();\n              editor.focus();\n            }\n            if (isContentEditableTrue(contentEditableRoot)) {\n              if (dom.isChildOf(contentEditableRoot, selection.getNode())) {\n                removeElementSelection();\n              }\n            }\n          }\n        });\n        editor.on('blur NewBlock', removeElementSelection);\n        editor.on('ResizeWindow FullscreenStateChanged', fakeCaret.reposition);\n        var hasNormalCaretPosition = function (elm) {\n          var caretWalker = CaretWalker(elm);\n          if (!elm.firstChild) {\n            return false;\n          }\n          var startPos = CaretPosition.before(elm.firstChild);\n          var newPos = caretWalker.next(startPos);\n          return newPos && !isNearFakeSelectionElement(newPos);\n        };\n        var isInSameBlock = function (node1, node2) {\n          var block1 = dom.getParent(node1, isBlock);\n          var block2 = dom.getParent(node2, isBlock);\n          return block1 === block2;\n        };\n        var hasBetterMouseTarget = function (targetNode, caretNode) {\n          var targetBlock = dom.getParent(targetNode, isBlock);\n          var caretBlock = dom.getParent(caretNode, isBlock);\n          if (targetBlock && targetNode !== caretBlock && dom.isChildOf(targetBlock, caretBlock) && isContentEditableFalse(getContentEditableRoot(editor, targetBlock)) === false) {\n            return true;\n          }\n          return targetBlock && !isInSameBlock(targetBlock, caretBlock) && hasNormalCaretPosition(targetBlock);\n        };\n        editor.on('tap', function (e) {\n          var targetElm = e.target;\n          var contentEditableRoot = getContentEditableRoot(editor, targetElm);\n          if (isContentEditableFalse(contentEditableRoot)) {\n            e.preventDefault();\n            selectNode(editor, contentEditableRoot).each(setElementSelection);\n          } else if (isFakeSelectionTargetElement(targetElm)) {\n            selectNode(editor, targetElm).each(setElementSelection);\n          }\n        }, true);\n        editor.on('mousedown', function (e) {\n          var targetElm = e.target;\n          if (targetElm !== rootNode && targetElm.nodeName !== 'HTML' && !dom.isChildOf(targetElm, rootNode)) {\n            return;\n          }\n          if (isXYInContentArea(editor, e.clientX, e.clientY) === false) {\n            return;\n          }\n          var contentEditableRoot = getContentEditableRoot(editor, targetElm);\n          if (contentEditableRoot) {\n            if (isContentEditableFalse(contentEditableRoot)) {\n              e.preventDefault();\n              selectNode(editor, contentEditableRoot).each(setElementSelection);\n            } else {\n              removeElementSelection();\n              if (!(isContentEditableTrue(contentEditableRoot) && e.shiftKey) && !isXYWithinRange(e.clientX, e.clientY, selection.getRng())) {\n                hideFakeCaret();\n                selection.placeCaretAt(e.clientX, e.clientY);\n              }\n            }\n          } else if (isFakeSelectionTargetElement(targetElm)) {\n            selectNode(editor, targetElm).each(setElementSelection);\n          } else if (isFakeCaretTarget(targetElm) === false) {\n            removeElementSelection();\n            hideFakeCaret();\n            var fakeCaretInfo = closestFakeCaret(rootNode, e.clientX, e.clientY);\n            if (fakeCaretInfo) {\n              if (!hasBetterMouseTarget(targetElm, fakeCaretInfo.node)) {\n                e.preventDefault();\n                var range = showCaret(1, fakeCaretInfo.node, fakeCaretInfo.before, false);\n                editor.getBody().focus();\n                setRange(range);\n              }\n            }\n          }\n        });\n        editor.on('keypress', function (e) {\n          if (VK.modifierPressed(e)) {\n            return;\n          }\n          if (isContentEditableFalse(selection.getNode())) {\n            e.preventDefault();\n          }\n        });\n        editor.on('GetSelectionRange', function (e) {\n          var rng = e.range;\n          if (selectedElement) {\n            if (!selectedElement.parentNode) {\n              selectedElement = null;\n              return;\n            }\n            rng = rng.cloneRange();\n            rng.selectNode(selectedElement);\n            e.range = rng;\n          }\n        });\n        editor.on('SetSelectionRange', function (e) {\n          e.range = normalizeShortEndedElementSelection(e.range);\n          var rng = setElementSelection(e.range, e.forward);\n          if (rng) {\n            e.range = rng;\n          }\n        });\n        var isPasteBin = function (node) {\n          return node.id === 'mcepastebin';\n        };\n        editor.on('AfterSetSelectionRange', function (e) {\n          var rng = e.range;\n          var parentNode = rng.startContainer.parentNode;\n          if (!isRangeInCaretContainer(rng) && !isPasteBin(parentNode)) {\n            hideFakeCaret();\n          }\n          if (!isFakeSelectionElement(parentNode)) {\n            removeElementSelection();\n          }\n        });\n        editor.on('copy', function (e) {\n          var clipboardData = e.clipboardData;\n          if (!e.isDefaultPrevented() && e.clipboardData && !Env.ie) {\n            var realSelectionElement = getRealSelectionElement();\n            if (realSelectionElement) {\n              e.preventDefault();\n              clipboardData.clearData();\n              clipboardData.setData('text/html', realSelectionElement.outerHTML);\n              clipboardData.setData('text/plain', realSelectionElement.outerText || realSelectionElement.innerText);\n            }\n          }\n        });\n        init$2(editor);\n        setup$1(editor);\n        setup(editor);\n      };\n      var isWithinCaretContainer = function (node) {\n        return isCaretContainer$2(node) || startsWithCaretContainer$1(node) || endsWithCaretContainer$1(node);\n      };\n      var isRangeInCaretContainer = function (rng) {\n        return isWithinCaretContainer(rng.startContainer) || isWithinCaretContainer(rng.endContainer);\n      };\n      var normalizeShortEndedElementSelection = function (rng) {\n        var shortEndedElements = editor.schema.getShortEndedElements();\n        var newRng = dom.createRng();\n        var startContainer = rng.startContainer;\n        var startOffset = rng.startOffset;\n        var endContainer = rng.endContainer;\n        var endOffset = rng.endOffset;\n        if (has$2(shortEndedElements, startContainer.nodeName.toLowerCase())) {\n          if (startOffset === 0) {\n            newRng.setStartBefore(startContainer);\n          } else {\n            newRng.setStartAfter(startContainer);\n          }\n        } else {\n          newRng.setStart(startContainer, startOffset);\n        }\n        if (has$2(shortEndedElements, endContainer.nodeName.toLowerCase())) {\n          if (endOffset === 0) {\n            newRng.setEndBefore(endContainer);\n          } else {\n            newRng.setEndAfter(endContainer);\n          }\n        } else {\n          newRng.setEnd(endContainer, endOffset);\n        }\n        return newRng;\n      };\n      var setupOffscreenSelection = function (node, targetClone, origTargetClone) {\n        var $ = editor.$;\n        var $realSelectionContainer = descendant(SugarElement.fromDom(editor.getBody()), '#' + realSelectionId).fold(function () {\n          return $([]);\n        }, function (elm) {\n          return $([elm.dom]);\n        });\n        if ($realSelectionContainer.length === 0) {\n          $realSelectionContainer = $('<div data-mce-bogus=\"all\" class=\"mce-offscreen-selection\"></div>').attr('id', realSelectionId);\n          $realSelectionContainer.appendTo(editor.getBody());\n        }\n        var newRange = dom.createRng();\n        if (targetClone === origTargetClone && Env.ie) {\n          $realSelectionContainer.empty().append('<p style=\"font-size: 0\" data-mce-bogus=\"all\">\\xA0</p>').append(targetClone);\n          newRange.setStartAfter($realSelectionContainer[0].firstChild.firstChild);\n          newRange.setEndAfter(targetClone);\n        } else {\n          $realSelectionContainer.empty().append(nbsp).append(targetClone).append(nbsp);\n          newRange.setStart($realSelectionContainer[0].firstChild, 1);\n          newRange.setEnd($realSelectionContainer[0].lastChild, 0);\n        }\n        $realSelectionContainer.css({ top: dom.getPos(node, editor.getBody()).y });\n        $realSelectionContainer[0].focus();\n        var sel = selection.getSel();\n        sel.removeAllRanges();\n        sel.addRange(newRange);\n        return newRange;\n      };\n      var selectElement = function (elm) {\n        var targetClone = elm.cloneNode(true);\n        var e = editor.fire('ObjectSelected', {\n          target: elm,\n          targetClone: targetClone\n        });\n        if (e.isDefaultPrevented()) {\n          return null;\n        }\n        var range = setupOffscreenSelection(elm, e.targetClone, targetClone);\n        var nodeElm = SugarElement.fromDom(elm);\n        each$k(descendants(SugarElement.fromDom(editor.getBody()), '*[data-mce-selected]'), function (elm) {\n          if (!eq(nodeElm, elm)) {\n            remove$6(elm, elementSelectionAttr);\n          }\n        });\n        if (!dom.getAttrib(elm, elementSelectionAttr)) {\n          elm.setAttribute(elementSelectionAttr, '1');\n        }\n        selectedElement = elm;\n        hideFakeCaret();\n        return range;\n      };\n      var setElementSelection = function (range, forward) {\n        if (!range) {\n          return null;\n        }\n        if (range.collapsed) {\n          if (!isRangeInCaretContainer(range)) {\n            var dir = forward ? 1 : -1;\n            var caretPosition = getNormalizedRangeEndPoint(dir, rootNode, range);\n            var beforeNode = caretPosition.getNode(!forward);\n            if (isFakeCaretTarget(beforeNode)) {\n              return showCaret(dir, beforeNode, forward ? !caretPosition.isAtEnd() : false, false);\n            }\n            var afterNode = caretPosition.getNode(forward);\n            if (isFakeCaretTarget(afterNode)) {\n              return showCaret(dir, afterNode, forward ? false : !caretPosition.isAtEnd(), false);\n            }\n          }\n          return null;\n        }\n        var startContainer = range.startContainer;\n        var startOffset = range.startOffset;\n        var endOffset = range.endOffset;\n        if (startContainer.nodeType === 3 && startOffset === 0 && isContentEditableFalse(startContainer.parentNode)) {\n          startContainer = startContainer.parentNode;\n          startOffset = dom.nodeIndex(startContainer);\n          startContainer = startContainer.parentNode;\n        }\n        if (startContainer.nodeType !== 1) {\n          return null;\n        }\n        if (endOffset === startOffset + 1 && startContainer === range.endContainer) {\n          var node = startContainer.childNodes[startOffset];\n          if (isFakeSelectionTargetElement(node)) {\n            return selectElement(node);\n          }\n        }\n        return null;\n      };\n      var removeElementSelection = function () {\n        if (selectedElement) {\n          selectedElement.removeAttribute(elementSelectionAttr);\n        }\n        descendant(SugarElement.fromDom(editor.getBody()), '#' + realSelectionId).each(remove$7);\n        selectedElement = null;\n      };\n      var destroy = function () {\n        fakeCaret.destroy();\n        selectedElement = null;\n      };\n      var hideFakeCaret = function () {\n        fakeCaret.hide();\n      };\n      if (Env.ceFalse && !isRtc(editor)) {\n        registerEvents();\n      }\n      return {\n        showCaret: showCaret,\n        showBlockCaretContainer: showBlockCaretContainer,\n        hideFakeCaret: hideFakeCaret,\n        destroy: destroy\n      };\n    };\n\n    var Quirks = function (editor) {\n      var each = Tools.each;\n      var BACKSPACE = VK.BACKSPACE, DELETE = VK.DELETE, dom = editor.dom, selection = editor.selection, parser = editor.parser;\n      var isGecko = Env.gecko, isIE = Env.ie, isWebKit = Env.webkit;\n      var mceInternalUrlPrefix = 'data:text/mce-internal,';\n      var mceInternalDataType = isIE ? 'Text' : 'URL';\n      var setEditorCommandState = function (cmd, state) {\n        try {\n          editor.getDoc().execCommand(cmd, false, state);\n        } catch (ex) {\n        }\n      };\n      var isDefaultPrevented = function (e) {\n        return e.isDefaultPrevented();\n      };\n      var setMceInternalContent = function (e) {\n        var selectionHtml, internalContent;\n        if (e.dataTransfer) {\n          if (editor.selection.isCollapsed() && e.target.tagName === 'IMG') {\n            selection.select(e.target);\n          }\n          selectionHtml = editor.selection.getContent();\n          if (selectionHtml.length > 0) {\n            internalContent = mceInternalUrlPrefix + escape(editor.id) + ',' + escape(selectionHtml);\n            e.dataTransfer.setData(mceInternalDataType, internalContent);\n          }\n        }\n      };\n      var getMceInternalContent = function (e) {\n        var internalContent;\n        if (e.dataTransfer) {\n          internalContent = e.dataTransfer.getData(mceInternalDataType);\n          if (internalContent && internalContent.indexOf(mceInternalUrlPrefix) >= 0) {\n            internalContent = internalContent.substr(mceInternalUrlPrefix.length).split(',');\n            return {\n              id: unescape(internalContent[0]),\n              html: unescape(internalContent[1])\n            };\n          }\n        }\n        return null;\n      };\n      var insertClipboardContents = function (content, internal) {\n        if (editor.queryCommandSupported('mceInsertClipboardContent')) {\n          editor.execCommand('mceInsertClipboardContent', false, {\n            content: content,\n            internal: internal\n          });\n        } else {\n          editor.execCommand('mceInsertContent', false, content);\n        }\n      };\n      var emptyEditorWhenDeleting = function () {\n        var serializeRng = function (rng) {\n          var body = dom.create('body');\n          var contents = rng.cloneContents();\n          body.appendChild(contents);\n          return selection.serializer.serialize(body, { format: 'html' });\n        };\n        var allContentsSelected = function (rng) {\n          var selection = serializeRng(rng);\n          var allRng = dom.createRng();\n          allRng.selectNode(editor.getBody());\n          var allSelection = serializeRng(allRng);\n          return selection === allSelection;\n        };\n        editor.on('keydown', function (e) {\n          var keyCode = e.keyCode;\n          var isCollapsed, body;\n          if (!isDefaultPrevented(e) && (keyCode === DELETE || keyCode === BACKSPACE)) {\n            isCollapsed = editor.selection.isCollapsed();\n            body = editor.getBody();\n            if (isCollapsed && !dom.isEmpty(body)) {\n              return;\n            }\n            if (!isCollapsed && !allContentsSelected(editor.selection.getRng())) {\n              return;\n            }\n            e.preventDefault();\n            editor.setContent('');\n            if (body.firstChild && dom.isBlock(body.firstChild)) {\n              editor.selection.setCursorLocation(body.firstChild, 0);\n            } else {\n              editor.selection.setCursorLocation(body, 0);\n            }\n            editor.nodeChanged();\n          }\n        });\n      };\n      var selectAll = function () {\n        editor.shortcuts.add('meta+a', null, 'SelectAll');\n      };\n      var documentElementEditingFocus = function () {\n        if (!editor.inline) {\n          dom.bind(editor.getDoc(), 'mousedown mouseup', function (e) {\n            var rng;\n            if (e.target === editor.getDoc().documentElement) {\n              rng = selection.getRng();\n              editor.getBody().focus();\n              if (e.type === 'mousedown') {\n                if (isCaretContainer$2(rng.startContainer)) {\n                  return;\n                }\n                selection.placeCaretAt(e.clientX, e.clientY);\n              } else {\n                selection.setRng(rng);\n              }\n            }\n          });\n        }\n      };\n      var removeHrOnBackspace = function () {\n        editor.on('keydown', function (e) {\n          if (!isDefaultPrevented(e) && e.keyCode === BACKSPACE) {\n            if (!editor.getBody().getElementsByTagName('hr').length) {\n              return;\n            }\n            if (selection.isCollapsed() && selection.getRng().startOffset === 0) {\n              var node = selection.getNode();\n              var previousSibling = node.previousSibling;\n              if (node.nodeName === 'HR') {\n                dom.remove(node);\n                e.preventDefault();\n                return;\n              }\n              if (previousSibling && previousSibling.nodeName && previousSibling.nodeName.toLowerCase() === 'hr') {\n                dom.remove(previousSibling);\n                e.preventDefault();\n              }\n            }\n          }\n        });\n      };\n      var focusBody = function () {\n        if (!Range.prototype.getClientRects) {\n          editor.on('mousedown', function (e) {\n            if (!isDefaultPrevented(e) && e.target.nodeName === 'HTML') {\n              var body_1 = editor.getBody();\n              body_1.blur();\n              Delay.setEditorTimeout(editor, function () {\n                body_1.focus();\n              });\n            }\n          });\n        }\n      };\n      var selectControlElements = function () {\n        editor.on('click', function (e) {\n          var target = e.target;\n          if (/^(IMG|HR)$/.test(target.nodeName) && dom.getContentEditableParent(target) !== 'false') {\n            e.preventDefault();\n            editor.selection.select(target);\n            editor.nodeChanged();\n          }\n          if (target.nodeName === 'A' && dom.hasClass(target, 'mce-item-anchor')) {\n            e.preventDefault();\n            selection.select(target);\n          }\n        });\n      };\n      var removeStylesWhenDeletingAcrossBlockElements = function () {\n        var getAttributeApplyFunction = function () {\n          var template = dom.getAttribs(selection.getStart().cloneNode(false));\n          return function () {\n            var target = selection.getStart();\n            if (target !== editor.getBody()) {\n              dom.setAttrib(target, 'style', null);\n              each(template, function (attr) {\n                target.setAttributeNode(attr.cloneNode(true));\n              });\n            }\n          };\n        };\n        var isSelectionAcrossElements = function () {\n          return !selection.isCollapsed() && dom.getParent(selection.getStart(), dom.isBlock) !== dom.getParent(selection.getEnd(), dom.isBlock);\n        };\n        editor.on('keypress', function (e) {\n          var applyAttributes;\n          if (!isDefaultPrevented(e) && (e.keyCode === 8 || e.keyCode === 46) && isSelectionAcrossElements()) {\n            applyAttributes = getAttributeApplyFunction();\n            editor.getDoc().execCommand('delete', false, null);\n            applyAttributes();\n            e.preventDefault();\n            return false;\n          }\n        });\n        dom.bind(editor.getDoc(), 'cut', function (e) {\n          var applyAttributes;\n          if (!isDefaultPrevented(e) && isSelectionAcrossElements()) {\n            applyAttributes = getAttributeApplyFunction();\n            Delay.setEditorTimeout(editor, function () {\n              applyAttributes();\n            });\n          }\n        });\n      };\n      var disableBackspaceIntoATable = function () {\n        editor.on('keydown', function (e) {\n          if (!isDefaultPrevented(e) && e.keyCode === BACKSPACE) {\n            if (selection.isCollapsed() && selection.getRng().startOffset === 0) {\n              var previousSibling = selection.getNode().previousSibling;\n              if (previousSibling && previousSibling.nodeName && previousSibling.nodeName.toLowerCase() === 'table') {\n                e.preventDefault();\n                return false;\n              }\n            }\n          }\n        });\n      };\n      var removeBlockQuoteOnBackSpace = function () {\n        editor.on('keydown', function (e) {\n          var rng, parent;\n          if (isDefaultPrevented(e) || e.keyCode !== VK.BACKSPACE) {\n            return;\n          }\n          rng = selection.getRng();\n          var container = rng.startContainer;\n          var offset = rng.startOffset;\n          var root = dom.getRoot();\n          parent = container;\n          if (!rng.collapsed || offset !== 0) {\n            return;\n          }\n          while (parent && parent.parentNode && parent.parentNode.firstChild === parent && parent.parentNode !== root) {\n            parent = parent.parentNode;\n          }\n          if (parent.tagName === 'BLOCKQUOTE') {\n            editor.formatter.toggle('blockquote', null, parent);\n            rng = dom.createRng();\n            rng.setStart(container, 0);\n            rng.setEnd(container, 0);\n            selection.setRng(rng);\n          }\n        });\n      };\n      var setGeckoEditingOptions = function () {\n        var setOpts = function () {\n          setEditorCommandState('StyleWithCSS', false);\n          setEditorCommandState('enableInlineTableEditing', false);\n          if (!getObjectResizing(editor)) {\n            setEditorCommandState('enableObjectResizing', false);\n          }\n        };\n        if (!isReadOnly$1(editor)) {\n          editor.on('BeforeExecCommand mousedown', setOpts);\n        }\n      };\n      var addBrAfterLastLinks = function () {\n        var fixLinks = function () {\n          each(dom.select('a'), function (node) {\n            var parentNode = node.parentNode;\n            var root = dom.getRoot();\n            if (parentNode.lastChild === node) {\n              while (parentNode && !dom.isBlock(parentNode)) {\n                if (parentNode.parentNode.lastChild !== parentNode || parentNode === root) {\n                  return;\n                }\n                parentNode = parentNode.parentNode;\n              }\n              dom.add(parentNode, 'br', { 'data-mce-bogus': 1 });\n            }\n          });\n        };\n        editor.on('SetContent ExecCommand', function (e) {\n          if (e.type === 'setcontent' || e.command === 'mceInsertLink') {\n            fixLinks();\n          }\n        });\n      };\n      var setDefaultBlockType = function () {\n        if (getForcedRootBlock(editor)) {\n          editor.on('init', function () {\n            setEditorCommandState('DefaultParagraphSeparator', getForcedRootBlock(editor));\n          });\n        }\n      };\n      var normalizeSelection = function () {\n        editor.on('keyup focusin mouseup', function (e) {\n          if (!VK.modifierPressed(e)) {\n            selection.normalize();\n          }\n        }, true);\n      };\n      var showBrokenImageIcon = function () {\n        editor.contentStyles.push('img:-moz-broken {' + '-moz-force-broken-image-icon:1;' + 'min-width:24px;' + 'min-height:24px' + '}');\n      };\n      var restoreFocusOnKeyDown = function () {\n        if (!editor.inline) {\n          editor.on('keydown', function () {\n            if (document.activeElement === document.body) {\n              editor.getWin().focus();\n            }\n          });\n        }\n      };\n      var bodyHeight = function () {\n        if (!editor.inline) {\n          editor.contentStyles.push('body {min-height: 150px}');\n          editor.on('click', function (e) {\n            var rng;\n            if (e.target.nodeName === 'HTML') {\n              if (Env.ie > 11) {\n                editor.getBody().focus();\n                return;\n              }\n              rng = editor.selection.getRng();\n              editor.getBody().focus();\n              editor.selection.setRng(rng);\n              editor.selection.normalize();\n              editor.nodeChanged();\n            }\n          });\n        }\n      };\n      var blockCmdArrowNavigation = function () {\n        if (Env.mac) {\n          editor.on('keydown', function (e) {\n            if (VK.metaKeyPressed(e) && !e.shiftKey && (e.keyCode === 37 || e.keyCode === 39)) {\n              e.preventDefault();\n              var selection_1 = editor.selection.getSel();\n              selection_1.modify('move', e.keyCode === 37 ? 'backward' : 'forward', 'lineboundary');\n            }\n          });\n        }\n      };\n      var disableAutoUrlDetect = function () {\n        setEditorCommandState('AutoUrlDetect', false);\n      };\n      var tapLinksAndImages = function () {\n        editor.on('click', function (e) {\n          var elm = e.target;\n          do {\n            if (elm.tagName === 'A') {\n              e.preventDefault();\n              return;\n            }\n          } while (elm = elm.parentNode);\n        });\n        editor.contentStyles.push('.mce-content-body {-webkit-touch-callout: none}');\n      };\n      var blockFormSubmitInsideEditor = function () {\n        editor.on('init', function () {\n          editor.dom.bind(editor.getBody(), 'submit', function (e) {\n            e.preventDefault();\n          });\n        });\n      };\n      var removeAppleInterchangeBrs = function () {\n        parser.addNodeFilter('br', function (nodes) {\n          var i = nodes.length;\n          while (i--) {\n            if (nodes[i].attr('class') === 'Apple-interchange-newline') {\n              nodes[i].remove();\n            }\n          }\n        });\n      };\n      var ieInternalDragAndDrop = function () {\n        editor.on('dragstart', function (e) {\n          setMceInternalContent(e);\n        });\n        editor.on('drop', function (e) {\n          if (!isDefaultPrevented(e)) {\n            var internalContent = getMceInternalContent(e);\n            if (internalContent && internalContent.id !== editor.id) {\n              e.preventDefault();\n              var rng = fromPoint(e.x, e.y, editor.getDoc());\n              selection.setRng(rng);\n              insertClipboardContents(internalContent.html, true);\n            }\n          }\n        });\n      };\n      var refreshContentEditable = noop;\n      var isHidden = function () {\n        if (!isGecko || editor.removed) {\n          return false;\n        }\n        var sel = editor.selection.getSel();\n        return !sel || !sel.rangeCount || sel.rangeCount === 0;\n      };\n      var setupRtc = function () {\n        if (isWebKit) {\n          documentElementEditingFocus();\n          selectControlElements();\n          blockFormSubmitInsideEditor();\n          selectAll();\n          if (Env.iOS) {\n            restoreFocusOnKeyDown();\n            bodyHeight();\n            tapLinksAndImages();\n          }\n        }\n        if (isGecko) {\n          focusBody();\n          setGeckoEditingOptions();\n          showBrokenImageIcon();\n          blockCmdArrowNavigation();\n        }\n      };\n      var setup = function () {\n        removeBlockQuoteOnBackSpace();\n        emptyEditorWhenDeleting();\n        if (!Env.windowsPhone) {\n          normalizeSelection();\n        }\n        if (isWebKit) {\n          documentElementEditingFocus();\n          selectControlElements();\n          setDefaultBlockType();\n          blockFormSubmitInsideEditor();\n          disableBackspaceIntoATable();\n          removeAppleInterchangeBrs();\n          if (Env.iOS) {\n            restoreFocusOnKeyDown();\n            bodyHeight();\n            tapLinksAndImages();\n          } else {\n            selectAll();\n          }\n        }\n        if (Env.ie >= 11) {\n          bodyHeight();\n          disableBackspaceIntoATable();\n        }\n        if (Env.ie) {\n          selectAll();\n          disableAutoUrlDetect();\n          ieInternalDragAndDrop();\n        }\n        if (isGecko) {\n          removeHrOnBackspace();\n          focusBody();\n          removeStylesWhenDeletingAcrossBlockElements();\n          setGeckoEditingOptions();\n          addBrAfterLastLinks();\n          showBrokenImageIcon();\n          blockCmdArrowNavigation();\n          disableBackspaceIntoATable();\n        }\n      };\n      if (isRtc(editor)) {\n        setupRtc();\n      } else {\n        setup();\n      }\n      return {\n        refreshContentEditable: refreshContentEditable,\n        isHidden: isHidden\n      };\n    };\n\n    var DOM$6 = DOMUtils.DOM;\n    var appendStyle = function (editor, text) {\n      var body = SugarElement.fromDom(editor.getBody());\n      var container = getStyleContainer(getRootNode(body));\n      var style = SugarElement.fromTag('style');\n      set$1(style, 'type', 'text/css');\n      append$1(style, SugarElement.fromText(text));\n      append$1(container, style);\n      editor.on('remove', function () {\n        remove$7(style);\n      });\n    };\n    var getRootName = function (editor) {\n      return editor.inline ? editor.getElement().nodeName.toLowerCase() : undefined;\n    };\n    var removeUndefined = function (obj) {\n      return filter$3(obj, function (v) {\n        return isUndefined(v) === false;\n      });\n    };\n    var mkParserSettings = function (editor) {\n      var settings = editor.settings;\n      var blobCache = editor.editorUpload.blobCache;\n      return removeUndefined({\n        allow_conditional_comments: settings.allow_conditional_comments,\n        allow_html_data_urls: settings.allow_html_data_urls,\n        allow_svg_data_urls: settings.allow_svg_data_urls,\n        allow_html_in_named_anchor: settings.allow_html_in_named_anchor,\n        allow_script_urls: settings.allow_script_urls,\n        allow_unsafe_link_target: settings.allow_unsafe_link_target,\n        convert_fonts_to_spans: settings.convert_fonts_to_spans,\n        fix_list_elements: settings.fix_list_elements,\n        font_size_legacy_values: settings.font_size_legacy_values,\n        forced_root_block: settings.forced_root_block,\n        forced_root_block_attrs: settings.forced_root_block_attrs,\n        padd_empty_with_br: settings.padd_empty_with_br,\n        preserve_cdata: settings.preserve_cdata,\n        remove_trailing_brs: settings.remove_trailing_brs,\n        inline_styles: settings.inline_styles,\n        root_name: getRootName(editor),\n        validate: true,\n        blob_cache: blobCache,\n        document: editor.getDoc(),\n        images_dataimg_filter: settings.images_dataimg_filter\n      });\n    };\n    var mkSerializerSettings = function (editor) {\n      var settings = editor.settings;\n      return __assign(__assign({}, mkParserSettings(editor)), removeUndefined({\n        url_converter: settings.url_converter,\n        url_converter_scope: settings.url_converter_scope,\n        element_format: settings.element_format,\n        entities: settings.entities,\n        entity_encoding: settings.entity_encoding,\n        indent: settings.indent,\n        indent_after: settings.indent_after,\n        indent_before: settings.indent_before,\n        block_elements: settings.block_elements,\n        boolean_attributes: settings.boolean_attributes,\n        custom_elements: settings.custom_elements,\n        extended_valid_elements: settings.extended_valid_elements,\n        invalid_elements: settings.invalid_elements,\n        invalid_styles: settings.invalid_styles,\n        move_caret_before_on_enter_elements: settings.move_caret_before_on_enter_elements,\n        non_empty_elements: settings.non_empty_elements,\n        schema: settings.schema,\n        self_closing_elements: settings.self_closing_elements,\n        short_ended_elements: settings.short_ended_elements,\n        special: settings.special,\n        text_block_elements: settings.text_block_elements,\n        text_inline_elements: settings.text_inline_elements,\n        valid_children: settings.valid_children,\n        valid_classes: settings.valid_classes,\n        valid_elements: settings.valid_elements,\n        valid_styles: settings.valid_styles,\n        verify_html: settings.verify_html,\n        whitespace_elements: settings.whitespace_elements\n      }));\n    };\n    var createParser = function (editor) {\n      var parser = DomParser(mkParserSettings(editor), editor.schema);\n      parser.addAttributeFilter('src,href,style,tabindex', function (nodes, name) {\n        var i = nodes.length, node, value;\n        var dom = editor.dom;\n        var internalName = 'data-mce-' + name;\n        while (i--) {\n          node = nodes[i];\n          value = node.attr(name);\n          if (value && !node.attr(internalName)) {\n            if (value.indexOf('data:') === 0 || value.indexOf('blob:') === 0) {\n              continue;\n            }\n            if (name === 'style') {\n              value = dom.serializeStyle(dom.parseStyle(value), node.name);\n              if (!value.length) {\n                value = null;\n              }\n              node.attr(internalName, value);\n              node.attr(name, value);\n            } else if (name === 'tabindex') {\n              node.attr(internalName, value);\n              node.attr(name, null);\n            } else {\n              node.attr(internalName, editor.convertURL(value, name, node.name));\n            }\n          }\n        }\n      });\n      parser.addNodeFilter('script', function (nodes) {\n        var i = nodes.length;\n        while (i--) {\n          var node = nodes[i];\n          var type = node.attr('type') || 'no/type';\n          if (type.indexOf('mce-') !== 0) {\n            node.attr('type', 'mce-' + type);\n          }\n        }\n      });\n      if (editor.settings.preserve_cdata) {\n        parser.addNodeFilter('#cdata', function (nodes) {\n          var i = nodes.length;\n          while (i--) {\n            var node = nodes[i];\n            node.type = 8;\n            node.name = '#comment';\n            node.value = '[CDATA[' + editor.dom.encode(node.value) + ']]';\n          }\n        });\n      }\n      parser.addNodeFilter('p,h1,h2,h3,h4,h5,h6,div', function (nodes) {\n        var i = nodes.length;\n        var nonEmptyElements = editor.schema.getNonEmptyElements();\n        while (i--) {\n          var node = nodes[i];\n          if (node.isEmpty(nonEmptyElements) && node.getAll('br').length === 0) {\n            node.append(new AstNode('br', 1)).shortEnded = true;\n          }\n        }\n      });\n      return parser;\n    };\n    var autoFocus = function (editor) {\n      if (editor.settings.auto_focus) {\n        Delay.setEditorTimeout(editor, function () {\n          var focusEditor;\n          if (editor.settings.auto_focus === true) {\n            focusEditor = editor;\n          } else {\n            focusEditor = editor.editorManager.get(editor.settings.auto_focus);\n          }\n          if (!focusEditor.destroyed) {\n            focusEditor.focus();\n          }\n        }, 100);\n      }\n    };\n    var moveSelectionToFirstCaretPosition = function (editor) {\n      var root = editor.dom.getRoot();\n      if (!editor.inline && (!hasAnyRanges(editor) || editor.selection.getStart(true) === root)) {\n        firstPositionIn(root).each(function (pos) {\n          var node = pos.getNode();\n          var caretPos = isTable$3(node) ? firstPositionIn(node).getOr(pos) : pos;\n          if (Env.browser.isIE()) {\n            storeNative(editor, caretPos.toRange());\n          } else {\n            editor.selection.setRng(caretPos.toRange());\n          }\n        });\n      }\n    };\n    var initEditor = function (editor) {\n      editor.bindPendingEventDelegates();\n      editor.initialized = true;\n      fireInit(editor);\n      editor.focus(true);\n      moveSelectionToFirstCaretPosition(editor);\n      editor.nodeChanged({ initial: true });\n      editor.execCallback('init_instance_callback', editor);\n      autoFocus(editor);\n    };\n    var getStyleSheetLoader$1 = function (editor) {\n      return editor.inline ? editor.ui.styleSheetLoader : editor.dom.styleSheetLoader;\n    };\n    var makeStylesheetLoadingPromises = function (editor, css, framedFonts) {\n      var promises = [new promiseObj(function (resolve, reject) {\n          return getStyleSheetLoader$1(editor).loadAll(css, resolve, reject);\n        })];\n      if (editor.inline) {\n        return promises;\n      } else {\n        return promises.concat([new promiseObj(function (resolve, reject) {\n            return editor.ui.styleSheetLoader.loadAll(framedFonts, resolve, reject);\n          })]);\n      }\n    };\n    var loadContentCss = function (editor) {\n      var styleSheetLoader = getStyleSheetLoader$1(editor);\n      var fontCss = getFontCss(editor);\n      var css = editor.contentCSS;\n      var removeCss = function () {\n        styleSheetLoader.unloadAll(css);\n        if (!editor.inline) {\n          editor.ui.styleSheetLoader.unloadAll(fontCss);\n        }\n      };\n      var loaded = function () {\n        if (editor.removed) {\n          removeCss();\n        } else {\n          editor.on('remove', removeCss);\n        }\n      };\n      if (editor.contentStyles.length > 0) {\n        var contentCssText_1 = '';\n        Tools.each(editor.contentStyles, function (style) {\n          contentCssText_1 += style + '\\r\\n';\n        });\n        editor.dom.addStyle(contentCssText_1);\n      }\n      var allStylesheets = promiseObj.all(makeStylesheetLoadingPromises(editor, css, fontCss)).then(loaded).catch(loaded);\n      if (editor.settings.content_style) {\n        appendStyle(editor, editor.settings.content_style);\n      }\n      return allStylesheets;\n    };\n    var preInit = function (editor) {\n      var settings = editor.settings, doc = editor.getDoc(), body = editor.getBody();\n      firePreInit(editor);\n      if (!settings.browser_spellcheck && !settings.gecko_spellcheck) {\n        doc.body.spellcheck = false;\n        DOM$6.setAttrib(body, 'spellcheck', 'false');\n      }\n      editor.quirks = Quirks(editor);\n      firePostRender(editor);\n      var directionality = getDirectionality(editor);\n      if (directionality !== undefined) {\n        body.dir = directionality;\n      }\n      if (settings.protect) {\n        editor.on('BeforeSetContent', function (e) {\n          Tools.each(settings.protect, function (pattern) {\n            e.content = e.content.replace(pattern, function (str) {\n              return '<!--mce:protected ' + escape(str) + '-->';\n            });\n          });\n        });\n      }\n      editor.on('SetContent', function () {\n        editor.addVisual(editor.getBody());\n      });\n      editor.on('compositionstart compositionend', function (e) {\n        editor.composing = e.type === 'compositionstart';\n      });\n    };\n    var loadInitialContent = function (editor) {\n      if (!isRtc(editor)) {\n        editor.load({\n          initial: true,\n          format: 'html'\n        });\n      }\n      editor.startContent = editor.getContent({ format: 'raw' });\n    };\n    var initEditorWithInitialContent = function (editor) {\n      if (editor.removed !== true) {\n        loadInitialContent(editor);\n        initEditor(editor);\n      }\n    };\n    var initContentBody = function (editor, skipWrite) {\n      var settings = editor.settings;\n      var targetElm = editor.getElement();\n      var doc = editor.getDoc();\n      if (!settings.inline) {\n        editor.getElement().style.visibility = editor.orgVisibility;\n      }\n      if (!skipWrite && !editor.inline) {\n        doc.open();\n        doc.write(editor.iframeHTML);\n        doc.close();\n      }\n      if (editor.inline) {\n        DOM$6.addClass(targetElm, 'mce-content-body');\n        editor.contentDocument = doc = document;\n        editor.contentWindow = window;\n        editor.bodyElement = targetElm;\n        editor.contentAreaContainer = targetElm;\n      }\n      var body = editor.getBody();\n      body.disabled = true;\n      editor.readonly = !!settings.readonly;\n      if (!editor.readonly) {\n        if (editor.inline && DOM$6.getStyle(body, 'position', true) === 'static') {\n          body.style.position = 'relative';\n        }\n        body.contentEditable = editor.getParam('content_editable_state', true);\n      }\n      body.disabled = false;\n      editor.editorUpload = EditorUpload(editor);\n      editor.schema = Schema(settings);\n      editor.dom = DOMUtils(doc, {\n        keep_values: true,\n        url_converter: editor.convertURL,\n        url_converter_scope: editor,\n        hex_colors: settings.force_hex_style_colors,\n        update_styles: true,\n        root_element: editor.inline ? editor.getBody() : null,\n        collect: function () {\n          return editor.inline;\n        },\n        schema: editor.schema,\n        contentCssCors: shouldUseContentCssCors(editor),\n        referrerPolicy: getReferrerPolicy(editor),\n        onSetAttrib: function (e) {\n          editor.fire('SetAttrib', e);\n        }\n      });\n      editor.parser = createParser(editor);\n      editor.serializer = DomSerializer(mkSerializerSettings(editor), editor);\n      editor.selection = EditorSelection(editor.dom, editor.getWin(), editor.serializer, editor);\n      editor.annotator = Annotator(editor);\n      editor.formatter = Formatter(editor);\n      editor.undoManager = UndoManager(editor);\n      editor._nodeChangeDispatcher = new NodeChange(editor);\n      editor._selectionOverrides = SelectionOverrides(editor);\n      setup$e(editor);\n      setup$3(editor);\n      if (!isRtc(editor)) {\n        setup$2(editor);\n      }\n      var caret = setup$4(editor);\n      setup$f(editor, caret);\n      setup$d(editor);\n      setup$g(editor);\n      var setupRtcThunk = setup$i(editor);\n      preInit(editor);\n      setupRtcThunk.fold(function () {\n        loadContentCss(editor).then(function () {\n          return initEditorWithInitialContent(editor);\n        });\n      }, function (setupRtc) {\n        editor.setProgressState(true);\n        loadContentCss(editor).then(function () {\n          setupRtc().then(function (_rtcMode) {\n            editor.setProgressState(false);\n            initEditorWithInitialContent(editor);\n          }, function (err) {\n            editor.notificationManager.open({\n              type: 'error',\n              text: String(err)\n            });\n            initEditorWithInitialContent(editor);\n          });\n        });\n      });\n    };\n\n    var DOM$5 = DOMUtils.DOM;\n    var relaxDomain = function (editor, ifr) {\n      if (document.domain !== window.location.hostname && Env.browser.isIE()) {\n        var bodyUuid = uuid('mce');\n        editor[bodyUuid] = function () {\n          initContentBody(editor);\n        };\n        var domainRelaxUrl = 'javascript:(function(){' + 'document.open();document.domain=\"' + document.domain + '\";' + 'var ed = window.parent.tinymce.get(\"' + editor.id + '\");document.write(ed.iframeHTML);' + 'document.close();ed.' + bodyUuid + '(true);})()';\n        DOM$5.setAttrib(ifr, 'src', domainRelaxUrl);\n        return true;\n      }\n      return false;\n    };\n    var createIframeElement = function (id, title, height, customAttrs) {\n      var iframe = SugarElement.fromTag('iframe');\n      setAll$1(iframe, customAttrs);\n      setAll$1(iframe, {\n        id: id + '_ifr',\n        frameBorder: '0',\n        allowTransparency: 'true',\n        title: title\n      });\n      add$1(iframe, 'tox-edit-area__iframe');\n      return iframe;\n    };\n    var getIframeHtml = function (editor) {\n      var iframeHTML = getDocType(editor) + '<html><head>';\n      if (getDocumentBaseUrl(editor) !== editor.documentBaseUrl) {\n        iframeHTML += '<base href=\"' + editor.documentBaseURI.getURI() + '\" />';\n      }\n      iframeHTML += '<meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\" />';\n      var bodyId = getBodyId(editor);\n      var bodyClass = getBodyClass(editor);\n      if (getContentSecurityPolicy(editor)) {\n        iframeHTML += '<meta http-equiv=\"Content-Security-Policy\" content=\"' + getContentSecurityPolicy(editor) + '\" />';\n      }\n      iframeHTML += '</head><body id=\"' + bodyId + '\" class=\"mce-content-body ' + bodyClass + '\" data-id=\"' + editor.id + '\"><br></body></html>';\n      return iframeHTML;\n    };\n    var createIframe = function (editor, o) {\n      var iframeTranslatedTitle = editor.translate(getIframeTitle(editor));\n      var ifr = createIframeElement(editor.id, iframeTranslatedTitle, o.height, getIframeAttrs(editor)).dom;\n      ifr.onload = function () {\n        ifr.onload = null;\n        editor.fire('load');\n      };\n      var isDomainRelaxed = relaxDomain(editor, ifr);\n      editor.contentAreaContainer = o.iframeContainer;\n      editor.iframeElement = ifr;\n      editor.iframeHTML = getIframeHtml(editor);\n      DOM$5.add(o.iframeContainer, ifr);\n      return isDomainRelaxed;\n    };\n    var init$1 = function (editor, boxInfo) {\n      var isDomainRelaxed = createIframe(editor, boxInfo);\n      if (boxInfo.editorContainer) {\n        DOM$5.get(boxInfo.editorContainer).style.display = editor.orgDisplay;\n        editor.hidden = DOM$5.isHidden(boxInfo.editorContainer);\n      }\n      editor.getElement().style.display = 'none';\n      DOM$5.setAttrib(editor.id, 'aria-hidden', 'true');\n      if (!isDomainRelaxed) {\n        initContentBody(editor);\n      }\n    };\n\n    var DOM$4 = DOMUtils.DOM;\n    var initPlugin = function (editor, initializedPlugins, plugin) {\n      var Plugin = PluginManager.get(plugin);\n      var pluginUrl = PluginManager.urls[plugin] || editor.documentBaseUrl.replace(/\\/$/, '');\n      plugin = Tools.trim(plugin);\n      if (Plugin && Tools.inArray(initializedPlugins, plugin) === -1) {\n        Tools.each(PluginManager.dependencies(plugin), function (dep) {\n          initPlugin(editor, initializedPlugins, dep);\n        });\n        if (editor.plugins[plugin]) {\n          return;\n        }\n        try {\n          var pluginInstance = new Plugin(editor, pluginUrl, editor.$);\n          editor.plugins[plugin] = pluginInstance;\n          if (pluginInstance.init) {\n            pluginInstance.init(editor, pluginUrl);\n            initializedPlugins.push(plugin);\n          }\n        } catch (e) {\n          pluginInitError(editor, plugin, e);\n        }\n      }\n    };\n    var trimLegacyPrefix = function (name) {\n      return name.replace(/^\\-/, '');\n    };\n    var initPlugins = function (editor) {\n      var initializedPlugins = [];\n      Tools.each(getPlugins(editor).split(/[ ,]/), function (name) {\n        initPlugin(editor, initializedPlugins, trimLegacyPrefix(name));\n      });\n    };\n    var initIcons = function (editor) {\n      var iconPackName = Tools.trim(getIconPackName(editor));\n      var currentIcons = editor.ui.registry.getAll().icons;\n      var loadIcons = __assign(__assign({}, IconManager.get('default').icons), IconManager.get(iconPackName).icons);\n      each$j(loadIcons, function (svgData, icon) {\n        if (!has$2(currentIcons, icon)) {\n          editor.ui.registry.addIcon(icon, svgData);\n        }\n      });\n    };\n    var initTheme = function (editor) {\n      var theme = getTheme(editor);\n      if (isString$1(theme)) {\n        editor.settings.theme = trimLegacyPrefix(theme);\n        var Theme = ThemeManager.get(theme);\n        editor.theme = new Theme(editor, ThemeManager.urls[theme]);\n        if (editor.theme.init) {\n          editor.theme.init(editor, ThemeManager.urls[theme] || editor.documentBaseUrl.replace(/\\/$/, ''), editor.$);\n        }\n      } else {\n        editor.theme = {};\n      }\n    };\n    var renderFromLoadedTheme = function (editor) {\n      return editor.theme.renderUI();\n    };\n    var renderFromThemeFunc = function (editor) {\n      var elm = editor.getElement();\n      var theme = getTheme(editor);\n      var info = theme(editor, elm);\n      if (info.editorContainer.nodeType) {\n        info.editorContainer.id = info.editorContainer.id || editor.id + '_parent';\n      }\n      if (info.iframeContainer && info.iframeContainer.nodeType) {\n        info.iframeContainer.id = info.iframeContainer.id || editor.id + '_iframecontainer';\n      }\n      info.height = info.iframeHeight ? info.iframeHeight : elm.offsetHeight;\n      return info;\n    };\n    var createThemeFalseResult = function (element) {\n      return {\n        editorContainer: element,\n        iframeContainer: element,\n        api: {}\n      };\n    };\n    var renderThemeFalseIframe = function (targetElement) {\n      var iframeContainer = DOM$4.create('div');\n      DOM$4.insertAfter(iframeContainer, targetElement);\n      return createThemeFalseResult(iframeContainer);\n    };\n    var renderThemeFalse = function (editor) {\n      var targetElement = editor.getElement();\n      return editor.inline ? createThemeFalseResult(null) : renderThemeFalseIframe(targetElement);\n    };\n    var renderThemeUi = function (editor) {\n      var elm = editor.getElement();\n      editor.orgDisplay = elm.style.display;\n      if (isString$1(getTheme(editor))) {\n        return renderFromLoadedTheme(editor);\n      } else if (isFunction(getTheme(editor))) {\n        return renderFromThemeFunc(editor);\n      } else {\n        return renderThemeFalse(editor);\n      }\n    };\n    var augmentEditorUiApi = function (editor, api) {\n      var uiApiFacade = {\n        show: Optional.from(api.show).getOr(noop),\n        hide: Optional.from(api.hide).getOr(noop),\n        disable: Optional.from(api.disable).getOr(noop),\n        isDisabled: Optional.from(api.isDisabled).getOr(never),\n        enable: function () {\n          if (!editor.mode.isReadOnly()) {\n            Optional.from(api.enable).map(call);\n          }\n        }\n      };\n      editor.ui = __assign(__assign({}, editor.ui), uiApiFacade);\n    };\n    var init = function (editor) {\n      editor.fire('ScriptsLoaded');\n      initIcons(editor);\n      initTheme(editor);\n      initPlugins(editor);\n      var renderInfo = renderThemeUi(editor);\n      augmentEditorUiApi(editor, Optional.from(renderInfo.api).getOr({}));\n      var boxInfo = {\n        editorContainer: renderInfo.editorContainer,\n        iframeContainer: renderInfo.iframeContainer\n      };\n      editor.editorContainer = boxInfo.editorContainer ? boxInfo.editorContainer : null;\n      appendContentCssFromSettings(editor);\n      if (editor.inline) {\n        return initContentBody(editor);\n      } else {\n        return init$1(editor, boxInfo);\n      }\n    };\n\n    var DOM$3 = DOMUtils.DOM;\n    var hasSkipLoadPrefix = function (name) {\n      return name.charAt(0) === '-';\n    };\n    var loadLanguage = function (scriptLoader, editor) {\n      var languageCode = getLanguageCode(editor);\n      var languageUrl = getLanguageUrl(editor);\n      if (I18n.hasCode(languageCode) === false && languageCode !== 'en') {\n        var url_1 = languageUrl !== '' ? languageUrl : editor.editorManager.baseURL + '/langs/' + languageCode + '.js';\n        scriptLoader.add(url_1, noop, undefined, function () {\n          languageLoadError(editor, url_1, languageCode);\n        });\n      }\n    };\n    var loadTheme = function (scriptLoader, editor, suffix, callback) {\n      var theme = getTheme(editor);\n      if (isString$1(theme)) {\n        if (!hasSkipLoadPrefix(theme) && !has$2(ThemeManager.urls, theme)) {\n          var themeUrl = getThemeUrl(editor);\n          if (themeUrl) {\n            ThemeManager.load(theme, editor.documentBaseURI.toAbsolute(themeUrl));\n          } else {\n            ThemeManager.load(theme, 'themes/' + theme + '/theme' + suffix + '.js');\n          }\n        }\n        scriptLoader.loadQueue(function () {\n          ThemeManager.waitFor(theme, callback);\n        });\n      } else {\n        callback();\n      }\n    };\n    var getIconsUrlMetaFromUrl = function (editor) {\n      return Optional.from(getIconsUrl(editor)).filter(function (url) {\n        return url.length > 0;\n      }).map(function (url) {\n        return {\n          url: url,\n          name: Optional.none()\n        };\n      });\n    };\n    var getIconsUrlMetaFromName = function (editor, name, suffix) {\n      return Optional.from(name).filter(function (name) {\n        return name.length > 0 && !IconManager.has(name);\n      }).map(function (name) {\n        return {\n          url: editor.editorManager.baseURL + '/icons/' + name + '/icons' + suffix + '.js',\n          name: Optional.some(name)\n        };\n      });\n    };\n    var loadIcons = function (scriptLoader, editor, suffix) {\n      var defaultIconsUrl = getIconsUrlMetaFromName(editor, 'default', suffix);\n      var customIconsUrl = getIconsUrlMetaFromUrl(editor).orThunk(function () {\n        return getIconsUrlMetaFromName(editor, getIconPackName(editor), '');\n      });\n      each$k(cat([\n        defaultIconsUrl,\n        customIconsUrl\n      ]), function (urlMeta) {\n        scriptLoader.add(urlMeta.url, noop, undefined, function () {\n          iconsLoadError(editor, urlMeta.url, urlMeta.name.getOrUndefined());\n        });\n      });\n    };\n    var loadPlugins = function (editor, suffix) {\n      Tools.each(getExternalPlugins$1(editor), function (url, name) {\n        PluginManager.load(name, url, noop, undefined, function () {\n          pluginLoadError(editor, url, name);\n        });\n        editor.settings.plugins += ' ' + name;\n      });\n      Tools.each(getPlugins(editor).split(/[ ,]/), function (plugin) {\n        plugin = Tools.trim(plugin);\n        if (plugin && !PluginManager.urls[plugin]) {\n          if (hasSkipLoadPrefix(plugin)) {\n            plugin = plugin.substr(1, plugin.length);\n            var dependencies = PluginManager.dependencies(plugin);\n            Tools.each(dependencies, function (depPlugin) {\n              var defaultSettings = {\n                prefix: 'plugins/',\n                resource: depPlugin,\n                suffix: '/plugin' + suffix + '.js'\n              };\n              var dep = PluginManager.createUrl(defaultSettings, depPlugin);\n              PluginManager.load(dep.resource, dep, noop, undefined, function () {\n                pluginLoadError(editor, dep.prefix + dep.resource + dep.suffix, dep.resource);\n              });\n            });\n          } else {\n            var url_2 = {\n              prefix: 'plugins/',\n              resource: plugin,\n              suffix: '/plugin' + suffix + '.js'\n            };\n            PluginManager.load(plugin, url_2, noop, undefined, function () {\n              pluginLoadError(editor, url_2.prefix + url_2.resource + url_2.suffix, plugin);\n            });\n          }\n        }\n      });\n    };\n    var loadScripts = function (editor, suffix) {\n      var scriptLoader = ScriptLoader.ScriptLoader;\n      loadTheme(scriptLoader, editor, suffix, function () {\n        loadLanguage(scriptLoader, editor);\n        loadIcons(scriptLoader, editor, suffix);\n        loadPlugins(editor, suffix);\n        scriptLoader.loadQueue(function () {\n          if (!editor.removed) {\n            init(editor);\n          }\n        }, editor, function () {\n          if (!editor.removed) {\n            init(editor);\n          }\n        });\n      });\n    };\n    var getStyleSheetLoader = function (element, editor) {\n      return instance.forElement(element, {\n        contentCssCors: hasContentCssCors(editor),\n        referrerPolicy: getReferrerPolicy(editor)\n      });\n    };\n    var render = function (editor) {\n      var id = editor.id;\n      I18n.setCode(getLanguageCode(editor));\n      var readyHandler = function () {\n        DOM$3.unbind(window, 'ready', readyHandler);\n        editor.render();\n      };\n      if (!EventUtils.Event.domLoaded) {\n        DOM$3.bind(window, 'ready', readyHandler);\n        return;\n      }\n      if (!editor.getElement()) {\n        return;\n      }\n      if (!Env.contentEditable) {\n        return;\n      }\n      var element = SugarElement.fromDom(editor.getElement());\n      var snapshot = clone$3(element);\n      editor.on('remove', function () {\n        eachr(element.dom.attributes, function (attr) {\n          return remove$6(element, attr.name);\n        });\n        setAll$1(element, snapshot);\n      });\n      editor.ui.styleSheetLoader = getStyleSheetLoader(element, editor);\n      if (!isInline(editor)) {\n        editor.orgVisibility = editor.getElement().style.visibility;\n        editor.getElement().style.visibility = 'hidden';\n      } else {\n        editor.inline = true;\n      }\n      var form = editor.getElement().form || DOM$3.getParent(id, 'form');\n      if (form) {\n        editor.formElement = form;\n        if (hasHiddenInput(editor) && !isTextareaOrInput(editor.getElement())) {\n          DOM$3.insertAfter(DOM$3.create('input', {\n            type: 'hidden',\n            name: id\n          }), id);\n          editor.hasHiddenInput = true;\n        }\n        editor.formEventDelegate = function (e) {\n          editor.fire(e.type, e);\n        };\n        DOM$3.bind(form, 'submit reset', editor.formEventDelegate);\n        editor.on('reset', function () {\n          editor.resetContent();\n        });\n        if (shouldPatchSubmit(editor) && !form.submit.nodeType && !form.submit.length && !form._mceOldSubmit) {\n          form._mceOldSubmit = form.submit;\n          form.submit = function () {\n            editor.editorManager.triggerSave();\n            editor.setDirty(false);\n            return form._mceOldSubmit(form);\n          };\n        }\n      }\n      editor.windowManager = WindowManager(editor);\n      editor.notificationManager = NotificationManager(editor);\n      if (isEncodingXml(editor)) {\n        editor.on('GetContent', function (e) {\n          if (e.save) {\n            e.content = DOM$3.encode(e.content);\n          }\n        });\n      }\n      if (shouldAddFormSubmitTrigger(editor)) {\n        editor.on('submit', function () {\n          if (editor.initialized) {\n            editor.save();\n          }\n        });\n      }\n      if (shouldAddUnloadTrigger(editor)) {\n        editor._beforeUnload = function () {\n          if (editor.initialized && !editor.destroyed && !editor.isHidden()) {\n            editor.save({\n              format: 'raw',\n              no_events: true,\n              set_dirty: false\n            });\n          }\n        };\n        editor.editorManager.on('BeforeUnload', editor._beforeUnload);\n      }\n      editor.editorManager.add(editor);\n      loadScripts(editor, editor.suffix);\n    };\n\n    var addVisual = function (editor, elm) {\n      return addVisual$1(editor, elm);\n    };\n\n    var legacyPropNames = {\n      'font-size': 'size',\n      'font-family': 'face'\n    };\n    var getSpecifiedFontProp = function (propName, rootElm, elm) {\n      var getProperty = function (elm) {\n        return getRaw(elm, propName).orThunk(function () {\n          if (name(elm) === 'font') {\n            return get$9(legacyPropNames, propName).bind(function (legacyPropName) {\n              return getOpt(elm, legacyPropName);\n            });\n          } else {\n            return Optional.none();\n          }\n        });\n      };\n      var isRoot = function (elm) {\n        return eq(SugarElement.fromDom(rootElm), elm);\n      };\n      return closest$1(SugarElement.fromDom(elm), function (elm) {\n        return getProperty(elm);\n      }, isRoot);\n    };\n    var normalizeFontFamily = function (fontFamily) {\n      return fontFamily.replace(/[\\'\\\"\\\\]/g, '').replace(/,\\s+/g, ',');\n    };\n    var getComputedFontProp = function (propName, elm) {\n      return Optional.from(DOMUtils.DOM.getStyle(elm, propName, true));\n    };\n    var getFontProp = function (propName) {\n      return function (rootElm, elm) {\n        return Optional.from(elm).map(SugarElement.fromDom).filter(isElement$6).bind(function (element) {\n          return getSpecifiedFontProp(propName, rootElm, element.dom).or(getComputedFontProp(propName, element.dom));\n        }).getOr('');\n      };\n    };\n    var getFontSize = getFontProp('font-size');\n    var getFontFamily = compose(normalizeFontFamily, getFontProp('font-family'));\n\n    var findFirstCaretElement = function (editor) {\n      return firstPositionIn(editor.getBody()).map(function (caret) {\n        var container = caret.container();\n        return isText$7(container) ? container.parentNode : container;\n      });\n    };\n    var getCaretElement = function (editor) {\n      return Optional.from(editor.selection.getRng()).bind(function (rng) {\n        var root = editor.getBody();\n        var atStartOfNode = rng.startContainer === root && rng.startOffset === 0;\n        return atStartOfNode ? Optional.none() : Optional.from(editor.selection.getStart(true));\n      });\n    };\n    var bindRange = function (editor, binder) {\n      return getCaretElement(editor).orThunk(curry(findFirstCaretElement, editor)).map(SugarElement.fromDom).filter(isElement$6).bind(binder);\n    };\n    var mapRange = function (editor, mapper) {\n      return bindRange(editor, compose1(Optional.some, mapper));\n    };\n\n    var fromFontSizeNumber = function (editor, value) {\n      if (/^[0-9.]+$/.test(value)) {\n        var fontSizeNumber = parseInt(value, 10);\n        if (fontSizeNumber >= 1 && fontSizeNumber <= 7) {\n          var fontSizes = getFontStyleValues(editor);\n          var fontClasses = getFontSizeClasses(editor);\n          if (fontClasses) {\n            return fontClasses[fontSizeNumber - 1] || value;\n          } else {\n            return fontSizes[fontSizeNumber - 1] || value;\n          }\n        } else {\n          return value;\n        }\n      } else {\n        return value;\n      }\n    };\n    var normalizeFontNames = function (font) {\n      var fonts = font.split(/\\s*,\\s*/);\n      return map$3(fonts, function (font) {\n        if (font.indexOf(' ') !== -1 && !(startsWith(font, '\"') || startsWith(font, '\\''))) {\n          return '\\'' + font + '\\'';\n        } else {\n          return font;\n        }\n      }).join(',');\n    };\n    var fontNameAction = function (editor, value) {\n      var font = fromFontSizeNumber(editor, value);\n      editor.formatter.toggle('fontname', { value: normalizeFontNames(font) });\n      editor.nodeChanged();\n    };\n    var fontNameQuery = function (editor) {\n      return mapRange(editor, function (elm) {\n        return getFontFamily(editor.getBody(), elm.dom);\n      }).getOr('');\n    };\n    var fontSizeAction = function (editor, value) {\n      editor.formatter.toggle('fontsize', { value: fromFontSizeNumber(editor, value) });\n      editor.nodeChanged();\n    };\n    var fontSizeQuery = function (editor) {\n      return mapRange(editor, function (elm) {\n        return getFontSize(editor.getBody(), elm.dom);\n      }).getOr('');\n    };\n\n    var lineHeightQuery = function (editor) {\n      return mapRange(editor, function (elm) {\n        var root = SugarElement.fromDom(editor.getBody());\n        var specifiedStyle = closest$1(elm, function (elm) {\n          return getRaw(elm, 'line-height');\n        }, curry(eq, root));\n        var computedStyle = function () {\n          var lineHeight = parseFloat(get$5(elm, 'line-height'));\n          var fontSize = parseFloat(get$5(elm, 'font-size'));\n          return String(lineHeight / fontSize);\n        };\n        return specifiedStyle.getOrThunk(computedStyle);\n      }).getOr('');\n    };\n    var lineHeightAction = function (editor, lineHeight) {\n      editor.formatter.toggle('lineheight', { value: String(lineHeight) });\n      editor.nodeChanged();\n    };\n\n    var processValue = function (value) {\n      if (typeof value !== 'string') {\n        var details = Tools.extend({\n          paste: value.paste,\n          data: { paste: value.paste }\n        }, value);\n        return {\n          content: value.content,\n          details: details\n        };\n      }\n      return {\n        content: value,\n        details: {}\n      };\n    };\n    var insertAtCaret = function (editor, value) {\n      var result = processValue(value);\n      insertContent(editor, result.content, result.details);\n    };\n\n    var each$5 = Tools.each;\n    var map = Tools.map, inArray = Tools.inArray;\n    var EditorCommands = function () {\n      function EditorCommands(editor) {\n        this.commands = {\n          state: {},\n          exec: {},\n          value: {}\n        };\n        this.editor = editor;\n        this.setupCommands(editor);\n      }\n      EditorCommands.prototype.execCommand = function (command, ui, value, args) {\n        var func, state = false;\n        var self = this;\n        if (self.editor.removed) {\n          return;\n        }\n        if (command.toLowerCase() !== 'mcefocus') {\n          if (!/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint)$/.test(command) && (!args || !args.skip_focus)) {\n            self.editor.focus();\n          } else {\n            restore(self.editor);\n          }\n        }\n        args = self.editor.fire('BeforeExecCommand', {\n          command: command,\n          ui: ui,\n          value: value\n        });\n        if (args.isDefaultPrevented()) {\n          return false;\n        }\n        var customCommand = command.toLowerCase();\n        if (func = self.commands.exec[customCommand]) {\n          func(customCommand, ui, value);\n          self.editor.fire('ExecCommand', {\n            command: command,\n            ui: ui,\n            value: value\n          });\n          return true;\n        }\n        each$5(this.editor.plugins, function (p) {\n          if (p.execCommand && p.execCommand(command, ui, value)) {\n            self.editor.fire('ExecCommand', {\n              command: command,\n              ui: ui,\n              value: value\n            });\n            state = true;\n            return false;\n          }\n        });\n        if (state) {\n          return state;\n        }\n        if (self.editor.theme && self.editor.theme.execCommand && self.editor.theme.execCommand(command, ui, value)) {\n          self.editor.fire('ExecCommand', {\n            command: command,\n            ui: ui,\n            value: value\n          });\n          return true;\n        }\n        try {\n          state = self.editor.getDoc().execCommand(command, ui, value);\n        } catch (ex) {\n        }\n        if (state) {\n          self.editor.fire('ExecCommand', {\n            command: command,\n            ui: ui,\n            value: value\n          });\n          return true;\n        }\n        return false;\n      };\n      EditorCommands.prototype.queryCommandState = function (command) {\n        var func;\n        if (this.editor.quirks.isHidden() || this.editor.removed) {\n          return;\n        }\n        command = command.toLowerCase();\n        if (func = this.commands.state[command]) {\n          return func(command);\n        }\n        try {\n          return this.editor.getDoc().queryCommandState(command);\n        } catch (ex) {\n        }\n        return false;\n      };\n      EditorCommands.prototype.queryCommandValue = function (command) {\n        var func;\n        if (this.editor.quirks.isHidden() || this.editor.removed) {\n          return;\n        }\n        command = command.toLowerCase();\n        if (func = this.commands.value[command]) {\n          return func(command);\n        }\n        try {\n          return this.editor.getDoc().queryCommandValue(command);\n        } catch (ex) {\n        }\n      };\n      EditorCommands.prototype.addCommands = function (commandList, type) {\n        if (type === void 0) {\n          type = 'exec';\n        }\n        var self = this;\n        each$5(commandList, function (callback, command) {\n          each$5(command.toLowerCase().split(','), function (command) {\n            self.commands[type][command] = callback;\n          });\n        });\n      };\n      EditorCommands.prototype.addCommand = function (command, callback, scope) {\n        var _this = this;\n        command = command.toLowerCase();\n        this.commands.exec[command] = function (command, ui, value, args) {\n          return callback.call(scope || _this.editor, ui, value, args);\n        };\n      };\n      EditorCommands.prototype.queryCommandSupported = function (command) {\n        command = command.toLowerCase();\n        if (this.commands.exec[command]) {\n          return true;\n        }\n        try {\n          return this.editor.getDoc().queryCommandSupported(command);\n        } catch (ex) {\n        }\n        return false;\n      };\n      EditorCommands.prototype.addQueryStateHandler = function (command, callback, scope) {\n        var _this = this;\n        command = command.toLowerCase();\n        this.commands.state[command] = function () {\n          return callback.call(scope || _this.editor);\n        };\n      };\n      EditorCommands.prototype.addQueryValueHandler = function (command, callback, scope) {\n        var _this = this;\n        command = command.toLowerCase();\n        this.commands.value[command] = function () {\n          return callback.call(scope || _this.editor);\n        };\n      };\n      EditorCommands.prototype.hasCustomCommand = function (command) {\n        command = command.toLowerCase();\n        return !!this.commands.exec[command];\n      };\n      EditorCommands.prototype.execNativeCommand = function (command, ui, value) {\n        if (ui === undefined) {\n          ui = false;\n        }\n        if (value === undefined) {\n          value = null;\n        }\n        return this.editor.getDoc().execCommand(command, ui, value);\n      };\n      EditorCommands.prototype.isFormatMatch = function (name) {\n        return this.editor.formatter.match(name);\n      };\n      EditorCommands.prototype.toggleFormat = function (name, value) {\n        this.editor.formatter.toggle(name, value);\n        this.editor.nodeChanged();\n      };\n      EditorCommands.prototype.storeSelection = function (type) {\n        this.selectionBookmark = this.editor.selection.getBookmark(type);\n      };\n      EditorCommands.prototype.restoreSelection = function () {\n        this.editor.selection.moveToBookmark(this.selectionBookmark);\n      };\n      EditorCommands.prototype.setupCommands = function (editor) {\n        var self = this;\n        this.addCommands({\n          'mceResetDesignMode,mceBeginUndoLevel': noop,\n          'mceEndUndoLevel,mceAddUndoLevel': function () {\n            editor.undoManager.add();\n          },\n          'mceFocus': function (_command, _ui, value) {\n            focus(editor, value);\n          },\n          'Cut,Copy,Paste': function (command) {\n            var doc = editor.getDoc();\n            var failed;\n            try {\n              self.execNativeCommand(command);\n            } catch (ex) {\n              failed = true;\n            }\n            if (command === 'paste' && !doc.queryCommandEnabled(command)) {\n              failed = true;\n            }\n            if (failed || !doc.queryCommandSupported(command)) {\n              var msg = editor.translate('Your browser doesn\\'t support direct access to the clipboard. ' + 'Please use the Ctrl+X/C/V keyboard shortcuts instead.');\n              if (Env.mac) {\n                msg = msg.replace(/Ctrl\\+/g, '\\u2318+');\n              }\n              editor.notificationManager.open({\n                text: msg,\n                type: 'error'\n              });\n            }\n          },\n          'unlink': function () {\n            if (editor.selection.isCollapsed()) {\n              var elm = editor.dom.getParent(editor.selection.getStart(), 'a');\n              if (elm) {\n                editor.dom.remove(elm, true);\n              }\n              return;\n            }\n            editor.formatter.remove('link');\n          },\n          'JustifyLeft,JustifyCenter,JustifyRight,JustifyFull,JustifyNone': function (command) {\n            var align = command.substring(7);\n            if (align === 'full') {\n              align = 'justify';\n            }\n            each$5('left,center,right,justify'.split(','), function (name) {\n              if (align !== name) {\n                editor.formatter.remove('align' + name);\n              }\n            });\n            if (align !== 'none') {\n              self.toggleFormat('align' + align);\n            }\n          },\n          'InsertUnorderedList,InsertOrderedList': function (command) {\n            var listParent;\n            self.execNativeCommand(command);\n            var listElm = editor.dom.getParent(editor.selection.getNode(), 'ol,ul');\n            if (listElm) {\n              listParent = listElm.parentNode;\n              if (/^(H[1-6]|P|ADDRESS|PRE)$/.test(listParent.nodeName)) {\n                self.storeSelection();\n                editor.dom.split(listParent, listElm);\n                self.restoreSelection();\n              }\n            }\n          },\n          'Bold,Italic,Underline,Strikethrough,Superscript,Subscript': function (command) {\n            self.toggleFormat(command);\n          },\n          'ForeColor,HiliteColor': function (command, ui, value) {\n            self.toggleFormat(command, { value: value });\n          },\n          'FontName': function (command, ui, value) {\n            fontNameAction(editor, value);\n          },\n          'FontSize': function (command, ui, value) {\n            fontSizeAction(editor, value);\n          },\n          'LineHeight': function (command, ui, value) {\n            lineHeightAction(editor, value);\n          },\n          'Lang': function (command, ui, lang) {\n            self.toggleFormat(command, {\n              value: lang.code,\n              customValue: lang.customCode\n            });\n          },\n          'RemoveFormat': function (command) {\n            editor.formatter.remove(command);\n          },\n          'mceBlockQuote': function () {\n            self.toggleFormat('blockquote');\n          },\n          'FormatBlock': function (command, ui, value) {\n            return self.toggleFormat(value || 'p');\n          },\n          'mceCleanup': function () {\n            var bookmark = editor.selection.getBookmark();\n            editor.setContent(editor.getContent());\n            editor.selection.moveToBookmark(bookmark);\n          },\n          'mceRemoveNode': function (command, ui, value) {\n            var node = value || editor.selection.getNode();\n            if (node !== editor.getBody()) {\n              self.storeSelection();\n              editor.dom.remove(node, true);\n              self.restoreSelection();\n            }\n          },\n          'mceSelectNodeDepth': function (command, ui, value) {\n            var counter = 0;\n            editor.dom.getParent(editor.selection.getNode(), function (node) {\n              if (node.nodeType === 1 && counter++ === value) {\n                editor.selection.select(node);\n                return false;\n              }\n            }, editor.getBody());\n          },\n          'mceSelectNode': function (command, ui, value) {\n            editor.selection.select(value);\n          },\n          'mceInsertContent': function (command, ui, value) {\n            insertAtCaret(editor, value);\n          },\n          'mceInsertRawHTML': function (command, ui, value) {\n            editor.selection.setContent('tiny_mce_marker');\n            var content = editor.getContent();\n            editor.setContent(content.replace(/tiny_mce_marker/g, function () {\n              return value;\n            }));\n          },\n          'mceInsertNewLine': function (command, ui, value) {\n            insert(editor, value);\n          },\n          'mceToggleFormat': function (command, ui, value) {\n            self.toggleFormat(value);\n          },\n          'mceSetContent': function (command, ui, value) {\n            editor.setContent(value);\n          },\n          'Indent,Outdent': function (command) {\n            handle(editor, command);\n          },\n          'mceRepaint': noop,\n          'InsertHorizontalRule': function () {\n            editor.execCommand('mceInsertContent', false, '<hr />');\n          },\n          'mceToggleVisualAid': function () {\n            editor.hasVisual = !editor.hasVisual;\n            editor.addVisual();\n          },\n          'mceReplaceContent': function (command, ui, value) {\n            editor.execCommand('mceInsertContent', false, value.replace(/\\{\\$selection\\}/g, editor.selection.getContent({ format: 'text' })));\n          },\n          'mceInsertLink': function (command, ui, value) {\n            if (typeof value === 'string') {\n              value = { href: value };\n            }\n            var anchor = editor.dom.getParent(editor.selection.getNode(), 'a');\n            value.href = value.href.replace(/ /g, '%20');\n            if (!anchor || !value.href) {\n              editor.formatter.remove('link');\n            }\n            if (value.href) {\n              editor.formatter.apply('link', value, anchor);\n            }\n          },\n          'selectAll': function () {\n            var editingHost = editor.dom.getParent(editor.selection.getStart(), isContentEditableTrue$4);\n            if (editingHost) {\n              var rng = editor.dom.createRng();\n              rng.selectNodeContents(editingHost);\n              editor.selection.setRng(rng);\n            }\n          },\n          'mceNewDocument': function () {\n            editor.setContent('');\n          },\n          'InsertLineBreak': function (command, ui, value) {\n            insert$1(editor, value);\n            return true;\n          }\n        });\n        var alignStates = function (name) {\n          return function () {\n            var selection = editor.selection;\n            var nodes = selection.isCollapsed() ? [editor.dom.getParent(selection.getNode(), editor.dom.isBlock)] : selection.getSelectedBlocks();\n            var matches = map(nodes, function (node) {\n              return !!editor.formatter.matchNode(node, name);\n            });\n            return inArray(matches, true) !== -1;\n          };\n        };\n        self.addCommands({\n          'JustifyLeft': alignStates('alignleft'),\n          'JustifyCenter': alignStates('aligncenter'),\n          'JustifyRight': alignStates('alignright'),\n          'JustifyFull': alignStates('alignjustify'),\n          'Bold,Italic,Underline,Strikethrough,Superscript,Subscript': function (command) {\n            return self.isFormatMatch(command);\n          },\n          'mceBlockQuote': function () {\n            return self.isFormatMatch('blockquote');\n          },\n          'Outdent': function () {\n            return canOutdent(editor);\n          },\n          'InsertUnorderedList,InsertOrderedList': function (command) {\n            var list = editor.dom.getParent(editor.selection.getNode(), 'ul,ol');\n            return list && (command === 'insertunorderedlist' && list.tagName === 'UL' || command === 'insertorderedlist' && list.tagName === 'OL');\n          }\n        }, 'state');\n        self.addCommands({\n          Undo: function () {\n            editor.undoManager.undo();\n          },\n          Redo: function () {\n            editor.undoManager.redo();\n          }\n        });\n        self.addQueryValueHandler('FontName', function () {\n          return fontNameQuery(editor);\n        }, this);\n        self.addQueryValueHandler('FontSize', function () {\n          return fontSizeQuery(editor);\n        }, this);\n        self.addQueryValueHandler('LineHeight', function () {\n          return lineHeightQuery(editor);\n        }, this);\n      };\n      return EditorCommands;\n    }();\n\n    var internalContentEditableAttr = 'data-mce-contenteditable';\n    var toggleClass = function (elm, cls, state) {\n      if (has(elm, cls) && state === false) {\n        remove$3(elm, cls);\n      } else if (state) {\n        add$1(elm, cls);\n      }\n    };\n    var setEditorCommandState = function (editor, cmd, state) {\n      try {\n        editor.getDoc().execCommand(cmd, false, String(state));\n      } catch (ex) {\n      }\n    };\n    var setContentEditable = function (elm, state) {\n      elm.dom.contentEditable = state ? 'true' : 'false';\n    };\n    var switchOffContentEditableTrue = function (elm) {\n      each$k(descendants(elm, '*[contenteditable=\"true\"]'), function (elm) {\n        set$1(elm, internalContentEditableAttr, 'true');\n        setContentEditable(elm, false);\n      });\n    };\n    var switchOnContentEditableTrue = function (elm) {\n      each$k(descendants(elm, '*[' + internalContentEditableAttr + '=\"true\"]'), function (elm) {\n        remove$6(elm, internalContentEditableAttr);\n        setContentEditable(elm, true);\n      });\n    };\n    var removeFakeSelection = function (editor) {\n      Optional.from(editor.selection.getNode()).each(function (elm) {\n        elm.removeAttribute('data-mce-selected');\n      });\n    };\n    var restoreFakeSelection = function (editor) {\n      editor.selection.setRng(editor.selection.getRng());\n    };\n    var toggleReadOnly = function (editor, state) {\n      var body = SugarElement.fromDom(editor.getBody());\n      toggleClass(body, 'mce-content-readonly', state);\n      if (state) {\n        editor.selection.controlSelection.hideResizeRect();\n        editor._selectionOverrides.hideFakeCaret();\n        removeFakeSelection(editor);\n        editor.readonly = true;\n        setContentEditable(body, false);\n        switchOffContentEditableTrue(body);\n      } else {\n        editor.readonly = false;\n        setContentEditable(body, true);\n        switchOnContentEditableTrue(body);\n        setEditorCommandState(editor, 'StyleWithCSS', false);\n        setEditorCommandState(editor, 'enableInlineTableEditing', false);\n        setEditorCommandState(editor, 'enableObjectResizing', false);\n        if (hasEditorOrUiFocus(editor)) {\n          editor.focus();\n        }\n        restoreFakeSelection(editor);\n        editor.nodeChanged();\n      }\n    };\n    var isReadOnly = function (editor) {\n      return editor.readonly;\n    };\n    var registerFilters = function (editor) {\n      editor.parser.addAttributeFilter('contenteditable', function (nodes) {\n        if (isReadOnly(editor)) {\n          each$k(nodes, function (node) {\n            node.attr(internalContentEditableAttr, node.attr('contenteditable'));\n            node.attr('contenteditable', 'false');\n          });\n        }\n      });\n      editor.serializer.addAttributeFilter(internalContentEditableAttr, function (nodes) {\n        if (isReadOnly(editor)) {\n          each$k(nodes, function (node) {\n            node.attr('contenteditable', node.attr(internalContentEditableAttr));\n          });\n        }\n      });\n      editor.serializer.addTempAttr(internalContentEditableAttr);\n    };\n    var registerReadOnlyContentFilters = function (editor) {\n      if (editor.serializer) {\n        registerFilters(editor);\n      } else {\n        editor.on('PreInit', function () {\n          registerFilters(editor);\n        });\n      }\n    };\n    var isClickEvent = function (e) {\n      return e.type === 'click';\n    };\n    var getAnchorHrefOpt = function (editor, elm) {\n      var isRoot = function (elm) {\n        return eq(elm, SugarElement.fromDom(editor.getBody()));\n      };\n      return closest$2(elm, 'a', isRoot).bind(function (a) {\n        return getOpt(a, 'href');\n      });\n    };\n    var processReadonlyEvents = function (editor, e) {\n      if (isClickEvent(e) && !VK.metaKeyPressed(e)) {\n        var elm = SugarElement.fromDom(e.target);\n        getAnchorHrefOpt(editor, elm).each(function (href) {\n          e.preventDefault();\n          if (/^#/.test(href)) {\n            var targetEl = editor.dom.select(href + ',[name=\"' + removeLeading(href, '#') + '\"]');\n            if (targetEl.length) {\n              editor.selection.scrollIntoView(targetEl[0], true);\n            }\n          } else {\n            window.open(href, '_blank', 'rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes');\n          }\n        });\n      }\n    };\n    var registerReadOnlySelectionBlockers = function (editor) {\n      editor.on('ShowCaret', function (e) {\n        if (isReadOnly(editor)) {\n          e.preventDefault();\n        }\n      });\n      editor.on('ObjectSelected', function (e) {\n        if (isReadOnly(editor)) {\n          e.preventDefault();\n        }\n      });\n    };\n\n    var nativeEvents = Tools.makeMap('focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange ' + 'mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover ' + 'draggesture dragdrop drop drag submit ' + 'compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel', ' ');\n    var EventDispatcher = function () {\n      function EventDispatcher(settings) {\n        this.bindings = {};\n        this.settings = settings || {};\n        this.scope = this.settings.scope || this;\n        this.toggleEvent = this.settings.toggleEvent || never;\n      }\n      EventDispatcher.isNative = function (name) {\n        return !!nativeEvents[name.toLowerCase()];\n      };\n      EventDispatcher.prototype.fire = function (name, args) {\n        var lcName = name.toLowerCase();\n        var event = normalize$3(lcName, args || {}, this.scope);\n        if (this.settings.beforeFire) {\n          this.settings.beforeFire(event);\n        }\n        var handlers = this.bindings[lcName];\n        if (handlers) {\n          for (var i = 0, l = handlers.length; i < l; i++) {\n            var callback = handlers[i];\n            if (callback.removed) {\n              continue;\n            }\n            if (callback.once) {\n              this.off(lcName, callback.func);\n            }\n            if (event.isImmediatePropagationStopped()) {\n              return event;\n            }\n            if (callback.func.call(this.scope, event) === false) {\n              event.preventDefault();\n              return event;\n            }\n          }\n        }\n        return event;\n      };\n      EventDispatcher.prototype.on = function (name, callback, prepend, extra) {\n        if (callback === false) {\n          callback = never;\n        }\n        if (callback) {\n          var wrappedCallback = {\n            func: callback,\n            removed: false\n          };\n          if (extra) {\n            Tools.extend(wrappedCallback, extra);\n          }\n          var names = name.toLowerCase().split(' ');\n          var i = names.length;\n          while (i--) {\n            var currentName = names[i];\n            var handlers = this.bindings[currentName];\n            if (!handlers) {\n              handlers = [];\n              this.toggleEvent(currentName, true);\n            }\n            if (prepend) {\n              handlers = __spreadArray([wrappedCallback], handlers);\n            } else {\n              handlers = __spreadArray(__spreadArray([], handlers), [wrappedCallback]);\n            }\n            this.bindings[currentName] = handlers;\n          }\n        }\n        return this;\n      };\n      EventDispatcher.prototype.off = function (name, callback) {\n        var _this = this;\n        if (name) {\n          var names = name.toLowerCase().split(' ');\n          var i = names.length;\n          while (i--) {\n            var currentName = names[i];\n            var handlers = this.bindings[currentName];\n            if (!currentName) {\n              each$j(this.bindings, function (_value, bindingName) {\n                _this.toggleEvent(bindingName, false);\n                delete _this.bindings[bindingName];\n              });\n              return this;\n            }\n            if (handlers) {\n              if (!callback) {\n                handlers.length = 0;\n              } else {\n                var filteredHandlers = partition(handlers, function (handler) {\n                  return handler.func === callback;\n                });\n                handlers = filteredHandlers.fail;\n                this.bindings[currentName] = handlers;\n                each$k(filteredHandlers.pass, function (handler) {\n                  handler.removed = true;\n                });\n              }\n              if (!handlers.length) {\n                this.toggleEvent(name, false);\n                delete this.bindings[currentName];\n              }\n            }\n          }\n        } else {\n          each$j(this.bindings, function (_value, name) {\n            _this.toggleEvent(name, false);\n          });\n          this.bindings = {};\n        }\n        return this;\n      };\n      EventDispatcher.prototype.once = function (name, callback, prepend) {\n        return this.on(name, callback, prepend, { once: true });\n      };\n      EventDispatcher.prototype.has = function (name) {\n        name = name.toLowerCase();\n        return !(!this.bindings[name] || this.bindings[name].length === 0);\n      };\n      return EventDispatcher;\n    }();\n\n    var getEventDispatcher = function (obj) {\n      if (!obj._eventDispatcher) {\n        obj._eventDispatcher = new EventDispatcher({\n          scope: obj,\n          toggleEvent: function (name, state) {\n            if (EventDispatcher.isNative(name) && obj.toggleNativeEvent) {\n              obj.toggleNativeEvent(name, state);\n            }\n          }\n        });\n      }\n      return obj._eventDispatcher;\n    };\n    var Observable = {\n      fire: function (name, args, bubble) {\n        var self = this;\n        if (self.removed && name !== 'remove' && name !== 'detach') {\n          return args;\n        }\n        var dispatcherArgs = getEventDispatcher(self).fire(name, args);\n        if (bubble !== false && self.parent) {\n          var parent_1 = self.parent();\n          while (parent_1 && !dispatcherArgs.isPropagationStopped()) {\n            parent_1.fire(name, dispatcherArgs, false);\n            parent_1 = parent_1.parent();\n          }\n        }\n        return dispatcherArgs;\n      },\n      on: function (name, callback, prepend) {\n        return getEventDispatcher(this).on(name, callback, prepend);\n      },\n      off: function (name, callback) {\n        return getEventDispatcher(this).off(name, callback);\n      },\n      once: function (name, callback) {\n        return getEventDispatcher(this).once(name, callback);\n      },\n      hasEventListeners: function (name) {\n        return getEventDispatcher(this).has(name);\n      }\n    };\n\n    var DOM$2 = DOMUtils.DOM;\n    var customEventRootDelegates;\n    var getEventTarget = function (editor, eventName) {\n      if (eventName === 'selectionchange') {\n        return editor.getDoc();\n      }\n      if (!editor.inline && /^mouse|touch|click|contextmenu|drop|dragover|dragend/.test(eventName)) {\n        return editor.getDoc().documentElement;\n      }\n      var eventRoot = getEventRoot(editor);\n      if (eventRoot) {\n        if (!editor.eventRoot) {\n          editor.eventRoot = DOM$2.select(eventRoot)[0];\n        }\n        return editor.eventRoot;\n      }\n      return editor.getBody();\n    };\n    var isListening = function (editor) {\n      return !editor.hidden && !isReadOnly(editor);\n    };\n    var fireEvent = function (editor, eventName, e) {\n      if (isListening(editor)) {\n        editor.fire(eventName, e);\n      } else if (isReadOnly(editor)) {\n        processReadonlyEvents(editor, e);\n      }\n    };\n    var bindEventDelegate = function (editor, eventName) {\n      var delegate;\n      if (!editor.delegates) {\n        editor.delegates = {};\n      }\n      if (editor.delegates[eventName] || editor.removed) {\n        return;\n      }\n      var eventRootElm = getEventTarget(editor, eventName);\n      if (getEventRoot(editor)) {\n        if (!customEventRootDelegates) {\n          customEventRootDelegates = {};\n          editor.editorManager.on('removeEditor', function () {\n            if (!editor.editorManager.activeEditor) {\n              if (customEventRootDelegates) {\n                each$j(customEventRootDelegates, function (_value, name) {\n                  editor.dom.unbind(getEventTarget(editor, name));\n                });\n                customEventRootDelegates = null;\n              }\n            }\n          });\n        }\n        if (customEventRootDelegates[eventName]) {\n          return;\n        }\n        delegate = function (e) {\n          var target = e.target;\n          var editors = editor.editorManager.get();\n          var i = editors.length;\n          while (i--) {\n            var body = editors[i].getBody();\n            if (body === target || DOM$2.isChildOf(target, body)) {\n              fireEvent(editors[i], eventName, e);\n            }\n          }\n        };\n        customEventRootDelegates[eventName] = delegate;\n        DOM$2.bind(eventRootElm, eventName, delegate);\n      } else {\n        delegate = function (e) {\n          fireEvent(editor, eventName, e);\n        };\n        DOM$2.bind(eventRootElm, eventName, delegate);\n        editor.delegates[eventName] = delegate;\n      }\n    };\n    var EditorObservable = __assign(__assign({}, Observable), {\n      bindPendingEventDelegates: function () {\n        var self = this;\n        Tools.each(self._pendingNativeEvents, function (name) {\n          bindEventDelegate(self, name);\n        });\n      },\n      toggleNativeEvent: function (name, state) {\n        var self = this;\n        if (name === 'focus' || name === 'blur') {\n          return;\n        }\n        if (self.removed) {\n          return;\n        }\n        if (state) {\n          if (self.initialized) {\n            bindEventDelegate(self, name);\n          } else {\n            if (!self._pendingNativeEvents) {\n              self._pendingNativeEvents = [name];\n            } else {\n              self._pendingNativeEvents.push(name);\n            }\n          }\n        } else if (self.initialized) {\n          self.dom.unbind(getEventTarget(self, name), name, self.delegates[name]);\n          delete self.delegates[name];\n        }\n      },\n      unbindAllNativeEvents: function () {\n        var self = this;\n        var body = self.getBody();\n        var dom = self.dom;\n        if (self.delegates) {\n          each$j(self.delegates, function (value, name) {\n            self.dom.unbind(getEventTarget(self, name), name, value);\n          });\n          delete self.delegates;\n        }\n        if (!self.inline && body && dom) {\n          body.onload = null;\n          dom.unbind(self.getWin());\n          dom.unbind(self.getDoc());\n        }\n        if (dom) {\n          dom.unbind(body);\n          dom.unbind(self.getContainer());\n        }\n      }\n    });\n\n    var defaultModes = [\n      'design',\n      'readonly'\n    ];\n    var switchToMode = function (editor, activeMode, availableModes, mode) {\n      var oldMode = availableModes[activeMode.get()];\n      var newMode = availableModes[mode];\n      try {\n        newMode.activate();\n      } catch (e) {\n        console.error('problem while activating editor mode ' + mode + ':', e);\n        return;\n      }\n      oldMode.deactivate();\n      if (oldMode.editorReadOnly !== newMode.editorReadOnly) {\n        toggleReadOnly(editor, newMode.editorReadOnly);\n      }\n      activeMode.set(mode);\n      fireSwitchMode(editor, mode);\n    };\n    var setMode = function (editor, availableModes, activeMode, mode) {\n      if (mode === activeMode.get()) {\n        return;\n      } else if (!has$2(availableModes, mode)) {\n        throw new Error('Editor mode \\'' + mode + '\\' is invalid');\n      }\n      if (editor.initialized) {\n        switchToMode(editor, activeMode, availableModes, mode);\n      } else {\n        editor.on('init', function () {\n          return switchToMode(editor, activeMode, availableModes, mode);\n        });\n      }\n    };\n    var registerMode = function (availableModes, mode, api) {\n      var _a;\n      if (contains$3(defaultModes, mode)) {\n        throw new Error('Cannot override default mode ' + mode);\n      }\n      return __assign(__assign({}, availableModes), (_a = {}, _a[mode] = __assign(__assign({}, api), {\n        deactivate: function () {\n          try {\n            api.deactivate();\n          } catch (e) {\n            console.error('problem while deactivating editor mode ' + mode + ':', e);\n          }\n        }\n      }), _a));\n    };\n\n    var create$4 = function (editor) {\n      var activeMode = Cell('design');\n      var availableModes = Cell({\n        design: {\n          activate: noop,\n          deactivate: noop,\n          editorReadOnly: false\n        },\n        readonly: {\n          activate: noop,\n          deactivate: noop,\n          editorReadOnly: true\n        }\n      });\n      registerReadOnlyContentFilters(editor);\n      registerReadOnlySelectionBlockers(editor);\n      return {\n        isReadOnly: function () {\n          return isReadOnly(editor);\n        },\n        set: function (mode) {\n          return setMode(editor, availableModes.get(), activeMode, mode);\n        },\n        get: function () {\n          return activeMode.get();\n        },\n        register: function (mode, api) {\n          availableModes.set(registerMode(availableModes.get(), mode, api));\n        }\n      };\n    };\n\n    var each$4 = Tools.each, explode$1 = Tools.explode;\n    var keyCodeLookup = {\n      f1: 112,\n      f2: 113,\n      f3: 114,\n      f4: 115,\n      f5: 116,\n      f6: 117,\n      f7: 118,\n      f8: 119,\n      f9: 120,\n      f10: 121,\n      f11: 122,\n      f12: 123\n    };\n    var modifierNames = Tools.makeMap('alt,ctrl,shift,meta,access');\n    var parseShortcut = function (pattern) {\n      var key;\n      var shortcut = {};\n      each$4(explode$1(pattern.toLowerCase(), '+'), function (value) {\n        if (value in modifierNames) {\n          shortcut[value] = true;\n        } else {\n          if (/^[0-9]{2,}$/.test(value)) {\n            shortcut.keyCode = parseInt(value, 10);\n          } else {\n            shortcut.charCode = value.charCodeAt(0);\n            shortcut.keyCode = keyCodeLookup[value] || value.toUpperCase().charCodeAt(0);\n          }\n        }\n      });\n      var id = [shortcut.keyCode];\n      for (key in modifierNames) {\n        if (shortcut[key]) {\n          id.push(key);\n        } else {\n          shortcut[key] = false;\n        }\n      }\n      shortcut.id = id.join(',');\n      if (shortcut.access) {\n        shortcut.alt = true;\n        if (Env.mac) {\n          shortcut.ctrl = true;\n        } else {\n          shortcut.shift = true;\n        }\n      }\n      if (shortcut.meta) {\n        if (Env.mac) {\n          shortcut.meta = true;\n        } else {\n          shortcut.ctrl = true;\n          shortcut.meta = false;\n        }\n      }\n      return shortcut;\n    };\n    var Shortcuts = function () {\n      function Shortcuts(editor) {\n        this.shortcuts = {};\n        this.pendingPatterns = [];\n        this.editor = editor;\n        var self = this;\n        editor.on('keyup keypress keydown', function (e) {\n          if ((self.hasModifier(e) || self.isFunctionKey(e)) && !e.isDefaultPrevented()) {\n            each$4(self.shortcuts, function (shortcut) {\n              if (self.matchShortcut(e, shortcut)) {\n                self.pendingPatterns = shortcut.subpatterns.slice(0);\n                if (e.type === 'keydown') {\n                  self.executeShortcutAction(shortcut);\n                }\n                return true;\n              }\n            });\n            if (self.matchShortcut(e, self.pendingPatterns[0])) {\n              if (self.pendingPatterns.length === 1) {\n                if (e.type === 'keydown') {\n                  self.executeShortcutAction(self.pendingPatterns[0]);\n                }\n              }\n              self.pendingPatterns.shift();\n            }\n          }\n        });\n      }\n      Shortcuts.prototype.add = function (pattern, desc, cmdFunc, scope) {\n        var self = this;\n        var func = self.normalizeCommandFunc(cmdFunc);\n        each$4(explode$1(Tools.trim(pattern)), function (pattern) {\n          var shortcut = self.createShortcut(pattern, desc, func, scope);\n          self.shortcuts[shortcut.id] = shortcut;\n        });\n        return true;\n      };\n      Shortcuts.prototype.remove = function (pattern) {\n        var shortcut = this.createShortcut(pattern);\n        if (this.shortcuts[shortcut.id]) {\n          delete this.shortcuts[shortcut.id];\n          return true;\n        }\n        return false;\n      };\n      Shortcuts.prototype.normalizeCommandFunc = function (cmdFunc) {\n        var self = this;\n        var cmd = cmdFunc;\n        if (typeof cmd === 'string') {\n          return function () {\n            self.editor.execCommand(cmd, false, null);\n          };\n        } else if (Tools.isArray(cmd)) {\n          return function () {\n            self.editor.execCommand(cmd[0], cmd[1], cmd[2]);\n          };\n        } else {\n          return cmd;\n        }\n      };\n      Shortcuts.prototype.createShortcut = function (pattern, desc, cmdFunc, scope) {\n        var shortcuts = Tools.map(explode$1(pattern, '>'), parseShortcut);\n        shortcuts[shortcuts.length - 1] = Tools.extend(shortcuts[shortcuts.length - 1], {\n          func: cmdFunc,\n          scope: scope || this.editor\n        });\n        return Tools.extend(shortcuts[0], {\n          desc: this.editor.translate(desc),\n          subpatterns: shortcuts.slice(1)\n        });\n      };\n      Shortcuts.prototype.hasModifier = function (e) {\n        return e.altKey || e.ctrlKey || e.metaKey;\n      };\n      Shortcuts.prototype.isFunctionKey = function (e) {\n        return e.type === 'keydown' && e.keyCode >= 112 && e.keyCode <= 123;\n      };\n      Shortcuts.prototype.matchShortcut = function (e, shortcut) {\n        if (!shortcut) {\n          return false;\n        }\n        if (shortcut.ctrl !== e.ctrlKey || shortcut.meta !== e.metaKey) {\n          return false;\n        }\n        if (shortcut.alt !== e.altKey || shortcut.shift !== e.shiftKey) {\n          return false;\n        }\n        if (e.keyCode === shortcut.keyCode || e.charCode && e.charCode === shortcut.charCode) {\n          e.preventDefault();\n          return true;\n        }\n        return false;\n      };\n      Shortcuts.prototype.executeShortcutAction = function (shortcut) {\n        return shortcut.func ? shortcut.func.call(shortcut.scope) : null;\n      };\n      return Shortcuts;\n    }();\n\n    var create$3 = function () {\n      var buttons = {};\n      var menuItems = {};\n      var popups = {};\n      var icons = {};\n      var contextMenus = {};\n      var contextToolbars = {};\n      var sidebars = {};\n      var add = function (collection, type) {\n        return function (name, spec) {\n          return collection[name.toLowerCase()] = __assign(__assign({}, spec), { type: type });\n        };\n      };\n      var addIcon = function (name, svgData) {\n        return icons[name.toLowerCase()] = svgData;\n      };\n      return {\n        addButton: add(buttons, 'button'),\n        addGroupToolbarButton: add(buttons, 'grouptoolbarbutton'),\n        addToggleButton: add(buttons, 'togglebutton'),\n        addMenuButton: add(buttons, 'menubutton'),\n        addSplitButton: add(buttons, 'splitbutton'),\n        addMenuItem: add(menuItems, 'menuitem'),\n        addNestedMenuItem: add(menuItems, 'nestedmenuitem'),\n        addToggleMenuItem: add(menuItems, 'togglemenuitem'),\n        addAutocompleter: add(popups, 'autocompleter'),\n        addContextMenu: add(contextMenus, 'contextmenu'),\n        addContextToolbar: add(contextToolbars, 'contexttoolbar'),\n        addContextForm: add(contextToolbars, 'contextform'),\n        addSidebar: add(sidebars, 'sidebar'),\n        addIcon: addIcon,\n        getAll: function () {\n          return {\n            buttons: buttons,\n            menuItems: menuItems,\n            icons: icons,\n            popups: popups,\n            contextMenus: contextMenus,\n            contextToolbars: contextToolbars,\n            sidebars: sidebars\n          };\n        }\n      };\n    };\n\n    var registry = function () {\n      var bridge = create$3();\n      return {\n        addAutocompleter: bridge.addAutocompleter,\n        addButton: bridge.addButton,\n        addContextForm: bridge.addContextForm,\n        addContextMenu: bridge.addContextMenu,\n        addContextToolbar: bridge.addContextToolbar,\n        addIcon: bridge.addIcon,\n        addMenuButton: bridge.addMenuButton,\n        addMenuItem: bridge.addMenuItem,\n        addNestedMenuItem: bridge.addNestedMenuItem,\n        addSidebar: bridge.addSidebar,\n        addSplitButton: bridge.addSplitButton,\n        addToggleButton: bridge.addToggleButton,\n        addGroupToolbarButton: bridge.addGroupToolbarButton,\n        addToggleMenuItem: bridge.addToggleMenuItem,\n        getAll: bridge.getAll\n      };\n    };\n\n    var each$3 = Tools.each, trim = Tools.trim;\n    var queryParts = 'source protocol authority userInfo user password host port relative path directory file query anchor'.split(' ');\n    var DEFAULT_PORTS = {\n      ftp: 21,\n      http: 80,\n      https: 443,\n      mailto: 25\n    };\n    var URI = function () {\n      function URI(url, settings) {\n        url = trim(url);\n        this.settings = settings || {};\n        var baseUri = this.settings.base_uri;\n        var self = this;\n        if (/^([\\w\\-]+):([^\\/]{2})/i.test(url) || /^\\s*#/.test(url)) {\n          self.source = url;\n          return;\n        }\n        var isProtocolRelative = url.indexOf('//') === 0;\n        if (url.indexOf('/') === 0 && !isProtocolRelative) {\n          url = (baseUri ? baseUri.protocol || 'http' : 'http') + '://mce_host' + url;\n        }\n        if (!/^[\\w\\-]*:?\\/\\//.test(url)) {\n          var baseUrl = this.settings.base_uri ? this.settings.base_uri.path : new URI(document.location.href).directory;\n          if (this.settings.base_uri && this.settings.base_uri.protocol == '') {\n            url = '//mce_host' + self.toAbsPath(baseUrl, url);\n          } else {\n            var match = /([^#?]*)([#?]?.*)/.exec(url);\n            url = (baseUri && baseUri.protocol || 'http') + '://mce_host' + self.toAbsPath(baseUrl, match[1]) + match[2];\n          }\n        }\n        url = url.replace(/@@/g, '(mce_at)');\n        var urlMatch = /^(?:(?![^:@]+:[^:@\\/]*@)([^:\\/?#.]+):)?(?:\\/\\/)?((?:(([^:@\\/]*):?([^:@\\/]*))?@)?(\\[[a-zA-Z0-9:.%]+\\]|[^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/.exec(url);\n        each$3(queryParts, function (v, i) {\n          var part = urlMatch[i];\n          if (part) {\n            part = part.replace(/\\(mce_at\\)/g, '@@');\n          }\n          self[v] = part;\n        });\n        if (baseUri) {\n          if (!self.protocol) {\n            self.protocol = baseUri.protocol;\n          }\n          if (!self.userInfo) {\n            self.userInfo = baseUri.userInfo;\n          }\n          if (!self.port && self.host === 'mce_host') {\n            self.port = baseUri.port;\n          }\n          if (!self.host || self.host === 'mce_host') {\n            self.host = baseUri.host;\n          }\n          self.source = '';\n        }\n        if (isProtocolRelative) {\n          self.protocol = '';\n        }\n      }\n      URI.parseDataUri = function (uri) {\n        var type;\n        var uriComponents = decodeURIComponent(uri).split(',');\n        var matches = /data:([^;]+)/.exec(uriComponents[0]);\n        if (matches) {\n          type = matches[1];\n        }\n        return {\n          type: type,\n          data: uriComponents[1]\n        };\n      };\n      URI.getDocumentBaseUrl = function (loc) {\n        var baseUrl;\n        if (loc.protocol.indexOf('http') !== 0 && loc.protocol !== 'file:') {\n          baseUrl = loc.href;\n        } else {\n          baseUrl = loc.protocol + '//' + loc.host + loc.pathname;\n        }\n        if (/^[^:]+:\\/\\/\\/?[^\\/]+\\//.test(baseUrl)) {\n          baseUrl = baseUrl.replace(/[\\?#].*$/, '').replace(/[\\/\\\\][^\\/]+$/, '');\n          if (!/[\\/\\\\]$/.test(baseUrl)) {\n            baseUrl += '/';\n          }\n        }\n        return baseUrl;\n      };\n      URI.prototype.setPath = function (path) {\n        var pathMatch = /^(.*?)\\/?(\\w+)?$/.exec(path);\n        this.path = pathMatch[0];\n        this.directory = pathMatch[1];\n        this.file = pathMatch[2];\n        this.source = '';\n        this.getURI();\n      };\n      URI.prototype.toRelative = function (uri) {\n        var output;\n        if (uri === './') {\n          return uri;\n        }\n        var relativeUri = new URI(uri, { base_uri: this });\n        if (relativeUri.host !== 'mce_host' && this.host !== relativeUri.host && relativeUri.host || this.port !== relativeUri.port || this.protocol !== relativeUri.protocol && relativeUri.protocol !== '') {\n          return relativeUri.getURI();\n        }\n        var tu = this.getURI(), uu = relativeUri.getURI();\n        if (tu === uu || tu.charAt(tu.length - 1) === '/' && tu.substr(0, tu.length - 1) === uu) {\n          return tu;\n        }\n        output = this.toRelPath(this.path, relativeUri.path);\n        if (relativeUri.query) {\n          output += '?' + relativeUri.query;\n        }\n        if (relativeUri.anchor) {\n          output += '#' + relativeUri.anchor;\n        }\n        return output;\n      };\n      URI.prototype.toAbsolute = function (uri, noHost) {\n        var absoluteUri = new URI(uri, { base_uri: this });\n        return absoluteUri.getURI(noHost && this.isSameOrigin(absoluteUri));\n      };\n      URI.prototype.isSameOrigin = function (uri) {\n        if (this.host == uri.host && this.protocol == uri.protocol) {\n          if (this.port == uri.port) {\n            return true;\n          }\n          var defaultPort = DEFAULT_PORTS[this.protocol];\n          if (defaultPort && (this.port || defaultPort) == (uri.port || defaultPort)) {\n            return true;\n          }\n        }\n        return false;\n      };\n      URI.prototype.toRelPath = function (base, path) {\n        var breakPoint = 0, out = '', i, l;\n        var normalizedBase = base.substring(0, base.lastIndexOf('/')).split('/');\n        var items = path.split('/');\n        if (normalizedBase.length >= items.length) {\n          for (i = 0, l = normalizedBase.length; i < l; i++) {\n            if (i >= items.length || normalizedBase[i] !== items[i]) {\n              breakPoint = i + 1;\n              break;\n            }\n          }\n        }\n        if (normalizedBase.length < items.length) {\n          for (i = 0, l = items.length; i < l; i++) {\n            if (i >= normalizedBase.length || normalizedBase[i] !== items[i]) {\n              breakPoint = i + 1;\n              break;\n            }\n          }\n        }\n        if (breakPoint === 1) {\n          return path;\n        }\n        for (i = 0, l = normalizedBase.length - (breakPoint - 1); i < l; i++) {\n          out += '../';\n        }\n        for (i = breakPoint - 1, l = items.length; i < l; i++) {\n          if (i !== breakPoint - 1) {\n            out += '/' + items[i];\n          } else {\n            out += items[i];\n          }\n        }\n        return out;\n      };\n      URI.prototype.toAbsPath = function (base, path) {\n        var i, nb = 0, o = [], outPath;\n        var tr = /\\/$/.test(path) ? '/' : '';\n        var normalizedBase = base.split('/');\n        var normalizedPath = path.split('/');\n        each$3(normalizedBase, function (k) {\n          if (k) {\n            o.push(k);\n          }\n        });\n        normalizedBase = o;\n        for (i = normalizedPath.length - 1, o = []; i >= 0; i--) {\n          if (normalizedPath[i].length === 0 || normalizedPath[i] === '.') {\n            continue;\n          }\n          if (normalizedPath[i] === '..') {\n            nb++;\n            continue;\n          }\n          if (nb > 0) {\n            nb--;\n            continue;\n          }\n          o.push(normalizedPath[i]);\n        }\n        i = normalizedBase.length - nb;\n        if (i <= 0) {\n          outPath = reverse(o).join('/');\n        } else {\n          outPath = normalizedBase.slice(0, i).join('/') + '/' + reverse(o).join('/');\n        }\n        if (outPath.indexOf('/') !== 0) {\n          outPath = '/' + outPath;\n        }\n        if (tr && outPath.lastIndexOf('/') !== outPath.length - 1) {\n          outPath += tr;\n        }\n        return outPath;\n      };\n      URI.prototype.getURI = function (noProtoHost) {\n        if (noProtoHost === void 0) {\n          noProtoHost = false;\n        }\n        var s;\n        if (!this.source || noProtoHost) {\n          s = '';\n          if (!noProtoHost) {\n            if (this.protocol) {\n              s += this.protocol + '://';\n            } else {\n              s += '//';\n            }\n            if (this.userInfo) {\n              s += this.userInfo + '@';\n            }\n            if (this.host) {\n              s += this.host;\n            }\n            if (this.port) {\n              s += ':' + this.port;\n            }\n          }\n          if (this.path) {\n            s += this.path;\n          }\n          if (this.query) {\n            s += '?' + this.query;\n          }\n          if (this.anchor) {\n            s += '#' + this.anchor;\n          }\n          this.source = s;\n        }\n        return this.source;\n      };\n      return URI;\n    }();\n\n    var DOM$1 = DOMUtils.DOM;\n    var extend$3 = Tools.extend, each$2 = Tools.each;\n    var resolve = Tools.resolve;\n    var ie = Env.ie;\n    var Editor = function () {\n      function Editor(id, settings, editorManager) {\n        var _this = this;\n        this.plugins = {};\n        this.contentCSS = [];\n        this.contentStyles = [];\n        this.loadedCSS = {};\n        this.isNotDirty = false;\n        this.editorManager = editorManager;\n        this.documentBaseUrl = editorManager.documentBaseURL;\n        extend$3(this, EditorObservable);\n        this.settings = getEditorSettings(this, id, this.documentBaseUrl, editorManager.defaultSettings, settings);\n        if (this.settings.suffix) {\n          editorManager.suffix = this.settings.suffix;\n        }\n        this.suffix = editorManager.suffix;\n        if (this.settings.base_url) {\n          editorManager._setBaseUrl(this.settings.base_url);\n        }\n        this.baseUri = editorManager.baseURI;\n        if (this.settings.referrer_policy) {\n          ScriptLoader.ScriptLoader._setReferrerPolicy(this.settings.referrer_policy);\n          DOMUtils.DOM.styleSheetLoader._setReferrerPolicy(this.settings.referrer_policy);\n        }\n        AddOnManager.languageLoad = this.settings.language_load;\n        AddOnManager.baseURL = editorManager.baseURL;\n        this.id = id;\n        this.setDirty(false);\n        this.documentBaseURI = new URI(this.settings.document_base_url, { base_uri: this.baseUri });\n        this.baseURI = this.baseUri;\n        this.inline = !!this.settings.inline;\n        this.shortcuts = new Shortcuts(this);\n        this.editorCommands = new EditorCommands(this);\n        if (this.settings.cache_suffix) {\n          Env.cacheSuffix = this.settings.cache_suffix.replace(/^[\\?\\&]+/, '');\n        }\n        this.ui = {\n          registry: registry(),\n          styleSheetLoader: undefined,\n          show: noop,\n          hide: noop,\n          enable: noop,\n          disable: noop,\n          isDisabled: never\n        };\n        var self = this;\n        var modeInstance = create$4(self);\n        this.mode = modeInstance;\n        this.setMode = modeInstance.set;\n        editorManager.fire('SetupEditor', { editor: this });\n        this.execCallback('setup', this);\n        this.$ = DomQuery.overrideDefaults(function () {\n          return {\n            context: _this.inline ? _this.getBody() : _this.getDoc(),\n            element: _this.getBody()\n          };\n        });\n      }\n      Editor.prototype.render = function () {\n        render(this);\n      };\n      Editor.prototype.focus = function (skipFocus) {\n        this.execCommand('mceFocus', false, skipFocus);\n      };\n      Editor.prototype.hasFocus = function () {\n        return hasFocus(this);\n      };\n      Editor.prototype.execCallback = function (name) {\n        var x = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n          x[_i - 1] = arguments[_i];\n        }\n        var self = this;\n        var callback = self.settings[name], scope;\n        if (!callback) {\n          return;\n        }\n        if (self.callbackLookup && (scope = self.callbackLookup[name])) {\n          callback = scope.func;\n          scope = scope.scope;\n        }\n        if (typeof callback === 'string') {\n          scope = callback.replace(/\\.\\w+$/, '');\n          scope = scope ? resolve(scope) : 0;\n          callback = resolve(callback);\n          self.callbackLookup = self.callbackLookup || {};\n          self.callbackLookup[name] = {\n            func: callback,\n            scope: scope\n          };\n        }\n        return callback.apply(scope || self, x);\n      };\n      Editor.prototype.translate = function (text) {\n        return I18n.translate(text);\n      };\n      Editor.prototype.getParam = function (name, defaultVal, type) {\n        return getParam(this, name, defaultVal, type);\n      };\n      Editor.prototype.hasPlugin = function (name, loaded) {\n        var hasPlugin = contains$3(getPlugins(this).split(/[ ,]/), name);\n        if (hasPlugin) {\n          return loaded ? PluginManager.get(name) !== undefined : true;\n        } else {\n          return false;\n        }\n      };\n      Editor.prototype.nodeChanged = function (args) {\n        this._nodeChangeDispatcher.nodeChanged(args);\n      };\n      Editor.prototype.addCommand = function (name, callback, scope) {\n        this.editorCommands.addCommand(name, callback, scope);\n      };\n      Editor.prototype.addQueryStateHandler = function (name, callback, scope) {\n        this.editorCommands.addQueryStateHandler(name, callback, scope);\n      };\n      Editor.prototype.addQueryValueHandler = function (name, callback, scope) {\n        this.editorCommands.addQueryValueHandler(name, callback, scope);\n      };\n      Editor.prototype.addShortcut = function (pattern, desc, cmdFunc, scope) {\n        this.shortcuts.add(pattern, desc, cmdFunc, scope);\n      };\n      Editor.prototype.execCommand = function (cmd, ui, value, args) {\n        return this.editorCommands.execCommand(cmd, ui, value, args);\n      };\n      Editor.prototype.queryCommandState = function (cmd) {\n        return this.editorCommands.queryCommandState(cmd);\n      };\n      Editor.prototype.queryCommandValue = function (cmd) {\n        return this.editorCommands.queryCommandValue(cmd);\n      };\n      Editor.prototype.queryCommandSupported = function (cmd) {\n        return this.editorCommands.queryCommandSupported(cmd);\n      };\n      Editor.prototype.show = function () {\n        var self = this;\n        if (self.hidden) {\n          self.hidden = false;\n          if (self.inline) {\n            self.getBody().contentEditable = 'true';\n          } else {\n            DOM$1.show(self.getContainer());\n            DOM$1.hide(self.id);\n          }\n          self.load();\n          self.fire('show');\n        }\n      };\n      Editor.prototype.hide = function () {\n        var self = this, doc = self.getDoc();\n        if (!self.hidden) {\n          if (ie && doc && !self.inline) {\n            doc.execCommand('SelectAll');\n          }\n          self.save();\n          if (self.inline) {\n            self.getBody().contentEditable = 'false';\n            if (self === self.editorManager.focusedEditor) {\n              self.editorManager.focusedEditor = null;\n            }\n          } else {\n            DOM$1.hide(self.getContainer());\n            DOM$1.setStyle(self.id, 'display', self.orgDisplay);\n          }\n          self.hidden = true;\n          self.fire('hide');\n        }\n      };\n      Editor.prototype.isHidden = function () {\n        return !!this.hidden;\n      };\n      Editor.prototype.setProgressState = function (state, time) {\n        this.fire('ProgressState', {\n          state: state,\n          time: time\n        });\n      };\n      Editor.prototype.load = function (args) {\n        var self = this;\n        var elm = self.getElement(), html;\n        if (self.removed) {\n          return '';\n        }\n        if (elm) {\n          args = args || {};\n          args.load = true;\n          var value = isTextareaOrInput(elm) ? elm.value : elm.innerHTML;\n          html = self.setContent(value, args);\n          args.element = elm;\n          if (!args.no_events) {\n            self.fire('LoadContent', args);\n          }\n          args.element = elm = null;\n          return html;\n        }\n      };\n      Editor.prototype.save = function (args) {\n        var self = this;\n        var elm = self.getElement(), html, form;\n        if (!elm || !self.initialized || self.removed) {\n          return;\n        }\n        args = args || {};\n        args.save = true;\n        args.element = elm;\n        html = args.content = self.getContent(args);\n        if (!args.no_events) {\n          self.fire('SaveContent', args);\n        }\n        if (args.format === 'raw') {\n          self.fire('RawSaveContent', args);\n        }\n        html = args.content;\n        if (!isTextareaOrInput(elm)) {\n          if (args.is_removing || !self.inline) {\n            elm.innerHTML = html;\n          }\n          if (form = DOM$1.getParent(self.id, 'form')) {\n            each$2(form.elements, function (elm) {\n              if (elm.name === self.id) {\n                elm.value = html;\n                return false;\n              }\n            });\n          }\n        } else {\n          elm.value = html;\n        }\n        args.element = elm = null;\n        if (args.set_dirty !== false) {\n          self.setDirty(false);\n        }\n        return html;\n      };\n      Editor.prototype.setContent = function (content, args) {\n        return setContent(this, content, args);\n      };\n      Editor.prototype.getContent = function (args) {\n        return getContent(this, args);\n      };\n      Editor.prototype.insertContent = function (content, args) {\n        if (args) {\n          content = extend$3({ content: content }, args);\n        }\n        this.execCommand('mceInsertContent', false, content);\n      };\n      Editor.prototype.resetContent = function (initialContent) {\n        if (initialContent === undefined) {\n          setContent(this, this.startContent, { format: 'raw' });\n        } else {\n          setContent(this, initialContent);\n        }\n        this.undoManager.reset();\n        this.setDirty(false);\n        this.nodeChanged();\n      };\n      Editor.prototype.isDirty = function () {\n        return !this.isNotDirty;\n      };\n      Editor.prototype.setDirty = function (state) {\n        var oldState = !this.isNotDirty;\n        this.isNotDirty = !state;\n        if (state && state !== oldState) {\n          this.fire('dirty');\n        }\n      };\n      Editor.prototype.getContainer = function () {\n        var self = this;\n        if (!self.container) {\n          self.container = DOM$1.get(self.editorContainer || self.id + '_parent');\n        }\n        return self.container;\n      };\n      Editor.prototype.getContentAreaContainer = function () {\n        return this.contentAreaContainer;\n      };\n      Editor.prototype.getElement = function () {\n        if (!this.targetElm) {\n          this.targetElm = DOM$1.get(this.id);\n        }\n        return this.targetElm;\n      };\n      Editor.prototype.getWin = function () {\n        var self = this;\n        var elm;\n        if (!self.contentWindow) {\n          elm = self.iframeElement;\n          if (elm) {\n            self.contentWindow = elm.contentWindow;\n          }\n        }\n        return self.contentWindow;\n      };\n      Editor.prototype.getDoc = function () {\n        var self = this;\n        var win;\n        if (!self.contentDocument) {\n          win = self.getWin();\n          if (win) {\n            self.contentDocument = win.document;\n          }\n        }\n        return self.contentDocument;\n      };\n      Editor.prototype.getBody = function () {\n        var doc = this.getDoc();\n        return this.bodyElement || (doc ? doc.body : null);\n      };\n      Editor.prototype.convertURL = function (url, name, elm) {\n        var self = this, settings = self.settings;\n        if (settings.urlconverter_callback) {\n          return self.execCallback('urlconverter_callback', url, elm, true, name);\n        }\n        if (!settings.convert_urls || elm && elm.nodeName === 'LINK' || url.indexOf('file:') === 0 || url.length === 0) {\n          return url;\n        }\n        if (settings.relative_urls) {\n          return self.documentBaseURI.toRelative(url);\n        }\n        url = self.documentBaseURI.toAbsolute(url, settings.remove_script_host);\n        return url;\n      };\n      Editor.prototype.addVisual = function (elm) {\n        addVisual(this, elm);\n      };\n      Editor.prototype.remove = function () {\n        remove(this);\n      };\n      Editor.prototype.destroy = function (automatic) {\n        destroy(this, automatic);\n      };\n      Editor.prototype.uploadImages = function (callback) {\n        return this.editorUpload.uploadImages(callback);\n      };\n      Editor.prototype._scanForImages = function () {\n        return this.editorUpload.scanForImages();\n      };\n      Editor.prototype.addButton = function () {\n        throw new Error('editor.addButton has been removed in tinymce 5x, use editor.ui.registry.addButton or editor.ui.registry.addToggleButton or editor.ui.registry.addSplitButton instead');\n      };\n      Editor.prototype.addSidebar = function () {\n        throw new Error('editor.addSidebar has been removed in tinymce 5x, use editor.ui.registry.addSidebar instead');\n      };\n      Editor.prototype.addMenuItem = function () {\n        throw new Error('editor.addMenuItem has been removed in tinymce 5x, use editor.ui.registry.addMenuItem instead');\n      };\n      Editor.prototype.addContextToolbar = function () {\n        throw new Error('editor.addContextToolbar has been removed in tinymce 5x, use editor.ui.registry.addContextToolbar instead');\n      };\n      return Editor;\n    }();\n\n    var DOM = DOMUtils.DOM;\n    var explode = Tools.explode, each$1 = Tools.each, extend$2 = Tools.extend;\n    var instanceCounter = 0, boundGlobalEvents = false;\n    var beforeUnloadDelegate;\n    var legacyEditors = [];\n    var editors = [];\n    var isValidLegacyKey = function (id) {\n      return id !== 'length';\n    };\n    var globalEventDelegate = function (e) {\n      var type = e.type;\n      each$1(EditorManager.get(), function (editor) {\n        switch (type) {\n        case 'scroll':\n          editor.fire('ScrollWindow', e);\n          break;\n        case 'resize':\n          editor.fire('ResizeWindow', e);\n          break;\n        }\n      });\n    };\n    var toggleGlobalEvents = function (state) {\n      if (state !== boundGlobalEvents) {\n        if (state) {\n          DomQuery(window).on('resize scroll', globalEventDelegate);\n        } else {\n          DomQuery(window).off('resize scroll', globalEventDelegate);\n        }\n        boundGlobalEvents = state;\n      }\n    };\n    var removeEditorFromList = function (targetEditor) {\n      var oldEditors = editors;\n      delete legacyEditors[targetEditor.id];\n      for (var i = 0; i < legacyEditors.length; i++) {\n        if (legacyEditors[i] === targetEditor) {\n          legacyEditors.splice(i, 1);\n          break;\n        }\n      }\n      editors = filter$4(editors, function (editor) {\n        return targetEditor !== editor;\n      });\n      if (EditorManager.activeEditor === targetEditor) {\n        EditorManager.activeEditor = editors.length > 0 ? editors[0] : null;\n      }\n      if (EditorManager.focusedEditor === targetEditor) {\n        EditorManager.focusedEditor = null;\n      }\n      return oldEditors.length !== editors.length;\n    };\n    var purgeDestroyedEditor = function (editor) {\n      if (editor && editor.initialized && !(editor.getContainer() || editor.getBody()).parentNode) {\n        removeEditorFromList(editor);\n        editor.unbindAllNativeEvents();\n        editor.destroy(true);\n        editor.removed = true;\n        editor = null;\n      }\n      return editor;\n    };\n    var isQuirksMode = document.compatMode !== 'CSS1Compat';\n    var EditorManager = __assign(__assign({}, Observable), {\n      baseURI: null,\n      baseURL: null,\n      defaultSettings: {},\n      documentBaseURL: null,\n      suffix: null,\n      $: DomQuery,\n      majorVersion: '5',\n      minorVersion: '9.2',\n      releaseDate: '2021-09-08',\n      editors: legacyEditors,\n      i18n: I18n,\n      activeEditor: null,\n      focusedEditor: null,\n      settings: {},\n      setup: function () {\n        var self = this;\n        var baseURL, documentBaseURL, suffix = '';\n        documentBaseURL = URI.getDocumentBaseUrl(document.location);\n        if (/^[^:]+:\\/\\/\\/?[^\\/]+\\//.test(documentBaseURL)) {\n          documentBaseURL = documentBaseURL.replace(/[\\?#].*$/, '').replace(/[\\/\\\\][^\\/]+$/, '');\n          if (!/[\\/\\\\]$/.test(documentBaseURL)) {\n            documentBaseURL += '/';\n          }\n        }\n        var preInit = window.tinymce || window.tinyMCEPreInit;\n        if (preInit) {\n          baseURL = preInit.base || preInit.baseURL;\n          suffix = preInit.suffix;\n        } else {\n          var scripts = document.getElementsByTagName('script');\n          for (var i = 0; i < scripts.length; i++) {\n            var src = scripts[i].src || '';\n            if (src === '') {\n              continue;\n            }\n            var srcScript = src.substring(src.lastIndexOf('/'));\n            if (/tinymce(\\.full|\\.jquery|)(\\.min|\\.dev|)\\.js/.test(src)) {\n              if (srcScript.indexOf('.min') !== -1) {\n                suffix = '.min';\n              }\n              baseURL = src.substring(0, src.lastIndexOf('/'));\n              break;\n            }\n          }\n          if (!baseURL && document.currentScript) {\n            var src = document.currentScript.src;\n            if (src.indexOf('.min') !== -1) {\n              suffix = '.min';\n            }\n            baseURL = src.substring(0, src.lastIndexOf('/'));\n          }\n        }\n        self.baseURL = new URI(documentBaseURL).toAbsolute(baseURL);\n        self.documentBaseURL = documentBaseURL;\n        self.baseURI = new URI(self.baseURL);\n        self.suffix = suffix;\n        setup$l(self);\n      },\n      overrideDefaults: function (defaultSettings) {\n        var baseUrl = defaultSettings.base_url;\n        if (baseUrl) {\n          this._setBaseUrl(baseUrl);\n        }\n        var suffix = defaultSettings.suffix;\n        if (defaultSettings.suffix) {\n          this.suffix = suffix;\n        }\n        this.defaultSettings = defaultSettings;\n        var pluginBaseUrls = defaultSettings.plugin_base_urls;\n        if (pluginBaseUrls !== undefined) {\n          each$j(pluginBaseUrls, function (pluginBaseUrl, pluginName) {\n            AddOnManager.PluginManager.urls[pluginName] = pluginBaseUrl;\n          });\n        }\n      },\n      init: function (settings) {\n        var self = this;\n        var result;\n        var invalidInlineTargets = Tools.makeMap('area base basefont br col frame hr img input isindex link meta param embed source wbr track ' + 'colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu', ' ');\n        var isInvalidInlineTarget = function (settings, elm) {\n          return settings.inline && elm.tagName.toLowerCase() in invalidInlineTargets;\n        };\n        var createId = function (elm) {\n          var id = elm.id;\n          if (!id) {\n            id = get$9(elm, 'name').filter(function (name) {\n              return !DOM.get(name);\n            }).getOrThunk(DOM.uniqueId);\n            elm.setAttribute('id', id);\n          }\n          return id;\n        };\n        var execCallback = function (name) {\n          var callback = settings[name];\n          if (!callback) {\n            return;\n          }\n          return callback.apply(self, []);\n        };\n        var hasClass = function (elm, className) {\n          return className.constructor === RegExp ? className.test(elm.className) : DOM.hasClass(elm, className);\n        };\n        var findTargets = function (settings) {\n          var targets = [];\n          if (Env.browser.isIE() && Env.browser.version.major < 11) {\n            initError('TinyMCE does not support the browser you are using. For a list of supported' + ' browsers please see: https://www.tinymce.com/docs/get-started/system-requirements/');\n            return [];\n          } else if (isQuirksMode) {\n            initError('Failed to initialize the editor as the document is not in standards mode. ' + 'TinyMCE requires standards mode.');\n            return [];\n          }\n          if (settings.types) {\n            each$1(settings.types, function (type) {\n              targets = targets.concat(DOM.select(type.selector));\n            });\n            return targets;\n          } else if (settings.selector) {\n            return DOM.select(settings.selector);\n          } else if (settings.target) {\n            return [settings.target];\n          }\n          switch (settings.mode) {\n          case 'exact':\n            var l = settings.elements || '';\n            if (l.length > 0) {\n              each$1(explode(l), function (id) {\n                var elm = DOM.get(id);\n                if (elm) {\n                  targets.push(elm);\n                } else {\n                  each$1(document.forms, function (f) {\n                    each$1(f.elements, function (e) {\n                      if (e.name === id) {\n                        id = 'mce_editor_' + instanceCounter++;\n                        DOM.setAttrib(e, 'id', id);\n                        targets.push(e);\n                      }\n                    });\n                  });\n                }\n              });\n            }\n            break;\n          case 'textareas':\n          case 'specific_textareas':\n            each$1(DOM.select('textarea'), function (elm) {\n              if (settings.editor_deselector && hasClass(elm, settings.editor_deselector)) {\n                return;\n              }\n              if (!settings.editor_selector || hasClass(elm, settings.editor_selector)) {\n                targets.push(elm);\n              }\n            });\n            break;\n          }\n          return targets;\n        };\n        var provideResults = function (editors) {\n          result = editors;\n        };\n        var initEditors = function () {\n          var initCount = 0;\n          var editors = [];\n          var targets;\n          var createEditor = function (id, settings, targetElm) {\n            var editor = new Editor(id, settings, self);\n            editors.push(editor);\n            editor.on('init', function () {\n              if (++initCount === targets.length) {\n                provideResults(editors);\n              }\n            });\n            editor.targetElm = editor.targetElm || targetElm;\n            editor.render();\n          };\n          DOM.unbind(window, 'ready', initEditors);\n          execCallback('onpageload');\n          targets = DomQuery.unique(findTargets(settings));\n          if (settings.types) {\n            each$1(settings.types, function (type) {\n              Tools.each(targets, function (elm) {\n                if (DOM.is(elm, type.selector)) {\n                  createEditor(createId(elm), extend$2({}, settings, type), elm);\n                  return false;\n                }\n                return true;\n              });\n            });\n            return;\n          }\n          Tools.each(targets, function (elm) {\n            purgeDestroyedEditor(self.get(elm.id));\n          });\n          targets = Tools.grep(targets, function (elm) {\n            return !self.get(elm.id);\n          });\n          if (targets.length === 0) {\n            provideResults([]);\n          } else {\n            each$1(targets, function (elm) {\n              if (isInvalidInlineTarget(settings, elm)) {\n                initError('Could not initialize inline editor on invalid inline target element', elm);\n              } else {\n                createEditor(createId(elm), settings, elm);\n              }\n            });\n          }\n        };\n        self.settings = settings;\n        DOM.bind(window, 'ready', initEditors);\n        return new promiseObj(function (resolve) {\n          if (result) {\n            resolve(result);\n          } else {\n            provideResults = function (editors) {\n              resolve(editors);\n            };\n          }\n        });\n      },\n      get: function (id) {\n        if (arguments.length === 0) {\n          return editors.slice(0);\n        } else if (isString$1(id)) {\n          return find$3(editors, function (editor) {\n            return editor.id === id;\n          }).getOr(null);\n        } else if (isNumber(id)) {\n          return editors[id] ? editors[id] : null;\n        } else {\n          return null;\n        }\n      },\n      add: function (editor) {\n        var self = this;\n        var existingEditor = legacyEditors[editor.id];\n        if (existingEditor === editor) {\n          return editor;\n        }\n        if (self.get(editor.id) === null) {\n          if (isValidLegacyKey(editor.id)) {\n            legacyEditors[editor.id] = editor;\n          }\n          legacyEditors.push(editor);\n          editors.push(editor);\n        }\n        toggleGlobalEvents(true);\n        self.activeEditor = editor;\n        self.fire('AddEditor', { editor: editor });\n        if (!beforeUnloadDelegate) {\n          beforeUnloadDelegate = function (e) {\n            var event = self.fire('BeforeUnload');\n            if (event.returnValue) {\n              e.preventDefault();\n              e.returnValue = event.returnValue;\n              return event.returnValue;\n            }\n          };\n          window.addEventListener('beforeunload', beforeUnloadDelegate);\n        }\n        return editor;\n      },\n      createEditor: function (id, settings) {\n        return this.add(new Editor(id, settings, this));\n      },\n      remove: function (selector) {\n        var self = this;\n        var i, editor;\n        if (!selector) {\n          for (i = editors.length - 1; i >= 0; i--) {\n            self.remove(editors[i]);\n          }\n          return;\n        }\n        if (isString$1(selector)) {\n          each$1(DOM.select(selector), function (elm) {\n            editor = self.get(elm.id);\n            if (editor) {\n              self.remove(editor);\n            }\n          });\n          return;\n        }\n        editor = selector;\n        if (isNull(self.get(editor.id))) {\n          return null;\n        }\n        if (removeEditorFromList(editor)) {\n          self.fire('RemoveEditor', { editor: editor });\n        }\n        if (editors.length === 0) {\n          window.removeEventListener('beforeunload', beforeUnloadDelegate);\n        }\n        editor.remove();\n        toggleGlobalEvents(editors.length > 0);\n        return editor;\n      },\n      execCommand: function (cmd, ui, value) {\n        var self = this, editor = self.get(value);\n        switch (cmd) {\n        case 'mceAddEditor':\n          if (!self.get(value)) {\n            new Editor(value, self.settings, self).render();\n          }\n          return true;\n        case 'mceRemoveEditor':\n          if (editor) {\n            editor.remove();\n          }\n          return true;\n        case 'mceToggleEditor':\n          if (!editor) {\n            self.execCommand('mceAddEditor', false, value);\n            return true;\n          }\n          if (editor.isHidden()) {\n            editor.show();\n          } else {\n            editor.hide();\n          }\n          return true;\n        }\n        if (self.activeEditor) {\n          return self.activeEditor.execCommand(cmd, ui, value);\n        }\n        return false;\n      },\n      triggerSave: function () {\n        each$1(editors, function (editor) {\n          editor.save();\n        });\n      },\n      addI18n: function (code, items) {\n        I18n.add(code, items);\n      },\n      translate: function (text) {\n        return I18n.translate(text);\n      },\n      setActive: function (editor) {\n        var activeEditor = this.activeEditor;\n        if (this.activeEditor !== editor) {\n          if (activeEditor) {\n            activeEditor.fire('deactivate', { relatedTarget: editor });\n          }\n          editor.fire('activate', { relatedTarget: activeEditor });\n        }\n        this.activeEditor = editor;\n      },\n      _setBaseUrl: function (baseUrl) {\n        this.baseURL = new URI(this.documentBaseURL).toAbsolute(baseUrl.replace(/\\/+$/, ''));\n        this.baseURI = new URI(this.baseURL);\n      }\n    });\n    EditorManager.setup();\n\n    var min$1 = Math.min, max$1 = Math.max, round$1 = Math.round;\n    var relativePosition = function (rect, targetRect, rel) {\n      var x = targetRect.x;\n      var y = targetRect.y;\n      var w = rect.w;\n      var h = rect.h;\n      var targetW = targetRect.w;\n      var targetH = targetRect.h;\n      var relChars = (rel || '').split('');\n      if (relChars[0] === 'b') {\n        y += targetH;\n      }\n      if (relChars[1] === 'r') {\n        x += targetW;\n      }\n      if (relChars[0] === 'c') {\n        y += round$1(targetH / 2);\n      }\n      if (relChars[1] === 'c') {\n        x += round$1(targetW / 2);\n      }\n      if (relChars[3] === 'b') {\n        y -= h;\n      }\n      if (relChars[4] === 'r') {\n        x -= w;\n      }\n      if (relChars[3] === 'c') {\n        y -= round$1(h / 2);\n      }\n      if (relChars[4] === 'c') {\n        x -= round$1(w / 2);\n      }\n      return create$2(x, y, w, h);\n    };\n    var findBestRelativePosition = function (rect, targetRect, constrainRect, rels) {\n      var pos, i;\n      for (i = 0; i < rels.length; i++) {\n        pos = relativePosition(rect, targetRect, rels[i]);\n        if (pos.x >= constrainRect.x && pos.x + pos.w <= constrainRect.w + constrainRect.x && pos.y >= constrainRect.y && pos.y + pos.h <= constrainRect.h + constrainRect.y) {\n          return rels[i];\n        }\n      }\n      return null;\n    };\n    var inflate = function (rect, w, h) {\n      return create$2(rect.x - w, rect.y - h, rect.w + w * 2, rect.h + h * 2);\n    };\n    var intersect = function (rect, cropRect) {\n      var x1 = max$1(rect.x, cropRect.x);\n      var y1 = max$1(rect.y, cropRect.y);\n      var x2 = min$1(rect.x + rect.w, cropRect.x + cropRect.w);\n      var y2 = min$1(rect.y + rect.h, cropRect.y + cropRect.h);\n      if (x2 - x1 < 0 || y2 - y1 < 0) {\n        return null;\n      }\n      return create$2(x1, y1, x2 - x1, y2 - y1);\n    };\n    var clamp = function (rect, clampRect, fixedSize) {\n      var x1 = rect.x;\n      var y1 = rect.y;\n      var x2 = rect.x + rect.w;\n      var y2 = rect.y + rect.h;\n      var cx2 = clampRect.x + clampRect.w;\n      var cy2 = clampRect.y + clampRect.h;\n      var underflowX1 = max$1(0, clampRect.x - x1);\n      var underflowY1 = max$1(0, clampRect.y - y1);\n      var overflowX2 = max$1(0, x2 - cx2);\n      var overflowY2 = max$1(0, y2 - cy2);\n      x1 += underflowX1;\n      y1 += underflowY1;\n      if (fixedSize) {\n        x2 += underflowX1;\n        y2 += underflowY1;\n        x1 -= overflowX2;\n        y1 -= overflowY2;\n      }\n      x2 -= overflowX2;\n      y2 -= overflowY2;\n      return create$2(x1, y1, x2 - x1, y2 - y1);\n    };\n    var create$2 = function (x, y, w, h) {\n      return {\n        x: x,\n        y: y,\n        w: w,\n        h: h\n      };\n    };\n    var fromClientRect = function (clientRect) {\n      return create$2(clientRect.left, clientRect.top, clientRect.width, clientRect.height);\n    };\n    var Rect = {\n      inflate: inflate,\n      relativePosition: relativePosition,\n      findBestRelativePosition: findBestRelativePosition,\n      intersect: intersect,\n      clamp: clamp,\n      create: create$2,\n      fromClientRect: fromClientRect\n    };\n\n    var awaiter = function (resolveCb, rejectCb, timeout) {\n      if (timeout === void 0) {\n        timeout = 1000;\n      }\n      var done = false;\n      var timer = null;\n      var complete = function (completer) {\n        return function () {\n          var args = [];\n          for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n          }\n          if (!done) {\n            done = true;\n            if (timer !== null) {\n              clearTimeout(timer);\n              timer = null;\n            }\n            completer.apply(null, args);\n          }\n        };\n      };\n      var resolve = complete(resolveCb);\n      var reject = complete(rejectCb);\n      var start = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        if (!done && timer === null) {\n          timer = setTimeout(function () {\n            return reject.apply(null, args);\n          }, timeout);\n        }\n      };\n      return {\n        start: start,\n        resolve: resolve,\n        reject: reject\n      };\n    };\n    var create$1 = function () {\n      var tasks = {};\n      var resultFns = {};\n      var load = function (id, url) {\n        var loadErrMsg = 'Script at URL \"' + url + '\" failed to load';\n        var runErrMsg = 'Script at URL \"' + url + '\" did not call `tinymce.Resource.add(\\'' + id + '\\', data)` within 1 second';\n        if (tasks[id] !== undefined) {\n          return tasks[id];\n        } else {\n          var task = new promiseObj(function (resolve, reject) {\n            var waiter = awaiter(resolve, reject);\n            resultFns[id] = waiter.resolve;\n            ScriptLoader.ScriptLoader.loadScript(url, function () {\n              return waiter.start(runErrMsg);\n            }, function () {\n              return waiter.reject(loadErrMsg);\n            });\n          });\n          tasks[id] = task;\n          return task;\n        }\n      };\n      var add = function (id, data) {\n        if (resultFns[id] !== undefined) {\n          resultFns[id](data);\n          delete resultFns[id];\n        }\n        tasks[id] = promiseObj.resolve(data);\n      };\n      return {\n        load: load,\n        add: add\n      };\n    };\n    var Resource = create$1();\n\n    var each = Tools.each, extend$1 = Tools.extend;\n    var extendClass, initializing;\n    var Class = function () {\n    };\n    Class.extend = extendClass = function (props) {\n      var self = this;\n      var _super = self.prototype;\n      var Class = function () {\n        var i, mixins, mixin;\n        var self = this;\n        if (!initializing) {\n          if (self.init) {\n            self.init.apply(self, arguments);\n          }\n          mixins = self.Mixins;\n          if (mixins) {\n            i = mixins.length;\n            while (i--) {\n              mixin = mixins[i];\n              if (mixin.init) {\n                mixin.init.apply(self, arguments);\n              }\n            }\n          }\n        }\n      };\n      var dummy = function () {\n        return this;\n      };\n      var createMethod = function (name, fn) {\n        return function () {\n          var self = this;\n          var tmp = self._super;\n          self._super = _super[name];\n          var ret = fn.apply(self, arguments);\n          self._super = tmp;\n          return ret;\n        };\n      };\n      initializing = true;\n      var prototype = new self();\n      initializing = false;\n      if (props.Mixins) {\n        each(props.Mixins, function (mixin) {\n          for (var name_1 in mixin) {\n            if (name_1 !== 'init') {\n              props[name_1] = mixin[name_1];\n            }\n          }\n        });\n        if (_super.Mixins) {\n          props.Mixins = _super.Mixins.concat(props.Mixins);\n        }\n      }\n      if (props.Methods) {\n        each(props.Methods.split(','), function (name) {\n          props[name] = dummy;\n        });\n      }\n      if (props.Properties) {\n        each(props.Properties.split(','), function (name) {\n          var fieldName = '_' + name;\n          props[name] = function (value) {\n            var self = this;\n            if (value !== undefined) {\n              self[fieldName] = value;\n              return self;\n            }\n            return self[fieldName];\n          };\n        });\n      }\n      if (props.Statics) {\n        each(props.Statics, function (func, name) {\n          Class[name] = func;\n        });\n      }\n      if (props.Defaults && _super.Defaults) {\n        props.Defaults = extend$1({}, _super.Defaults, props.Defaults);\n      }\n      each$j(props, function (member, name) {\n        if (typeof member === 'function' && _super[name]) {\n          prototype[name] = createMethod(name, member);\n        } else {\n          prototype[name] = member;\n        }\n      });\n      Class.prototype = prototype;\n      Class.constructor = Class;\n      Class.extend = extendClass;\n      return Class;\n    };\n\n    var min = Math.min, max = Math.max, round = Math.round;\n    var Color = function (value) {\n      var self = {};\n      var r = 0, g = 0, b = 0;\n      var rgb2hsv = function (r, g, b) {\n        var h, s, v;\n        h = 0;\n        s = 0;\n        v = 0;\n        r = r / 255;\n        g = g / 255;\n        b = b / 255;\n        var minRGB = min(r, min(g, b));\n        var maxRGB = max(r, max(g, b));\n        if (minRGB === maxRGB) {\n          v = minRGB;\n          return {\n            h: 0,\n            s: 0,\n            v: v * 100\n          };\n        }\n        var d = r === minRGB ? g - b : b === minRGB ? r - g : b - r;\n        h = r === minRGB ? 3 : b === minRGB ? 1 : 5;\n        h = 60 * (h - d / (maxRGB - minRGB));\n        s = (maxRGB - minRGB) / maxRGB;\n        v = maxRGB;\n        return {\n          h: round(h),\n          s: round(s * 100),\n          v: round(v * 100)\n        };\n      };\n      var hsvToRgb = function (hue, saturation, brightness) {\n        hue = (parseInt(hue, 10) || 0) % 360;\n        saturation = parseInt(saturation, 10) / 100;\n        brightness = parseInt(brightness, 10) / 100;\n        saturation = max(0, min(saturation, 1));\n        brightness = max(0, min(brightness, 1));\n        if (saturation === 0) {\n          r = g = b = round(255 * brightness);\n          return;\n        }\n        var side = hue / 60;\n        var chroma = brightness * saturation;\n        var x = chroma * (1 - Math.abs(side % 2 - 1));\n        var match = brightness - chroma;\n        switch (Math.floor(side)) {\n        case 0:\n          r = chroma;\n          g = x;\n          b = 0;\n          break;\n        case 1:\n          r = x;\n          g = chroma;\n          b = 0;\n          break;\n        case 2:\n          r = 0;\n          g = chroma;\n          b = x;\n          break;\n        case 3:\n          r = 0;\n          g = x;\n          b = chroma;\n          break;\n        case 4:\n          r = x;\n          g = 0;\n          b = chroma;\n          break;\n        case 5:\n          r = chroma;\n          g = 0;\n          b = x;\n          break;\n        default:\n          r = g = b = 0;\n        }\n        r = round(255 * (r + match));\n        g = round(255 * (g + match));\n        b = round(255 * (b + match));\n      };\n      var toHex = function () {\n        var hex = function (val) {\n          val = parseInt(val, 10).toString(16);\n          return val.length > 1 ? val : '0' + val;\n        };\n        return '#' + hex(r) + hex(g) + hex(b);\n      };\n      var toRgb = function () {\n        return {\n          r: r,\n          g: g,\n          b: b\n        };\n      };\n      var toHsv = function () {\n        return rgb2hsv(r, g, b);\n      };\n      var parse = function (value) {\n        var matches;\n        if (typeof value === 'object') {\n          if ('r' in value) {\n            r = value.r;\n            g = value.g;\n            b = value.b;\n          } else if ('v' in value) {\n            hsvToRgb(value.h, value.s, value.v);\n          }\n        } else {\n          if (matches = /rgb\\s*\\(\\s*([0-9]+)\\s*,\\s*([0-9]+)\\s*,\\s*([0-9]+)[^\\)]*\\)/gi.exec(value)) {\n            r = parseInt(matches[1], 10);\n            g = parseInt(matches[2], 10);\n            b = parseInt(matches[3], 10);\n          } else if (matches = /#([0-F]{2})([0-F]{2})([0-F]{2})/gi.exec(value)) {\n            r = parseInt(matches[1], 16);\n            g = parseInt(matches[2], 16);\n            b = parseInt(matches[3], 16);\n          } else if (matches = /#([0-F])([0-F])([0-F])/gi.exec(value)) {\n            r = parseInt(matches[1] + matches[1], 16);\n            g = parseInt(matches[2] + matches[2], 16);\n            b = parseInt(matches[3] + matches[3], 16);\n          }\n        }\n        r = r < 0 ? 0 : r > 255 ? 255 : r;\n        g = g < 0 ? 0 : g > 255 ? 255 : g;\n        b = b < 0 ? 0 : b > 255 ? 255 : b;\n        return self;\n      };\n      if (value) {\n        parse(value);\n      }\n      self.toRgb = toRgb;\n      self.toHsv = toHsv;\n      self.toHex = toHex;\n      self.parse = parse;\n      return self;\n    };\n\n    var serialize = function (obj) {\n      var data = JSON.stringify(obj);\n      if (!isString$1(data)) {\n        return data;\n      }\n      return data.replace(/[\\u0080-\\uFFFF]/g, function (match) {\n        var hexCode = match.charCodeAt(0).toString(16);\n        return '\\\\u' + '0000'.substring(hexCode.length) + hexCode;\n      });\n    };\n    var JSONUtils = {\n      serialize: serialize,\n      parse: function (text) {\n        try {\n          return JSON.parse(text);\n        } catch (ex) {\n        }\n      }\n    };\n\n    var JSONP = {\n      callbacks: {},\n      count: 0,\n      send: function (settings) {\n        var self = this, dom = DOMUtils.DOM, count = settings.count !== undefined ? settings.count : self.count;\n        var id = 'tinymce_jsonp_' + count;\n        self.callbacks[count] = function (json) {\n          dom.remove(id);\n          delete self.callbacks[count];\n          settings.callback(json);\n        };\n        dom.add(dom.doc.body, 'script', {\n          id: id,\n          src: settings.url,\n          type: 'text/javascript'\n        });\n        self.count++;\n      }\n    };\n\n    var XHR = __assign(__assign({}, Observable), {\n      send: function (settings) {\n        var xhr, count = 0;\n        var ready = function () {\n          if (!settings.async || xhr.readyState === 4 || count++ > 10000) {\n            if (settings.success && count < 10000 && xhr.status === 200) {\n              settings.success.call(settings.success_scope, '' + xhr.responseText, xhr, settings);\n            } else if (settings.error) {\n              settings.error.call(settings.error_scope, count > 10000 ? 'TIMED_OUT' : 'GENERAL', xhr, settings);\n            }\n            xhr = null;\n          } else {\n            Delay.setTimeout(ready, 10);\n          }\n        };\n        settings.scope = settings.scope || this;\n        settings.success_scope = settings.success_scope || settings.scope;\n        settings.error_scope = settings.error_scope || settings.scope;\n        settings.async = settings.async !== false;\n        settings.data = settings.data || '';\n        XHR.fire('beforeInitialize', { settings: settings });\n        xhr = new XMLHttpRequest();\n        if (xhr.overrideMimeType) {\n          xhr.overrideMimeType(settings.content_type);\n        }\n        xhr.open(settings.type || (settings.data ? 'POST' : 'GET'), settings.url, settings.async);\n        if (settings.crossDomain) {\n          xhr.withCredentials = true;\n        }\n        if (settings.content_type) {\n          xhr.setRequestHeader('Content-Type', settings.content_type);\n        }\n        if (settings.requestheaders) {\n          Tools.each(settings.requestheaders, function (header) {\n            xhr.setRequestHeader(header.key, header.value);\n          });\n        }\n        xhr.setRequestHeader('X-Requested-With', 'XMLHttpRequest');\n        xhr = XHR.fire('beforeSend', {\n          xhr: xhr,\n          settings: settings\n        }).xhr;\n        xhr.send(settings.data);\n        if (!settings.async) {\n          return ready();\n        }\n        Delay.setTimeout(ready, 10);\n      }\n    });\n\n    var extend = Tools.extend;\n    var JSONRequest = function () {\n      function JSONRequest(settings) {\n        this.settings = extend({}, settings);\n        this.count = 0;\n      }\n      JSONRequest.sendRPC = function (o) {\n        return new JSONRequest().send(o);\n      };\n      JSONRequest.prototype.send = function (args) {\n        var ecb = args.error, scb = args.success;\n        var xhrArgs = extend(this.settings, args);\n        xhrArgs.success = function (c, x) {\n          c = JSONUtils.parse(c);\n          if (typeof c === 'undefined') {\n            c = { error: 'JSON Parse error.' };\n          }\n          if (c.error) {\n            ecb.call(xhrArgs.error_scope || xhrArgs.scope, c.error, x);\n          } else {\n            scb.call(xhrArgs.success_scope || xhrArgs.scope, c.result);\n          }\n        };\n        xhrArgs.error = function (ty, x) {\n          if (ecb) {\n            ecb.call(xhrArgs.error_scope || xhrArgs.scope, ty, x);\n          }\n        };\n        xhrArgs.data = JSONUtils.serialize({\n          id: args.id || 'c' + this.count++,\n          method: args.method,\n          params: args.params\n        });\n        xhrArgs.content_type = 'application/json';\n        XHR.send(xhrArgs);\n      };\n      return JSONRequest;\n    }();\n\n    var create = function () {\n      return function () {\n        var data = {};\n        var keys = [];\n        var storage = {\n          getItem: function (key) {\n            var item = data[key];\n            return item ? item : null;\n          },\n          setItem: function (key, value) {\n            keys.push(key);\n            data[key] = String(value);\n          },\n          key: function (index) {\n            return keys[index];\n          },\n          removeItem: function (key) {\n            keys = keys.filter(function (k) {\n              return k === key;\n            });\n            delete data[key];\n          },\n          clear: function () {\n            keys = [];\n            data = {};\n          },\n          length: 0\n        };\n        Object.defineProperty(storage, 'length', {\n          get: function () {\n            return keys.length;\n          },\n          configurable: false,\n          enumerable: false\n        });\n        return storage;\n      }();\n    };\n\n    var localStorage;\n    try {\n      var test = '__storage_test__';\n      localStorage = window.localStorage;\n      localStorage.setItem(test, test);\n      localStorage.removeItem(test);\n    } catch (e) {\n      localStorage = create();\n    }\n    var LocalStorage = localStorage;\n\n    var publicApi = {\n      geom: { Rect: Rect },\n      util: {\n        Promise: promiseObj,\n        Delay: Delay,\n        Tools: Tools,\n        VK: VK,\n        URI: URI,\n        Class: Class,\n        EventDispatcher: EventDispatcher,\n        Observable: Observable,\n        I18n: I18n,\n        XHR: XHR,\n        JSON: JSONUtils,\n        JSONRequest: JSONRequest,\n        JSONP: JSONP,\n        LocalStorage: LocalStorage,\n        Color: Color,\n        ImageUploader: ImageUploader\n      },\n      dom: {\n        EventUtils: EventUtils,\n        Sizzle: Sizzle,\n        DomQuery: DomQuery,\n        TreeWalker: DomTreeWalker,\n        TextSeeker: TextSeeker,\n        DOMUtils: DOMUtils,\n        ScriptLoader: ScriptLoader,\n        RangeUtils: RangeUtils,\n        Serializer: DomSerializer,\n        StyleSheetLoader: StyleSheetLoader,\n        ControlSelection: ControlSelection,\n        BookmarkManager: BookmarkManager,\n        Selection: EditorSelection,\n        Event: EventUtils.Event\n      },\n      html: {\n        Styles: Styles,\n        Entities: Entities,\n        Node: AstNode,\n        Schema: Schema,\n        SaxParser: SaxParser,\n        DomParser: DomParser,\n        Writer: Writer,\n        Serializer: HtmlSerializer\n      },\n      Env: Env,\n      AddOnManager: AddOnManager,\n      Annotator: Annotator,\n      Formatter: Formatter,\n      UndoManager: UndoManager,\n      EditorCommands: EditorCommands,\n      WindowManager: WindowManager,\n      NotificationManager: NotificationManager,\n      EditorObservable: EditorObservable,\n      Shortcuts: Shortcuts,\n      Editor: Editor,\n      FocusManager: FocusManager,\n      EditorManager: EditorManager,\n      DOM: DOMUtils.DOM,\n      ScriptLoader: ScriptLoader.ScriptLoader,\n      PluginManager: PluginManager,\n      ThemeManager: ThemeManager,\n      IconManager: IconManager,\n      Resource: Resource,\n      trim: Tools.trim,\n      isArray: Tools.isArray,\n      is: Tools.is,\n      toArray: Tools.toArray,\n      makeMap: Tools.makeMap,\n      each: Tools.each,\n      map: Tools.map,\n      grep: Tools.grep,\n      inArray: Tools.inArray,\n      extend: Tools.extend,\n      create: Tools.create,\n      walk: Tools.walk,\n      createNS: Tools.createNS,\n      resolve: Tools.resolve,\n      explode: Tools.explode,\n      _addCacheSuffix: Tools._addCacheSuffix,\n      isOpera: Env.opera,\n      isWebKit: Env.webkit,\n      isIE: Env.ie,\n      isGecko: Env.gecko,\n      isMac: Env.mac\n    };\n    var tinymce = Tools.extend(EditorManager, publicApi);\n\n    var exportToModuleLoaders = function (tinymce) {\n      if (typeof module === 'object') {\n        try {\n          module.exports = tinymce;\n        } catch (_) {\n        }\n      }\n    };\n    var exportToWindowGlobal = function (tinymce) {\n      window.tinymce = tinymce;\n      window.tinyMCE = tinymce;\n    };\n    exportToWindowGlobal(tinymce);\n    exportToModuleLoaders(tinymce);\n\n}());\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","const __WEBPACK_NAMESPACE_OBJECT__ = React;","const __WEBPACK_NAMESPACE_OBJECT__ = ReactDOM;","/**Search JSON API\n *\n * Use the senaite.jsonapi to search a catalog\n *\n*/\nclass SearchAPI {\n\n  constructor(props) {\n    console.debug(\"SearchAPI::constructor\")\n    this.api_url = props.api_url;\n    this.on_api_error = props.on_api_error || function() {};\n    return this;\n  }\n\n  get_api_url(endpoint) {\n    return `${this.api_url}/${endpoint}#${location.search}`\n  }\n\n  /*\n   * Fetch Ajax API resource from the server\n   *\n   * @param {string} endpoint\n   * @param {object} options\n   * @returns {Promise}\n   */\n  get_json(endpoint, options) {\n    var data, init, method, on_api_error, request, url;\n    if (options == null) {\n      options = {};\n    }\n    method = options.method || \"POST\";\n    data = JSON.stringify(options.data) || \"{}\";\n    on_api_error = this.on_api_error;\n    url = this.get_api_url(endpoint);\n    init = {\n      method: method,\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"X-CSRF-TOKEN\": this.get_csrf_token()\n      },\n      body: method === \"POST\" ? data : null,\n      credentials: \"include\"\n    };\n    console.info(\"SearchAPI::fetch:endpoint=\" + endpoint + \" init=\", init);\n    request = new Request(url, init);\n    return fetch(request).then(function(response) {\n      if (!response.ok) {\n        return Promise.reject(response);\n      }\n      return response;\n    }).then(function(response) {\n      return response.json();\n    }).catch(function(response) {\n      on_api_error(response);\n      return response;\n    });\n  }\n\n  search(catalog, query, params) {\n    params = params || {};\n    let url = `search?catalog=${catalog}`;\n    for(let [key, value] of Object.entries(query)) {\n      // handle arrays as repeating parameters\n      if (Array.isArray(value)) {\n        value.forEach( (item) => {\n          url += `&${key}=${item}`;\n        });\n        continue;\n      }\n      // workaround for path queries\n      if (key == \"path\") {\n        value = value.query || null;\n        if (value.depth !== null) {\n          url += `&depth=${value.depth}`;\n        }\n      }\n      if (value) {\n        url += `&${key}=${value}`;\n      }\n    }\n    for(let [key, value] of Object.entries(params)) {\n      url += `&${key}=${value}`;\n    }\n    console.debug(\"SearchAPI::search:url=\", url);\n    return this.get_json(url, {method: \"GET\"});\n  }\n\n  /*\n   * Get the plone.protect CSRF token\n   * Note: The fields won't save w/o that token set\n   */\n  get_csrf_token() {\n    return document.querySelector(\"#protect-script\").dataset.token;\n  }\n\n}\n\nexport default SearchAPI;\n","import React from \"react\";\nimport \"./SearchField.css\"\n\n\n/** Input field that triggers a search query\n *\n */\nclass SearchField extends React.Component {\n\n  constructor(props) {\n    super(props);\n\n    this.state = {}\n\n    // React reference to the input field\n    // https://reactjs.org/docs/react-api.html#reactcreateref\n    this.input_field_ref = React.createRef();\n\n    // bind event handlers\n    this.on_focus = this.on_focus.bind(this);\n    this.on_blur = this.on_blur.bind(this);\n    this.on_change = this.on_change.bind(this);\n    this.on_keydown = this.on_keydown.bind(this);\n    this.on_keypress = this.on_keypress.bind(this);\n    this.on_clear_click = this.on_clear_click.bind(this);\n    this.on_search_click = this.on_search_click.bind(this);\n  }\n\n  /*\n   * Returns the search value from the input field\n   */\n  get_search_value() {\n    return this.input_field_ref.current.value;\n  }\n\n  /*\n   * Handler when the search field get focused\n   */\n  on_focus(event) {\n    console.debug(\"SearchField::on_focus\");\n    if (this.props.on_focus) {\n      let value = this.get_search_value() || null;\n      this.props.on_focus(value);\n    }\n  }\n\n  /*\n   * Handler when the search field lost focus\n   */\n  on_blur(event) {\n    console.debug(\"SearchField::on_blur\");\n    let value = this.get_search_value();\n    if (event.relatedTarget !== null || !value) {\n      // do not fire blur event if the user clicked e.g. in the results table\n      return;\n    }\n    if (this.props.on_blur) {\n      this.props.on_blur(value);\n      // clear the input field\n      this.input_field_ref.current.value = \"\"\n    }\n  }\n\n  /*\n   * Handler when the search value changed\n   */\n  on_change(event) {\n    event.preventDefault();\n    let value = this.get_search_value();\n    console.debug(\"SearchField::on_change:value: \", value);\n    if (this.props.on_search) {\n      this.props.on_search(value);\n    }\n  }\n\n  /*\n   * Handler for keydown events in the search field\n   *\n   */\n  on_keydown(event) {\n    // backspace\n    if (event.which == 8) {\n      if (this.get_search_value() == \"\") {\n        this.props.on_clear();\n      }\n    }\n\n    // down arrow\n    if (event.which == 40) {\n      if (this.props.on_arrow_key) {\n        this.props.on_arrow_key(\"down\");\n      }\n    }\n    // up arrow\n    if (event.which == 38) {\n      if (this.props.on_arrow_key) {\n        this.props.on_arrow_key(\"up\");\n      }\n    }\n\n    // left arrow\n    if (event.which == 37) {\n      if (this.props.on_arrow_key) {\n        this.props.on_arrow_key(\"left\");\n      }\n    }\n\n    // right arrow\n    if (event.which == 39) {\n      if (this.props.on_arrow_key) {\n        this.props.on_arrow_key(\"right\");\n      }\n    }\n  }\n\n  /*\n   * Handler for keypress events in the search field\n   *\n   */\n  on_keypress(event) {\n    if (event.which == 13) {\n      console.debug(\"SearchField::on_keypress:ENTER\");\n      // prevent form submission when clicking ENTER\n      event.preventDefault();\n      if (this.props.on_enter) {\n        let value = this.get_search_value();\n        this.props.on_enter(value);\n        // clear the input field\n        this.input_field_ref.current.value = \"\"\n      }\n\n    }\n  }\n\n  on_clear_click(event) {\n    event.preventDefault();\n    if (this.props.on_clear) {\n      let value = this.get_search_value();\n      this.props.on_clear(value);\n      // clear the input field\n      this.input_field_ref.current.value = \"\"\n    }\n  }\n\n  on_search_click(event) {\n    event.preventDefault();\n    if (this.props.on_search) {\n      let value = this.get_search_value();\n      this.props.on_search(value);\n    }\n  }\n\n  render() {\n    return (\n      <div className={this.props.className}>\n        <div className=\"input-group searchfield\">\n          <input type=\"text\"\n                 autoComplete=\"off\"\n                 name={this.props.name}\n                 className={this.props.className}\n                 ref={this.input_field_ref}\n                 disabled={this.props.disabled}\n                 onKeyDown={this.on_keydown}\n                 onKeyPress={this.on_keypress}\n                 onChange={this.on_change}\n                 onFocus={this.on_focus}\n                 onBlur={this.on_blur}\n                 placeholder={this.props.placeholder}\n          />\n          <div className=\"input-group-append\">\n            <button className=\"btn btn-sm btn-outline-secondary\"\n                    style={{zIndex: 0}}\n                    disabled={this.props.disabled}\n                    onClick={this.on_clear_click}>\n              <i className=\"fas fa-times\"></i>\n            </button>\n            <button className=\"btn btn-sm btn-outline-primary\"\n                    style={{zIndex: 0}}\n                    disabled={this.props.disabled}\n                    onClick={this.on_search_click}>\n              {!this.props.loading && <i className=\"fas fa-search\"></i>}\n              {this.props.loading && <span className=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\"></span>}\n            </button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default SearchField;\n","const __WEBPACK_NAMESPACE_OBJECT__ = jQuery;","/* i18n integration. This is forked from jarn.jsi18n\n *\n * This is a singleton.\n * Configuration is done on the body tag data-i18ncatalogurl attribute\n *     <body data-i18ncatalogurl=\"/plonejsi18n\">\n *\n *  Or, it'll default to \"/plonejsi18n\"\n */\n\nimport $ from \"jquery\";\n\n\nvar I18N = function() {\n  var self = this;\n  self.baseUrl = $('body').attr('data-i18ncatalogurl');\n  self.currentLanguage = $('html').attr('lang') || 'en';\n\n  // Fix for country specific languages\n  if (self.currentLanguage.split('-').length > 1) {\n    self.currentLanguage = self.currentLanguage.split('-')[0] + '_' + self.currentLanguage.split('-')[1].toUpperCase();\n  }\n\n  self.storage = null;\n  self.catalogs = {};\n  self.ttl = 24 * 3600 * 1000;\n\n  // Internet Explorer 8 does not know Date.now() which is used in e.g. loadCatalog, so we \"define\" it\n  if (!Date.now) {\n    Date.now = function() {\n      return new Date().valueOf();\n    };\n  }\n\n  try {\n    if ('localStorage' in window && window.localStorage !== null && 'JSON' in window && window.JSON !== null) {\n      self.storage = window.localStorage;\n    }\n  } catch (e) {}\n\n  self.configure = function(config) {\n    for (var key in config){\n      self[key] = config[key];\n    }\n  };\n\n  self._setCatalog = function (domain, language, catalog) {\n    if (domain in self.catalogs) {\n      self.catalogs[domain][language] = catalog;\n    } else {\n      self.catalogs[domain] = {};\n      self.catalogs[domain][language] = catalog;\n    }\n  };\n\n  self._storeCatalog = function (domain, language, catalog) {\n    var key = domain + '-' + language;\n    if (self.storage !== null && catalog !== null) {\n      self.storage.setItem(key, JSON.stringify(catalog));\n      self.storage.setItem(key + '-updated', Date.now());\n    }\n  };\n\n  self.getUrl = function(domain, language) {\n    return self.baseUrl + '?domain=' + domain + '&language=' + language;\n  };\n\n  self.loadCatalog = function (domain, language) {\n    if (language === undefined) {\n      language = self.currentLanguage;\n    }\n    if (self.storage !== null) {\n      var key = domain + '-' + language;\n      if (key in self.storage) {\n        if ((Date.now() - parseInt(self.storage.getItem(key + '-updated'), 10)) < self.ttl) {\n          var catalog = JSON.parse(self.storage.getItem(key));\n          self._setCatalog(domain, language, catalog);\n          return;\n        }\n      }\n    }\n    if (!self.baseUrl) {\n      return;\n    }\n    $.getJSON(self.getUrl(domain, language), function (catalog) {\n      if (catalog === null) {\n        return;\n      }\n      self._setCatalog(domain, language, catalog);\n      self._storeCatalog(domain, language, catalog);\n    });\n  };\n\n  self.MessageFactory = function (domain, language) {\n    language = language || self.currentLanguage;\n    return function translate (msgid, keywords) {\n      var msgstr;\n      if ((domain in self.catalogs) && (language in self.catalogs[domain]) && (msgid in self.catalogs[domain][language])) {\n        msgstr = self.catalogs[domain][language][msgid];\n      } else {\n        msgstr = msgid;\n      }\n      if (keywords) {\n        var regexp, keyword;\n        for (keyword in keywords) {\n          if (keywords.hasOwnProperty(keyword)) {\n            regexp = new RegExp('\\\\$\\\\{' + keyword + '\\\\}', 'g');\n            msgstr = msgstr.replace(regexp, keywords[keyword]);\n          }\n        }\n      }\n      return msgstr;\n    };\n  };\n};\n\nexport default I18N;\n","import I18N from \"./components/i18n.js\";\n\n// SENAITE message factory\nvar t = null;\nexport var _t = (msgid, keywords) => {\n  if (t === null) {\n    let i18n = new I18N();\n    console.debug(\"*** Loading `senaite.core` i18n MessageFactory ***\");\n    i18n.loadCatalog(\"senaite.core\")\n    t = i18n.MessageFactory(\"senaite.core\")\n  }\n  return t(msgid, keywords);\n}\n\n// Plone message factory\nvar p = null;\nexport var _p = (msgid, keywords) => {\n  if (p === null) {\n    let i18n = new I18N();\n    console.debug(\"*** Loading `plone` i18n MessageFactory ***\");\n    i18n.loadCatalog(\"plone\")\n    p = i18n.MessageFactory(\"plone\")\n  }\n  return p(msgid, keywords);\n}\n","import React from \"react\";\nimport {_t} from \"../../i18n-wrapper.js\"\nimport \"./SearchResults.css\"\n\n\n/** Renders the search results in a table popup\n *\n */\nclass SearchResults extends React.Component {\n\n  constructor(props) {\n    super(props);\n\n    // bind event handlers\n    this.on_select = this.on_select.bind(this);\n    this.on_page = this.on_page.bind(this);\n    this.on_prev_page = this.on_prev_page.bind(this);\n    this.on_next_page = this.on_next_page.bind(this);\n    this.on_close = this.on_close.bind(this);\n    this.on_mouse_over = this.on_mouse_over.bind(this);\n  }\n\n  /*\n   * Return the key where a value is located in a result record\n   */\n  get_value_key() {\n    return this.props.value_key || \"uid\";\n  }\n\n  /*\n   * Return the header columns config\n   *\n   * @returns {Array} of column config objects\n   */\n  get_columns() {\n    return this.props.columns || [];\n  }\n\n  /*\n   * Return only the (field-)names of the columns config\n   *\n   * @returns {Array} of column names\n   */\n  get_column_names() {\n    let columns = this.get_columns();\n    return columns.map((column) => {\n      return column.name;\n    });\n  }\n\n  /*\n   * Return only the labels of the columns config\n   *\n   * @returns {Array} of column labels\n   */\n  get_column_labels() {\n    let columns = this.get_columns();\n    return columns.map((column) => {\n      return column.label\n    });\n  }\n\n  /*\n   * Return the search results\n   *\n   * @returns {Array} of result objects (items of `senaite.jsonapi` response)\n   */\n  get_results() {\n    return this.props.results || [];\n  }\n\n  /*\n   * Checks if results are available\n   *\n   * @returns {Boolean} true if there are results, false otherwise\n   */\n  has_results() {\n    return this.get_results().length > 0;\n  }\n\n  /*\n   * Returns the style object for the dropdown table\n   *\n   * @returns {Object} of ReactJS CSS styles\n   */\n  get_style() {\n    return {\n      minWidth: this.props.width || \"400px\",\n      backgroundColor: \"white\",\n      zIndex: 999999\n    }\n  }\n\n  /*\n   * Returns the value of a result object (JSON API record)\n   *\n   * @returns {String} value of the result\n   */\n  get_result_value(result) {\n    let value_key = this.get_value_key();\n    return result[value_key];\n  }\n\n  /*\n   * Checks whether the value is already in the list of selected values\n   *\n   * @returns {Boolean} true if the value is already selected, false otherwise\n   */\n  is_value_selected(value) {\n    return this.props.values.indexOf(value) > -1;\n  }\n\n  /*\n   * Build Header <th></th> columns\n   *\n   * @returns {Array} of <th>...</th> columns\n   */\n  build_header_columns() {\n    let columns = [];\n    for (let column of this.get_columns()) {\n      let label = column.label || column.title;\n      let width = column.width || \"auto\";\n      let align = column.align || \"left\";\n      columns.push(\n        <th className=\"border-top-0\" width={width} align={align}>\n          {_t(label)}\n        </th>\n      );\n    }\n    // Append additional column for usage state\n    columns.push(\n      <th className=\"border-top-0\" width=\"1\"></th>\n    )\n    return columns;\n  }\n\n  /*\n   * Build table <tr></tr> rows\n   *\n   * @returns {Array} of <tr>...</tr> rows\n   */\n  build_rows() {\n    let rows = [];\n    let results = this.get_results();\n    results.forEach((result, index) => {\n      let value = this.get_result_value(result);\n      let cursor = value ? \"pointer\" : \"not-allowed\";\n      let title = value ? \"\" : _t(\"Missing key\");\n      rows.push(\n        <tr value={value}\n            index={index}\n            title={title}\n            style={{cursor:cursor}}\n            className={this.props.focused == index ? \"table-active\": \"\"}\n            onMouseOver={this.on_mouse_over}\n            onClick={this.on_select}>\n          {this.build_columns(result)}\n        </tr>\n      );\n    });\n    return rows\n  }\n\n  /*\n   * Build Header <td></td> columns\n   *\n   * @returns {Array} of <td>...</td> columns\n   */\n  build_columns(result) {\n    let columns = []\n    let searchterm = this.props.searchterm || \"\";\n    for (let name of this.get_column_names()) {\n      let value = result[name];\n      let highlighted = this.highlight(value, searchterm);\n      columns.push(\n        <td dangerouslySetInnerHTML={{__html: highlighted}}></td>\n      );\n    }\n    let value = this.get_result_value(result);\n    let used = this.props.values.indexOf(value) > -1;\n    columns.push(\n      <td>{used && <i className=\"fas fa-link text-success\"></i>}</td>\n    );\n    return columns;\n  }\n\n  /*\n   * Highlight any found match of the searchterm in the text\n   *\n   * @returns {String} highlighted text\n   */\n  highlight(text, searchterm) {\n    if (searchterm.length == 0) return text;\n    try {\n      let rx = new RegExp(searchterm, \"gi\");\n      text = text.replaceAll(rx, (m) => {\n        return \"<span class='font-weight-bold text-info'>\"+m+\"</span>\";\n      });\n    } catch (error) {\n      // pass\n    }\n    return text\n  }\n\n  /*\n   * Build pagination <li>...</li> items\n   *\n   * @returns {Array} Pagination JSX\n   */\n  build_pages() {\n    let pages = [];\n\n    let total = this.props.pages;\n    let current = this.props.page;\n    let padding = this.props.padding;\n\n    let first_page = current - padding > 0 ? current - padding : 1;\n    let last_page = current + padding < total ? current + padding : total;\n\n    let crop_before = first_page === 1 ? false : true;\n    let crop_after = last_page < total ? true : false;\n\n    for (let page=first_page; page <= last_page; page++) {\n      let cls = [\"page-item\"];\n      if (current === page) cls.push(\"active\");\n\n      // crop before the current page\n      if (page == first_page && crop_before) {\n        // link to first page\n        pages.push(\n          <li>\n            <button className=\"page-link\" page={1} onClick={this.on_page}>1</button>\n          </li>\n        );\n        // placeholder\n        pages.push(\n          <li>\n            <div className=\"page-link\">...</div>\n          </li>\n        );\n        crop_before = false;\n      }\n\n      pages.push(\n        <li className={cls.join(\" \")}>\n          <button className=\"page-link\" page={page} onClick={this.on_page}>\n            {page}\n          </button>\n        </li>\n      );\n\n      // crop after the current page\n      if (page === last_page && crop_after) {\n        // placeholder\n        pages.push(\n          <li>\n            <div className=\"page-link\">...</div>\n          </li>\n        );\n        // link to last page\n        pages.push(\n          <li>\n            <button className=\"page-link\" page={total} onClick={this.on_page}>\n              {total}\n            </button>\n          </li>\n        );\n        crop_after = false;\n      }\n\n    }\n    return pages;\n  }\n\n  /*\n   * Build pagination next button\n   *\n   * @returns {Array} Next button JSX\n   */\n  build_next_button() {\n    let cls = [\"page-item\"]\n    if (!this.props.next_url) cls.push(\"disabled\")\n    return (\n      <li className={cls.join(\" \")}>\n        <button className=\"page-link\" onClick={this.on_next_page}>\n          Next\n        </button>\n      </li>\n    )\n  }\n\n  /*\n   * Build pagination previous button\n   *\n   * @returns {Array} Previous button JSX\n   */\n  build_prev_button() {\n    let cls = [\"page-item\"]\n    if (!this.props.prev_url) cls.push(\"disabled\")\n    return (\n      <li className={cls.join(\" \")}>\n        <button className=\"page-link\" onClick={this.on_prev_page}>\n          Previous\n        </button>\n      </li>\n    )\n  }\n\n  /*\n   * Build results dropdown close button\n   *\n   * @returns {Array} Close button JSX\n   */\n  build_close_button() {\n    return (\n      <button className=\"btn btn-sm btn-link\" onClick={this.on_close}>\n        <i className=\"fas fa-window-close\"></i>\n      </button>\n    )\n  }\n\n  /*\n   * Event handler when a result was selected\n   */\n  on_select(event) {\n    event.preventDefault();\n    let target = event.currentTarget;\n    let value = target.getAttribute(\"value\")\n    if (value === null) {\n      console.warn(\"SearchResults::on_select:missing_value!\");\n      return;\n    }\n    console.debug(\"SearchResults::on_select:event=\", event);\n    if (this.props.on_select) {\n      this.props.on_select(value);\n    }\n  }\n\n  /*\n   * Event handler when a page was clicked\n   */\n  on_page(event) {\n    event.preventDefault();\n    let target = event.currentTarget;\n    let page = target.getAttribute(\"page\")\n    console.debug(\"SearchResults::on_page:event=\", event);\n    if (page == this.props.page) {\n      return;\n    }\n    if (this.props.on_page) {\n      this.props.on_page(page);\n    }\n  }\n\n  /*\n   * Event handler when the pagination previous button was clicked\n   */\n  on_prev_page(event) {\n    event.preventDefault();\n    console.debug(\"SearchResults::on_prev_page:event=\", event);\n    let page = this.props.page;\n    if (page < 2) {\n      console.warn(\"No previous pages available!\");\n      return;\n    }\n    if (this.props.on_page) {\n      this.props.on_page(page - 1);\n    }\n  }\n\n  /*\n   * Event handler when the pagination next button was clicked\n   */\n  on_next_page(event) {\n    event.preventDefault();\n    console.debug(\"SearchResults::on_next_page:event=\", event);\n    let page = this.props.page;\n    if (page + 1 > this.props.pages) {\n      console.warn(\"No next pages available!\");\n      return;\n    }\n    if (this.props.on_page) {\n      this.props.on_page(page + 1);\n    }\n  }\n\n  /*\n   * Event handler when the dropdown close button was clicked\n   */\n  on_close(event) {\n    event.preventDefault();\n    console.debug(\"SearchResults::on_close:event=\", event);\n    if (this.props.on_clear) {\n      this.props.on_clear();\n    }\n  }\n\n  /*\n   * Event handler when the mouse is over a row\n   */\n  on_mouse_over(event) {\n    event.preventDefault();\n    console.debug(\"SearchResults::on_mouse_over:event=\", event);\n    let target = event.currentTarget;\n    let index = target.getAttribute(\"index\");\n    if (index !== null && this.props.on_mouse_over) {\n      this.props.on_mouse_over(index);\n    }\n  }\n\n  /*\n   * Render the reference results selection\n   */\n  render() {\n    if (!this.has_results()) {\n      return null;\n    }\n    return (\n      <div className={this.props.className}\n           style={this.get_style()}>\n        <div style={{position: \"absolute\", top: 0, right: 0}}>\n          {this.props.loading && <span className=\"spinner-border text-info spinner-border-sm\" role=\"status\" aria-hidden=\"true\"></span>}\n          {this.build_close_button()}\n        </div>\n        <table className=\"table table-sm table-hover small queryselectwidget-results-table\">\n          <thead>\n            <tr>\n              {this.build_header_columns()}\n            </tr>\n          </thead>\n          <tbody>\n            {this.build_rows()}\n          </tbody>\n        </table>\n        {this.props.pages > 1 &&\n         <nav>\n           <ul className=\"pagination pagination-sm justify-content-center\">\n             {this.build_prev_button()}\n             {this.build_pages()}\n             {this.build_next_button()}\n           </ul>\n         </nav>\n        }\n      </div>\n    );\n  }\n}\n\nexport default SearchResults;\n","import React from \"react\";\nimport \"./SelectedValues.css\"\n\n\nclass SelectedValues extends React.Component {\n\n  constructor(props) {\n    super(props);\n\n    this.on_change = this.on_change.bind(this);\n    this.on_deselect = this.on_deselect.bind(this);\n  }\n\n  get_selected_values() {\n    return this.props.values || [];\n  }\n\n  /*\n   * Simple template interpolation that replaces ${...} placeholders\n   * with any found value from the context object.\n   *\n   * https://stackoverflow.com/questions/29182244/convert-a-string-to-a-template-string\n   */\n  interpolate(template, context) {\n    for(let [key, value] of Object.entries(context)) {\n      template = template.replace(new RegExp('\\\\$\\\\{' + key + '\\\\}', 'g'), value)\n    }\n    return template;\n  }\n\n  render_display_template(value) {\n    let template = this.props.display_template;\n    if (!template) return value;\n    let context = this.props.records[value];\n    if (!context) return value;\n    return this.interpolate(template, context);\n  }\n\n  build_selected_items() {\n    let items = [];\n    let selected_values = this.get_selected_values();\n\n    for (let value of selected_values) {\n      let context = this.props.records[value] || {};\n      let review_state = context.review_state || \"default\";\n      items.push(\n        <li value={value} className=\"d-inline-block\">\n          <div className=\"d-flex flex-nowrap p-1 mb-1 mr-1 bg-light border rounded field-validation\">\n            <span className={\"state-\" + review_state}\n                  dangerouslySetInnerHTML={{__html: this.render_display_template(value)}}></span>\n            <button value={value}\n                    className=\"btn btn-sm btn-link-danger\"\n                    onClick={this.on_deselect}>\n              <i className=\"fas fa-times-circle\"></i>\n            </button>\n          </div>\n\n        </li>\n      );\n    }\n    return items\n  }\n\n  /*\n   * Callback when the textarea field was changed\n   * Note: This will be useful when the field is used in the sample add form\n   */\n  on_change(event) {\n    event.preventDefault();\n    let target = event.currentTarget;\n    let value = target.value;\n    let values = value.split(\"\\n\");\n    // filter out empties\n    values = values.filter(x => x);\n    // set new values directly\n    if (this.props.set_values) {\n      this.props.set_values(values);\n    }\n  }\n\n  on_deselect(event) {\n    event.preventDefault();\n    let target = event.currentTarget;\n    let value = target.getAttribute(\"value\");\n    console.debug(\"SelectedValues::on_deselect: Remove value\", value);\n    if (this.props.on_deselect) {\n      this.props.on_deselect(value);\n    }\n  }\n\n  render() {\n    return (\n      <div className=\"queryselectwidget-selected-values\">\n        <ul className=\"list-unstyled d-table-row\">\n          {this.build_selected_items()}\n        </ul>\n        {/* submitted in form */}\n        <textarea\n          className=\"d-none\"\n          onChange={this.on_change}\n          name={this.props.name}\n          value={this.props.values.join(\"\\n\")}\n        />\n      </div>\n    );\n  }\n}\n\nexport default SelectedValues;\n","import React from \"react\"\n\nimport SearchAPI from \"../../api/search.js\"\nimport SearchField from \"../components/SearchField.js\"\nimport SearchResults from \"../components/SearchResults.js\"\nimport SelectedValues from \"../components/SelectedValues.js\"\n\n\nclass QuerySelectWidgetController extends React.Component {\n\n  constructor(props) {\n    super(props);\n\n    // Internal state\n    this.state = {\n      value_key: \"uid\",  // result object key that has the submit value stored\n      value_query_index: \"UID\",  // field index to query for values\n      records: {},  // mapping of value -> result record\n      results: [],  // `items` list of search results coming from `senaite.jsonapi`\n      columns: [],  // Columns to show\n      searchterm: \"\",  // the search term that was entered by the user\n      loading: false,  // loading flag when searching for results\n      count: 0,  // count of results (coming from `senaite.jsonapi`)\n      page: 1,  // current page (coming from `senaite.jsonapi`)\n      pages: 1,  // number of pages (coming from `senaite.jsonapi`)\n      next_url: null,  // next page API URL (coming from `senaite.jsonapi`)\n      prev_url: null,  // previous page API URL (coming from `senaite.jsonapi`)\n      b_start: 1,  // batch start for pagination (see `senaite.jsonapi.batch`)\n      focused: 0,  // current result that has the focus\n      padding: 3,  // page padding\n      complete: false,  // wake up objects\n      results_table_width: \"500px\",  // width of the search results table\n    }\n\n    // Root input HTML element\n    this.root_el = props.root_el;\n\n    // Data keys located at the root element\n    // -> initial values are set from the widget class\n    const data_keys = [\n      \"id\",  // element id\n      \"name\",  // input name that get submitted\n      \"values\",  // selected values\n      \"records\",  // Mapping of value -> result item\n      \"api_url\",  // JSON API URL for search queries\n      \"catalog\",  // catalog name\n      \"query\",  // base catalog query\n      \"search_index\",  // query search index\n      \"search_wildcard\",  // make the search term a wildcard search\n      \"limit\",  // limit to display on one page\n      \"value_key\",  // key that contains the value that is stored\n      \"value_query_index\",  // field index to use for value queries\n      \"allow_user_value\",  // allow the user to enter custom values\n      \"columns\",  // columns to be displayed in the results popup\n      \"display_template\",  // template to use for the selected values\n      \"multi_valued\",  // if true, more than one value can be set\n      \"hide_input_after_select\",  // only for single valued fields to hide the input after selection\n      \"clear_results_after_select\",  // clear results after value select\n      \"disabled\",  // if true, the field is rendered as not editable\n      \"readonly\",  // if true, the field is rendered as not editable\n      \"padding\",  // number of pages to show in navigation before and after the current\n      \"complete\",  // wake-up object search\n      \"results_table_width\",  // width of the results table\n    ]\n\n    // Query data keys and set state with parsed JSON value\n    for (let key of data_keys) {\n      let value = this.root_el.dataset[key];\n      if (value === undefined) {\n        continue;\n      }\n      this.state[key] = this.parse_json(value);\n    }\n\n    // Initialize communication API with the API URL\n    this.api = new SearchAPI({\n      api_url: this.state.api_url,\n    });\n\n    // Bind callbacks to current context\n    this.search = this.debounce(this.search).bind(this);\n    this.goto_page = this.goto_page.bind(this);\n    this.clear_results = this.clear_results.bind(this);\n    this.select = this.select.bind(this);\n    this.select_focused = this.select_focused.bind(this);\n    this.deselect = this.deselect.bind(this);\n    this.set_values = this.set_values.bind(this);\n    this.navigate_results = this.navigate_results.bind(this);\n    this.on_keydown = this.on_keydown.bind(this);\n    this.on_click = this.on_click.bind(this);\n    this.focus_row = this.focus_row.bind(this);\n    this.on_flush = this.on_flush.bind(this);\n    this.on_sync = this.on_sync.bind(this);\n    this.fix_dropdown_position = this.fix_dropdown_position.bind(this);\n\n    return this\n  }\n\n  componentDidMount() {\n    // Bind event listeners of the document\n    document.addEventListener(\"keydown\", this.on_keydown, false);\n    document.addEventListener(\"click\", this.on_click, false)\n    this.root_el.addEventListener(\"flush\", this.on_flush, false);\n    this.root_el.addEventListener(\"sync\", this.on_sync, false);\n    document.addEventListener(\"scroll\", this.fix_dropdown_position, false);\n  }\n\n  componentDidUpdate() {\n    this.fix_dropdown_position();\n  }\n\n  componentWillUnmount() {\n    // Remove event listeners of the document\n    document.removeEventListener(\"keydown\", this.on_keydown, false);\n    document.removeEventListener(\"click\", this.on_click, false);\n    this.root_el.removeEventListener(\"flush\", this.on_flush, false);\n    this.root_el.removeEventListener(\"sync\", this.on_sync, false);\n    document.removeEventListener(\"scroll\", this.fix_dropdown_position, false);\n  }\n\n  /*\n   * Throttle wrapper\n   */\n  debounce(func) {\n    let timer;\n    return function (...args) {\n      const context = this;\n      if (timer) clearTimeout(timer);\n      timer = setTimeout(() => {\n        timer = null;\n        func.apply(context, args);\n      }, 500);\n    };\n  };\n\n  /*\n   * Fix overflow at the bottom or at the right of the container\n   */\n  fix_dropdown_position() {\n    let widget = this.props.root_el;\n\n    let field = widget.querySelector(\".queryselectwidget-search-field input\");\n    let dropdown = widget.querySelector(\".queryselectwidget-results-container\");\n\n    if (!field || !dropdown) {\n      return;\n    }\n\n    let field_rect = field.getBoundingClientRect();\n    let dropdown_rect = dropdown.getBoundingClientRect();\n    let body_rect = document.body.getBoundingClientRect();\n\n    console.debug(`FIELD RECT: ${JSON.stringify(field_rect)}`);\n    console.debug(`DROPDOWN RECT: ${JSON.stringify(dropdown_rect)}`);\n    console.debug(`BODY RECT: ${JSON.stringify(body_rect)}`);\n\n    let body_height = body_rect.height;\n    let body_width = body_rect.width;\n\n    let dropdown_height = dropdown_rect.height;\n    let dropdown_width = dropdown_rect.width;\n\n    // Let the dropdown stick below the field\n    let transform = {\n      X: `translateX(${body_rect.x}px)`,\n      Y: `translateY(${body_rect.y}px)`\n    }\n\n    // dropdown overflows at the right\n    if (field_rect.left + dropdown_width > body_width) {\n      console.debug(\"Fix dropdown overflow right!\")\n      transform[\"X\"] = `translateX(${(body_rect.x - dropdown_width + field_rect.width)}px)`;\n    }\n\n    // dropdown will overflow at the bottom of the body\n    // Note: The 16px is to provide the same spacing to the search field, which is controlled by mt-2 (8px).\n    if (field_rect.bottom + dropdown_height > body_height) {\n      console.debug(\"Fix dropdown overflow bottom!\")\n      transform[\"Y\"] = `translateY(${body_rect.y - dropdown_height - field_rect.height - 16}px)`;\n    }\n\n    dropdown.style.transform = `${transform[\"X\"]} ${transform[\"Y\"]}`;\n  }\n\n  /*\n   * Trigger a custom event on the textarea field that get submitted\n   *\n   * @param {String} event_name: The name of the event to dispatch\n   * @param {Object} event_data: The data to send with the event\n   */\n  trigger_custom_event(event_name, event_data) {\n    let event = new CustomEvent(event_name, {detail: event_data, bubbles: true});\n\n    let field = document.querySelector(`textarea[name='${this.state.name}']`, this.props.root_el);\n    if (field) {\n      console.info(\"Dispatching Event\", event);\n      field.dispatchEvent(event);\n    }\n  }\n\n  /*\n   * JSON parse the given value\n   *\n   * @param {String} value: The JSON value to parse\n   */\n  parse_json(value) {\n    try {\n      return JSON.parse(value);\n    } catch (error) {\n      console.error(`Could not parse \"${value}\" to JSON`);\n    }\n  }\n\n  /*\n   * Checks if the field should be rendered as disabled\n   *\n   * @returns {Boolean} true/false if the widget is disabled\n   */\n  is_disabled() {\n    if (this.state.disabled) {\n      return true;\n    }\n    if (this.state.readonly) {\n      return true;\n    }\n    if (!this.state.multi_valued && this.state.values.length > 0) {\n      return true;\n    }\n    return false;\n  }\n\n\n  /*\n   * Checks if the search field should be rendered after select on single valued fields\n   *\n   * @returns {Boolean} true/false if the search field is rendered\n   */\n  show_search_field() {\n    if (!this.state.multi_valued && this.state.values.length > 0 && this.state.hide_input_after_select) {\n      return false;\n    }\n    return true;\n  }\n\n  /*\n   * Create a query object for the API\n   *\n   * This method prepares a query from the current state variables,\n   * which can be used to call the `api.search` method.\n   *\n   * @param {Object} options: Additional options to add to the query\n   * @returns {Object} The query object\n   */\n  make_query(options) {\n    options = options || {};\n\n    // allow to search a custom index\n    // NOTE: This should be a ZCTextIndex!\n    let search_index = this.state.search_index || \"Title\";\n    let search_term = this.state.searchterm;\n\n    if (search_term && this.state.search_wildcard && !search_term.endsWith(\"*\")) {\n      search_term += \"*\"\n    }\n\n    let query = Object.assign({\n      limit: this.state.limit,\n      complete: this.state.complete,\n      // we pass the column names to the search endpoint to provide the right data of the brain/object\n      column_names: this.get_column_names(),\n      field_name: this.state.name,\n    }, options, this.state.query);\n\n    // inject the search index\n    query[search_index] = search_term;\n\n    // allow to custom search query cascading\n    query = Object.assign(query, this.get_search_query());\n\n    return query;\n  }\n\n  /*\n   * Read custom search query from the root element\n   *\n   * This allows external code to set a custom search query to the field for filtering\n   *\n   * @returns {Object} The search query object\n   */\n  get_search_query() {\n    let query = this.root_el.dataset.search_query;\n    if (query == null) {\n      return {};\n    }\n    return JSON.parse(query);\n  }\n\n  /*\n   * Get the column configuration from the state\n   *\n   * @returns {Array} column configuration\n   */\n  get_columns() {\n    let columns = this.state.columns || [];\n    if ({}.toString.call(columns) != '[object Array]') {\n      columns = [\n        {name: \"title\", label: \"Title\"},\n        {name: \"description\", label: \"Description\"},\n      ];\n    }\n    return columns;\n  }\n\n  /*\n   * Extract the required column names that we want\n   *\n   * This method parses the `name` keys of the column definition\n   * which can be used by the endpoint to prepare the data for us\n   *\n   * @returns {Array} of column names\n   */\n  get_column_names() {\n    let names = new Set();\n    let columns = this.get_columns();\n    columns.forEach((column) => names.add(column.name));\n    return Array.from(names);\n  }\n\n  /*\n   * Execute a search query and set the results to the state\n   *\n   * @param {Object} url_params: Additional search params for the API search URL\n   * @returns {Promise}\n   */\n  fetch_results(url_params) {\n    url_params = url_params || {};\n    // prepare the server request\n    let self = this;\n    let query = this.make_query();\n    this.toggle_loading(true);\n    let promise = this.api.search(this.state.catalog, query, url_params);\n    promise.then(function(data) {\n      console.debug(\"QuerySelectWidgetController::fetch_results:GOT DATA: \", data);\n      self.set_results_data(data);\n      self.toggle_loading(false);\n    });\n    return promise;\n  }\n\n  /*\n   * Execute a search for the given searchterm\n   *\n   * @param {String} searchterm: The value entered into the search field\n   * @returns {Promise}\n   */\n  search(searchterm) {\n    if (!searchterm && this.state.results.length > 0) {\n      this.state.searchterm = \"\";\n      return;\n    }\n    console.debug(\"QuerySelectWidgetController::search:searchterm:\", searchterm);\n    // set the searchterm directly to avoid re-rendering\n    this.state.searchterm = searchterm || \"\";\n    return this.fetch_results();\n  }\n\n  /*\n   * Fetch results of a page\n   *\n   * @param {Integer} page: The page to fetch\n   * @returns {Promise}\n   */\n  goto_page(page) {\n    page = parseInt(page);\n    let limit = parseInt(this.state.limit)\n    // calculate the beginning of the page\n    // Note: this is the count of previous items that are excluded\n    let b_start = page * limit - limit;\n    return this.fetch_results({b_start: b_start});\n  }\n\n  /*\n   * Add the value of a search result to the state\n   *\n   * @param {String} value: The selected value\n   * @returns {Array} values: current selected values\n   */\n  select(value) {\n    if (value === null) {\n      console.warn(\"QuerySelectWidgetController::select: MISSING VALUE\");\n      return;\n    }\n    console.debug(\"QuerySelectWidgetController::select:value:\", value);\n    // create a copy of the selected values\n    let values = [].concat(this.state.values);\n    // Add the new value if it is not selected yet\n    if (values.indexOf(value) == -1) {\n      values.push(value);\n    }\n    // Expose the JSON records of the selected values (UIDs) to the\n    // `data-records` attribute of the root element.\n    // This is a tweak to allow to copy the field values in Sample Add Form.\n    // Otherwise, the other fields would only see the raw value (UID) instead of\n    // the display template.\n    let records = {};\n    values.forEach((value) => {\n      records[value] = this.state.records[value];\n    });\n    this.root_el.setAttribute(\"data-records\", JSON.stringify(records));\n\n    this.setState({values: values}, () => {\n      // manually trigger a select event when the state is set\n      this.trigger_custom_event(\"select\", {value: value});\n    });\n    if (values.length > 0 && !this.state.multi_valued || this.state.clear_results_after_select) {\n      this.clear_results();\n    }\n    return values;\n  }\n\n  /*\n   * Set the focus for the given row at index\n   *\n   */\n  focus_row(rowindex) {\n    this.setState({\n      focused: rowindex\n    })\n  }\n\n  /*\n   * Add/remove the focused result\n   *\n   */\n  select_focused(searchvalue) {\n    console.debug(\"QuerySelectWidgetController::select_focused\");\n    let focused = this.state.focused;\n    let result = this.state.results.at(focused);\n    if (result) {\n      let value = result[this.state.value_key];\n      if (this.state.values.indexOf(value) == -1) {\n        this.select(value);\n      } else {\n        this.deselect(value);\n      }\n    } else {\n      if (searchvalue && this.state.allow_user_value) {\n        // allow to set the current searchvalue\n        this.select(searchvalue);\n      }\n    }\n  }\n\n  /*\n   * Remove the value of a reference from the state\n   *\n   * @param {String} value: The selected value\n   * @returns {Array} values: current selected values\n   */\n  deselect(value) {\n    console.debug(\"QuerySelectWidgetController::deselect:value:\", value);\n    let values = [].concat(this.state.values);\n    let pos = values.indexOf(value);\n    if (pos > -1) {\n      values.splice(pos, 1);\n      // manually trigger deselect event\n      this.trigger_custom_event(\"deselect\", {value: value});\n    }\n    this.setState({values: values});\n    return values;\n  }\n\n  /*\n   * Set *all* values\n   *\n   * @param {Array} values: The values to be set\n   */\n  set_values(values) {\n    // get the current set values\n    let current_values = this.state.values;\n\n    if (!current_values && !values) {\n      // nothing to do\n      return;\n    }\n\n    // Inject the provided records of the root element\n    // This allows to bypass the additional fetch to the server.\n    // Currently only used in Sample Add Form when values are copied.\n    let records = this.parse_json(this.root_el.dataset.records);\n    if (records != null) {\n      this.state[\"records\"] = records;\n    }\n\n    let to_sync = []\n\n    for (const value of values) {\n      // check a sync is needed\n      if (this.state.records[value] == null) {\n        to_sync.push(value);\n      }\n\n      if (current_values.indexOf(value) > -1) {\n        // value not changed -> continue\n        continue;\n      }\n      if (current_values.indexOf(value) == -1) {\n        // value added -> trigger select event\n        this.trigger_custom_event(\"select\", {value: value});\n      }\n    }\n\n    for (const value of current_values) {\n      if (values.indexOf(value) == -1) {\n        // value removed -> trigger deselect event\n        this.trigger_custom_event(\"deselect\", {value: value});\n      }\n    }\n\n    // ensure we have valid records and set the values\n    if (to_sync.length > 0) {\n      this.sync_records(to_sync).then(() => {\n        this.setState({values: values});\n      });\n    } else {\n      // set the state with the new values\n      this.setState({values: values});\n    }\n  }\n\n  /*\n   * Navigate the results either up or down\n   *\n   * @param {String} direction: either up or down\n   */\n  navigate_results(direction) {\n    let page = this.state.page;\n    let pages = this.state.pages;\n    let results = this.state.results;\n    let focused = this.state.focused;\n    let searchterm = this.state.searchterm;\n\n    console.debug(\"QuerySelectWidgetController::navigate_results:focused:\", focused);\n\n    if (direction == \"up\") {\n      if (focused > 0) {\n        this.setState({focused: focused - 1});\n      } else {\n        this.setState({focused: 0});\n        if (page > 1) {\n          this.goto_page(page - 1);\n        }\n      }\n    }\n\n    else if (direction == \"down\") {\n      if (this.state.results.length == 0) {\n        this.search(searchterm);\n      }\n      if (focused < results.length - 1) {\n        this.setState({focused: focused + 1});\n      } else {\n        this.setState({focused: 0});\n        if (page < pages) {\n          this.goto_page(page + 1);\n        }\n      }\n    }\n\n    else if (direction == \"left\") {\n      this.setState({focused: 0});\n      if (page > 0) {\n        this.goto_page(page - 1);\n      }\n    }\n\n    else if (direction == \"right\") {\n      this.setState({focused: 0});\n      if (page < pages) {\n        this.goto_page(page + 1);\n      }\n    }\n  }\n\n  /*\n   * Toggle loading state\n   *\n   * @param {Boolean} toggle: The loading state to set\n   * @returns {Boolean} toggle: The current loading state\n   */\n  toggle_loading(toggle) {\n    if (toggle == null) {\n      toggle = false;\n    }\n    this.setState({\n      loading: toggle\n    });\n    return toggle;\n  }\n\n  /*\n   * Set results data coming from `senaite.jsonapi`\n   *\n   * @param {Object} data: JSON search result object returned from `senaite.jsonapi`\n   */\n  set_results_data(data) {\n    data = data || {};\n    let items = data.items || [];\n\n    // Mapping of value -> JSON API result item\n    //\n    // NOTE: This is only used for UID reference field to render a friendly name\n    //       for stored UIDs when the edit form is initially rendered\n    let records = Object.assign(this.state.records, {})\n    for (let item of items) {\n      let value = item[this.state.value_key];\n      records[value] = item;\n    }\n\n    this.setState({\n      records: records,\n      results: items,\n      count: data.count || 0,\n      page: data.page || 1,\n      pages: data.pages || 1,\n      next_url: data.next || null,\n      prev_url: data.previous || null,\n    });\n  }\n\n  /*\n   * Clear values and results\n   */\n  flush() {\n    this.clear_results();\n    this.setState({\n      values: [],\n      loading: false,\n    })\n  }\n\n  /*\n   * Fetch the records for the given values with an explicit value search\n   *\n   * NOTE: This will make a new catalog search using the value_query_index to fetch the items from the server!\n   */\n  sync_records(values) {\n    values = values || this.state.values;\n    // get the current records\n    let records = Object.assign(this.state.records, {})\n    // check which values have no records\n    let missing = values.filter((value) => !(value in records))\n    // nothing to do if we have records for all values\n    if (missing.length == 0) return;\n    // prepare a query for the missing values\n    let index = this.state.value_query_index || \"UID\";\n    let value_query = {\n      complete: this.state.complete,\n      // we pass the column names to the search endpoint to provide the right data of the brain/object\n      column_names: this.get_column_names(),\n      field_name: this.state.name,\n    };\n    // Query the values only w/o any other filters\n    value_query[index] = missing;\n    let promise = this.api.search(this.state.catalog, value_query);\n    this.toggle_loading(true);\n    promise.then((data) => {\n      let items = data.items || [];\n      for (let item of items) {\n        let value = item[this.state.value_key];\n        records[value] = item;\n      }\n      this.toggle_loading(false);\n      this.setState({records: records});\n    });\n    return promise;\n  }\n\n  /*\n   * Clear results from the state\n   */\n  clear_results() {\n    this.setState({\n      results: [],\n      count: 0,\n      page: 1,\n      pages: 1,\n      next_url: null,\n      prev_url: null,\n      b_start: 1,\n      focused: 0,\n      searchterm: \"\"\n    });\n  }\n\n  /*\n   * ReactJS event handler for keydown event\n   */\n  on_keydown(event){\n    // clear results when ESC key is pressed\n    if(event.keyCode === 27) {\n      this.clear_results();\n    }\n  }\n\n  /*\n   * ReactJS event handler for click events\n   */\n  on_click(event) {\n    // clear results when clicked outside of the widget\n    let widget = this.props.root_el;\n    let target = event.target;\n    if (!widget.contains(target)) {\n      this.clear_results();\n    }\n  }\n\n  /*\n   * ReactJS event handler for flush events\n   */\n  on_flush(event) {\n    this.flush();\n  }\n\n  /*\n   * ReactJS event handler for sync events\n   */\n  on_sync(event) {\n    let values = event.detail.values || [];\n    let is_array = {}.toString.call( values ) === '[object Array]';\n    if (!is_array) {\n      values = values.split(\"/n\");\n    }\n    this.sync_records(values);\n  }\n\n  render() {\n    return (\n        <div id={this.state.id} className={this.props.root_class}>\n          <SelectedValues\n            className=\"queryselectwidget-selected-values\"\n            values={this.state.values}\n            records={this.state.records}\n            display_template={this.state.display_template}\n            name={this.state.name}\n            on_deselect={this.deselect}\n            set_values={this.set_values}\n          />\n          {this.show_search_field() &&\n          <SearchField\n            className=\"queryselectwidget-search-field\"\n            name=\"query-select-search\"\n            loading={this.state.loading}\n            disabled={this.is_disabled()}\n            on_search={this.search}\n            on_clear={this.clear_results}\n            on_focus={this.search}\n            on_arrow_key={this.navigate_results}\n            on_enter={this.select_focused}\n            on_blur={this.select_focused}\n          />}\n          <SearchResults\n            className=\"queryselectwidget-results-container position-fixed shadow-lg border border-light rounded-lg bg-white mt-2 p-1\"\n            columns={this.get_columns()}\n            values={this.state.values}\n            value_key={this.state.value_key}\n            searchterm={this.state.searchterm}\n            width={this.state.results_table_width}\n            results={this.state.results}\n            loading={this.state.loading}\n            focused={this.state.focused}\n            count={this.state.count}\n            page={this.state.page}\n            pages={this.state.pages}\n            padding={this.state.padding}\n            next_url={this.state.next_url}\n            prev_url={this.state.prev_url}\n            on_select={this.select}\n            on_page={this.goto_page}\n            on_clear={this.clear_results}\n            on_mouse_over={this.focus_row}\n          />\n        </div>\n    );\n  }\n}\n\nexport default QuerySelectWidgetController;\n","class AddressWidgetAPI {\n\n  constructor(props) {\n    console.debug(\"AddressWidgetAPI::constructor\")\n    this.portal_url = props.portal_url;\n    this.on_api_error = props.on_api_error || function(response) {};\n    return this;\n  }\n\n  get_url(endpoint) {\n    return `${this.portal_url}/${endpoint}`\n  }\n\n  /*\n   * Fetch JSON resource from the server\n   *\n   * @param {string} endpoint\n   * @param {object} options\n   * @returns {Promise}\n   */\n  get_json(endpoint, options) {\n    var data, init, method, on_api_error, request, url;\n    if (options == null) {\n      options = {};\n    }\n    method = options.method || \"POST\";\n    data = JSON.stringify(options.data) || \"{}\";\n    on_api_error = this.on_api_error;\n    url = this.get_url(endpoint);\n    init = {\n      method: method,\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"X-CSRF-TOKEN\": this.get_csrf_token()\n      },\n      body: method === \"POST\" ? data : null,\n      credentials: \"include\"\n    };\n    console.info(\"AddressWidgetAPI::fetch:endpoint=\" + endpoint + \" init=\", init);\n    request = new Request(url, init);\n    return fetch(request).then(function(response) {\n      if (!response.ok) {\n        return Promise.reject(response);\n      }\n      return response;\n    }).then(function(response) {\n      return response.json();\n    }).catch(function(response) {\n      on_api_error(response);\n      return response;\n    });\n  }\n\n  fetch_subdivisions(parent) {\n    let url = `geo_subdivisions`\n    console.debug(\"AddressWidgetAPI::fetch_subdivisions:url=\", url);\n    let options = {\n      method: \"POST\",\n      data: {\n        \"parent\": parent,\n      }\n    }\n    return this.get_json(url, options)\n  }\n\n  /*\n   * Get the plone.protect CSRF token\n   */\n  get_csrf_token() {\n    return document.querySelector(\"#protect-script\").dataset.token;\n  };\n\n}\n\nexport default AddressWidgetAPI;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\n\n\nclass LocationSelector extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render_options() {\n    let options = [];\n    let locations = this.props.locations;\n    options.push(\n      <option value=''></option>\n    );\n    if (Array.isArray(locations)) {\n      for (let location of locations) {\n        options.push(\n          <option value={location}>{location}</option>\n        )\n      }\n    }\n    return options;\n  }\n\n  render() {\n    return (\n      <select\n        id={this.props.id}\n        name={this.props.name}\n        value={this.props.value}\n        onChange={this.props.onChange}>\n        {this.render_options()}\n      </select>\n    );\n  }\n}\n\nexport default LocationSelector;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport LocationSelector from \"./LocationSelector.js\";\n\n\nclass AddressField extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  is_location_selector() {\n    return Array.isArray(this.props.locations);\n  }\n\n  is_visible() {\n    let visible = true;\n    if (this.is_location_selector()) {\n      visible = this.props.locations.length > 0;\n    }\n    return visible;\n  }\n\n  render_element() {\n    if (this.is_location_selector()) {\n      return (\n        <LocationSelector\n          id={this.props.id}\n          name={this.props.name}\n          value={this.props.value}\n          locations={this.props.locations}\n          onChange={this.props.onChange} />\n      )\n    } else {\n      return (\n        <input type=\"text\"\n          id={this.props.id}\n          name={this.props.name}\n          value={this.props.value}\n          onChange={this.props.onChange} />\n      )\n    }\n  }\n\n  render() {\n    if (!this.is_visible()) {\n      return (\n        <input type=\"hidden\"\n          id={this.props.id}\n          name={this.props.name}\n          value={this.props.value} />\n      )\n    }\n    return (\n      <div class=\"form-group form-row mb-2\">\n        <div class=\"col input-group input-group-sm\">\n          <div class=\"input-group-prepend\">\n            <label class=\"input-group-text\"\n              for={this.props.id}>\n              {this.props.label}\n            </label>\n          </div>\n          {this.render_element()}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default AddressField;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport AddressField from \"./AddressField.js\";\n\n\nclass Address extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      country: props.country,\n      subdivision1: props.subdivision1,\n      subdivision2: props.subdivision2,\n      city: props.city,\n      zip: props.zip,\n      address: props.address,\n      address_type: props.address_type,\n    }\n\n    // Event handlers\n    this.on_country_change = this.on_country_change.bind(this);\n    this.on_subdivision1_change = this.on_subdivision1_change.bind(this);\n    this.on_subdivision2_change = this.on_subdivision2_change.bind(this);\n    this.on_city_change = this.on_city_change.bind(this);\n    this.on_zip_change = this.on_zip_change.bind(this);\n    this.on_address_change = this.on_address_change.bind(this);\n  }\n\n  force_array(value) {\n    if (!Array.isArray(value)) {\n      value = [];\n    }\n    return value;\n  }\n\n  /**\n   * Returns the list of first-level subdivisions of the current country,\n   * sorted alphabetically\n   */\n  get_subdivisions1() {\n    let country = this.state.country;\n    return this.force_array(this.props.subdivisions1[country]);\n  }\n\n  /**\n   * Returns the list of subdivisions of the current first-level subdivision,\n   * sorted sorted alphabetically\n   */\n  get_subdivisions2() {\n    let subdivision1 = this.state.subdivision1;\n    return this.force_array(this.props.subdivisions2[subdivision1]);\n  }\n\n  get_label(key) {\n    let country = this.state.country;\n    let label = this.props.labels[country];\n    if (label != null && label.constructor == Object && key in label) {\n      label = label[key];\n    } else {\n      label = this.props.labels[key];\n    }\n    return label;\n  }\n\n  /** Event triggered when the value for Country selector changes. Updates the\n   * selector of subdivisions (e.g. states) with the list of top-level\n   * subdivisions for the selected country\n   */\n  on_country_change(event) {\n    let value = event.currentTarget.value;\n    console.debug(`Address::on_country_change: ${value}`);\n    if (this.props.on_country_change) {\n      this.props.on_country_change(value);\n    }\n    this.setState({\n      country: value,\n      subdivision1: \"\",\n      subdivision2: \"\",\n    });\n  }\n\n  /** Event triggered when the value for the Country first-level subdivision\n   * (e.g. state) selector changes. Updates the selector of subdivisions (e.g.\n   * districts) for the selected subdivision and country\n   */\n  on_subdivision1_change(event) {\n    let value = event.currentTarget.value;\n    console.debug(`Address::on_subdivision1_change: ${value}`);\n    if (this.props.on_subdivision1_change) {\n      let country = this.state.country\n      this.props.on_subdivision1_change(country, value);\n    }\n    this.setState({\n      subdivision1: value,\n      subdivision2: \"\",\n    });\n  }\n\n  /** Event triggered when the value for the second-level subdivision (e.g.\n   * district) selector changes\n   */\n  on_subdivision2_change(event) {\n    let value = event.currentTarget.value;\n    console.debug(`Address::on_subdivision2_change: ${value}`);\n    if (this.props.on_subdivision2_change) {\n      this.props.on_subdivision2_change(value);\n    }\n    this.setState({subdivision2: value});\n  }\n\n  /** Event triggered when the value for the address field changes\n   */\n  on_address_change(event) {\n    let value = event.currentTarget.value;\n    this.setState({address: value});\n  }\n\n  /** Event triggered when the value for the zip field changes\n   */\n  on_zip_change(event) {\n    let value = event.currentTarget.value;\n    this.setState({zip: value});\n  }\n\n  /** Event triggered when the value for the city field changes\n   */\n  on_city_change(event) {\n    let value = event.currentTarget.value;\n    this.setState({city: value});\n  }\n\n  get_input_id(subfield) {\n    let id = this.props.id;\n    let index = this.props.index;\n    return `${id}-${index}-${subfield}`\n  }\n\n  get_input_name(subfield) {\n    let name = this.props.name;\n    let index = this.props.index;\n    return `${name}.${index}.${subfield}`\n  }\n\n  render() {\n    return (\n      <div>\n          <AddressField\n            id={this.get_input_id(\"country\")}\n            name={this.get_input_name(\"country\")}\n            label={this.props.labels.country}\n            value={this.state.country}\n            locations={this.props.countries}\n            onChange={this.on_country_change} />\n\n          <AddressField\n            id={this.get_input_id(\"subdivision1\")}\n            name={this.get_input_name(\"subdivision1\")}\n            label={this.get_label(\"subdivision1\")}\n            value={this.state.subdivision1}\n            locations={this.get_subdivisions1()}\n            onChange={this.on_subdivision1_change} />\n\n          <AddressField\n            id={this.get_input_id(\"subdivision2\")}\n            name={this.get_input_name(\"subdivision2\")}\n            label={this.get_label(\"subdivision2\")}\n            value={this.state.subdivision2}\n            locations={this.get_subdivisions2()}\n            onChange={this.on_subdivision2_change} />\n\n          <AddressField\n            id={this.get_input_id(\"city\")}\n            name={this.get_input_name(\"city\")}\n            label={this.props.labels.city}\n            value={this.state.city}\n            onChange={this.on_city_change} />\n\n          <AddressField\n            id={this.get_input_id(\"zip\")}\n            name={this.get_input_name(\"zip\")}\n            label={this.props.labels.zip}\n            value={this.state.zip}\n            onChange={this.on_zip_change} />\n\n          <AddressField\n            id={this.get_input_id(\"address\")}\n            name={this.get_input_name(\"address\")}\n            label={this.props.labels.address}\n            value={this.state.address}\n            onChange={this.on_address_change} />\n\n          <input type=\"hidden\"\n            id={this.get_input_id(\"type\")}\n            name={this.get_input_name(\"type\")}\n            value={this.state.address_type} />\n\n      </div>\n    );\n  }\n\n}\n\nexport default Address;","import React from \"react\"\nimport ReactDOM from \"react-dom\"\n\nimport AddressWidgetAPI from \"./api.js\"\nimport Address from \"./components/Address.js\"\n\n\nclass AddressWidgetController extends React.Component {\n\n  constructor(props) {\n    super(props);\n\n    // Root input HTML element\n    let el = props.root_el;\n\n    this.state = {};\n\n    // Data keys located at the root element\n    // -> initial values are set from the widget class\n    const data_keys = [\n      \"id\",\n      \"name\",\n      \"items\",\n      \"portal_url\",\n      \"labels\",\n      \"countries\",\n      \"subdivisions1\",\n      \"subdivisions2\",\n    ];\n\n    // Query data keys and set state with parsed JSON value\n    for (let key of data_keys) {\n      let value = el.dataset[key];\n      this.state[key] = this.parse_json(value);\n    }\n\n    // Initialize communication API with the API URL\n    this.api = new AddressWidgetAPI({\n      portal_url: this.state.portal_url,\n    });\n\n    // Bind callbacks to current context\n    this.on_country_change = this.on_country_change.bind(this);\n    this.on_subdivision1_change = this.on_subdivision1_change.bind(this);\n\n    return this;\n  }\n\n  parse_json(value) {\n    try {\n      return JSON.parse(value);\n    } catch (error) {\n      console.error(`Could not parse \"${value}\" to JSON`);\n    }\n  }\n\n  /**\n   * Event triggered when the user selects a country. Function fetches and\n   * updates the geo mapping with the first level subdivisions for the selected\n   * country if are not up-to-date yet. It also updates the label for the first\n   * level subdivision in accordance.\n   */\n  on_country_change(country) {\n    console.debug(`widget::on_country_change: ${country}`);\n    let self = this;\n    let promise = this.api.fetch_subdivisions(country);\n    promise.then(function(data){\n\n      // Update the label with the type of 1st-level subdivisions\n      let labels = {...self.state.labels};\n      if (data.length > 0) {\n        labels[country][\"subdivision1\"] = data[0].type;\n      }\n\n      // Create a copy instead of modifying the existing dict from state var\n      let subdivisions = {...self.state.subdivisions1};\n\n      // Only interested in names, sorted alphabetically\n      subdivisions[country] = data.map((x) => x.name).sort();\n\n      // Update current state with the changes\n      self.setState({\n        subdivisions1: subdivisions,\n        labels: labels,\n      });\n    });\n    return promise;\n  }\n\n  /**\n   * Event triggered when the user selects a first-level subdivision of a\n   * country. Function fetches and updates the geo mapping with the second level\n   * subdivisions for the selected subdivision if are not up-to-date. It also\n   * updates the label for the second level subdivision in accordance.\n   */\n  on_subdivision1_change(country, subdivision) {\n    console.debug(`widget::on_subdivision1_change: ${country}, ${subdivision}`);\n    let self = this;\n    let promise = this.api.fetch_subdivisions(subdivision);\n    promise.then(function(data){\n\n      // Update the label with the type of 1st-level subdivisions\n      let labels = {...self.state.labels};\n      if (data.length > 0) {\n        labels[country][\"subdivision2\"] = data[0].type;\n      }\n\n      // Create a copy instead of modifying the existing dict from state var\n      let subdivisions = {...self.state.subdivisions2};\n\n      // Only interested in names, sorted alphabetically\n      subdivisions[subdivision] = data.map((x) => x.name).sort();\n\n      // Update current state with the changes\n      self.setState({\n        subdivisions2: subdivisions,\n        labels: labels,\n      });\n    });\n    return promise;\n  }\n\n  render_items() {\n    let html_items = [];\n    let items = this.state.items;\n    for (const [index, item] of items.entries()) {\n      let section_title = \"\";\n      if (items.length > 1) {\n        // Only render the title if more than one address\n        section_title = (\n          <strong>{this.state.labels[item.type]}</strong>\n        )\n      }\n\n      html_items.push(\n        <div class=\"mb-2 pt-2\">\n          {section_title}\n          <Address\n            id={this.state.id}\n            name={this.state.name}\n            index={index}\n            address_type={item.type}\n            country={item.country}\n            subdivision1={item.subdivision1}\n            subdivision2={item.subdivision2}\n            city={item.city}\n            zip={item.zip}\n            address={item.address}\n            labels={this.state.labels}\n            countries={this.state.countries}\n            subdivisions1={this.state.subdivisions1}\n            subdivisions2={this.state.subdivisions2}\n            on_country_change={this.on_country_change}\n            on_subdivision1_change={this.on_subdivision1_change}\n          />\n        </div>\n      );\n    }\n    return html_items;\n  }\n\n  render() {\n    return (\n        <div className=\"addresswidget\">\n          {this.render_items()}\n        </div>\n    );\n  }\n}\n\nexport default AddressWidgetController;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport tinymce from \"tinymce\";\n\nimport QuerySelectWidgetController from \"./widgets/queryselect/widget.js\"\nimport AddressWidgetController from \"./widgets/addresswidget/widget.js\"\nimport intlTelInput from \"intl-tel-input\";\nimport \"intl-tel-input/build/css/intlTelInput.css\";\n\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n  console.info(\"*** SENAITE CORE WIDGETS JS LOADED ***\");\n\n  // TinyMCE\n  let wysiwig_elements = [\n    \"textarea.mce_editable\",\n    \"div.ArchetypesRichWidget textarea\",\n    \"textarea[name='form.widgets.IRichTextBehavior.text']\",\n    \"textarea.richTextWidget\",\n  ]\n  tinymce.init({\n    height: 300,\n    paste_data_images: true,\n    selector: wysiwig_elements.join(\",\"),\n    plugins: [\"paste\", \"link\", \"fullscreen\", \"table\", \"code\"],\n    // NOTE: CSS file must match configuration of entry point in webpack.config.js\n    content_css : \"/++plone++senaite.core.static/bundles/senaite.core.css\",\n  })\n\n  // UIDReferenceWidget\n  let ref_widgets = document.getElementsByClassName(\"senaite-uidreference-widget-input\");\n  for (let widget of ref_widgets) {\n    ReactDOM.render(<QuerySelectWidgetController root_class=\"uidreferencefield\" root_el={widget} />, widget);\n  }\n\n  // QuerySelectWidget\n  let queryselect_widgets = document.getElementsByClassName(\"senaite-queryselect-widget-input\");\n  for (let widget of queryselect_widgets) {\n    ReactDOM.render(<QuerySelectWidgetController root_class=\"queryselectfield\" root_el={widget} />, widget);\n  }\n\n  // AddressWidget\n  let address_widgets = document.getElementsByClassName(\"senaite-address-widget-input\");\n  for (let widget of address_widgets) {\n    ReactDOM.render(<AddressWidgetController root_el={widget} />, widget);\n  }\n\n  // PhoneWidget\n  // https://github.com/jackocnr/intl-tel-input#readme\n  let phone_widgets = document.getElementsByClassName(\"senaite-phone-widget-input\");\n  let error_codes = [\"Invalid number\", \"Invalid country code\", \"Too short\", \"Too long\", \"Invalid number\"];\n  let init_phone_input = (el) => {\n    let id = el.dataset.intlTelInputId;\n    let initial_country = el.dataset.initial_country;\n    let preferred_countries = JSON.parse(el.dataset.preferred_countries);\n    let iti = intlTelInput(el, {\n      initialCountry: initial_country,\n      preferredCountries: preferred_countries,\n      // avoid that the dropdown is cropped in records widget\n      dropdownContainer: document.body,\n      // https://github.com/jackocnr/intl-tel-input#utilities-script\n      utilsScript: \"++plone++senaite.core.static/modules/intl-tel-input/js/utils.js\"\n    });\n    // add event handler only once\n    if (id === undefined) {\n      el.addEventListener(\"blur\", () => {\n        // validation\n        let valid = iti.isValidNumber();\n        let number = iti.getNumber();\n        let field = el.closest(\".field\");\n        if (valid) {\n          field.classList.remove(\"error\");\n          field.title = \"\";\n        } else {\n          field.classList.add(\"error\");\n          let error_code = iti.getValidationError();\n          let error_msg = error_codes[error_code];\n          field.title = error_msg;\n        }\n        // always set the number (even if validation failed!)\n        let name = el.dataset.name;\n        let hidden = document.querySelector(\"input[name='\" + name + \"']\");\n        hidden.value = number;\n      });\n    }\n  }\n  // initialize all phone widgets\n  for (let widget of phone_widgets) {\n    init_phone_input(widget);\n  }\n  // dynamically initialize new phone widgets when used in datagrid fields\n  document.body.addEventListener(\"datagrid:row_added\", (event) => {\n    let row = event.detail.row;\n    let input = row.querySelector(\".senaite-phone-widget-input\");\n    if(input) {\n      init_phone_input(input);\n    }\n  });\n\n});\n"],"names":["factory","undefined","allCountries","i","length","c","name","iso2","dialCode","priority","areaCodes","_defineProperties","target","props","descriptor","enumerable","configurable","writable","Object","defineProperty","key","intlTelInputGlobals","getInstance","input","id","getAttribute","window","instances","documentReady","document","readyState","defaults","allowDropdown","autoHideDialCode","autoPlaceholder","customContainer","customPlaceholder","dropdownContainer","excludeCountries","formatOnDisplay","geoIpLookup","hiddenInput","initialCountry","localizedCountries","nationalMode","onlyCountries","placeholderNumberType","preferredCountries","separateDialCode","utilsScript","regionlessNanpNumbers","forEachProp","obj","callback","keys","forEachInstance","method","Iti","options","_this","this","instance","Constructor","TypeError","_classCallCheck","telInput","activeItem","highlightedItem","customOptions","value","hasOwnProperty","hadInitialPlaceholder","Boolean","protoProps","_this2","isMobile","test","navigator","userAgent","body","classList","add","Promise","autoCountryPromise","resolve","reject","resolveAutoCountryPromise","rejectAutoCountryPromise","utilsScriptPromise","resolveUtilsScriptPromise","rejectUtilsScriptPromise","promise","all","selectedCountryData","_processCountryData","_generateMarkup","_setInitialState","_initListeners","_initRequests","_processAllCountries","_processCountryCodes","_processPreferredCountries","_translateCountriesByLocale","countries","sort","_countryNameSort","countryCode","countryCodeMaxLen","countryCodes","index","lowerCaseOnlyCountries","map","country","toLowerCase","filter","indexOf","lowerCaseExcludeCountries","iso","a","b","localeCompare","dialCodes","_addCountryCode","_i","_c","rootCountryCode","j","areaCode","k","partialDialCode","substr","countryData","_getCountryData","push","attrs","container","el","createElement","setAttribute","appendChild","hasAttribute","form","parentClass","wrapper","_createEl","parentNode","insertBefore","flagsContainer","selectedFlag","role","concat","selectedFlagInner","selectedDialCode","dropdownArrow","countryList","_appendListItems","dropdown","hiddenInputName","lastIndexOf","type","className","preferred","tmp","idSuffix","insertAdjacentHTML","attributeValue","inputValue","val","charAt","_getDialCode","isRegionlessNanp","_isRegionlessNanp","_this$options","_updateFlagFromNumber","_setFlag","defaultCountry","_updateValFromNumber","_initKeyListeners","_initBlurListeners","_initDropdownListeners","_initHiddenInputListener","_this3","_handleHiddenInputSubmit","getNumber","addEventListener","tagName","_this4","_handleLabelClick","e","contains","focus","preventDefault","label","_getClosestLabel","_handleClickSelectedFlag","disabled","readOnly","_showDropdown","_handleFlagsContainerKeydown","stopPropagation","_closeDropdown","_this5","intlTelInputUtils","loadUtils","_loadAutoCountry","autoCountry","handleAutoCountry","startedLoadingAutoCountry","setTimeout","_this6","_handleKeyupEvent","_triggerCountryChange","_handleClipboardEvent","number","max","_this7","_handleSubmitOrBlurEvent","_removeEmptyDialCode","numeric","_getNumeric","s","replace","createEvent","initEvent","dispatchEvent","remove","_setDropdownPosition","_highlightListItem","_scrollTo","_bindDropdownListeners","_trigger","shouldHaveClass","_this8","pos","getBoundingClientRect","windowTop","pageYOffset","documentElement","scrollTop","inputTop","top","dropdownHeight","offsetHeight","dropdownFitsBelow","innerHeight","dropdownFitsAbove","_toggleClass","extraTop","style","left","scrollLeft","_handleWindowScroll","_this9","_handleMouseoverCountryList","listItem","_getClosestListItem","_handleClickCountryList","_selectListItem","isOpening","_handleClickOffToClose","query","queryTimer","_handleKeydownOnDropdown","_handleUpDownKey","_handleEnterKey","clearTimeout","_searchForCountry","next","previousElementSibling","nextElementSibling","_startsWith","querySelector","originalNumber","useNational","_intlTelInputUtils$nu","numberFormat","NATIONAL","INTERNATIONAL","format","formatNumber","_beforeSetNumber","isNanp","alreadySelected","shouldFocus","prevItem","ignoreOnlyCountriesOption","allowFail","Error","prevCountry","title","innerHTML","selectedFlagWidth","offsetWidth","_getHiddenSelectedFlagWidth","paddingLeft","_updatePlaceholder","nextItem","containerClone","cloneNode","visibility","flagsContainerClone","selectedFlagClone","width","removeChild","shouldSetPlaceholder","numberType","placeholder","getExampleNumber","flagChanged","_updateDialCode","len","setSelectionRange","removeEventListener","element","middle","containerHeight","containerTop","containerBottom","elementHeight","elementTop","elementBottom","newScrollTop","middleOffset","heightDifference","newDialCodeBare","hasSelectedListItem","newNumber","inputVal","newDialCode","prevDialCode","includeAreaCode","numericChars","isNaN","parseInt","trim","numericVal","start","_cap","setCountry","removeAttribute","getExtension","_getFullNumber","getNumberType","getValidationError","isValidNumber","originalCountryCode","prototype","getCountryData","injectScript","path","handleSuccess","handleFailure","script","onload","onerror","async","src","startedLoadingUtilsScript","version","iti","_init","module","exports","intlTelInput","typeOf$1","x","t","Array","isPrototypeOf","constructor","String","eq$2","f","eq","eqString","y","eqArray","eqa","eqRecord","kx","ky","compareFn","contramap","xs","slice","call","sort$1","eqSortedArray","q","eqAny","tx","isEquatableType","isType$1","isSimpleType","eq$1","isString$1","isObject","isArray$1","isNull","isBoolean","isUndefined","isNullable","isNonNullable","isFunction","isNumber","noop","compose","fa","fb","args","arguments","apply","compose1","fbc","fab","constant","identity","tripleEquals","curry","fn","initialArgs","restArgs","not","never","always","none","NONE","thunk","fold","n","_s","isSome","isNone","getOr","getOrThunk","getOrDie","msg","getOrNull","getOrUndefined","or","orThunk","each","bind","exists","forall","toArray","toString","some","constant_a","self","me","Optional","from","nativeSlice","nativeIndexOf","nativePush","rawIndexOf","ts","contains$3","pred","map$3","r","each$k","eachr","partition","pass","fail","filter$4","foldr","acc","foldl","findUntil$1","until","find$3","findIndex$2","flatten","reverse","difference","a1","a2","get$a","head","last$2","findMap","arr","hasOwnProperty$1","each$j","map$2","tupleMap","v","tuple","objAcc","internalFilter","onTrue","onFalse","filter$3","get$9","has$2","hasNonNullableKey","isArray","each$i","o","cb","l","map$1","array","out","item","filter$2","indexOf$1","reduce","collection","iteratee","accumulator","thisArg","findIndex$1","predicate","last$1","__assign","assign","p","__spreadArray","to","pack","ar","cached","called","unknown$2","nu$4","major","minor","Version","nu","detect","versionRegexes","agent","cleanedAgent","regexes","firstMatch","group","Number","find$2","unknown","detect$2","candidates","candidate","search","contains$2","str","startsWith","prefix","checkRange","blank","trim$4","lTrim","rTrim","isNotEmpty","isEmpty$3","normalVersionRegex","checkContains","uastring","browsers","brand","oses","PlatformInfo","edge","chrome","opera","firefox","safari","nu$3","info","current","isBrowser","isEdge","isChrome","isIE","isOpera","isFirefox","isSafari","Browser","windows","android","linux","solaris","freebsd","chromeos","nu$2","isOS","isWindows","isiOS","isAndroid","isOSX","isLinux","isSolaris","isFreeBSD","isChromeOS","OperatingSystem","mediaMatch","matchMedia","matches","platform$2","userAgentDataOpt","browser","userAgentData","brands","uaBrand","lcBrand","_a","detectBrowser$1","detectBrowser","os","detectOs","deviceType","isiPad","isiPhone","isTouch","isTablet","isPhone","iOSwebview","isDesktop","isWebView","DeviceType","PlatformDetection","platform$1","browser$4","webkit","fileApi","URL","createObjectURL","windowsPhone","Env","ie","gecko","mac","iOS","contentEditable","transparentSrc","caretAfter","range","getSelection","documentMode","ceFalse","cacheSuffix","experimentalShadowDom","canHaveCSP","desktop","whiteSpaceRegExp$2","trim$3","is$3","walk$3","Tools","is","makeMap","items","delim","split","grep","inArray","hasOwn","extend","exts","ext","name_1","create","root","sp","scn","de","cn","exec","match","ns","createNS","onCreate","parent","static","walk","explode","d","_addCacheSuffix","url","fromDom$2","node","dom","SugarElement","html","scope","div","hasChildNodes","childNodes","tag","text","createTextNode","recurse","cur","is$2","selector","nodeType","elem","msMatchesSelector","webkitMatchesSelector","mozMatchesSelector","bypassSelector","childElementCount","e1","e2","contains$1","compareDocumentPosition","Node","DOCUMENT_POSITION_CONTAINED_BY","ieContains","d1","d2","regularContains","Function","nodeName","isType","isElement$6","isText$8","isDocument$2","isDocumentFragment$1","owner$1","ownerDocument","documentOrOwner","dos","defaultView","prevSibling","previousSibling","nextSibling","prevSiblings","nextSiblings","children","child$1","cs","firstChild","lastChild","childNodesCount","isShadowRoot","host","supported","Element","attachShadow","getRootNode","isSupported$1","getStyleContainer","doc","getHead","getShadowHost","before$4","marker","after$3","append$1","prepend","append","elements","empty","textContent","rogue","remove$7","unwrap","children$1","inBody","getShadowRoot","translate","SugarPosition","firstDefinedOrZero","viewport","offsetLeft","offsetTop","box","boxPosition","get$8","_DOC","win","scrollTo","intoView","alignToTop","scrollIntoViewIfNeeded","scrollIntoView","bounds","height","right","bottom","getBounds","_win","scroll","get$7","clientWidth","clientHeight","visualViewport","Math","pageLeft","pageTop","isNodeType","isRestrictedNode","getPrototypeOf","isElement$5","matchNodeNames","names","lowercasedNames","matchStyleValues","values","computed","getComputedStyle","getPropertyValue","attrName","isBogus$2","isTable$3","hasContentEditableState","isTextareaOrInput","isText$7","isComment","isDocument$1","isDocumentFragment","isBr$5","isImg","isContentEditableTrue$4","isContentEditableFalse$b","isTableCell$5","isMedia$2","is$1","lhs","rhs","comparator","lift2","oa","ob","isSupported","rawSet","set$1","setAll$1","get$6","getOpt","remove$6","get$5","property","getUnsafeProperty","getRaw","raw","getAllRaw","css","ruleName","browser$3","firstElement","nodes","hasChild","elm","child","exports$1","module$1","define","require","g","EphoxContactWrapper","u","code","cachedSetTimeout","cachedClearTimeout","process","defaultSetTimout","defaultClearTimeout","runTimeout","fun","currentQueue","queue","draining","queueIndex","cleanUpNextTick","drainQueue","timeout","run","runClearTimeout","Item","nextTick","env","argv","versions","on","addListener","once","off","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","binding","cwd","chdir","dir","umask","setImmediate","setTimeoutFunc","_state","_handled","_value","_deferreds","doResolve","handle","deferred","_immediateFn","onFulfilled","onRejected","ret","newValue","then","finale","_unhandledRejectionFn","Handler","done","reason","ex","prom","remaining","res","race","err","console","_setImmediateFn","_setUnhandledRejectionFn","clearImmediate","immediateIds","nextImmediateId","Timeout","clearFn","_id","_clearFn","setInterval","clearInterval","close","unref","ref","enroll","msecs","_idleTimeoutId","_idleTimeout","unenroll","_unrefActive","active","_onTimeout","promisePolyfill","Global","boltExport","Promise$1","nu$1","baseFn","data","callbacks","get","nCallback","isReady","LazyValue","pure","errorReporter","make","aFutureB","toPromise","anonBind","futureB","toLazy","toCached","cache","Future","value$1","isValue","isError","_opt","_f","_","onValue","mapError","toOptional","error","message","onError","Result","fromOption","opt","Adt","cases","constructors","adt","acase","count","keys$1","argLength","branches","branchKeys","join","reqKey","foldArgs","log","bothErrors","firstError","secondError","bothValues","unite","result","ClosestOrAncestor","ancestor","isRoot","requestAnimationFramePromise","support","Expr","getText","isXML","tokenize","compile","select$1","outermostContext","sortInput","hasDuplicate","setDocument","document$1","docElem","documentIsHTML","rbuggyQSA","rbuggyMatches","ancestor$3","stop","closest$3","ancestor$2","descendant","base","one","closest$2","promiseObj","asap","immediateFn","catch","wrappedSetTimeout","time","wrappedSetInterval","debounce","timer","func","Delay","requestAnimationFrame","requestAnimationFrameFunc","vendors","setEditorTimeout","editor","removed","setEditorInterval","throttle","StyleSheetLoader","documentOrShadowRoot","settings","idCount","loadedStates","edos","maxLoadTime","load","success","failure","link","urlWithSuffix","state","passed","failed","getOrCreateState","status","waitForWebKitLinkLoaded","waitCallback","styleSheets","owner","ownerNode","testCallback","Date","now","startTime","linkElem","rel","contentCssCors","referrerPolicy","loadF","unload","styleContainer","loadAll","urls","futures","asyncValues","asyncValue","parts","unloadAll","_setReferrerPolicy","WeakMap","forElement","referenceElement","rootDom","sl","set","create$8","DomTreeWalker","startNode","rootNode","prev","prev2","shallow","findSibling","findPreviousNode","startName","siblingName","sibling","lazyLookup","lookup","mapToObject","isHeading","isBlock$2","isInline$1","isBr$4","isTextBlock$2","isList","isListItem","isTableSection","isTableCell$4","isWsPreserveElement","nbsp","ZWSP$1","isZwsp","char","trim$2","isElement$4","isText$6","isCaretContainerBlock$1","isCaretContainerInline","isCaretContainer$2","hasContent","isBeforeInline","offset","isAtStart","isAfterInline","isAtEnd","startsWithCaretContainer$1","endsWithCaretContainer$1","showCaretContainerBlock","caretContainer","lastBr","brs","getElementsByTagName","isRangeInCaretContainerBlock","startContainer","isContentEditableTrue$3","isContentEditableFalse$a","isBr$3","isText$5","isInvalidTextElement","isAtomicInline","isTable$1","isCaretContainer$1","isCaretCandidate$3","isNonUiContentEditableFalse","isUnselectable","isEditableCaretCandidate$1","isInEditable","whiteSpaceRegExp$1","isWhitespaceText","isContent$1","rootElement","hasWhitespacePreserveParent","isWhitespace","isNamedAnchor","isBookmark","isBogus$1","isBogusAll","isEmpty$2","skipBogus","targetNode","brCount","walker","isEmptyNode","isInlineContent","isBookmarkNode$2","isSpan","trimNode","currentChildren","isDocument","isKeepElement","prevIsInline","nextIsInline","surroundedByInlineContent","isKeepTextNode","makeMap$3","attrsCharsRegExp","textCharsRegExp","rawCharsRegExp","entityRegExp","asciiMap","baseEntities","reverseEntities","buildEntitiesLookup","radix","chr","entity","fromCharCode","namedEntities","encodeRaw","attr","encodeNumeric","charCodeAt","encodeNamed","entities","Entities","encodeAllRaw","getEncodeFunc","entitiesMap","nameMap","named","decode","innerText","nativeDecode","mapCache","dummyObj","makeMap$2","each$h","extend$5","explode$3","inArray$2","split$1","compileElementMap","mode","styles","toUpperCase","Schema","patternElements","customElementsMap","specialElements","createLookupTable","option","defaultValue","extendWith","schemaItems","globalAttributes","blockContent","phrasingContent","flowContent","html4BlockContent","html4PhrasingContent","schema","attributes","ni","attributesOrder","arrayToMap","addAttrs","schemaItem","caption","table","compileSchema","verify_html","valid_elements","validStyles","valid_styles","invalidStyles","invalid_styles","validClasses","valid_classes","whiteSpaceElementsMap","selfClosingElementsMap","shortEndedElementsMap","boolAttrMap","nonEmptyOrMoveCaretBeforeOnEnter","nonEmptyElementsMap","moveCaretBeforeOnEnterElementsMap","textBlockElementsMap","blockElementsMap","textInlineElementsMap","special","RegExp","patternToRegExp","addValidElements","validElements","ei","ai","al","attrData","elementName","attrType","outputName","globalAttributesOrder","elementRuleRegExp","attrRuleRegExp","hasPatternsRegExp","validElementsArr","paddEmpty","removeEmpty","removeEmptyAttrs","attributesRequired","required","splice","attributesDefault","attributesForced","forcedValue","validValues","attributePatterns","pattern","setValidElements","addCustomElements","customElements","customElementRegExp","text_block_elements","block_elements","rule","inline","cloneName","customRule","elmName","addValidChildren","validChildren","childRuleRegExp","getElementRule","custom_elements","valid_children","extended_valid_elements","dd","dt","li","td","th","tr","tbody","thead","tfoot","legend","area","param","parents","parentsRequired","invalid_elements","getValidStyles","getInvalidStyles","getValidClasses","getBoolAttrs","getBlockElements","getTextBlockElements","getTextInlineElements","getShortEndedElements","getSelfClosingElements","getNonEmptyElements","getMoveCaretBeforeOnEnterElements","getWhiteSpaceElements","getSpecialElements","getCustomElements","isValidChild","isValid","attrPatterns","toHex","hex","Styles","rgbRegExp","urlOrStrRegExp","styleRegExp","trimRightRegExp","encodingLookup","encodingItems","color","parse","isEncoded","urlConverter","url_converter","urlConverterScope","url_converter_scope","compress","suffix","noJoin","canCompress","encode","keepSlashes","decodeSingleHexSequence","escSeq","decodeHexSequences","processUrl","url2","url3","str2","allow_script_urls","scriptUrl","allow_svg_data_urls","lastIndex","border","serialize","serializeStyles","styleList","i_1","styleMap","deprecated","keyLocation","layerX","layerY","returnValue","webkitMovementX","webkitMovementY","keyIdentifier","mozPressure","isNativeEvent","event","Event","normalize$3","originalEvent","fallbackTarget","composedPath","clone$2","srcElement","needsNormalizing","defaultPrevented","isDefaultPrevented","cancelBubble","isPropagationStopped","stopImmediatePropagation","isImmediatePropagationStopped","hasIsDefaultPrevented","mouseEventRe","addEvent","capture","attachEvent","removeEvent","detachEvent","fix","isMouseEvent","pageX","clientX","eventDoc","mouseEvent","clientLeft","pageY","clientY","clientTop","metaKey","bindOnReady","eventUtils","domLoaded","readyHandler","EventUtils","events","expando","hasMouseEnterLeave","hasFocusIn","callbackList","fakeName","nativeHandler","defaultNativeHandler","evt","executeHandlers","namesList","mouseEnterLeave","currentTarget","related","relatedTarget","unbind","ci","eventMap","fire","parentWindow","clean","destroy","cancel","preferredDoc","dirruns","classCache","createCache","tokenCache","compilerCache","sortOrder","strundefined","MAX_NEGATIVE","pop","push_native","push$1","slice$1","whitespace","identifier","pseudos","rtrim","rcomma","rcombinators","rattributeQuotes","rpseudo","ridentifier","matchExpr","ID","CLASS","TAG","ATTR","PSEUDO","CHILD","bool","needsContext","rinputs","rheader","rnative","rquickExpr$1","rsibling","rescape","runescape","funescape","escaped","escapedWhitespace","high","els","Sizzle","context","results","seed","m","groups","old","nid","newContext","newSelector","getElementById","getElementsByClassName","qsa","toSelector","testContext","querySelectorAll","qsaError","cacheLength","shift","markFunction","siblingCheck","diff","sourceIndex","createPositionalPseudo","argument","matchIndexes","setFilters","tokens","addCombinator","matcher","combinator","checkNonElements","doneName","first","xml","oldCache","outerCache","newCache","elementMatcher","matchers","condense","unmatched","newUnmatched","mapped","setMatcher","preFilter","postFilter","postFinder","postSelector","temp","preMap","postMap","preexisting","elems","contexts","multipleContexts","matcherIn","matcherOut","matcherFromTokens","checkContext","leadingRelative","relative","implicitRelative","matchContext","matchAnyContext","hasCompare","getTop","getById","find","attrId","disconnectedMatch","adown","bup","compare","sortDetached","aup","ap","bp","unshift","expr","matchesSelector","attrHandle","getAttributeNode","specified","uniqueSort","duplicates","detectDuplicates","sortStable","nodeValue","selectors","createPseudo","excess","unquoted","nodeNameSelector","operator","check","what","last","simple","forward","ofType","nodeIndex","useCache","pseudo","idx","matched","has","lang","elemLang","hash","location","activeElement","hasFocus","href","tabIndex","enabled","checked","selected","selectedIndex","header","button","even","odd","lt","gt","nth","createInputPseudo","createButtonPseudo","filters","parseOnly","soFar","preFilters","setMatchers","elementMatchers","bySet","byElement","superMatcher","outermost","matchedCount","setMatched","contextBackup","dirrunsUnique","random","matcherFromGroupMatchers","select","token","compiled","rquickExpr","Event$1","skipUniques","isDefined","isString","createFragment$1","fragDoc","frag","createDocumentFragment","domManipulate","targetNodes","sourceItem","getElementDocument","DomQuery","makeArray","hasClass","wrap$2","lastParent","newWrapper","numericCssMap","booleanMap","propFix","for","class","readonly","cssFix","float","attrHooks","cssHooks","DomQueryConstructor","init","whiteSpaceRegExp","trim$1","each$g","grep$2","unique","hook","prop","removeAttr","camel","dashed","removeProperty","currentStyle","before","after","appendTo","prependTo","replaceWith","content","wrap","wrapAll","wrapInner","contents","clone","addClass","toggleClass","removeClass","classState","existingClassName","trigger","show","hide","closest","docElm","object","sibling$1","firstSibling","contentDocument","contentWindow","wrappedResult","parentsUntil","nextUntil","prevUntil","overrideDefaults","sub","each$f","grep$1","simpleSelectorRe","updateInternalStyleAttr","$elm","rawValue","findNodeIndex","normalized","lastNodeType","DOMUtils","addedStyles","files","counter","styleSheetLoader","boundEvents","ownEvents","$","getRoot","$$","getAttrib","defaultVal","getAttribs","setAttrib","originalValue","onSetAttrib","attrElm","attrValue","root_element","getPos$1","rootElm","offsetParent","castOffsetParent","bodyTop","captionTop","captionHeight","getTableCaptionDeltaY","getPos","getStyle","getSize","w","h","elms","getParents","collect","selectorVal","_findSib","setAttribs","setHTML","canHaveHTML","parentElm","newElm","keepChildren","$node","cls","oldElm","replaceChild","isNonEmptyElement","createRng","createRange","rv","getContentEditable","stdMode","boxModel","isBlock","deep","clone_1","getViewPort","argWin","vp","getRect","size","getParent","getNext","getPrev","createHTML","outHtml","createFragment","setStyle","update_styles","setStyles","stylesArg","removeAllAttribs","removeAttributeNode","parseStyle","cssText","serializeStyle","addStyle","styleElm","DOM","styleSheet","loadCSS","isHidden","uniqueId","getOuterHTML","outerHTML","setOuterHTML","insertAfter","reference","referenceNode","rename","attrNode","findCommonAncestor","pe","ps","rgbVal","isEmpty","bogusVal","splitElm","replacementElm","beforeFragment","afterFragment","setStart","setEnd","extractContents","getContentEditableParent","isChildOf","dumpRng","startOffset","endContainer","endOffset","getContext","keepValues","keep_values","keepUrlHook","setupAttrHooks","DOM$a","each$e","ScriptLoader","states","scriptLoadedCallbacks","queueLoadedCallbacks","loading","loadScript","cleanup","isDone","markDone","loadQueue","loadScripts","scripts","failures","execCallbacks","loadingScripts","notifyCallbacks","Cell","initial","currentCode","getLanguageData","I18n","getData","setCode","newCode","getCode","langData","translation","getLangData","textstr","removeContext","isTokenised","values_1","$1","$2","isRtl","hasCode","AddOnManager","_listeners","runListeners","matchedListeners","listener","dependencies","createUrl","baseUrl","dep","resource","addOnUrl","urlString","baseURL","substring","deps","newUrl","loadDependencies","waitFor","requireLangPack","languages","languageLoad","language","addOn","addOnConstructor","addComponents","pluginName","pluginUrl","PluginManager","ThemeManager","subject","doRevoke","revoke","clear","isSet","singleton","rate","read$4","supports","add$1","clazz","add$3","add$2","descendants$1","descendants","annotation","dataAnnotation","dataAnnotationId","identify","annotationName","rng","selection","getRng","getBody","an","newStart","getAttr","has$1","uid","findMarkers","generate","getTime","floor","docDom","fragment","contentElements","clone$1","original","isDeep","deep$1","TextWalker","isBoundary","direction","TextSeeker","isBlockBoundary","newOffset","backwards","forwards","round$2","round","rect","collapse","toStart","isValidOverflow","overflowY","rect1","rect2","min","isAbove$1","halfHeight","isBelow$1","containsXY","getSelectedNode","getNode$1","safeOffset","clamp$2","extendingChars","isExtendingChar","ch","isElement$3","isCaretCandidate$2","isBlock$1","isFloated","isValidElementCaretCandidate","and","isNotPre","isText$4","isBr$2","nodeIndex$1","resolveIndex$1","createRange$1","isWhiteSpace$1","isRange","isHiddenWhiteSpaceRange","isZeroRect","getBoundingClientRect$1","clientRect","clientRects","getClientRects","brNode","nbsp$1","getBrClientRect","sc","ec","so","eo","newRng","cloneRange","setEndAfter","getBoundingClientRectWebKitText","collapseAndInflateWidth","newClientRect","CaretPosition","caretPosition","addUniqueAndValidRect","addCharacterOffset","beforeNode","getCaretPositionClientRects","toRange","isVisible","isEqual","getNode","fromRangeStart","fromRangeEnd","isAbove","pos1","pos2","isBelow","isTextPosition","isElementPosition","HDirection","trimEmptyTextNode$1","rangeInsertNode","insertNode","insertFragment","isText$3","isBogus","normalizedParent","getChildNodes","equal","createPathItem","numTextFragments","normalizedNodeIndex","create$6","outputOffset","normalizedTextOffset","parentsUntil$1","resolve$2","paths","resolvePathItem","dataLen","targetOffset","findTextPosition","isContentEditableFalse$9","getPoint","point","trimmedOffset","getNormalizedTextOffset","findIndex","moveEndPoint$1","normalizeTableCellSelection","getOffsetBookmark","findAdjacentContentEditableFalseElm","bookmark","isCollapsed","end","isFakeCaret","getLocation","createBookmarkSpan","filled","getPersistentBookmark","collapsed","rng2","endBookmarkNode","startBookmarkNode","moveToBookmark","keep","getUndoBookmark","DOM$9","getBodySetting","getParam","bodyObj","getContentSecurityPolicy","getForcedRootBlock","block","getForcedRootBlockAttrs","isAutomaticUploadsEnabled","shouldReuseFileName","getIconPackName","getImageUploadUrl","getImageUploadBasePath","getImagesUploadCredentials","getImagesUploadHandler","shouldUseContentCssCors","getReferrerPolicy","getLanguageCode","shouldIndentUseMargin","getFontCss","fontCss","getObjectResizing","getEventRoot","getTheme","shouldValidate","isInlineBoundariesEnabled","hasContentCssCors","getPlugins","isElement$2","isText$2","removeNode$1","trimCount","trimmedText","deleteZwspChars","deleteData","removeUnchanged","remove$2","removeAndReposition","removeTextAndReposition","removeTextCaretContainer","newPosition","indexOf$2","removeElementAndReposition","removeElementCaretContainer","caretContainerNode","browser$2","isContentEditableFalse$8","isMedia$1","isTableCell$3","getAbsoluteClientRect","scrollX","scrollY","rootRect","margin","FakeCaret","cursorInterval","lastVisualCaret","rootBlock","caretBlock","fakeCaretTargetNodes","trimInlineCaretContainers","caretState","caret","textNode","splitText","insertInline$1","isInlineFakeCaretTarget","blockName","br","blockNode","insertBlock$1","getCss","reposition","isFakeCaretTableBrowser","isFakeCaretTarget","isContentEditableFalse$7","isMedia","isBlockLike","isCaretContainer","isCaretContainerBlock","isElement$1","isCaretCandidate$1","isForwards","isBackwards","skipCaretContainers","findNode$1","predicateFn","isCefOrCaretContainer","getParentBlock$2","isInSameBlock","caretPosition1","caretPosition2","getChildNodeAtRelativeOffset","relativeOffset","beforeAfter","setStartBefore","setEndBefore","setStartAfter","isNodesInSameBlock","node1","node2","lean","before$2","after$2","normalizeRange","leanLeft","leanRight","location_1","getRelativeCefElm","getNormalizedRangeEndPoint","normalizedRange","getElementFromPosition","getVisualCaretPosition","walkFn","isMoveInsideSameBlock","inSameBlock","getOption","isContentEditableFalse$6","isText$1","isElement","isBr$1","isCaretCandidate","isAtomic","isAtomicContentEditableFalse","isEditableCaretCandidate","nodeAtIndex","getCaretCandidatePosition","findCaretPosition$1","startPos","nextNode","innerNode","Forwards","moveForwardFromBr","rootContentEditableFalseElm","getParents$3","CaretWalker","Backwards","isBeforeOrStart","position","isAfterOrEnd","isBeforeAfterSameElement","fromPosition","navigate","shouldSkipPosition","navigateIgnore","ignoreFilter","positionIn","walkToPositionIn","nextPosition","prevPosition","firstPositionIn","lastPositionIn","CARET_ID$1","isCaretNode","getParentCaretContainer","isPathBookmark","addBogus","tryFindRangePosition","padEmptyCaretContainer","isEmpty$1","insertZwsp","setEndPoint","isValidTextNode","restoreEndPoint","appendData","getBookmark$1","getCaretBookmark","getRangeBookmark","getBookmark$2","resolvePaths","isStringPathBookmark","resolveCaretPositionBookmark","isIdBookmark","endPos","spos","epos","resolveId","isIndexBookmark","selectNode","resolveIndex","isRangeBookmark","resolve$1","setRng","isBookmarkNode$1","isNbsp","actual","isWhiteSpace","isContent","isNode","moveStart","isInlineBlock","isWhiteSpaceNode$1","getNonWhiteSpaceSibling","inc","nextName","isTextBlock$1","ed","allowSpaces","replaceVars","vars","isEq$5","str1","normalizeStyleValue","getTextDecoration","decoration","getParents$2","isBlockFormat","isSelectorFormat","isInlineFormat","shouldExpandToSelector","expand","isBookmarkNode","getParents$1","isWhiteSpaceNode","isTextBlock","findParentContentEditable","walkText","findSpace","findContent","findWordEndPoint","includeTrailingSpaces","lastTextNode","textSeeker","textOffset","findSelectorEndPoint","formatList","curFormat","findBlockEndPoint","scopeRoot","isAtBlockBoundary$1","findParentContainer","block_expand","isSelfOrParentBookmark","expandRng","includeTrailingSpace","walk$2","exclude","firstNode","lastNode","collectSiblings","endNode","siblings","findEndPoint","walkBoundary","parent_1","siblings_1","startPoint","endPoint","getRanges","ranges","rangeCount","getRangeAt","getCellsFromElementOrRanges","selectedCells","getSelectedNodes","getCellsFromRanges","getCellsFromEditor","getSel","getClosestTable","cell","getFirstChildren","getLastChildren$1","hasAllContentsSelected","getStartNode","getEndNode","moveEndPoint","hasAnyRanges","sel","runOnRanges","executor","fakeSelectionNodes","fakeNodeRng","preserve","fillBookmark","api$1","get$2","makeAnnotation","eDoc","decorate","_b","getOwnPropertySymbols","propertyIsEnumerable","__rest","master","_d","_e","classes","annotate","newWrappers","getDoc","finishWrapper","processElements","processElement","wrapName","isZeroWidth","isAnnotation","wrap$3","processNodes","Annotator","annotations","registry","register","serializer","addNodeFilter","spans","span","identifyParserNode","persistent","setup$m","changes","_registry","changeCallbacks","initData","previous","withCallbacks","updateCallbacks","callbackMap","outputData","onNodeChange","copy","fireNoAnnotation","fireCallbacks","setup$n","undoManager","transact","initialRng","hasFakeSelection","applyWordGrab","selectionRng","annotateWithBookmark","annotationChanged","getAll","directory","markers","nodesAlready","findAll","BookmarkManager","getBookmark","getContentEditableRoot$1","isXYWithinRange","fireError","errorType","fireFormatApply","fireFormatRemove","VK","BACKSPACE","DELETE","DOWN","ENTER","LEFT","RIGHT","SPACEBAR","TAB","UP","PAGE_UP","PAGE_DOWN","END","HOME","modifierPressed","shiftKey","ctrlKey","altKey","metaKeyPressed","isContentEditableFalse$5","ControlSelection","selectedElm","selectedElmGhost","resizeHelper","selectedHandle","resizeBackdrop","startX","startY","startW","startH","ratio","resizeStarted","startScrollWidth","startScrollHeight","elementSelectionAttr","editableDoc","rootDocument","abs","resizeHandles","nw","ne","se","sw","isImage","contextMenuSelectImage","touch","touches","isEventOnImageOutsideRange","getResizeTargets","firstElementChild","isResizable","setSizeProp","targets","setGhostElmSize","ghostElm","resizeGhostElement","deltaX","deltaY","proportional","resizeHelperX","resizeHelperY","screenX","screenY","getResizeImgProportional","display","selectedElmX","selectedElmY","scrollWidth","scrollHeight","origin","fireObjectResizeStart","endGhostResize","wasResizeStarted","showResizeRect","fireObjectResized","nodeChanged","targetElm","unbindResizeHandleEvents","targetWidth","targetHeight","hideResizeRect","selectedValue","handleElm","startDrag","updateResizeRect","controlElm","isChildOrEqual","img","disableGeckoResize","getStart","getEnd","isWithinContentEditableFalse","execCommand","handleMSControlSelect_1","delayedSelect","throttledUpdateResizeRect","composing","hasCeProperty","fromPoint","pointDoc","caretPositionFromPoint","offsetNode","caretRangeFromPoint","createTextRange","moveToPoint","rects","elementFromPoint","moveToElementText","findClosestIeRange","parentElement","findParent$1","moveOutOfContentEditableFalse","isEq$4","rng1","hasParent$1","findParent","hasParentWithName","isTable","isTableCell$2","isCeFalseCaretContainer","hasBrBeforeAfter","findTextNodeRelative","isAfterNode","lastInlineElement","parentBlockContainer","normalizeEndPoint","directionLeft","hasContentEditableFalseParent","isPrevNode","normalize$2","normRng","RangeUtils","normalize","normalizedRng","compareRanges","getCaretRangeFromPoint","documentFocusInHandler","api","getOffset","parseFloat","aggregate","properties","getOuter","cumulativeInclusions","Dimension","walkUp","navigation","view","rest","Navigation","freeze","__proto__","frameElement","excludeFromDescend","markerInfo","cleanupFun","pageXOffset","absolute","get$1","withMarker","preserveWith","applyWithMarker","withScrollEvents","fireScrollIntoViewEvent","fireAfterScrollIntoViewEvent","descend","withElement","elementMarker","startElement","endElement","scrollToMarker","viewHeight","intoWindowIfNeeded","viewportBottom","markerTop","markerBottom","largerThanViewport","intoWindow","intoFrame","frameViewHeight","op","frames","pathTo","loc","find$1","viewportBounds","rangeIntoWindow","elementIntoWindow","rangeIntoFrame","elementIntoFrame","scrollRangeIntoView","hasFocus$1","adt$1","domRange","exact","SimSelection","soffset","finish","foffset","browser$1","clamp$1","normalizeRng","isOrContains","isRngInRoot","shouldStore","nativeRangeToSelectionRange","bookmarkToNativeRng","store","newBookmark","FocusManager","isEditorUIElement","register$3","throttledStore","mouseUpPage","registerPageMouseUp","registerFocusOut","registerMouseUp","selectionChange","isManualNodeChange","registerEditorEvents","DOM$8","isUIElement","customSelector","getCustomUiSelector","registerEvents$1","editorManager","focusedEditor","setActive","blurredEditor","getElement","getActiveElement","activeEditor","shadowRoot","composed","getOriginalEventTarget","unregisterDocumentEvents","normalizeSelection$1","getCollapsedNode","getFocusInElement","caretPos","focusBody","rawBody","hasInlineFocus","iframeElement","hasIframeFocus","activateEditor","getEndpointElement","real","skipEmptyTextNodes","orig","processRanges","typeLookup","walk$1","isEmptyTextNode","AstNode","insert","selfAttrs","cloneAttrs","selfAttr","shortEnded","refNode","restoreDataUris","re","imageId","uris","safeSvgDataUrlElements","filteredClobberElements","findMatchingEndTagIndex","startIndex","startTagRegExp","endTagRegExp","shortEndedElements","startMatch","findCommentEndIndex","endMatch","lcHtml","isConditionalComment","endIfIndex","endIndex","endCommentRegexp","checkBogusAttribute","regExp","attrString","SaxParser","fix_self_closing","comment","cdata","pi","doctype","parseInternal","base64Extract","endRegExp","attrList","textData","isInternalElement","isShortEnded","elementRule","isValidElement","attribsValue","validAttributesMap","validAttributePatterns","stack","filteredUrlAttrs","scriptUriRegExp","parsingMode","processEndTag","valid","processText","processComment","allow_conditional_comments","processMalformedComment","startTag","parseAttribute","val2","val3","attrRule","processAttr","fillAttrsMap","validate","isValidPrefixAttrName","uri","decodeURIComponent","unescape","allow_html_data_urls","allowSvgDataUrls","blockSvgDataUris","isInvalidUri","tokenRegExp","attrRegExp","selfClosing","self_closing_elements","removeInternalElements","remove_internals","fixSelfClosing","processHtml","matchText","bogusValue","preserve_cdata","dataImageUri","chunks","extractBase64DataUris","findEndTag","trimInternal","bogusAllRegExp","tempAttrs","trimContentRegExp","trimHtml","getTempAttrs","endTagIndex","matchLength","trimExternal","each$d","ElementUtils","attribs","compareObjects","obj1","obj2","makeMap$1","Writer","indent","indentBefore","indent_before","indentAfter","indent_after","entity_encoding","htmlOutput","element_format","reset","getContent","HtmlSerializer","writer","handlers","handler","sortedAttrs","inner","nonInheritableStyles","Set","shorthandStyleProps","getStyleProps","hasStyleConflict","nodeStyleProps","parentNodeStyleProps","valueMismatch","parentValue","nodeStyleProp","propExists","longhandProps","isChar","delta","isBeforeSpace","isAfterSpace","isEmptyText","matchesElementPosition","isImageBlock","isCefNode","isBogusAll$1","isBeforeImageBlock","isAfterImageBlock","isBeforeMedia","isAfterMedia","isBeforeTable","isAfterTable","isBeforeContentEditableFalse","isAfterContentEditableFalse","fillWithPaddingBr","trimBlockTrailingBr","lastChildPrevSibling","rawParent","parents$1","parentsAndSelf","navigateIgnoreEmptyTextNodes","getClosestBlock$1","isAtBeforeAfterBlockBoundary","newPos","fromBlock","isAtBlockBoundary","isAtStartOfBlock","isAtEndOfBlock","isBeforeBlock","isAfterBlock","isBr","findBr","parentBlocks","isBeforeBr$1","isAfterBr","getElementFromPrevPosition","findPreviousBr","findNextBr","isInMiddleOfText","getClosestBlock","hasSpaceBefore","hasSpaceAfter","isInPre","isPreValue","needsToBeNbspLeft","needsToBeNbspRight","needsToBeNbsp","isNbspAt","hasNbsp","normalizeNbsps","newText","firstPos","normalizeNbspAtStart","chars","normalizeNbspMiddle","lastPos","normalizeNbspAtEnd","normalizeNbspsInEditor","normalize$1","isEndOfContent","isStartOfContent","replaceData","previousCharIsSpace","normalizeContent","normalizeWhitespaceAfter","whitespaceCount","normalizeWhitespaceBefore","mergeTextNodes","prevNode","normalizeWhitespace","mergeToPrev","whitespaceOffset","newNode","removeNode","insertData","needsReposition","getPreviousSiblingCaretPosition","getNextSiblingCaretPosition","findCaretPosOutsideElmAfterDelete","findCaretPositionForwardsFromElm","findCaretPositionForward","startPosition","findCaretPositionBackwardsFromElm","findCaretPositionBackwards","findCaretPosition","setSelection$1","paddEmptyBlock","deleteElement$2","moveCaret","rawNode","afterDeletePos","parentBlock","normalizedAfterDeletePos","afterDeletePosOpt","oc","prevTextOpt","nextTextOpt","deleteNormalized","isInlineElement","setContent","setCursorLocation","paddPos","getTableCells","tableCellRng","deleteAction","singleCellTable","fullTable","partialTable","multiTable","getClosestCell$1","isExpandedCellRng","cellRng","getTableFromCellRng","startParentTable","endParentTable","getTableSelectionFromCellRng","cells","tableSelection","getTableSelections","selectionDetails","isSameTable","sameTableSelection","startCell","endCell","startTableSelection","getCellRangeFromStartTable","endTableSelection","getCellRangeFromEndTable","getCellIndex","getSelectedCells","unselectCells","startTable","endTable","otherContentRng","getActionFromRange","isRootFromElement","optCellRng","getCellRng","getTable","isStartInTable","isEndInTable","isMultiTable","getTableDetailsFromRange","rows","isSingleCellTable","isSingleCellTableContentSelected","startTableSelectedCells","endTableSelectedCells","handleMultiTable","handleSingleTable","freefallRtl","cleanCells","setCursorInCell","emptySingleTableCells","outsideDetails","outsideBlock","getOutsideBlock","deleteContents","startInTable","emptyBlock","handleEmptyBlock","details","emptyMultiTableCells","startTableCells","endTableCells","betweenRng","deleteCellContents","lastBlock","additionalCleanupNodes","deleteTableElement","getParentCell","getParentCaption","emptyElement","isNearTable","deleteCaret$3","startElm","fromCell","toCell","deleteBetweenCells","deleteCaretCells","fromPos","isBeforeOrAfterTable","fromCaption","isDeleteOfLastCharPos","emptyCaretCaption","toCaption","validateCaretCaption","deleteCaretInsideCaption","deleteCaretCaption","backspaceDelete$9","action","deleteCellRange","deleteCaptionRange","deleteTableRange","deleteRange$2","commonAncestorContainer","newEndPos","normalizeBlockSelectionRange","isListFragment","nonEmptyElements","hasOnlyOneChild$1","isPaddingNode","isPaddedEmptyBlock","isEmptyFragmentElement","trimListItems","isPadding","getParentLi","findLastOf","newCaretPos","insertAtCaret$1","domFragment","cleanupDomFragment","toDomFragment","liTarget","liElms","isAt","caretWalker","findFirstIn","insertBefore$1","insertAfter$1","beforeRng","afterRng","cloneContents","getSplit","insertMiddle","isTableCell$1","insertHtmlAtCaret","trimOrPadLeftRight","parser","merge","bookmarkHtml","paste","caretElement","canHaveChildren","isTableCellContentSelected","deleteSelectedContent","parserArgs","isParentBlockLi","markFragmentElements","_selectionOverrides","showBlockCaretContainer","invalid","validInsertion","textInlineElements","root_1","elementUtils_1","isNonInheritableStyle","hasInheritableStyles","reduceInlineTextElements","nextRng","parentEditableFalseElm","getContentEditableFalseParent","isPartOfFragment","findNextCaretRng","moveSelectionToMarker","trimBrsFromTableCell","addVisual","traverse","isTreeNode","setEditorHtml","noSelection","moveSelection","setContentInternal","defaultedArgs","setupArgs$2","updatedArgs","no_events","nodeFilters","attributeFilters","getNodeFilters","getAttributeFilters","nodeMatches","attrMatches","name_2","findMatchingNodes","no_selection","setContentTree","padd","forcedRootBlockName","isRootContent","setContentString","sibling$2","ensureIsRoot","closest$1","transform","transformed","isEq$3","matchesUnInheritedFormatSelector","formatter","inherit","matchParents","similar","matchNode","matchName$1","matchItems","itemName","onmatch","expectedValue","isEmptyValue","match$2","matchAllOnNode","formatNames","matchSimilar","formatName","isVariableValue","field","fieldValues","mapToArray","isVariableFormatName","ZWSP","CARET_ID","isCaretContainerEmpty","getEmptyCaretContainers","findFirstTextNode","createCaretContainer","fill","removeCaretContainerNode","trimZwspFromCaretContainer","removeCaretContainer","appendNode","insertFormatNodesIntoCaretContainer","formatNodes","innerMostFormatNode","formatNode","removeCaretFormat","hasContentAfter","expandedRng","newCaretContainer","allBrs","getLastChildren","insertCaretContainerNode","cleanedFormatNode","validFormats","matchedFormats","fmtName","otherFormatName","validKeys","filterObj","validKey","fmt1","filteredFmt1","fmt2","filteredFmt2","equal$1","areSimilarFormats","clonedFormatNode","cleanFormatNode","caretTextNode","isFormatElement","inlineElements","postProcessHooks","each$c","blocks","isPre","getSelectedBlocks","pre","pre1","pre2","merger","each$b","isElementNode$1","findElementSibling","mergeSiblingsNodes","elementUtils","tmpSibling","mergeSiblings","merge_siblings","processChildElements","hasStyle","applyStyle","unwrapEmptySpan","removeResult","MCE_ATTR_RE","each$a","isEq$2","isChildOfInlineParent","getContainer","lastIdx","normalizeTableSelection","isTableCellOrRow","childNode","wrap$1","wrapWithSiblings","removeFormatInternal","compareNode","stylesModified","matchName","links","isColorFormatAndAnchor","preserve_attributes","attrsToPreserve","remove_similar","valueOut","rootBlockElm","forcedRootBlock","list_block","forced_root_block_attrs","isMixedFormat","removeFormat$1","newName","removeFormatFromClone","remove$1","splitToFormatRoot","formatRoot","findFormatRoot","lastClone","firstClone","formatRootParent","mixed","wrapAndSplit","removeNodeFormat","fmt","lastContentEditable","textDecoration","isRemoveBookmarkNode","removeRngStyle","ceFalseOverride","each$9","each$8","isElementNode","applyFormat$1","setElementFormat","onformat","styleVal","applyNodeStyle","found","createWrapElement","wrapElm","applyRngStyle","nodeSpecific","currentWrapElm","parentName","canFormatEmptyLines","validBRParentElements","figcaption","summary","hasCaretNodeSibling","canFormatBR","childCount","isEmptyTextNode$1","getChildCount","childElement","mergeStyles","clear_child_styles","clearChildStyles","mergeWithChildren","merge_with_parents","mergeWithParents","backgroundColor","mergeBackgroundColorAndFontSize","processTextDecorationsAndColor","mergeTextDecorationsAndColor","mergeSubSup","wordcharRegex","importNode","applyCaretFormat","curSelNode","firstFormat","forced_root_block","defaultBlock","fake","postProcess$1","formatItem","hasVars","fallbackElement","matchingNode","matchingFormat","updateAndFireChangeCallbacks","registeredCallbacks","runIfChanged","spec","node_1","withSimilar","withoutSimilar","withVars","fromElements","tableModel","tableRow","cellPosition","getSpan","cellExists","getWidth","row","findElementPos","extractRows","sx","sy","ey","newRows","toDom","tableElement","tableBody","createDomTable","modelRowsToDomRows","getFullySelectedListWrappers","_li","findParentListContainer","listCont","listElm","listStyles","_style","setProperty","internalSet","setAll","emptyFragment","getFragmentFromRange","innerElm","commonAnchorContainer","wrapElements","listWrappers","allWrappers","directListWrappers","getWrapElements","wrapped","getTableFragment","selectedTableCells","tableElm","firstCell","lastCell","fullTableModel","rowspan","colspan","y2","x2","fillout","skipCellsX","fromDom","subTable","sectionedTableModel","isCollapsibleWhitespace","getInnerText","bin","shouldTrim","trimLeadingCollapsibleText","getSelectedContentInternal","setupArgs$1","parentBlockOpt","contextNodeName","getContextNodeName","shouldTrimSpaces","nonRenderedText","parentBlockText","textIndex","getTextContent","getInner","tmpElm","contextual","getSelectionFragment","read$3","getSerializedContent","getOuterHtml","write","fragments","vDown","vUp","buildScript","buildSnake","getMiddleSnake","currentFragments","insertAt","removeAt","applyDiff","start1","end1","start2","end2","diag","i2","snake","sum","lazyTempDocument","implementation","createHTMLDocument","createFromEditor","trimmedFragments","trimmed","beforeBookmark","createFragmentedLevel","createCompleteLevel","applyToEditor","level","getLevelContent","getCleanLevelContent","isEq$1","level1","level2","hasEqualContent","hasEqualCleanedContent","isUnlocked","locks","setTyping","typing","endTyping","makePlainAdaptor","beforeChange","beforeChange$1","currentLevel","lastLevel","bm","customUndoRedoLevels","getCustomUndoRedoLevels","setDirty","addUndoLevel$1","undo","undo$1","redo","redo$1","clear$1","reset$1","hasUndo","hasUndo$1","hasRedo","hasRedo$1","ignore","transact$1","ignore$1","extra","callback1","callback2","extra$1","matchAll","matchedFormatNames","checkedMap","canApply","rawElm","toggle","formatChanged","registeredFormatListeners","formats","nodeOrRange","setup$j","formatChangeItems","getCurrent","toAppendTo","addListeners","removeListeners","formatChangedInternal","setupArgs$3","emptyRegExp","trimEmptyContents","getContentFromBody","getContentInternal","insertContent","hasVisual","isVisualAidsEnabled","matchedElm","getVisualAidsTableClass","value_1","cls_1","getVisualAidsAnchorClass","addVisualInternal","getModel","isRtc","plugins","getRtcInstanceWithFallback","rtcInstance","getRtcInstanceWithError","mergeAndNormalizeText","outerNode","outer","outerElm","oldLength","innerTextNode","walkPastBookmark","normalizeTextIfRequired","deleteFromCallbackMap","newCallbacks","isNativeIeSelection","isAttachedToDom","EditorSelection","selectedRange","explicitRange","selectorChangedWithUnbind","selectorChangedData","currentSelectors","matchedSelectors","SelectorChanged","setupArgs","eventArgs","contextBlock","contextArgs","cleanContent","prevText","nextText","rngSetContent","createContextualFragment","setContent$1","getRng$1","tryCompareBoundaryPoints","how","sourceRange","destinationRange","compareBoundaryPoints","anchorNode","START_TO_START","END_TO_END","isValidRange","ieRange","removeAllRanges","addRange","setBaseAndExtent","focusNode","isForward","anchorRange","anchorOffset","focusRange","focusOffset","bookmarkManager","controlSelection","getSelectedContent","getContent$1","compareEndPoints","setNode","endElm","selectedBlocks","selectorChanged","getScrollContainer","scrollContainer","scrollElementIntoView","placeCaretAt","addFilters","domParser","convert_fonts_to_spans","fontSizes","face","removeAttrs","addFontToSpansFilter","font_size_legacy_values","addStrikeToSpanFilter","parseDataUri","uriParts","buildBlob","atob","Uint8Array","Blob","uriToBlob","rejectWithError","xhr_1","XMLHttpRequest","open","responseType","response","send","blobUriToBlob","count$1","ImageScanner","uploadStatus","blobCache","cachedPromises","images","getAllImages","isUploaded","promises","imageInfo","image","blobInfo","newPromise","base64","getByData","blob","getByUri","reader","FileReader","onloadend","readAsDataURL","blobToDataUri","dataUri","imageToBlobInfo","paddEmptyNode","blockElements","padd_empty_with_br","hasOnlyChild","whitespaceElements","isPadded","each$7","explode$2","extend$4","DomParser","matchedNodes","matchedAttributes","root_name","filterNode","list","addAttributeFilter","fi","fl","invalidChildren","rootBlockName","getRootBlockName","whiteSpaceElements","startWhiteSpaceRegExp","endWhiteSpaceRegExp","allWhiteSpaceRegExp","isAllWhiteSpaceRegExp","isInWhiteSpacePreservedElement","createNode","removeWhitespaceBefore","textVal","textNodeNext","output","cloneAndExcludeBlocks","isLineBreakNode","parent_2","attrFiltersLen","tempNode","isPaddedWithNbsp","nonSplitableElements","textBlockElements","removeOrUnwrapInvalidNode","originalNodeParent","children_1","newParent","fixed","currentNode","fixInvalidChildren","rootBlockNode","addRootBlocks","remove_trailing_brs","prevName","newRel","allow_unsafe_link_target","appendRel","allow_html_in_named_anchor","fix_list_elements","classValue","validClassesMap","blob_cache","processImage","inputSrc","isInternalImageSource","isBogusImage","images_dataimg_filter","imgElem_1","Image","isValidDataImg","blobUri","registerBase64ImageFilter","register$1","inline_styles","register$2","addTempAttr","htmlParser","DomSerializerImpl","internalName","hasChildren","hasEventListeners","shouldFireEvent","oldDoc","clonedNode","impl","doc_1","firePreProcess","preProcess","getHtmlFromNode","brNode1","brNode2","trimTrailingBr","parseHtml","serializeNode","outArgs","firePostProcess","postProcess","toHtml","addRules","setRules","DomSerializer","domSerializer","setContent$2","DOM$7","safeDestroy","deepMerge","objects","curObject","deviceDetection","legacyMobilePlugins","defaultTouchSettings","table_grid","object_resizing","resize","normalizePlugins","pluginNames","trimmedPlugins","hasSection","sectionResult","sections","getToolbarMode","getDefaultMobileSettings","mobileSettings","defaultMobileSettings","toolbar_mode","toolbar_sticky","menubar","getExternalPlugins","overrideSettings","userDefinedExternalPlugins","external_plugins","processPlugins","isMobileDevice","defaultOverrideSettings","forcedPlugins","forced_plugins","desktopPlugins","mobileConfig","getSectionConfig","combinedPlugins","combinePlugins","mobilePlugins","theme","section","isSectionTheme","getPlatformPlugins","combineSettings","defaultSettings","defaultDeviceSettings","mobile","extractSections","extendedSettings","isOnMobile","sectionSettings","getSection","getFiltered","IconManager","iconPack","icons","getProp","propName","getComputedSizeProp","getClientWidth","getClientHeight","getMarginTop","getMarginLeft","isXYInContentArea","bodyElm","transposedPoint","transpose","isInsideElementContentArea","NotificationManager","notifications","getImplementation","unimplemented","getNotificationManagerImpl","getArgs","getTopNotification","closeNotification","notification","otherNotification","fireEvent","getContentAreaContainer","isEditorAttachedToDom","progressBar","getEl","addNotification","getNotifications","serviceMessage","getServiceMessage","registerEvents","WindowManager","dialogs","getWindowManagerImpl","openUrl","alert","confirm","getParams","setParams","funcBind","closeDialog","dialog","fireCloseEvent","otherDialog","storeSelectionAndOpenDialog","openDialog","fireOpenEvent","addDialog","params","windowManagerImpl","displayNotification","notificationManager","displayError","_skinLoaded","logError","createLoadError","pluginLoadError","initError","transformToUrls","cssLinks","skinUrl","contentCssFile","isContentCssSkinName","documentBaseURI","toAbsolute","appendContentCssFromSettings","contentCSS","contentCss","getContentCss","getContentCssUrls","getFontCssUrls","UploadStatus","blobUriStatuses","createStatus","resultUri","hasBlobUri","getResultUri","isPending","markPending","markUploaded","removeFailed","uuid","rnd","Uploader","pendingPromises","defaultHandler","progress","xhr","withCredentials","credentials","upload","onprogress","loaded","total","path1","path2","json","JSON","responseText","basePath","formData","FormData","filename","handlerSuccess","handlerFailure","resolvePending","blobInfos","openNotification","pendingUploadBlobInfo","closeNotification_1","failureOptions","percent","uploadBlobInfo","uploadBlobs","createUploader","each$6","parsedSelectorToHtml","ancestry","sItem","wrapInHtml","parentCandidate","ancestorName","parentRequired","elmRule","getRequiredParent","siblingElm","parseSelectorItem","$0","$3","$4","getCssText","previewFrag","parentFontSize","previewCss","previewStyles","getPreviewStyles","removeVars","previewOpt","previewElm","Formatter","valigntop","verticalAlign","valignmiddle","valignbottom","alignleft","preview","textAlign","aligncenter","marginLeft","marginRight","alignright","alignjustify","bold","fontWeight","italic","fontStyle","underline","strikethrough","forecolor","hilitecolor","fontname","fontFamily","fontsize","fontSize","lineheight","lineHeight","fontsize_class","blockquote","subscript","superscript","_fmt","_itemName","customValue","removeformat","getFormats","unregister","FormatRegistry","formatChangeState","addShortcut","setup$h","keyCode","disableCaretContainer","setup$k","applyFormat","removeFormat","toggleFormat","matchFormat","closestFormat","matchAllFormats","matchNodeFormat","canApplyFormat","shouldIgnoreCommand","cmd","UndoManager","addUndoLevel","isFirstTypedCharacter","addNonTypingUndoLevel","command","isDirty","modKey","inputType","isInsertFromPasteOrDrop","addKeyboardShortcuts","nonTypingKeycodes","placeholderAttr","isKeyboardEvent","isDeleteEvent","strongRtl","isInlineTarget","getInlineBoundarySelector","findRootInline","findInlineParents","normalizePosition","normalizeForwards","normalizeBackwards","isTextBlockOrListItem","getParentBlock$1","isBeforeRoot","paddEmptyBody","placeCaretInEmptyBody","blockBoundary","getBlockPosition","containerElm","blockPosition","getChildrenUntilBlockBoundary","extractChildren","removeEmptyRoot","nestedBlockMerge","toBlock","insertionPoint","sidelongBlockMerge","trimBr","mergeBlockInto","parentsAndSelf$1","findInsertionPoint","getInsertionPoint","mergeBlocks","block1","block2","backspaceDelete$8","fromBlockPos","toBlockPos","blockPos","lastPositionInBlock","skipLastBr","isDifferentBlocks","parent1","parent2","hasSameParent","isEditable$1","readFromRange","read$1","isRawNodeInTable","deleteRange$1","noPrevious","noNext","isSelectionInTable","isEverythingSelected","emptyEditor","deleteRangeMergeBlocks","backspaceDelete$7","_forward","isContentEditableTrue$2","isContentEditableFalse$4","showCaret","getNodeRange","renderCaretAtRange","caretPositionNode","caretPositionBeforeNode","ceRoot","renderRangeCaret","isBeforeBoundary","isAfterBoundary","deleteContentAndShowCaret","peekCaretPosition","caretRange","deleteRange","trimEmptyTextNode","backspaceDelete$6","getNextPosFn","isBeforeFn","nextCaretPosition","deleteBoundaryText","DeleteAction","moveToElement","moveToPosition","findCefPosition","isDeleteFromCefDifferentBlocks","toCefElm","blockElm","deleteEmptyBlockOrMoveToCef","getAncestorCe","backspaceDeleteCaret","selectedNode","caretLocation","isAtContentEditableBlockCaret","getContentEditableBlockAction","skipMoveToActionFromInlineCefToContent","getContentEditableAction","read","hideFakeCaret","deleteElement$1","paddEmptyElement","backspaceDelete$5","backspaceDeleteRange","backspaceDelete$4","deleteCaret$2","isText","startsWithCaretContainer","endsWithCaretContainer","createZwsp","insertInline","insertInlineBefore","insertInlineAfter","insertInlinePos","isPosCaretContainer","caretNode","renderCaret","evaluateUntil","fns","Location","rescope$1","nPos","isNotInsideFormatCaretContainer","findInsideRootInline","start$1","isValidLocation","readLocation","getName","outside","inside","betweenInlines","fromInline","toInline","hasSameParentBlock","skipNoMovement","fromLocation","toLocation","location2","location1","findLocationSimple","findLocation$1","findLocationTraverse","BreakType","moveRel","modify","VDirection","flip","positions","getBreakType","currentPos","nextPos","Br","Block","Wrap","getPositionsUntil","breakType","breakAt","Eol","getAdjacentLinePositions","getPositionsUntilBreak","findClosestHorizontalPositionFromPoint","lastRect","newRect","lastDist","findClosestHorizontalPosition","targetRect","getPositionsUntilPreviousLine","getPositionsUntilNextLine","getPositionsAbove","getPositionsBelow","getNodeClientRects","toArrayWithNode","customEventRootDelegates","beforeUnloadDelegate","walkUntil$1","isAboveFn","isBeflowFn","line","targetClientRect","findUntil","upUntil","Up","downUntil","Down","isAboveLine","lineNumber","aboveLineNumber","isLine","isLineNumber","isContentEditableFalse$3","findNode","distanceToRectLeft","distanceToRectRight","isInsideX","isInsideY","findClosestClientRect","oldClientRect","oldDistance","newDistance","walkUntil","includeChildren","moveToRange","renderRangeCaretOpt","moveHorizontally","isBefore","isAfter","rangeIsInContainerBlock","moveVertically","caretClientRect","linePositions","nextLinePositions","nextLineRect","dist1","dist2","caretPositions","isBelowFn","getClientRect","positionsUntil","closestNextLineRect","getLineEndPoint","moveToLineEndPoint$3","setCaretPosition","setSelected","renderCaretLocation","move$2","isInlineTarget$1","findLocation","moveWord","_caret","hasSelectionModifyApi","moveByWord","setupSelectedState","inlineBoundaries","selectedInlines","targetInlines","toggleInlines","isAtZwsp","safeRemoveCaretContainer","inlines","_inline","renderInsideInlineCaret","moveNextWord","movePrevWord","moveToLineEndPoint$2","linePoint","outsideLoc","setCaretLocation","deleteFromTo","rangeFromPositions","backspaceDelete$3","rescope","toPosition","normalizedFirstPos","normalizedLastPos","hasOnlyTwoOrLessPositionsLeft","backspaceDeleteCollapsed","hasOnlyOneChild","deleteCaret$1","parentInlines","getParentInlines","normalizedFromPos","prevPos","willDeleteLastPositionInElement","isFormatElement$1","innerMost","replaceWithCaretFormat","deleteLastPosition","backspaceDelete$2","deleteElement","backspaceDelete$1","isNearMedia","deleteCaret","parseIndentValue","getIndentStyleName","useMargin","canOutdent","getBlocksToIndent","isReadOnly","indentStyleName","intentValue","validateBlocks","isListComponent","parentIsListComponent","indentation","getIndentation","indentUnit","indentValue","queryCommandState","unit","styleValue","indentElement","backspaceDelete","nativeCommand","getTouch","isBlockElement","isValidTarget","shouldRemoveTextNode","rootNodeName","hasBlockParent","restoreSelection","blockCaretContainer","removeIeControlRect","handleBlockContainer","findBlockCaretContainer","isContentEditableFalse$2","exitPreBlock","getVisualCaretPosition$1","hasForcedRootBlock","newBlock","textBlock","createTextBlock","moveH$2","moveToCeFalseHorizontally","getHorizontalRange","newRange","moveV$3","down","moveToCeFalseVertically","getVerticalRange","moveToLineEndPoint$1","isTarget","rangeBefore","insertElement","moveCaretToNewEmptyLine","rootBlockAttrs","getClosestTargetBlock","isAtLastLine","isAtFirstLine","isAtFirstOrLastLine","insertBr","insertBlock","insertEmptyLine","moveV$2","execute","patterns","defaultPatterns","matchesEvent","match$1","moveH$1","moveV$1","moveToLineEndPoint","getClosestCell","getYAxisValue","isTargetCorner","corners","tds","deflate","getCorners","corner","newCorner","oldCorner","oldDist","sqrt","newDist","findClosestCorner","getClosestCellAbove","getClosestCellBelow","isAtTableCellLine","lineInfo","startsWithWrapBreak","startsWithBrBreak","breakPos","hasNextBreak","isAtFirstTableCellLine","isAtLastTableCellLine","navigateHorizontally","_td","isCaretAtStartOrEndOfTable","renderBlock","navigateVertically","findClosestPositionInAboveCell","getClosestAbovePosition","findClosestPositionInBelowCell","getClosestBelowPosition","move$1","mover","moveH","moveV","moveToCaretPosition","firstNonWhiteSpaceNodeSibling","getParentBlock","hasParent","isListBlock","getContainerBlock","containerBlock","containerBlockParent","isFirstOrLastLi","isEmptyAnchor","containerAndSiblingName","canSplitBlock","normalizeZwspOffset","getEditableRoot","editableRoot","setForcedBlockAttrs","forcedRootBlockAttrs","attrStyles","currentStyles","newStyles","attrClassesOpt","attrClasses","currentClassesOpt","currentClasses","filteredClasses","newClasses","appliedAttrs","remainingAttrs","applyAttributes","insert$2","tmpRng","parentBlockName","newBlockName","isAfterLastNodeInContainer","createNewBlock","shouldKeepStyles","isCaretAtStartOrEndOfBlock","normalizedOffset","insertNewBlockAfter","containerBlockName","shouldEndContainerOnEmptyBlock","isTableCell","wrapSelfAndSiblingsInDefaultBlock","isFirstChild","hasFirstChild","insert$3","includeZwspInRange","trimZwsp","trimLeadingLineBreaks","firstChilds","trimInlineElementsOnLeftSideOfBlock","addBrToBlockIfNeeded","moveSelectionToBr","brElm","extraBr","insertBrBefore","insertBrAfter","hasBrAfter","isAnchorLink","isInsideAnchor","insertBrOutsideAnchor","insert$1","anchorLocation","readInlineAnchorLocation","isControlKey","hasRightSideContent","insertBrAtCaret","newLineAction","shouldBlockNewLine","_shiftKey","getNoNewLineSelector","shouldBlockNewLine$1","isBrMode","requiredState","inListBlock","isListItemParentBlock","inBlock","getParentBlockName","inPreBlock","shouldPutBrInPre","shouldPutBrInPre$1","inBrContext","getBrNewLineSelector","shouldInsertBr","hasShiftKey","_editor","canInsertIntoEditableRoot","rootEditable","getEditableRoot$1","predicates","getAction","platform","isPageUpDown","setNodeChangeBlocker","blocked","insertTextAtPosition","insertNbspAtPosition","insertSpaceAtPosition","insertInlineBoundarySpaceOrNbsp","checkPos","isAtBeginningOfBody","isAtEndOfBody","isAtLineBoundary","needsToHaveNbsp","insertSpaceOrNbspAtSelection","locationToCaretPosition","setSelection","registerKeyboardOverrides","setup$c","executeKeydownOverride$3","setup$b","executeKeydownOverride$2","executeKeyupOverride","setup$a","handleEnterKeyEvent","setup$9","executeKeydownOverride","setup$5","keypressThrotter","setupIeInput","isComposing","setup$7","executeKeydownOverride$1","setup$8","executeKeyupAction","setup$6","NodeChange","lastRng","lastPath","nativeRng","fakeRng","isSameElementPath","initialized","currentPath","isTextBlockNode","getAbsolutePosition","isContentEditableFalse$1","isContentEditableTrue$1","createGhost","clonedElm","opacity","overflow","padding","boxSizing","removeElement","removeDragState","ghost","bindFakeDragEvents","pageDom","dragStartHandler","isLeftMouseButtonPressed","ceElm","elmPos","dragging","maxX","maxY","relX","relY","dragHandler","throttledPlaceCaretAt","movement","targetPos","applyRelPos","bodyPosition","getBodyPosition","scrollPosition","getScrollPosition","mousePosition","iframePosition","inlineScroll","iframeScroll","getBodyScroll","getMousePosition","calc","overflowX","moveGhost","move","dropHandler","targetElement","dragElement","isValidDropTarget","targetClone_1","cloneElm","drop","dragEndHandler","isContentEditableTrue","isContentEditableFalse","getContentEditableRoot","SelectionOverrides","selectedElement","fakeCaret","realSelectionId","isFakeSelectionTargetElement","setRange","getRange","isWithinCaretContainer","isRangeInCaretContainer","setElementSelection","afterNode","targetClone","origTargetClone","$realSelectionContainer","setupOffscreenSelection","nodeElm","selectElement","removeElementSelection","contentEditableRoot","hasBetterMouseTarget","targetBlock","hasNormalCaretPosition","fakeCaretInfo","fakeTargetNodeRects","getFakeCaretTargets","targetNodeRects","closestNodeRect","targetNodeRect","checkPosFn","lineRects","findLineNodeRects","caretInfo","closestFakeCaret","normalizeShortEndedElementSelection","clipboardData","realSelectionElement","clearData","setData","outerText","realTarget","blockIeDrop","shouldBlockUnsupportedDrop","preventFileDrop","dataTransfer","types","preventFileDropIfUIElement","setup","editorRoot","eventNames","blockUnsupportedFileDrop","init$2","renderFocusCaret","setup$1","DOM$6","getRootName","removeUndefined","mkParserSettings","editorUpload","initEditor","bindPendingEventDelegates","fireInit","storeNative","moveSelectionToFirstCaretPosition","execCallback","auto_focus","focusEditor","destroyed","autoFocus","getStyleSheetLoader$1","ui","loadContentCss","removeCss","contentStyles","contentCssText_1","allStylesheets","framedFonts","makeStylesheetLoadingPromises","content_style","appendStyle","preInit","firePreInit","browser_spellcheck","gecko_spellcheck","spellcheck","quirks","getAttributeApplyFunction","isSelectionAcrossElements","serializeRng","isGecko","isWebKit","mceInternalUrlPrefix","mceInternalDataType","setEditorCommandState","selectAll","shortcuts","documentElementEditingFocus","Range","body_1","blur","selectControlElements","disableBackspaceIntoATable","setGeckoEditingOptions","isReadOnly$1","showBrokenImageIcon","restoreFocusOnKeyDown","getWin","bodyHeight","blockCmdArrowNavigation","tapLinksAndImages","blockFormSubmitInsideEditor","refreshContentEditable","allRng","allContentsSelected","selectionHtml","internalContent","escape","setMceInternalContent","getMceInternalContent","queryCommandSupported","internal","template","setAttributeNode","Quirks","firePostRender","directionality","getDirectionality","protect","initEditorWithInitialContent","startContent","loadInitialContent","initContentBody","skipWrite","orgVisibility","iframeHTML","bodyElement","contentAreaContainer","uploader","imageScanner","toBlobInfo","findFirst","mime","cachedBlobInfo","removeByUri","revokeObjectURL","urlFilters","changeHandler","lastChangedLevel","fireIfChanged","UploadChangeHandler","aliveGuard","replaceString","replaceImageUrl","targetUrl","replacementUrl","replacementString","replaceUrlInUndoStack","uploadImages","scanForImages","imageInfos","imagesToRemove","filteredResult","uploadInfo","shouldReplaceBlobUris","convertURL","replaceImageUriInView","uploadError","uploadUri","uploadImagesAuto","isValidDataUriImage","imgElm","dataImgFilter","getImagesDataImgFilter","resultItem","replaceBlobUris","source_view","addFilter","EditorUpload","hex_colors","force_hex_style_colors","createParser","boolean_attributes","move_caret_before_on_enter_elements","non_empty_elements","short_ended_elements","text_inline_elements","whitespace_elements","mkSerializerSettings","annotator","_nodeChangeDispatcher","startData","longpressFired","debounceLongpress","distX","distY","isFarEnough","isEqualNode","setup$e","preventSummaryToggle","filterDetails","setup$3","detail","normalizeSelection","setup$2","setup$4","addCommand","deleteCommand","forwardDeleteCommand","setup$f","setup$d","getPlaceholder","updatePlaceholder","isNonTypingKeyboardEvent","showPlaceholder","isTypingKeyboardEvent","isForcedRootBlockFalse","isVisuallyEmpty","firePlaceholderToggle","setup$g","setupRtcThunk","editorCast","rtcPlugin","getRtcSetup","nul","makeNoopAdaptor","rtcEditor","defaultVars","_undoManager","_locks","_index","_node","_similar","_rfl","_format","_details","getRawModel","makeRtcAdaptor","rtc","isRemote","setup$i","setupRtc","setProgressState","_rtcMode","DOM$5","createIframe","customAttrs","iframe","iframeTranslatedTitle","getIframeTitle","ifr","getIframeAttrs","frameBorder","allowTransparency","isDomainRelaxed","domain","hostname","bodyUuid","domainRelaxUrl","relaxDomain","iframeContainer","getDocType","getDocumentBaseUrl","documentBaseUrl","getURI","bodyId","getBodyId","bodyClass","getBodyClass","getIframeHtml","DOM$4","initPlugin","initializedPlugins","plugin","Plugin","pluginInstance","pluginInitError","trimLegacyPrefix","createThemeFalseResult","editorContainer","renderThemeUi","orgDisplay","renderUI","renderFromLoadedTheme","iframeHeight","renderFromThemeFunc","renderThemeFalseIframe","renderThemeFalse","iconPackName","currentIcons","loadIcons","svgData","icon","addIcon","initIcons","Theme","initTheme","initPlugins","renderInfo","uiApiFacade","disable","isDisabled","enable","augmentEditorUiApi","boxInfo","hidden","init$1","DOM$3","hasSkipLoadPrefix","getIconsUrlMetaFromName","scriptLoader","themeUrl","getThemeUrl","loadTheme","languageCode","languageUrl","getLanguageUrl","url_1","languageLoadError","loadLanguage","defaultIconsUrl","customIconsUrl","getIconsUrl","getIconsUrlMetaFromUrl","cat","urlMeta","iconsLoadError","getExternalPlugins$1","depPlugin","url_2","loadPlugins","legacyPropNames","getFontProp","legacyPropName","getProperty","getSpecifiedFontProp","getComputedFontProp","getFontSize","getFontFamily","findFirstCaretElement","mapRange","mapper","binder","getCaretElement","bindRange","fromFontSizeNumber","fontSizeNumber","getFontStyleValues","fontClasses","getFontSizeClasses","normalizeFontNames","font","fonts","each$5","EditorCommands","commands","setupCommands","skip_focus","customCommand","queryCommandValue","addCommands","commandList","addQueryStateHandler","addQueryValueHandler","hasCustomCommand","execNativeCommand","isFormatMatch","storeSelection","selectionBookmark","_command","_ui","skipFocus","bookmarkRng","contentEditableHost","getContentEditableHost","queryCommandEnabled","align","listParent","fontNameAction","fontSizeAction","lineHeightAction","customCode","processValue","insertAtCaret","anchor","editingHost","selectNodeContents","alignStates","Undo","Redo","fontNameQuery","fontSizeQuery","specifiedStyle","lineHeightQuery","internalContentEditableAttr","remove$5","remove$4","get$4","cleanClass","setContentEditable","toggleReadOnly","removeFakeSelection","hasUiFocus","hasEditorOrUiFocus","restoreFakeSelection","registerFilters","nativeEvents","EventDispatcher","bindings","toggleEvent","isNative","lcName","beforeFire","wrappedCallback","currentName","bindingName","filteredHandlers","getEventDispatcher","_eventDispatcher","toggleNativeEvent","Observable","bubble","dispatcherArgs","DOM$2","getEventTarget","eventName","eventRoot","isListening","isClickEvent","getAnchorHrefOpt","targetEl","numChars","removeFromStart","processReadonlyEvents","bindEventDelegate","delegate","delegates","eventRootElm","editors","EditorObservable","_pendingNativeEvents","unbindAllNativeEvents","defaultModes","switchToMode","activeMode","availableModes","oldMode","newMode","activate","deactivate","editorReadOnly","fireSwitchMode","each$4","explode$1","keyCodeLookup","f1","f2","f3","f4","f5","f6","f7","f8","f9","f10","f11","f12","modifierNames","parseShortcut","shortcut","charCode","access","alt","ctrl","meta","Shortcuts","pendingPatterns","hasModifier","isFunctionKey","matchShortcut","subpatterns","executeShortcutAction","desc","cmdFunc","normalizeCommandFunc","createShortcut","each$3","queryParts","DEFAULT_PORTS","ftp","http","https","mailto","URI","baseUri","base_uri","source","isProtocolRelative","protocol","toAbsPath","urlMatch","part","userInfo","port","uriComponents","pathname","setPath","pathMatch","file","toRelative","relativeUri","tu","uu","toRelPath","noHost","absoluteUri","isSameOrigin","defaultPort","breakPoint","normalizedBase","outPath","nb","normalizedPath","noProtoHost","DOM$1","extend$3","each$2","Editor","buttons","menuItems","popups","contextMenus","contextToolbars","sidebars","bridge","loadedCSS","isNotDirty","documentBaseURL","baseDefaults","document_base_url","add_form_submit_trigger","submit_patch","add_unload_trigger","convert_urls","relative_urls","remove_script_host","visual","hidden_input","getDefaultSettings","getEditorSettings","base_url","_setBaseUrl","baseURI","referrer_policy","language_load","editorCommands","cache_suffix","addButton","addGroupToolbarButton","addToggleButton","addMenuButton","addSplitButton","addMenuItem","addNestedMenuItem","addToggleMenuItem","addAutocompleter","addContextMenu","addContextToolbar","addContextForm","addSidebar","modeInstance","design","registerReadOnlyContentFilters","registerReadOnlySelectionBlockers","setMode","registerMode","render","snapshot","clone$3","getStyleSheetLoader","isInline","formElement","hasHiddenInput","formEventDelegate","resetContent","shouldPatchSubmit","submit","_mceOldSubmit","triggerSave","windowManager","isEncodingXml","save","shouldAddFormSubmitTrigger","shouldAddUnloadTrigger","_beforeUnload","set_dirty","callbackLookup","getParamObject","hasPlugin","is_removing","getContent$2","initialContent","oldState","urlconverter_callback","addVisual$1","fireRemove","restoreOriginalStyles","fireDetach","automatic","restoreForm","clearDomReferences","_scanForImages","each$1","extend$2","instanceCounter","boundGlobalEvents","legacyEditors","globalEventDelegate","EditorManager","toggleGlobalEvents","removeEditorFromList","targetEditor","oldEditors","isQuirksMode","compatMode","majorVersion","minorVersion","releaseDate","i18n","tinymce","tinyMCEPreInit","srcScript","currentScript","pluginBaseUrls","plugin_base_urls","pluginBaseUrl","invalidInlineTargets","createId","provideResults","initEditors","initCount","createEditor","forms","editor_deselector","editor_selector","findTargets","isInvalidInlineTarget","addI18n","tasks","resultFns","extendClass","initializing","min$1","max$1","round$1","relativePosition","targetW","targetH","relChars","create$2","Rect","inflate","findBestRelativePosition","constrainRect","rels","intersect","cropRect","x1","y1","clamp","clampRect","fixedSize","cx2","cy2","underflowX1","underflowY1","overflowX2","overflowY2","fromClientRect","Resource","loadErrMsg","runErrMsg","task","waiter","resolveCb","rejectCb","complete","completer","awaiter","extend$1","Class","_super","mixins","mixin","Mixins","dummy","Methods","Properties","fieldName","Statics","Defaults","member","createMethod","localStorage","JSONUtils","stringify","hexCode","JSONP","XHR","ready","success_scope","error_scope","overrideMimeType","content_type","crossDomain","setRequestHeader","requestheaders","JSONRequest","sendRPC","ecb","scb","xhrArgs","ty","setItem","removeItem","storage","getItem","publicApi","geom","util","LocalStorage","Color","hue","saturation","brightness","side","chroma","hsvToRgb","toRgb","toHsv","minRGB","maxRGB","rgb2hsv","ImageUploader","showNotification","TreeWalker","Serializer","Selection","isMac","tinyMCE","exportToWindowGlobal","exportToModuleLoaders","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","getter","__esModule","definition","globalThis","React","ReactDOM","SearchAPI","api_url","on_api_error","endpoint","request","get_api_url","headers","get_csrf_token","Request","fetch","ok","catalog","forEach","depth","entries","get_json","dataset","SearchField","input_field_ref","on_focus","on_blur","on_change","on_keydown","on_keypress","on_clear_click","on_search_click","get_search_value","on_search","which","on_clear","on_arrow_key","on_enter","autoComplete","onKeyDown","onKeyPress","onChange","onFocus","onBlur","zIndex","onClick","jQuery","currentLanguage","catalogs","ttl","valueOf","configure","config","_setCatalog","_storeCatalog","getUrl","loadCatalog","MessageFactory","msgid","keywords","msgstr","regexp","keyword","_t","I18N","SearchResults","on_select","on_page","on_prev_page","on_next_page","on_close","on_mouse_over","value_key","columns","get_columns","column","get_results","minWidth","get_value_key","get_result_value","cursor","focused","onMouseOver","build_columns","searchterm","get_column_names","highlighted","highlight","dangerouslySetInnerHTML","__html","used","rx","replaceAll","pages","page","first_page","last_page","crop_before","crop_after","next_url","prev_url","has_results","get_style","build_close_button","build_header_columns","build_rows","build_prev_button","build_pages","build_next_button","SelectedValues","on_deselect","display_template","records","interpolate","get_selected_values","review_state","render_display_template","set_values","build_selected_items","QuerySelectWidgetController","value_query_index","b_start","results_table_width","root_el","parse_json","goto_page","clear_results","select_focused","deselect","navigate_results","on_click","focus_row","on_flush","on_sync","fix_dropdown_position","widget","field_rect","dropdown_rect","body_rect","body_height","body_width","dropdown_height","dropdown_width","X","Y","event_name","event_data","CustomEvent","bubbles","multi_valued","hide_input_after_select","search_index","search_term","search_wildcard","endsWith","limit","column_names","field_name","get_search_query","search_query","url_params","make_query","toggle_loading","set_results_data","fetch_results","setState","trigger_custom_event","clear_results_after_select","rowindex","searchvalue","at","allow_user_value","current_values","to_sync","sync_records","missing","value_query","flush","root_class","show_search_field","is_disabled","AddressWidgetAPI","portal_url","get_url","LocationSelector","locations","render_options","AddressField","visible","is_location_selector","is_visible","render_element","Address","subdivision1","subdivision2","city","zip","address","address_type","on_country_change","on_subdivision1_change","on_subdivision2_change","on_city_change","on_zip_change","on_address_change","force_array","subdivisions1","subdivisions2","labels","subfield","get_input_id","get_input_name","get_label","get_subdivisions1","get_subdivisions2","AddressWidgetController","fetch_subdivisions","subdivisions","subdivision","html_items","section_title","render_items","paste_data_images","content_css","phone_widgets","error_codes","init_phone_input","intlTelInputId","initial_country","preferred_countries","error_code","error_msg"],"sourceRoot":""}