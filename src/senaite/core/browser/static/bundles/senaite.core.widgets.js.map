{"version":3,"file":"senaite.core.widgets.js","mappings":"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CAAY7Y,EAAOxO,GACvC2E,GAAMyiB,EAAQthC,GAAKuqB,GAC5B,CACF,EACIiX,GAAYH,GA/BD,CACb,KACA,KACA,KACA,KACA,KACA,OA0BEI,GAAYJ,GArHH,CACX,UACA,QACA,UACA,MACA,KACA,aACA,SACA,OACA,WACA,SACA,SACA,OACA,OACA,MACA,UACA,UACA,OACA,IACA,KACA,WACA,KACA,SACA,UACA,SACA,aACA,KACA,KACA,KACA,KACA,KACA,KACA,UACA,MACA,MACA,YACA,OACA,MACA,KACA,KACA,KACA,KACA,QACA,QACA,QACA,QACA,KACA,KACA,KACA,YAwEEK,GAAa,SAAUnX,GACzB,OAAOmC,GAAYnC,KAAUkX,GAAUlX,EACzC,EACIoX,GAAS,SAAUpX,GACrB,OAAOmC,GAAYnC,IAAwB,OAAfvqB,GAAKuqB,EACnC,EACIqX,GAAgBP,GAnEH,CACf,KACA,KACA,KACA,KACA,KACA,KACA,IACA,MACA,UACA,MACA,OACA,aACA,SACA,MACA,WACA,SACA,SACA,UACA,UACA,SACA,QACA,MACA,WA6CEQ,GAASR,GA9BD,CACV,KACA,KACA,OA4BES,GAAaT,GApCC,CAChB,KACA,KACA,OAkCEU,GAAiBV,GA3ED,CAClB,QACA,QACA,UAyEEW,GAAgBX,GAhFH,CACf,KACA,OA+EEY,GAAsBZ,GA7BT,CACf,MACA,SACA,WACA,UAgCEa,GAAO,IAQPC,GATY,SAUZC,GARW,SAAUC,GACvB,MAHc,WAGPA,CACT,EAOIC,GANa,SAAUh1B,GACzB,OAAOA,EAAEC,QAAQ,UAAW,GAC9B,EAMIg1B,GAAc9Q,GACd+Q,GAAWjQ,GACXkQ,GAA0B,SAAUlY,GAItC,OAHIiY,GAASjY,KACXA,EAAOA,EAAK5hB,YAEP45B,GAAYhY,IAASA,EAAKjiB,aAAa,iBAChD,EACIo6B,GAAyB,SAAUnY,GACrC,OAAOiY,GAASjY,IAAS6X,GAAO7X,EAAKgN,KACvC,EACIoL,GAAqB,SAAUpY,GACjC,OAAOkY,GAAwBlY,IAASmY,GAAuBnY,EACjE,EACIqY,GAAa,SAAUrY,GACzB,OAAOA,EAAKoD,aAAepD,EAAKqD,YAAc+E,GAAOpI,EAAKoD,WAC5D,EAmCIkV,GAAiB,SAAU10B,GAC7B,IAAIlG,EAAYkG,EAAIlG,YACpB,QAAKsqB,GAAStqB,KAGPA,EAAUsvB,KAAKrtB,OAAOiE,EAAI20B,YAAcX,IAAUh0B,EAAI40B,aAAeL,GAAuBz6B,EAAUmlB,iBAC/G,EACI4V,GAAgB,SAAU70B,GAC5B,IAAIlG,EAAYkG,EAAIlG,YACpB,QAAKsqB,GAAStqB,KAGPA,EAAUsvB,KAAKrtB,OAAOiE,EAAI20B,SAAW,KAAOX,IAAUh0B,EAAI80B,WAAaP,GAAuBz6B,EAAUolB,aACjH,EAwBI6V,GAA6B,SAAU3Y,GACzC,OAAOiY,GAASjY,IAASA,EAAKgN,KAAK,KAAO4K,EAC5C,EACIgB,GAA2B,SAAU5Y,GACvC,OAAOiY,GAASjY,IAASA,EAAKgN,KAAKhN,EAAKgN,KAAKz3B,OAAS,KAAOqiC,EAC/D,EAQIiB,GAA0B,SAAUC,GACtC,OAAIA,GAAkBA,EAAe/6B,aAAa,mBAN9Cg7B,GADAC,EAQUF,EARAG,qBAAqB,OAClBD,EAAIzjC,OAAS,GAC1BqyB,GAAUmR,IACZA,EAAO36B,WAAW8J,YAAY6wB,GAM9BD,EAAexuB,gBAAgB,kBAC/BwuB,EAAexuB,gBAAgB,kBAC/BwuB,EAAexuB,gBAAgB,SAC/BwuB,EAAexuB,gBAAgB,eACxBwuB,GAEF,KAhBS,IACZE,EACAD,CAeN,EACIG,GAA+B,SAAU9b,GAC3C,OAAO8a,GAAwB9a,EAAM+b,eACvC,EAEIC,GAA0B9Q,GAC1B+Q,GAA2B9Q,GAC3B+Q,GAASlR,GACTmR,GAAWvR,GACXwR,GAAuBrS,GAAe,CACxC,SACA,QACA,aAEEsS,GAAiBtS,GAAe,CAClC,MACA,QACA,WACA,KACA,SACA,QACA,QACA,SACA,UAEEuS,GAAYvS,GAAe,CAAC,UAC5BwS,GAAqBvB,GACrBwB,GAAqB,SAAU5Z,GACjC,OAAI2Z,GAAmB3Z,KAGnBuZ,GAASvZ,IACHwZ,GAAqBxZ,EAAK5hB,YAE7Bq7B,GAAezZ,IAASsZ,GAAOtZ,IAAS0Z,GAAU1Z,IAAS6Z,GAA4B7Z,GAChG,EAII6Z,GAA8B,SAAU7Z,GAC1C,OAAgC,IAJb,SAAUA,GAC7B,OAAOkH,GAAYlH,IAA+C,SAAtCA,EAAKppB,aAAa,eAChD,CAESkjC,CAAe9Z,IAAmBqZ,GAAyBrZ,EACpE,EAuBI+Z,GAA6B,SAAU/Z,EAAMlB,GAC/C,OAAO8a,GAAmB5Z,IAvBT,SAAUA,EAAMlB,GACjC,IAAKkB,EAAOA,EAAK5hB,WAAY4hB,GAAQA,IAASlB,EAAMkB,EAAOA,EAAK5hB,WAAY,CAC1E,GAAIy7B,GAA4B7Z,GAC9B,OAAO,EAET,GAAIoZ,GAAwBpZ,GAC1B,OAAO,CAEX,CACA,OAAO,CACT,CAaqCga,CAAaha,EAAMlB,EACxD,EAEImb,GAAqB,eACrBC,GAAmB,SAAUzZ,GAC/B,OAAOwZ,GAAmBlgC,KAAK0mB,EACjC,EAaI0Z,GAAc,SAAUna,EAAMqW,GAChC,OAAOuD,GAAmB5Z,KAA0C,IAPnD,SAAUA,EAAMqW,GACjC,OAAOrO,GAAShI,IAASka,GAAiBla,EAAKgN,QAAyD,IANxE,SAAUhN,EAAMqW,GAChD,IA1MyBjW,EAAiBmQ,EA0MtC6J,EAAcla,GAAqBmW,GAEvC,OA5MyBjW,EA2MTF,GAAqBF,GA3MKuQ,EA4MDlhB,EAAM7C,GAAI4tB,GA3M5CxI,GAAWxR,EA2MW,WA3MMmQ,GAAQrgB,QA4M7C,CAE0DmqB,CAA4Bra,EAAMqW,EAC5F,CAKqCiE,CAAata,EAAMqW,IAJpC,SAAUrW,GAC5B,OAAOkH,GAAYlH,IAA2B,MAAlBA,EAAKiC,WAAqBjC,EAAKjiB,aAAa,UAAYiiB,EAAKjiB,aAAa,SAAWiiB,EAAKjiB,aAAa,MACrI,CAE+Ew8B,CAAcva,IAASwa,GAAWxa,EACjH,EACIwa,GAAaz8B,GAAa,qBAC1B08B,GAAY18B,GAAa,kBACzB28B,IAA+B,iBAAkB,MAlgD5C,SAAU1a,GACf,OAAOkH,GAAYlH,IAigD8B,QAjgDrBA,EAAKppB,aAigDF,iBAhgDjC,GAmiDE+jC,GAAY,SAAUxQ,EAAKyQ,GAI7B,YAHkB,IAAdA,IACFA,GAAY,GApCE,SAAUC,EAAYD,GACtC,IAAIE,EAAU,EACd,GAAIX,GAAYU,EAAYA,GAC1B,OAAO,EAEP,IAAI7a,EAAO6a,EAAWzX,WACtB,IAAKpD,EACH,OAAO,EAET,IAAI+a,EAAS,IAAI5E,GAAcnW,EAAM6a,GACrC,EAAG,CACD,GAAID,EAAW,CACb,GAAIF,GAAW1a,GAAO,CACpBA,EAAO+a,EAAOj1B,MAAK,GACnB,QACF,CACA,GAAI20B,GAAUza,GAAO,CACnBA,EAAO+a,EAAOj1B,OACd,QACF,CACF,CACA,GAAIsiB,GAAOpI,GACT8a,IACA9a,EAAO+a,EAAOj1B,WAFhB,CAKA,GAAIq0B,GAAYna,EAAM6a,GACpB,OAAO,EAET7a,EAAO+a,EAAOj1B,MAJd,CAKF,OAASka,GACT,OAAO8a,GAAW,CAEtB,CAKSE,CAAY7Q,EAAIlK,IAAK2a,EAC9B,EAKIK,GAAkB,SAAUjb,EAAMlB,GACpC,OAAOzQ,EAAc2R,KAAUma,GAAYna,EAAMlB,IAASqY,GAAWjX,GAAqBF,IAC5F,EAQIkb,GAAmB,SAAUlb,GAC/B,OAdW,SAAUA,GACrB,MAAuC,SAAhCA,EAAKiC,SAAS7lB,aACvB,CAYS++B,CAAOnb,IAAgD,aAAvCA,EAAKppB,aAAa,gBAC3C,EAUIwkC,GAAW,SAAUnb,EAAKD,EAAMlB,GAClC,IAAIuX,EAAWvX,GAAQkB,EACvB,GAAIkH,GAAYlH,IAASkb,GAAiBlb,GACxC,OAAOA,EAGT,IADA,IAAIiD,EAAWjD,EAAKO,WACXjrB,EAAI2tB,EAAS1tB,OAAS,EAAGD,GAAK,EAAGA,IACxC8lC,GAASnb,EAAKgD,EAAS3tB,GAAI+gC,GAE7B,GAAInP,GAAYlH,GAAO,CACrB,IAAIqb,EAAkBrb,EAAKO,WACI,IAA3B8a,EAAgB9lC,QAAgB2lC,GAAiBG,EAAgB,KACnErb,EAAK5hB,WAAWC,aAAag9B,EAAgB,GAAIrb,EAErD,CAIA,OArBe,SAAUA,GACzB,OAAOmI,GAAmBnI,IAASkI,GAAalI,EAClD,CAgBOsb,CAAWtb,IAAUma,GAAYna,EAAMqW,IArB1B,SAAUrW,GAC5B,QAAOkH,GAAYlH,IAAQA,EAAKO,WAAWhrB,OAAS,CACtD,CAmB4DgmC,CAAcvb,IAxBrD,SAAUA,EAAMlB,GACnC,OAAOkJ,GAAShI,IAASA,EAAKgN,KAAKz3B,OAAS,GAXd,SAAUyqB,EAAMlB,GAC9C,IAAIwX,EAAO,IAAIH,GAAcnW,EAAMlB,GAAMwX,MAAK,GAC1CxwB,EAAO,IAAIqwB,GAAcnW,EAAMlB,GAAMhZ,MAAK,GAC1C01B,EAAertB,EAAYmoB,IAAS2E,GAAgB3E,EAAMxX,GAC1D2c,EAAettB,EAAYrI,IAASm1B,GAAgBn1B,EAAMgZ,GAC9D,OAAO0c,GAAgBC,CACzB,CAKmDC,CAA0B1b,EAAMlB,EACnF,CAsBoF6c,CAAe3b,EAAMqW,IACrGpW,EAAI7c,OAAO4c,GAENA,CACT,EAEI4b,GAAY5d,GAAME,QAClB2d,GAAmB,0EACnBC,GAAkB,kEAClBC,GAAiB,aACjBC,GAAe,kCACfC,GAAW,CACb,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,KAEHC,GAAe,CACjB,IAAK,SACL,IAAM,QACN,IAAK,OACL,IAAK,OACL,IAAK,QACL,IAAK,SAEHC,GAAkB,CACpB,OAAQ,IACR,OAAQ,IACR,QAAS,IACT,SAAU,IACV,SAAU,KAORC,GAAsB,SAAUje,EAAOke,GACzC,IAAI/mC,EAAGgnC,EAAKC,EACRxF,EAAS,CAAC,EACd,GAAI5Y,EAAO,CAGT,IAFAA,EAAQA,EAAME,MAAM,KACpBge,EAAQA,GAAS,GACZ/mC,EAAI,EAAGA,EAAI6oB,EAAM5oB,OAAQD,GAAK,EACjCgnC,EAAMjwB,OAAOmwB,aAAaxyB,SAASmU,EAAM7oB,GAAI+mC,IACxCH,GAAaI,KAChBC,EAAS,IAAMpe,EAAM7oB,EAAI,GAAK,IAC9ByhC,EAAOuF,GAAOC,EACdxF,EAAOwF,GAAUD,GAGrB,OAAOvF,CACT,CACF,EACI0F,GAAgBL,GAAoB,+rEAAwzE,IAC51EM,GAAY,SAAUjc,EAAMkc,GAC9B,OAAOlc,EAAKzd,QAAQ25B,EAAOd,GAAmBC,IAAiB,SAAUQ,GACvE,OAAOJ,GAAaI,IAAQA,CAC9B,GACF,EAMIM,GAAgB,SAAUnc,EAAMkc,GAClC,OAAOlc,EAAKzd,QAAQ25B,EAAOd,GAAmBC,IAAiB,SAAUQ,GACvE,OAAIA,EAAI/mC,OAAS,EACR,MAAsC,MAA7B+mC,EAAIO,WAAW,GAAK,QAAiBP,EAAIO,WAAW,GAAK,OAAS,OAAS,IAEtFX,GAAaI,IAAQ,KAAOA,EAAIO,WAAW,GAAK,GACzD,GACF,EACIC,GAAc,SAAUrc,EAAMkc,EAAMI,GAEtC,OADAA,EAAWA,GAAYN,GAChBhc,EAAKzd,QAAQ25B,EAAOd,GAAmBC,IAAiB,SAAUQ,GACvE,OAAOJ,GAAaI,IAAQS,EAAST,IAAQA,CAC/C,GACF,EAoDIU,GAAW,CACbN,UAAWA,GACXO,aAxEiB,SAAUxc,GAC3B,OAAQ,GAAKA,GAAMzd,QAAQ+4B,IAAgB,SAAUO,GACnD,OAAOJ,GAAaI,IAAQA,CAC9B,GACF,EAqEEM,cAAeA,GACfE,YAAaA,GACbI,cAxDkB,SAAUznC,EAAMsnC,GAClC,IAAII,EAAcf,GAAoBW,IAAaN,GAkB/CW,EAAUxB,GAAUnmC,EAAKuN,QAAQ,MAAO,MAC5C,OAAIo6B,EAAQC,OAASD,EAAQv6B,QAlBD,SAAU4d,EAAMkc,GAC1C,OAAOlc,EAAKzd,QAAQ25B,EAAOd,GAAmBC,IAAiB,SAAUQ,GACvE,YAA0BlnC,IAAtB8mC,GAAaI,GACRJ,GAAaI,QAEGlnC,IAArB+nC,EAAYb,GACPa,EAAYb,GAEjBA,EAAI/mC,OAAS,EACR,MAAsC,MAA7B+mC,EAAIO,WAAW,GAAK,QAAiBP,EAAIO,WAAW,GAAK,OAAS,OAAS,IAEtF,KAAOP,EAAIO,WAAW,GAAK,GACpC,GACF,EAQIO,EAAQC,MACNN,EARkB,SAAUtc,EAAMkc,GACtC,OAAOG,GAAYrc,EAAMkc,EAAMQ,EACjC,EASSL,GAELM,EAAQv6B,QACH+5B,GAEFF,EACT,EAwBEY,OAvBW,SAAU7c,GACrB,OAAOA,EAAKzd,QAAQg5B,IAAc,SAAUjhC,EAAK8H,GAC/C,OAAIA,GAEAA,EADsC,MAApCA,EAAQlD,OAAO,GAAGvD,cACV4N,SAASnH,EAAQxF,OAAO,GAAI,IAE5B2M,SAASnH,EAAS,KAEhB,OACZA,GAAW,MACJwJ,OAAOmwB,aAAa,OAAS35B,GAAW,IAAK,OAAmB,KAAVA,KAExDo5B,GAASp5B,IAAYwJ,OAAOmwB,aAAa35B,GAE3Cs5B,GAAgBphC,IAAQ0hC,GAAc1hC,IA/F9B,SAAU0lB,GAC3B,IAAI0J,EAAMjK,GAAqB,OAAOD,IAEtC,OADAkK,EAAI9iB,UAAYoZ,EACT0J,EAAIzF,aAAeyF,EAAIoT,WAAa9c,CAC7C,CA2FyD+c,CAAaziC,EACpE,GACF,GAUI0iC,GAAW,CAAC,EAAGC,GAAW,CAAC,EAC3BC,GAAY3f,GAAME,QAAS0f,GAAS5f,GAAMpN,KAAMitB,GAAW7f,GAAMS,OAAQqf,GAAY9f,GAAM2B,QAASoe,GAAY/f,GAAMO,QACtHyf,GAAU,SAAU7f,EAAOC,GAE7B,OADAD,EAAQH,GAAM/T,KAAKkU,IACJA,EAAME,MAAMD,GAAS,KAAO,EAC7C,EACI6f,GAAY,SAAUC,EAAcC,GACtC,IAAI3kC,EAAQmkC,GAAUO,EAAc,IAAKP,GAAUO,EAAaE,cAAe,MAC/E,OAAOP,GAASrkC,EAAO2kC,EACzB,EACIE,GAA2B,SAAUC,GACvC,OAAOL,GAAU,oDAAqDK,EAAOC,uBAC/E,EA6OIC,GAAoB,SAAUhlC,EAAOilC,GACvC,IAAIC,EAUJ,OATIllC,IACFklC,EAAS,CAAC,EACW,iBAAVllC,IACTA,EAAQ,CAAE,IAAKA,IAEjBokC,GAAOpkC,GAAO,SAAUA,EAAOjD,GAC7BmoC,EAAOnoC,GAAOmoC,EAAOnoC,EAAI6nC,eAA0B,QAATK,EAAiBd,GAAUnkC,EAAO,QAAUskC,GAAUtkC,EAAO,OACzG,KAEKklC,CACT,EACIC,GAAS,SAAUtL,GACrB,IAAI7O,EAAW,CAAC,EACZvB,EAAW,CAAC,EACZ2b,EAAkB,GAClBC,EAAoB,CAAC,EAAGC,EAAkB,CAAC,EAC3CC,EAAoB,SAAUC,EAAQd,EAAcC,GACtD,IAAI3kC,EAAQ65B,EAAS2L,GAUrB,OATKxlC,EAOHA,EAAQmkC,GAAUnkC,EAAO,OAAQmkC,GAAUnkC,EAAM4kC,cAAe,UANhE5kC,EAAQikC,GAASuB,MAEfxlC,EAAQykC,GAAUC,EAAcC,GAChCV,GAASuB,GAAUxlC,GAKhBA,CACT,EAEIylC,EA5Qc,SAAU//B,GAC5B,IACIggC,EAAkBC,EAClBC,EAAiBC,EAAaC,EAAmBC,EAFjDjB,EAAS,CAAC,EAGVlkC,EAAM,SAAU3E,EAAM+pC,EAAYvc,GACpC,IAAIwc,EAAIC,EAAiB92B,EACrB+2B,EAAa,SAAU7qB,EAAOvc,GAChC,IACIjD,EAAGsf,EADH1Y,EAAM,CAAC,EAEX,IAAK5G,EAAI,EAAGsf,EAAIE,EAAMvf,OAAQD,EAAIsf,EAAGtf,IACnC4G,EAAI4Y,EAAMxf,IAAMiD,GAAO,CAAC,EAE1B,OAAO2D,CACT,EAEAsjC,EAAaA,GAAc,GACH,iBAFxBvc,EAAWA,GAAY,MAGrBA,EAAW+a,GAAQ/a,IAErB,IAAImE,EAAQ4W,GAAQvoC,GAEpB,IADAgqC,EAAKrY,EAAM7xB,OACJkqC,KAKL72B,EAAU,CACR42B,WAAYG,EALdD,EAAkB1B,GAAQ,CACxBkB,EACAM,GACA5P,KAAK,OAGL8P,gBAAiBA,EACjBzc,SAAU0c,EAAW1c,EAAUya,KAEjCY,EAAOlX,EAAMqY,IAAO72B,CAExB,EACIg3B,EAAW,SAAUnqC,EAAM+pC,GAC7B,IAAIC,EAAII,EAAYvqC,EAAGsf,EACnBwS,EAAQ4W,GAAQvoC,GACpBgqC,EAAKrY,EAAM7xB,OAEX,IADA,IAAIkI,EAAQugC,GAAQwB,GACbC,KAEL,IADAI,EAAavB,EAAOlX,EAAMqY,IACrBnqC,EAAI,EAAGsf,EAAInX,EAAMlI,OAAQD,EAAIsf,EAAGtf,IACnCuqC,EAAWL,WAAW/hC,EAAMnI,IAAM,CAAC,EACnCuqC,EAAWH,gBAAgBliC,KAAKC,EAAMnI,GAG5C,EACA,OAAImoC,GAASv+B,GACJu+B,GAASv+B,IAElBggC,EAAmB,wDACnBC,EAAe,sFACfC,EAAkB,wLACL,UAATlgC,IACFggC,GAAoB,8EACpBC,GAAgB,6EAChBC,GAAmB,oGAER,iBAATlgC,IACFggC,GAAoB,YAEpBE,EAAkB,CAChBA,EAFFG,EAAuB,8CAIrB3P,KAAK,KACPgO,GAAOI,GAAQuB,IAAuB,SAAU9pC,GAC9C2E,EAAI3E,EAAM,GAAI2pC,EAChB,IAEAD,EAAe,CACbA,EAFFG,EAAoB,+BAIlB1P,KAAK,KACPyP,EAAc,CACZF,EACAC,GACAxP,KAAK,KACPgO,GAAOI,GAAQsB,IAAoB,SAAU7pC,GAC3C2E,EAAI3E,EAAM,GAAI4pC,EAChB,KAEFA,EAAcA,GAAe,CAC3BF,EACAC,GACAxP,KAAK,KACPx1B,EAAI,OAAQ,WAAY,aACxBA,EAAI,OAAQ,GAAI,sDAChBA,EAAI,wBACJA,EAAI,OAAQ,eACZA,EAAI,OAAQ,+CACZA,EAAI,OAAQ,mCACZA,EAAI,QAAS,qBACbA,EAAI,SAAU,gCACdA,EAAI,OAAQ,0LAAqMilC,GACjNjlC,EAAI,4BAA6B,GAAIilC,GACrCjlC,EAAI,0GAA2G,GAAIglC,GACnHhlC,EAAI,aAAc,OAAQilC,GAC1BjlC,EAAI,KAAM,sBAAuB,MACjCA,EAAI,KAAM,GAAI,MACdA,EAAI,KAAM,QAASilC,GACnBjlC,EAAI,KAAM,GAAI,SACdA,EAAI,IAAK,sCAAuCglC,GAChDhlC,EAAI,IAAK,OAAQglC,GACjBhlC,EAAI,UAAW,gBAAiBilC,GAChCjlC,EAAI,MAAO,kDACXA,EAAI,SAAU,wBAAyBilC,GACvCjlC,EAAI,QAAS,yBACbA,EAAI,SAAU,wDAAyD,CACrEilC,EACA,SACAzP,KAAK,MACPx1B,EAAI,QAAS,cACbA,EAAI,MAAO,OAAQ,CACjBilC,EACA,QACAzP,KAAK,MACPx1B,EAAI,OAAQ,wDACZA,EAAI,QAAS,SAAU,yCAAoD,UAAT8E,EAAmB,OAAS,KAC9F9E,EAAI,WAAY,OAAQ,OACxBA,EAAI,MAAO,QACXA,EAAI,oBAAqB,GAAI,MAC7BA,EAAI,KAAM,GAAI,SACdA,EAAI,KAAM,0BAA2BilC,GACrCjlC,EAAI,KAAM,qCAAsCilC,GAChDjlC,EAAI,OAAQ,2EAA4EilC,GACxFjlC,EAAI,WAAY,qBAAsB,CACpCilC,EACA,UACAzP,KAAK,MACPx1B,EAAI,QAAS,WAAYglC,GACzBhlC,EAAI,QAAS,0NACbA,EAAI,SAAU,4FAAsG,UAAT8E,EAAmBmgC,EAAcD,GAC5IhlC,EAAI,SAAU,4CAA6C,mBAC3DA,EAAI,WAAY,iBAAkB,UAClCA,EAAI,SAAU,iCACdA,EAAI,WAAY,yEAChBA,EAAI,OAAQ,aAAc,CACxBilC,EACA,MACAzP,KAAK,MACPx1B,EAAI,WAAY,GAAIilC,GACP,UAATngC,IACF9E,EAAI,OACJA,EAAI,OAAQ,GAAI,CACdglC,EACA,SACAxP,KAAK,MACPx1B,EAAI,aAAc,GAAIilC,GACtBjlC,EAAI,yBAA0B,GAAIglC,GAClChlC,EAAI,SAAU,eAAgBilC,GAC9BjlC,EAAI,QAAS,+FAAqG,CAChHilC,EACA,gBACAzP,KAAK,MACPx1B,EAAI,QAAS,kFAAwF,CACnGilC,EACA,gBACAzP,KAAK,MACPx1B,EAAI,UAAW,GAAI,cACnBA,EAAI,SAAU,+BACdA,EAAI,QAAS,kCACbA,EAAI,WAAY,GAAI,CAClBglC,EACA,UACAxP,KAAK,MACPx1B,EAAI,+CAAgD,GAAIilC,GACxDjlC,EAAI,SAAU,GAAI,qBAClBA,EAAI,SAAU,GAAI,CAChBilC,EACA,cACAzP,KAAK,MACPx1B,EAAI,OAAQ,WAAYglC,GACxBhlC,EAAI,SAAU,OAAQilC,GACtBjlC,EAAI,UAAW,uDACfA,EAAI,SAAU,gBAAiBglC,GAC/BhlC,EAAI,WAAY,YAAaglC,GAC7BhlC,EAAI,QAAS,iCAAkCglC,GAC/ChlC,EAAI,UAAW,OAAQ,CACrBilC,EACA,WACAzP,KAAK,MACPx1B,EAAI,SAAU,mDAEH,iBAAT8E,IACF0gC,EAAS,SAAU,sBACnBA,EAAS,QAAS,aAClBA,EAAS,SAAU,qFACnBA,EAAS,QAAS,4BAClBA,EAAS,QAAS,kBAClBA,EAAS,IAAK,iCACdA,EAAS,KAAM,SACfA,EAAS,SAAU,0EACnBA,EAAS,MAAO,4CAChBA,EAAS,SAAU,iEACnBA,EAAS,gBAAiB,mBAC1BA,EAAS,QAAS,gBAClBA,EAAS,UACTA,EAAS,YACTA,EAAS,yCAA0C,SACnDA,EAAS,KAAM,gBACfA,EAAS,KAAM,QACfA,EAAS,iBAAkB,WAC3BA,EAAS,MAAO,mBAChBA,EAAS,KAAM,4BACfA,EAAS,UAAW,UACpBA,EAAS,QAAS,mEAClBA,EAAS,MAAO,mCAChBA,EAAS,WAAY,mCACrBA,EAAS,QAAS,6BAClBA,EAAS,KAAM,qCACfA,EAAS,KAAM,8DACfA,EAAS,OAAQ,UACjBA,EAAS,KAAM,yEACfA,EAAS,QAAS,6BAClBA,EAAS,QAAS,6BAClBA,EAAS,OAAQ,UACjBA,EAAS,OAAQ,6CAEN,UAAT1gC,IACF0gC,EAAS,+BAAgC,aACzCA,EAAS,iBAAkB,eAC3BA,EAAS,IAAK,YACdA,EAAS,kBAAmB,eAC5BA,EAAS,MAAO,WAChBA,EAAS,SAAU,6CAErBhC,GAAOI,GAAQ,8BAA8B,SAAUvoC,GACjD6oC,EAAO7oC,WACF6oC,EAAO7oC,GAAMwtB,SAASxtB,EAEjC,WACO6oC,EAAOwB,QAAQ7c,SAAS8c,aACxBzB,EAAOnzB,OACdsyB,GAASv+B,GAAQo/B,EACVA,EACT,CAiCoB0B,EADlB3M,EAAWA,GAAY,CAAC,GACiBiL,SACZ,IAAzBjL,EAAS4M,cACX5M,EAAS6M,eAAiB,QAE5B,IAAIC,EAAc3B,GAAkBnL,EAAS+M,cACzCC,EAAgB7B,GAAkBnL,EAASiN,eAAgB,OAC3DC,EAAe/B,GAAkBnL,EAASmN,cAAe,OACzDC,EAAwB1B,EAAkB,sBAAuB,qEACjE2B,EAAyB3B,EAAkB,wBAAyB,mDACpE4B,EAAwB5B,EAAkB,uBAAwB,+FAClE6B,EAAc7B,EAAkB,qBAAsB,iIACtD8B,EAAmC,8CACnCC,EAAsB/B,EAAkB,qBAAsB8B,EAAmC,OAAQF,GACzGI,EAAoChC,EAAkB,sCAAuC8B,EAAmC,SAAUF,GAC1IK,EAAuBjC,EAAkB,sBAAuB,sIAChEkC,EAAmBlC,EAAkB,iBAAkB,iJAA4JiC,GACnNE,EAAwBnC,EAAkB,uBAAwB,4EACtEnB,IAAQvK,EAAS8N,SAAW,oEAAoE9iB,MAAM,MAAM,SAAU5oB,GACpHqpC,EAAgBrpC,GAAQ,IAAI2rC,OAAO,KAAO3rC,EAAO,SAAU,KAC7D,IACA,IAAI4rC,EAAkB,SAAU5pB,GAC9B,OAAO,IAAI2pB,OAAO,IAAM3pB,EAAIzU,QAAQ,WAAY,OAAS,IAC3D,EACIs+B,EAAmB,SAAUC,GAC/B,IAAIC,EAAI7jC,EAAI8jC,EAAIC,EAAI7mB,EAASjS,EAAS+zB,EAAMgF,EAAUC,EAAaja,EAAUka,EAAUrC,EAAYE,EAAiB/nB,EAAQmqB,EAAY5C,EAAkB6C,EAAuBvoC,EAC7KwoC,EAAoB,6DAA8DC,EAAiB,oDAAqDC,EAAoB,QAChL,GAAIX,EAAe,CACjB,IAAIY,EAAmBnE,GAAQuD,EAAe,KAK9C,IAJI/c,EAAS,OACX0a,EAAmB1a,EAAS,KAAKgb,WACjCuC,EAAwBvd,EAAS,KAAKkb,iBAEnC8B,EAAK,EAAG7jC,EAAKwkC,EAAiB5sC,OAAQisC,EAAK7jC,EAAI6jC,IAElD,GADA3mB,EAAUmnB,EAAkB7iB,KAAKgjB,EAAiBX,IACrC,CA0BX,GAzBA7pB,EAASkD,EAAQ,GACjB+mB,EAAc/mB,EAAQ,GACtBinB,EAAajnB,EAAQ,GACrB8mB,EAAW9mB,EAAQ,GAGnBjS,EAAU,CACR42B,WAHFA,EAAa,CAAC,EAIZE,gBAHFA,EAAkB,IAKH,MAAX/nB,IACF/O,EAAQw5B,WAAY,GAEP,MAAXzqB,IACF/O,EAAQy5B,aAAc,GAEL,MAAfxnB,EAAQ,KACVjS,EAAQ05B,kBAAmB,GAEzBpD,IACFvrB,GAAOurB,GAAkB,SAAU1lC,EAAOjD,GACxCipC,EAAWjpC,GAAOiD,CACpB,IACAkmC,EAAgBliC,KAAKsR,MAAM4wB,EAAiBqC,IAE1CJ,EAEF,IAAKF,EAAK,EAAGC,GADbC,EAAW3D,GAAQ2D,EAAU,MACFpsC,OAAQksC,EAAKC,EAAID,IAE1C,GADA5mB,EAAUonB,EAAe9iB,KAAKwiB,EAASF,IAC1B,CAWX,GAVA9E,EAAO,CAAC,EACRkF,EAAWhnB,EAAQ,GACnB8M,EAAW9M,EAAQ,GAAG7X,QAAQ,UAAW,KACzC2U,EAASkD,EAAQ,GACjBrhB,EAAQqhB,EAAQ,GACC,MAAbgnB,IACFj5B,EAAQ25B,mBAAqB35B,EAAQ25B,oBAAsB,GAC3D35B,EAAQ25B,mBAAmB/kC,KAAKmqB,GAChCgV,EAAK6F,UAAW,GAED,MAAbX,EAAkB,QACbrC,EAAW7X,GAClB+X,EAAgB+C,OAAO1E,GAAU2B,EAAiB/X,GAAW,GAC7D,QACF,CACIhQ,IACa,MAAXA,IACF/O,EAAQ85B,kBAAoB95B,EAAQ85B,mBAAqB,GACzD95B,EAAQ85B,kBAAkBllC,KAAK,CAC7B/H,KAAMkyB,EACNnuB,MAAOA,IAETmjC,EAAKuB,aAAe1kC,GAEP,MAAXme,IACF/O,EAAQ+5B,iBAAmB/5B,EAAQ+5B,kBAAoB,GACvD/5B,EAAQ+5B,iBAAiBnlC,KAAK,CAC5B/H,KAAMkyB,EACNnuB,MAAOA,IAETmjC,EAAKiG,YAAcppC,GAEN,MAAXme,IACFglB,EAAKkG,YAAclF,GAAUnkC,EAAO,OAGpC0oC,EAAkBnoC,KAAK4tB,IACzB/e,EAAQk6B,kBAAoBl6B,EAAQk6B,mBAAqB,GACzDnG,EAAKoG,QAAU1B,EAAgB1Z,GAC/B/e,EAAQk6B,kBAAkBtlC,KAAKm/B,KAE1B6C,EAAW7X,IACd+X,EAAgBliC,KAAKmqB,GAEvB6X,EAAW7X,GAAYgV,EAE3B,CAGCuC,GAAoC,MAAhB0C,IACvB1C,EAAmBM,EACnBuC,EAAwBrC,GAEtBoC,IACFl5B,EAAQk5B,WAAaF,EACrBpd,EAASsd,GAAcl5B,GAErBs5B,EAAkBnoC,KAAK6nC,IACzBh5B,EAAQm6B,QAAU1B,EAAgBO,GAClChD,EAAgBphC,KAAKoL,IAErB4b,EAASod,GAAeh5B,CAE5B,CAEJ,CACF,EACIo6B,EAAmB,SAAUzB,GAC/B/c,EAAW,CAAC,EACZoa,EAAkB,GAClB0C,EAAiBC,GACjB3D,GAAOqB,GAAa,SAAUr2B,EAASnT,GACrCwtB,EAASxtB,GAAQmT,EAAQqa,QAC3B,GACF,EACIggB,EAAoB,SAAUC,GAChC,IAAIC,EAAsB,aACtBD,IACFzF,GAAS2F,oBAAsB3F,GAAS4F,eAAiB,KACzDzF,GAAOI,GAAQkF,EAAgB,MAAM,SAAUI,GAC7C,IAAIzoB,EAAUsoB,EAAoBhkB,KAAKmkB,GAAOC,EAAwB,MAAf1oB,EAAQ,GAAY2oB,EAAYD,EAAS,OAAS,MAAO9tC,EAAOolB,EAAQ,GAO/H,GANAoI,EAASxtB,GAAQwtB,EAASugB,GAC1B3E,EAAkBppC,GAAQ+tC,EACrBD,IACHtC,EAAiBxrC,EAAK2oC,eAAiB,CAAC,EACxC6C,EAAiBxrC,GAAQ,CAAC,IAEvB+uB,EAAS/uB,GAAO,CACnB,IAAIguC,EAAajf,EAASgf,UAC1BC,EAAa5F,GAAS,CAAC,EAAG4F,IACRnB,wBACXmB,EAAWpB,YAClB7d,EAAS/uB,GAAQguC,CACnB,CACA7F,GAAO3a,GAAU,SAAUra,EAAS86B,GAC9B96B,EAAQ46B,KACVvgB,EAASygB,GAAW96B,EAAUi1B,GAAS,CAAC,EAAG5a,EAASygB,IACpD96B,EAAQnT,GAAQmT,EAAQ46B,GAE5B,GACF,IAEJ,EACIG,EAAmB,SAAUC,GAC/B,IAAIC,EAAkB,+LACtBpG,GAASpK,EAASiL,QAAU,KACxBsF,GACFhG,GAAOI,GAAQ4F,EAAe,MAAM,SAAUN,GAC5C,IACI9jB,EAAQ7H,EADRkD,EAAUgpB,EAAgB1kB,KAAKmkB,GAE/BzoB,IACFlD,EAASkD,EAAQ,GAEf2E,EADE7H,EACOsL,EAASpI,EAAQ,IAEjBoI,EAASpI,EAAQ,IAAM,CAAE,WAAY,CAAC,GAEjD2E,EAASyD,EAASpI,EAAQ,IAC1B+iB,GAAOI,GAAQnjB,EAAQ,GAAI,MAAM,SAAUuP,GAC1B,MAAXzS,SACK6H,EAAO4K,GAEd5K,EAAO4K,GAAS,CAAC,CAErB,IAEJ,GAEJ,EACI0Z,EAAiB,SAAUruC,GAC7B,IAA8BH,EAA1BsT,EAAU4b,EAAS/uB,GACvB,GAAImT,EACF,OAAOA,EAGT,IADAtT,EAAIspC,EAAgBrpC,OACbD,KAEL,IADAsT,EAAUg2B,EAAgBtpC,IACdytC,QAAQhpC,KAAKtE,GACvB,OAAOmT,CAGb,EACKyqB,EAAS6M,eAkCZ8C,EAAiB3P,EAAS6M,iBAjC1BtC,GAAOqB,GAAa,SAAUr2B,EAASnT,GACrC+uB,EAAS/uB,GAAQ,CACf+pC,WAAY52B,EAAQ42B,WACpBE,gBAAiB92B,EAAQ82B,iBAE3Bzc,EAASxtB,GAAQmT,EAAQqa,QAC3B,IACwB,UAApBoQ,EAASiL,QACXV,GAAOI,GAAQ,kBAAkB,SAAUhpB,GACzC,IAAImJ,EAAQ6f,GAAQhpB,EAAM,KAC1BwP,EAASrG,EAAM,IAAI2jB,WAAa3jB,EAAM,EACxC,IAEFyf,GAAOsD,GAAuB,SAAU6C,EAAMtuC,GACxC+uB,EAAS/uB,KACP49B,EAAS2Q,mCACXxf,EAAS/uB,GAAMwuC,kBAAmB,GAEpCzf,EAAS/uB,GAAM4sC,aAAc,EAEjC,IACAzE,GAAOI,GAAQ,mCAAmC,SAAUvoC,GACtD+uB,EAAS/uB,KACX+uB,EAAS/uB,GAAM4sC,aAAc,EAEjC,IACAzE,GAAOI,GAAQ,yDAAyD,SAAUvoC,GAChF+uB,EAAS/uB,GAAM2sC,WAAY,CAC7B,IACAxE,GAAOI,GAAQ,SAAS,SAAUvoC,GAChC+uB,EAAS/uB,GAAM6sC,kBAAmB,CACpC,KAIFW,EAAkB5P,EAAS6Q,iBAC3BP,EAAiBtQ,EAAS8Q,gBAC1B7C,EAAiBjO,EAAS+Q,yBAC1BT,EAAiB,yBACjB/F,GAAO,CACLyG,GAAI,KACJC,GAAI,KACJC,GAAI,QACJC,GAAI,KACJC,GAAI,KACJC,GAAI,oBACJC,MAAO,QACPC,MAAO,QACPC,MAAO,QACPC,OAAQ,WACRC,KAAM,MACNC,MAAO,uBACN,SAAUC,EAASjwB,GAChBwP,EAASxP,KACXwP,EAASxP,GAAMkwB,gBAAkBlH,GAAQiH,GAE7C,IACI5R,EAAS8R,kBACXvH,GAAOE,GAAUzK,EAAS8R,mBAAmB,SAAUnwB,GACjDwP,EAASxP,WACJwP,EAASxP,EAEpB,IAEG8uB,EAAe,SAClBxC,EAAiB,0BAEnB,IAAI8D,EAAiBl2B,EAASixB,GAC1BkF,EAAmBn2B,EAASmxB,GAC5BiF,EAAkBp2B,EAASqxB,GAC3BgF,EAAer2B,EAAS0xB,GACxB4E,EAAmBt2B,EAAS+xB,GAC5B1C,EAAuBrvB,EAAS8xB,GAChCyE,EAAwBv2B,EAASgyB,GACjCwE,EAAwBx2B,EAASyxB,GACjCgF,EAAyBz2B,EAASwxB,GAClCkF,EAAsB12B,EAAS4xB,GAC/B+E,EAAoC32B,EAAS6xB,GAC7C+E,EAAwB52B,EAASuxB,GACjCsF,EAAqB72B,EAAS4vB,GA4B9BkH,EAAoB92B,EAAS2vB,GACjC,MAAO,CACL5b,SAAUA,EACVuB,SAAUA,EACV4gB,eAAgBA,EAChBE,gBAAiBA,EACjBE,iBAAkBA,EAClBH,iBAAkBA,EAClBK,sBAAuBA,EACvBnH,qBAAsBA,EACtBkH,sBAAuBA,EACvBF,aAAcA,EACdzB,eAAgBA,EAChB6B,uBAAwBA,EACxBC,oBAAqBA,EACrBC,kCAAmCA,EACnCC,sBAAuBA,EACvBC,mBAAoBA,EACpBE,aA7CiB,SAAUxwC,EAAM20B,GACjC,IAAI5K,EAASyD,EAASxtB,EAAK2G,eAC3B,SAAUojB,IAAUA,EAAO4K,EAAMhuB,eACnC,EA2CE8pC,QA1CY,SAAUzwC,EAAMknC,GAC5B,IAAIwJ,EAAc7wC,EACdguC,EAAOQ,EAAeruC,GAC1B,GAAI6tC,EAAM,CACR,IAAI3G,EAcF,OAAO,EAbP,GAAI2G,EAAK9D,WAAW7C,GAClB,OAAO,EAGT,GADAwJ,EAAe7C,EAAKR,kBAGlB,IADAxtC,EAAI6wC,EAAa5wC,OACVD,KACL,GAAI6wC,EAAa7wC,GAAGytC,QAAQhpC,KAAKtE,GAC/B,OAAO,CAOjB,CACA,OAAO,CACT,EAqBEuwC,kBAAmBA,EACnB1E,iBAAkBA,EAClB0B,iBAAkBA,EAClBC,kBAAmBA,EACnBU,iBAAkBA,EAEtB,EAEIyC,GAAQ,SAAUhnB,EAAOpN,EAAG4Y,EAAGluB,GACjC,IAAI2pC,EAAM,SAAU3mC,GAElB,OADAA,EAAMsK,SAAStK,EAAK,IAAIuR,SAAS,KACtB1b,OAAS,EAAImK,EAAM,IAAMA,CACtC,EACA,MAAO,IAAM2mC,EAAIr0B,GAAKq0B,EAAIzb,GAAKyb,EAAI3pC,EACrC,EACI4pC,GAAS,SAAUjT,EAAUiL,GAC/B,IAKIhpC,EAEA6qC,EACAE,EARAvnC,EAAQC,KACRwtC,EAAY,2DACZC,EAAiB,+HACjBC,EAAc,2BACdC,EAAkB,OAElBC,EAAiB,CAAC,EAItBtT,EAAWA,GAAY,CAAC,EACpBiL,IACF6B,EAAc7B,EAAO8G,iBACrB/E,EAAgB/B,EAAO+G,oBAEzB,IAAIuB,EAAgB,8BAA0CvoB,MAAM,KACpE,IAAK/oB,EAAI,EAAGA,EAAIsxC,EAAcrxC,OAAQD,IACpCqxC,EAAeC,EAActxC,IAllCjB,SAklCuCA,EACnDqxC,EAnlCY,SAmlCmBrxC,GAAKsxC,EAActxC,GAEpD,MAAO,CACL8wC,MAAO,SAAUS,GACf,OAAOA,EAAM7jC,QAAQujC,EAAWH,GAClC,EACAU,MAAO,SAAUjd,GACf,IACIhP,EAASplB,EAAM+D,EAAOutC,EAwDQtqC,EAAGC,EAAGlH,EAzDpCkpC,EAAS,CAAC,EAEVsI,EAAe3T,EAAS4T,cACxBC,EAAoB7T,EAAS8T,qBAAuBruC,EACpDsuC,EAAW,SAAUzvB,EAAQ0vB,EAAQC,GACvC,IAAInjC,EAAMu6B,EAAO/mB,EAAS,OAAS0vB,GACnC,GAAKljC,EAAL,CAGA,IAAIgiB,EAAQuY,EAAO/mB,EAAS,SAAW0vB,GACvC,GAAKlhB,EAAL,CAGA,IAAIC,EAASsY,EAAO/mB,EAAS,UAAY0vB,GACzC,GAAKjhB,EAAL,CAGA,IAAIxhB,EAAO85B,EAAO/mB,EAAS,QAAU0vB,GACrC,GAAKziC,EAAL,CAGA,IAAI2gB,EAAM,CACRphB,EACAgiB,EACAC,EACAxhB,GAGF,IADAtP,EAAIiwB,EAAIhwB,OAAS,EACVD,KACDiwB,EAAIjwB,KAAOiwB,EAAIjwB,EAAI,KAIrBA,GAAK,GAAKgyC,IAGd5I,EAAO/mB,EAAS0vB,IAAiB,IAAP/xC,EAAWiwB,EAAI,GAAKA,EAAIqK,KAAK,YAChD8O,EAAO/mB,EAAS,OAAS0vB,UACzB3I,EAAO/mB,EAAS,SAAW0vB,UAC3B3I,EAAO/mB,EAAS,UAAY0vB,UAC5B3I,EAAO/mB,EAAS,QAAU0vB,GApBjC,CAJA,CAJA,CAJA,CAiCF,EACIE,EAAc,SAAUhxC,GAC1B,IAAyBjB,EAArBkE,EAAQklC,EAAOnoC,GACnB,GAAKiD,EAAL,CAKA,IADAlE,GADAkE,EAAQA,EAAM6kB,MAAM,MACV9oB,OACHD,KACL,GAAIkE,EAAMlE,KAAOkE,EAAM,GACrB,OAAO,EAIX,OADAklC,EAAOnoC,GAAOiD,EAAM,IACb,CATP,CAUF,EAgBIguC,EAAS,SAAU/vB,GAErB,OADAsvB,GAAY,EACLJ,EAAelvB,EACxB,EACI6lB,EAAS,SAAU7lB,EAAKgwB,GAS1B,OARIV,IACFtvB,EAAMA,EAAIzU,QAAQ,gBAAgB,SAAUyU,GAC1C,OAAOkvB,EAAelvB,EACxB,KAEGgwB,IACHhwB,EAAMA,EAAIzU,QAAQ,gBAAiB,OAE9ByU,CACT,EACIiwB,EAA0B,SAAUC,GACtC,OAAOt7B,OAAOmwB,aAAaxyB,SAAS29B,EAAOx6B,MAAM,GAAI,IACvD,EACIy6B,EAAqB,SAAUpuC,GACjC,OAAOA,EAAMwJ,QAAQ,gBAAiB0kC,EACxC,EACIG,EAAa,SAAUzoB,EAAOU,EAAKgoB,EAAMC,EAAMtwB,EAAKuwB,GAEtD,GADAvwB,EAAMA,GAAOuwB,EAGX,MAAO,KADPvwB,EAAM6lB,EAAO7lB,IACKzU,QAAQ,MAAO,OAAU,IAG7C,GADA8c,EAAMwd,EAAOxd,GAAOgoB,GAAQC,IACvB1U,EAAS4U,kBAAmB,CAC/B,IAAIC,EAAYpoB,EAAI9c,QAAQ,aAAc,IAC1C,GAAI,oBAAoBjJ,KAAKmuC,GAC3B,MAAO,GAET,IAAK7U,EAAS8U,qBAAuB,oBAAoBpuC,KAAKmuC,GAC5D,MAAO,EAEX,CAIA,OAHIlB,IACFlnB,EAAMknB,EAAa55B,KAAK85B,EAAmBpnB,EAAK,UAE3C,QAAWA,EAAI9c,QAAQ,MAAO,OAAU,IACjD,EACA,GAAI6mB,EAAK,CAKP,IAHAA,GADAA,EAAMA,EAAI7mB,QAAQ,mBAAoB,KAC5BA,QAAQ,oBAAqBwkC,GAAQxkC,QAAQ,0BAA0B,SAAUyU,GACzF,OAAOA,EAAIzU,QAAQ,QAASwkC,EAC9B,IACO3sB,EAAU4rB,EAAYtnB,KAAK0K,IAIhC,GAHA4c,EAAY2B,UAAYvtB,EAAQ7e,MAAQ6e,EAAQ,GAAGtlB,OACnDE,EAAOolB,EAAQ,GAAG7X,QAAQ0jC,EAAiB,IAAItqC,cAC/C5C,EAAQqhB,EAAQ,GAAG7X,QAAQ0jC,EAAiB,IACxCjxC,GAAQ+D,EAAO,CAGjB,GAFA/D,EAAOmyC,EAAmBnyC,GAC1B+D,EAAQouC,EAAmBpuC,IACU,IAAjC/D,EAAK6G,QAxtCL,YAwtC6D,IAAvB7G,EAAK6G,QAAQ,KACrD,SAEF,IAAK+2B,EAAS4U,oBAA+B,aAATxyC,GAAuB,4BAA4BsE,KAAKP,IAC1F,SAEW,gBAAT/D,GAAoC,QAAV+D,EAC5BA,EAAQ,OACU,UAAT/D,GAA6B,qBAATA,IAC7B+D,EAAQA,EAAM4C,eAGhB5C,GADAA,EAAQA,EAAMwJ,QAAQujC,EAAWH,KACnBpjC,QAAQwjC,EAAgBqB,GACtCnJ,EAAOjpC,GAAQsxC,EAAYzJ,EAAO9jC,GAAO,GAAQA,CACnD,CAEF4tC,EAAS,SAAU,IAAI,GACvBA,EAAS,SAAU,UACnBA,EAAS,SAAU,UACnBA,EAAS,SAAU,UACnBA,EAAS,UAAW,IACpBA,EAAS,SAAU,IACT,SA3FyB1qC,EA2FC,eA3FElH,EA2Fc,eA1F/C+xC,EAD2B9qC,EA2FZ,iBAvFf8qC,EAAY7qC,IAGZ6qC,EAAY/xC,KAGjBkpC,EAAa,OAAIA,EAAOjiC,GAAK,IAAMiiC,EAAOhiC,GAAK,IAAMgiC,EAAOlpC,UACrDkpC,EAAOjiC,UACPiiC,EAAOhiC,UACPgiC,EAAOlpC,IA+EQ,gBAAlBkpC,EAAO2J,eACF3J,EAAO2J,OAEe,SAA3B3J,EAAO,wBACFA,EAAO,eAElB,CACA,OAAOA,CACT,EACA4J,UAAW,SAAU5J,EAAQkD,GAC3B,IAAI/X,EAAM,GACN0e,EAAkB,SAAU9yC,GAC9B,IAAI+D,EACAgvC,EAAYrI,EAAY1qC,GAC5B,GAAI+yC,EACF,IAAK,IAAIC,EAAM,EAAG7zB,EAAI4zB,EAAUjzC,OAAQkzC,EAAM7zB,EAAG6zB,IAC/ChzC,EAAO+yC,EAAUC,IACjBjvC,EAAQklC,EAAOjpC,MAEbo0B,IAAQA,EAAIt0B,OAAS,EAAI,IAAM,IAAME,EAAO,KAAO+D,EAAQ,IAInE,EAmBA,OAVIooC,GAAezB,GACjBoI,EAAgB,KAChBA,EAAgB3G,IAEhBjuB,GAAO+qB,GAAQ,SAAUllC,EAAO/D,IAC1B+D,GAAW6mC,IAbL,SAAU5qC,EAAMmsC,GAC5B,IAAI8G,EAAWrI,EAAc,KAC7B,QAAIqI,GAAYA,EAASjzC,KAGzBizC,EAAWrI,EAAcuB,KACJ8G,EAASjzC,GAChC,CAMoCywC,CAAQzwC,EAAMmsC,KAC5C/X,IAAQA,EAAIt0B,OAAS,EAAI,IAAM,IAAME,EAAO,KAAO+D,EAAQ,IAE/D,IAEKqwB,CACT,EAEJ,EAEI8e,GAAa,CACfC,aAAa,EACbC,QAAQ,EACRC,QAAQ,EACRC,aAAa,EACbC,iBAAiB,EACjBC,iBAAiB,EACjBC,eAAe,EACfC,aAAa,GAEXC,GAAgB,SAAUC,GAC5B,OAAOA,aAAiBC,OAASh7B,EAAW+6B,EAAMnmC,UACpD,EAqBIqmC,GAAc,SAAUrqC,EAAMsqC,EAAeC,EAAgBzc,GAC/D,IAAI3R,EACAguB,EAhBQ,SAAUG,EAAexc,GACrC,IAAIqc,EAAQrc,QAAmCA,EAAO,CAAC,EACvD,IAAK,IAAIpO,KAAU4qB,EACZl1B,GAAMq0B,GAAY/pB,KACrByqB,EAAMzqB,GAAU4qB,EAAc5qB,IAQlC,OALIvQ,EAAcg7B,EAAMK,gBACtBL,EAAMK,aAAe,WACnB,OAAOF,EAAcE,cACvB,GAEKL,CACT,CAGcM,CAAQH,EAAexc,GAkCnC,OAjCAqc,EAAMnqC,KAAOA,EACTkP,EAAWi7B,EAAMtzC,UACnBszC,EAAMtzC,OAAqC,QAA3BslB,EAAKguB,EAAMO,kBAA+B,IAAPvuB,EAAgBA,EAAKouB,GAtBrD,SAAUJ,GAC/B,OAAOj7B,EAAWi7B,EAAMnoC,iBAAmBkoC,GAAcC,EAC3D,CAsBMQ,CAAiBL,KACnBH,EAAMnoC,eAAiB,WACrBmoC,EAAMS,kBAAmB,EACzBT,EAAMU,mBAAqBp6B,EACvBrB,EAAWk7B,EAActoC,gBAC3BsoC,EAActoC,iBACLkoC,GAAcI,KACvBA,EAAcT,aAAc,EAEhC,EACAM,EAAM3nC,gBAAkB,WACtB2nC,EAAMW,cAAe,EACrBX,EAAMY,qBAAuBt6B,EACzBrB,EAAWk7B,EAAc9nC,iBAC3B8nC,EAAc9nC,kBACL0nC,GAAcI,KACvBA,EAAcQ,cAAe,EAEjC,EACAX,EAAMa,yBAA2B,WAC/Bb,EAAMc,8BAAgCx6B,EACtC05B,EAAM3nC,iBACR,EAjDwB,SAAU2nC,GACpC,OAAOA,EAAMU,qBAAuBp6B,GAAU05B,EAAMU,qBAAuBr6B,CAC7E,CAgDS06B,CAAsBf,KACzBA,EAAMU,oBAAgD,IAA3BV,EAAMS,iBAA4Bn6B,EAASD,EACtE25B,EAAMY,sBAA8C,IAAvBZ,EAAMW,aAAwBr6B,EAASD,EACpE25B,EAAMc,8BAAgCz6B,IAGnC25B,CACT,EAGIgB,GAAe,+BACfC,GAAW,SAAUv0C,EAAQN,EAAM+C,EAAU+xC,GAC3Cx0C,EAAO4K,iBACT5K,EAAO4K,iBAAiBlL,EAAM+C,EAAU+xC,IAAW,GAC1Cx0C,EAAOy0C,aAChBz0C,EAAOy0C,YAAY,KAAO/0C,EAAM+C,EAEpC,EACIiyC,GAAc,SAAU10C,EAAQN,EAAM+C,EAAU+xC,GAC9Cx0C,EAAO4S,oBACT5S,EAAO4S,oBAAoBlT,EAAM+C,EAAU+xC,IAAW,GAC7Cx0C,EAAO20C,aAChB30C,EAAO20C,YAAY,KAAOj1C,EAAM+C,EAEpC,EAIImyC,GAAM,SAAUnB,EAAexc,GACjC,IAAIqc,EAAQE,GAAYC,EAActqC,KAAMsqC,EAAexyC,SAAUg2B,GACrE,GALiB,SAAUqc,GAC3B,OAAOh7B,EAAcg7B,IAAUgB,GAAatwC,KAAKsvC,EAAMnqC,KACzD,CAGM0rC,CAAapB,IAAkBr7B,EAAYq7B,EAAcqB,SAAW18B,EAAYq7B,EAAcsB,SAAU,CAC1G,IAAIC,EAAW1B,EAAMtzC,OAAOysB,eAAiBxrB,SACzC+sB,EAAMgnB,EAAS/mC,gBACf9J,EAAO6wC,EAAS7wC,KAChB8wC,EAAa3B,EACjB2B,EAAWH,MAAQrB,EAAcsB,SAAW/mB,GAAOA,EAAIlf,YAAc3K,GAAQA,EAAK2K,YAAc,IAAMkf,GAAOA,EAAIknB,YAAc/wC,GAAQA,EAAK+wC,YAAc,GAC1JD,EAAWE,MAAQ1B,EAAc2B,SAAWpnB,GAAOA,EAAI9f,WAAa/J,GAAQA,EAAK+J,WAAa,IAAM8f,GAAOA,EAAIqnB,WAAalxC,GAAQA,EAAKkxC,WAAa,EACxJ,CAIA,OAHIj9B,EAAYk7B,EAAMgC,WACpBhC,EAAMgC,SAAU,GAEXhC,CACT,EACIiC,GAAc,SAAU3lB,EAAKntB,EAAU+yC,GACzC,IAAIxnB,EAAM4B,EAAI3uB,SAAUqyC,EAAQ,CAAEnqC,KAAM,SACxC,GAAIqsC,EAAWC,UACbhzC,EAAS6wC,OADX,CAIA,IAGIoC,EAAe,WACjBhB,GAAY9kB,EAAK,mBAAoB8lB,GACrChB,GAAY9kB,EAAK,OAAQ8lB,GACpBF,EAAWC,YACdD,EAAWC,WAAY,EACvBhzC,EAAS6wC,IAEX1jB,EAAM,IACR,EAV4B,aAAnB5B,EAAI9sB,YAAgD,gBAAnB8sB,EAAI9sB,YAAgC8sB,EAAI7pB,KAYhFuxC,IAEAnB,GAAS3kB,EAAK,mBAAoB8lB,GAE/BF,EAAWC,WACdlB,GAAS3kB,EAAK,OAAQ8lB,EAnBxB,CAqBF,EACIC,GAAa,WACf,SAASA,IACP3yC,KAAKyyC,WAAY,EACjBzyC,KAAK4yC,OAAS,CAAC,EACf5yC,KAAKu2B,MAAQ,EACbv2B,KAAK6yC,QAlEgB,cAkEiB,IAAIlX,MAAQzjB,SAAS,IAC3DlY,KAAK8yC,mBAAqB,iBAAkB70C,SAASgN,gBACrDjL,KAAK+yC,WAAa,cAAe90C,SAASgN,gBAC1CjL,KAAKu2B,MAAQ,CACf,CAsNA,OArNAoc,EAAW7gC,UAAUgG,KAAO,SAAU9a,EAAQqxB,EAAO5uB,EAAU4nB,GAC7D,IACIzpB,EAAIo1C,EAAcz2C,EAAGG,EAAMu2C,EAAUC,EAAe1B,EADpDn5B,EAAOrY,KAEP4sB,EAAM9uB,OACNq1C,EAAuB,SAAUC,GACnC/6B,EAAKg7B,gBAAgBzB,GAAIwB,GAAOxmB,EAAI0jB,OAAQ1yC,EAC9C,EACA,GAAKZ,GAA8B,IAApBA,EAAOgrB,UAAsC,IAApBhrB,EAAOgrB,SAA/C,CAGKhrB,EAAOqb,EAAKw6B,SAKfj1C,EAAKZ,EAAOqb,EAAKw6B,UAJjBj1C,EAAKya,EAAKke,QACVv5B,EAAOqb,EAAKw6B,SAAWj1C,EACvBya,EAAKu6B,OAAOh1C,GAAM,CAAC,GAIrBypB,EAAQA,GAASrqB,EACjB,IAAIs2C,EAAYjlB,EAAM/I,MAAM,KAE5B,IADA/oB,EAAI+2C,EAAU92C,OACPD,KAEL22C,EAAgBC,EAChBF,EAAWzB,GAAU,EACR,sBAHb90C,EAAO42C,EAAU/2C,MAIfG,EAAO,SAEL2b,EAAKo6B,WAAsB,UAAT/1C,GAA0C,aAAtBM,EAAOkB,WAC/CuB,EAAS4U,KAAKgT,EAAOuqB,GAAI,CAAEzrC,KAAMzJ,MAG9B2b,EAAKy6B,qBACRG,EAAW56B,EAAKk7B,gBAAgB72C,MAE9Bw2C,EAAgB,SAAUE,GACxB,IAAIlzB,EAAUkzB,EAAII,cACdC,EAAUL,EAAIM,cAClB,GAAID,GAAWvzB,EAAQjY,SACrBwrC,EAAUvzB,EAAQjY,SAASwrC,QAE3B,KAAOA,GAAWA,IAAYvzB,GAC5BuzB,EAAUA,EAAQpuC,WAGjBouC,KACHL,EAAMxB,GAAIwB,GAAOxmB,EAAI0jB,QACjBnqC,KAAoB,aAAbitC,EAAIjtC,KAAsB,aAAe,aACpDitC,EAAIp2C,OAASkjB,EACb7H,EAAKg7B,gBAAgBD,EAAKx1C,GAE9B,GAGCya,EAAK06B,YAAwB,YAATr2C,GAA+B,aAATA,IAC7C80C,GAAU,EACVyB,EAAoB,YAATv2C,EAAqB,QAAU,OAC1Cw2C,EAAgB,SAAUE,IACxBA,EAAMxB,GAAIwB,GAAOxmB,EAAI0jB,QACjBnqC,KAAoB,UAAbitC,EAAIjtC,KAAmB,UAAY,WAC9CkS,EAAKg7B,gBAAgBD,EAAKx1C,EAC5B,IAEFo1C,EAAe36B,EAAKu6B,OAAOh1C,GAAIlB,IAehB,UAATA,GAAoB2b,EAAKo6B,UAC3BhzC,EAASmyC,GAAI,CAAEzrC,KAAMzJ,KAErBs2C,EAAavuC,KAAK,CAChBg1B,KAAMh6B,EACN4nB,MAAOA,KAlBXhP,EAAKu6B,OAAOh1C,GAAIlB,GAAQs2C,EAAe,CAAC,CACpCvZ,KAAMh6B,EACN4nB,MAAOA,IAEX2rB,EAAaC,SAAWA,EACxBD,EAAaxB,QAAUA,EACvBwB,EAAaE,cAAgBA,EAChB,UAATx2C,EACF61C,GAAYv1C,EAAQk2C,EAAe76B,GAEnCk5B,GAASv0C,EAAQi2C,GAAYv2C,EAAMw2C,EAAe1B,KAcxD,OADAx0C,EAASg2C,EAAe,KACjBvzC,CA/EP,CAgFF,EACAkzC,EAAW7gC,UAAU6hC,OAAS,SAAU32C,EAAQqxB,EAAO5uB,GACrD,IAAIuzC,EAAcz2C,EAAGq3C,EAAIl3C,EAAMm3C,EAC/B,IAAK72C,GAA8B,IAApBA,EAAOgrB,UAAsC,IAApBhrB,EAAOgrB,SAC7C,OAAOhoB,KAET,IAAIpC,EAAKZ,EAAOgD,KAAK6yC,SACrB,GAAIj1C,EAAI,CAEN,GADAi2C,EAAW7zC,KAAK4yC,OAAOh1C,GACnBywB,EAAO,CACT,IAAIilB,EAAYjlB,EAAM/I,MAAM,KAE5B,IADA/oB,EAAI+2C,EAAU92C,OACPD,KAGL,GADAy2C,EAAea,EADfn3C,EAAO42C,EAAU/2C,IAEC,CAChB,GAAIkD,EAEF,IADAm0C,EAAKZ,EAAax2C,OACXo3C,KACL,GAAIZ,EAAaY,GAAIna,OAASh6B,EAAU,CACtC,IAAIyzC,EAAgBF,EAAaE,cAC7BD,EAAWD,EAAaC,SAAUzB,EAAUwB,EAAaxB,SAC7DwB,EAAeA,EAAa5+B,MAAM,EAAGw/B,GAAIluC,OAAOstC,EAAa5+B,MAAMw/B,EAAK,KAC3DV,cAAgBA,EAC7BF,EAAaC,SAAWA,EACxBD,EAAaxB,QAAUA,EACvBqC,EAASn3C,GAAQs2C,CACnB,CAGCvzC,GAAoC,IAAxBuzC,EAAax2C,gBACrBq3C,EAASn3C,GAChBg1C,GAAY10C,EAAQg2C,EAAaC,UAAYv2C,EAAMs2C,EAAaE,cAAeF,EAAaxB,SAEhG,CAEJ,MACE52B,GAAOi5B,GAAU,SAAUb,EAAct2C,GACvCg1C,GAAY10C,EAAQg2C,EAAaC,UAAYv2C,EAAMs2C,EAAaE,cAAeF,EAAaxB,QAC9F,IACAqC,EAAW,CAAC,EAEd,IAAKn3C,KAAQm3C,EACX,GAAIt4B,GAAMs4B,EAAUn3C,GAClB,OAAOsD,YAGJA,KAAK4yC,OAAOh1C,GACnB,WACSZ,EAAOgD,KAAK6yC,QACrB,CAAE,MAAO5f,GACPj2B,EAAOgD,KAAK6yC,SAAW,IACzB,CACF,CACA,OAAO7yC,IACT,EACA2yC,EAAW7gC,UAAUgiC,KAAO,SAAU92C,EAAQN,EAAMmZ,GAClD,IAAIjY,EACJ,IAAKZ,GAA8B,IAApBA,EAAOgrB,UAAsC,IAApBhrB,EAAOgrB,SAC7C,OAAOhoB,KAET,IAAIswC,EAAQsB,GAAI,CACdzrC,KAAMzJ,EACNM,OAAQA,GACP6Y,GACH,IACEjY,EAAKZ,EAAOgD,KAAK6yC,WAEf7yC,KAAKqzC,gBAAgB/C,EAAO1yC,GAE9BZ,EAASA,EAAOqI,YAAcrI,EAAOysB,eAAiBzsB,EAAO4sB,aAAe5sB,EAAO+2C,mBAC5E/2C,IAAWszC,EAAMY,wBAC1B,OAAOlxC,IACT,EACA2yC,EAAW7gC,UAAUkiC,MAAQ,SAAUh3C,GACrC,IAAIT,EAAG2tB,EACP,IAAKltB,GAA8B,IAApBA,EAAOgrB,UAAsC,IAApBhrB,EAAOgrB,SAC7C,OAAOhoB,KAQT,GANIhD,EAAOgD,KAAK6yC,UACd7yC,KAAK2zC,OAAO32C,GAETA,EAAOkjC,uBACVljC,EAASA,EAAOiB,UAEdjB,GAAUA,EAAOkjC,qBAInB,IAHAlgC,KAAK2zC,OAAO32C,GAEZT,GADA2tB,EAAWltB,EAAOkjC,qBAAqB,MAC1B1jC,OACND,MACLS,EAASktB,EAAS3tB,IACPyD,KAAK6yC,UACd7yC,KAAK2zC,OAAO32C,GAIlB,OAAOgD,IACT,EACA2yC,EAAW7gC,UAAUmiC,QAAU,WAC7Bj0C,KAAK4yC,OAAS,CAAC,CACjB,EACAD,EAAW7gC,UAAUoiC,OAAS,SAAUlsC,GAKtC,OAJIA,IACFA,EAAEG,iBACFH,EAAEmpC,6BAEG,CACT,EACAwB,EAAW7gC,UAAUuhC,gBAAkB,SAAUD,EAAKx1C,GACpD,IAAI+G,EAAY3E,KAAK4yC,OAAOh1C,GACxBo1C,EAAeruC,GAAaA,EAAUyuC,EAAIjtC,MAC9C,GAAI6sC,EACF,IAAK,IAAIz2C,EAAI,EAAGsf,EAAIm3B,EAAax2C,OAAQD,EAAIsf,EAAGtf,IAAK,CACnD,IAAIkD,EAAWuzC,EAAaz2C,GAI5B,GAHIkD,IAAwD,IAA5CA,EAASg6B,KAAKplB,KAAK5U,EAAS4nB,MAAO+rB,IACjDA,EAAIjrC,iBAEFirC,EAAIhC,gCACN,MAEJ,CAEJ,EACAuB,EAAWpC,MAAQ,IAAIoC,EAChBA,CACT,CAhOiB,GAkOyLE,GAAU,UAAY,IAAIlX,KAAQwY,GAAer2C,OAAOG,SAAUm2C,GAAU,EAAGrhB,GAAO,EAAGshB,GAAaC,KAAeC,GAAaD,KAAeE,GAAgBF,KAAeG,GAAY,SAAU/wC,EAAGC,GAI/Y,OAHID,IAAMC,IACRw0B,IAAe,GAEV,CACT,EAAGuc,GAAe,YAAkBC,GAAe,GAAK,GAAIlvB,GAAS,CAAC,EAAE/kB,eAAgBga,GAAM,GAAIk6B,GAAMl6B,GAAIk6B,IAAKC,GAAcn6B,GAAIjW,KAAMqwC,GAASp6B,GAAIjW,KAAMswC,GAAUr6B,GAAItG,MAAO7Q,GAAUmX,GAAInX,SAAW,SAAU0kB,GAElN,IADA,IAAI1rB,EAAI,EAAGmT,EAAM1P,KAAKxD,OACfD,EAAImT,EAAKnT,IACd,GAAIyD,KAAKzD,KAAO0rB,EACd,OAAO1rB,EAGX,OAAQ,CACV,EAA4Iy4C,GAAa,sBAAuBC,GAAa,mCAAoCxO,GAAa,MAAQuO,GAAa,KAAOC,GAAa,OAASD,GAAa,gBAAkBA,GAAa,2DAA6DC,GAAa,OAASD,GAAa,OAAQE,GAAU,KAAOD,GAAP,wFAAwHxO,GAAxH,eAA+J0O,GAAQ,IAAI9M,OAAO,IAAM2M,GAAa,8BAAgCA,GAAa,KAAM,KAAMI,GAAS,IAAI/M,OAAO,IAAM2M,GAAa,KAAOA,GAAa,KAAMK,GAAe,IAAIhN,OAAO,IAAM2M,GAAa,WAAaA,GAAa,IAAMA,GAAa,KAAMM,GAAmB,IAAIjN,OAAO,IAAM2M,GAAa,iBAAmBA,GAAa,OAAQ,KAAMO,GAAU,IAAIlN,OAAO6M,IAAUM,GAAc,IAAInN,OAAO,IAAM4M,GAAa,KAAMQ,GAAY,CACvhCC,GAAI,IAAIrN,OAAO,MAAQ4M,GAAa,KACpCU,MAAO,IAAItN,OAAO,QAAU4M,GAAa,KACzCW,IAAK,IAAIvN,OAAO,KAAO4M,GAAa,SACpCY,KAAM,IAAIxN,OAAO,IAAM5B,IACvBqP,OAAQ,IAAIzN,OAAO,IAAM6M,IACzBa,MAAO,IAAI1N,OAAO,yDAA2D2M,GAAa,+BAAiCA,GAAa,cAAgBA,GAAa,aAAeA,GAAa,SAAU,KAC3MgB,KAAM,IAAI3N,OAAO,mIAA0B,KAC3C4N,aAAc,IAAI5N,OAAO,IAAM2M,GAAa,mDAAqDA,GAAa,mBAAqBA,GAAa,mBAAoB,MACnKkB,GAAU,sCAAuCC,GAAU,SAAUC,GAAU,yBAA0BC,GAAe,mCAAoCC,GAAW,OAAQC,GAAU,QAASC,GAAY,IAAInO,OAAO,qBAAuB2M,GAAa,MAAQA,GAAa,OAAQ,MAAOyB,GAAY,SAAUjhB,EAAGkhB,EAASC,GACpU,IAAIC,EAAO,KAAOF,EAAU,MAC5B,OAAOE,GAASA,GAAQD,EAAoBD,EAAUE,EAAO,EAAItjC,OAAOmwB,aAAamT,EAAO,OAAStjC,OAAOmwB,aAAamT,GAAQ,GAAK,MAAc,KAAPA,EAAc,MAC7J,EACF,IACE9B,GAAO/+B,MAAM2E,GAAMq6B,GAAQ1gC,KAAK8/B,GAAa3sB,YAAa2sB,GAAa3sB,YACvE9M,GAAIy5B,GAAa3sB,WAAWhrB,QAAQwrB,QACtC,CAAE,MAAOhgB,GACP8sC,GAAS,CACP/+B,MAAO2E,GAAIle,OAAS,SAAUQ,EAAQ65C,GACpChC,GAAY9+B,MAAM/Y,EAAQ+3C,GAAQ1gC,KAAKwiC,GACzC,EAAI,SAAU75C,EAAQ65C,GAEpB,IADA,IAAI3yC,EAAIlH,EAAOR,OAAQD,EAAI,EACpBS,EAAOkH,KAAO2yC,EAAIt6C,OAEzBS,EAAOR,OAAS0H,EAAI,CACtB,EAEJ,CACA,IAAI4yC,GAAS,SAAU/uB,EAAUgvB,EAASC,EAASC,GACjD,IAAI5wB,EAAO4B,EAAMivB,EAAGlvB,EAAUzrB,EAAG46C,EAAQC,EAAKC,EAAKC,EAAYC,EAM/D,IALKR,EAAUA,EAAQttB,eAAiBstB,EAAU5C,MAAkB9b,IAClED,GAAY2e,GAGdC,EAAUA,GAAW,IAChBjvB,GAAgC,iBAAbA,EACtB,OAAOivB,EAET,GAAsC,KAAjChvB,GALL+uB,EAAUA,GAAW1e,IAKGrQ,WAAgC,IAAbA,EACzC,MAAO,GAET,GAAIuQ,KAAmB0e,EAAM,CAC3B,GAAI5wB,EAAQgwB,GAAajwB,KAAK2B,GAC5B,GAAImvB,EAAI7wB,EAAM,IACZ,GAAiB,IAAb2B,EAAgB,CAElB,KADAC,EAAO8uB,EAAQS,eAAeN,MAClBjvB,EAAK5iB,WAMf,OAAO2xC,EALP,GAAI/uB,EAAKrqB,KAAOs5C,EAEd,OADAF,EAAQvyC,KAAKwjB,GACN+uB,CAKb,MACE,GAAID,EAAQttB,gBAAkBxB,EAAO8uB,EAAQttB,cAAc+tB,eAAeN,KAAOjvC,GAAS8uC,EAAS9uB,IAASA,EAAKrqB,KAAOs5C,EAEtH,OADAF,EAAQvyC,KAAKwjB,GACN+uB,MAGN,IAAI3wB,EAAM,GAEf,OADAyuB,GAAO/+B,MAAMihC,EAASD,EAAQ7W,qBAAqBnY,IAC5CivB,EACF,IAAKE,EAAI7wB,EAAM,KAAOqR,GAAQ+f,uBAEnC,OADA3C,GAAO/+B,MAAMihC,EAASD,EAAQU,uBAAuBP,IAC9CF,CACT,CAEF,GAAItf,GAAQggB,OAASlf,KAAcA,GAAUx3B,KAAK+mB,IAAY,CAI5D,GAHAsvB,EAAMD,EAAMvE,GACZyE,EAAaP,EACbQ,EAA2B,IAAbvvB,GAAkBD,EACf,IAAbC,GAAqD,WAAnC+uB,EAAQ7tB,SAAS7lB,cAA4B,CASjE,IARA8zC,EAASrf,GAAS/P,IACdqvB,EAAML,EAAQl5C,aAAa,OAC7Bw5C,EAAMD,EAAIntC,QAAQssC,GAAS,QAE3BQ,EAAQjyC,aAAa,KAAMuyC,GAE7BA,EAAM,QAAWA,EAAM,MACvB96C,EAAI46C,EAAO36C,OACJD,KACL46C,EAAO56C,GAAK86C,EAAMM,GAAWR,EAAO56C,IAEtC+6C,EAAahB,GAASt1C,KAAK+mB,IAAa6vB,GAAYb,EAAQ1xC,aAAe0xC,EAC3EQ,EAAcJ,EAAOtgB,KAAK,IAC5B,CACA,GAAI0gB,EACF,IAEE,OADAzC,GAAO/+B,MAAMihC,EAASM,EAAWO,iBAAiBN,IAC3CP,CACT,CAAE,MAAOc,GACT,CAAE,QACKV,GACHL,EAAQxlC,gBAAgB,KAE5B,CAEJ,CACF,CACA,OAAOymB,GAASjQ,EAAS9d,QAAQkrC,GAAO,MAAO4B,EAASC,EAASC,EACnE,EACA,SAAS3C,KACP,IAAI50C,EAAO,GAOX,OANA,SAASu1B,EAAMz3B,EAAKiD,GAIlB,OAHIf,EAAK+E,KAAKjH,EAAM,KAAOm6B,GAAKogB,oBACvB9iB,EAAMv1B,EAAKs4C,SAEb/iB,EAAMz3B,EAAM,KAAOiD,CAC5B,CAEF,CACA,SAASw3C,GAAa1hC,GAEpB,OADAA,EAAGs8B,KAAW,EACPt8B,CACT,CACA,SAAS2hC,GAAax0C,EAAGC,GACvB,IAAIkkB,EAAMlkB,GAAKD,EAAGy0C,EAAOtwB,GAAsB,IAAfnkB,EAAEskB,UAAiC,IAAfrkB,EAAEqkB,YAAoBrkB,EAAEy0C,aAAezD,MAAkBjxC,EAAE00C,aAAezD,IAC9H,GAAIwD,EACF,OAAOA,EAET,GAAItwB,EACF,KAAOA,EAAMA,EAAIkC,aACf,GAAIlC,IAAQlkB,EACV,OAAQ,EAId,OAAOD,EAAI,GAAK,CAClB,CAaA,SAAS20C,GAAuB9hC,GAC9B,OAAO0hC,IAAa,SAAUK,GAE5B,OADAA,GAAYA,EACLL,IAAa,SAAUhB,EAAMn1B,GAElC,IADA,IAAI5d,EAAGq0C,EAAehiC,EAAG,GAAI0gC,EAAKz6C,OAAQ87C,GAAW/7C,EAAIg8C,EAAa/7C,OAC/DD,KACD06C,EAAK/yC,EAAIq0C,EAAah8C,MACxB06C,EAAK/yC,KAAO4d,EAAQ5d,GAAK+yC,EAAK/yC,IAGpC,GACF,GACF,CACA,SAAS0zC,GAAYb,GACnB,OAAOA,UAAkBA,EAAQ7W,uBAAyBwU,IAAgBqC,CAC5E,CAygBA,SAASyB,KACT,CA+CA,SAASb,GAAWc,GAElB,IADA,IAAIl8C,EAAI,EAAGmT,EAAM+oC,EAAOj8C,OAAQurB,EAAW,GACpCxrB,EAAImT,EAAKnT,IACdwrB,GAAY0wB,EAAOl8C,GAAGkE,MAExB,OAAOsnB,CACT,CACA,SAAS2wB,GAAcC,EAASC,EAAY7f,GAC1C,IAAI8f,EAAMD,EAAWC,IAAKC,EAAmB/f,GAAgB,eAAR8f,EAAsBE,EAAWhmB,KACtF,OAAO6lB,EAAWI,MAAQ,SAAU/wB,EAAM8uB,EAASkC,GACjD,KAAOhxB,EAAOA,EAAK4wB,IACjB,GAAsB,IAAlB5wB,EAAKD,UAAkB8wB,EACzB,OAAOH,EAAQ1wB,EAAM8uB,EAASkC,EAGpC,EAAI,SAAUhxB,EAAM8uB,EAASkC,GAC3B,IAAIC,EAAUC,EAAYC,EAAW,CACjChF,GACA2E,GAEJ,GAAIE,GACF,KAAOhxB,EAAOA,EAAK4wB,IACjB,IAAsB,IAAlB5wB,EAAKD,UAAkB8wB,IACrBH,EAAQ1wB,EAAM8uB,EAASkC,GACzB,OAAO,OAKb,KAAOhxB,EAAOA,EAAK4wB,IACjB,GAAsB,IAAlB5wB,EAAKD,UAAkB8wB,EAAkB,CAE3C,IAAKI,GADLC,EAAalxB,EAAK4qB,MAAa5qB,EAAK4qB,IAAW,CAAC,IACrBgG,KAASK,EAAS,KAAO9E,IAAW8E,EAAS,KAAOH,EAC7E,OAAOK,EAAS,GAAKF,EAAS,GAG9B,GADAC,EAAWN,GAAOO,EACdA,EAAS,GAAKT,EAAQ1wB,EAAM8uB,EAASkC,GACvC,OAAO,CAGb,CAGN,CACF,CACA,SAASI,GAAeC,GACtB,OAAOA,EAAS98C,OAAS,EAAI,SAAUyrB,EAAM8uB,EAASkC,GAEpD,IADA,IAAI18C,EAAI+8C,EAAS98C,OACVD,KACL,IAAK+8C,EAAS/8C,GAAG0rB,EAAM8uB,EAASkC,GAC9B,OAAO,EAGX,OAAO,CACT,EAAIK,EAAS,EACf,CAQA,SAASC,GAASC,EAAWr2C,EAAKG,EAAQyzC,EAASkC,GAEjD,IADA,IAAIhxB,EAAMwxB,EAAe,GAAIl9C,EAAI,EAAGmT,EAAM8pC,EAAUh9C,OAAQk9C,EAAgB,MAAPv2C,EAC9D5G,EAAImT,EAAKnT,KACV0rB,EAAOuxB,EAAUj9C,MACd+G,IAAUA,EAAO2kB,EAAM8uB,EAASkC,KACnCQ,EAAah1C,KAAKwjB,GACdyxB,GACFv2C,EAAIsB,KAAKlI,KAKjB,OAAOk9C,CACT,CACA,SAASE,GAAWC,EAAW7xB,EAAU4wB,EAASkB,EAAYC,EAAYC,GAOxE,OANIF,IAAeA,EAAWhH,MAC5BgH,EAAaF,GAAWE,IAEtBC,IAAeA,EAAWjH,MAC5BiH,EAAaH,GAAWG,EAAYC,IAE/B9B,IAAa,SAAUhB,EAAMD,EAASD,EAASkC,GACpD,IAAIe,EAAMz9C,EAAG0rB,EAAMgyB,EAAS,GAAIC,EAAU,GAAIC,EAAcnD,EAAQx6C,OAAQ49C,EAAQnD,GA7BxF,SAA0BlvB,EAAUsyB,EAAUrD,GAE5C,IADA,IAAIz6C,EAAI,EAAGmT,EAAM2qC,EAAS79C,OACnBD,EAAImT,EAAKnT,IACdu6C,GAAO/uB,EAAUsyB,EAAS99C,GAAIy6C,GAEhC,OAAOA,CACT,CAuBgGsD,CAAiBvyB,GAAY,IAAKgvB,EAAQ/uB,SAAW,CAAC+uB,GAAWA,EAAS,IAAKwD,GAAYX,IAAc3C,GAASlvB,EAA+DqyB,EAAnDb,GAASa,EAAOH,EAAQL,EAAW7C,EAASkC,GAAcuB,EAAa7B,EAAUmB,IAAe7C,EAAO2C,EAAYO,GAAeN,GAAc,GAAK7C,EAAUuD,EAIzX,GAHI5B,GACFA,EAAQ4B,EAAWC,EAAYzD,EAASkC,GAEtCY,EAIF,IAHAG,EAAOT,GAASiB,EAAYN,GAC5BL,EAAWG,EAAM,GAAIjD,EAASkC,GAC9B18C,EAAIy9C,EAAKx9C,OACFD,MACD0rB,EAAO+xB,EAAKz9C,MACdi+C,EAAWN,EAAQ39C,MAAQg+C,EAAUL,EAAQ39C,IAAM0rB,IAIzD,GAAIgvB,GACF,GAAI6C,GAAcF,EAAW,CAC3B,GAAIE,EAAY,CAGd,IAFAE,EAAO,GACPz9C,EAAIi+C,EAAWh+C,OACRD,MACD0rB,EAAOuyB,EAAWj+C,KACpBy9C,EAAKv1C,KAAK81C,EAAUh+C,GAAK0rB,GAG7B6xB,EAAW,KAAMU,EAAa,GAAIR,EAAMf,EAC1C,CAEA,IADA18C,EAAIi+C,EAAWh+C,OACRD,MACA0rB,EAAOuyB,EAAWj+C,MAAQy9C,EAAOF,EAAav2C,GAAQ8Q,KAAK4iC,EAAMhvB,GAAQgyB,EAAO19C,KAAO,IAC1F06C,EAAK+C,KAAUhD,EAAQgD,GAAQ/xB,GAGrC,OAEAuyB,EAAajB,GAASiB,IAAexD,EAAUwD,EAAW9Q,OAAOyQ,EAAaK,EAAWh+C,QAAUg+C,GAC/FV,EACFA,EAAW,KAAM9C,EAASwD,EAAYvB,GAEtCnE,GAAO/+B,MAAMihC,EAASwD,EAG5B,GACF,CACA,SAASC,GAAkBhC,GAUzB,IATA,IAAIiC,EAAc/B,EAASz0C,EAAGwL,EAAM+oC,EAAOj8C,OAAQm+C,EAAkBhjB,GAAKijB,SAASnC,EAAO,GAAGtyC,MAAO00C,EAAmBF,GAAmBhjB,GAAKijB,SAAS,KAAMr+C,EAAIo+C,EAAkB,EAAI,EAAGG,EAAepC,IAAc,SAAUzwB,GAC9N,OAAOA,IAASyyB,CAClB,GAAGG,GAAkB,GAAOE,EAAkBrC,IAAc,SAAUzwB,GACpE,OAAO1kB,GAAQ8Q,KAAKqmC,EAAczyB,IAAS,CAC7C,GAAG4yB,GAAkB,GAAOvB,EAAW,CAAC,SAAUrxB,EAAM8uB,EAASkC,GAC7D,IAAIxmB,GAAOkoB,IAAoB1B,GAAOlC,IAAY9e,OAAuByiB,EAAe3D,GAAS/uB,SAAW8yB,EAAa7yB,EAAM8uB,EAASkC,GAAO8B,EAAgB9yB,EAAM8uB,EAASkC,IAE9K,OADAyB,EAAe,KACRjoB,CACT,GACGl2B,EAAImT,EAAKnT,IACd,GAAIo8C,EAAUhhB,GAAKijB,SAASnC,EAAOl8C,GAAG4J,MACpCmzC,EAAW,CAACZ,GAAcW,GAAeC,GAAWX,QAC/C,CAEL,IADAA,EAAUhhB,GAAKr0B,OAAOm1C,EAAOl8C,GAAG4J,MAAM4P,MAAM,KAAM0iC,EAAOl8C,GAAGulB,UAChD+wB,IAAU,CAEpB,IADA3uC,IAAM3H,EACC2H,EAAIwL,IACLioB,GAAKijB,SAASnC,EAAOv0C,GAAGiC,MADdjC,KAKhB,OAAOy1C,GAAWp9C,EAAI,GAAK88C,GAAeC,GAAW/8C,EAAI,GAAKo7C,GAAWc,EAAOrkC,MAAM,EAAG7X,EAAI,GAAGmJ,OAAO,CAAEjF,MAA8B,MAAvBg4C,EAAOl8C,EAAI,GAAG4J,KAAe,IAAM,MAAO8D,QAAQkrC,GAAO,MAAOwD,EAASp8C,EAAI2H,GAAKu2C,GAAkBhC,EAAOrkC,MAAM7X,EAAG2H,IAAKA,EAAIwL,GAAO+qC,GAAkBhC,EAASA,EAAOrkC,MAAMlQ,IAAKA,EAAIwL,GAAOioC,GAAWc,GACzT,CACAa,EAAS70C,KAAKk0C,EAChB,CAEF,OAAOU,GAAeC,EACxB,CAptBA5hB,GAAUof,GAAOpf,QAAU,CAAC,EAC5BG,GAAQif,GAAOjf,MAAQ,SAAU5P,GAC/B,IAAIhd,EAAkBgd,IAASA,EAAKwB,eAAiBxB,GAAMhd,gBAC3D,QAAOA,GAA+C,SAA7BA,EAAgBie,QAC3C,EACAkP,GAAc0e,GAAO1e,YAAc,SAAUnR,GAC3C,IAAI+zB,EAAYhwB,EAAM/D,EAAOA,EAAKwC,eAAiBxC,EAAOktB,GAAc1tB,EAASuE,EAAIpB,YAQrF,OAAIoB,IAAQqN,IAA+B,IAAjBrN,EAAIhD,UAAmBgD,EAAI/f,iBAGrDotB,GAAarN,EACbsN,GAAUtN,EAAI/f,gBACdstB,IAAkBV,GAAM7M,GACpBvE,GAAUA,IAbd,SAAgBmG,GACd,IACE,OAAOA,EAAIxhB,GACb,CAAE,MAAO6nB,GACT,CACA,OAAO,IACT,CAOyBgoB,CAAOx0B,KAC1BA,EAAO7e,iBACT6e,EAAO7e,iBAAiB,UAAU,WAChCwwB,IACF,IAAG,GACM3R,EAAOgrB,aAChBhrB,EAAOgrB,YAAY,YAAY,WAC7BrZ,IACF,KAGJV,GAAQ+O,YAAa,EACrB/O,GAAQwI,sBAAuB,EAC/BxI,GAAQ+f,uBAAyBrB,GAAQp1C,KAAKgqB,EAAIysB,wBAClD/f,GAAQwjB,SAAU,EAClBvjB,GAAKwjB,KAAKzF,GAAK,SAAU93C,EAAIm5C,GAC3B,UAAWA,EAAQS,iBAAmB9C,IAAgBnc,GAAgB,CACpE,IAAI2e,EAAIH,EAAQS,eAAe55C,GAC/B,OAAOs5C,GAAKA,EAAE7xC,WAAa,CAAC6xC,GAAK,EACnC,CACF,EACAvf,GAAKr0B,OAAOoyC,GAAK,SAAU93C,GACzB,IAAIw9C,EAASx9C,EAAGqM,QAAQusC,GAAWC,IACnC,OAAO,SAAUxuB,GACf,OAAOA,EAAKpqB,aAAa,QAAUu9C,CACrC,CACF,EACAzjB,GAAKwjB,KAAKvF,IAAMle,GAAQwI,qBAAuB,SAAUzY,EAAKsvB,GAC5D,UAAWA,EAAQ7W,uBAAyBwU,GAC1C,OAAOqC,EAAQ7W,qBAAqBzY,EAExC,EAAI,SAAUA,EAAKsvB,GACjB,IAAI9uB,EAAM3hB,EAAM,GAAI/J,EAAI,EAAGy6C,EAAUD,EAAQ7W,qBAAqBzY,GAClE,GAAY,MAARA,EAAa,CACf,KAAOQ,EAAO+uB,EAAQz6C,MACE,IAAlB0rB,EAAKD,UACP1hB,EAAI7B,KAAKwjB,GAGb,OAAO3hB,CACT,CACA,OAAO0wC,CACT,EACArf,GAAKwjB,KAAKxF,MAAQje,GAAQ+f,wBAA0B,SAAUrxC,EAAW2wC,GACvE,GAAIxe,GACF,OAAOwe,EAAQU,uBAAuBrxC,EAE1C,EACAqyB,GAAgB,GAChBD,GAAY,GACZd,GAAQ2jB,mBAAoB,EAC5B7iB,GAAYA,GAAUh8B,QAAU,IAAI6rC,OAAO7P,GAAU3B,KAAK,MAC1D4B,GAAgBA,GAAcj8B,QAAU,IAAI6rC,OAAO5P,GAAc5B,KAAK,MACtEmkB,EAAa5E,GAAQp1C,KAAKs3B,GAAQ5P,yBAClCzgB,GAAW+yC,GAAc5E,GAAQp1C,KAAKs3B,GAAQrwB,UAAY,SAAUvE,EAAGC,GACrE,IAAI23C,EAAuB,IAAf53C,EAAEskB,SAAiBtkB,EAAEuH,gBAAkBvH,EAAG63C,EAAM53C,GAAKA,EAAE0B,WACnE,OAAO3B,IAAM63C,MAAUA,GAAwB,IAAjBA,EAAIvzB,YAAmBszB,EAAMrzC,SAAWqzC,EAAMrzC,SAASszC,GAAO73C,EAAEglB,yBAA4D,GAAjChlB,EAAEglB,wBAAwB6yB,IACrJ,EAAI,SAAU73C,EAAGC,GACf,GAAIA,EACF,KAAOA,EAAIA,EAAE0B,YACX,GAAI1B,IAAMD,EACR,OAAO,EAIb,OAAO,CACT,EACA+wC,GAAYuG,EAAa,SAAUt3C,EAAGC,GACpC,GAAID,IAAMC,EAER,OADAw0B,IAAe,EACR,EAET,IAAIqjB,GAAW93C,EAAEglB,yBAA2B/kB,EAAE+kB,wBAC9C,OAAI8yB,IAIU,GADdA,GAAW93C,EAAE+lB,eAAiB/lB,MAAQC,EAAE8lB,eAAiB9lB,GAAKD,EAAEglB,wBAAwB/kB,GAAK,KACzE+zB,GAAQ+jB,cAAgB93C,EAAE+kB,wBAAwBhlB,KAAO83C,EACvE93C,IAAMsnB,GAAOtnB,EAAE+lB,gBAAkB0qB,IAAgBlsC,GAASksC,GAAczwC,IAClE,EAENC,IAAMqnB,GAAOrnB,EAAE8lB,gBAAkB0qB,IAAgBlsC,GAASksC,GAAcxwC,GACnE,EAEFu0B,GAAY30B,GAAQ8Q,KAAK6jB,GAAWx0B,GAAKH,GAAQ8Q,KAAK6jB,GAAWv0B,GAAK,EAE9D,EAAV63C,GAAe,EAAI,EAC5B,EAAI,SAAU93C,EAAGC,GACf,GAAID,IAAMC,EAER,OADAw0B,IAAe,EACR,EAET,IAAItQ,EAAKtrB,EAAI,EAAGm/C,EAAMh4C,EAAE2B,WAAYk2C,EAAM53C,EAAE0B,WAAYs2C,EAAK,CAACj4C,GAAIk4C,EAAK,CAACj4C,GACxE,IAAK+3C,IAAQH,EACX,OAAO73C,IAAMsnB,GAAO,EAAIrnB,IAAMqnB,EAAM,EAAI0wB,GAAO,EAAIH,EAAM,EAAIrjB,GAAY30B,GAAQ8Q,KAAK6jB,GAAWx0B,GAAKH,GAAQ8Q,KAAK6jB,GAAWv0B,GAAK,EAC9H,GAAI+3C,IAAQH,EACjB,OAAOrD,GAAax0C,EAAGC,GAGzB,IADAkkB,EAAMnkB,EACCmkB,EAAMA,EAAIxiB,YACfs2C,EAAGE,QAAQh0B,GAGb,IADAA,EAAMlkB,EACCkkB,EAAMA,EAAIxiB,YACfu2C,EAAGC,QAAQh0B,GAEb,KAAO8zB,EAAGp/C,KAAOq/C,EAAGr/C,IAClBA,IAEF,OAAOA,EAAI27C,GAAayD,EAAGp/C,GAAIq/C,EAAGr/C,IAAMo/C,EAAGp/C,KAAO43C,IAAgB,EAAIyH,EAAGr/C,KAAO43C,GAAe,EAAI,CACrG,EACOnpB,GApHEqN,EAqHX,EACAye,GAAOh1B,QAAU,SAAUg6B,EAAMrwB,GAC/B,OAAOqrB,GAAOgF,EAAM,KAAM,KAAMrwB,EAClC,EACAqrB,GAAOiF,gBAAkB,SAAU9zB,EAAM6zB,GAKvC,IAJK7zB,EAAKwB,eAAiBxB,KAAUoQ,IACnCD,GAAYnQ,GAEd6zB,EAAOA,EAAK7xC,QAAQqrC,GAAkB,UAClC5d,GAAQqkB,iBAAmBxjB,MAAoBE,KAAkBA,GAAcz3B,KAAK86C,OAAYtjB,KAAcA,GAAUx3B,KAAK86C,IAC/H,IACE,IAAIrpB,QA1T6K3Q,GA0T/JzN,KAAK4T,EAAM6zB,GAC7B,GAAIrpB,GAAOiF,GAAQ2jB,mBAAqBpzB,EAAKhqB,UAAuC,KAA3BgqB,EAAKhqB,SAAS+pB,SACrE,OAAOyK,CAEX,CAAE,MAAOzqB,GACT,CAEF,OAAO8uC,GAAOgF,EAAMzjB,GAAY,KAAM,CAACpQ,IAAOzrB,OAAS,CACzD,EACAs6C,GAAO7uC,SAAW,SAAU8uC,EAAS9uB,GAInC,OAHK8uB,EAAQttB,eAAiBstB,KAAa1e,IACzCD,GAAY2e,GAEP9uC,GAAS8uC,EAAS9uB,EAC3B,EACA6uB,GAAOlT,KAAO,SAAU3b,EAAMvrB,IACvBurB,EAAKwB,eAAiBxB,KAAUoQ,IACnCD,GAAYnQ,GAEd,IAAI1R,EAAKohB,GAAKqkB,WAAWt/C,EAAK2G,eAAgBsD,EAAM4P,GAAMkP,GAAOpR,KAAKsjB,GAAKqkB,WAAYt/C,EAAK2G,eAAiBkT,EAAG0R,EAAMvrB,GAAO67B,SAAkBl8B,EAC/I,YAAeA,IAARsK,EAAoBA,EAAM+wB,GAAQ+O,aAAelO,GAAiBtQ,EAAKpqB,aAAanB,IAASiK,EAAMshB,EAAKg0B,iBAAiBv/C,KAAUiK,EAAIu1C,UAAYv1C,EAAIlG,MAAQ,IACxK,EACAq2C,GAAOlhB,MAAQ,SAAUpe,GACvB,MAAM,IAAIrJ,MAAM,0CAA4CqJ,EAC9D,EACAs/B,GAAOqF,WAAa,SAAUnF,GAC5B,IAAI/uB,EAAMm0B,EAAa,GAAIl4C,EAAI,EAAG3H,EAAI,EAItC,GAHA47B,IAAgBT,GAAQ2kB,iBACxBnkB,IAAaR,GAAQ4kB,YAActF,EAAQ5iC,MAAM,GACjD4iC,EAAQp0C,KAAK6xC,IACTtc,GAAc,CAChB,KAAOlQ,EAAO+uB,EAAQz6C,MAChB0rB,IAAS+uB,EAAQz6C,KACnB2H,EAAIk4C,EAAW33C,KAAKlI,IAGxB,KAAO2H,KACL8yC,EAAQtN,OAAO0S,EAAWl4C,GAAI,EAElC,CAEA,OADAg0B,GAAY,KACL8e,CACT,EACApf,GAAUkf,GAAOlf,QAAU,SAAU3P,GACnC,IAAIhB,EAAMwL,EAAM,GAAIl2B,EAAI,EAAGyrB,EAAWC,EAAKD,SAC3C,GAAKA,GAIE,GAAiB,IAAbA,GAA+B,IAAbA,GAA+B,KAAbA,EAAiB,CAC9D,GAAgC,iBAArBC,EAAK0D,YACd,OAAO1D,EAAK0D,YAEZ,IAAK1D,EAAOA,EAAKoC,WAAYpC,EAAMA,EAAOA,EAAK8B,YAC7C0I,GAAOmF,GAAQ3P,EAGrB,MAAO,GAAiB,IAAbD,GAA+B,IAAbA,EAC3B,OAAOC,EAAKs0B,eAZZ,KAAOt1B,EAAOgB,EAAK1rB,MACjBk2B,GAAOmF,GAAQ3Q,GAanB,OAAOwL,CACT,EACAkF,GAAOmf,GAAO0F,UAAY,CACxBzE,YAAa,GACb0E,aAAcxE,GACd5xB,MAAOovB,GACPuG,WAAY,CAAC,EACbb,KAAM,CAAC,EACPP,SAAU,CACR,IAAK,CACH/B,IAAK,aACLG,OAAO,GAET,IAAK,CAAEH,IAAK,cACZ,IAAK,CACHA,IAAK,kBACLG,OAAO,GAET,IAAK,CAAEH,IAAK,oBAEde,UAAW,CACT/D,KAAM,SAAUxvB,GAMd,OALAA,EAAM,GAAKA,EAAM,GAAGpc,QAAQusC,GAAWC,IACvCpwB,EAAM,IAAMA,EAAM,IAAMA,EAAM,IAAMA,EAAM,IAAM,IAAIpc,QAAQusC,GAAWC,IACtD,OAAbpwB,EAAM,KACRA,EAAM,GAAK,IAAMA,EAAM,GAAK,KAEvBA,EAAMjS,MAAM,EAAG,EACxB,EACA2hC,MAAO,SAAU1vB,GAWf,OAVAA,EAAM,GAAKA,EAAM,GAAGhjB,cACS,QAAzBgjB,EAAM,GAAGjS,MAAM,EAAG,IACfiS,EAAM,IACTywB,GAAOlhB,MAAMvP,EAAM,IAErBA,EAAM,KAAOA,EAAM,GAAKA,EAAM,IAAMA,EAAM,IAAM,GAAK,GAAkB,SAAbA,EAAM,IAA8B,QAAbA,EAAM,KACvFA,EAAM,KAAOA,EAAM,GAAKA,EAAM,IAAmB,QAAbA,EAAM,KACjCA,EAAM,IACfywB,GAAOlhB,MAAMvP,EAAM,IAEdA,CACT,EACAyvB,OAAQ,SAAUzvB,GAChB,IAAIq2B,EAAQC,GAAYt2B,EAAM,IAAMA,EAAM,GAC1C,OAAIovB,GAAUM,MAAM/0C,KAAKqlB,EAAM,IACtB,MAELA,EAAM,GACRA,EAAM,GAAKA,EAAM,IAAMA,EAAM,IAAM,GAC1Bs2B,GAAYpH,GAAQv0C,KAAK27C,KAAcD,EAAS5kB,GAAS6kB,GAAU,MAAWD,EAASC,EAASp5C,QAAQ,IAAKo5C,EAASngD,OAASkgD,GAAUC,EAASngD,UAC3J6pB,EAAM,GAAKA,EAAM,GAAGjS,MAAM,EAAGsoC,GAC7Br2B,EAAM,GAAKs2B,EAASvoC,MAAM,EAAGsoC,IAExBr2B,EAAMjS,MAAM,EAAG,GACxB,GAEF9Q,OAAQ,CACNsyC,IAAK,SAAUgH,GACb,IAAI1zB,EAAW0zB,EAAiB3yC,QAAQusC,GAAWC,IAAWpzC,cAC9D,MAA4B,MAArBu5C,EAA2B,WAChC,OAAO,CACT,EAAI,SAAU30B,GACZ,OAAOA,EAAKiB,UAAYjB,EAAKiB,SAAS7lB,gBAAkB6lB,CAC1D,CACF,EACAysB,MAAO,SAAUvvC,GACf,IAAI4jC,EAAUqK,GAAWjuC,EAAY,KACrC,OAAO4jC,IAAYA,EAAU,IAAI3B,OAAO,MAAQ2M,GAAa,IAAM5uC,EAAY,IAAM4uC,GAAa,SAAWX,GAAWjuC,GAAW,SAAU6hB,GAC3I,OAAO+hB,EAAQhpC,KAA+B,iBAAnBinB,EAAK7hB,WAA0B6hB,EAAK7hB,kBAAoB6hB,EAAKpqB,eAAiB62C,IAAgBzsB,EAAKpqB,aAAa,UAAY,GACzJ,GACF,EACAg4C,KAAM,SAAUn5C,EAAMmgD,EAAUC,GAC9B,OAAO,SAAU70B,GACf,IAAIoP,EAASyf,GAAOlT,KAAK3b,EAAMvrB,GAC/B,OAAc,MAAV26B,EACkB,OAAbwlB,GAEJA,IAGLxlB,GAAU,GACU,MAAbwlB,EAAmBxlB,IAAWylB,EAAqB,OAAbD,EAAoBxlB,IAAWylB,EAAqB,OAAbD,EAAoBC,GAAmC,IAA1BzlB,EAAO9zB,QAAQu5C,GAA4B,OAAbD,EAAoBC,GAASzlB,EAAO9zB,QAAQu5C,IAAU,EAAiB,OAAbD,EAAoBC,GAASzlB,EAAOjjB,OAAO0oC,EAAMtgD,UAAYsgD,EAAqB,OAAbD,GAAqB,IAAMxlB,EAAS,KAAK9zB,QAAQu5C,IAAU,EAAiB,OAAbD,IAAoBxlB,IAAWylB,GAASzlB,EAAOjjB,MAAM,EAAG0oC,EAAMtgD,OAAS,KAAOsgD,EAAQ,KACra,CACF,EACA/G,MAAO,SAAU5vC,EAAM42C,EAAMzE,EAAUU,EAAOgE,GAC5C,IAAIC,EAA8B,QAArB92C,EAAKiO,MAAM,EAAG,GAAc8oC,EAA6B,SAAnB/2C,EAAKiO,OAAO,GAAe+oC,EAAkB,YAATJ,EACvF,OAAiB,IAAV/D,GAAwB,IAATgE,EAAa,SAAU/0B,GAC3C,QAASA,EAAK5iB,UAChB,EAAI,SAAU4iB,EAAM8uB,EAASkC,GAC3B,IAAIhkB,EAAOkkB,EAAYlyB,EAAMkxB,EAAMiF,EAAWhsC,EAAOynC,EAAMoE,IAAWC,EAAU,cAAgB,kBAAmBz2B,EAASwB,EAAK5iB,WAAY3I,EAAOygD,GAAUl1B,EAAKiB,SAAS7lB,cAAeg6C,GAAYpE,IAAQkE,EAC/M,GAAI12B,EAAQ,CACV,GAAIw2B,EAAQ,CACV,KAAOpE,GAAK,CAEV,IADA5xB,EAAOgB,EACAhB,EAAOA,EAAK4xB,IACjB,GAAIsE,EAASl2B,EAAKiC,SAAS7lB,gBAAkB3G,EAAyB,IAAlBuqB,EAAKe,SACvD,OAAO,EAGX5W,EAAQynC,EAAe,SAAT1yC,IAAoBiL,GAAS,aAC7C,CACA,OAAO,CACT,CAEA,GADAA,EAAQ,CAAC8rC,EAAUz2B,EAAO4D,WAAa5D,EAAO6D,WAC1C4yB,GAAWG,GAMb,IAHAD,GADAnoB,GADAkkB,EAAa1yB,EAAOosB,MAAapsB,EAAOosB,IAAW,CAAC,IACjC1sC,IAAS,IACV,KAAOiuC,IAAWnf,EAAM,GAC1CkjB,EAAOljB,EAAM,KAAOmf,IAAWnf,EAAM,GACrChO,EAAOm2B,GAAa32B,EAAOe,WAAW41B,GAC/Bn2B,IAASm2B,GAAan2B,GAAQA,EAAK4xB,KAASV,EAAOiF,EAAY,IAAMhsC,EAAMwjC,OAChF,GAAsB,IAAlB3tB,EAAKe,YAAoBmwB,GAAQlxB,IAASgB,EAAM,CAClDkxB,EAAWhzC,GAAQ,CACjBiuC,GACAgJ,EACAjF,GAEF,KACF,OAEG,GAAIkF,IAAapoB,GAAShN,EAAK4qB,MAAa5qB,EAAK4qB,IAAW,CAAC,IAAI1sC,KAAU8uB,EAAM,KAAOmf,GAC7F+D,EAAOljB,EAAM,QAEb,MAAOhO,IAASm2B,GAAan2B,GAAQA,EAAK4xB,KAASV,EAAOiF,EAAY,IAAMhsC,EAAMwjC,UAC3EuI,EAASl2B,EAAKiC,SAAS7lB,gBAAkB3G,EAAyB,IAAlBuqB,EAAKe,cAAqBmwB,IACzEkF,KACDp2B,EAAK4rB,MAAa5rB,EAAK4rB,IAAW,CAAC,IAAI1sC,GAAQ,CAC9CiuC,GACA+D,IAGAlxB,IAASgB,MAOnB,OADAkwB,GAAQ6E,KACQhE,GAASb,EAAOa,GAAU,GAAKb,EAAOa,GAAS,CACjE,CACF,CACF,EACAlD,OAAQ,SAAUwH,EAAQhF,GACxB,IAAIziC,EAAMU,EAAKohB,GAAKud,QAAQoI,IAAW3lB,GAAK6gB,WAAW8E,EAAOj6C,gBAAkByzC,GAAOlhB,MAAM,uBAAyB0nB,GACtH,OAAI/mC,EAAGs8B,IACEt8B,EAAG+hC,GAER/hC,EAAG/Z,OAAS,GACdqZ,EAAO,CACLynC,EACAA,EACA,GACAhF,GAEK3gB,GAAK6gB,WAAW93C,eAAe48C,EAAOj6C,eAAiB40C,IAAa,SAAUhB,EAAMn1B,GAEzF,IADA,IAAIy7B,EAAKC,EAAUjnC,EAAG0gC,EAAMqB,GAAW/7C,EAAIihD,EAAQhhD,OAC5CD,KAEL06C,EADAsG,EAAMh6C,GAAQ8Q,KAAK4iC,EAAMuG,EAAQjhD,OACnBulB,EAAQy7B,GAAOC,EAAQjhD,GAEzC,IAAK,SAAU0rB,GACb,OAAO1R,EAAG0R,EAAM,EAAGpS,EACrB,GAEKU,CACT,GAEF2+B,QAAS,CACPx+B,IAAKuhC,IAAa,SAAUlwB,GAC1B,IAAIpqB,EAAQ,GAAIq5C,EAAU,GAAI2B,EAAU5gB,GAAQhQ,EAAS9d,QAAQkrC,GAAO,OACxE,OAAOwD,EAAQ9F,IAAWoF,IAAa,SAAUhB,EAAMn1B,EAASi1B,EAASkC,GAEvE,IADA,IAAIhxB,EAAMuxB,EAAYb,EAAQ1B,EAAM,KAAMgC,EAAK,IAAK18C,EAAI06C,EAAKz6C,OACtDD,MACD0rB,EAAOuxB,EAAUj9C,MACnB06C,EAAK16C,KAAOulB,EAAQvlB,GAAK0rB,GAG/B,IAAK,SAAUA,EAAM8uB,EAASkC,GAI5B,OAHAt7C,EAAM,GAAKsqB,EACX0wB,EAAQh7C,EAAO,KAAMs7C,EAAKjC,GAC1Br5C,EAAM,GAAK,MACHq5C,EAAQpC,KAClB,CACF,IACA6I,IAAKxF,IAAa,SAAUlwB,GAC1B,OAAO,SAAUE,GACf,OAAO6uB,GAAO/uB,EAAUE,GAAMzrB,OAAS,CACzC,CACF,IACAyL,SAAUgwC,IAAa,SAAUvwB,GAE/B,OADAA,EAAOA,EAAKzd,QAAQusC,GAAWC,IACxB,SAAUxuB,GACf,OAAQA,EAAK0D,aAAe1D,EAAKuc,WAAa5M,GAAQ3P,IAAO1kB,QAAQmkB,IAAS,CAChF,CACF,IACAg2B,KAAMzF,IAAa,SAAUyF,GAK3B,OAJKlI,GAAYx0C,KAAK08C,GAAQ,KAC5B5G,GAAOlhB,MAAM,qBAAuB8nB,GAEtCA,EAAOA,EAAKzzC,QAAQusC,GAAWC,IAAWpzC,cACnC,SAAU4kB,GACf,IAAI01B,EACJ,GACE,GAAIA,EAAWplB,GAAiBtQ,EAAKy1B,KAAOz1B,EAAKpqB,aAAa,aAAeoqB,EAAKpqB,aAAa,QAE7F,OADA8/C,EAAWA,EAASt6C,iBACAq6C,GAAyC,IAAjCC,EAASp6C,QAAQm6C,EAAO,YAE9Cz1B,EAAOA,EAAK5iB,aAAiC,IAAlB4iB,EAAKD,UAC1C,OAAO,CACT,CACF,IACAhrB,OAAQ,SAAUirB,GAChB,IAAI21B,EAAO9/C,OAAO+/C,UAAY//C,OAAO+/C,SAASD,KAC9C,OAAOA,GAAQA,EAAKxpC,MAAM,KAAO6T,EAAKrqB,EACxC,EACAmoB,KAAM,SAAUkC,GACd,OAAOA,IAASqQ,EAClB,EACApwB,MAAO,SAAU+f,GACf,OAAOA,IAASoQ,GAAWylB,iBAAmBzlB,GAAW0lB,UAAY1lB,GAAW0lB,gBAAkB91B,EAAK9hB,MAAQ8hB,EAAK+1B,OAAS/1B,EAAKg2B,SACpI,EACAC,QAAS,SAAUj2B,GACjB,OAAyB,IAAlBA,EAAK1f,QACd,EACAA,SAAU,SAAU0f,GAClB,OAAyB,IAAlBA,EAAK1f,QACd,EACA41C,QAAS,SAAUl2B,GACjB,IAAIiB,EAAWjB,EAAKiB,SAAS7lB,cAC7B,MAAoB,UAAb6lB,KAA0BjB,EAAKk2B,SAAwB,WAAbj1B,KAA2BjB,EAAKm2B,QACnF,EACAA,SAAU,SAAUn2B,GAIlB,OAHIA,EAAK5iB,YACP4iB,EAAK5iB,WAAWg5C,eAEO,IAAlBp2B,EAAKm2B,QACd,EACA1yB,MAAO,SAAUzD,GACf,IAAKA,EAAOA,EAAKoC,WAAYpC,EAAMA,EAAOA,EAAK8B,YAC7C,GAAI9B,EAAKD,SAAW,EAClB,OAAO,EAGX,OAAO,CACT,EACAvB,OAAQ,SAAUwB,GAChB,OAAQ0P,GAAKud,QAAQxpB,MAAMzD,EAC7B,EACAq2B,OAAQ,SAAUr2B,GAChB,OAAOkuB,GAAQn1C,KAAKinB,EAAKiB,SAC3B,EACAvrB,MAAO,SAAUsqB,GACf,OAAOiuB,GAAQl1C,KAAKinB,EAAKiB,SAC3B,EACAq1B,OAAQ,SAAUt2B,GAChB,IAAIvrB,EAAOurB,EAAKiB,SAAS7lB,cACzB,MAAgB,UAAT3G,GAAkC,WAAdurB,EAAK9hB,MAA8B,WAATzJ,CACvD,EACAgrB,KAAM,SAAUO,GACd,IAAI2b,EACJ,MAAuC,UAAhC3b,EAAKiB,SAAS7lB,eAA2C,SAAd4kB,EAAK9hB,OAA0D,OAArCy9B,EAAO3b,EAAKpqB,aAAa,UAA2C,SAAvB+lC,EAAKvgC,cAChI,EACA21C,MAAOX,IAAuB,WAC5B,MAAO,CAAC,EACV,IACA2E,KAAM3E,IAAuB,SAAUE,EAAc/7C,GACnD,MAAO,CAACA,EAAS,EACnB,IACAiX,GAAI4kC,IAAuB,SAAUE,EAAc/7C,EAAQ87C,GACzD,MAAO,CAACA,EAAW,EAAIA,EAAW97C,EAAS87C,EAC7C,IACAkG,KAAMnG,IAAuB,SAAUE,EAAc/7C,GAEnD,IADA,IAAID,EAAI,EACDA,EAAIC,EAAQD,GAAK,EACtBg8C,EAAa9zC,KAAKlI,GAEpB,OAAOg8C,CACT,IACAkG,IAAKpG,IAAuB,SAAUE,EAAc/7C,GAElD,IADA,IAAID,EAAI,EACDA,EAAIC,EAAQD,GAAK,EACtBg8C,EAAa9zC,KAAKlI,GAEpB,OAAOg8C,CACT,IACAmG,GAAIrG,IAAuB,SAAUE,EAAc/7C,EAAQ87C,GAEzD,IADA,IAAI/7C,EAAI+7C,EAAW,EAAIA,EAAW97C,EAAS87C,IAClC/7C,GAAK,GACZg8C,EAAa9zC,KAAKlI,GAEpB,OAAOg8C,CACT,IACAoG,GAAItG,IAAuB,SAAUE,EAAc/7C,EAAQ87C,GAEzD,IADA,IAAI/7C,EAAI+7C,EAAW,EAAIA,EAAW97C,EAAS87C,IAClC/7C,EAAIC,GACX+7C,EAAa9zC,KAAKlI,GAEpB,OAAOg8C,CACT,MAGJ5gB,GAAKud,QAAQ0J,IAAMjnB,GAAKud,QAAQzhC,GAChCyF,EAAO,CACL,QACA,WACA,OACA,WACA,UACC,SAAU3c,GACXo7B,GAAKud,QAAQ34C,GA5hBf,SAA2B4J,GACzB,OAAO,SAAU8hB,GAEf,MAAgB,UADLA,EAAKiB,SAAS7lB,eACE4kB,EAAK9hB,OAASA,CAC3C,CACF,CAuhBoB04C,CAAkBtiD,EACtC,IACA2c,EAAO,CACL,SACA,UACC,SAAU3c,GACXo7B,GAAKud,QAAQ34C,GA5hBf,SAA4B4J,GAC1B,OAAO,SAAU8hB,GACf,IAAIvrB,EAAOurB,EAAKiB,SAAS7lB,cACzB,OAAiB,UAAT3G,GAA6B,WAATA,IAAsBurB,EAAK9hB,OAASA,CAClE,CACF,CAuhBoB24C,CAAmBviD,EACvC,IAGAi8C,GAAW1mC,UAAY6lB,GAAKonB,QAAUpnB,GAAKud,QAC3Cvd,GAAK6gB,WAAa,IAAIA,GACtB1gB,GAAWgf,GAAOhf,SAAW,SAAU/P,EAAUi3B,GAC/C,IAAIxB,EAASn3B,EAAOoyB,EAAQtyC,EAAM84C,EAAO9H,EAAQ+H,EAAY/hC,EAASo3B,GAAWxsB,EAAW,KAC5F,GAAI5K,EACF,OAAO6hC,EAAY,EAAI7hC,EAAO/I,MAAM,GAKtC,IAHA6qC,EAAQl3B,EACRovB,EAAS,GACT+H,EAAavnB,GAAKiiB,UACXqF,GAAO,CAgBZ,IAAK94C,KAfAq3C,KAAYn3B,EAAQ+uB,GAAOhvB,KAAK64B,MAC/B54B,IACF44B,EAAQA,EAAM7qC,MAAMiS,EAAM,GAAG7pB,SAAWyiD,GAE1C9H,EAAO1yC,KAAKg0C,EAAS,KAEvB+E,GAAU,GACNn3B,EAAQgvB,GAAajvB,KAAK64B,MAC5BzB,EAAUn3B,EAAM2xB,QAChBS,EAAOh0C,KAAK,CACVhE,MAAO+8C,EACPr3C,KAAMkgB,EAAM,GAAGpc,QAAQkrC,GAAO,OAEhC8J,EAAQA,EAAM7qC,MAAMopC,EAAQhhD,SAEjBm7B,GAAKr0B,OACXq0B,GAAKr0B,OAAO5C,eAAeyF,OAG3BkgB,EAAQovB,GAAUtvC,GAAMigB,KAAK64B,KAAaC,EAAW/4C,MAAUkgB,EAAQ64B,EAAW/4C,GAAMkgB,MAC3Fm3B,EAAUn3B,EAAM2xB,QAChBS,EAAOh0C,KAAK,CACVhE,MAAO+8C,EACPr3C,KAAMA,EACN2b,QAASuE,IAEX44B,EAAQA,EAAM7qC,MAAMopC,EAAQhhD,UAGhC,IAAKghD,EACH,KAEJ,CACA,OAAOwB,EAAYC,EAAMziD,OAASyiD,EAAQnI,GAAOlhB,MAAM7N,GAAYwsB,GAAWxsB,EAAUovB,GAAQ/iC,MAAM,EACxG,EAuNA2jB,GAAU+e,GAAO/e,QAAU,SAAUhQ,EAAU1B,GAC7C,IAAI9pB,EAAG4iD,EAAc,GAAIC,EAAkB,GAAIjiC,EAASq3B,GAAczsB,EAAW,KACjF,IAAK5K,EAAQ,CAKX,IAJKkJ,IACHA,EAAQyR,GAAS/P,IAEnBxrB,EAAI8pB,EAAM7pB,OACHD,MACL4gB,EAASs9B,GAAkBp0B,EAAM9pB,KACtBs2C,IACTsM,EAAY16C,KAAK0Y,GAEjBiiC,EAAgB36C,KAAK0Y,GAGzBA,EAASq3B,GAAczsB,EAxE3B,SAAkCq3B,EAAiBD,GACjD,IAAIE,EAAQF,EAAY3iD,OAAS,EAAG8iD,EAAYF,EAAgB5iD,OAAS,EAAG+iD,EAAe,SAAUtI,EAAMF,EAASkC,EAAKjC,EAASwI,GAC9H,IAAIv3B,EAAM/jB,EAAGy0C,EAAS8G,EAAe,EAAGljD,EAAI,IAAKi9C,EAAYvC,GAAQ,GAAIyI,EAAa,GAAIC,EAAgB1nB,GAAkBmiB,EAAQnD,GAAQqI,GAAa3nB,GAAKwjB,KAAKvF,IAAI,IAAK4J,GAAYI,EAAgBxL,IAA4B,MAAjBuL,EAAwB,EAAI9xB,KAAKgyB,UAAY,GAAKnwC,EAAM0qC,EAAM59C,OAIjR,IAHIgjD,IACFvnB,GAAmB8e,IAAY1e,IAAc0e,GAExCx6C,IAAMmT,GAA4B,OAApBuY,EAAOmyB,EAAM79C,IAAaA,IAAK,CAClD,GAAI+iD,GAAar3B,EAAM,CAErB,IADA/jB,EAAI,EACGy0C,EAAUyG,EAAgBl7C,MAC/B,GAAIy0C,EAAQ1wB,EAAM8uB,EAASkC,GAAM,CAC/BjC,EAAQvyC,KAAKwjB,GACb,KACF,CAEEu3B,IACFpL,GAAUwL,EAEd,CACIP,KACEp3B,GAAQ0wB,GAAW1wB,IACrBw3B,IAEExI,GACFuC,EAAU/0C,KAAKwjB,GAGrB,CAEA,GADAw3B,GAAgBljD,EACZ8iD,GAAS9iD,IAAMkjD,EAAc,CAE/B,IADAv7C,EAAI,EACGy0C,EAAUwG,EAAYj7C,MAC3By0C,EAAQa,EAAWkG,EAAY3I,EAASkC,GAE1C,GAAIhC,EAAM,CACR,GAAIwI,EAAe,EACjB,KAAOljD,KACCi9C,EAAUj9C,IAAMmjD,EAAWnjD,KAC/BmjD,EAAWnjD,GAAKq4C,GAAIvgC,KAAK2iC,IAI/B0I,EAAanG,GAASmG,EACxB,CACA5K,GAAO/+B,MAAMihC,EAAS0I,GAClBF,IAAcvI,GAAQyI,EAAWljD,OAAS,GAAKijD,EAAeN,EAAY3iD,OAAS,GACrFs6C,GAAOqF,WAAWnF,EAEtB,CAKA,OAJIwI,IACFpL,GAAUwL,EACV3nB,GAAmB0nB,GAEdnG,CACT,EACF,OAAO6F,EAAQpH,GAAasH,GAAgBA,CAC9C,CAgBqCO,CAAyBV,EAAiBD,IAC3EhiC,EAAO4K,SAAWA,CACpB,CACA,OAAO5K,CACT,EACA6a,GAAW8e,GAAOiJ,OAAS,SAAUh4B,EAAUgvB,EAASC,EAASC,GAC/D,IAAI16C,EAAGk8C,EAAQuH,EAAO75C,EAAMg1C,EAAM8E,EAA+B,mBAAbl4B,GAA2BA,EAAU1B,GAAS4wB,GAAQnf,GAAS/P,EAAWk4B,EAASl4B,UAAYA,GAEnJ,GADAivB,EAAUA,GAAW,GACA,IAAjB3wB,EAAM7pB,OAAc,CAEtB,IADAi8C,EAASpyB,EAAM,GAAKA,EAAM,GAAGjS,MAAM,IACxB5X,OAAS,GAAkC,QAA5BwjD,EAAQvH,EAAO,IAAItyC,MAAiBuxB,GAAQwjB,SAAgC,IAArBnE,EAAQ/uB,UAAkBuQ,IAAkBZ,GAAKijB,SAASnC,EAAO,GAAGtyC,MAAO,CAE1J,KADA4wC,GAAWpf,GAAKwjB,KAAKzF,GAAGsK,EAAMl+B,QAAQ,GAAG7X,QAAQusC,GAAWC,IAAYM,IAAY,IAAI,IAEtF,OAAOC,EACEiJ,IACTlJ,EAAUA,EAAQ1xC,YAEpB0iB,EAAWA,EAAS3T,MAAMqkC,EAAOT,QAAQv3C,MAAMjE,OACjD,CAEA,IADAD,EAAIk5C,GAAUQ,aAAaj1C,KAAK+mB,GAAY,EAAI0wB,EAAOj8C,OAChDD,MACLyjD,EAAQvH,EAAOl8C,IACXo7B,GAAKijB,SAASz0C,EAAO65C,EAAM75C,QAG/B,IAAIg1C,EAAOxjB,GAAKwjB,KAAKh1C,MACf8wC,EAAOkE,EAAK6E,EAAMl+B,QAAQ,GAAG7X,QAAQusC,GAAWC,IAAYH,GAASt1C,KAAKy3C,EAAO,GAAGtyC,OAASyxC,GAAYb,EAAQ1xC,aAAe0xC,IAAU,CAG5I,GAFA0B,EAAO/O,OAAOntC,EAAG,KACjBwrB,EAAWkvB,EAAKz6C,QAAUm7C,GAAWc,IAGnC,OADA3D,GAAO/+B,MAAMihC,EAASC,GACfD,EAET,KACF,CAGN,CAEA,OADCiJ,GAAYloB,GAAQhQ,EAAU1B,IAAQ4wB,EAAMF,GAAUxe,GAAgBye,EAASV,GAASt1C,KAAK+mB,IAAa6vB,GAAYb,EAAQ1xC,aAAe0xC,GACvIC,CACT,EACAtf,GAAQ4kB,WAAazJ,GAAQvtB,MAAM,IAAI1iB,KAAK6xC,IAAW5d,KAAK,MAAQgc,GACpEnb,GAAQ2kB,mBAAqBlkB,GAC7BC,KACAV,GAAQ+jB,cAAe,EAEvB,IAAIzwB,GAAM/sB,SACNwG,GAAO0O,MAAMrB,UAAUrN,KACvB2P,GAAQjB,MAAMrB,UAAUsC,MACxB8rC,GAAa,2CACbC,GAAUxN,GAAWpC,MACrB6P,GAAcn7B,GAAME,QAAQ,+BAC5Bk7B,GAAY,SAAU7gD,GACxB,YAAsB,IAARA,CAChB,EACI8gD,GAAW,SAAU9gD,GACvB,MAAsB,iBAARA,CAChB,EAII+gD,GAAmB,SAAUn5B,EAAMo5B,GAErC,IAGIv5B,EAHAtiB,GADJ67C,EAAUA,GAAWx1B,IACGnmB,cAAc,OAClC47C,EAAOD,EAAQE,yBAGnB,IAFA/7C,EAAU2J,UAAY8Y,EAEfH,EAAOtiB,EAAU0lB,YACtBo2B,EAAK17C,YAAYkiB,GAEnB,OAAOw5B,CACT,EACIE,GAAgB,SAAUC,EAAaC,EAAYphD,EAAUua,GAC/D,IAAIzd,EACJ,GAAI+jD,GAASO,GACXA,EAAaN,GAAiBM,EAAYC,GAAmBF,EAAY,UACpE,GAAIC,EAAWrkD,SAAWqkD,EAAW74B,SAAU,CAEpD,GADA64B,EAAaE,GAASC,UAAUH,GAC5B7mC,EACF,IAAKzd,EAAIskD,EAAWrkD,OAAS,EAAGD,GAAK,EAAGA,IACtCokD,GAAcC,EAAaC,EAAWtkD,GAAIkD,EAAUua,QAGtD,IAAKzd,EAAI,EAAGA,EAAIskD,EAAWrkD,OAAQD,IACjCokD,GAAcC,EAAaC,EAAWtkD,GAAIkD,EAAUua,GAGxD,OAAO4mC,CACT,CACA,GAAIC,EAAW74B,SAEb,IADAzrB,EAAIqkD,EAAYpkD,OACTD,KACLkD,EAAS4U,KAAKusC,EAAYrkD,GAAIskD,GAGlC,OAAOD,CACT,EACIK,GAAW,SAAUh6B,EAAM7gB,GAC7B,OAAO6gB,GAAQ7gB,IAA8E,KAAhE,IAAM6gB,EAAK7gB,UAAY,KAAK7C,QAAQ,IAAM6C,EAAY,IACrF,EACI86C,GAAS,SAAUz1B,EAAUtmB,EAASnD,GACxC,IAAIm/C,EAAYC,EAahB,OAZAj8C,EAAU47C,GAAS57C,GAAS,GAC5BsmB,EAAS5T,MAAK,WACZ,IAAIQ,EAAOrY,KACNgC,GAAOm/C,IAAe9oC,EAAKhT,aAC9B87C,EAAa9oC,EAAKhT,WAClB+7C,EAAaj8C,EAAQ2J,WAAU,GAC/BuJ,EAAKhT,WAAWC,aAAa87C,EAAY/oC,IAGzC+oC,EAAWr8C,YAAYsT,EAE3B,IACOoT,CACT,EACI41B,GAAgBp8B,GAAME,QAAQ,uEAAwE,KACtGm8B,GAAar8B,GAAME,QAAQ,gGAAiG,KAC5Ho8B,GAAU,CACZC,IAAK,UACLC,MAAO,YACPC,SAAU,YAERC,GAAS,CAAEC,MAAO,YAClBC,GAAY,CAAC,EAAGC,GAAW,CAAC,EAC5BC,GAAsB,SAAUh6B,EAAUgvB,GAC5C,OAAO,IAAIgK,GAASxqC,GAAGyrC,KAAKj6B,EAAUgvB,EACxC,EAcIkL,GAAmB,aACnBC,GAAS,SAAUxjC,GACrB,OAAOA,QAAoC,IAAM,GAAKA,GAAKzU,QAAQg4C,GAAkB,GACvF,EACIE,GAAS,SAAU3iD,EAAKC,GAC1B,IAAIjD,EAAQgB,EAAKjB,EAAGkE,EACpB,GAAIjB,EAEF,QAAenD,KADfG,EAASgD,EAAIhD,SAEX,IAAKgB,KAAOgC,EACV,GAAIA,EAAIkB,eAAelD,KACrBiD,EAAQjB,EAAIhC,IAC6B,IAArCiC,EAAS4U,KAAK5T,EAAOjD,EAAKiD,IAC5B,WAKN,IAAKlE,EAAI,EAAGA,EAAIC,IACdiE,EAAQjB,EAAIjD,IAC2B,IAAnCkD,EAAS4U,KAAK5T,EAAOlE,EAAGkE,IAFNlE,KAQ5B,OAAOiD,CACT,EACI4iD,GAAS,SAAUrmC,EAAOtc,GAC5B,IAAIuc,EAAM,GAMV,OALAmmC,GAAOpmC,GAAO,SAAUxf,EAAG0f,GACrBxc,EAASwc,EAAM1f,IACjByf,EAAIvX,KAAKwX,EAEb,IACOD,CACT,EACI8kC,GAAqB,SAAUjxC,GACjC,OAAKA,EAGoB,IAArBA,EAAQmY,SACHnY,EAEFA,EAAQ4Z,cALNuB,EAMX,EACA+2B,GAAoBxrC,GAAKwrC,GAAoBjwC,UAAY,CACvDuB,YAAa0uC,GACbh6B,SAAU,GACVgvB,QAAS,KACTv6C,OAAQ,EACRwlD,KAAM,SAAUj6B,EAAUgvB,GACxB,IACI1wB,EAAOY,EADP5O,EAAOrY,KAEX,IAAK+nB,EACH,OAAO1P,EAET,GAAI0P,EAASC,SAGX,OAFA3P,EAAK0+B,QAAU1+B,EAAK,GAAK0P,EACzB1P,EAAK7b,OAAS,EACP6b,EAET,GAAI0+B,GAAWA,EAAQ/uB,SACrB3P,EAAK0+B,QAAUA,MACV,CACL,GAAIA,EACF,OAAOgK,GAASh5B,GAAU6b,KAAKmT,GAEjC1+B,EAAK0+B,QAAUA,EAAU94C,QAC3B,CACA,GAAIqiD,GAASv4B,GAAW,CAWtB,GAVA1P,EAAK0P,SAAWA,IAEd1B,EADyB,MAAvB0B,EAASnhB,OAAO,IAAuD,MAAzCmhB,EAASnhB,OAAOmhB,EAASvrB,OAAS,IAAcurB,EAASvrB,QAAU,EAC3F,CACN,KACAurB,EACA,MAGMm4B,GAAW95B,KAAK2B,IAqBxB,OAAOg5B,GAAShK,GAASoE,KAAKpzB,GAlB9B,GAAI1B,EAAM,GAER,IADAY,EAAOs5B,GAAiBx4B,EAAU+4B,GAAmB/J,IAAU1sB,WACxDpD,GACLxiB,GAAK4P,KAAKgE,EAAM4O,GAChBA,EAAOA,EAAK8C,gBAET,CAEL,KADA9C,EAAO65B,GAAmB/J,GAASS,eAAenxB,EAAM,KAEtD,OAAOhO,EAET,GAAI4O,EAAKrpB,KAAOyoB,EAAM,GACpB,OAAOhO,EAAK8iC,KAAKpzB,GAEnB1P,EAAK7b,OAAS,EACd6b,EAAK,GAAK4O,CACZ,CAIJ,MACEjnB,KAAKqB,IAAI0mB,GAAU,GAErB,OAAO1P,CACT,EACAJ,QAAS,WACP,OAAOgN,GAAMhN,QAAQjY,KACvB,EACAqB,IAAK,SAAU+jB,EAAOxiB,GACpB,IACIsuB,EAAO30B,EADP8b,EAAOrY,KAEX,GAAIsgD,GAASl7B,GACX,OAAO/M,EAAKhX,IAAI0/C,GAAS37B,IAE3B,IAAa,IAATxiB,EAGF,IAFAsuB,EAAQ6vB,GAASsB,OAAOhqC,EAAKJ,UAAUvS,OAAOq7C,GAASC,UAAU57B,KACjE/M,EAAK7b,OAAS00B,EAAM10B,OACfD,EAAI,EAAGA,EAAI20B,EAAM10B,OAAQD,IAC5B8b,EAAK9b,GAAK20B,EAAM30B,QAGlBkI,GAAKsR,MAAMsC,EAAM0oC,GAASC,UAAU57B,IAEtC,OAAO/M,CACT,EACAurB,KAAM,SAAUlnC,EAAM+D,GACpB,IACI6hD,EADAjqC,EAAOrY,KAEX,GAAoB,iBAATtD,EACTylD,GAAOzlD,GAAM,SAAUA,EAAM+D,GAC3B4X,EAAKurB,KAAKlnC,EAAM+D,EAClB,QACK,KAAI4/C,GAAU5/C,GAgBd,CACL,GAAI4X,EAAK,IAA2B,IAArBA,EAAK,GAAG2P,SAAgB,CAErC,IADAs6B,EAAOT,GAAUnlD,KACL4lD,EAAKnuB,IACf,OAAOmuB,EAAKnuB,IAAI9b,EAAK,GAAI3b,GAE3B,GAAI4kD,GAAW5kD,GACb,OAAO2b,EAAKkqC,KAAK7lD,GAAQA,OAAOL,EAGpB,QADdoE,EAAQ4X,EAAK,GAAGxa,aAAanB,EAAM,MAEjC+D,OAAQpE,EAEZ,CACA,OAAOoE,CACT,CA9BET,KAAK6X,MAAK,WACR,IAAIyqC,EACJ,GAAsB,IAAlBtiD,KAAKgoB,SAAgB,CAEvB,IADAs6B,EAAOT,GAAUnlD,KACL4lD,EAAKplB,IAEf,YADAolB,EAAKplB,IAAIl9B,KAAMS,GAGH,OAAVA,EACFT,KAAKuR,gBAAgB7U,EAAM,GAE3BsD,KAAK8E,aAAapI,EAAM+D,EAAO,EAEnC,CACF,GAgBF,CACA,OAAO4X,CACT,EACAmqC,WAAY,SAAU9lD,GACpB,OAAOsD,KAAK4jC,KAAKlnC,EAAM,KACzB,EACA6lD,KAAM,SAAU7lD,EAAM+D,GACpB,IAAI4X,EAAOrY,KAEX,GAAoB,iBADpBtD,EAAO6kD,GAAQ7kD,IAASA,GAEtBylD,GAAOzlD,GAAM,SAAUA,EAAM+D,GAC3B4X,EAAKkqC,KAAK7lD,EAAM+D,EAClB,QACK,KAAI4/C,GAAU5/C,GAOnB,OAAI4X,EAAK,IAAMA,EAAK,GAAG2P,UAAYtrB,KAAQ2b,EAAK,GACvCA,EAAK,GAAG3b,GAEV+D,EATPT,KAAK6X,MAAK,WACc,IAAlB7X,KAAKgoB,WACPhoB,KAAKtD,GAAQ+D,EAEjB,GAMF,CACA,OAAO4X,CACT,EACAyY,IAAK,SAAUp0B,EAAM+D,GACnB,IACI2wB,EAAKkxB,EADLjqC,EAAOrY,KAEPyiD,EAAQ,SAAU/lD,GACpB,OAAOA,EAAKuN,QAAQ,UAAU,SAAUvG,EAAGC,GACzC,OAAOA,EAAE0hC,aACX,GACF,EACIqd,EAAS,SAAUhmD,GACrB,OAAOA,EAAKuN,QAAQ,UAAU,SAAUvG,GACtC,MAAO,IAAMA,CACf,GACF,EACA,GAAoB,iBAAThH,EACTylD,GAAOzlD,GAAM,SAAUA,EAAM+D,GAC3B4X,EAAKyY,IAAIp0B,EAAM+D,EACjB,SAEA,GAAI4/C,GAAU5/C,GACZ/D,EAAO+lD,EAAM/lD,GACQ,iBAAV+D,GAAuB4gD,GAAc3kD,KAC9C+D,EAAQA,EAAMyX,WAAa,MAE7BG,EAAKR,MAAK,WACR,IAAIjM,EAAQ5L,KAAK4L,MAEjB,IADA02C,EAAOR,GAASplD,KACJ4lD,EAAKplB,IACfolB,EAAKplB,IAAIl9B,KAAMS,OADjB,CAIA,IACET,KAAK4L,MAAM+1C,GAAOjlD,IAASA,GAAQ+D,CACrC,CAAE,MAAOwyB,GACT,CACc,OAAVxyB,GAA4B,KAAVA,IAChBmL,EAAM+2C,eACR/2C,EAAM+2C,eAAeD,EAAOhmD,IAE5BkP,EAAM2F,gBAAgB7U,GAT1B,CAYF,QACK,CAGL,GAFA00B,EAAM/Y,EAAK,IACXiqC,EAAOR,GAASplD,KACJ4lD,EAAKnuB,IACf,OAAOmuB,EAAKnuB,IAAI/C,GAElB,IAAIA,EAAI3H,cAAcG,YAMf,OAAIwH,EAAIwxB,aACNxxB,EAAIwxB,aAAaH,EAAM/lD,IAEvB,GARP,IACE,OAAO00B,EAAI3H,cAAcG,YAAY8E,iBAAiB0C,EAAK,MAAMzC,iBAAiB+zB,EAAOhmD,GAC3F,CAAE,MAAOu2B,GACP,MACF,CAMJ,CAEF,OAAO5a,CACT,EACAhO,OAAQ,WAGN,IAFA,IACI4c,EAAM1qB,EAAIyD,KAAKxD,OACZD,KACL0qB,EAHSjnB,KAGGzD,GACZ4jD,GAAQnM,MAAM/sB,GACVA,EAAK5hB,YACP4hB,EAAK5hB,WAAW8J,YAAY8X,GAGhC,OAAOjnB,IACT,EACA0rB,MAAO,WAGL,IAFA,IACIzE,EAAM1qB,EAAIyD,KAAKxD,OACZD,KAEL,IADA0qB,EAHSjnB,KAGGzD,GACL0qB,EAAKoD,YACVpD,EAAK9X,YAAY8X,EAAKoD,YAG1B,OAAOrqB,IACT,EACAonB,KAAM,SAAU3mB,GACd,IACIlE,EADA8b,EAAOrY,KAEX,GAAIqgD,GAAU5/C,GAAQ,CACpBlE,EAAI8b,EAAK7b,OACT,IACE,KAAOD,KACL8b,EAAK9b,GAAG+R,UAAY7N,CAExB,CAAE,MAAOwyB,GACP8tB,GAAS1oC,EAAK9b,IAAImvB,QAAQF,OAAO/qB,EACnC,CACA,OAAO4X,CACT,CACA,OAAOA,EAAK,GAAKA,EAAK,GAAG/J,UAAY,EACvC,EACAoZ,KAAM,SAAUjnB,GACd,IACIlE,EADA8b,EAAOrY,KAEX,GAAIqgD,GAAU5/C,GAAQ,CAEpB,IADAlE,EAAI8b,EAAK7b,OACFD,KACD,cAAe8b,EAAK9b,GACtB8b,EAAK9b,GAAGioC,UAAY/jC,EAEpB4X,EAAK,GAAGsT,YAAclrB,EAG1B,OAAO4X,CACT,CACA,OAAOA,EAAK,GAAKA,EAAK,GAAGmsB,WAAansB,EAAK,GAAGsT,YAAc,EAC9D,EACAH,OAAQ,WACN,OAAOm1B,GAAc3gD,KAAM8V,WAAW,SAAUmR,IACxB,IAAlBjnB,KAAKgoB,UAAkBhoB,KAAKyqB,MAA+B,IAAvBzqB,KAAKyqB,KAAKzC,WAChDhoB,KAAK+E,YAAYkiB,EAErB,GACF,EACAsE,QAAS,WACP,OAAOo1B,GAAc3gD,KAAM8V,WAAW,SAAUmR,IACxB,IAAlBjnB,KAAKgoB,UAAkBhoB,KAAKyqB,MAA+B,IAAvBzqB,KAAKyqB,KAAKzC,WAChDhoB,KAAKsF,aAAa2hB,EAAMjnB,KAAKqqB,WAEjC,IAAG,EACL,EACAw4B,OAAQ,WACN,IAAIxqC,EAAOrY,KACX,OAAIqY,EAAK,IAAMA,EAAK,GAAGhT,WACds7C,GAActoC,EAAMvC,WAAW,SAAUmR,GAC9CjnB,KAAKqF,WAAWC,aAAa2hB,EAAMjnB,KACrC,IAEKqY,CACT,EACAyqC,MAAO,WACL,IAAIzqC,EAAOrY,KACX,OAAIqY,EAAK,IAAMA,EAAK,GAAGhT,WACds7C,GAActoC,EAAMvC,WAAW,SAAUmR,GAC9CjnB,KAAKqF,WAAWC,aAAa2hB,EAAMjnB,KAAK+pB,YAC1C,IAAG,GAEE1R,CACT,EACA0qC,SAAU,SAAUp8C,GAElB,OADAo6C,GAASp6C,GAAK6kB,OAAOxrB,MACdA,IACT,EACAgjD,UAAW,SAAUr8C,GAEnB,OADAo6C,GAASp6C,GAAK4kB,QAAQvrB,MACfA,IACT,EACAijD,YAAa,SAAUC,GACrB,OAAOljD,KAAK6iD,OAAOK,GAAS74C,QAC9B,EACA84C,KAAM,SAAUD,GACd,OAAOhC,GAAOlhD,KAAMkjD,EACtB,EACAE,QAAS,SAAUF,GACjB,OAAOhC,GAAOlhD,KAAMkjD,GAAS,EAC/B,EACAG,UAAW,SAAUH,GAInB,OAHAljD,KAAK6X,MAAK,WACRkpC,GAAS/gD,MAAMsjD,WAAWF,QAAQF,EACpC,IACOljD,IACT,EACA8rB,OAAQ,WACN,OAAO9rB,KAAKymB,SAAS5O,MAAK,WACxBkpC,GAAS/gD,MAAMijD,YAAYjjD,KAAKwnB,WAClC,GACF,EACA+7B,MAAO,WACL,IAAIlsB,EAAS,GAIb,OAHAr3B,KAAK6X,MAAK,WACRwf,EAAO5yB,KAAKzE,KAAK8O,WAAU,GAC7B,IACOiyC,GAAS1pB,EAClB,EACAmsB,SAAU,SAAUp9C,GAClB,OAAOpG,KAAKyjD,YAAYr9C,GAAW,EACrC,EACAs9C,YAAa,SAAUt9C,GACrB,OAAOpG,KAAKyjD,YAAYr9C,GAAW,EACrC,EACAq9C,YAAa,SAAUr9C,EAAW40B,GAChC,IAAI3iB,EAAOrY,KACX,MAAyB,iBAAdoG,KAGqB,IAA5BA,EAAU7C,QAAQ,KACpB4+C,GAAO/7C,EAAUkf,MAAM,MAAM,WAC3BjN,EAAKorC,YAAYzjD,KAAMg7B,EACzB,IAEA3iB,EAAKR,MAAK,SAAU5U,EAAOgkB,GACzB,IAAI08B,EAAa1C,GAASh6B,EAAM7gB,GAChC,GAAIu9C,IAAe3oB,EAAO,CACxB,IAAI4oB,EAAoB38B,EAAK7gB,UACzBu9C,EACF18B,EAAK7gB,UAAY87C,IAAQ,IAAM0B,EAAoB,KAAK35C,QAAQ,IAAM7D,EAAY,IAAK,MAEvF6gB,EAAK7gB,WAAaw9C,EAAoB,IAAMx9C,EAAYA,CAE5D,CACF,KAjBOiS,CAoBX,EACA4oC,SAAU,SAAU76C,GAClB,OAAO66C,GAASjhD,KAAK,GAAIoG,EAC3B,EACAyR,KAAM,SAAUpY,GACd,OAAO0iD,GAAOniD,KAAMP,EACtB,EACAokD,GAAI,SAAUnnD,EAAM+C,GAClB,OAAOO,KAAK6X,MAAK,WACfsoC,GAAQroC,KAAK9X,KAAMtD,EAAM+C,EAC3B,GACF,EACAqkD,IAAK,SAAUpnD,EAAM+C,GACnB,OAAOO,KAAK6X,MAAK,WACfsoC,GAAQxM,OAAO3zC,KAAMtD,EAAM+C,EAC7B,GACF,EACAskD,QAAS,SAAUrnD,GACjB,OAAOsD,KAAK6X,MAAK,WACK,iBAATnb,EACTyjD,GAAQrM,KAAK9zC,KAAMtD,EAAKyJ,KAAMzJ,GAE9ByjD,GAAQrM,KAAK9zC,KAAMtD,EAEvB,GACF,EACAsnD,KAAM,WACJ,OAAOhkD,KAAK8wB,IAAI,UAAW,GAC7B,EACAmzB,KAAM,WACJ,OAAOjkD,KAAK8wB,IAAI,UAAW,OAC7B,EACA1c,MAAO,WACL,OAAO2sC,GAAS3sC,GAAM2B,MAAM/V,KAAM8V,WACpC,EACArC,GAAI,SAAUxQ,GACZ,OAAkB,IAAXA,EAAejD,KAAKoU,MAAMnR,GAASjD,KAAKoU,MAAMnR,GAAQA,EAAQ,EACvE,EACA+1C,MAAO,WACL,OAAOh5C,KAAKyT,GAAG,EACjB,EACAupC,KAAM,WACJ,OAAOh9C,KAAKyT,IAAI,EAClB,EACA0nC,KAAM,SAAUpzB,GACd,IAAIxrB,EAAGsf,EACH4W,EAAM,GACV,IAAKl2B,EAAI,EAAGsf,EAAI7b,KAAKxD,OAAQD,EAAIsf,EAAGtf,IAClCwkD,GAAS5F,KAAKpzB,EAAU/nB,KAAKzD,GAAIk2B,GAEnC,OAAOsuB,GAAStuB,EAClB,EACAnvB,OAAQ,SAAUykB,GAChB,OACSg5B,GADe,mBAAbh5B,EACOq6B,GAAOpiD,KAAKiY,WAAW,SAAUgE,EAAM1f,GACrD,OAAOwrB,EAASxrB,EAAG0f,EACrB,IAEc8kC,GAASz9C,OAAOykB,EAAU/nB,KAAKiY,WACjD,EACAisC,QAAS,SAAUn8B,GACjB,IAAIsP,EAAS,GAgBb,OAfItP,aAAoBg5B,KACtBh5B,EAAWA,EAAS,IAEtB/nB,KAAK6X,MAAK,SAAUtb,EAAG0qB,GACrB,KAAOA,GAAM,CACX,GAAwB,iBAAbc,GAAyBg5B,GAAS95B,GAAM/B,GAAG6C,GAAW,CAC/DsP,EAAO5yB,KAAKwiB,GACZ,KACF,CAAO,GAAIA,IAASc,EAAU,CAC5BsP,EAAO5yB,KAAKwiB,GACZ,KACF,CACAA,EAAOA,EAAK5hB,UACd,CACF,IACO07C,GAAS1pB,EAClB,EACAmI,OAAQ,SAAUA,GAChB,IAAIpO,EAAKpG,EAAKm5B,EACIt5C,EAAdoI,EAAI,EAAGU,EAAI,EACf,OAAK6rB,EAgBEx/B,KAAK8wB,IAAI0O,KAfdpO,EAAMpxB,KAAK,MAGTmkD,GADAn5B,EAAMoG,EAAI3H,eACGxe,gBACTmmB,EAAItmB,wBAENmI,GADApI,EAAMumB,EAAItmB,yBACFe,MAAQs4C,EAAOr4C,YAAckf,EAAI7pB,KAAK2K,YAAcq4C,EAAOjS,WACnEv+B,EAAI9I,EAAIO,KAAO+4C,EAAOj5C,WAAa8f,EAAI7pB,KAAK+J,WAAai5C,EAAO9R,YAG7D,CACLxmC,KAAMoH,EACN7H,IAAKuI,GAIX,EACAlP,KAAMA,GACN7B,KAAMuQ,MAAMrB,UAAUlP,KACtB8mC,OAAQv2B,MAAMrB,UAAU43B,QAE1BzkB,GAAMS,OAAOq8B,GAAqB,CAChCr8B,OAAQT,GAAMS,OACds7B,UAAW,SAAUoD,GACnB,OAplBqB5kD,EAolBR4kD,IAnlBD5kD,IAAQA,EAAI1B,QAmlBAsmD,EAAOp8B,SACtB,CAACo8B,GAEHn/B,GAAMhN,QAAQmsC,GAvlBV,IAAU5kD,CAwlBvB,EACAgmB,QAnhBc,SAAUvJ,EAAMF,GAC9B,IAAIxf,EACJ,GAAIwf,EAAMxY,QACR,OAAOwY,EAAMxY,QAAQ0Y,GAGvB,IADA1f,EAAIwf,EAAMvf,OACHD,KACL,GAAIwf,EAAMxf,KAAO0f,EACf,OAAO1f,EAGX,OAAQ,CACV,EAwgBEkf,QAASwJ,GAAMxJ,QACf5D,KAAMsqC,GACNjxC,KAAMgxC,GACN38B,KAAM68B,GACNjH,KAAMrE,GACNgF,KAAMhF,GAAO0F,UACb6F,OAAQvL,GAAOqF,WACfz0B,KAAMovB,GAAOlf,QACb3vB,SAAU6uC,GAAO7uC,SACjB3E,OAAQ,SAAUw4C,EAAM1B,EAAO1jC,GAC7B,IAAIna,EAAI69C,EAAM59C,OAId,IAHIka,IACFolC,EAAO,QAAUA,EAAO,KAEnBv/C,KACqB,IAAtB69C,EAAM79C,GAAGyrB,UACXoyB,EAAM1Q,OAAOntC,EAAG,GAQpB,OALqB,IAAjB69C,EAAM59C,OACAukD,GAAS5F,KAAKY,gBAAgB3B,EAAM,GAAI0B,GAAQ,CAAC1B,EAAM,IAAM,GAE7D2G,GAAS5F,KAAKr5B,QAAQg6B,EAAM1B,EAGxC,IAEF,IAAIvB,GAAM,SAAUj0C,EAAI29C,EAAM3oC,GAC5B,IAAI4jC,EAAU,GACV31B,EAAMjjB,EAAG29C,GAIb,IAHqB,iBAAV3oC,GAAsBA,aAAiBmnC,KAChDnnC,EAAQA,EAAM,IAETiO,GAAwB,IAAjBA,EAAIG,UAAgB,CAChC,QAAc3rB,IAAVud,EAAqB,CACvB,GAAIiO,IAAQjO,EACV,MAEF,GAAqB,iBAAVA,GAAsBmnC,GAASl5B,GAAK3C,GAAGtL,GAChD,KAEJ,CACqB,IAAjBiO,EAAIG,UACNw1B,EAAQ/4C,KAAKojB,GAEfA,EAAMA,EAAI06B,EACZ,CACA,OAAO/E,CACT,EACI6G,GAAY,SAAUp9B,EAAM4W,EAAa7V,EAAUpO,GACrD,IAAIyd,EAAS,GAIb,IAHIzd,aAAiBmnC,KACnBnnC,EAAQA,EAAM,IAETqN,EAAMA,EAAOA,EAAK4W,GACvB,IAAI7V,GAAYf,EAAKe,WAAaA,EAAlC,CAGA,QAAc3rB,IAAVud,EAAqB,CACvB,GAAIqN,IAASrN,EACX,MAEF,GAAqB,iBAAVA,GAAsBmnC,GAAS95B,GAAM/B,GAAGtL,GACjD,KAEJ,CACAyd,EAAO5yB,KAAKwiB,EATZ,CAWF,OAAOoQ,CACT,EACIitB,GAAe,SAAUr9B,EAAM4W,EAAa7V,GAC9C,IAAKf,EAAOA,EAAK4W,GAAc5W,EAAMA,EAAOA,EAAK4W,GAC/C,GAAI5W,EAAKe,WAAaA,EACpB,OAAOf,EAGX,OAAO,IACT,EACAk7B,GAAO,CACL17B,OAAQ,SAAUQ,GAChB,IAAIR,EAASQ,EAAK5hB,WAClB,OAAOohB,GAA8B,KAApBA,EAAOuB,SAAkBvB,EAAS,IACrD,EACAylB,QAAS,SAAUjlB,GACjB,OAAO4xB,GAAI5xB,EAAM,aACnB,EACAla,KAAM,SAAUka,GACd,OAAOq9B,GAAar9B,EAAM,cAAe,EAC3C,EACAsW,KAAM,SAAUtW,GACd,OAAOq9B,GAAar9B,EAAM,kBAAmB,EAC/C,EACAiD,SAAU,SAAUjD,GAClB,OAAOo9B,GAAUp9B,EAAKoD,WAAY,cAAe,EACnD,EACAi5B,SAAU,SAAUr8B,GAClB,OAAOhC,GAAMhN,SAA2B,WAAlBgP,EAAKiC,SAAwBjC,EAAKs9B,iBAAmBt9B,EAAKu9B,cAAcvmD,SAAWgpB,GAAMO,WACjH,IACC,SAAU9qB,EAAM6Z,GACjBwrC,GAAoBxrC,GAAG7Z,GAAQ,SAAUqrB,GACvC,IACIsP,EAAS,GADFr3B,KAEN6X,MAAK,WACR,IAAIqZ,EAAQ3a,EAAGlC,KAAKgjB,EAAQr3B,KAAM+nB,EAAUsP,GACxCnG,IACE6vB,GAAStlC,QAAQyV,GACnBmG,EAAO5yB,KAAKsR,MAAMshB,EAAQnG,GAE1BmG,EAAO5yB,KAAKysB,GAGlB,IACIlxB,KAAKxD,OAAS,IACX4jD,GAAY1jD,KACf26B,EAAS0pB,GAASsB,OAAOhrB,IAEK,IAA5B36B,EAAK6G,QAAQ,aACf8zB,EAASA,EAAOrd,YAGpB,IAAIyqC,EAAgB1D,GAAS1pB,GAC7B,OAAItP,EACK08B,EAAcnhD,OAAOykB,GAEvB08B,CACT,CACF,IACAtC,GAAO,CACLuC,aAAc,SAAUz9B,EAAMrN,GAC5B,OAAOi/B,GAAI5xB,EAAM,aAAcrN,EACjC,EACA+qC,UAAW,SAAU19B,EAAMrN,GACzB,OAAOyqC,GAAUp9B,EAAM,cAAe,EAAGrN,GAAOxF,MAAM,EACxD,EACAwwC,UAAW,SAAU39B,EAAMrN,GACzB,OAAOyqC,GAAUp9B,EAAM,kBAAmB,EAAGrN,GAAOxF,MAAM,EAC5D,IACC,SAAU1X,EAAM6Z,GACjBwrC,GAAoBxrC,GAAG7Z,GAAQ,SAAUqrB,EAAUzkB,GACjD,IACI+zB,EAAS,GADFr3B,KAEN6X,MAAK,WACR,IAAIqZ,EAAQ3a,EAAGlC,KAAKgjB,EAAQr3B,KAAM+nB,EAAUsP,GACxCnG,IACE6vB,GAAStlC,QAAQyV,GACnBmG,EAAO5yB,KAAKsR,MAAMshB,EAAQnG,GAE1BmG,EAAO5yB,KAAKysB,GAGlB,IACIlxB,KAAKxD,OAAS,IAChB66B,EAAS0pB,GAASsB,OAAOhrB,GACO,IAA5B36B,EAAK6G,QAAQ,YAA6B,cAAT7G,IACnC26B,EAASA,EAAOrd,YAGpB,IAAIyqC,EAAgB1D,GAAS1pB,GAC7B,OAAI/zB,EACKmhD,EAAcnhD,OAAOA,GAEvBmhD,CACT,CACF,IACA1C,GAAoBxrC,GAAG2O,GAAK,SAAU6C,GACpC,QAASA,GAAY/nB,KAAKsD,OAAOykB,GAAUvrB,OAAS,CACtD,EACAulD,GAAoBxrC,GAAGyrC,KAAKlwC,UAAYiwC,GAAoBxrC,GAC5DwrC,GAAoB8C,iBAAmB,SAAUplD,GAC/C,IAAItB,EACA2mD,EAAM,SAAU/8B,EAAUgvB,GAQ5B,OAPA54C,EAAWA,GAAYsB,IACE,IAArBqW,UAAUtZ,SACZurB,EAAW5pB,EAAS0R,SAEjBknC,IACHA,EAAU54C,EAAS44C,SAEd,IAAI+N,EAAIvuC,GAAGyrC,KAAKj6B,EAAUgvB,EACnC,EAEA,OADAgK,GAASr7B,OAAOo/B,EAAK9kD,MACd8kD,CACT,EACA/C,GAAoBF,UAAYA,GAChCE,GAAoBD,SAAWA,GAC/B,IAAIf,GAAWgB,GAEXgD,GAAS9/B,GAAMpN,KACfmtC,GAAS//B,GAAMM,KACfjF,GAAOuD,GAAIC,GACXmhC,GAAmB,mBA2CnBC,GAA0B,SAAUvf,EAAQwf,GAC9C,IAAIC,EAAWD,EAAKvhB,KAAK,SACrBnjC,EAAQklC,EAAO4J,UAAU5J,EAAOoI,MAAMqX,GAAWD,EAAK,GAAGj8B,UACxDzoB,IACHA,EAAQ,MAEV0kD,EAAKvhB,KAAK,iBAAkBnjC,EAC9B,EACI4kD,GAAgB,SAAUp+B,EAAMq+B,GAClC,IAAaC,EAAcv9B,EAAvBu1B,EAAM,EACV,GAAIt2B,EACF,IAAKs+B,EAAet+B,EAAKe,SAAUf,EAAOA,EAAK6C,gBAAiB7C,EAAMA,EAAOA,EAAK6C,gBAChF9B,EAAWf,EAAKe,WACZs9B,GAA2B,IAAbt9B,GACZA,IAAau9B,GAAiBt+B,EAAKs1B,UAAU//C,UAInD+gD,IACAgI,EAAev9B,GAGnB,OAAOu1B,CACT,EACIiI,GAAW,SAAUx6B,EAAKsP,QACX,IAAbA,IACFA,EAAW,CAAC,GAEd,IAAImrB,EAAc,CAAC,EACf74B,EAAM9uB,OACN4nD,EAAQ,CAAC,EACTC,EAAU,EAGVC,EAAmB3lD,GAAS68B,WAAW3V,GAAqB6D,GAAM,CACpEgR,eAAgB1B,EAAS0B,eACzBC,eAAgB3B,EAAS2B,iBAEvB4pB,EAAc,GACdtgB,EAASjL,EAASiL,OAASjL,EAASiL,OAASK,GAAO,CAAC,GACrDD,EAAS4H,GAAO,CAClBW,cAAe5T,EAAS4T,cACxBE,oBAAqB9T,EAAS8T,qBAC7B9T,EAASiL,QACRqN,EAAStY,EAASwrB,UAAY,IAAInT,GAAeA,GAAWpC,MAC5DrI,EAAmB3C,EAAOkH,mBAC1BsZ,EAAIhF,GAAS8D,kBAAiB,WAChC,MAAO,CACL9N,QAAS/rB,EACTnb,QAASwI,EAAK2tC,UAElB,IAYI7xB,EAAM,SAAU/C,GAClB,OAAOA,GAAOpG,GAAOjW,EAAWqc,GAAOpG,EAAIwsB,eAAepmB,GAAOA,CACnE,EACI60B,EAAK,SAAU70B,GACjB,OAAO20B,EAAiB,iBAAR30B,EAAmB+C,EAAI/C,GAAOA,EAChD,EACI80B,EAAY,SAAU90B,EAAK10B,EAAMypD,GACnC,IAAI7D,EAAM7hD,EACN0kD,EAAOc,EAAG70B,GAYd,OAXI+zB,EAAK3oD,SAGLiE,GAFF6hD,EAAOT,EAAUnlD,KACL4lD,EAAKnuB,IACPmuB,EAAKnuB,IAAIgxB,EAAMzoD,GAEfyoD,EAAKvhB,KAAKlnC,SAGD,IAAV+D,IACTA,EAAQ0lD,GAAc,IAEjB1lD,CACT,EACI2lD,EAAa,SAAUh1B,GACzB,IAAInK,EAAOkN,EAAI/C,GACf,OAAKnK,EAGEA,EAAKwf,WAFH,EAGX,EACI4f,EAAY,SAAUj1B,EAAK10B,EAAM+D,GACrB,KAAVA,IACFA,EAAQ,MAEV,IAAI0kD,EAAOc,EAAG70B,GACVk1B,EAAgBnB,EAAKvhB,KAAKlnC,GAC9B,GAAKyoD,EAAK3oD,OAAV,CAGA,IAAI8lD,EAAOT,EAAUnlD,GACjB4lD,GAAQA,EAAKplB,IACfolB,EAAKplB,IAAIioB,EAAM1kD,EAAO/D,GAEtByoD,EAAKvhB,KAAKlnC,EAAM+D,GAEd6lD,IAAkB7lD,GAAS65B,EAASisB,aACtCjsB,EAASisB,YAAY,CACnBC,QAASrB,EACTv2B,SAAUlyB,EACV+pD,UAAWhmD,GAXf,CAcF,EAYIulD,EAAU,WACZ,OAAO1rB,EAASosB,cAAgB17B,EAAI7pB,IACtC,EAUIwlD,EAAW,SAAUv1B,EAAKw1B,GAC5B,OAtsJS,SAAUzlD,EAAMiwB,EAAKw1B,GAChC,IAAI3zC,EAAI,EAAGU,EAAI,EACXqX,EAAM7pB,EAAKsoB,cAEf,GADAm9B,EAAUA,GAAoBzlD,EAC1BiwB,EAAK,CACP,GAAIw1B,IAAYzlD,GAAQiwB,EAAItmB,uBAA2E,WAAlD0lB,GAAMrJ,GAAqBhmB,GAAO,YAA0B,CAC/G,IAAI0J,EAAMumB,EAAItmB,wBAGd,MAAO,CACLmI,EAHFA,EAAIpI,EAAIgB,MAAQmf,EAAI/f,gBAAgBa,YAAc3K,EAAK2K,YAAckf,EAAI/f,gBAAgBinC,WAIvFv+B,EAHFA,EAAI9I,EAAIO,KAAO4f,EAAI/f,gBAAgBC,WAAa/J,EAAK+J,WAAa8f,EAAI/f,gBAAgBonC,UAKxF,CAEA,IADA,IAAIwU,EAAez1B,EACZy1B,GAAgBA,IAAiBD,GAAWC,EAAa7+B,WAAamJ,GAAS01B,EAAcD,IAAU,CAC5G,IAAIE,EAAmBD,EACvB5zC,GAAK6zC,EAAiBx6B,YAAc,EACpC3Y,GAAKmzC,EAAiBv6B,WAAa,EACnCs6B,EAAeC,EAAiBD,YAClC,CAEA,IADAA,EAAez1B,EAAI/rB,WACZwhD,GAAgBA,IAAiBD,GAAWC,EAAa7+B,WAAamJ,GAAS01B,EAAcD,IAClG3zC,GAAK4zC,EAAa/6C,YAAc,EAChC6H,GAAKkzC,EAAa37C,WAAa,EAC/B27C,EAAeA,EAAaxhD,WAE9BsO,GA9CwB,SAAUyd,GACpC,OAAIJ,GAAUxQ,aAA6B,UAAd9jB,GAAK00B,GACzBH,GAAa/G,GAASkH,IAAM9tB,QAAO,SAAU8tB,GAClD,MAAqB,YAAd10B,GAAK00B,EACd,IAAGtZ,MAAK,SAAUivB,GAChB,OAAO9V,GAAahH,GAAa8c,IAAU5jC,KAAI,SAAUhC,GACvD,IAAI4lD,EAAU5lD,EAAK+lB,IAAIqF,UACnBy6B,EAAajgB,EAAQ7f,IAAIqF,UACzB06B,EAAgBlgB,EAAQ7f,IAAI5b,aAChC,OAAOy7C,GAAWC,GAAcC,EAAgB,CAClD,GACF,IAAG5vC,MAAM,GAEF,CAEX,CA+BS6vC,CAAsB//B,GAAqBiK,GAClD,CACA,MAAO,CACLne,EAAGA,EACHU,EAAGA,EAEP,CAqqJWwzC,CAAOn8B,EAAI7pB,KAAMgzB,EAAI/C,GAAMw1B,EACpC,EAaIQ,EAAW,SAAUh2B,EAAK10B,EAAM+xB,GAClC,IAAI02B,EAAOc,EAAG70B,GACd,OAAI3C,EACK02B,EAAKr0B,IAAIp0B,IAKL,WAHbA,EAAOA,EAAKuN,QAAQ,UAAU,SAAUvG,EAAGC,GACzC,OAAOA,EAAE0hC,aACX,OAEE3oC,EAAOmnB,GAAI5B,QAAQ3B,OAAS,aAAe,YAEtC6kC,EAAK,IAAMA,EAAK,GAAGv5C,MAAQu5C,EAAK,GAAGv5C,MAAMlP,QAAQL,EAC1D,EACIgrD,EAAU,SAAUj2B,GACtB,IAAIk2B,EAAGC,EAUP,OATAn2B,EAAM+C,EAAI/C,GACVk2B,EAAIF,EAASh2B,EAAK,SAClBm2B,EAAIH,EAASh2B,EAAK,WACO,IAArBk2B,EAAE/jD,QAAQ,QACZ+jD,EAAI,IAEmB,IAArBC,EAAEhkD,QAAQ,QACZgkD,EAAI,GAEC,CACLD,EAAGr2C,SAASq2C,EAAG,KAAOl2B,EAAI5iB,aAAe4iB,EAAI1D,YAC7C65B,EAAGt2C,SAASs2C,EAAG,KAAOn2B,EAAI9lB,cAAgB8lB,EAAIzD,aAElD,EAYIzI,EAAK,SAAUkM,EAAKrJ,GACtB,IAAIxrB,EACJ,IAAK60B,EACH,OAAO,EAET,IAAKje,MAAMsI,QAAQ2V,GAAM,CACvB,GAAiB,MAAbrJ,EACF,OAAwB,IAAjBqJ,EAAIpJ,SAEb,GAAIi9B,GAAiBjkD,KAAK+mB,GAAW,CACnC,IAAIy0B,EAAYz0B,EAAS1kB,cAAciiB,MAAM,KACzCqlB,EAAUvZ,EAAIlI,SAAS7lB,cAC3B,IAAK9G,EAAIigD,EAAUhgD,OAAS,EAAGD,GAAK,EAAGA,IACrC,GAAIigD,EAAUjgD,KAAOouC,EACnB,OAAO,EAGX,OAAO,CACT,CACA,GAAIvZ,EAAIpJ,UAA6B,IAAjBoJ,EAAIpJ,SACtB,OAAO,CAEX,CACA,IAAIw/B,EAAQr0C,MAAMsI,QAAQ2V,GAAeA,EAAR,CAACA,GAClC,OAAO0lB,GAAO/uB,EAAUy/B,EAAK,GAAG/9B,eAAiB+9B,EAAK,GAAI,KAAMA,GAAMhrD,OAAS,CACjF,EACIirD,EAAa,SAAUr2B,EAAKrJ,EAAUhC,EAAM2hC,GAC9C,IACIC,EADAtwB,EAAS,GAETpQ,EAAOkN,EAAI/C,GAef,IAdAs2B,OAAsBrrD,IAAZqrD,EACV3hC,EAAOA,IAAgC,SAAvBigC,IAAU98B,SAAsB88B,IAAU3gD,WAAa,MACnE4f,GAAMC,GAAG6C,EAAU,YACrB4/B,EAAc5/B,EAEZA,EADe,MAAbA,EACS,SAAUd,GACnB,OAAyB,IAAlBA,EAAKe,QACd,EAEW,SAAUf,GACnB,OAAO/B,EAAG+B,EAAM0gC,EAClB,GAGG1gC,KACDA,IAASlB,GAAQ1Q,EAAW4R,EAAKe,WAAamH,GAAalI,IAASmI,GAAmBnI,KADhF,CAIX,IAAKc,GAAgC,mBAAbA,GAA2BA,EAASd,GAAO,CACjE,IAAIygC,EAGF,MAAO,CAACzgC,GAFRoQ,EAAO5yB,KAAKwiB,EAIhB,CACAA,EAAOA,EAAK5hB,UACd,CACA,OAAOqiD,EAAUrwB,EAAS,IAC5B,EAKIuwB,EAAW,SAAU3gC,EAAMc,EAAUrrB,GACvC,IAAI+8B,EAAO1R,EACX,GAAId,EAMF,IALwB,iBAAbc,IACT0R,EAAO,SAAUxS,GACf,OAAO/B,EAAG+B,EAAMc,EAClB,GAEGd,EAAOA,EAAKvqB,GAAOuqB,EAAMA,EAAOA,EAAKvqB,GACxC,GAAoB,mBAAT+8B,GAAuBA,EAAKxS,GACrC,OAAOA,EAIb,OAAO,IACT,EAUIyN,EAAM,SAAUtD,EAAKqI,EAAMpS,GAC7B,IAAIgQ,EACApQ,EAAsB,iBAARmK,EAAmB+C,EAAI/C,GAAOA,EAChD,IAAKnK,EACH,OAAO,EAET,GAAIhC,GAAMxJ,QAAQwL,KAAUA,EAAKzqB,QAA0B,IAAhByqB,EAAKzqB,QAO9C,OANA66B,EAAS,GACT0tB,GAAO99B,GAAM,SAAUmK,EAAK70B,GACtB60B,GACFiG,EAAO5yB,KAAKg1B,EAAKplB,KAAKgT,EAAsB,iBAAR+J,EAAmB+C,EAAI/C,GAAOA,EAAK70B,GAE3E,IACO86B,EAET,IAAI0f,EAAU1vB,GAAgBrnB,KAC9B,OAAOy5B,EAAKplB,KAAK0iC,EAAS9vB,EAC5B,EACI4gC,EAAa,SAAUz2B,EAAK1sB,GAC9BuhD,EAAG70B,GAAKvZ,MAAK,SAAUtb,EAAG0qB,GACxB89B,GAAOrgD,GAAO,SAAUjE,EAAO/D,GAC7B2pD,EAAUp/B,EAAMvqB,EAAM+D,EACxB,GACF,GACF,EACIqnD,EAAU,SAAU12B,EAAKhK,GAC3B,IAAI+9B,EAAOc,EAAG70B,GACV9Q,GACF6kC,EAAKttC,MAAK,SAAUtb,EAAGS,GACrB,IAA2B,IAAvBA,EAAO+qD,YAAX,CAGA,KAAO/qD,EAAOqtB,YACZrtB,EAAOmS,YAAYnS,EAAOqtB,YAE5B,IACErtB,EAAOsR,UAAY,OAAS8Y,EAC5BpqB,EAAOmS,YAAYnS,EAAOqtB,WAC5B,CAAE,MAAO4I,GACP8tB,GAAS,eAAe35B,KAAK,OAASA,GAAMk8B,WAAWlvC,MAAM,GAAG2uC,SAAS/lD,EAC3E,CACA,OAAOoqB,CAVP,CAWF,IAEA+9B,EAAK/9B,KAAKA,EAEd,EACI/lB,EAAM,SAAU2mD,EAAWtrD,EAAMgI,EAAO0iB,EAAMtB,GAChD,OAAO4O,EAAIszB,GAAW,SAAUA,GAC9B,IAAIC,EAAyB,iBAATvrD,EAAoBsuB,EAAInmB,cAAcnI,GAAQA,EASlE,OARAmrD,EAAWI,EAAQvjD,GACf0iB,IACkB,iBAATA,GAAqBA,EAAKY,SACnCigC,EAAOljD,YAAYqiB,GACM,iBAATA,GAChB0gC,EAAQG,EAAQ7gC,IAGZtB,EAAyCmiC,EAAhCD,EAAUjjD,YAAYkjD,EACzC,GACF,EACIniC,EAAS,SAAUppB,EAAMgI,EAAO0iB,GAClC,OAAO/lB,EAAI2pB,EAAInmB,cAAcnI,GAAOA,EAAMgI,EAAO0iB,GAAM,EACzD,EAEIqnB,EAASxK,GAASC,aA4BlB75B,EAAS,SAAU4c,EAAMihC,GAC3B,IAAIC,EAAQlC,EAAGh/B,GAef,OAdIihC,EACFC,EAAMtwC,MAAK,WAET,IADA,IAAIwZ,EACGA,EAAQrxB,KAAKqqB,YACK,IAAnBgH,EAAMrJ,UAAwC,IAAtBqJ,EAAM4C,KAAKz3B,OACrCwD,KAAKmP,YAAYkiB,GAEjBrxB,KAAKqF,WAAWC,aAAa+rB,EAAOrxB,KAG1C,IAAGqK,SAEH89C,EAAM99C,SAED89C,EAAM3rD,OAAS,EAAI2rD,EAAMlwC,UAAYkwC,EAAM,EACpD,EAmDI1E,EAAc,SAAUryB,EAAKg3B,EAAKptB,GACpCirB,EAAG70B,GAAKqyB,YAAY2E,EAAKptB,GAAOnjB,MAAK,WACZ,KAAnB7X,KAAKoG,WACP26C,GAAS/gD,MAAM4jC,KAAK,QAAS,KAEjC,GACF,EAmDI35B,EAAU,SAAUg+C,EAAQI,EAAQH,GACtC,OAAOxzB,EAAI2zB,GAAQ,SAAUA,GAS3B,OARIpjC,GAAMC,GAAGmjC,EAAQ,WACnBJ,EAASA,EAAOn5C,WAAU,IAExBo5C,GACFnD,GAAOC,GAAOqD,EAAO7gC,aAAa,SAAUP,GAC1CghC,EAAOljD,YAAYkiB,EACrB,IAEKohC,EAAOhjD,WAAWijD,aAAaL,EAAQI,EAChD,GACF,EAgCIE,EAAoB,SAAUthC,GAChC,GAAIkH,GAAYlH,GAAO,CACrB,IAAIua,EAAgD,MAAhCva,EAAKiC,SAAS7lB,gBAA0B6iD,EAAUj/B,EAAM,SAAWi/B,EAAUj/B,EAAM,MACvG,GAAIi/B,EAAUj/B,EAAM,SAAWi/B,EAAUj/B,EAAM,sBAAwBua,EACrE,OAAO,CAEX,CACA,OAAO,CACT,EA8CIgnB,EAAY,WACd,OAAOx9B,EAAIy9B,aACb,EA0BI3wC,EAAO,SAAU9a,EAAQN,EAAM+8B,EAAMpS,GACvC,GAAIpC,GAAMxJ,QAAQze,GAAS,CAGzB,IAFA,IAAIT,EAAIS,EAAOR,OACXksD,EAAK,GACFnsD,KACLmsD,EAAGnsD,GAAKub,EAAK9a,EAAOT,GAAIG,EAAM+8B,EAAMpS,GAEtC,OAAOqhC,CACT,CAUA,OATIpuB,EAASotB,SAAY1qD,IAAWguB,GAAOhuB,IAAW4vB,GACpDi5B,EAAYphD,KAAK,CACfzH,EACAN,EACA+8B,EACApS,IAGSurB,EAAO96B,KAAK9a,EAAQN,EAAM+8B,EAAMpS,GAAShP,EAExD,EACIs7B,EAAS,SAAU32C,EAAQN,EAAM+8B,GACnC,GAAIxU,GAAMxJ,QAAQze,GAAS,CAGzB,IAFA,IAAIT,EAAIS,EAAOR,OACXksD,EAAK,GACFnsD,KACLmsD,EAAGnsD,GAAKo3C,EAAO32C,EAAOT,GAAIG,EAAM+8B,GAElC,OAAOivB,CACT,CACE,GAAI7C,EAAYrpD,OAAS,IAAMQ,IAAWguB,GAAOhuB,IAAW4vB,GAE1D,IADIrwB,EAAIspD,EAAYrpD,OACbD,KAAK,CACV,IAAI0f,EAAO4pC,EAAYtpD,GACnBS,IAAWif,EAAK,IAAQvf,GAAQA,IAASuf,EAAK,IAASwd,GAAQA,IAASxd,EAAK,IAC/E22B,EAAOe,OAAO13B,EAAK,GAAIA,EAAK,GAAIA,EAAK,GAEzC,CAEF,OAAO22B,EAAOe,OAAO32C,EAAQN,EAAM+8B,EAEvC,EAIIkvB,EAAqB,SAAU1hC,GACjC,GAAIA,GAAQkH,GAAYlH,GAAO,CAC7B,IAAI/C,EAAkB+C,EAAKppB,aAAa,4BACxC,OAAIqmB,GAAuC,YAApBA,EACdA,EAEuB,YAAzB+C,EAAK/C,gBAAgC+C,EAAK/C,gBAAkB,IACrE,CACE,OAAO,IAEX,EA4CI7L,EAAO,CACT2S,IAAKA,EACLsP,SAAUA,EACV1N,IAAKA,EACL84B,MAAOA,EACPkD,SAxrBY,EAyrBZC,UAxrBa,EAyrBbjD,iBAAkBA,EAClBC,YAAaA,EACblgB,OAAQA,EACRJ,OAAQA,EACRqN,OAAQA,EACRkW,QA3qBY,SAAU7hC,GACtB,GAAoB,iBAATA,EACT,QAASihB,EAAiBjhB,GACrB,GAAIA,EAAM,CACf,IAAI9gB,EAAO8gB,EAAKe,SAChB,GAAI7hB,EACF,QAAmB,IAATA,IAAc+hC,EAAiBjhB,EAAKiC,UAElD,CACA,OAAO,CACT,EAkqBE68B,EAAGA,EACHE,GAAIA,EACJlgC,KAAM,KACNw9B,MAhnBU,SAAUt8B,EAAM8hC,GAC1B,IAAKzoC,IAA0B,IAAlB2G,EAAKe,UAAkB+gC,EAClC,OAAO9hC,EAAKnY,UAAUi6C,GAEtB,IAAIC,EAAUh+B,EAAInmB,cAAcoiB,EAAKiC,UAIrC,OAHA67B,GAAOqB,EAAWn/B,IAAO,SAAU2c,GACjCyiB,EAAU2C,EAASplB,EAAK1a,SAAUg9B,EAAUj/B,EAAM2c,EAAK1a,UACzD,IACO8/B,CAEX,EAumBEhD,QAASA,EACTiD,YApmBgB,SAAUC,GAC1B,IAAIC,EAAK77B,GAAU47B,GACnB,MAAO,CACLj2C,EAAGk2C,EAAGl2C,EACNU,EAAGw1C,EAAGx1C,EACN2zC,EAAG6B,EAAGj6C,MACNq4C,EAAG4B,EAAGh8B,OAEV,EA6lBEi8B,QAhjBY,SAAUh4B,GACtBA,EAAM+C,EAAI/C,GACV,IAAIvmB,EAAM87C,EAASv1B,GACfi4B,EAAOhC,EAAQj2B,GACnB,MAAO,CACLne,EAAGpI,EAAIoI,EACPU,EAAG9I,EAAI8I,EACP2zC,EAAG+B,EAAK/B,EACRC,EAAG8B,EAAK9B,EAEZ,EAuiBEF,QAASA,EACTiC,UA5ec,SAAUriC,EAAMc,EAAUhC,GACxC,IAAImmB,EAAUub,EAAWxgC,EAAMc,EAAUhC,GAAM,GAC/C,OAAOmmB,GAAWA,EAAQ1vC,OAAS,EAAI0vC,EAAQ,GAAK,IACtD,EA0eEub,WAAYA,EACZtzB,IAAKA,EACLo1B,QA3dY,SAAUtiC,EAAMc,GAC5B,OAAO6/B,EAAS3gC,EAAMc,EAAU,cAClC,EA0dEyhC,QAzdY,SAAUviC,EAAMc,GAC5B,OAAO6/B,EAAS3gC,EAAMc,EAAU,kBAClC,EAwdEg4B,OAvdW,SAAUh4B,EAAUV,GAC/B,OAAOyvB,GAAO/uB,EAAUoM,EAAI9M,IAAUiT,EAASosB,cAAgB17B,EAAK,GACtE,EAsdE9F,GAAIA,EACJ7jB,IAAKA,EACLykB,OAAQA,EACR2jC,WAtZe,SAAU/sD,EAAMgI,EAAO0iB,GACtC,IAAkB5pB,EAAdksD,EAAU,GAEd,IAAKlsD,KADLksD,GAAW,IAAMhtD,EACLgI,EACN8W,GAAkB9W,EAAOlH,KAC3BksD,GAAW,IAAMlsD,EAAM,KAAOixC,EAAO/pC,EAAMlH,IAAQ,KAGvD,YAAoB,IAAT4pB,EACFsiC,EAAU,IAAMtiC,EAAO,KAAO1qB,EAAO,IAEvCgtD,EAAU,KACnB,EA2YEC,eA1YmB,SAAUviC,GAC7B,IAAIH,EACAtiB,EAAYqmB,EAAInmB,cAAc,OAC9B47C,EAAOz1B,EAAI01B,yBAKf,IAJAD,EAAK17C,YAAYJ,GACbyiB,IACFziB,EAAU2J,UAAY8Y,GAEjBH,EAAOtiB,EAAU0lB,YACtBo2B,EAAK17C,YAAYkiB,GAGnB,OADAw5B,EAAKtxC,YAAYxK,GACV87C,CACT,EA8XEp2C,OAAQA,EACRu/C,SAvmBa,SAAUx4B,EAAK10B,EAAM+D,GAClC,IAAI0kD,EAAOpwC,EAAWrY,GAAQupD,EAAG70B,GAAKN,IAAIp0B,EAAM+D,GAASwlD,EAAG70B,GAAKN,IAAIp0B,GACjE49B,EAASuvB,eACX3E,GAAwBvf,EAAQwf,EAEpC,EAmmBEiC,SAAUA,EACV0C,UAnmBc,SAAU14B,EAAK24B,GAC7B,IAAI5E,EAAOc,EAAG70B,GAAKN,IAAIi5B,GACnBzvB,EAASuvB,eACX3E,GAAwBvf,EAAQwf,EAEpC,EA+lBE6E,iBA/WqB,SAAUhiD,GAC/B,OAAO0sB,EAAI1sB,GAAG,SAAUA,GACtB,IAAIzL,EACAmI,EAAQsD,EAAEy+B,WACd,IAAKlqC,EAAImI,EAAMlI,OAAS,EAAGD,GAAK,EAAGA,IACjCyL,EAAEiiD,oBAAoBvlD,EAAMuX,KAAK1f,GAErC,GACF,EAwWE8pD,UAAWA,EACXwB,WAAYA,EACZ3B,UAAWA,EACXiB,OAAQR,EACRuD,WA3We,SAAUC,GACzB,OAAOxkB,EAAOoI,MAAMoc,EACtB,EA0WEC,eAzWmB,SAAUL,EAAWrtD,GACxC,OAAOipC,EAAO4J,UAAUwa,EAAWrtD,EACrC,EAwWE2tD,SAvWa,SAAUF,GACvB,IAAI5vC,EAAM+vC,EACV,GAAIjyC,IAASmtC,GAAS+E,KAAOv/B,IAAQ/sB,SAAU,CAC7C,GAAIwnD,EAAY0E,GACd,OAEF1E,EAAY0E,IAAW,CACzB,EACAG,EAAWt/B,EAAIwsB,eAAe,wBAE5B8S,EAAWt/B,EAAInmB,cAAc,UACpBjH,GAAK,mBACd0sD,EAASnkD,KAAO,YAChBoU,EAAOyQ,EAAIkV,qBAAqB,QAAQ,IAC/B7V,WACP9P,EAAKjV,aAAaglD,EAAU/vC,EAAK8P,YAEjC9P,EAAKxV,YAAYulD,IAGjBA,EAASE,WACXF,EAASE,WAAWL,SAAWA,EAE/BG,EAASvlD,YAAYimB,EAAIrD,eAAewiC,GAE5C,EA+UEM,QA9UY,SAAUnuB,GACjBA,IACHA,EAAO,IAETpjB,EAAOojB,EAAKhX,MAAM,MAAM,SAAUyB,GAChC2+B,EAAM3+B,IAAO,EACb6+B,EAAiBjrB,KAAK5T,EAAKtR,EAC7B,GACF,EAuUE+tC,SA/Ta,SAAUpyB,EAAKg3B,GAC5BnC,EAAG70B,GAAKoyB,SAAS4E,EACnB,EA8TE1E,YA7TgB,SAAUtyB,EAAKg3B,GAC/B3E,EAAYryB,EAAKg3B,GAAK,EACxB,EA4TEnH,SA3Ta,SAAU7vB,EAAKg3B,GAC5B,OAAOnC,EAAG70B,GAAK6vB,SAASmH,EAC1B,EA0TE3E,YAAaA,EACbO,KA1TS,SAAU5yB,GACnB60B,EAAG70B,GAAK4yB,MACV,EAyTEC,KAxTS,SAAU7yB,GACnB60B,EAAG70B,GAAK6yB,MACV,EAuTEyG,SAtTa,SAAUt5B,GACvB,MAAkC,SAA3B60B,EAAG70B,GAAKN,IAAI,UACrB,EAqTE65B,SApTa,SAAU/rC,GACvB,OAASA,GAAS,QAAmB+mC,GACvC,EAmTEmC,QAASA,EACT8C,aAnTiB,SAAUx5B,GAC3B,IAAInK,EAAsB,iBAARmK,EAAmB+C,EAAI/C,GAAOA,EAChD,OAAOjD,GAAYlH,GAAQA,EAAK4jC,UAAY9J,GAAS,eAAev1B,OAAOu1B,GAAS95B,GAAMs8B,SAASn8B,MACrG,EAiTE0jC,aAhTiB,SAAU15B,EAAKhK,GAChC6+B,EAAG70B,GAAKvZ,MAAK,WACX,IACE,GAAI,cAAe7X,KAEjB,YADAA,KAAK6qD,UAAYzjC,EAGrB,CAAE,MAAO6L,GACT,CACA5oB,EAAO02C,GAAS/gD,MAAMonB,KAAKA,IAAO,EACpC,GACF,EAsSEmd,OAlbWN,GAASM,OAmbpBkK,OAAQA,EACRsc,YAvSgB,SAAU9jC,EAAM+jC,GAChC,IAAIC,EAAgB92B,EAAI62B,GACxB,OAAOt2B,EAAIzN,GAAM,SAAUA,GACzB,IAAIR,EAASwkC,EAAc5lD,WACvB0kB,EAAckhC,EAAclhC,YAMhC,OALIA,EACFtD,EAAOnhB,aAAa2hB,EAAM8C,GAE1BtD,EAAO1hB,YAAYkiB,GAEdA,CACT,GACF,EA4REhd,QAASA,EACTihD,OA/QW,SAAU95B,EAAK10B,GAC1B,IAAIurD,EAQJ,OAPI72B,EAAIlI,WAAaxsB,EAAK2oC,gBACxB4iB,EAASniC,EAAOppB,GAChBqoD,GAAOqB,EAAWh1B,IAAM,SAAU+5B,GAChC9E,EAAU4B,EAAQkD,EAASjiC,SAAUg9B,EAAU90B,EAAK+5B,EAASjiC,UAC/D,IACAjf,EAAQg+C,EAAQ72B,GAAK,IAEhB62B,GAAU72B,CACnB,EAsQEg6B,mBArQuB,SAAU1nD,EAAGC,GAEpC,IADA,IAAY0nD,EAARC,EAAK5nD,EACF4nD,GAAI,CAET,IADAD,EAAK1nD,EACE0nD,GAAMC,IAAOD,GAClBA,EAAKA,EAAGhmD,WAEV,GAAIimD,IAAOD,EACT,MAEFC,EAAKA,EAAGjmD,UACV,CACA,OAAKimD,GAAM5nD,EAAE+lB,cACJ/lB,EAAE+lB,cAAcxe,gBAElBqgD,CACT,EAsPEje,MArPU,SAAUke,GACpB,OAAO5lB,EAAO0H,MAAMpoB,GAAM/T,KAAKq6C,GACjC,EAoPE72B,IAAKA,EACL0xB,WAAYA,EACZoF,QA5OY,SAAUvkC,EAAMwE,GAC5B,IAAItlB,EAAMzJ,EAAMqlC,EAAU,EAC1B,GAAIwmB,EAAkBthC,GACpB,OAAO,EAGT,GADAA,EAAOA,EAAKoD,WACF,CACR,IAAI2X,EAAS,IAAI5E,GAAcnW,EAAMA,EAAK5hB,YACtC2vC,EAAazP,EAASA,EAAOwH,wBAA0B,CAAC,EAC5DthB,EAAWA,IAAa8Z,EAASA,EAAOsH,sBAAwB,MAChE,EAAG,CAED,GADA1mC,EAAO8gB,EAAKe,SACRmG,GAAYlH,GAAO,CACrB,IAAIwkC,EAAWxkC,EAAKppB,aAAa,kBACjC,GAAI4tD,EAAU,CACZxkC,EAAO+a,EAAOj1B,KAAkB,QAAb0+C,GACnB,QACF,CAEA,GADA/uD,EAAOuqB,EAAKiC,SAAS7lB,cACjBooB,GAAYA,EAAS/uB,GAAO,CAC9B,GAAa,OAATA,EAAe,CACjBqlC,IACA9a,EAAO+a,EAAOj1B,OACd,QACF,CACA,OAAO,CACT,CACA,GAAIw7C,EAAkBthC,GACpB,OAAO,CAEX,CACA,GAAa,IAAT9gB,EACF,OAAO,EAET,GAAa,IAATA,IAAeg7B,GAAiBla,EAAKs1B,WACvC,OAAO,EAET,GAAa,IAATp2C,GAAc8gB,EAAK5hB,YAAc2vC,EAAW/tB,EAAK5hB,WAAW6jB,WAAaiY,GAAiBla,EAAKs1B,WACjG,OAAO,EAETt1B,EAAO+a,EAAOj1B,MAChB,OAASka,EACX,CACA,OAAO8a,GAAW,CACpB,EAiMEymB,UAAWA,EACXpL,UAAWiI,GACX//B,MA/LU,SAAU0iC,EAAW0D,EAAUC,GACzC,IACIC,EACAC,EACAxmD,EAHAgf,EAAQmkC,IAIZ,GAAIR,GAAa0D,EAiBf,OAhBArnC,EAAMynC,SAAS9D,EAAU3iD,WAAYggD,GAAc2C,IACnD3jC,EAAM0nC,OAAOL,EAASrmD,WAAYggD,GAAcqG,IAChDE,EAAiBvnC,EAAM2nC,mBACvB3nC,EAAQmkC,KACFsD,SAASJ,EAASrmD,WAAYggD,GAAcqG,GAAY,GAC9DrnC,EAAM0nC,OAAO/D,EAAU3iD,WAAYggD,GAAc2C,GAAa,GAC9D6D,EAAgBxnC,EAAM2nC,mBACtB3mD,EAAa2iD,EAAU3iD,YACZC,aAAa+8B,GAAShqB,EAAMuzC,GAAiB5D,GACpD2D,EACFtmD,EAAWC,aAAaqmD,EAAgB3D,GAExC3iD,EAAWC,aAAaomD,EAAU1D,GAEpC3iD,EAAWC,aAAa+8B,GAAShqB,EAAMwzC,GAAgB7D,GACvD39C,EAAO29C,GACA2D,GAAkBD,CAE7B,EAwKE5zC,KAAMA,EACN67B,OAAQA,EACRG,KAhIS,SAAU92C,EAAQN,EAAM02C,GACjC,OAAOR,EAAOkB,KAAK92C,EAAQN,EAAM02C,EACnC,EA+HEuV,mBAAoBA,EACpBsD,yBApH6B,SAAUhlC,GAGvC,IAFA,IAAIlB,EAAOigC,IACPhrB,EAAQ,KACL/T,GAAQA,IAASlB,GAER,QADdiV,EAAQ2tB,EAAmB1hC,IADCA,EAAOA,EAAK5hB,YAM1C,OAAO21B,CACT,EA2GEiZ,QA1GY,WACZ,GAAI4R,EAAYrpD,OAAS,EAEvB,IADA,IAAID,EAAIspD,EAAYrpD,OACbD,KAAK,CACV,IAAI0f,EAAO4pC,EAAYtpD,GACvBq2C,EAAOe,OAAO13B,EAAK,GAAIA,EAAK,GAAIA,EAAK,GACvC,CAEFrB,GAAO8qC,GAAO,SAAUlwB,EAAGzO,GACzB6+B,EAAiBzpB,OAAOpV,UACjB2+B,EAAM3+B,EACf,IACI+vB,GAAO1e,aACT0e,GAAO1e,aAEX,EA4FE8zB,UA3Fc,SAAUjlC,EAAMR,GAC9B,GAAKnG,GAEE,CACL,KAAO2G,GAAM,CACX,GAAIR,IAAWQ,EACb,OAAO,EAETA,EAAOA,EAAK5hB,UACd,CACA,OAAO,CACT,CATE,OAAO4hB,IAASR,GAAUA,EAAOxe,SAASgf,EAU9C,EAgFEklC,QA/EY,SAAUlzC,GACtB,MAAO,mBAAqBA,EAAEmnB,eAAelX,SAAW,kBAAoBjQ,EAAEmzC,YAAc,mBAAqBnzC,EAAEozC,aAAanjC,SAAW,gBAAkBjQ,EAAEqzC,SACjK,GA+EIzK,EA30Be,SAAUlc,EAAQrL,EAAUiyB,GAC/C,IAAIC,EAAalyB,EAASmyB,YACtBC,EAAc,CAChBxvB,IAAK,SAAUioB,EAAM1kD,EAAO/D,GACtB49B,EAAS4T,eAA2B,OAAVztC,IAC5BA,EAAQ65B,EAAS4T,cAAc75B,KAAKimB,EAAS8T,qBAAuBme,IAAc9rD,EAAO/D,EAAMyoD,EAAK,KAEtGA,EAAKvhB,KAAK,YAAclnC,EAAM+D,GAAOmjC,KAAKlnC,EAAM+D,EAClD,EACA0zB,IAAK,SAAUgxB,EAAMzoD,GACnB,OAAOyoD,EAAKvhB,KAAK,YAAclnC,IAASyoD,EAAKvhB,KAAKlnC,EACpD,GAEEmlD,EAAY,CACdj2C,MAAO,CACLsxB,IAAK,SAAUioB,EAAM1kD,GACL,OAAVA,GAAmC,iBAAVA,GAIzB+rD,GACFrH,EAAKvhB,KAAK,iBAAkBnjC,GAEhB,OAAVA,GAAmC,iBAAVA,GAC3B0kD,EAAK3C,WAAW,SAChB2C,EAAKr0B,IAAI6U,EAAOoI,MAAMttC,KAEtB0kD,EAAKvhB,KAAK,QAASnjC,IAVnB0kD,EAAKr0B,IAAIrwB,EAYb,EACA0zB,IAAK,SAAUgxB,GACb,IAAI1kD,EAAQ0kD,EAAKvhB,KAAK,mBAAqBuhB,EAAKvhB,KAAK,SAErD,OADQ+B,EAAO4J,UAAU5J,EAAOoI,MAAMttC,GAAQ0kD,EAAK,GAAGj8B,SAExD,IAMJ,OAHIsjC,IACF3K,EAAU7D,KAAO6D,EAAUrvC,IAAMk6C,GAE5B7K,CACT,CAkyBkB8K,CAAehnB,EAAQrL,EAAUnkB,EAASkC,IAC1D,OAAOA,CACT,EACAmtC,GAAS+E,IAAM/E,GAASvnD,UACxBunD,GAASpI,UAAYiI,GAErB,IAAIuH,GAAQpH,GAAS+E,IACjBsC,GAAS5nC,GAAMpN,KAAM0N,GAAON,GAAMM,KAKlCunC,GAAe,WACjB,SAASA,EAAaxyB,QACH,IAAbA,IACFA,EAAW,CAAC,GAEdt6B,KAAK+sD,OAAS,CAAC,EACf/sD,KAAKgtD,MAAQ,GACbhtD,KAAKitD,sBAAwB,CAAC,EAC9BjtD,KAAKktD,qBAAuB,GAC5BltD,KAAKmtD,QAAU,EACfntD,KAAKs6B,SAAWA,CAClB,CAwIA,OAvIAwyB,EAAah7C,UAAU8qB,mBAAqB,SAAUX,GACpDj8B,KAAKs6B,SAAS2B,eAAiBA,CACjC,EACA6wB,EAAah7C,UAAUs7C,WAAa,SAAUrmC,EAAK6T,EAASC,GAC1D,IACIzJ,EADAlK,EAAM0lC,GAENS,EAAU,WACZnmC,EAAI7c,OAAOzM,GACPwzB,IACFA,EAAI9e,QAAU8e,EAAI/e,OAAS+e,EAAM,KAErC,EAeIxzB,EAAKspB,EAAIyjC,YACbv5B,EAAMnzB,SAAS4G,cAAc,WACzBjH,GAAKA,EACTwzB,EAAIjrB,KAAO,kBACXirB,EAAI5e,IAAMyS,GAAM6B,gBAAgBC,GAC5B/mB,KAAKs6B,SAAS2B,gBAChB/U,EAAIm/B,UAAUj1B,EAAK,iBAAkBpxB,KAAKs6B,SAAS2B,gBAErD7K,EAAI/e,OAtBO,WACTg7C,IACAzyB,GACF,EAoBAxJ,EAAI9e,QAnBQ,WACV+6C,IACI93C,EAAWslB,GACbA,IAEuB,oBAAZrH,SAA2BA,QAAQuD,GAIlD,GAWC94B,SAASiiC,qBAAqB,QAAQ,IAAMjiC,SAASkD,MAAM4D,YAAYqsB,EAC1E,EACA07B,EAAah7C,UAAUw7C,OAAS,SAAUvmC,GACxC,OArDS,IAqDF/mB,KAAK+sD,OAAOhmC,EACrB,EACA+lC,EAAah7C,UAAUy7C,SAAW,SAAUxmC,GAC1C/mB,KAAK+sD,OAAOhmC,GAxDH,CAyDX,EACA+lC,EAAah7C,UAAUzQ,IAAM,SAAU0lB,EAAK6T,EAASvT,EAAOwT,GAC1D,IAAIG,EAAQh7B,KAAK+sD,OAAOhmC,GACxB/mB,KAAKgtD,MAAMvoD,KAAKsiB,QACF1qB,IAAV2+B,IACFh7B,KAAK+sD,OAAOhmC,GAhEL,GAkEL6T,IACG56B,KAAKitD,sBAAsBlmC,KAC9B/mB,KAAKitD,sBAAsBlmC,GAAO,IAEpC/mB,KAAKitD,sBAAsBlmC,GAAKtiB,KAAK,CACnCm2B,QAASA,EACTC,QAASA,EACTxT,MAAOA,GAASrnB,OAGtB,EACA8sD,EAAah7C,UAAU6oB,KAAO,SAAU5T,EAAK6T,EAASvT,EAAOwT,GAC3D,OAAO76B,KAAKqB,IAAI0lB,EAAK6T,EAASvT,EAAOwT,EACvC,EACAiyB,EAAah7C,UAAUzH,OAAS,SAAU0c,UACjC/mB,KAAK+sD,OAAOhmC,UACZ/mB,KAAKitD,sBAAsBlmC,EACpC,EACA+lC,EAAah7C,UAAU07C,UAAY,SAAU5yB,EAASvT,EAAOwT,GAC3D76B,KAAKytD,YAAYztD,KAAKgtD,MAAOpyB,EAASvT,EAAOwT,EAC/C,EACAiyB,EAAah7C,UAAU27C,YAAc,SAAUC,EAAS9yB,EAASvT,EAAOwT,GACtE,IAAIxiB,EAAOrY,KACP2tD,EAAW,GACXC,EAAgB,SAAUlxD,EAAMqqB,GAClC8lC,GAAOx0C,EAAK40C,sBAAsBlmC,IAAM,SAAUtnB,GAC5C8V,EAAW9V,EAAS/C,KACtB+C,EAAS/C,GAAM2X,KAAK5U,EAAS4nB,MAEjC,IACAhP,EAAK40C,sBAAsBlmC,QAAO1qB,CACpC,EACAgc,EAAK60C,qBAAqBzoD,KAAK,CAC7Bm2B,QAASA,EACTC,QAASA,EACTxT,MAAOA,GAASrnB,OAElB,IAAIytD,EAAc,WAChB,IAAII,EAAiBtoC,GAAKmoC,GA4B1B,GA3BAA,EAAQlxD,OAAS,EACjBqwD,GAAOgB,GAAgB,SAAU9mC,GAxG1B,IAyGD1O,EAAK00C,OAAOhmC,GAxGX,IA4GD1O,EAAK00C,OAAOhmC,GA9GV,IAkHF1O,EAAK00C,OAAOhmC,KACd1O,EAAK00C,OAAOhmC,GAnHR,EAoHJ1O,EAAK80C,UACL90C,EAAK+0C,WAAWrmC,GAAK,WACnB1O,EAAK00C,OAAOhmC,GArHX,EAsHD1O,EAAK80C,UACLS,EAAc,UAAW7mC,GACzB0mC,GACF,IAAG,WACDp1C,EAAK00C,OAAOhmC,GAzHX,EA0HD1O,EAAK80C,UACLQ,EAASlpD,KAAKsiB,GACd6mC,EAAc,UAAW7mC,GACzB0mC,GACF,KAjBAG,EAAc,UAAW7mC,GAJzB6mC,EAAc,UAAW7mC,EAuB7B,KACK1O,EAAK80C,QAAS,CACjB,IAAIW,EAAkBz1C,EAAK60C,qBAAqB94C,MAAM,GACtDiE,EAAK60C,qBAAqB1wD,OAAS,EACnCqwD,GAAOiB,GAAiB,SAAUruD,GACR,IAApBkuD,EAASnxD,OACP+Y,EAAW9V,EAASm7B,UACtBn7B,EAASm7B,QAAQvmB,KAAK5U,EAAS4nB,OAG7B9R,EAAW9V,EAASo7B,UACtBp7B,EAASo7B,QAAQxmB,KAAK5U,EAAS4nB,MAAOsmC,EAG5C,GACF,CACF,EACAF,GACF,EACAX,EAAaA,aAAe,IAAIA,EACzBA,CACT,CApJmB,GAsJfiB,GAAO,SAAUC,GACnB,IAAIvtD,EAAQutD,EAOZ,MAAO,CACL75B,IAPQ,WACR,OAAO1zB,CACT,EAMEy8B,IALQ,SAAUniB,GAClBta,EAAQsa,CACV,EAKF,EAQIkZ,GAAO,CAAC,EACRg6B,GAAcF,GAAK,MACnBG,GAAkB,WACpB,OAAO5yC,GAAM2Y,GAAMg6B,GAAY95B,MACjC,EAkEIg6B,GAAO,CACTC,QAlEY,WACZ,OAAOvzC,GAAMoZ,IAAM,SAAUxzB,GAC3B,OAAOmc,GAAS,CAAC,EAAGnc,EACtB,GACF,EA+DE4tD,QA9DY,SAAUC,GAClBA,GACFL,GAAY/wB,IAAIoxB,EAEpB,EA2DEC,QA1DY,WACZ,OAAON,GAAY95B,KACrB,EAyDE9yB,IAxDU,SAAUmtD,EAAMppC,GAC1B,IAAIqpC,EAAWx6B,GAAKu6B,GACfC,IACHx6B,GAAKu6B,GAAQC,EAAW,CAAC,GAE3B7zC,GAAOwK,GAAO,SAAUspC,EAAahyD,GACnC+xD,EAAS/xD,EAAK2G,eAAiBqrD,CACjC,GACF,EAiDExiC,UAhDc,SAAUxE,GACxB,IAlCoBhJ,EAkChB+vC,EAAWP,KAAkB72C,MAAM,CAAC,GACpCa,EAAW,SAAU1Y,GACvB,OAAI+V,EAAW/V,GACNlC,OAAOwU,UAAUoG,SAAS7D,KAAK7U,GAEhCgsD,EAAQhsD,GAAkB,GAAX,GAAKA,CAC9B,EACIgsD,EAAU,SAAU9jC,GACtB,MAAgB,KAATA,SAAeA,CACxB,EACIinC,EAAc,SAAUjnC,GAC1B,IAAIknC,EAAU12C,EAASwP,GACvB,OAAOpM,GAAMmzC,EAAUG,EAAQvrD,eAAeF,IAAI+U,GAAUb,MAAMu3C,EACpE,EACIC,EAAgB,SAAUnwC,GAC5B,OAAOA,EAAIzU,QAAQ,iBAAkB,GACvC,EACA,GAAIuhD,EAAQ9jC,GACV,MAAO,GAET,GArDO1S,EADa0J,EAsDVgJ,IArDcnM,GAAMmD,EAAK,OAsDjC,OAAOxG,EAASwP,EAAKkJ,KAEvB,GAtDgB,SAAUlS,GAC1B,OAAOzJ,EAAUyJ,IAAQA,EAAIliB,OAAS,CACxC,CAoDMsyD,CAAYpnC,GAAO,CACrB,IAAIqnC,EAAWrnC,EAAKtT,MAAM,GAI1B,OAAOy6C,EAHUF,EAAYjnC,EAAK,IAAIzd,QAAQ,iBAAiB,SAAU+kD,EAAIC,GAC3E,OAAO1zC,GAAMwzC,EAAUE,GAAM/2C,EAAS62C,EAASE,IAAOD,CACxD,IAEF,CACA,OAAOH,EAAcF,EAAYjnC,GACnC,EAiBEwnC,MAhBY,WACZ,OAAOhB,KAAkBp2C,MAAK,SAAUsN,GACtC,OAAO9J,GAAM8J,EAAO,OACtB,IAAGrN,QAAO,SAAU8gC,GAClB,MAAe,QAARA,CACT,GACF,EAWEsW,QAVY,SAAUX,GACtB,OAAOjzC,GAAM0Y,GAAMu6B,EACrB,GAWIY,GAAe,WACjB,IAAIhqC,EAAQ,GACRkX,EAAO,CAAC,EACR0B,EAAS,CAAC,EACVqxB,EAAa,GACbC,EAAe,SAAU5yD,EAAMs+B,GACjC,IAAIu0B,EAAmBh2C,EAAS81C,GAAY,SAAUG,GACpD,OAAOA,EAAS9yD,OAASA,GAAQ8yD,EAASx0B,QAAUA,CACtD,IACA9hB,EAAOq2C,GAAkB,SAAUC,GACjC,OAAOA,EAAS/vD,UAClB,GACF,EAOIgwD,EAAe,SAAU/yD,GAC3B,IAAI26B,EAIJ,OAHI2G,EAAOthC,KACT26B,EAAS2G,EAAOthC,GAAM+yD,cAEjBp4B,GAAU,EACnB,EA2BIq4B,EAAY,SAAUC,EAASC,GACjC,MAAmB,iBAARA,EACFA,EAEiB,iBAAZD,EAAuB,CACnC/wC,OAAQ,GACRixC,SAAUD,EACVthB,OAAQ,IACN,CACF1vB,OAAQ+wC,EAAQ/wC,OAChBixC,SAAUD,EACVthB,OAAQqhB,EAAQrhB,OAEpB,EAqBI3T,EAAO,SAAUj+B,EAAMozD,EAAUl1B,EAASvT,EAAOwT,GACnD,IAAIyB,EAAK5/B,GAAT,CAGA,IAAIqzD,EAAgC,iBAAbD,EAAwBA,EAAWA,EAASlxC,OAASkxC,EAASD,SAAWC,EAASxhB,OAC1E,IAA3ByhB,EAAUxsD,QAAQ,OAA4C,IAA9BwsD,EAAUxsD,QAAQ,SACpDwsD,EAAYX,GAAaY,QAAU,IAAMD,GAE3CzzB,EAAK5/B,GAAQqzD,EAAUE,UAAU,EAAGF,EAAU7pD,YAAY,MAC1D,IAAI6sB,EAAO,WACTu8B,EAAa5yD,EAAM,UAxBA,SAAUA,EAAMozD,EAAUl1B,EAASvT,GACxD,IAAI6oC,EAAOT,EAAa/yD,GACxBwc,EAAOg3C,GAAM,SAAUN,GACrB,IAAIO,EAAST,EAAUI,EAAUF,GACjCj1B,EAAKw1B,EAAON,SAAUM,OAAQ9zD,OAAWA,EAC3C,IACIu+B,IACEvT,EACFuT,EAAQvmB,KAAKgT,GAEbuT,EAAQvmB,KAAKy4C,IAGnB,CAYIsD,CAAiB1zD,EAAMozD,EAAUl1B,EAASvT,EAC5C,EACI2W,EAAOthC,GACTq2B,IAEA+5B,GAAaA,aAAazrD,IAAI0uD,EAAWh9B,EAAM1L,EAAOwT,EAbxD,CAeF,EACIw1B,EAAU,SAAU3zD,EAAM+C,EAAUu7B,QACxB,IAAVA,IACFA,EAAQ,SAENzf,GAAMyiB,EAAQthC,IAAmB,UAAVs+B,GAEhBzf,GAAM+gB,EAAM5/B,IAAmB,WAAVs+B,EAD9Bv7B,IAIA4vD,EAAW5qD,KAAK,CACd/H,KAAMA,EACNs+B,MAAOA,EACPv7B,SAAUA,GAGhB,EACA,MAAO,CACL2lB,MAAOA,EACPkX,KAAMA,EACN0B,OAAQA,EACRqxB,WAAYA,EACZl7B,IAjHQ,SAAUz3B,GAClB,GAAIshC,EAAOthC,GACT,OAAOshC,EAAOthC,GAAMuD,QAGxB,EA6GEwvD,aAAcA,EACda,gBAtGoB,SAAU5zD,EAAM6zD,IACF,IAA9BnB,GAAaoB,cACfH,EAAQ3zD,GAAM,WACZ,IAAI+zD,EAAWtC,GAAKI,WAEfkC,GAAYF,IAAiE,KAD3D,KAAOA,GAAa,IAAM,KACFhtD,QAAQ,IAAMktD,EAAW,MAGxE3D,GAAaA,aAAazrD,IAAIi7B,EAAK5/B,GAAQ,UAAY+zD,EAAW,MACpE,GAAG,SAEP,EA4FEpvD,IA3FQ,SAAUzD,EAAI8yD,EAAOjB,GAC7B,IAAIkB,EAAmBD,EAOvB,OANAtrC,EAAM3gB,KAAKksD,GACX3yB,EAAOpgC,GAAM,CACXqC,SAAU0wD,EACVlB,aAAcA,GAEhBH,EAAa1xD,EAAI,SACV+yD,CACT,EAmFEtmD,OAlFW,SAAU3N,UACd4/B,EAAK5/B,UACLshC,EAAOthC,EAChB,EAgFEgzD,UAAWA,EACXkB,cAlEkB,SAAUC,EAAYnD,GACxC,IAAIoD,EAAYx0B,EAAKu0B,GACrB33C,EAAOw0C,GAAS,SAAUt7C,GACxB06C,GAAaA,aAAazrD,IAAIyvD,EAAY,IAAM1+C,EAClD,GACF,EA8DEuoB,KAAMA,EACN01B,QAASA,EAEb,EACAjB,GAAaoB,cAAe,EAC5BpB,GAAaY,QAAU,GACvBZ,GAAa2B,cAAgB3B,KAC7BA,GAAa4B,aAAe5B,KAE5B,IA0BI3uD,GAAQ,WACV,IAAIwwD,EA3BU,SAAUC,GACxB,IAAID,EAAUlD,GAAKx1C,EAAS1B,QACxBs6C,EAAS,WACX,OAAOF,EAAQ98B,MAAMtc,KAAKq5C,EAC5B,EAeA,MAAO,CACLE,MAfU,WACVD,IACAF,EAAQ/zB,IAAI3kB,EAAS1B,OACvB,EAaEw6C,MAZU,WACV,OAAOJ,EAAQ98B,MAAMhd,QACvB,EAWEgd,IAVQ,WACR,OAAO88B,EAAQ98B,KACjB,EASE+I,IARQ,SAAUlzB,GAClBmnD,IACAF,EAAQ/zB,IAAI3kB,EAASJ,KAAKnO,GAC5B,EAOF,CAEgBsnD,CAAU77C,GAIxB,OAAOmH,GAASA,GAAS,CAAC,EAAGq0C,GAAU,CAAEpN,GAHhC,SAAUrwC,GACjB,OAAOy9C,EAAQ98B,MAAMtc,KAAKrE,EAC5B,GAEF,EAEIwlC,GAAQ,SAAUziC,EAAIg7C,GACxB,IAAI/3B,EAAQ,KAmBZ,MAAO,CACL0a,OAnBW,WACNh/B,EAAOskB,KACV3sB,aAAa2sB,GACbA,EAAQ,KAEZ,EAeEW,SAda,WAEb,IADA,IAAItkB,EAAO,GACF9R,EAAK,EAAGA,EAAK+R,UAAUtZ,OAAQuH,IACtC8R,EAAK9R,GAAM+R,UAAU/R,GAEnBmR,EAAOskB,KACTA,EAAQpwB,YAAW,WACjBowB,EAAQ,KACRjjB,EAAGR,MAAM,KAAMF,EACjB,GAAG07C,GAEP,EAKF,EACIvU,GAAO,SAAUzmC,EAAIg7C,GACvB,IAAI/3B,EAAQ,KACR0a,EAAS,WACNh/B,EAAOskB,KACV3sB,aAAa2sB,GACbA,EAAQ,KAEZ,EAYA,MAAO,CACL0a,OAAQA,EACR/Z,SAba,WAEb,IADA,IAAItkB,EAAO,GACF9R,EAAK,EAAGA,EAAK+R,UAAUtZ,OAAQuH,IACtC8R,EAAK9R,GAAM+R,UAAU/R,GAEvBmwC,IACA1a,EAAQpwB,YAAW,WACjBowB,EAAQ,KACRjjB,EAAGR,MAAM,KAAMF,EACjB,GAAG07C,EACL,EAKF,EAEIC,GAAS,SAAU3hD,EAAS+zB,GAC9B,IAAInjC,EAAQ4vB,GAAMxgB,EAAS+zB,GAC3B,YAAiBvnC,IAAVoE,GAAiC,KAAVA,EAAe,GAAKA,EAAM6kB,MAAM,IAChE,EAmBImsC,GAAW,SAAU5hD,GACvB,YAAiCxT,IAA1BwT,EAAQqX,IAAI9lB,SACrB,EAWIswD,GAAQ,SAAU7hD,EAAS8hD,GACzBF,GAAS5hD,GACXA,EAAQqX,IAAI9lB,UAAUC,IAAIswD,GATlB,SAAU9hD,EAAS8hD,IAxBnB,SAAU9hD,EAAS+zB,EAAMhmC,GACnC,IACI8f,EADM8zC,GAAO3hD,EAAS+zB,GACbl+B,OAAO,CAAC9H,IACrBuyB,GAAMtgB,EAAS+zB,EAAMlmB,EAAGmZ,KAAK,KAE/B,EAoBS+6B,CAAM/hD,EAAS,QAAS8hD,EACjC,CASIE,CAAMhiD,EAAS8hD,EAEnB,EAgBIlU,GAAM,SAAU5tC,EAAS8hD,GAC3B,OAAOF,GAAS5hD,IAAYA,EAAQqX,IAAI9lB,UAAU6G,SAAS0pD,EAC7D,EAEIG,GAAgB,SAAUzqC,EAAO3K,GACnC,IAAI2a,EAAS,GAOb,OANAne,EAAOgR,GAAS7C,IAAQ,SAAUpU,GAC5ByJ,EAAUzJ,KACZokB,EAASA,EAAO3xB,OAAO,CAACuN,KAE1BokB,EAASA,EAAO3xB,OAAOosD,GAAc7+C,EAAGyJ,GAC1C,IACO2a,CACT,EAEI06B,GAAc,SAAU1qC,EAAOU,GACjC,OAz8MQ,SAAUA,EAAUV,GAC5B,IAAI0R,OAAiB18B,IAAVgrB,EAAsBppB,SAAWopB,EAAMH,IAClD,OAAOmB,GAAe0Q,GAAQ,GAAK/f,EAAM+f,EAAK8e,iBAAiB9vB,GAAWZ,GAC5E,CAs8MSnlB,CAAI+lB,EAAUV,EACvB,EAEI2qC,GAAa77C,EAAS,kBACtB87C,GAAiB97C,EAAS,uBAC1B+7C,GAAmB/7C,EAAS,2BAE5Bg8C,GAAW,SAAUp4B,EAAQq4B,GAC/B,IAAIC,EAAMt4B,EAAOu4B,UAAUC,SACvBnhD,EAAQ+V,GAAqBkrC,EAAIjyB,gBACjCra,EAAOoB,GAAqB4S,EAAOy4B,WACnCzqC,EAAWqqC,EAAep7C,MAAK,WACjC,MAAO,IAAMg7C,IACf,IAAG,SAAUS,GACX,MAAO,IAAMR,KAAmB,KAAOQ,EAAK,IAC9C,IACIC,EAAWvoC,GAAQ/Y,EAAOihD,EAAIjG,aAAa/0C,MAAMjG,GACjD8yC,EAAUjrB,GAAUy5B,EAAU3qC,GAAU,SAAU9Q,GACpD,OAAOxD,GAAGwD,EAAG8O,EACf,IACI4sC,EAAU,SAAUl2D,EAAGg0B,GACzB,OAr/LQ,SAAU5gB,EAASrS,GAC7B,IAAI0pB,EAAMrX,EAAQqX,IAClB,SAAOA,IAAOA,EAAIliB,eAAekiB,EAAIliB,aAAaxH,EACpD,CAk/LQo1D,CAAMn2D,EAAGg0B,GACJlY,EAASJ,KAAKkY,GAAM5zB,EAAGg0B,IAEvBlY,EAAS1B,MAEpB,EACA,OAAOqtC,EAAQpsC,MAAK,SAAUrb,GAC5B,OAAOk2D,EAAQl2D,EAAG,GAAKy1D,MAAoBp6C,MAAK,SAAU+6C,GACxD,OAAOF,EAAQl2D,EAAG,GAAKw1D,MAAkB9uD,KAAI,SAAUzG,GACrD,IAAI+uB,EAAWqnC,GAAY/4B,EAAQ84B,GACnC,MAAO,CACLA,IAAKA,EACLn2D,KAAMA,EACN+uB,SAAUA,EAEd,GACF,GACF,GACF,EAIIqnC,GAAc,SAAU/4B,EAAQ84B,GAClC,IAAI1xD,EAAOgmB,GAAqB4S,EAAOy4B,WACvC,OAAOT,GAAY5wD,EAAM,IAAM+wD,KAAqB,KAAOW,EAAM,KACnE,EAmIIxQ,GAAS,EACT0Q,GAAW,SAAUn0C,GACvB,IACIwa,GADO,IAAIuC,MACCq3B,UAGhB,OAAOp0C,EAAS,IAFHiP,KAAKolC,MAAsB,IAAhBplC,KAAKgyB,aAC7BwC,GACwC/uC,OAAO8lB,EACjD,EAqBI8D,GAAM,SAAUrtB,EAASqzC,GAC3B,IAduB97B,EAEnBE,EAaA4rC,EADQ1pC,GAAQ3Z,GACDqX,IACfisC,EAAWhsC,GAAqB+rC,EAAOxS,0BACvC0S,GAjBmBhsC,EAiBQ87B,GAf3B57B,GAeoC4rC,GAhBrBj1D,UACL4G,cAAc,QACxByJ,UAAY8Y,EACT8C,GAAS/C,GAAqBG,KAcrCkE,GAAO2nC,EAAUC,GACjB1nC,GAAM7b,GACNyb,GAASzb,EAASsjD,EACpB,EAEIE,GAAU,SAAUC,EAAUC,GAChC,OAAOpsC,GAAqBmsC,EAASpsC,IAAIpY,UAAUykD,GACrD,EACI91B,GAAU,SAAU61B,GACtB,OAAOD,GAAQC,GAAU,EAC3B,EACIE,GAAS,SAAUF,GACrB,OAAOD,GAAQC,GAAU,EAC3B,EAEIG,GAAa,SAAUp2B,EAAWC,EAAUo2B,QAC3B,IAAfA,IACFA,EAAa/8C,GAEf,IAAIqrB,EAAS,IAAI5E,GAAcC,EAAWC,GACtC3W,EAAO,SAAUgtC,GACnB,IAAI5mD,EACJ,GACEA,EAAOi1B,EAAO2xB,WACP5mD,IAASkiB,GAASliB,KAAU2mD,EAAW3mD,IAChD,OAAOwL,EAASC,KAAKzL,GAAMzJ,OAAO2rB,GACpC,EACA,MAAO,CACL/O,QAAS,WACP,OAAO3H,EAASC,KAAKwpB,EAAO9hB,WAAW5c,OAAO2rB,GAChD,EACAliB,KAAM,WACJ,OAAO4Z,EAAK,OACd,EACA4W,KAAM,WACJ,OAAO5W,EAAK,OACd,EACA6W,MAAO,WACL,OAAO7W,EAAK,QACd,EAEJ,EAEIitC,GAAa,SAAU1sC,EAAKwsC,GAC9B,IAAIG,EAAkBH,GAA0B,SAAUzsC,GACxD,OAAOC,EAAI4hC,QAAQ7hC,IAASoI,GAAOpI,IAASuI,GAAyBvI,EACvE,EACIN,EAAO,SAAUM,EAAMuY,EAAQwC,EAAQ8xB,GACzC,GAAI7kC,GAAShI,GAAO,CAClB,IAAI8sC,EAAYD,EAAQ7sC,EAAMuY,EAAQvY,EAAKgN,MAC3C,IAAmB,IAAf8/B,EACF,OAAOx7C,EAASJ,KAAK,CACnBxT,UAAWsiB,EACXuY,OAAQu0B,GAGd,CACA,OAAO/xB,IAASlqB,MAAK,SAAU/K,GAC7B,OAAO4Z,EAAK5Z,EAAKpI,UAAWoI,EAAKyyB,OAAQwC,EAAQ8xB,EACnD,GACF,EAuBA,MAAO,CACLE,UAvBc,SAAU/sC,EAAMuY,EAAQs0B,EAAS/tC,GAC/C,IAAIic,EAASyxB,GAAWxsC,EAAMlB,EAAM8tC,GACpC,OAAOltC,EAAKM,EAAMuY,GAAQ,WACxB,OAAOwC,EAAOzE,OAAOp6B,KAAI,SAAUo6B,GACjC,MAAO,CACL54B,UAAW44B,EACXiC,OAAQjC,EAAK/gC,OAEjB,GACF,GAAGs3D,GAASr8C,WACd,EAcEw8C,SAba,SAAUhtC,EAAMuY,EAAQs0B,EAAS/tC,GAC9C,IAAIic,EAASyxB,GAAWxsC,EAAMlB,EAAM8tC,GACpC,OAAOltC,EAAKM,EAAMuY,GAAQ,WACxB,OAAOwC,EAAOj1B,OAAO5J,KAAI,SAAU4J,GACjC,MAAO,CACLpI,UAAWoI,EACXyyB,OAAQ,EAEZ,GACF,GAAGs0B,GAASr8C,WACd,EAKF,EAEIy8C,GAAUrmC,KAAKsmC,MACf5Q,GAAQ,SAAU6Q,GACpB,OAAKA,EAUE,CACLvoD,KAAMqoD,GAAQE,EAAKvoD,MACnBT,IAAK8oD,GAAQE,EAAKhpD,KAClBiiB,OAAQ6mC,GAAQE,EAAK/mC,QACrBD,MAAO8mC,GAAQE,EAAKhnC,OACpBle,MAAOglD,GAAQE,EAAKllD,OACpBie,OAAQ+mC,GAAQE,EAAKjnC,SAfd,CACLthB,KAAM,EACNT,IAAK,EACLiiB,OAAQ,EACRD,MAAO,EACPle,MAAO,EACPie,OAAQ,EAWd,EACIknC,GAAW,SAAUD,EAAME,GAS7B,OARAF,EAAO7Q,GAAM6Q,GACTE,IAGFF,EAAKvoD,KAAOuoD,EAAKvoD,KAAOuoD,EAAKllD,OAF7BklD,EAAKhnC,MAAQgnC,EAAKvoD,KAKpBuoD,EAAKllD,MAAQ,EACNklD,CACT,EAIIG,GAAkB,SAAUC,EAAWC,EAAOC,GAChD,OAAOF,GAAa,GAAKA,GAAa3mC,KAAK8mC,IAAIF,EAAMtnC,OAAQunC,EAAMvnC,QAAU,CAC/E,EACIynC,GAAY,SAAUH,EAAOC,GAC/B,IAAIG,EAAahnC,KAAK8mC,IAAID,EAAMvnC,OAAS,EAAGsnC,EAAMtnC,OAAS,GAC3D,OAAIsnC,EAAMpnC,OAASwnC,EAAaH,EAAMtpD,OAGlCqpD,EAAMrpD,IAAMspD,EAAMrnC,SAGfknC,GAAgBG,EAAMtpD,IAAMqpD,EAAMpnC,OAAQonC,EAAOC,EAC1D,EACII,GAAY,SAAUL,EAAOC,GAC/B,OAAID,EAAMrpD,IAAMspD,EAAMrnC,UAGlBonC,EAAMpnC,OAASqnC,EAAMtpD,MAGlBmpD,GAAgBG,EAAMrnC,OAASonC,EAAMrpD,IAAKqpD,EAAOC,EAC1D,EACIK,GAAa,SAAUX,EAAMriB,EAASK,GACxC,OAAOL,GAAWqiB,EAAKvoD,MAAQkmC,GAAWqiB,EAAKhnC,OAASglB,GAAWgiB,EAAKhpD,KAAOgnC,GAAWgiB,EAAK/mC,MACjG,EAMI2nC,GAAkB,SAAU3wC,GAC9B,IAAI+b,EAAiB/b,EAAM+b,eAAgBgsB,EAAc/nC,EAAM+nC,YAC/D,OAAIhsB,EAAe7Y,iBAAmBlD,EAAMioC,YAAcF,EAAc,EAC/DhsB,EAAe5Y,WAAW4kC,GAE5B,IACT,EACI6I,GAAY,SAAUtwD,EAAW66B,GACnC,GAAIrR,GAAYxpB,IAAcA,EAAU4iB,gBAAiB,CACvD,IAAIC,EAAa7iB,EAAU6iB,WACvB0tC,EAdM,SAAUz0D,EAAOk0D,EAAKjrD,GAClC,OAAOmkB,KAAK8mC,IAAI9mC,KAAKnkB,IAAIjJ,EAaU,GAbGiJ,EACxC,CAYqByrD,CAAQ31B,EAAQ,EAAGhY,EAAWhrB,OAAS,GACxD,OAAOgrB,EAAW0tC,EACpB,CACE,OAAOvwD,CAEX,EASIywD,GAAiB,IAAI/sB,OAAO,weAC5BgtB,GAAkB,SAAUC,GAC9B,MAAqB,iBAAPA,GAAmBA,EAAGxxB,WAAW,IAAM,KAAOsxB,GAAep0D,KAAKs0D,EAClF,EA+BIC,GAAcpnC,GACdqnC,GAAqB30B,GACrB40B,GAAYlnC,GAAiB,UAAW,eACxCmnC,GAAYnnC,GAAiB,QAAS,cACtConC,GAnBM,WAER,IADA,IAAI9/C,EAAO,GACF9R,EAAK,EAAGA,EAAK+R,UAAUtZ,OAAQuH,IACtC8R,EAAK9R,GAAM+R,UAAU/R,GAEvB,OAAO,SAAUkP,GACf,IAAK,IAAI1W,EAAI,EAAGA,EAAIsZ,EAAKrZ,OAAQD,IAC/B,IAAKsZ,EAAKtZ,GAAG0W,GACX,OAAO,EAGX,OAAO,CACT,CACF,CAMmC2iD,CAAIL,GAAaC,GAAoB9+C,EAAIg/C,KACxEG,GAAWn/C,EAAI6X,GAAiB,cAAe,0BAC/CunC,GAAW7mC,GACX8mC,GAAS1mC,GACT2mC,GAAcxQ,GAASpI,UACvB6Y,GAnDgB,SAAUtxD,EAAW66B,GACvC,OAAIA,EAAS,GAAKrR,GAAYxpB,IAAcA,EAAU4iB,qBACpD,EAEO0tC,GAAUtwD,EAAW66B,EAEhC,EA8CI02B,GAAgB,SAAUlrC,GAC5B,MAAO,gBAAiBA,EAAMA,EAAIy9B,cAAgBjD,GAAS+E,IAAI/B,WACjE,EACI2N,GAAiB,SAAU5yB,GAC7B,OAAOA,GAAO,YAAYviC,KAAKuiC,EACjC,EACI6yB,GAAU,SAAU/D,GACtB,QAASA,EAAIvG,YAAcuG,EAAItG,MACjC,EACIsK,GAA0B,SAAUhyC,GACtC,IAAI1f,EAAY0f,EAAM+b,eAClBZ,EAASnb,EAAM+nC,YACnB,GAAI+J,GAAe9xC,EAAMnM,aAAe29C,GAASlxD,EAAUU,aAAe4pB,GAAStqB,GAAY,CAC7F,IAAI+iB,EAAO/iB,EAAUsvB,KACrB,GAAIkiC,GAAezuC,EAAK8X,EAAS,KAAO22B,GAAezuC,EAAK8X,EAAS,IACnE,OAAO,CAEX,CACA,OAAO,CACT,EA0BI82B,GAAa,SAAUr9C,GACzB,OAAkB,IAAXA,EAAEpN,MAA0B,IAAZoN,EAAEmU,OAAyB,IAAVnU,EAAE7N,KAA0B,IAAb6N,EAAEoU,MAC3D,EACIkpC,GAA0B,SAAUt6C,GACtC,IAAIu6C,EACAC,EAAcx6C,EAAKy6C,iBAMvB,OAJEF,EADEC,EAAYj6D,OAAS,EACV+mD,GAAMkT,EAAY,IAElBlT,GAAMtnC,EAAKnR,0BAErBsrD,GAAQn6C,IAAS85C,GAAO95C,IAASq6C,GAAWE,GApC7B,SAAUG,GAC9B,IAAI3rC,EAAM2rC,EAAOltC,cACb4oC,EAAM6D,GAAclrC,GACpB4rC,EAAS5rC,EAAIrD,eAAeiX,IAC5Bv5B,EAAasxD,EAAOtxD,WACxBA,EAAWC,aAAasxD,EAAQD,GAChCtE,EAAIvG,SAAS8K,EAAQ,GACrBvE,EAAItG,OAAO6K,EAAQ,GACnB,IAAIJ,EAAajT,GAAM8O,EAAIvnD,yBAE3B,OADAzF,EAAW8J,YAAYynD,GAChBJ,CACT,CA0BWK,CAAgB56C,GAErBq6C,GAAWE,IAAeJ,GAAQn6C,GA3BF,SAAUo2C,GAC9C,IAAIyE,EAAKzE,EAAIjyB,eACT22B,EAAK1E,EAAIhG,aACT2K,EAAK3E,EAAIjG,YACT6K,EAAK5E,EAAI/F,UACb,GAAIwK,IAAOC,GAAM9nC,GAAS8nC,IAAc,IAAPC,GAAmB,IAAPC,EAAU,CACrD,IAAIC,EAAS7E,EAAI8E,aAEjB,OADAD,EAAOE,YAAYL,GACZR,GAAwBW,EACjC,CACE,OAAO,IAEX,CAgBWG,CAAgCp7C,GAElCu6C,CACT,EACIc,GAA0B,SAAUd,EAAYlC,GAClD,IAAIiD,EAAgBlD,GAASmC,EAAYlC,GAGzC,OAFAiD,EAAcroD,MAAQ,EACtBqoD,EAAcnqC,MAAQmqC,EAAc1rD,KAAO,EACpC0rD,CACT,EAiFIC,GAAgB,SAAU7yD,EAAW66B,EAAQi3B,GAC/C,IAkBIC,EAAiB,WAInB,OAHKD,IACHA,EArG4B,SAAUgB,GAC1C,IAAIhB,EAAc,GACdiB,EAAwB,SAAUlB,GA7K1B,IAAU/B,EAAOC,EA8KD,IAAtB8B,EAAWrpC,SAGXspC,EAAYj6D,OAAS,IAjLLi4D,EAkLN+B,EAlLa9B,EAkLD+B,EAAYA,EAAYj6D,OAAS,GAjLtDi4D,EAAM5oD,OAAS6oD,EAAM7oD,MAAQ4oD,EAAMrpD,MAAQspD,EAAMtpD,KAAOqpD,EAAMpnC,SAAWqnC,EAAMrnC,QAAUonC,EAAMrnC,QAAUsnC,EAAMtnC,QAqLpHqpC,EAAYhyD,KAAK+xD,GACnB,EACImB,EAAqB,SAAUhzD,EAAW66B,GAC5C,IAAInb,EAAQ6xC,GAAcvxD,EAAU8kB,eACpC,GAAI+V,EAAS76B,EAAUsvB,KAAKz3B,OAAQ,CAClC,GAAI64D,GAAgB1wD,EAAUsvB,KAAKuL,IACjC,OAAOi3B,EAET,GAAIpB,GAAgB1wD,EAAUsvB,KAAKuL,EAAS,MAC1Cnb,EAAMynC,SAASnnD,EAAW66B,GAC1Bnb,EAAM0nC,OAAOpnD,EAAW66B,EAAS,IAC5B62B,GAAwBhyC,IAE3B,OADAqzC,EAAsBJ,GAAwBf,GAAwBlyC,IAAQ,IACvEoyC,CAGb,CACIj3B,EAAS,IACXnb,EAAMynC,SAASnnD,EAAW66B,EAAS,GACnCnb,EAAM0nC,OAAOpnD,EAAW66B,GACnB62B,GAAwBhyC,IAC3BqzC,EAAsBJ,GAAwBf,GAAwBlyC,IAAQ,KAG9Emb,EAAS76B,EAAUsvB,KAAKz3B,SAC1B6nB,EAAMynC,SAASnnD,EAAW66B,GAC1Bnb,EAAM0nC,OAAOpnD,EAAW66B,EAAS,GAC5B62B,GAAwBhyC,IAC3BqzC,EAAsBJ,GAAwBf,GAAwBlyC,IAAQ,IAGpF,EACI1f,EAAY8yD,EAAc9yD,YAC1B66B,EAASi4B,EAAcj4B,SAC3B,GAAIs2B,GAASnxD,GAEX,OADAgzD,EAAmBhzD,EAAW66B,GACvBi3B,EAET,GAAIlB,GAAY5wD,GACd,GAAI8yD,EAAc93B,UAAW,CAC3B,IAAI1Y,EAAOgvC,GAAetxD,EAAW66B,GACjCs2B,GAAS7uC,IACX0wC,EAAmB1wC,EAAMA,EAAKgN,KAAKz3B,QAEjCm5D,GAA6B1uC,KAAU8uC,GAAO9uC,IAChDywC,EAAsBJ,GAAwBf,GAAwBtvC,IAAO,GAEjF,KAAO,CAKL,GAJIA,EAAOgvC,GAAetxD,EAAW66B,GACjCs2B,GAAS7uC,IACX0wC,EAAmB1wC,EAAM,GAEvB0uC,GAA6B1uC,IAASwwC,EAAc93B,UAEtD,OADA+3B,EAAsBJ,GAAwBf,GAAwBtvC,IAAO,IACtEwvC,EAET,IAAImB,EAAa3B,GAAewB,EAAc9yD,YAAa8yD,EAAcj4B,SAAW,GAChFm2B,GAA6BiC,KAAgB7B,GAAO6B,KAClDnC,GAAUmC,IAAenC,GAAUxuC,KAAU0uC,GAA6B1uC,KAC5EywC,EAAsBJ,GAAwBf,GAAwBqB,IAAa,IAGnFjC,GAA6B1uC,IAC/BywC,EAAsBJ,GAAwBf,GAAwBtvC,IAAO,GAEjF,CAEF,OAAOwvC,CACT,CAsBoBoB,CAA4BL,GAAc7yD,EAAW66B,KAE9Di3B,CACT,EAUA,MAAO,CACL9xD,UAAWwR,EAASxR,GACpB66B,OAAQrpB,EAASqpB,GACjBs4B,QAxBY,WACZ,IAAIzzC,EAAQ6xC,GAAcvxD,EAAU8kB,eAGpC,OAFApF,EAAMynC,SAASnnD,EAAW66B,GAC1Bnb,EAAM0nC,OAAOpnD,EAAW66B,GACjBnb,CACT,EAoBEqyC,eAAgBA,EAChBqB,UAdc,WACd,OAAOrB,IAAiBl6D,OAAS,CACnC,EAaEijC,UAvCc,WACd,OAAIq2B,GAASnxD,GACO,IAAX66B,CAGX,EAmCEG,QAlCY,WACZ,OAAIm2B,GAASnxD,GACJ66B,GAAU76B,EAAUsvB,KAAKz3B,OAE3BgjC,GAAU76B,EAAU6iB,WAAWhrB,MACxC,EA8BEw7D,QAdY,SAAUP,GACtB,OAAOA,GAAiB9yD,IAAc8yD,EAAc9yD,aAAe66B,IAAWi4B,EAAcj4B,QAC9F,EAaEy4B,QAZY,SAAUpV,GACtB,OAAOoT,GAAetxD,EAAWk+C,EAASrjB,EAAS,EAAIA,EACzD,EAYF,EACAg4B,GAAcU,eAAiB,SAAU7zC,GACvC,OAAOmzC,GAAcnzC,EAAM+b,eAAgB/b,EAAM+nC,YACnD,EACAoL,GAAcW,aAAe,SAAU9zC,GACrC,OAAOmzC,GAAcnzC,EAAMgoC,aAAchoC,EAAMioC,UACjD,EACAkL,GAAc1U,MAAQ,SAAU77B,GAC9B,OAAOuwC,GAAcvwC,EAAK5hB,WAAY2wD,GAAY/uC,GAAQ,EAC5D,EACAuwC,GAAc3U,OAAS,SAAU57B,GAC/B,OAAOuwC,GAAcvwC,EAAK5hB,WAAY2wD,GAAY/uC,GACpD,EACAuwC,GAAcY,QAAU,SAAUC,EAAMC,GACtC,OAAOxoC,GAAMvV,GAAK+9C,EAAK5B,kBAAmBl8C,GAAO69C,EAAK3B,kBAAmB9B,IAAWv9C,OAAM,EAC5F,EACAmgD,GAAce,QAAU,SAAUF,EAAMC,GACtC,OAAOxoC,GAAMtV,GAAO89C,EAAK5B,kBAAmBn8C,GAAK89C,EAAK3B,kBAAmB5B,IAAWz9C,OAAM,EAC5F,EACAmgD,GAAc/3B,UAAY,SAAU50B,GAClC,QAAOA,GAAMA,EAAI40B,WACnB,EACA+3B,GAAc73B,QAAU,SAAU90B,GAChC,QAAOA,GAAMA,EAAI80B,SACnB,EACA63B,GAAcgB,eAAiB,SAAU3tD,GACvC,QAAOA,GAAMokB,GAASpkB,EAAIlG,YAC5B,EACA6yD,GAAciB,kBAAoB,SAAU5tD,GAC1C,OAA6C,IAAtC2sD,GAAcgB,eAAe3tD,EACtC,EAEA,IAiiCI6tD,GAjiCAC,GAAsB,SAAUzxC,EAAKD,GACnCgI,GAAShI,IAA8B,IAArBA,EAAKgN,KAAKz3B,QAC9B0qB,EAAI7c,OAAO4c,EAEf,EAiBI2xC,GAAkB,SAAU1xC,EAAKmrC,EAAKprC,GACpCmI,GAAmBnI,GAZJ,SAAUC,EAAKmrC,EAAK5R,GACvC,IAAIp2B,EAAa9R,EAASC,KAAKioC,EAAKp2B,YAChCC,EAAY/R,EAASC,KAAKioC,EAAKn2B,WACnC+nC,EAAIwG,WAAWpY,GACfp2B,EAAWxS,MAAK,SAAUwZ,GACxB,OAAOsnC,GAAoBzxC,EAAKmK,EAAMvH,gBACxC,IACAQ,EAAUzS,MAAK,SAAUwZ,GACvB,OAAOsnC,GAAoBzxC,EAAKmK,EAAMtH,YACxC,GACF,CAGI+uC,CAAe5xC,EAAKmrC,EAAKprC,GAlBZ,SAAUC,EAAKmrC,EAAKprC,GACnCorC,EAAIwG,WAAW5xC,GACf0xC,GAAoBzxC,EAAKD,EAAK6C,iBAC9B6uC,GAAoBzxC,EAAKD,EAAK8C,YAChC,CAgBI8uC,CAAW3xC,EAAKmrC,EAAKprC,EAEzB,EAEI8xC,GAAW9pC,GACX+pC,GAAUnqC,GACVuuB,GAAYoI,GAASpI,UACrB6b,GAAmB,SAAUhyC,GAC/B,IAAI5hB,EAAa4hB,EAAK5hB,WACtB,OAAI2zD,GAAQ3zD,GACH4zD,GAAiB5zD,GAEnBA,CACT,EACI6zD,GAAgB,SAAUjyC,GAC5B,OAAKA,EAGE7K,GAAO6K,EAAKO,YAAY,SAAU6P,EAAQpQ,GAM/C,OALI+xC,GAAQ/xC,IAA2B,OAAlBA,EAAKiC,SACxBmO,EAASA,EAAO3xB,OAAOwzD,GAAcjyC,IAErCoQ,EAAO5yB,KAAKwiB,GAEPoQ,CACT,GAAG,IATM,EAUX,EAUI8hC,GAAQ,SAAUz1D,GACpB,OAAO,SAAUC,GACf,OAAOD,IAAMC,CACf,CACF,EAgBIy1D,GAAiB,SAAUnyC,GAO7B,OALI8xC,GAAS9xC,GACJ,SAEAA,EAAKiC,SAAS7lB,eAET,IAtBU,SAAU4jB,GAClC,IAAIiK,EAAOjuB,EACXiuB,EAAQgoC,GAAcD,GAAiBhyC,IACvChkB,EAAQwZ,GAAYyU,EAAOioC,GAAMlyC,GAAOA,GACxCiK,EAAQA,EAAM9c,MAAM,EAAGnR,EAAQ,GAC/B,IAAIo2D,EAAmBj9C,GAAO8U,GAAO,SAAUmG,EAAQpQ,EAAM1qB,GAI3D,OAHIw8D,GAAS9xC,IAAS8xC,GAAS7nC,EAAM30B,EAAI,KACvC86B,IAEKA,CACT,GAAG,GAGH,OAFAnG,EAAQhV,GAASgV,EAAO9C,GAAe,CAACnH,EAAKiC,aAC7CjmB,EAAQwZ,GAAYyU,EAAOioC,GAAMlyC,GAAOA,IACzBoyC,CACjB,CAQsBC,CAAoBryC,GAAQ,GAClD,EAWIsyC,GAAW,SAAUxzC,EAAM0xC,GAC7B,IAAI9yD,EAAW66B,EAAmBg6B,EAAchyC,EAAY0kB,EAArCj6B,EAAO,GAqB9B,OApBAtN,EAAY8yD,EAAc9yD,YAC1B66B,EAASi4B,EAAcj4B,SACnBu5B,GAASp0D,GACX60D,EArDuB,SAAUvyC,EAAMuY,GACzC,MAAOvY,EAAOA,EAAK6C,kBACZivC,GAAS9xC,IAGduY,GAAUvY,EAAKgN,KAAKz3B,OAEtB,OAAOgjC,CACT,CA6CmBi6B,CAAqB90D,EAAW66B,IAG3CA,IADJhY,EAAa7iB,EAAU6iB,YACEhrB,QACvBg9D,EAAe,QACfh6B,EAAShY,EAAWhrB,OAAS,GAE7Bg9D,EAAe,SAEjB70D,EAAY6iB,EAAWgY,IAEzBvtB,EAAKxN,KAAK20D,GAAez0D,IACzBunC,EA3BmB,SAAUnmB,EAAMkB,EAAMvK,GACzC,IAAIwvB,EAAU,GACd,IAAKjlB,EAAOA,EAAK5hB,WAAY4hB,IAASlB,EAAMkB,EAAOA,EAAK5hB,WAItD6mC,EAAQznC,KAAKwiB,GAEf,OAAOilB,CACT,CAkBYwtB,CAAe3zC,EAAMphB,GAC/BunC,EAAUhwB,GAASgwB,EAASx1B,EAAImY,MAChC5c,EAAOA,EAAKvM,OAAOoW,GAAMowB,GAAS,SAAUjlB,GAC1C,OAAOmyC,GAAenyC,EACxB,MACYjN,UAAU6c,KAAK,KAAO,IAAM2iC,CAC1C,EA+BIG,GAAY,SAAU5zC,EAAM9T,GAC9B,IAAIutB,EACJ,IAAKvtB,EACH,OAAO,KAET,IAAIyqB,EAAQzqB,EAAKqT,MAAM,KACnBs0C,EAAQl9B,EAAM,GAAGpX,MAAM,KAC3Bka,EAAS9C,EAAMlgC,OAAS,EAAIkgC,EAAM,GAAK,SACvC,IAAI/3B,EAAYyX,GAAOw9C,GAAO,SAAUviC,EAAQ52B,GAC9C,IAAI4lB,EAAQ,4BAA4BD,KAAK3lB,GAC7C,OAAK4lB,GAGY,WAAbA,EAAM,KACRA,EAAM,GAAK,SA5CK,SAAUY,EAAMvqB,EAAMuG,GAC1C,IAAIiuB,EAAQgoC,GAAcjyC,GAK1B,OAJAiK,EAAQhV,GAASgV,GAAO,SAAUjK,EAAMhkB,GACtC,OAAQ81D,GAAS9xC,KAAU8xC,GAAS7nC,EAAMjuB,EAAQ,GACpD,KACAiuB,EAAQhV,GAASgV,EAAO9C,GAAe,CAAC1xB,MAC3BuG,EACf,CAuCW42D,CAAgBxiC,EAAQhR,EAAM,GAAIpV,SAASoV,EAAM,GAAI,MALnD,IAMX,GAAGN,GACH,OAAKphB,EAGAo0D,GAASp0D,GA3CO,SAAUA,EAAW66B,GAE1C,IADA,IAAwCs6B,EAApC7yC,EAAOtiB,EAAWo1D,EAAe,EAC9BhB,GAAS9xC,IAAO,CAErB,GADA6yC,EAAU7yC,EAAKgN,KAAKz3B,OAChBgjC,GAAUu6B,GAAgBv6B,GAAUu6B,EAAeD,EAAS,CAC9Dn1D,EAAYsiB,EACZuY,GAAkBu6B,EAClB,KACF,CACA,IAAKhB,GAAS9xC,EAAK8C,aAAc,CAC/BplB,EAAYsiB,EACZuY,EAASs6B,EACT,KACF,CACAC,GAAgBD,EAChB7yC,EAAOA,EAAK8C,WACd,CAIA,OAHIgvC,GAASp0D,IAAc66B,EAAS76B,EAAUsvB,KAAKz3B,SACjDgjC,EAAS76B,EAAUsvB,KAAKz3B,QAEnBg7D,GAAc7yD,EAAW66B,EAClC,CA8BSw6B,CAAiBr1D,EAAWsM,SAASuuB,EAAQ,MANhDA,EADa,UAAXA,EACO4d,GAAUz4C,GAAa,EAEvBy4C,GAAUz4C,GAEd6yD,GAAc7yD,EAAUU,WAAYm6B,IARpC,IAWX,EAEIy6B,GAA2BzqC,GAS3B0qC,GAAW,SAAUhzC,EAAKhW,EAAMo0C,EAAY+M,EAAKjhD,GACnD,IAGIoW,EAHA7iB,EAAY0tD,EAAIjhD,EAAQ,iBAAmB,gBAC3CouB,EAAS6yB,EAAIjhD,EAAQ,cAAgB,aACrC+oD,EAAQ,GACIrX,EAAQ,EACpB/8B,EAAOmB,EAAI8+B,UAWf,IAVI/2B,GAAStqB,GACXw1D,EAAM11D,KAAK6gD,EAfe,SAAUp0C,EAAMvM,EAAW66B,GACvD,IAAIvY,EAAMmzC,EAEV,IADAA,EAAgBlpD,EAAKvM,EAAUsvB,KAAK7f,MAAM,EAAGorB,IAAShjC,OACjDyqB,EAAOtiB,EAAUmlB,gBAAiB7C,GAAQgI,GAAShI,GAAOA,EAAOA,EAAK6C,gBACzEswC,GAAiBlpD,EAAK+V,EAAKgN,MAAMz3B,OAEnC,OAAO49D,CACT,CAQ4BC,CAAwBnpD,EAAMvM,EAAW66B,GAAUA,IAGvEA,IADJhY,EAAa7iB,EAAU6iB,YACEhrB,QAAUgrB,EAAWhrB,SAC5CsmD,EAAQ,EACRtjB,EAAS3R,KAAKnkB,IAAI,EAAG8d,EAAWhrB,OAAS,IAE3C29D,EAAM11D,KAAKyiB,EAAIk2B,UAAU51B,EAAWgY,GAAS8lB,GAAcxC,IAEtDn+C,GAAaA,IAAcohB,EAAMphB,EAAYA,EAAUU,WAC5D80D,EAAM11D,KAAKyiB,EAAIk2B,UAAUz4C,EAAW2gD,IAEtC,OAAO6U,CACT,EAYIG,GAAY,SAAUpzC,EAAKxqB,EAAMmT,GACnC,IAAI0mB,EAAQ,EAUZ,OATAtR,GAAMpN,KAAKqP,EAAI64B,OAAOrjD,IAAO,SAAUuqB,GACrC,GAA4C,QAAxCA,EAAKppB,aAAa,kBAGtB,OAAIopB,IAASpX,QAGb0mB,GACF,IACOA,CACT,EACIgkC,GAAiB,SAAUlI,EAAKjhD,GAClC,IAAIzM,EAAW66B,EAAQhY,EACnB5I,EAASxN,EAAQ,QAAU,MAC/BzM,EAAY0tD,EAAIzzC,EAAS,aACzB4gB,EAAS6yB,EAAIzzC,EAAS,UAClBuP,GAAYxpB,IAAqC,OAAvBA,EAAUukB,WAEtCvkB,GADA6iB,EAAa7iB,EAAU6iB,YACAqG,KAAK8mC,IAAIvjD,EAAQouB,EAASA,EAAS,EAAGhY,EAAWhrB,OAAS,OAE/EgjC,EAASpuB,EAAQ,EAAIzM,EAAU6iB,WAAWhrB,OAC1C61D,EAAI,OAASjhD,EAAQ,QAAU,QAAQzM,EAAW66B,GAGxD,EACIg7B,GAA8B,SAAUnI,GAG1C,OAFAkI,GAAelI,GAAK,GACpBkI,GAAelI,GAAK,GACbA,CACT,EACI30B,GAAc,SAAUzW,EAAMuY,GAChC,IAAI1B,EACJ,GAAI3P,GAAYlH,KACdA,EAAOguC,GAAUhuC,EAAMuY,GACnBy6B,GAAyBhzC,IAC3B,OAAOA,EAGX,GAAIoY,GAAmBpY,GAAO,CAK5B,GAJIgI,GAAShI,IAASkY,GAAwBlY,KAC5CA,EAAOA,EAAK5hB,YAEdy4B,EAAU7W,EAAK6C,gBACXmwC,GAAyBn8B,GAC3B,OAAOA,EAGT,GADAA,EAAU7W,EAAK8C,YACXkwC,GAAyBn8B,GAC3B,OAAOA,CAEX,CACF,EAII28B,GAAoB,SAAUvpD,EAAMo0C,EAAYgN,GAClD,IAAIziD,EAAUyiD,EAAU2F,UACpBv7D,EAAOmT,EAAUA,EAAQqZ,SAAW,KACpCmpC,EAAMC,EAAUC,SACpB,GAAI0H,GAAyBpqD,IAAqB,QAATnT,EACvC,MAAO,CACLA,KAAMA,EACNuG,MAAOq3D,GAAUhI,EAAUprC,IAAKxqB,EAAMmT,IAG1C,IAAIiuB,EAboC,SAAUu0B,GAClD,OAAO30B,GAAY20B,EAAIjyB,eAAgBiyB,EAAIjG,cAAgB1uB,GAAY20B,EAAIhG,aAAcgG,EAAI/F,UAC/F,CAWgBoO,CAAoCrI,GAClD,OAAIv0B,EAEK,CACLphC,KAFFA,EAAOohC,EAAQj2B,QAGb5E,MAAOq3D,GAAUhI,EAAUprC,IAAKxqB,EAAMohC,IAnF1B,SAAU5sB,EAAMohD,EAAWhN,EAAY+M,GACvD,IAAInrC,EAAMorC,EAAUprC,IAAKyzC,EAAW,CAAC,EAQrC,OAPAA,EAASvpD,MAAQ8oD,GAAShzC,EAAKhW,EAAMo0C,EAAY+M,GAAK,GACjDC,EAAUsI,gBACbD,EAASE,IAAMX,GAAShzC,EAAKhW,EAAMo0C,EAAY+M,GAAK,IAElDlyB,GAA6BkyB,KAC/BsI,EAASG,aAAc,GAElBH,CACT,CA4ESI,CAAY7pD,EAAMohD,EAAWhN,EAAY+M,EAClD,EAWI2I,GAAqB,SAAU9zC,EAAKtpB,EAAIq9D,GAC1C,IAAIplD,EAAO,CACT,gBAAiB,WACjBjY,GAAIA,EACJ,MAAS,mCAEX,OAAOq9D,EAAS/zC,EAAIpB,OAAO,OAAQjQ,EAAM,YAAcqR,EAAIpB,OAAO,OAAQjQ,EAC5E,EACIqlD,GAAwB,SAAU5I,EAAW2I,GAC/C,IAAI/zC,EAAMorC,EAAUprC,IAChBmrC,EAAMC,EAAUC,SAChB30D,EAAKspB,EAAIyjC,WACTwQ,EAAY7I,EAAUsI,cACtB/qD,EAAUyiD,EAAU2F,UACpBv7D,EAAOmT,EAAQqZ,SACnB,GAAa,QAATxsB,EACF,MAAO,CACLA,KAAMA,EACNuG,MAAOq3D,GAAUpzC,EAAKxqB,EAAMmT,IAGhC,IAAIurD,EAAOZ,GAA4BnI,EAAI8E,cAC3C,IAAKgE,EAAW,CACdC,EAAK/G,UAAS,GACd,IAAIgH,EAAkBL,GAAmB9zC,EAAKtpB,EAAK,OAAQq9D,GAC3DrC,GAAgB1xC,EAAKk0C,EAAMC,EAC7B,EACAhJ,EAAMmI,GAA4BnI,IAC9BgC,UAAS,GACb,IAAIiH,EAAoBN,GAAmB9zC,EAAKtpB,EAAK,SAAUq9D,GAM/D,OALArC,GAAgB1xC,EAAKmrC,EAAKiJ,GAC1BhJ,EAAUiJ,eAAe,CACvB39D,GAAIA,EACJ49D,MAAM,IAED,CAAE59D,GAAIA,EACf,EAYI69D,GAAkBnlD,EAAMmkD,GAAmBrkD,GAAU,GAErDslD,GAAQlW,GAAS+E,IAEjBoR,GAAiB,SAAU5hC,EAAQr9B,EAAMyoC,GAC3C,IAAI1kC,EAAQs5B,EAAO6hC,SAASl/D,EAAMyoC,GAClC,IAA4B,IAAxB1kC,EAAM8C,QAAQ,KAAa,CAC7B,IAAIs4D,EAAU9hC,EAAO6hC,SAASl/D,EAAM,GAAI,QACxC,OAAO4e,GAAMugD,EAAS9hC,EAAOn8B,IAAIyZ,MAAM8tB,EACzC,CACE,OAAO1kC,CAEX,EAgBIq7D,GAA2B,SAAU/hC,GACvC,OAAOA,EAAO6hC,SAAS,0BAA2B,GACpD,EAIIG,GAAqB,SAAUhiC,GACjC,GAAIA,EAAO6hC,SAAS,oBAAoB,GACtC,MAAO,IAET,IAAII,EAAQjiC,EAAO6hC,SAAS,oBAAqB,KACjD,OAAc,IAAVI,EACK,IACY,IAAVA,EACF,IAEAA,CAEX,EACIC,GAA0B,SAAUliC,GACtC,OAAOA,EAAO6hC,SAAS,0BAA2B,CAAC,EACrD,EAsBIM,GAA4B,SAAUniC,GACxC,OAAOA,EAAO6hC,SAAS,qBAAqB,EAAM,UACpD,EACIO,GAAsB,SAAUpiC,GAClC,OAAOA,EAAO6hC,SAAS,yBAAyB,EAAO,UACzD,EAIIQ,GAAkB,SAAUriC,GAC9B,OAAOA,EAAO6hC,SAAS,QAAS,GAAI,SACtC,EAIIS,GAAoB,SAAUtiC,GAChC,OAAOA,EAAO6hC,SAAS,oBAAqB,GAAI,SAClD,EACIU,GAAyB,SAAUviC,GACrC,OAAOA,EAAO6hC,SAAS,0BAA2B,GAAI,SACxD,EACIW,GAA6B,SAAUxiC,GACzC,OAAOA,EAAO6hC,SAAS,6BAA6B,EAAO,UAC7D,EACIY,GAAyB,SAAUziC,GACrC,OAAOA,EAAO6hC,SAAS,wBAAyB,KAAM,WACxD,EACIa,GAA0B,SAAU1iC,GACtC,OAAOA,EAAO6hC,SAAS,oBAAoB,EAAO,UACpD,EACIc,GAAoB,SAAU3iC,GAChC,OAAOA,EAAO6hC,SAAS,kBAAmB,GAAI,SAChD,EACIe,GAAkB,SAAU5iC,GAC9B,OAAOA,EAAO6hC,SAAS,WAAY,KAAM,SAC3C,EAIIgB,GAAwB,SAAU7iC,GACpC,OAAOA,EAAO6hC,SAAS,qBAAqB,EAC9C,EAgBIiB,GAAa,SAAU9iC,GACzB,IAAI+iC,EAAU/iC,EAAO6hC,SAAS,WAAY,IAC1C,OAAO3mD,EAAU6nD,GAAWA,EAAU9jD,EAAM8jD,EAAQx3C,MAAM,KAAMvG,GAClE,EAOIg+C,GAAoB,SAAUhjC,GAChC,IAAIhS,EAAWgS,EAAO6hC,SAAS,mBAC/B,OAAiB,IAAb7zC,IAAsBlE,GAAII,MAGrBlP,EAAWgT,GAAYA,EAAW,0CAE7C,EAOIi1C,GAAe,SAAUjjC,GAC3B,OAAOA,EAAO6hC,SAAS,aACzB,EAIIqB,GAAW,SAAUljC,GACvB,OAAOA,EAAO6hC,SAAS,QACzB,EACIsB,GAAiB,SAAUnjC,GAC7B,OAAOA,EAAO6hC,SAAS,WACzB,EACIuB,GAA4B,SAAUpjC,GACxC,OAAgD,IAAzCA,EAAO6hC,SAAS,oBACzB,EAmDIwB,GAAoB,SAAUrjC,GAChC,OAAOA,EAAO6hC,SAAS,mBACzB,EACIyB,GAAa,SAAUtjC,GACzB,OAAOA,EAAO6hC,SAAS,UAAW,GAAI,SACxC,EAoBI0B,GAAcnvC,GACdovC,GAAWtuC,GACXuuC,GAAe,SAAUv2C,GAC3B,IAAI5hB,EAAa4hB,EAAK5hB,WAClBA,GACFA,EAAW8J,YAAY8X,EAE3B,EACIw2C,GAAY,SAAU/1C,GACxB,IAAIg2C,EAAc1+B,GAAOtX,GACzB,MAAO,CACL6O,MAAO7O,EAAKlrB,OAASkhE,EAAYlhE,OACjCkrB,KAAMg2C,EAEV,EACIC,GAAkB,SAAU59B,GAE9B,IADA,IAAIwd,GACwD,KAApDA,EAAMxd,EAAe9L,KAAK/tB,YAAY24B,MAC5CkB,EAAe69B,WAAWrgB,EAAK,EAEnC,EACIsgB,GAAkB,SAAU99B,EAAgBl1B,GAE9C,OADAizD,GAAS/9B,GACFl1B,CACT,EA0BIkzD,GAAsB,SAAUp5D,EAAWkG,GAC7C,OAAO2sD,GAAcgB,eAAe3tD,GAPP,SAAUk1B,EAAgBl1B,GACvD,OAAO0yD,GAASx9B,IAAmBl1B,EAAIlG,cAAgBo7B,EApB3B,SAAUA,EAAgBl1B,GACtD,IAAIg4C,EAAS4a,GAAU19B,EAAe9L,KAAK3vB,OAAO,EAAGuG,EAAI20B,WACrDsjB,EAAQ2a,GAAU19B,EAAe9L,KAAK3vB,OAAOuG,EAAI20B,WAErD,OADWqjB,EAAOn7B,KAAOo7B,EAAMp7B,MACtBlrB,OAAS,GAChBmhE,GAAgB59B,GACTy3B,GAAcz3B,EAAgBl1B,EAAI20B,SAAWqjB,EAAOtsB,QAEpD1rB,CAEX,CAU0EmzD,CAAwBj+B,EAAgBl1B,GAAOgzD,GAAgB99B,EAAgBl1B,EACzJ,CAK6CozD,CAAyBt5D,EAAWkG,GAJ/C,SAAUk1B,EAAgBl1B,GAC1D,OAAOA,EAAIlG,cAAgBo7B,EAAe16B,WAZX,SAAU06B,EAAgBl1B,GACzD,IAAIxF,EAAawF,EAAIlG,YACjBu5D,EArwRU,SAAU/pD,EAAIlB,GAC5B,IAAIgG,EAAIL,EAAWzE,EAAIlB,GACvB,OAAc,IAAPgG,EAAWV,EAAS1B,OAAS0B,EAASJ,KAAKc,EACpD,CAkwRoBklD,CAAU3lD,GAAKnT,EAAWmiB,YAAauY,GAAgB58B,KAAI,SAAUF,GACrF,OAAOA,EAAQ4H,EAAI20B,SAAWg4B,GAAcnyD,EAAYwF,EAAI20B,SAAW,GAAK30B,CAC9E,IAAGwM,MAAMxM,GAET,OADAizD,GAAS/9B,GACFm+B,CACT,CAKyDE,CAA2Br+B,EAAgBl1B,GAAOgzD,GAAgB99B,EAAgBl1B,EAC3I,CAEwFwzD,CAA4B15D,EAAWkG,EAC/H,EACIizD,GAAW,SAAUQ,GACnBhB,GAAYgB,IAAuBj/B,GAAmBi/B,KACpDh/B,GAAWg/B,GACbA,EAAmB/sD,gBAAgB,kBAEnCisD,GAAac,IAGbf,GAASe,KACXX,GAAgBW,GACuB,IAAnCA,EAAmBrqC,KAAKz3B,QAC1BghE,GAAac,GAGnB,EAEIC,GAAY5gD,KAASsE,QACrBu8C,GAA2BhvC,GAC3BivC,GAAY/uC,GACZgvC,GAAgBjvC,GAEhBkvC,GAAwB,SAAU54C,EAAMlW,EAASgzC,GACnD,IACI+b,EACAC,EAFArI,EAAanC,GAASxkD,EAAQ/E,wBAAyB+3C,GAG3D,GAAqB,SAAjB98B,EAAKle,QAAoB,CAC3B,IAAIs8C,EAASp+B,EAAK0D,cAAcxe,gBAChC2zD,EAAU74C,EAAKja,YAAcq4C,EAAOr4C,WACpC+yD,EAAU94C,EAAK7a,WAAai5C,EAAOj5C,SACrC,KAAO,CACL,IAAI4zD,EAAW/4C,EAAKjb,wBACpB8zD,EAAU74C,EAAKja,WAAagzD,EAASjzD,KACrCgzD,EAAU94C,EAAK7a,UAAY4zD,EAAS1zD,GACtC,CACAorD,EAAW3qD,MAAQ+yD,EACnBpI,EAAWppC,OAASwxC,EACpBpI,EAAWprD,KAAOyzD,EAClBrI,EAAWnpC,QAAUwxC,EACrBrI,EAAWtnD,MAAQ,EACnB,IAAI6vD,EAASlvD,EAAQrB,YAAcqB,EAAQ6d,YAQ3C,OAPIqxC,EAAS,IACPlc,IACFkc,IAAW,GAEbvI,EAAW3qD,MAAQkzD,EACnBvI,EAAWppC,OAAS2xC,GAEfvI,CACT,EAyBIwI,GAAY,SAAUjlC,EAAQhU,EAAM+iC,EAAS/K,GAC/C,IACIkhB,EACAX,EAFAY,EAAkBz+D,KAGlB0+D,EAAYpD,GAAmBhiC,GAC/BqlC,EAAaD,EAAU3iE,OAAS,EAAI2iE,EAAY,IAsChDlb,EAAO,YAnEmB,SAAUl+B,GAExC,IADA,IAAIs5C,EAAuBtN,GAAY5qC,GAAqBpB,GA9BhC,qDA+BnBxpB,EAAI,EAAGA,EAAI8iE,EAAqB7iE,OAAQD,IAAK,CACpD,IAYM03B,EAZFhN,EAAOo4C,EAAqB9iE,GAAG2qB,IAC/B4W,EAAU7W,EAAK6C,gBACf+V,GAAyB/B,KAEP,KADhB7J,EAAO6J,EAAQ7J,MACVz3B,OACPshC,EAAQz4B,WAAW8J,YAAY2uB,GAE/BA,EAAQ8/B,WAAW3pC,EAAKz3B,OAAS,EAAG,IAGxCshC,EAAU7W,EAAK8C,YACX6V,GAA2B9B,KAET,KADhB7J,EAAO6J,EAAQ7J,MACVz3B,OACPshC,EAAQz4B,WAAW8J,YAAY2uB,GAE/BA,EAAQ8/B,WAAW,EAAG,GAG5B,CACF,CA6CI0B,CAA0Bv5C,GACtBu4C,IACFR,GAASQ,GACTA,EAAqB,MAEvBY,EAAgBrb,IAAG,SAAU0b,GAC3Bxe,GAASwe,EAAWC,OAAOn1D,SAC3B60D,EAAgB9N,OAClB,IACI6N,IACFvlC,GAAMQ,cAAc+kC,GACpBA,OAAiB5iE,EAErB,EAsBA,MAAO,CACL2nD,KA1ES,SAAUnB,EAAQhzC,GAC3B,IAAIwiD,EAEJ,GADApO,IACIya,GAAc7uD,GAChB,OAAO,KAET,IAAIi5C,EAAQj5C,GA2BV,OATAyuD,EAzoMe,SAAUr3C,EAAM47B,GACnC,IACI4c,EADMx4C,EAAKwC,cACI9B,eAAekX,IAC9Bx5B,EAAa4hB,EAAK5hB,WACtB,GAAKw9C,EAgBE,CAEL,GADI/kB,EAAU7W,EAAK6C,gBACfoV,GAASpB,GAAU,CACrB,GAAIuB,GAAmBvB,GACrB,OAAOA,EAET,GAAI+B,GAAyB/B,GAC3B,OAAOA,EAAQ4hC,UAAU5hC,EAAQ7J,KAAKz3B,OAAS,EAEnD,CACA6I,EAAWC,aAAam6D,EAAUx4C,EACpC,KA3Ba,CACX,IAAI6W,EAAU7W,EAAK8C,YACnB,GAAImV,GAASpB,GAAU,CACrB,GAAIuB,GAAmBvB,GACrB,OAAOA,EAET,GAAI8B,GAA2B9B,GAE7B,OADAA,EAAQ4hC,UAAU,GACX5hC,CAEX,CACI7W,EAAK8C,YACP1kB,EAAWC,aAAam6D,EAAUx4C,EAAK8C,aAEvC1kB,EAAWN,YAAY06D,EAE3B,CAYA,OAAOA,CACT,CAwmM2BE,CAAe9vD,EAASgzC,GAC7CwP,EAAMxiD,EAAQ4Z,cAAcg/B,cACxBmX,GAAwBtB,EAAmBv0C,cAC7CsoC,EAAIvG,SAASwS,EAAoB,GACjCjM,EAAItG,OAAOuS,EAAoB,KAE/BjM,EAAIvG,SAASwS,EAAoB,GACjCjM,EAAItG,OAAOuS,EAAoB,IAE1BjM,EA1BPiM,EAnkMc,SAAUuB,EAAW54C,EAAM47B,GAC7C,IALIid,EAMAC,EADM94C,EAAKwC,cACK5kB,cAAcg7D,GAClCE,EAAUj7D,aAAa,iBAAkB+9C,EAAS,SAAW,SAC7Dkd,EAAUj7D,aAAa,iBAAkB,OACzCi7D,EAAUh7D,cATN+6D,EAAK7hE,SAAS4G,cAAc,OAC7BC,aAAa,iBAAkB,KAC3Bg7D,IAQP,IAAIz6D,EAAa4hB,EAAK5hB,WAUtB,OATKw9C,EAOHx9C,EAAWC,aAAay6D,EAAW94C,GAN/BA,EAAK8C,YACP1kB,EAAWC,aAAay6D,EAAW94C,EAAK8C,aAExC1kB,EAAWN,YAAYg7D,GAKpBA,CACT,CAkjM2BC,CAAcZ,EAAYvvD,EAASgzC,GACxD,IAAI2T,EAAamI,GAAsB54C,EAAMlW,EAASgzC,GACtD9B,GAASud,GAAoBxtC,IAAI,MAAO0lC,EAAWprD,KACnD,IAAIo0D,EAAQze,GAAS,6DAA6DjwB,IAAIlU,GAAS,CAAC,EAAG45C,IAAazT,SAASh9B,GAAM,GAyBjI,OAxBEm5C,EAAgBhiC,IAAI,CAClBsiC,MAAOA,EACP3vD,QAASA,EACTgzC,OAAQA,IAENA,GACF9B,GAASye,GAAOhc,SAAS,2BAoC7Byb,EAAiBvlC,GAAMJ,aAAY,WAC7BykB,IACFgD,GAAS,uBAAwBh7B,GAAM09B,YAAY,2BAEnD1C,GAAS,uBAAwBh7B,GAAMy9B,SAAS,0BAEpD,GAAG,MAvCD6O,EAAMxiD,EAAQ4Z,cAAcg/B,eACxBqD,SAASwS,EAAoB,GACjCjM,EAAItG,OAAOuS,EAAoB,GAa1BjM,CACT,EAuCEpO,KAAMA,EACNgc,OANW,WACX,MAAO,sOACT,EAKEC,WAhBe,WACfhB,EAAgBrb,IAAG,SAAU0b,GAC3B,IAAI/I,EAAamI,GAAsB54C,EAAMw5C,EAAW1vD,QAAS0vD,EAAW1c,QAC5E9B,GAASwe,EAAWC,OAAO1uC,IAAIlU,GAAS,CAAC,EAAG45C,GAC9C,GACF,EAYEviB,QAXY,WACZ,OAAOva,GAAMQ,cAAc+kC,EAC7B,EAWF,EACIkB,GAA0B,WAC5B,OAAO5B,GAAUj+C,QAAUi+C,GAAUn+C,UAAYm+C,GAAU/9C,WAC7D,EACIo/C,GAA0B,SAAU34C,GACtC,OAAOu3C,GAAyBv3C,IAASw3C,GAAUx3C,EACrD,EACIm5C,GAAoB,SAAUn5C,GAChC,OAAO24C,GAAwB34C,IAAS6H,GAAU7H,IAASk5C,IAC7D,EAEIE,GAA2B7wC,GAC3B8wC,GAAU5wC,GACV6wC,GAAchyC,GAAiB,UAAW,kDAC1CiyC,GAAmBnhC,GACnBohC,GAAwBthC,GACxBuhC,GAAcvyC,GACdwyC,GAAqB9/B,GACrB+/B,GAAa,SAAUjN,GACzB,OAAOA,EAAY,CACrB,EACIkN,GAAc,SAAUlN,GAC1B,OAAOA,EAAY,CACrB,EACImN,GAAsB,SAAUn6C,EAAM8W,GAExC,IADA,IAAIxW,EACGA,EAAON,EAAK8W,IACjB,IAAKgjC,GAAsBx5C,GACzB,OAAOA,EAGX,OAAO,IACT,EACI85C,GAAa,SAAU95C,EAAM0sC,EAAWqN,EAAa1jC,EAAUG,GACjE,IAAIuE,EAAS,IAAI5E,GAAcnW,EAAMqW,GACjC2jC,EAAwBZ,GAAyBp5C,IAASw5C,GAAsBx5C,GACpF,GAAI45C,GAAYlN,GAAY,CAC1B,GAAIsN,GAEED,EADJ/5C,EAAO65C,GAAoB9+B,EAAOzE,KAAKzlB,KAAKkqB,IAAS,IAEnD,OAAO/a,EAGX,KAAOA,EAAO65C,GAAoB9+B,EAAOzE,KAAKzlB,KAAKkqB,GAASvE,IAC1D,GAAIujC,EAAY/5C,GACd,OAAOA,CAGb,CACA,GAAI25C,GAAWjN,GAAY,CACzB,GAAIsN,GAEED,EADJ/5C,EAAO65C,GAAoB9+B,EAAOj1B,KAAK+K,KAAKkqB,IAAS,IAEnD,OAAO/a,EAGX,KAAOA,EAAO65C,GAAoB9+B,EAAOj1B,KAAK+K,KAAKkqB,GAASvE,IAC1D,GAAIujC,EAAY/5C,GACd,OAAOA,CAGb,CACA,OAAO,IACT,EACIi6C,GAAmB,SAAUj6C,EAAMqW,GACrC,KAAOrW,GAAQA,IAASqW,GAAU,CAChC,GAAIijC,GAAYt5C,GACd,OAAOA,EAETA,EAAOA,EAAK5hB,UACd,CACA,OAAO,IACT,EACI87D,GAAgB,SAAUC,EAAgBC,EAAgB/jC,GAC5D,OAAO4jC,GAAiBE,EAAez8D,YAAa24B,KAAc4jC,GAAiBG,EAAe18D,YAAa24B,EACjH,EACIgkC,GAA+B,SAAUC,EAAgB9J,GAC3D,IAAKA,EACH,OAAO,KAET,IAAI9yD,EAAY8yD,EAAc9yD,YAC1B66B,EAASi4B,EAAcj4B,SAC3B,OAAKkhC,GAAY/7D,GAGVA,EAAU6iB,WAAWgY,EAAS+hC,GAF5B,IAGX,EACIC,GAAc,SAAU3e,EAAQ57B,GAClC,IAAI5C,EAAQ4C,EAAKwC,cAAcg/B,cAQ/B,OAPI5F,GACFx+B,EAAMo9C,eAAex6C,GACrB5C,EAAMq9C,aAAaz6C,KAEnB5C,EAAMs9C,cAAc16C,GACpB5C,EAAM+yC,YAAYnwC,IAEb5C,CACT,EACIu9C,GAAqB,SAAU77C,EAAM87C,EAAOC,GAC9C,OAAOZ,GAAiBW,EAAO97C,KAAUm7C,GAAiBY,EAAO/7C,EACnE,EACIg8C,GAAO,SAAUl2D,EAAMka,EAAMkB,GAE/B,IADA,IAAI4W,EAAchyB,EAAO,kBAAoB,cACtCob,GAAQA,IAASlB,GAAM,CAC5B,IAAI+X,EAAU7W,EAAK4W,GAInB,GAHI2iC,GAAiB1iC,KACnBA,EAAUA,EAAQD,IAEhBwiC,GAAyBviC,IAAYwiC,GAAQxiC,GAAU,CACzD,GAAI8jC,GAAmB77C,EAAM+X,EAAS7W,GACpC,OAAO6W,EAET,KACF,CACA,GAAI6iC,GAAmB7iC,GACrB,MAEF7W,EAAOA,EAAK5hB,UACd,CACA,OAAO,IACT,EACI28D,GAAW1rD,EAAMkrD,IAAa,GAC9BS,GAAU3rD,EAAMkrD,IAAa,GAC7BU,GAAiB,SAAUvO,EAAW5tC,EAAM1B,GAC9C,IAAI4C,EACAk7C,EAAW7rD,EAAMyrD,IAAM,EAAMh8C,GAC7Bq8C,EAAY9rD,EAAMyrD,IAAM,EAAOh8C,GAC/BphB,EAAY0f,EAAM+b,eAClBZ,EAASnb,EAAM+nC,YACnB,GAAIjtB,GAAwBx6B,GAAY,CACjC+7D,GAAY/7D,KACfA,EAAYA,EAAUU,YAExB,IAAIg9D,EAAa19D,EAAU9G,aAAa,kBACxC,GAAmB,WAAfwkE,IACFp7C,EAAOtiB,EAAUolB,YACbq2C,GAAkBn5C,IACpB,OAAO+6C,GAAS/6C,GAGpB,GAAmB,UAAfo7C,IACFp7C,EAAOtiB,EAAUmlB,gBACbs2C,GAAkBn5C,IACpB,OAAOg7C,GAAQh7C,EAGrB,CACA,IAAK5C,EAAM82C,UACT,OAAO92C,EAET,GAAI4K,GAAStqB,GAAY,CACvB,GAAI67D,GAAiB77D,GAAY,CAC/B,GAAkB,IAAdgvD,EAAiB,CAEnB,GADA1sC,EAAOm7C,EAAUz9D,GAEf,OAAOq9D,GAAS/6C,GAGlB,GADAA,EAAOk7C,EAASx9D,GAEd,OAAOs9D,GAAQh7C,EAEnB,CACA,IAAmB,IAAf0sC,EAAkB,CAEpB,GADA1sC,EAAOk7C,EAASx9D,GAEd,OAAOs9D,GAAQh7C,GAGjB,GADAA,EAAOm7C,EAAUz9D,GAEf,OAAOq9D,GAAS/6C,EAEpB,CACA,OAAO5C,CACT,CACA,GAAIwb,GAAyBl7B,IAAc66B,GAAU76B,EAAUsvB,KAAKz3B,OAAS,EAC3E,OAAkB,IAAdm3D,IACF1sC,EAAOm7C,EAAUz9D,IAERq9D,GAAS/6C,GAGb5C,EAET,GAAIub,GAA2Bj7B,IAAc66B,GAAU,EACrD,OAAmB,IAAfm0B,IACF1sC,EAAOk7C,EAASx9D,IAEPs9D,GAAQh7C,GAGZ5C,EAET,GAAImb,IAAW76B,EAAUsvB,KAAKz3B,OAE5B,OADAyqB,EAAOm7C,EAAUz9D,IAERq9D,GAAS/6C,GAEX5C,EAET,GAAe,IAAXmb,EAEF,OADAvY,EAAOk7C,EAASx9D,IAEPs9D,GAAQh7C,GAEV5C,CAEX,CACA,OAAOA,CACT,EACIi+C,GAAoB,SAAUplB,EAASua,GACzC,OAAOl/C,EAASC,KAAK8oD,GAA6BpkB,EAAU,GAAK,EAAGua,IAAgBn0D,OAAO+8D,GAC7F,EACIkC,GAA6B,SAAU5O,EAAW5tC,EAAM1B,GAC1D,IAAIm+C,EAAkBN,GAAevO,EAAW5tC,EAAM1B,GACtD,OAAmB,IAAfsvC,EACK6D,GAAcU,eAAesK,GAE/BhL,GAAcW,aAAaqK,EACpC,EACIC,GAAyB,SAAU53D,GACrC,OAAO0N,EAASC,KAAK3N,EAAIotD,WAAW90D,IAAIgkB,GAC1C,EAIIu7C,GAAyB,SAAUC,EAAQlL,GAC7C,KAAOA,EAAgBkL,EAAOlL,IAC5B,GAAIA,EAAcM,YAChB,OAAON,EAGX,OAAOA,CACT,EACImL,GAAwB,SAAUpqD,EAAMwE,GAC1C,IAAI6lD,EAAc1B,GAAc3oD,EAAMwE,GACtC,QAAK6lD,IAAexzC,GAAO7W,EAAKy/C,aAGzB4K,CACT,GAGC,SAAUnK,GACTA,EAAWA,EAAsB,WAAK,GAAK,YAC3CA,EAAWA,EAAqB,SAAI,GAAK,UAC3C,CAHA,CAGEA,KAAeA,GAAa,CAAC,IAC/B,IA0cmBoK,GA6mBO59C,GAOpB69C,GA9jCFC,GAA2BxzC,GAC3ByzC,GAAWh0C,GACXi0C,GAAY/0C,GACZg1C,GAAS9zC,GACT+zC,GAAmBviC,GACnBwiC,GAjyMa,SAAUp8C,GACzB,OAAOyZ,GAAezZ,IATW,SAAUA,GAC3C,QAAK6Z,GAA4B7Z,KAKnB,IAFPvN,EAAMlB,GAAKyO,EAAKiZ,qBAAqB,OAAO,SAAU7I,EAAQjG,GACnE,OAAOiG,GAAUgJ,GAAwBjP,EAC3C,IAAG,EACL,CAEiCkyC,CAA6Br8C,EAC9D,EAgyMIs8C,GAA2BviC,GAS3BwiC,GAAc,SAAU7+D,EAAW66B,GACrC,OAAI76B,EAAU4iB,iBAAmBiY,EAAS76B,EAAU6iB,WAAWhrB,OACtDmI,EAAU6iB,WAAWgY,GAEvB,IACT,EACIikC,GAA4B,SAAU9P,EAAW1sC,GACnD,GAAI25C,GAAWjN,GAAY,CACzB,GAAIyP,GAAiBn8C,EAAK6C,mBAAqBm5C,GAASh8C,EAAK6C,iBAC3D,OAAO0tC,GAAc3U,OAAO57B,GAE9B,GAAIg8C,GAASh8C,GACX,OAAOuwC,GAAcvwC,EAAM,EAE/B,CACA,GAAI45C,GAAYlN,GAAY,CAC1B,GAAIyP,GAAiBn8C,EAAK8C,eAAiBk5C,GAASh8C,EAAK8C,aACvD,OAAOytC,GAAc1U,MAAM77B,GAE7B,GAAIg8C,GAASh8C,GACX,OAAOuwC,GAAcvwC,EAAMA,EAAKgN,KAAKz3B,OAEzC,CACA,OAAIqkE,GAAYlN,GACVwP,GAAOl8C,GACFuwC,GAAc3U,OAAO57B,GAEvBuwC,GAAc1U,MAAM77B,GAEtBuwC,GAAc3U,OAAO57B,EAC9B,EAaIy8C,GAAsB,SAAU/P,EAAWgQ,EAAU59C,GACvD,IAAIkB,EACA28C,EACAC,EACApM,EACJ,IAAKyL,GAAUn9C,KAAU49C,EACvB,OAAO,KAET,GAAIA,EAAS3L,QAAQR,GAAc1U,MAAM/8B,KAAUA,EAAKuE,WAEtD,GADAmtC,EAAgBD,GAAc1U,MAAM/8B,EAAKuE,WACrCu2C,GAAYlN,IAAcyP,GAAiBr9C,EAAKuE,YAAc44C,GAAUn9C,EAAKuE,WAC/E,OAAO64C,GAAOp9C,EAAKuE,WAAaktC,GAAc3U,OAAO98B,EAAKuE,WAAamtC,OAGzEA,EAAgBkM,EAElB,IAAIh/D,EAAY8yD,EAAc9yD,YAC1B66B,EAASi4B,EAAcj4B,SAC3B,GAAIyjC,GAASt+D,GAAY,CACvB,GAAIk8D,GAAYlN,IAAcn0B,EAAS,EACrC,OAAOg4B,GAAc7yD,IAAa66B,GAEpC,GAAIohC,GAAWjN,IAAcn0B,EAAS76B,EAAUnI,OAC9C,OAAOg7D,GAAc7yD,IAAa66B,GAEpCvY,EAAOtiB,CACT,KAAO,CACL,GAAIk8D,GAAYlN,IAAcn0B,EAAS,IACrCokC,EAAWJ,GAAY7+D,EAAW66B,EAAS,GACvC4jC,GAAiBQ,IACnB,OAAKP,GAASO,KACZC,EAAY9C,GAAW6C,EAAUjQ,EAAW4P,GAA0BK,IAEhEX,GAASY,GACJrM,GAAcqM,EAAWA,EAAU5vC,KAAKz3B,QAE1Cg7D,GAAc1U,MAAM+gB,GAG3BZ,GAASW,GACJpM,GAAcoM,EAAUA,EAAS3vC,KAAKz3B,QAExCg7D,GAAc3U,OAAO+gB,GAGhC,GAAIhD,GAAWjN,IAAcn0B,EAAS76B,EAAU6iB,WAAWhrB,SACzDonE,EAAWJ,GAAY7+D,EAAW66B,GAC9B4jC,GAAiBQ,IACnB,OAAIT,GAAOS,GA5DK,SAAU79C,EAAM69C,GACtC,IAAI75C,EAAc65C,EAAS75C,YAC3B,OAAIA,GAAeq5C,GAAiBr5C,GAC9Bk5C,GAASl5C,GACJytC,GAAcztC,EAAa,GAE3BytC,GAAc3U,OAAO94B,GAGvB25C,GAAoBhL,GAAWoL,SAAUtM,GAAc1U,MAAM8gB,GAAW79C,EAEnF,CAkDiBg+C,CAAkBh+C,EAAM69C,IAE5BP,GAASO,KACZC,EAAY9C,GAAW6C,EAAUjQ,EAAW4P,GAA0BK,IAEhEX,GAASY,GACJrM,GAAcqM,EAAW,GAE3BrM,GAAc3U,OAAOghB,GAG5BZ,GAASW,GACJpM,GAAcoM,EAAU,GAE1BpM,GAAc1U,MAAM8gB,GAG/B38C,EAAO28C,GAAsBnM,EAAcQ,SAC7C,CACA,IAAI2I,GAAWjN,IAAc8D,EAAc93B,WAAakhC,GAAYlN,IAAc8D,EAAch4B,eAC9FxY,EAAO85C,GAAW95C,EAAM0sC,EAAW/8C,EAAQmP,GAAM,GAC7Cw9C,GAAyBt8C,EAAMlB,IACjC,OAAO09C,GAA0B9P,EAAW1sC,GAGhD28C,EAAW7C,GAAW95C,EAAM0sC,EAAW4P,GAA0Bx9C,GACjE,IAAIi+C,EAA8BrnD,GAAOpD,EA9HxB,SAAU0N,EAAMlB,GAEjC,IADA,IAAImmB,EAAU,GACPjlB,GAAQA,IAASlB,GACtBmmB,EAAQznC,KAAKwiB,GACbA,EAAOA,EAAK5hB,WAEd,OAAO6mC,CACT,CAuHoD+3B,CAAat/D,EAAWohB,GAAOi9C,KACjF,OAAIgB,GAAiCJ,GAAaI,EAA4B/7D,SAAS27D,GAQnFA,EACKH,GAA0B9P,EAAWiQ,GAEvC,KATHnM,EADEmJ,GAAWjN,GACG6D,GAAc1U,MAAMkhB,GAEpBxM,GAAc3U,OAAOmhB,EAQ3C,EACIE,GAAc,SAAUn+C,GAC1B,MAAO,CACLhZ,KAAM,SAAU0qD,GACd,OAAOiM,GAAoBhL,GAAWoL,SAAUrM,EAAe1xC,EACjE,EACAwX,KAAM,SAAUk6B,GACd,OAAOiM,GAAoBhL,GAAWyL,UAAW1M,EAAe1xC,EAClE,EAEJ,EASIq+C,GAAkB,SAAUC,GAC9B,OAAI7M,GAAcgB,eAAe6L,GACF,IAAtBA,EAAS7kC,SAETqB,GAAmBwjC,EAASpM,UAEvC,EACIqM,GAAe,SAAUD,GAC3B,GAAI7M,GAAcgB,eAAe6L,GAAW,CAC1C,IAAI1/D,EAAY0/D,EAAS1/D,YACzB,OAAO0/D,EAAS7kC,WAAa76B,EAAUsvB,KAAKz3B,MAC9C,CACE,OAAOqkC,GAAmBwjC,EAASpM,SAAQ,GAE/C,EACIsM,GAA2B,SAAU/rD,EAAMwE,GAC7C,OAAQw6C,GAAcgB,eAAehgD,KAAUg/C,GAAcgB,eAAex7C,IAAOxE,EAAKy/C,YAAcj7C,EAAGi7C,SAAQ,EACnH,EAWIuM,GAAe,SAAUtnB,EAASn3B,EAAMlb,GAC1C,IAAIm3B,EAASkiC,GAAYn+C,GACzB,OAAOxN,EAASC,KAAK0kC,EAAUlb,EAAOj1B,KAAKlC,GAAOm3B,EAAOzE,KAAK1yB,GAChE,EACI45D,GAAW,SAAUvnB,EAASn3B,EAAMvN,GACtC,OAAOgsD,GAAatnB,EAASn3B,EAAMvN,GAAMV,MAAK,SAAUkF,GACtD,OAAImkD,GAAc3oD,EAAMwE,EAAI+I,IAbP,SAAUm3B,EAAS1kC,EAAMwE,GAChD,OAAIkgC,GACMqnB,GAAyB/rD,EAAMwE,KALpBqnD,EAKmC7rD,KAJhDg/C,GAAcgB,eAAe6L,IAAah1C,GAAOg1C,EAASpM,cAIDqM,GAAa9rD,IAAS4rD,GAAgBpnD,IAE7FunD,GAAyBvnD,EAAIxE,IAAS4rD,GAAgB5rD,IAAS8rD,GAAatnD,GAP3E,IAAUqnD,CASvB,CAOyCK,CAAmBxnB,EAAS1kC,EAAMwE,GAC9DwnD,GAAatnB,EAASn3B,EAAM/I,GAE5BzE,EAASJ,KAAK6E,EAEzB,GACF,EACI2nD,GAAiB,SAAUznB,EAASn3B,EAAMvN,EAAMosD,GAClD,OAAOH,GAASvnB,EAASn3B,EAAMvN,GAAMV,MAAK,SAAUjN,GAClD,OAAO+5D,EAAa/5D,GAAO85D,GAAeznB,EAASn3B,EAAMlb,EAAK+5D,GAAgBrsD,EAASJ,KAAKtN,EAC9F,GACF,EACIg6D,GAAa,SAAU3nB,EAASrtC,GAClC,IAlD2BoX,EAkDvBoW,EAAY6f,EAAUrtC,EAAQwa,WAAaxa,EAAQya,UACvD,OAAI2E,GAASoO,GACJ9kB,EAASJ,KAAKq/C,GAAcn6B,EAAW6f,EAAU,EAAI7f,EAAUpJ,KAAKz3B,SAClE6gC,EACLwD,GAAmBxD,GACd9kB,EAASJ,KAAK+kC,EAAUsa,GAAc3U,OAAOxlB,GAtDjDhO,GADoBpI,EAuDuDoW,GAtD5Dm6B,GAAc3U,OAAO57B,GAAQuwC,GAAc1U,MAAM77B,IALlD,SAAUi2B,EAASn3B,EAAM3U,GAC9C,IAAIizD,EAAWnnB,EAAUsa,GAAc3U,OAAOzxC,GAASomD,GAAc1U,MAAM1xC,GAC3E,OAAOozD,GAAatnB,EAASn3B,EAAMs+C,EACrC,CA0DaS,CAAiB5nB,EAASrtC,EAASwtB,GAGrC9kB,EAAS1B,MAEpB,EACIkuD,GAAezuD,EAAMkuD,IAAc,GACnCQ,GAAe1uD,EAAMkuD,IAAc,GACnCS,GAAkB3uD,EAAMuuD,IAAY,GACpCK,GAAiB5uD,EAAMuuD,IAAY,GAEnCM,GAAa,aACbC,GAAc,SAAUn+C,GAC1B,OAAOkH,GAAYlH,IAASA,EAAKrpB,KAAOunE,EAC1C,EACIE,GAA0B,SAAUlkE,EAAM8lB,GAC5C,KAAOA,GAAQA,IAAS9lB,GAAM,CAC5B,GAAI8lB,EAAKrpB,KAAOunE,GACd,OAAOl+C,EAETA,EAAOA,EAAK5hB,UACd,CACA,OAAO,IACT,EAcIigE,GAAiB,SAAU3K,GAC7B,OAAO11C,GAAMxJ,QAAQk/C,EAASvpD,MAChC,EAEIm0D,GAAW,SAAUr+C,EAAKD,GAI5B,OAHIkH,GAAYlH,IAASC,EAAI4hC,QAAQ7hC,KAAUA,EAAK3Y,YAAcuV,GAAIC,KACpEmD,EAAK3Y,UAAY,6BAEZ2Y,CACT,EAmBIu+C,GAAuB,SAAUv+C,EAAMorC,GACzC,OAAO6S,GAAej+C,GAAMjQ,KAAKL,GAAO,SAAU9L,GAGhD,OAFAwnD,EAAIvG,SAASjhD,EAAIlG,YAAakG,EAAI20B,UAClC6yB,EAAItG,OAAOlhD,EAAIlG,YAAakG,EAAI20B,WACzB,CACT,GACF,EACIimC,GAAyB,SAAU1/C,EAAMkB,EAAMorC,GACjD,SAXc,SAAUprC,GACxB,OAAgC,IAAzBA,EAAKM,eACd,CASMm+C,CAAUz+C,KAASo+C,GAAwBt/C,EAAMkB,KAjBtC,SAAUA,EAAMorC,GAC/B,IAAIoN,EAAWx4C,EAAKwC,cAAc9B,eAAekX,IACjD5X,EAAKliB,YAAY06D,GACjBpN,EAAIvG,SAAS2T,EAAU,GACvBpN,EAAItG,OAAO0T,EAAU,EACvB,CAaIkG,CAAW1+C,EAAMorC,GACV,GAIX,EACIuT,GAAc,SAAU1+C,EAAK9V,EAAOupD,EAAUtI,GAChD,IACI91D,EAAG0qB,EAAMuY,EAAQtV,EADjBiwC,EAAQQ,EAASvpD,EAAQ,QAAU,OAEnC2U,EAAOmB,EAAI8+B,UACf,GAAImU,EAAO,CAET,IADA36B,EAAS26B,EAAM,GACVlzC,EAAOlB,EAAMxpB,EAAI49D,EAAM39D,OAAS,EAAGD,GAAK,EAAGA,IAAK,CAEnD,GADA2tB,EAAWjD,EAAKO,WACZi+C,GAAuB1/C,EAAMkB,EAAMorC,GACrC,OAAO,EAET,GAAI8H,EAAM59D,GAAK2tB,EAAS1tB,OAAS,EAC/B,QAAIipE,GAAuB1/C,EAAMkB,EAAMorC,IAGhCmT,GAAqBv+C,EAAMorC,GAEpCprC,EAAOiD,EAASiwC,EAAM59D,GACxB,CACsB,IAAlB0qB,EAAKe,WACPwX,EAAS3R,KAAK8mC,IAAIwF,EAAM,GAAIlzC,EAAKs1B,UAAU//C,SAEvB,IAAlByqB,EAAKe,WACPwX,EAAS3R,KAAK8mC,IAAIwF,EAAM,GAAIlzC,EAAKO,WAAWhrB,SAE1C4U,EACFihD,EAAIvG,SAAS7kC,EAAMuY,GAEnB6yB,EAAItG,OAAO9kC,EAAMuY,EAErB,CACA,OAAO,CACT,EACIqmC,GAAkB,SAAU5+C,GAC9B,OAAOgI,GAAShI,IAASA,EAAKgN,KAAKz3B,OAAS,CAC9C,EACIspE,GAAkB,SAAU5+C,EAAKonB,EAAQqsB,GAC3C,IAAkD1zC,EAAMs2B,EAAKxwC,EAAMwwB,EAE/D54B,EAAW66B,EAFXpU,EAASlE,EAAIiN,IAAIwmC,EAAS/8D,GAAK,IAAM0wC,GACrCktB,EAAOb,EAASa,KAEpB,GAAIpwC,EAAQ,CAwCV,GAvCAnE,EAAOmE,EAAO/lB,WACC,UAAXipC,GACGktB,EAGCpwC,EAAO7D,iBACTN,EAAOmE,EAAOf,WACdkzB,EAAM,GACGsoB,GAAgBz6C,EAAOrB,cAChC9C,EAAOmE,EAAOrB,YACdwzB,EAAM,GACGsoB,GAAgBz6C,EAAOtB,kBAChC7C,EAAOmE,EAAOtB,gBACdyzB,EAAMnyB,EAAOtB,gBAAgBmK,KAAKz3B,SAElCyqB,EAAOmE,EAAO/lB,WACdk4C,EAAMr2B,EAAIk2B,UAAUhyB,GAAU,GAbhCmyB,EAAMr2B,EAAIk2B,UAAUhyB,GAgBtBzmB,EAAYsiB,EACZuY,EAAS+d,IAEJie,EAGCpwC,EAAO7D,iBACTN,EAAOmE,EAAOf,WACdkzB,EAAM,GACGsoB,GAAgBz6C,EAAOtB,kBAChC7C,EAAOmE,EAAOtB,gBACdyzB,EAAMnyB,EAAOtB,gBAAgBmK,KAAKz3B,SAElCyqB,EAAOmE,EAAO/lB,WACdk4C,EAAMr2B,EAAIk2B,UAAUhyB,IAVtBmyB,EAAMr2B,EAAIk2B,UAAUhyB,GAatBzmB,EAAYsiB,EACZuY,EAAS+d,IAENie,EAAM,CAQT,IAPAj+B,EAAOnS,EAAOtB,gBACd/c,EAAOqe,EAAOrB,YACd9E,GAAMpN,KAAKoN,GAAMM,KAAK6F,EAAO5D,aAAa,SAAUP,GAC9CgI,GAAShI,KACXA,EAAKs1B,UAAYt1B,EAAKs1B,UAAUtyC,QAAQ,UAAW,IAEvD,IACOmhB,EAASlE,EAAIiN,IAAIwmC,EAAS/8D,GAAK,IAAM0wC,IAC1CpnB,EAAI7c,OAAO+gB,GAAQ,GAEjBmS,GAAQxwB,GAAQwwB,EAAKvV,WAAajb,EAAKib,UAAYiH,GAASsO,KAAU1Z,GAAIhE,QAC5E09B,EAAMhgB,EAAKgf,UAAU//C,OACrB+gC,EAAKwoC,WAAWh5D,EAAKwvC,WACrBr1B,EAAI7c,OAAO0C,GACXpI,EAAY44B,EACZiC,EAAS+d,EAEb,CACA,OAAOhlC,EAASJ,KAAKq/C,GAAc7yD,EAAW66B,GAChD,CACE,OAAOjnB,EAAS1B,MAEpB,EA4CImvD,GAAgB,SAAU1T,EAAWnsD,EAAMm/C,GAC7C,OAtoCkB,SAAUgN,EAAWnsD,EAAMm/C,GAC7C,OAAa,IAATn/C,EACKs0D,GAAkBz7B,GAAQsmB,EAAYgN,GAC3B,IAATnsD,EAlDU,SAAUmsD,GAC/B,IAAID,EAAMC,EAAUC,SACpB,MAAO,CACLnhD,MAAOmoD,GAASjH,EAAUprC,IAAI8+B,UAAWwR,GAAcU,eAAe7F,IACtEwI,IAAKtB,GAASjH,EAAUprC,IAAI8+B,UAAWwR,GAAcW,aAAa9F,IAEtE,CA6CW4T,CAAiB3T,GACfnsD,EA7CU,SAAUmsD,GAC/B,MAAO,CAAED,IAAKC,EAAUC,SAC1B,CA4CW2T,CAAiB5T,GAEjB4I,GAAsB5I,GAAW,EAE5C,CA4nCS6T,CAAc7T,EAAWnsD,EAAMm/C,EACxC,EACIiW,GAAiB,SAAUjJ,EAAWqI,IArB1B,SAAUrI,EAAWqI,GACnC,IAAIzzC,EAAMorC,EAAUprC,IACpB,GAAIyzC,EAAU,CACZ,GAAI2K,GAAe3K,GACjB,OA7Ba,SAAUzzC,EAAKyzC,GAChC,IAAItI,EAAMnrC,EAAIshC,YACd,OAAIod,GAAY1+C,GAAK,EAAMyzC,EAAUtI,IAAQuT,GAAY1+C,GAAK,EAAOyzC,EAAUtI,GACtE95C,EAASJ,KAAKk6C,GAEd95C,EAAS1B,MAEpB,CAsBauvD,CAAal/C,EAAKyzC,GACpB,GA7LgB,SAAUA,GACnC,OAAO5lD,EAAW4lD,EAASvpD,MAC7B,CA2Lei1D,CAAqB1L,GAC9B,OAAOpiD,EAASJ,KAxKa,SAAU+O,EAAKyzC,GAChD,IAAI9vD,EACAwnD,EAAMnrC,EAAIshC,YAKd,OAJA39C,EAAM8uD,GAAUzyC,EAAI8+B,UAAW2U,EAASvpD,OACxCihD,EAAIvG,SAASjhD,EAAIlG,YAAakG,EAAI20B,UAClC30B,EAAM8uD,GAAUzyC,EAAI8+B,UAAW2U,EAASE,KACxCxI,EAAItG,OAAOlhD,EAAIlG,YAAakG,EAAI20B,UACzB6yB,CACT,CAgK2BiU,CAA6Bp/C,EAAKyzC,IAClD,GAzLQ,SAAUA,GAC3B,OAAOp/C,GAAMo/C,EAAU,KACzB,CAuLe4L,CAAa5L,GACtB,OAzBU,SAAUzzC,EAAKyzC,GAC7B,IAAIgJ,EAAWmC,GAAgB5+C,EAAK,QAASyzC,GACzC6L,EAASV,GAAgB5+C,EAAK,MAAOyzC,GACzC,OAAO7qC,GAAM6zC,EAAU6C,EAAO7uD,GAAGgsD,IAAW,SAAU8C,EAAMC,GAC1D,IAAIrU,EAAMnrC,EAAIshC,YAGd,OAFA6J,EAAIvG,SAASyZ,GAASr+C,EAAKu/C,EAAK9hE,aAAc8hE,EAAKjnC,UACnD6yB,EAAItG,OAAOwZ,GAASr+C,EAAKw/C,EAAK/hE,aAAc+hE,EAAKlnC,UAC1C6yB,CACT,GACF,CAgBasU,CAAUz/C,EAAKyzC,GACjB,GAxLW,SAAUA,GAC9B,OAAOp/C,GAAMo/C,EAAU,OACzB,CAsLeiM,CAAgBjM,GACzB,OAjBa,SAAUzzC,EAAKyzC,GAChC,OAAOpiD,EAASC,KAAK0O,EAAI64B,OAAO4a,EAASj+D,MAAMi+D,EAAS13D,QAAQE,KAAI,SAAUiuB,GAC5E,IAAIihC,EAAMnrC,EAAIshC,YAEd,OADA6J,EAAIwU,WAAWz1C,GACRihC,CACT,GACF,CAWayU,CAAa5/C,EAAKyzC,GACpB,GAhMW,SAAUA,GAC9B,OAAOp/C,GAAMo/C,EAAU,MACzB,CA8LeoM,CAAgBpM,GACzB,OAAOpiD,EAASJ,KAAKwiD,EAAStI,IAElC,CACA,OAAO95C,EAAS1B,MAClB,EAMEmwD,CAAU1U,EAAWqI,GAAU9iD,MAAK,SAAUw6C,GAC5CC,EAAU2U,OAAO5U,EACnB,GACF,EACI6U,GAAmB,SAAUjgD,GAC/B,OAAOkH,GAAYlH,IAA0B,SAAjBA,EAAKpf,SAA6D,aAAvCof,EAAKppB,aAAa,gBAC3E,EAOIspE,IALerE,GAKHlkC,GAJP,SAAUwoC,GACf,OAAOtE,KAAasE,CACtB,GAGEC,GAAe,SAAU9jC,GAC3B,MAAe,KAARA,IAAgD,IAAlC,cAAgBhgC,QAAQggC,EAC/C,EACI+jC,GAAY,SAAU/jC,GACxB,OAAQ8jC,GAAa9jC,KAAS4jC,GAAO5jC,EACvC,EAEIgkC,GAAS,SAAUtgD,GACrB,QAASA,EAAKe,QAChB,EAIIw/C,GAAY,SAAUtgD,EAAKorC,EAAWD,GACxC,IAAI7yB,EAAS6yB,EAAIjG,YACbznD,EAAY0tD,EAAIjyB,eACpB,IAAIz7B,IAAc0tD,EAAIhG,eANJ,SAAUplC,GAC5B,OAAOA,GAAQ,UAAUjmB,KAAKimB,EAAKiC,SACrC,CAKQu+C,CAAc9iE,EAAU6iB,WAAWgY,MAIrCrR,GAAYxpB,GAAY,CAC1B,IAAIusB,EAAQvsB,EAAU6iB,WAClBwa,OAAS,EACTxC,EAAStO,EAAM10B,QACjBmI,EAAYusB,EAAMsO,GAClBwC,EAAS,IAAI5E,GAAcz4B,EAAWuiB,EAAIoiC,UAAU3kD,EAAWuiB,EAAI4hC,YAEnEnkD,EAAYusB,EAAMA,EAAM10B,OAAS,IACjCwlC,EAAS,IAAI5E,GAAcz4B,EAAWuiB,EAAIoiC,UAAU3kD,EAAWuiB,EAAI4hC,WAC5D/7C,MAAK,IAEd,IAAK,IAAIka,EAAO+a,EAAO9hB,UAAW+G,EAAMA,EAAO+a,EAAOj1B,OACpD,GAAIkiB,GAAShI,KAAUygD,GAAmBzgD,GAGxC,OAFAorC,EAAIvG,SAAS7kC,EAAM,QACnBqrC,EAAU2U,OAAO5U,EAIvB,CACF,EACIsV,GAA0B,SAAU1gD,EAAMla,EAAM66D,GAClD,GAAI3gD,EAAM,CACR,IAAI4gD,EAAW96D,EAAO,cAAgB,kBACtC,IAAKka,EAAO2gD,EAAM3gD,EAAOA,EAAK4gD,GAAW5gD,EAAMA,EAAOA,EAAK4gD,GACzD,GAAI15C,GAAYlH,KAAUygD,GAAmBzgD,GAC3C,OAAOA,CAGb,CACF,EACI6gD,GAAgB,SAAU/tC,EAAQr9B,GAIpC,OAHI6qE,GAAO7qE,KACTA,EAAOA,EAAKwsB,YAEL6Q,EAAOwL,OAAOC,uBAAuB9oC,EAAK2G,cACrD,EACI8pC,GAAU,SAAU46B,EAAIthD,EAAQ4K,GAClC,OAAO02C,EAAGxiC,OAAO2H,aAAazmB,EAAQ4K,EACxC,EACIq2C,GAAqB,SAAUzgD,EAAM+gD,GAIvC,QAHoB,IAAhBA,IACFA,GAAc,GAEZ1yD,EAAc2R,IAASgI,GAAShI,GAAO,CACzC,IAAIgN,EAAO+zC,EAAc/gD,EAAKgN,KAAKhqB,QAAQ,KAAM,KAAUgd,EAAKgN,KAChE,OAAOkN,GAAiBlN,EAC1B,CACE,OAAO,CAEX,EAIIg0C,GAAc,SAAUxnE,EAAOynE,GAQjC,OAPI3yD,EAAW9U,GACbA,EAAQA,EAAMynE,GACL5yD,EAAc4yD,KACvBznE,EAAQA,EAAMwJ,QAAQ,WAAW,SAAUyU,EAAKhiB,GAC9C,OAAOwrE,EAAKxrE,IAASgiB,CACvB,KAEKje,CACT,EACI0nE,GAAS,SAAUC,EAAMn5B,GAK3B,OAHAA,EAAOA,GAAQ,GACfm5B,EAAO,KAFPA,EAAOA,GAAQ,IAEGl/C,UAAYk/C,GAC9Bn5B,EAAO,IAAMA,EAAK/lB,UAAY+lB,GACvBm5B,EAAK/kE,gBAAkB4rC,EAAK5rC,aACrC,EACIglE,GAAsB,SAAUnhD,EAAKzmB,EAAO/D,GAU9C,MATa,UAATA,GAA6B,oBAATA,IACtB+D,EAAQymB,EAAImmB,MAAM5sC,IAEP,eAAT/D,GAAmC,MAAV+D,IAC3BA,EAAQ,QAEG,eAAT/D,IACF+D,EAAQA,EAAMwJ,QAAQ,UAAW,IAAIA,QAAQ,QAAS,MAEjD,GAAKxJ,CACd,EACI2mD,GAAW,SAAUlgC,EAAKD,EAAMvqB,GAClC,OAAO2rE,GAAoBnhD,EAAKA,EAAIkgC,SAASngC,EAAMvqB,GAAOA,EAC5D,EACI4rE,GAAoB,SAAUphD,EAAKD,GACrC,IAAIshD,EAKJ,OAJArhD,EAAIoiC,UAAUriC,GAAM,SAAUhQ,GAE5B,OADAsxD,EAAarhD,EAAIkgC,SAASnwC,EAAG,qBACO,SAAfsxD,CACvB,IACOA,CACT,EACIC,GAAe,SAAUthD,EAAKD,EAAMc,GACtC,OAAOb,EAAIugC,WAAWxgC,EAAMc,EAAUb,EAAI8+B,UAC5C,EA0CIyiB,GAAgB,SAAU/6D,GAC5B,OAAO8N,GAAkB9N,EAAQ,QACnC,EACIg7D,GAAmB,SAAUh7D,GAC/B,OAAO8N,GAAkB9N,EAAQ,WACnC,EACIi7D,GAAiB,SAAUj7D,GAC7B,OAAO8N,GAAkB9N,EAAQ,SACnC,EAIIk7D,GAAyB,SAAUl7D,GACrC,OAAOg7D,GAAiBh7D,KAA6B,IAAlBA,EAAOm7D,SAAqBF,GAAej7D,EAChF,EAEIo7D,GAAiB5B,GACjB6B,GAAeP,GACfQ,GAAmBtB,GACnBuB,GAAcnB,GAIdoB,GAA4B,SAAUhiD,EAAKD,GAE7C,IADA,IAAIR,EAASQ,EACNR,GAAQ,CACb,GAAI0H,GAAY1H,IAAWS,EAAIyhC,mBAAmBliC,GAChD,MAA0C,UAAnCS,EAAIyhC,mBAAmBliC,GAAsBA,EAASQ,EAE/DR,EAASA,EAAOphB,UAClB,CACA,OAAO4hB,CACT,EACIkiD,GAAW,SAAU/3D,EAAO6V,EAAMuY,EAAQ9iB,GAE5C,IADA,IAAIgC,EAAMuI,EAAKgN,KACN13B,EAAIijC,EAAQpuB,EAAQ7U,GAAK,EAAIA,EAAImiB,EAAIliB,OAAQ4U,EAAQ7U,IAAMA,IAClE,GAAImgB,EAAUgC,EAAI9X,OAAOrK,IACvB,OAAO6U,EAAQ7U,EAAI,EAAIA,EAG3B,OAAQ,CACV,EACI6sE,GAAY,SAAUh4D,EAAO6V,EAAMuY,GACrC,OAAO2pC,GAAS/3D,EAAO6V,EAAMuY,GAAQ,SAAU/iC,GAC7C,OAAO0qE,GAAO1qE,IAAM4qE,GAAa5qE,EACnC,GACF,EACI4sE,GAAc,SAAUj4D,EAAO6V,EAAMuY,GACvC,OAAO2pC,GAAS/3D,EAAO6V,EAAMuY,EAAQ8nC,GACvC,EACIgC,GAAmB,SAAUpiD,EAAK/lB,EAAMwD,EAAW66B,EAAQpuB,EAAOm4D,GACpE,IAAIC,EACAlsC,EAAWpW,EAAIoiC,UAAU3kD,EAAWuiB,EAAI4hC,UAAY3nD,EACpDwlB,EAAO,SAAUhiB,EAAW66B,EAAQzmB,GACtC,IAAI0wD,EAAa7V,GAAW1sC,GACxB8a,EAAS5wB,EAAQq4D,EAAWzV,UAAYyV,EAAWxV,SACvD,OAAO17C,EAASC,KAAKwpB,EAAOr9B,EAAW66B,GAAQ,SAAU9X,EAAMgiD,GAC7D,OAAIZ,GAAephD,EAAKriB,aACd,GAERmkE,EAAe9hD,EACR3O,EAAK3H,EAAOsW,EAAMgiD,GAE7B,GAAGpsC,GACL,EAEA,OADkB3W,EAAKhiB,EAAW66B,EAAQ4pC,IACvBtxD,MAAK,SAAUuf,GAChC,OAAOkyC,EAAwB5iD,EAAK0Q,EAAO1yB,UAAW0yB,EAAOmI,QAAUpuB,GAAS,EAAI,GAAIi4D,IAAe9wD,EAASJ,KAAKkf,EACvH,IAAGzf,SAAQ,WACT,OAAO4xD,EAAejxD,EAASJ,KAAK,CAClCxT,UAAW6kE,EACXhqC,OAAQpuB,EAAQ,EAAIo4D,EAAahtE,SAC9B+b,EAAS1B,MAChB,GACF,EACI8yD,GAAuB,SAAUziD,EAAK0iD,EAAYvX,EAAK1tD,EAAWk5B,GAChE5O,GAAStqB,IAAcwa,GAAUxa,EAAUsvB,OAAStvB,EAAUk5B,KAChEl5B,EAAYA,EAAUk5B,IAGxB,IADA,IAAIqO,EAAU68B,GAAa7hD,EAAKviB,GACvBpI,EAAI,EAAGA,EAAI2vC,EAAQ1vC,OAAQD,IAClC,IAAK,IAAIoX,EAAI,EAAGA,EAAIi2D,EAAWptE,OAAQmX,IAAK,CAC1C,IAAIk2D,EAAYD,EAAWj2D,GAC3B,KAAI2B,EAAcu0D,EAAU1O,YAAc0O,EAAU1O,YAAc9I,EAAI8I,YAGlEuN,GAAiBmB,IAAc3iD,EAAIhC,GAAGgnB,EAAQ3vC,GAAIstE,EAAU9hD,UAC9D,OAAOmkB,EAAQ3vC,EAEnB,CAEF,OAAOoI,CACT,EACImlE,GAAoB,SAAU/vC,EAAQ6vC,EAAYjlE,EAAWk5B,GAC/D,IAAI5W,EAAOtiB,EACPuiB,EAAM6S,EAAO7S,IACbnB,EAAOmB,EAAI8+B,UACXt4C,EAASk8D,EAAW,GAIxB,GAHInB,GAAc/6D,KAChBuZ,EAAOvZ,EAAOvI,QAAU,KAAO+hB,EAAIoiC,UAAU3kD,EAAW+I,EAAOsuD,MAAOj2C,KAEnEkB,EAAM,CACT,IAAI8iD,EAAY7iD,EAAIoiC,UAAU3kD,EAAW,YACzCsiB,EAAOC,EAAIoiC,UAAUr6B,GAAStqB,GAAaA,EAAUU,WAAaV,GAAW,SAAUsiB,GACrF,OAAOA,IAASlB,GAAQkjD,GAAYlvC,EAAQ9S,EAC9C,GAAG8iD,EACL,CAIA,GAHI9iD,GAAQwhD,GAAc/6D,IAAWA,EAAOvI,UAC1C8hB,EAAO8hD,GAAa7hD,EAAKD,EAAM,SAASjN,UAAU,IAAMiN,IAErDA,EAEH,IADAA,EAAOtiB,EACAsiB,EAAK4W,KAAiB3W,EAAI4hC,QAAQ7hC,EAAK4W,MAC5C5W,EAAOA,EAAK4W,IACRsqC,GAAOlhD,EAAM,SAKrB,OAAOA,GAAQtiB,CACjB,EACIqlE,GAAsB,SAAU9iD,EAAKnB,EAAMphB,EAAWk5B,GACxD,IAAIpX,EAAS9hB,EAAUU,WACvB,OAAIiQ,EAAc3Q,EAAUk5B,QAEjBpX,IAAWV,IAAQ1Q,EAAWoR,KAAWS,EAAI4hC,QAAQriC,KAGvDujD,GAAoB9iD,EAAKnB,EAAMU,EAAQoX,GAElD,EACIosC,GAAsB,SAAU/iD,EAAK0iD,EAAYjlE,EAAW66B,EAAQpuB,GACtE,IAhHwB6V,EAgHpBR,EAAS9hB,EACTk5B,EAAczsB,EAAQ,kBAAoB,cAC1C2U,EAAOmB,EAAI8+B,UACf,GAAI/2B,GAAStqB,KAAeqkE,GAAiBrkE,KACvCyM,EAAQouB,EAAS,EAAIA,EAAS76B,EAAUsvB,KAAKz3B,QAC/C,OAAOmI,EAGX,OAAa,CACX,IAAKilE,EAAW,GAAGM,cAAgBhjD,EAAI4hC,QAAQriC,GAC7C,OAAOA,EAET,IAAK,IAAIqX,EAAUrX,EAAOoX,GAAcC,EAASA,EAAUA,EAAQD,GAAc,CAC/E,IAAImqC,EAAc/4C,GAAS6O,KAAaksC,GAAoB9iD,EAAKnB,EAAM+X,EAASD,GAChF,IAAKirC,GAAehrC,MA7HjBzO,GADiBpI,EA8HuB6W,KA7HxB7W,EAAKppB,aAAa,mBAAsBopB,EAAK8C,eA6HRi/C,GAAiBlrC,EAASkqC,GAChF,OAAOvhD,CAEX,CACA,GAAIA,IAAWV,GAAQU,EAAOphB,aAAe0gB,EAAM,CACjDphB,EAAY8hB,EACZ,KACF,CACAA,EAASA,EAAOphB,UAClB,CACA,OAAOV,CACT,EACIwlE,GAAyB,SAAUxlE,GACrC,OAAOmkE,GAAenkE,EAAUU,aAAeyjE,GAAenkE,EAChE,EACIylE,GAAY,SAAUrwC,EAAQs4B,EAAKuX,EAAYS,QACpB,IAAzBA,IACFA,GAAuB,GAEzB,IAAIjqC,EAAiBiyB,EAAIjyB,eAAgBgsB,EAAciG,EAAIjG,YAAaC,EAAegG,EAAIhG,aAAcC,EAAY+F,EAAI/F,UACrHplC,EAAM6S,EAAO7S,IACbxZ,EAASk8D,EAAW,GAmFxB,OAlFIz7C,GAAYiS,IAAmBA,EAAe7Y,kBAChD6Y,EAAiB60B,GAAU70B,EAAgBgsB,GACvCn9B,GAASmR,KACXgsB,EAAc,IAGdj+B,GAAYk+B,IAAiBA,EAAa9kC,kBAC5C8kC,EAAe4I,GAAU5I,EAAcgG,EAAI8I,UAAY7O,EAAYA,EAAY,GAC3Er9B,GAASo9B,KACXC,EAAYD,EAAa9P,UAAU//C,SAGvC4jC,EAAiB8oC,GAA0BhiD,EAAKkZ,GAChDisB,EAAe6c,GAA0BhiD,EAAKmlC,GAC1C8d,GAAuB/pC,KACzBA,EAAiB0oC,GAAe1oC,GAAkBA,EAAiBA,EAAe/6B,WAEhF+6B,EADEiyB,EAAI8I,UACW/6B,EAAetW,iBAAmBsW,EAElCA,EAAerW,aAAeqW,EAE7CnR,GAASmR,KACXgsB,EAAciG,EAAI8I,UAAY/6B,EAAe5jC,OAAS,IAGtD2tE,GAAuB9d,KACzBA,EAAeyc,GAAezc,GAAgBA,EAAeA,EAAahnD,WAExEgnD,EADEgG,EAAI8I,UACS9O,EAAatiC,aAAesiC,EAE5BA,EAAaviC,iBAAmBuiC,EAE7Cp9B,GAASo9B,KACXC,EAAY+F,EAAI8I,UAAY,EAAI9O,EAAa7vD,SAG7C61D,EAAI8I,YACWmO,GAAiBpiD,EAAK6S,EAAOy4B,UAAWpyB,EAAgBgsB,GAAa,EAAMie,GACjFxyD,MAAK,SAAUyK,GACxB,IAAI3d,EAAY2d,EAAG3d,UAAW66B,EAASld,EAAGkd,OAC1CY,EAAiBz7B,EACjBynD,EAAc5sB,CAChB,IACe8pC,GAAiBpiD,EAAK6S,EAAOy4B,UAAWnG,EAAcC,GAAW,EAAO+d,GAC9ExyD,MAAK,SAAUyK,GACtB,IAAI3d,EAAY2d,EAAG3d,UAAW66B,EAASld,EAAGkd,OAC1C6sB,EAAe1nD,EACf2nD,EAAY9sB,CACd,MAEEmpC,GAAej7D,IAAWA,EAAOw8D,gBAC9BvB,GAAej7D,IAAauhB,GAASmR,IAAmC,IAAhBgsB,IAC3DhsB,EAAiB6pC,GAAoB/iD,EAAK0iD,EAAYxpC,EAAgBgsB,GAAa,IAEhFuc,GAAej7D,IAAauhB,GAASo9B,IAAiBC,IAAcD,EAAa9P,UAAU//C,SAC9F6vD,EAAe4d,GAAoB/iD,EAAK0iD,EAAYvd,EAAcC,GAAW,KAG7Esc,GAAuBl7D,KACzB0yB,EAAiBupC,GAAqBziD,EAAK0iD,EAAYvX,EAAKjyB,EAAgB,mBAC5EisB,EAAesd,GAAqBziD,EAAK0iD,EAAYvX,EAAKhG,EAAc,iBAEtEoc,GAAc/6D,IAAWg7D,GAAiBh7D,MAC5C0yB,EAAiB0pC,GAAkB/vC,EAAQ6vC,EAAYxpC,EAAgB,mBACvEisB,EAAeyd,GAAkB/vC,EAAQ6vC,EAAYvd,EAAc,eAC/Doc,GAAc/6D,KACXwZ,EAAI4hC,QAAQ1oB,KACfA,EAAiB6pC,GAAoB/iD,EAAK0iD,EAAYxpC,EAAgBgsB,GAAa,IAEhFllC,EAAI4hC,QAAQuD,KACfA,EAAe4d,GAAoB/iD,EAAK0iD,EAAYvd,EAAcC,GAAW,MAI/En+B,GAAYiS,KACdgsB,EAAcllC,EAAIk2B,UAAUhd,GAC5BA,EAAiBA,EAAe/6B,YAE9B8oB,GAAYk+B,KACdC,EAAYplC,EAAIk2B,UAAUiP,GAAgB,EAC1CA,EAAeA,EAAahnD,YAEvB,CACL+6B,eAAgBA,EAChBgsB,YAAaA,EACbC,aAAcA,EACdC,UAAWA,EAEf,EAEIge,GAAS,SAAUpjD,EAAKmrC,EAAK5yD,GAC/B,IAAI2sD,EAAciG,EAAIjG,YAClBhsB,EAAiB60B,GAAU5C,EAAIjyB,eAAgBgsB,GAC/CE,EAAY+F,EAAI/F,UAChBD,EAAe4I,GAAU5C,EAAIhG,aAAcC,EAAY,GACvDie,EAAU,SAAUr5C,GACtB,IAAIs5C,EAAYt5C,EAAM,GAClBjC,GAASu7C,IAAcA,IAAcpqC,GAAkBgsB,GAAeoe,EAAUv2C,KAAKz3B,QACvF00B,EAAMwY,OAAO,EAAG,GAElB,IAAI+gC,EAAWv5C,EAAMA,EAAM10B,OAAS,GAIpC,OAHkB,IAAd8vD,GAAmBp7B,EAAM10B,OAAS,GAAKiuE,IAAape,GAAgBp9B,GAASw7C,IAC/Ev5C,EAAMwY,OAAOxY,EAAM10B,OAAS,EAAG,GAE1B00B,CACT,EACIw5C,EAAkB,SAAUzjD,EAAMvqB,EAAMiuE,GAE1C,IADA,IAAIC,EAAW,GACR3jD,GAAQA,IAAS0jD,EAAS1jD,EAAOA,EAAKvqB,GAC3CkuE,EAASnmE,KAAKwiB,GAEhB,OAAO2jD,CACT,EACIC,EAAe,SAAU5jD,EAAMlB,GACjC,OAAOmB,EAAIoiC,UAAUriC,GAAM,SAAUA,GACnC,OAAOA,EAAK5hB,aAAe0gB,CAC7B,GAAGA,EACL,EACI+kD,EAAe,SAAUztC,EAAWstC,EAAS59D,GAE/C,IADA,IAAI8wB,EAAc9wB,EAAO,cAAgB,kBAChCka,EAAOoW,EAAW0tC,EAAW9jD,EAAK5hB,WAAY4hB,GAAQA,IAAS0jD,EAAS1jD,EAAO8jD,EAAU,CAChGA,EAAW9jD,EAAK5hB,WAChB,IAAI2lE,EAAaN,EAAgBzjD,IAASoW,EAAYpW,EAAOA,EAAK4W,GAAcA,GAC5EmtC,EAAWxuE,SACRuQ,GACHi+D,EAAWhxD,UAEbva,EAAS8qE,EAAQS,IAErB,CACF,EACA,GAAI5qC,IAAmBisB,EACrB,OAAO5sD,EAAS8qE,EAAQ,CAACnqC,KAE3B,IAAI7I,EAAWrQ,EAAIkkC,mBAAmBhrB,EAAgBisB,GACtD,GAAInlC,EAAIglC,UAAU9rB,EAAgBisB,GAChC,OAAOye,EAAa1qC,EAAgB7I,GAAU,GAEhD,GAAIrQ,EAAIglC,UAAUG,EAAcjsB,GAC9B,OAAO0qC,EAAaze,EAAc90B,GAEpC,IAAI0zC,EAAaJ,EAAazqC,EAAgB7I,IAAa6I,EACvD8qC,EAAWL,EAAaxe,EAAc90B,IAAa80B,EACvDye,EAAa1qC,EAAgB6qC,GAAY,GACzC,IAAIL,EAAWF,EAAgBO,IAAe7qC,EAAiB6qC,EAAaA,EAAWlhD,YAAa,cAAemhD,IAAa7e,EAAe6e,EAASnhD,YAAcmhD,GAClKN,EAASpuE,QACXiD,EAAS8qE,EAAQK,IAEnBE,EAAaze,EAAc6e,EAC7B,EAEIC,GAAY,SAAU7Y,GACxB,IAAI8Y,EAAS,GACb,GAAI9Y,EACF,IAAK,IAAI/1D,EAAI,EAAGA,EAAI+1D,EAAU+Y,WAAY9uE,IACxC6uE,EAAO3mE,KAAK6tD,EAAUgZ,WAAW/uE,IAGrC,OAAO6uE,CACT,EAiBIG,GAA8B,SAAUH,EAAQv7D,GAClD,IAAI27D,EAHGzZ,GAGiCliD,EAHhB,+CAIxB,OAAO27D,EAAchvE,OAAS,EAAIgvE,EARX,SAAUJ,GACjC,OAAO7xD,EAXc,SAAU6xD,GAC/B,OAAOtzD,EAAKszD,GAAQ,SAAU/mD,GAC5B,IAAI4C,EAAO+tC,GAAgB3wC,GAC3B,OAAO4C,EAAO,CAACE,GAAqBF,IAAS,EAC/C,GACF,CAMkBwkD,CAAiBL,GAAS1sC,GAC5C,CAMoDgtC,CAAmBN,EACvE,EACIO,GAAqB,SAAU5xC,GACjC,OAAOwxC,GAA4BJ,GAAUpxC,EAAOu4B,UAAUsZ,UAAWzkD,GAAqB4S,EAAOy4B,WACvG,EACIqZ,GAAkB,SAAUC,EAAMt0C,GACpC,OAAOqB,GAAWizC,EAAM,QAASt0C,EACnC,EAkBIu0C,GAAmB,SAAU9kD,GAC/B,OAAOoD,GAAWpD,GAAMjQ,KAAKb,EAAS,CAAC8Q,KAAQ,SAAUoK,GACvD,MAAO,CAACpK,GAAMvhB,OAAOqmE,GAAiB16C,GACxC,GACF,EACI26C,GAAoB,SAAU/kD,GAChC,OAAOqD,GAAUrD,GAAMjQ,KAAKb,EAAS,CAAC8Q,KAAQ,SAAUoK,GACtD,MAAoB,OAAhB30B,GAAK20B,GACAxH,GAAYwH,GAAOluB,KAAI,SAAU26B,GACtC,MAAO,CAAC7W,GAAMvhB,OAAOsmE,GAAkBluC,GACzC,IAAGzmB,MAAM,IAEF,CAAC4P,GAAMvhB,OAAOsmE,GAAkB36C,GAE3C,GACF,EACI46C,GAAyB,SAAU76C,EAAKihC,GAC1C,OAAOviC,GAjCU,SAAUuiC,GAC3B,IAAIyE,EAAKzE,EAAIjyB,eAAgB42B,EAAK3E,EAAIjG,YACtC,OAAIn9B,GAAS6nC,GACG,IAAPE,EAAWz+C,EAASJ,KAAKgP,GAAqB2vC,IAAOv+C,EAAS1B,OAE9D0B,EAASC,KAAKs+C,EAAGtvC,WAAWwvC,IAAK7zD,IAAIgkB,GAEhD,CA0Be+kD,CAAa7Z,GAzBX,SAAUA,GACzB,IAAI0E,EAAK1E,EAAIhG,aAAc4K,EAAK5E,EAAI/F,UACpC,OAAIr9B,GAAS8nC,GACJE,IAAOF,EAAG9iC,KAAKz3B,OAAS+b,EAASJ,KAAKgP,GAAqB4vC,IAAOx+C,EAAS1B,OAE3E0B,EAASC,KAAKu+C,EAAGvvC,WAAWyvC,EAAK,IAAI9zD,IAAIgkB,GAEpD,CAkBkCglD,CAAW9Z,IAAM,SAAUh1B,EAAWstC,GACpE,IAAIv5D,EAAQyI,EAAOkyD,GAAiB36C,GAAM9a,EAAM7C,GAAI4pB,IAChDw9B,EAAMhhD,EAAOmyD,GAAkB56C,GAAM9a,EAAM7C,GAAIk3D,IACnD,OAAOv5D,EAAM+F,UAAY0jD,EAAI1jD,QAC/B,IAAGE,OAAM,EACX,EACI+0D,GAAe,SAAUllD,EAAKmrC,EAAKprC,EAAM7V,GAC3C,IAAI2U,EAAOkB,EAAM+a,EAAS,IAAI5E,GAAcnW,EAAMlB,GAC9CiiB,EAAoC3sB,GAAS6L,EAAIqe,OAAOuH,qCAAqC,SAAUtX,EAAG94B,GAC5G,OAAQoc,EAAW,CACjB,KACA,KACA,SACCpc,EAAK2G,cACV,IACA,EAAG,CACD,GAAI4rB,GAAShI,IAA+C,IAAtChC,GAAM/T,KAAK+V,EAAKs1B,WAAW//C,OAM/C,YALI4U,EACFihD,EAAIvG,SAAS7kC,EAAM,GAEnBorC,EAAItG,OAAO9kC,EAAMA,EAAKs1B,UAAU//C,SAIpC,GAAIwrC,EAAkC/gB,EAAKiC,UAUzC,YATI9X,EACFihD,EAAIoP,eAAex6C,GAEG,OAAlBA,EAAKiC,SACPmpC,EAAIqP,aAAaz6C,GAEjBorC,EAAI+E,YAAYnwC,GAKxB,OAASA,EAAO7V,EAAQ4wB,EAAOj1B,OAASi1B,EAAOzE,QACzB,SAAlBxX,EAAKmD,WACH9X,EACFihD,EAAIvG,SAAS/lC,EAAM,GAEnBssC,EAAItG,OAAOhmC,EAAMA,EAAKyB,WAAWhrB,QAGvC,EACI6vE,GAAe,SAAUtyC,GAC3B,IAAIuyC,EAAMvyC,EAAOu4B,UAAUsZ,SAC3B,OAAOU,GAAOA,EAAIjB,WAAa,CACjC,EACIkB,GAAc,SAAUxyC,EAAQyyC,GAClC,IAAIC,EAAqBd,GAAmB5xC,GACxC0yC,EAAmBjwE,OAAS,EAC9B0c,EAAOuzD,GAAoB,SAAUxkD,GACnC,IAAIhB,EAAOgB,EAAKf,IACZwlD,EAAc3yC,EAAO7S,IAAIshC,YAC7BkkB,EAAYjL,eAAex6C,GAC3BylD,EAAYtV,YAAYnwC,GACxBulD,EAASE,GAAa,EACxB,IAEAF,EAASzyC,EAAOu4B,UAAUC,UAAU,EAExC,EACIoa,GAAW,SAAUra,EAAWsa,EAAcJ,GAChD,IAAI7R,EAAWO,GAAsB5I,EAAWsa,GAChDJ,EAAS7R,GACTrI,EAAUiJ,eAAeZ,EAC3B,EAyBIkS,IAvBsB3nD,GAuBJmE,GAPb,CACL8K,IAhBQ,SAAUtkB,GAClB,IAAKqV,GAAGrV,GACN,MAAM,IAAI1B,MAAM,0CAElB,OAAO40D,GAAUlzD,GAASwH,MAAM,GAClC,EAYE0rD,UAXEA,GAAY,SAAUlzD,GACxB,OAAOqV,GAAGrV,GAAW0I,EAASC,KAAK3I,EAAQqX,IAAIq1B,WAAahkC,EAAS1B,MACvE,EAUEqmB,IATQ,SAAUrtB,EAASpP,GAC3B,IAAKykB,GAAGrV,GACN,MAAM,IAAI1B,MAAM,8CAElB0B,EAAQqX,IAAIq1B,UAAY97C,CAC1B,IASEqsE,GAAQ,SAAUj9D,GACpB,OAAOg9D,GAAM14C,IAAItkB,EACnB,EA6BIk9D,GAAiB,SAAUC,EAAM1qD,EAAI8vC,EAAgB6a,GACvD,IAAIC,EAAK5qD,EAAGuwC,IAAKA,OAAa,IAAPqa,EAAgBna,GAAS,kBAAoBma,EAAIj5C,EA38T1E,SAAgBjqB,EAAGhC,GACjB,IAAIkL,EAAI,CAAC,EACT,IAAK,IAAI4J,KAAK9S,EACR1M,OAAOwU,UAAUpR,eAAe2T,KAAKrK,EAAG8S,IAAM9U,EAAEzE,QAAQuZ,GAAK,IAC/D5J,EAAE4J,GAAK9S,EAAE8S,IACb,GAAS,MAAL9S,GAAqD,mBAAjC1M,OAAO6vE,sBACxB,KAAI5wE,EAAI,EAAb,IAAgBugB,EAAIxf,OAAO6vE,sBAAsBnjE,GAAIzN,EAAIugB,EAAEtgB,OAAQD,IAC7DyL,EAAEzE,QAAQuZ,EAAEvgB,IAAM,GAAKe,OAAOwU,UAAUs7D,qBAAqB/4D,KAAKrK,EAAG8S,EAAEvgB,MACzE2W,EAAE4J,EAAEvgB,IAAMyN,EAAE8S,EAAEvgB,IAFgC,CAIpD,OAAO2W,CACT,CAg8TiFm6D,CAAO/qD,EAAI,CAAC,QACvFgrD,EAASnmD,GAAqB,OAAQ6lD,GAC1Ctb,GAAM4b,EAAQtb,MACd7hC,GAAMm9C,EAAQ,GAAKpb,KAAoBW,GACvC1iC,GAAMm9C,EAAQ,GAAKrb,KAAkBG,GACrC,IAAIpuD,EAAKipE,EAASpa,EAAK5+B,GAAOs5C,EAAKvpE,EAAGyiC,WAAYA,OAAoB,IAAP8mC,EAAgB,CAAC,EAAIA,EAAIC,EAAKxpE,EAAGypE,QAASA,OAAiB,IAAPD,EAAgB,GAAKA,EAGxI,OAFAp9C,GAASk9C,EAAQ7mC,GApnFT,SAAU52B,EAAS49D,GAC3Bv0D,EAAOu0D,GAAS,SAAUx6D,GACxBy+C,GAAM7hD,EAASoD,EACjB,GACF,CAinFE5R,CAAIisE,EAAQG,GACLH,CACT,EACII,GAAW,SAAU3zC,EAAQs4B,EAAKD,EAAgB6a,EAAUh5C,GAC9D,IAAI05C,EAAc,GACdL,EAASP,GAAehzC,EAAO6zC,SAAU35C,EAAMm+B,EAAgB6a,GAC/D9nE,EAAU1E,KACVotE,EAAgB,WAClB1oE,EAAQisD,OACV,EASI0c,EAAkB,SAAU1zB,GAC9BlhC,EAAOkhC,EAAO2zB,EAChB,EACIA,EAAiB,SAAU9lD,GAE7B,OAvDU,SAAU8R,EAAQ9R,EAAM+lD,EAAU9kD,GAC9C,OAAOzC,GAAOwB,GAAMjR,MAAK,WACvB,MAAO,UACT,IAAG,SAAUyP,GACX,MAAiB,OAAbyC,GAPU,SAAUjB,GAC1B,OAAOoB,GAASpB,IAAS6kD,GAAM7kD,KAAU4W,EAC3C,CAK6BovC,CAAYhmD,GAC5B,QA5uFM,SAAUA,GAC3B,OAAOmB,GAAYnB,IAASw1B,GAAIx1B,EAAM+pC,KACxC,CA2uFekc,CAAajmD,GACf,WACEm9C,GAAYn9C,EAAKf,KACnB,QACGimB,GAAQpT,EAAQi0C,EAAU9kD,IAAcikB,GAAQpT,EAAQr9B,GAAK+pB,GAASunD,GAGzE,QAFA,eAIX,GACF,CAsCcj3B,CAAQhd,EAAQ9R,EAAM,OAAQvrB,GAAKurB,KAE7C,IAAK,gBACD4lD,IACA,IAAI9hD,EAAa7B,GAASjC,GAC1B6lD,EAAgB/hD,GAChB8hD,IACA,MAEJ,IAAK,SAxlSI,SAAUh+D,EAAS1K,GAC9BgmB,GAAStb,EAAS1K,GAClBmmB,GAASnmB,EAAS0K,EACpB,CAulSQs+D,CAAOlmD,EAtBJ9iB,EAAQgvB,MAAM7c,YAAW,WAC9B,IAAIoG,EAAK+f,GAAQ6vC,GAGjB,OAFAK,EAAYlpE,KAAKiZ,GACjBvY,EAAQ+3B,IAAIxf,GACLA,CACT,KAqBF,EASA,OAJA4sD,GAAOvwC,EAAO7S,IAAKmrC,GAAK,SAAUnhC,GAChC28C,IALiB,SAAU38C,GAC3B,IAAIkpB,EAAQphC,EAAMkY,EAAO/J,IACzB2mD,EAAgB1zB,EAClB,CAGEg0B,CAAal9C,EACf,IACOy8C,CACT,EAwBIU,GAAY,SAAUt0C,GACxB,IAxtFIu0C,EAwtFAC,GAxtFAD,EAAc,CAAC,EAYZ,CACLE,SAZa,SAAU9xE,EAAM49B,GAC7Bg0C,EAAY5xE,GAAQ,CAClBA,KAAMA,EACN49B,SAAUA,EAEd,EAQE0D,OAPW,SAAUthC,GACrB,OAAO4e,GAAMgzD,EAAa5xE,GAAMyG,KAAI,SAAUO,GAC5C,OAAOA,EAAE42B,QACX,GACF,KA7BY,SAAUP,EAAQw0C,GAI9Bx0C,EAAO8pB,GAAG,QAAQ,WAChB9pB,EAAO00C,WAAWC,cAAc,QAAQ,SAAUC,GAChDz1D,EAAOy1D,GAAO,SAAUC,IALH,SAAUA,GACjC,OAAOr2D,EAASC,KAAKo2D,EAAKhrC,KAAKquB,OAAmBn6C,KAAKy2D,EAASvwC,OAClE,EAIM6wC,CAAmBD,GAAM/2D,MAAK,SAAUyiB,IACV,IAAxBA,EAASw0C,YACXF,EAAK9iD,QAET,GACF,GACF,GACF,GACF,CA4tFEijD,CAAQh1C,EAAQw0C,GAChB,IAAIS,EA9zFQ,SAAUj1C,EAAQk1C,GAC9B,IAAIC,EAAkBnhB,GAAK,CAAC,GACxBohB,EAAW,WACb,MAAO,CACLC,UAAW,GACXC,SAAU5uE,KAEd,EACI6uE,EAAgB,SAAU5yE,EAAM8W,GAClC+7D,EAAgB7yE,GAAM,SAAUu3B,GAE9B,OADAzgB,EAAEygB,GACKA,CACT,GACF,EACIs7C,EAAkB,SAAU7yE,EAAM8W,GACpC,IAAIg8D,EAAcN,EAAgB/6C,MAE9Bs7C,EAAaj8D,EADN8H,GAAMk0D,EAAa9yE,GAAM4a,WAAW63D,IAE/CK,EAAY9yE,GAAQ+yE,EACpBP,EAAgBhyC,IAAIsyC,EACtB,EAoBIE,EAAe1yB,IAAK,WACtB,IAAIwyB,EAAcN,EAAgB/6C,MAC9Bm6C,EAAc1rE,GAAKlD,GAAK8vE,IAC5Bt2D,EAAOo1D,GAAa,SAAU5xE,GAC5B6yE,EAAgB7yE,GAAM,SAAUu3B,GAC9B,IAAIsJ,EAAOtJ,EAAKo7C,SAASl7C,MAazB,OAZAg+B,GAASp4B,EAAQxhB,EAASJ,KAAKzb,IAAOsa,MAAK,WACrCumB,EAAKpmB,WAdM,SAAUza,GAC/B4yE,EAAc5yE,GAAM,SAAUu3B,GAC5B/a,EAAO+a,EAAKm7C,WAAW,SAAU57D,GAC/B,OAAOA,GAAE,EAAO9W,EAClB,GACF,GACF,CASUizE,CAAiBjzE,GACjBu3B,EAAKo7C,SAASje,QAElB,IAAG,SAAU9uC,GACX,IAAIuwC,EAAMvwC,EAAGuwC,IAAKn2D,EAAO4lB,EAAG5lB,KAAM+uB,EAAWnJ,EAAGmJ,SAC3CkE,GAAK4N,EAAMs1B,KAhCJ,SAAUn2D,EAAMm2D,EAAKpnC,GACvC6jD,EAAc5yE,GAAM,SAAUu3B,GAC5B/a,EAAO+a,EAAKm7C,WAAW,SAAU57D,GAC/B,OAAOA,GAAE,EAAM9W,EAAM,CACnBm2D,IAAKA,EACL3hC,MAAOlY,EAAMyS,GAAU,SAAUxD,GAC/B,OAAOA,EAAKf,GACd,KAEJ,GACF,GACF,CAsBU0oD,CAAclzE,EAAMm2D,EAAKpnC,GACzBwI,EAAKo7C,SAASnyC,IAAI21B,GAEtB,IACO,CACLwc,SAAUp7C,EAAKo7C,SACfD,UAAWn7C,EAAKm7C,UAEpB,GACF,GACF,GAAG,IAeH,OAdAr1C,EAAO8pB,GAAG,UAAU,WAClB6rB,EAAax7B,QACf,IACAna,EAAO8pB,GAAG,cAAc,WACtB6rB,EAAav1C,UACf,IASO,CAAE01C,YARS,SAAUnzE,EAAM8W,GAChC+7D,EAAgB7yE,GAAM,SAAUu3B,GAC9B,MAAO,CACLo7C,SAAUp7C,EAAKo7C,SACfD,UAAWn7C,EAAKm7C,UAAU1pE,OAAO,CAAC8N,IAEtC,GACF,EAEF,CA8uFgBs8D,CAAQ/1C,GACtB,MAAO,CACLy0C,SAAU,SAAU9xE,EAAM49B,GACxBi0C,EAASC,SAAS9xE,EAAM49B,EAC1B,EACAozC,SAAU,SAAUhxE,EAAMu3B,GACxBs6C,EAASvwC,OAAOthC,GAAMmb,MAAK,SAAUyiB,IAhChB,SAAUP,EAAQr9B,EAAM49B,EAAUrG,GAC3D8F,EAAOg2C,YAAYC,UAAS,WAC1B,IAAI1d,EAAYv4B,EAAOu4B,UACnB2d,EAAa3d,EAAUC,SACvB2d,EAAmBvE,GAAmB5xC,GAAQv9B,OAAS,EAI3D,GAHIyzE,EAAW9U,YAAc+U,GAnEb,SAAUn2C,EAAQs4B,GACpC,IAAIp5C,EAAImxD,GAAUrwC,EAAQs4B,EAAK,CAAC,CAAE7nB,OAAQ,UAC1C6nB,EAAIvG,SAAS7yC,EAAEmnB,eAAgBnnB,EAAEmzC,aACjCiG,EAAItG,OAAO9yC,EAAEozC,aAAcpzC,EAAEqzC,WAC7BvyB,EAAOu4B,UAAU2U,OAAO5U,EAC1B,CA+DM8d,CAAcp2C,EAAQk2C,GAEpB3d,EAAUC,SAAS4I,YAAc+U,EAAkB,CACrD,IAAI/qE,EAAU4nE,GAAehzC,EAAO6zC,SAAU35C,EAAMv3B,EAAM49B,EAAS2yC,UACnE/vC,GAAI/3B,EAASy5B,IACb0zB,EAAUC,SAASsG,WAAW1zD,EAAQ+hB,KACtCorC,EAAUvS,OAAO56C,EAAQ+hB,IAC3B,MACEylD,GAASra,GAAW,GAAO,WACzBia,GAAYxyC,GAAQ,SAAUq2C,GAC5B1C,GAAS3zC,EAAQq2C,EAAc1zE,EAAM49B,EAAS2yC,SAAUh5C,EAC1D,GACF,GAEJ,GACF,CAYQo8C,CAAqBt2C,EAAQr9B,EAAM49B,EAAUrG,EAC/C,GACF,EACAq8C,kBAAmB,SAAU5zE,EAAM+C,GACjCuvE,EAAQa,YAAYnzE,EAAM+C,EAC5B,EACA4K,OAAQ,SAAU3N,GAChBy1D,GAASp4B,EAAQxhB,EAASJ,KAAKzb,IAAOmb,MAAK,SAAUyK,GACnD,IAAImJ,EAAWnJ,EAAGmJ,SAClBvS,EAAOuS,EAAUK,GACnB,GACF,EACAykD,OAAQ,SAAU7zE,GAChB,IAAI8zE,EA91FI,SAAUz2C,EAAQr9B,GAC9B,IAAIyE,EAAOgmB,GAAqB4S,EAAOy4B,WACnCie,EAAU1e,GAAY5wD,EAAM,IAAM8wD,KAAmB,KAAOv1D,EAAO,MACnE8zE,EAAY,CAAC,EAMjB,OALAt3D,EAAOu3D,GAAS,SAAUv5B,GACxB,IAAI2b,EAAMxiC,GAAM6mB,EAAGgb,MACfwe,EAAep1D,GAAMk1D,EAAW3d,GAAKx7C,MAAM,IAC/Cm5D,EAAU3d,GAAO6d,EAAahrE,OAAO,CAACwxC,GACxC,IACOs5B,CACT,CAo1FsBG,CAAQ52C,EAAQr9B,GAChC,OAAOme,GAAM21D,GAAW,SAAUp2B,GAChC,OAAOphC,EAAMohC,GAAO,SAAUnyB,GAC5B,OAAOA,EAAKf,GACd,GACF,GACF,EAEJ,EAEI0pD,GAAkB,SAAUte,GAC9B,MAAO,CACLue,YAAav6D,EAAM0vD,GAAe1T,GAClCiJ,eAAgBjlD,EAAMilD,GAAgBjJ,GAE1C,EACAse,GAAgB9H,eAAiB5B,GAEjC,IAAI4J,GAA2B,SAAU/qD,EAAMkB,GAC7C,KAAOA,GAAQA,IAASlB,GAAM,CAC5B,GAAIwJ,GAAwBtI,IAASuI,GAAyBvI,GAC5D,OAAOA,EAETA,EAAOA,EAAK5hB,UACd,CACA,OAAO,IACT,EAEI0rE,GAAkB,SAAUh/B,EAASK,EAAS/tB,GAChD,GAAIA,EAAM82C,UACR,OAAO,EAET,GAAIt3C,GAAI5B,QAAQ3B,QAAU+D,EAAM+nC,cAAgB/nC,EAAMioC,UAAY,GAAKjoC,EAAM+b,iBAAmB/b,EAAMgoC,aAAc,CAClH,IAAIj7B,EAAM/M,EAAM+b,eAAe5Y,WAAWnD,EAAM+nC,aAChD,GAAIj+B,GAAYiD,GACd,OAAOrZ,EAAOqZ,EAAIslC,kBAAkB,SAAUtC,GAC5C,OAAOW,GAAWX,EAAMriB,EAASK,EACnC,GAEJ,CACA,OAAOr6B,EAAOsM,EAAMqyC,kBAAkB,SAAUtC,GAC9C,OAAOW,GAAWX,EAAMriB,EAASK,EACnC,GACF,EA6CI4+B,GAAY,SAAUj3C,EAAQk3C,EAAWr7C,GAC3C,OAAOmE,EAAO+Z,KAAKm9B,EAAWr7C,EAChC,EACIs7C,GAAkB,SAAUn3C,EAAQrsB,EAAQuZ,EAAMihD,GACpD,OAAOnuC,EAAO+Z,KAAK,cAAe,CAChCpmC,OAAQA,EACRuZ,KAAMA,EACNihD,KAAMA,GAEV,EACIiJ,GAAmB,SAAUp3C,EAAQrsB,EAAQuZ,EAAMihD,GACrD,OAAOnuC,EAAO+Z,KAAK,eAAgB,CACjCpmC,OAAQA,EACRuZ,KAAMA,EACNihD,KAAMA,GAEV,EAEIkJ,GAAK,CACPC,UAAW,EACXC,OAAQ,GACRC,KAAM,GACNC,MAAO,GACPC,IAAK,GACLC,KAAM,GACNC,MAAO,GACPC,SAAU,GACVC,IAAK,EACLC,GAAI,GACJC,QAAS,GACTC,UAAW,GACXC,IAAK,GACLC,KAAM,GACNC,gBAAiB,SAAUnqE,GACzB,OAAOA,EAAEoqE,UAAYpqE,EAAEqqE,SAAWrqE,EAAEsqE,QAAUlB,GAAGmB,eAAevqE,EAClE,EACAuqE,eAAgB,SAAUvqE,GACxB,OAAO6b,GAAIG,IAAMhc,EAAEsqC,QAAUtqC,EAAEqqE,UAAYrqE,EAAEsqE,MAC/C,GAGEE,GAA2BhjD,GAC3BijD,GAAmB,SAAUngB,EAAWv4B,GAC1C,IAEI24C,EAAaC,EAAkBC,EAAcC,EAAgBC,EAC7DC,EAAQC,EAAoCC,EAAQC,EAAQC,EAAOC,EACnElkE,EAAOie,EAGPkmD,EAAkBC,EAPlBC,EAAuB,oBACvBrsD,EAAM6S,EAAO7S,IAAKrP,EAAOoN,GAAMpN,KAI/B27D,EAAcz5C,EAAO6zC,SAAU6F,EAAex1E,SAC9Cy1E,EAAM7lD,KAAK6lD,IAAKvf,EAAQtmC,KAAKsmC,MAAO9yB,EAActH,EAAOy4B,UAEzDmhB,EAAgB,CAClBC,GAAI,CACF,EACA,GACC,GACA,GAEHC,GAAI,CACF,EACA,EACA,GACC,GAEHC,GAAI,CACF,EACA,EACA,EACA,GAEFC,GAAI,CACF,EACA,GACC,EACD,IAGAC,EAAU,SAAU5iD,GACtB,OAAOA,IAAyB,QAAjBA,EAAIlI,UAAsB6Q,EAAO7S,IAAIhC,GAAGkM,EAAK,gBAC9D,EACIkvC,EAAU,SAAUlvC,GACtB,OAAO1B,GAAU0B,IAAQlK,EAAI+5B,SAAS7vB,EAAK,qBAC7C,EASI6iD,EAAyB,SAAU7gC,GACrC,IAAIp2C,EAASo2C,EAAIp2C,QATc,SAAUo2C,EAAK/uB,GAC9C,GAAiB,cAAb+uB,EAAIjtC,MAAsD,IAA9BitC,EAAIjtC,KAAK5C,QAAQ,SAAgB,CAC/D,IAAI2wE,EAAQ9gC,EAAI+gC,QAAQ,GACxB,OAAOH,EAAQ5gC,EAAIp2C,UAAY+zE,GAAgBmD,EAAMniC,QAASmiC,EAAM9hC,QAAS/tB,EAC/E,CACE,OAAO2vD,EAAQ5gC,EAAIp2C,UAAY+zE,GAAgB39B,EAAIrB,QAASqB,EAAIhB,QAAS/tB,EAE7E,EAGM+vD,CAA2BhhC,EAAKrZ,EAAOu4B,UAAUC,YAAcnf,EAAIpC,sBACrEjX,EAAOu4B,UAAUvS,OAAO/iD,EAE5B,EACIq3E,EAAmB,SAAUjjD,GAC/B,OAAIlK,EAAIhC,GAAGkM,EAAK,gBACP,CAACA,EAAIjkB,cAAc,QACjB+Z,EAAI+5B,SAAS7vB,EAAK,uBAAyB9b,EAAc8b,EAAIkjD,mBAC/D,CACLljD,EACAA,EAAIkjD,mBAGC,CAACljD,EAEZ,EACImjD,EAAc,SAAUnjD,GAC1B,IAAIrJ,EAAWg1C,GAAkBhjC,GACjC,QAAKhS,GAGuC,UAAxCqJ,EAAIvzB,aAAa,oBAGjBuzB,IAAQ2I,EAAOy4B,YAGftrC,EAAI+5B,SAAS7vB,EAAK,sBACbtJ,GAAKX,GAAqBiK,EAAIkjD,mBAAoBvsD,GAElDD,GAAKX,GAAqBiK,GAAMrJ,GAE3C,EAQIysD,EAAc,SAAU3kE,EAASnT,EAAM+D,GACzC,GAAI6U,EAAc7U,GAAQ,CACxB,IAAIg0E,EAAUJ,EAAiBxkE,GAC/BqJ,EAAOu7D,GAAS,SAAUz3E,GACpBA,EAAO4O,MAAMlP,KAAUq9B,EAAOwL,OAAO4H,QAAQnwC,EAAOksB,SAAS7lB,cAAe3G,GAC9EwqB,EAAI0iC,SAAS5sD,EAAQN,EAAM+D,GAE3BymB,EAAIm/B,UAAUrpD,EAAQN,EAAM,GAAK+D,EAErC,GACF,CACF,EACIi0E,EAAkB,SAAUC,EAAUzlE,EAAOie,GAC/CqnD,EAAYG,EAAU,QAASzlE,GAC/BslE,EAAYG,EAAU,SAAUxnD,EAClC,EACIynD,EAAqB,SAAU5sE,GACjC,IAAI6sE,EAAQC,EAAQC,EAChBC,EAAeC,EACnBJ,EAAS7sE,EAAEktE,QAAUnC,EACrB+B,EAAS9sE,EAAEmtE,QAAUnC,EACrB9jE,EAAQ2lE,EAAShC,EAAe,GAAKI,EACrC9lD,EAAS2nD,EAASjC,EAAe,GAAKK,EACtChkE,EAAQA,EAAQ,EAAI,EAAIA,EACxBie,EAASA,EAAS,EAAI,EAAIA,EAExB4nD,GADGf,EAAQtB,IAAgBpS,EAAQoS,MAAsD,IAp/DhE,SAAU34C,GACvC,OAAOA,EAAO6hC,SAAS,2BAA2B,EAAM,UAC1D,CAk/D0DwZ,CAAyBr7C,IAC7Dq3C,GAAGe,gBAAgBnqE,GAEpBopE,GAAGe,gBAAgBnqE,GAEhC+sE,IACErB,EAAImB,GAAUnB,EAAIoB,IACpB3nD,EAASgnC,EAAMjlD,EAAQikE,GACvBjkE,EAAQilD,EAAMhnC,EAASgmD,KAEvBjkE,EAAQilD,EAAMhnC,EAASgmD,GACvBhmD,EAASgnC,EAAMjlD,EAAQikE,KAG3BuB,EAAgB/B,EAAkBzjE,EAAOie,GAGzC6nD,GAFAA,EAAgBnC,EAAelP,SAAS1wD,EAAI4hE,GAEZ,EAAIG,EAAgB,EACpDC,GAFAA,EAAgBpC,EAAelP,SAAShwD,EAAImhE,GAEZ,EAAIG,EAAgB,EACpD/tD,EAAI4iC,UAAU8oB,EAAc,CAC1B/mE,KAAMmpE,EACN5pE,IAAK6pE,EACLI,QAAS,UAEXzC,EAAatkE,UAAYY,EAAQ,YAAcie,EAC3C0lD,EAAe,GAAK,GAAKF,EAAiBjlD,aAAexe,GAC3DgY,EAAI0iC,SAAS+oB,EAAkB,YA1If2C,GA0IuCrC,EAAS/jE,IAE9D2jE,EAAe,GAAK,GAAKF,EAAiBhlD,cAAgBR,GAC5DjG,EAAI0iC,SAAS+oB,EAAkB,WA7ID4C,GA6IwBrC,EAAS/lD,KAEjE0nD,EAASxzC,EAAYm0C,YAAcnC,IACnCyB,EAASzzC,EAAYo0C,aAAenC,IACZ,GACtBpsD,EAAI4iC,UAAU8oB,EAAc,CAC1B/mE,KAAMmpE,EAAgBH,EACtBzpE,IAAK6pE,EAAgBH,IAGpB1B,IAjOmB,SAAUr5C,EAAQ/8B,EAAQkS,EAAOie,EAAQuoD,GACnE37C,EAAO+Z,KAAK,oBAAqB,CAC/B92C,OAAQA,EACRkS,MAAOA,EACPie,OAAQA,EACRuoD,OAAQA,GAEZ,CA2NMC,CAAsB57C,EAAQ24C,EAAaO,EAAQC,EAAQ,UAAYL,EAAen2E,MACtF02E,GAAgB,EAEpB,EACIwC,EAAiB,WACnB,IAAIC,EAAmBzC,EACvBA,GAAgB,EACZyC,IACFrB,EAAY9B,EAAa,QAASxjE,GAClCslE,EAAY9B,EAAa,SAAUvlD,IAErCjG,EAAIysB,OAAO6/B,EAAa,YAAaoB,GACrC1tD,EAAIysB,OAAO6/B,EAAa,UAAWoC,GAC/BnC,IAAiBD,IACnBtsD,EAAIysB,OAAO8/B,EAAc,YAAamB,GACtC1tD,EAAIysB,OAAO8/B,EAAc,UAAWmC,IAEtC1uD,EAAI7c,OAAOsoE,GACXzrD,EAAI7c,OAAOuoE,GACX1rD,EAAI7c,OAAOyoE,GACXgD,EAAepD,GACXmD,IA/OgB,SAAU97C,EAAQ/8B,EAAQkS,EAAOie,EAAQuoD,GAC/D37C,EAAO+Z,KAAK,gBAAiB,CAC3B92C,OAAQA,EACRkS,MAAOA,EACPie,OAAQA,EACRuoD,OAAQA,GAEZ,CAyOMK,CAAkBh8C,EAAQ24C,EAAaxjE,EAAOie,EAAQ,UAAY0lD,EAAen2E,MACjFwqB,EAAIm/B,UAAUqsB,EAAa,QAASxrD,EAAIg/B,UAAUwsB,EAAa,WAEjE34C,EAAOi8C,aACT,EACIF,EAAiB,SAAUG,GAC7BC,IACA,IAAI7R,EAAWn9C,EAAIigC,OAAO8uB,EAAW50C,GACjCi0C,EAAejR,EAASpxD,EACxBsiE,EAAelR,EAAS1wD,EACxBygD,EAAO6hB,EAAUnrE,wBACjBqrE,EAAc/hB,EAAKllD,OAASklD,EAAKhnC,MAAQgnC,EAAKvoD,KAC9CuqE,EAAehiB,EAAKjnC,QAAUinC,EAAK/mC,OAAS+mC,EAAKhpD,IACjDsnE,IAAgBuD,IAClBI,IACA3D,EAAcuD,EACd/mE,EAAQie,EAAS,GAEnB,IAAInlB,EAAI+xB,EAAO+Z,KAAK,iBAAkB,CAAE92C,OAAQi5E,IAC5CK,EAAgBpvD,EAAIg/B,UAAUwsB,EAAaa,EAAsB,KACjEgB,EAAY0B,KAAejuE,EAAEgpC,qBAC/Bn5B,EAAK87D,GAAe,SAAUvhD,EAAQ11B,GACpC,IAAI65E,GAkDJA,EAAYrvD,EAAIiN,IAAI,kBAAoBz3B,KAEtCwqB,EAAI7c,OAAOksE,GAEbA,EAAYrvD,EAAI7lB,IAAIggC,EAAa,MAAO,CACtC,GAAM,kBAAoB3kC,EAC1B,iBAAkB,MAClB,MAAS,mBACT,cAAgB,EAChB,MAAS,UAAYA,EAAO,iCAEf,KAAXmnB,GAAIC,KACNyyD,EAAUryD,iBAAkB,GAE9BgD,EAAIpP,KAAKy+D,EAAW,aAAa,SAAUvuE,GACzCA,EAAEmpC,2BACFnpC,EAAEG,iBAjEY,SAAUH,GACxB,IAtH2BopB,EAsHvBp0B,EAASq3E,EAAiB3B,GAAa,GAC3CK,EAAS/qE,EAAEktE,QACXlC,EAAShrE,EAAEmtE,QACXlC,EAASj2E,EAAO0wB,YAChBwlD,EAASl2E,EAAO2wB,aAChBwlD,EAAQD,EAASD,GACjBJ,EAAiBzgD,GACF11B,KAAOA,EACtBm2E,EAAelP,SAAW,CACxB1wD,EAAGkjE,EAAc/jD,EAAO,GAAKkjD,EAC7B3hE,EAAGyiE,EAAehkD,EAAO,GAAKmjD,GAEhClC,EAAmBhyC,EAAYm0C,YAC/BlC,EAAoBjyC,EAAYo0C,aAChC3C,EAAiB5rD,EAAI7lB,IAAIggC,EAAa,MAAO,CAC3C,MAAS,sBACT,iBAAkB,QAEpBna,EAAI4iC,UAAUgpB,EAAgB,CAC5BzO,SAAU,QACVx4D,KAAM,IACNT,IAAK,IACL8D,MAAO,OACPie,OAAQ,SAEVwlD,EA9IFrS,EAD6BlvC,EA+IWshD,GA7InCxrD,EAAIpB,OAAO,MAAO,CAAEtT,IAAKqR,GAAIM,iBAE7BiN,EAAItiB,WAAU,GA4IjBoY,EAAIs8B,SAASmvB,EAAkB,uBAC/BzrD,EAAIm/B,UAAUssB,EAAkB,iBAAkB,OAClDA,EAAiBzuD,gBAAkB,QACnCgD,EAAI4iC,UAAU6oB,EAAkB,CAC9B9mE,KAAMypE,EACNlqE,IAAKmqE,EACLxW,OAAQ,IAEV2V,EAAgB/B,EAAkBwD,EAAaC,GAC/CzD,EAAiBphE,gBAAgBgiE,GACjClyC,EAAYt8B,YAAY4tE,GACxBzrD,EAAIpP,KAAK07D,EAAa,YAAaoB,GACnC1tD,EAAIpP,KAAK07D,EAAa,UAAWoC,GAC7BnC,IAAiBD,IACnBtsD,EAAIpP,KAAK27D,EAAc,YAAamB,GACpC1tD,EAAIpP,KAAK27D,EAAc,UAAWmC,IAEpChD,EAAe1rD,EAAI7lB,IAAIggC,EAAa,MAAO,CACzC,MAAS,oBACT,iBAAkB,OACjB4xC,EAAS,YAAcC,EAC5B,CAkBEsD,CAAUxuE,EACZ,IACAoqB,EAAOhB,IAAMmlD,EACbrvD,EAAI4iC,UAAUysB,EAAW,CACvB1qE,KAAMsqE,EAAc/jD,EAAO,GAAKkjD,EAAeiB,EAAU/nE,YAAc,EACvEpD,IAAKgrE,EAAehkD,EAAO,GAAKmjD,EAAegB,EAAUjrE,aAAe,GAE5E,IAEA+qE,IAEGnvD,EAAIg/B,UAAUwsB,EAAaa,IAC9Bb,EAAY5tE,aAAayuE,EAAsB+C,EAEnD,EACID,EAAiB,WACnBH,IACIxD,GACFA,EAAYnhE,gBAAgBgiE,GAE9B34D,GAAO+4D,GAAe,SAAUlzE,EAAO/D,GACrC,IAAI65E,EAAYrvD,EAAIiN,IAAI,kBAAoBz3B,GACxC65E,IACFrvD,EAAIysB,OAAO4iC,GACXrvD,EAAI7c,OAAOksE,GAEf,GACF,EACIE,EAAmB,SAAUzuE,GAC/B,IAAc0uE,EACVC,EAAiB,SAAU1vD,EAAMR,GACnC,GAAIQ,EACF,GACE,GAAIA,IAASR,EACX,OAAO,QAEFQ,EAAOA,EAAK5hB,WAEzB,EACI+tE,GAAiBr5C,EAAOC,UAG5BniB,EAAKqP,EAAI64B,OAAO,iDAAiD,SAAU62B,GACzEA,EAAIrlE,gBAAgBgiE,EACtB,IACAmD,EAAwB,cAAX1uE,EAAE7B,KAAuB6B,EAAEhL,OAASs1D,EAAU2F,UAEvD0e,EADJD,EAAaxvD,EAAI6+B,EAAE2wB,GAAYxyB,QAAQ,2DAA2D,GACnE7iB,KAC7Bw1C,IAEIF,EADOrkB,EAAUwkB,UAAS,GACDJ,IAAeC,EAAerkB,EAAUykB,QAAO,GAAOL,IACjFZ,EAAeY,GAInBL,IACF,EACIW,EAA+B,SAAU5lD,GAC3C,OAAOohD,GAAyB1B,GAAyB/2C,EAAOy4B,UAAWphC,GAC7E,EACI8kD,EAA2B,WAC7Bt7D,GAAO+4D,GAAe,SAAUvhD,GAC1BA,EAAOhB,MACTlK,EAAIysB,OAAOvhB,EAAOhB,YACXgB,EAAOhB,IAElB,GACF,EACIylD,EAAqB,WACvB,IACE98C,EAAO6zC,SAASqJ,YAAY,wBAAwB,EAAO,QAC7D,CAAE,MAAOhkD,GACT,CACF,EAwDA,OAvDA8G,EAAO8pB,GAAG,QAAQ,WAEhB,GADAgzB,IACIhzD,GAAI5B,QAAQ3B,QAAUuD,GAAI5B,QAAQ7B,SAAU,CAC9C2Z,EAAO8pB,GAAG,mBAAmB,SAAU77C,GACrC,IAAIhL,EAASgL,EAAEhL,OAAQksB,EAAWlsB,EAAOksB,SACpCkqD,IAAiB,mBAAmBpyE,KAAKkoB,IAAc8tD,EAA6Bh6E,KACtE,IAAbgL,EAAEu2C,QACJxkB,EAAOu4B,UAAUvS,OAAO/iD,EAAqB,UAAbksB,GAEnB,cAAXlhB,EAAE7B,MACJ4zB,EAAOi8C,cAGb,IACA,IAAIkB,EAA0B,SAAUlvE,GACtC,IAAImvE,EAAgB,SAAUlwD,GAC5ByS,GAAMI,iBAAiBC,GAAQ,WAC7B,OAAOA,EAAOu4B,UAAUvS,OAAO94B,EACjC,GACF,EACA,GAAI+vD,EAA6BhvE,EAAEhL,SAAW0yB,GAAU1nB,EAAEhL,QAGxD,OAFAgL,EAAEG,sBACFgvE,EAAcnvE,EAAEhL,QAGd,mBAAmBgE,KAAKgH,EAAEhL,OAAOksB,YACnClhB,EAAEG,iBACuB,QAArBH,EAAEhL,OAAO6K,SACXsvE,EAAcnvE,EAAEhL,QAGtB,EACAkqB,EAAIpP,KAAKupB,EAAa,kBAAmB61C,GACzCn9C,EAAO8pB,GAAG,UAAU,WAClB,OAAO38B,EAAIysB,OAAOtS,EAAa,kBAAmB61C,EACpD,GACF,CACA,IAAIE,EAA4B19C,GAAMS,UAAS,SAAUnyB,GAClD+xB,EAAOs9C,WACVZ,EAAiBzuE,EAErB,IACA+xB,EAAO8pB,GAAG,0DAA2DuzB,GACrEr9C,EAAO8pB,GAAG,wBAAwB,SAAU77C,GACtC0qE,GAAwC,UAAzBA,EAAYxpD,UAC7BkuD,EAA0BpvE,EAE9B,IACA+xB,EAAO8pB,GAAG,YAAawyB,GACvBt8C,EAAO8pB,GAAG,wBAAyBowB,GAAwB,EAC7D,IACAl6C,EAAO8pB,GAAG,SAAUqyB,GAIb,CACL3B,YAAaA,EACbuB,eAAgBA,EAChBO,eAAgBA,EAChBI,iBAAkBA,EAClBxiC,QARY,WACZy+B,EAAcC,EAAmBG,EAAiB,IACpD,EAQF,EAEIwE,GAAgB,SAAUrwD,GAC5B,OAAOsI,GAAwBtI,IAASuI,GAAyBvI,EACnE,EAuCIswD,GAAY,SAAUxlC,EAASK,EAASpnB,GAC1C,IAAIqnC,EAAK8H,EACLqd,EAAWxsD,EACf,GAAIwsD,EAASC,wBACXtd,EAAQqd,EAASC,uBAAuB1lC,EAASK,OAE/CigB,EAAMrnC,EAAIy9B,eACNqD,SAASqO,EAAMud,WAAYvd,EAAM36B,QACrC6yB,EAAIgC,UAAS,SAEV,GAAImjB,EAASG,oBAClBtlB,EAAMmlB,EAASG,oBAAoB5lC,EAASK,QACvC,GAAIolC,EAASr2E,KAAKy2E,gBAAiB,CACxCvlB,EAAMmlB,EAASr2E,KAAKy2E,kBACpB,IACEvlB,EAAIwlB,YAAY9lC,EAASK,GACzBigB,EAAIgC,UAAS,EACf,CAAE,MAAOphC,GACPo/B,EA/CmB,SAAUtgB,EAASK,EAASpnB,GACnD,IAAI8sD,EACAjoE,EAAUmb,EAAI+sD,iBAAiBhmC,EAASK,GACxCigB,EAAMrnC,EAAI7pB,KAAKy2E,kBAWnB,GAVK/nE,GAA+B,SAApBA,EAAQhI,UACtBgI,EAAUmb,EAAI7pB,MAEhBkxD,EAAI2lB,kBAAkBnoE,IAEtBioE,GADAA,EAAQ7yD,GAAMhN,QAAQo6C,EAAIqE,mBACZ9zD,MAAK,SAAUc,EAAGC,GAG9B,OAFAD,EAAImqB,KAAK6lD,IAAI7lD,KAAKnkB,IAAIhG,EAAE0H,IAAMgnC,EAAS1uC,EAAE2pB,OAAS+kB,KAC9CvkB,KAAK6lD,IAAI7lD,KAAKnkB,IAAI/F,EAAEyH,IAAMgnC,EAASzuC,EAAE0pB,OAAS+kB,GAEpD,KACU51C,OAAS,EAAG,CACpB41C,GAAW0lC,EAAM,GAAGzqD,OAASyqD,EAAM,GAAG1sE,KAAO,EAC7C,IAGE,OAFAinD,EAAIwlB,YAAY9lC,EAASK,GACzBigB,EAAIgC,UAAS,GACNhC,CACT,CAAE,MAAOp/B,GACT,CACF,CACA,OAAO,IACT,CAuBYglD,CAAmBlmC,EAASK,EAASpnB,EAC7C,CACA,OAxBgC,SAAUqnC,EAAK/0B,GACjD,IAAI46C,EAAgB7lB,GAAOA,EAAI6lB,cAAgB7lB,EAAI6lB,gBAAkB,KACrE,OAAO1oD,GApCU,SAAUvI,EAAMqW,EAAU5gB,GAC3C,KAAOuK,GAAQA,IAASqW,GAAU,CAChC,GAAI5gB,EAAUuK,GACZ,OAAOA,EAETA,EAAOA,EAAK5hB,UACd,CACA,OAAO,IACT,CA4BkC8yE,CAAaD,EAAe56C,EAAUg6C,KAAkB,KAAOjlB,CACjG,CAqBW+lB,CAA8B/lB,EAAKrnC,EAAI7pB,KAChD,CACA,OAAOkxD,CACT,EAEIgmB,GAAS,SAAUC,EAAMld,GAC3B,OAAOkd,GAAQld,GAASkd,EAAKl4C,iBAAmBg7B,EAAKh7B,gBAAkBk4C,EAAKlsB,cAAgBgP,EAAKhP,aAAiBksB,EAAKjsB,eAAiB+O,EAAK/O,cAAgBisB,EAAKhsB,YAAc8O,EAAK9O,SACvL,EAWIisB,GAAc,SAAUtxD,EAAMqW,EAAU5gB,GAC1C,OAAiD,OAVlC,SAAUuK,EAAMqW,EAAU5gB,GACzC,KAAOuK,GAAQA,IAASqW,GAAU,CAChC,GAAI5gB,EAAUuK,GACZ,OAAOA,EAETA,EAAOA,EAAK5hB,UACd,CACA,OAAO,IACT,CAESmzE,CAAWvxD,EAAMqW,EAAU5gB,EACpC,EACI+7D,GAAoB,SAAUxxD,EAAMqW,EAAU5gC,GAChD,OAAO67E,GAAYtxD,EAAMqW,GAAU,SAAUrW,GAC3C,OAAOA,EAAKiC,WAAaxsB,CAC3B,GACF,EACIg8E,GAAU,SAAUzxD,GACtB,OAAOA,GAA0B,UAAlBA,EAAKiC,QACtB,EACIyvD,GAAgB,SAAU1xD,GAC5B,OAAOA,GAAQ,oBAAoBjmB,KAAKimB,EAAKiC,SAC/C,EACI0vD,GAA0B,SAAU3xD,EAAMqW,GAC5C,OAAO+B,GAAmBpY,KAAsD,IAA7CsxD,GAAYtxD,EAAMqW,EAAU8nC,GACjE,EACIyT,GAAmB,SAAU3xD,EAAKD,EAAMpb,GAE1C,IADA,IAAIm2B,EAAS,IAAI5E,GAAcnW,EAAMC,EAAIoiC,UAAUriC,EAAK5hB,WAAY6hB,EAAI4hC,UAAY5hC,EAAI8+B,WACjF/+B,EAAO+a,EAAOn2B,EAAO,OAAS,WACnC,GAAIwjB,GAAOpI,GACT,OAAO,CAGb,EAaI6xD,GAAuB,SAAU5xD,EAAK6xD,EAAa5d,EAAWtvD,EAAMwxB,GACtE,IAAI27C,EAEA/xD,EADA9lB,EAAO+lB,EAAI8+B,UAEXje,EAAsB7gB,EAAIqe,OAAOsH,sBACjCosC,EAAuB/xD,EAAIoiC,UAAUjsB,EAAUh4B,WAAY6hB,EAAI4hC,UAAY3nD,EAC/E,GAAI0K,GAAQwjB,GAAOgO,IAAc07C,GAAe7xD,EAAIskC,QAAQytB,GAC1D,OAAO1gE,EAASJ,KAAKq/C,GAAcn6B,EAAUh4B,WAAY6hB,EAAIk2B,UAAU/f,KAGzE,IADA,IAAI2E,EAAS,IAAI5E,GAAcC,EAAW47C,GACnChyD,EAAO+a,EAAOn2B,EAAO,OAAS,WAAW,CAC9C,GAA2C,UAAvCqb,EAAI+kC,yBAAyBhlC,IAAqB2xD,GAAwB3xD,EAAM9lB,GAClF,OAAOoX,EAAS1B,OAElB,GAAIoY,GAAShI,IAASA,EAAKs1B,UAAU//C,OAAS,EAC5C,OAA2C,IAAvCi8E,GAAkBxxD,EAAM9lB,EAAM,KACzBoX,EAASJ,KAAKq/C,GAAcvwC,EAAMpb,EAAOob,EAAKs1B,UAAU//C,OAAS,IAEnE+b,EAAS1B,OAElB,GAAIqQ,EAAI4hC,QAAQ7hC,IAAS8gB,EAAoB9gB,EAAKiC,SAAS7lB,eACzD,OAAOkV,EAAS1B,OAElBmiE,EAAoB/xD,CACtB,CACA,OAAIk0C,GAAa6d,EACRzgE,EAASJ,KAAKq/C,GAAcwhB,EAAmB,IAEjDzgE,EAAS1B,MAClB,EACIqiE,GAAoB,SAAUhyD,EAAKi0C,EAAW/pD,EAAOihD,GACvD,IAAI1tD,EAAW66B,EAEXvY,EACAkyD,EAFAh4E,EAAO+lB,EAAI8+B,UAEIV,GAAa,EAChC3gD,EAAY0tD,GAAKjhD,EAAQ,QAAU,OAAS,aAC5CouB,EAAS6yB,GAAKjhD,EAAQ,QAAU,OAAS,UACzC,IAAI2nE,EAAc5qD,GAAYxpB,IAAc66B,IAAW76B,EAAU6iB,WAAWhrB,OACxEurC,EAAsB7gB,EAAIqe,OAAOsH,sBAErC,GADAssC,EAAgB/nE,EACZiuB,GAAmB16B,GACrB,OAAO4T,EAAS1B,OASlB,GAPIsX,GAAYxpB,IAAc66B,EAAS76B,EAAU6iB,WAAWhrB,OAAS,IACnE28E,GAAgB,GAEdhqD,GAAaxqB,KACfA,EAAYxD,EACZq+B,EAAS,GAEP76B,IAAcxD,EAAM,CACtB,GAAIg4E,IACFlyD,EAAOtiB,EAAU6iB,WAAWgY,EAAS,EAAIA,EAAS,EAAI,IAC5C,CACR,GAAIH,GAAmBpY,GACrB,OAAO1O,EAAS1B,OAElB,GAAIkxB,EAAoB9gB,EAAKiC,WAAawvD,GAAQzxD,GAChD,OAAO1O,EAAS1B,MAEpB,CAEF,GAAIlS,EAAU4iB,gBAAiB,CAI7B,GAHAiY,EAAS3R,KAAK8mC,KAAKwkB,GAAiB35C,EAAS,EAAIA,EAAS,EAAIA,EAAQ76B,EAAU6iB,WAAWhrB,OAAS,GACpGmI,EAAYA,EAAU6iB,WAAWgY,GACjCA,EAASvQ,GAAStqB,IAAco0E,EAAcp0E,EAAUsvB,KAAKz3B,OAAS,GACjE2+D,GAAax2D,IAAcxD,EAAKmpB,WAAaouD,GAAQ/zE,GACxD,OAAO4T,EAAS1B,OAElB,GA9E8B,SAAU1V,EAAM8lB,GAClD,KAAOA,GAAQA,IAAS9lB,GAAM,CAC5B,GAAIquB,GAAyBvI,GAC3B,OAAO,EAETA,EAAOA,EAAK5hB,UACd,CACA,OAAO,CACT,CAsEU+zE,CAA8Bj4E,EAAMwD,IAAc06B,GAAmB16B,GACvE,OAAO4T,EAAS1B,OAElB,GAAIlS,EAAU4iB,kBAA0C,IAAvBmxD,GAAQ/zE,GAAsB,CAC7DsiB,EAAOtiB,EACP,IAAIq9B,EAAS,IAAI5E,GAAcz4B,EAAWxD,GAC1C,EAAG,CACD,GAAIquB,GAAyBvI,IAASoY,GAAmBpY,GAAO,CAC9Dq+B,GAAa,EACb,KACF,CACA,GAAIr2B,GAAShI,IAASA,EAAKs1B,UAAU//C,OAAS,EAAG,CAC/CgjC,EAAS25C,EAAgB,EAAIlyD,EAAKs1B,UAAU//C,OAC5CmI,EAAYsiB,EACZq+B,GAAa,EACb,KACF,CACA,GAAIvd,EAAoB9gB,EAAKiC,SAAS7lB,iBAAmBs1E,GAAc1xD,GAAO,CAC5EuY,EAAStY,EAAIk2B,UAAUn2B,GACvBtiB,EAAYsiB,EAAK5hB,WACZ8zE,GACH35C,IAEF8lB,GAAa,EACb,KACF,CACF,OAASr+B,EAAOkyD,EAAgBn3C,EAAOj1B,OAASi1B,EAAOzE,OACzD,CACF,CACF,CA8BA,OA7BI49B,IACElsC,GAAStqB,IAAyB,IAAX66B,GACzBs5C,GAAqB5xD,EAAK6xD,EAAa5d,GAAW,EAAMx2D,GAAWkT,MAAK,SAAUhN,GAChFlG,EAAYkG,EAAIlG,YAChB66B,EAAS30B,EAAI20B,SACb8lB,GAAa,CACf,IAEEn3B,GAAYxpB,MACdsiB,EAAOtiB,EAAU6iB,WAAWgY,MAE1BvY,EAAOtiB,EAAU6iB,WAAWgY,EAAS,KAEnCvY,IAAQoI,GAAOpI,IA5HR,SAAUA,EAAMvqB,GAC/B,OAAOuqB,EAAK6C,iBA2HsC,MA3HnB7C,EAAK6C,gBAAgBZ,QACtD,CA0HmCmwD,CAAWpyD,IAAe4xD,GAAiB3xD,EAAKD,GAAM,IAAW4xD,GAAiB3xD,EAAKD,GAAM,IACxH6xD,GAAqB5xD,EAAK6xD,EAAa5d,GAAW,EAAMl0C,GAAMpP,MAAK,SAAUhN,GAC3ElG,EAAYkG,EAAIlG,YAChB66B,EAAS30B,EAAI20B,SACb8lB,GAAa,CACf,MAIF6zB,IAAkBhe,GAAalsC,GAAStqB,IAAc66B,IAAW76B,EAAU43C,UAAU//C,QACvFs8E,GAAqB5xD,EAAK6xD,EAAa5d,GAAW,EAAOx2D,GAAWkT,MAAK,SAAUhN,GACjFlG,EAAYkG,EAAIlG,YAChB66B,EAAS30B,EAAI20B,SACb8lB,GAAa,CACf,IAEKA,EAAa/sC,EAASJ,KAAKq/C,GAAc7yD,EAAW66B,IAAWjnB,EAAS1B,MACjF,EACIyiE,GAAc,SAAUpyD,EAAKmrC,GAC/B,IAAI8I,EAAY9I,EAAI8I,UAAWoe,EAAUlnB,EAAI8E,aACzCwM,EAAWnM,GAAcU,eAAe7F,GAc5C,OAbA6mB,GAAkBhyD,EAAKi0C,GAAW,EAAMoe,GAAS1hE,MAAK,SAAUhN,GACzDswD,GAAc3D,GAAcY,QAAQuL,EAAU94D,IACjD0uE,EAAQztB,SAASjhD,EAAIlG,YAAakG,EAAI20B,SAE1C,IACK27B,GACH+d,GAAkBhyD,EAAKi0C,GAAW,EAAOoe,GAAS1hE,MAAK,SAAUhN,GAC/D0uE,EAAQxtB,OAAOlhD,EAAIlG,YAAakG,EAAI20B,SACtC,IAEE27B,GACFoe,EAAQllB,UAAS,GAEZgkB,GAAOhmB,EAAKknB,GAAWhhE,EAAS1B,OAAS0B,EAASJ,KAAKohE,EAChE,EAEI7Z,GAAY,SAAUz4C,EAAMuY,GAC9B,OAAOvY,EAAKy4C,UAAUlgC,EACxB,EACIla,GAAQ,SAAU+sC,GACpB,IAAIjyB,EAAiBiyB,EAAIjyB,eAAgBgsB,EAAciG,EAAIjG,YAAaC,EAAegG,EAAIhG,aAAcC,EAAY+F,EAAI/F,UAwBzH,OAvBIlsB,IAAmBisB,GAAgBp9B,GAASmR,GAC1CgsB,EAAc,GAAKA,EAAchsB,EAAemc,UAAU//C,SAE5D4jC,GADAisB,EAAeqT,GAAUt/B,EAAgBgsB,IACXtiC,gBAC1BwiC,EAAYF,GAEdhsB,EAAiBisB,EAAeqT,GAAUrT,EAD1CC,GAAwBF,GAC2CtiC,gBACnEwiC,EAAYD,EAAa9P,UAAU//C,OACnC4vD,EAAc,GAEdE,EAAY,IAIZr9B,GAASmR,IAAmBgsB,EAAc,GAAKA,EAAchsB,EAAemc,UAAU//C,SACxF4jC,EAAiBs/B,GAAUt/B,EAAgBgsB,GAC3CA,EAAc,GAEZn9B,GAASo9B,IAAiBC,EAAY,GAAKA,EAAYD,EAAa9P,UAAU//C,SAEhF8vD,GADAD,EAAeqT,GAAUrT,EAAcC,GAAWxiC,iBACzByyB,UAAU//C,SAGhC,CACL4jC,eAAgBA,EAChBgsB,YAAaA,EACbC,aAAcA,EACdC,UAAWA,EAEf,EAEIktB,GAAa,SAAUtyD,GAYzB,MAAO,CACLP,KAZS,SAAU0rC,EAAK5yD,GACxB,OAAO6qE,GAAOpjD,EAAKmrC,EAAK5yD,EAC1B,EAWE6lB,MAVYA,GAWZm0D,UAVc,SAAUpnB,GACxB,OAAOinB,GAAYpyD,EAAKmrC,GAAKr7C,KAAKL,GAAO,SAAU+iE,GAGjD,OAFArnB,EAAIvG,SAAS4tB,EAAct5C,eAAgBs5C,EAActtB,aACzDiG,EAAItG,OAAO2tB,EAAcrtB,aAAcqtB,EAAcptB,YAC9C,CACT,GACF,EAMF,EACAktB,GAAWG,cAAgBtB,GAC3BmB,GAAWI,uBAAyBrC,GACpCiC,GAAWxkB,gBAAkBA,GAC7BwkB,GAAWvhB,QAAUhD,GAErB,IAqfI4kB,GA7cAC,GAxCY,SAAUp9E,EAAMq9E,GAC9B,IASI5lD,EAAM,SAAUtkB,GAClB,IAAIoJ,EA6BsB,SAAUpJ,GACtC,IAAIqX,EAAMrX,EAAQqX,IAClB,OAAO8E,GAAOnc,GAAWqX,EAAIpc,wBAAwBqiB,OAASjG,EAAI5b,YACpE,CAhCYyuE,CAAUlqE,GAClB,GAAIoJ,GAAK,GAAW,OAANA,EAAY,CACxB,IAAI6X,EAAMN,GAAM3gB,EAASnT,GACzB,OAAOs9E,WAAWlpD,IAAQ,CAC5B,CACA,OAAO7X,CACT,EAEIghE,EAAY,SAAUpqE,EAASqqE,GACjC,OAAOxgE,EAAMwgE,GAAY,SAAUzgE,EAAKgX,GACtC,IAAI9pB,EAAM6pB,GAAM3gB,EAAS4gB,GACrBhwB,OAAgBpE,IAARsK,EAAoB,EAAIsK,SAAStK,EAAK,IAClD,OAAOqK,MAAMvQ,GAASgZ,EAAMA,EAAMhZ,CACpC,GAAG,EACL,EAMA,MAAO,CACLy8B,IA/BQ,SAAUrtB,EAAS03C,GAC3B,IAAK/xC,EAAS+xC,KAAOA,EAAElhC,MAAM,YAC3B,MAAM,IAAIlY,MAAMzR,EAAO,wDAA0D6qD,GAEnF,IAAIrgC,EAAMrX,EAAQqX,IACd+I,GAAY/I,KACdA,EAAItb,MAAMlP,GAAQ6qD,EAAI,KAE1B,EAwBEpzB,IAAKA,EACLgmD,SAhBahmD,EAiBb8lD,UAAWA,EACXvwE,IAVQ,SAAUmG,EAASpP,EAAOy5E,GAClC,IAAIE,EAAuBH,EAAUpqE,EAASqqE,GAE9C,OADkBz5E,EAAQ25E,EAAuB35E,EAAQ25E,EAAuB,CAElF,EAQF,CAEUC,CAAU,UAQhBC,GAAS,SAAUC,EAAYvvD,GAEjC,OADYuvD,EAAWC,KAAKxvD,GACfhU,KAAKb,EAAS,KAAK,SAAU3C,GACxC,IAAIiT,EAAS8zD,EAAW/+C,MAAMhoB,GAC1BinE,EAAOH,GAAOC,EAAY9zD,GAC9B,MAAO,CAACjT,GAAG9N,OAAO+0E,EACpB,GACF,EAeIC,GAA0Bp9E,OAAOq9E,OAAO,CACxCC,UAAW,KACXJ,KAXO,SAAUxvD,GACnB,IAAI1I,EAEJ,OADc0I,EAAI9D,MAAQjpB,SAAWsa,EAAS1B,OAAS0B,EAASC,KAAoC,QAA9B8J,EAAK0I,EAAI9D,IAAI0C,mBAAgC,IAAPtH,OAAgB,EAASA,EAAGu4D,eACzH13E,IAAIgkB,GACrB,EAQIqU,MAPQ,SAAU3rB,GACpB,OAAO6Z,GAAgB7Z,EACzB,IA0BIirE,GAAqB,SAAUjrE,GACjC,MAAyB,aAAlBnT,GAAKmT,EACd,EA+CIkrE,GAAa,SAAUlrE,EAASmrE,GAClC,IAAInwE,EA5jUS,SAAUgF,GACvB,IAAImb,EAAMnb,EAAQqX,IAAIuC,cAClBtoB,EAAO6pB,EAAI7pB,KACXyrB,EAAM5B,EAAIpB,YACVxC,EAAO4D,EAAI/f,gBACf,GAAI9J,IAAS0O,EAAQqX,IACnB,OAAOiF,GAAchrB,EAAKmrB,WAAYnrB,EAAKorB,WAE7C,IAAIrhB,EAAYkhB,GAAmBQ,aAAiC,EAASA,EAAI5hB,YAAaoc,EAAKlc,WAC/FY,EAAasgB,GAAmBQ,aAAiC,EAASA,EAAIquD,YAAa7zD,EAAKtb,YAChGumC,EAAYjmB,GAAmBhF,EAAKirB,UAAWlxC,EAAKkxC,WACpDH,EAAa9lB,GAAmBhF,EAAK8qB,WAAY/wC,EAAK+wC,YAC1D,OAAO7lB,GAASxc,GAASqc,UAAUpgB,EAAaomC,EAAYhnC,EAAYmnC,EAC1E,CA+iUY6oC,CAASrrE,GACfsd,EArGM,SAAUtd,GACpB,OAAOiqE,GAAI3lD,IAAItkB,EACjB,CAmGesrE,CAAMtrE,GACnB,MAAO,CACLA,QAASA,EACTwd,OAAQxiB,EAAIO,IAAM+hB,EAClBA,OAAQA,EACRtiB,IAAKA,EACLwiD,QAAS2tB,EAEb,EAYII,GAAa,SAAUrhD,EAAQvmB,EAAG6+C,EAAKtlC,GACzCsuD,GAAathD,GAAQ,SAAU7iB,EAAIs2D,GACjC,OAAO8N,GAAgBvhD,EAAQvmB,EAAG6+C,EAAKtlC,EACzC,GAAGslC,EACL,EACIkpB,GAAmB,SAAUxhD,EAAQ/O,EAAKxX,EAAG4X,EAAQ2B,GACvD,IAAIkH,EAAO,CACT7C,IAAKhG,EAAOvb,QAAQqX,IACpB6F,WAAYA,IA5Ec,SAAUgN,EAAQ9F,GAE9C,OADkB8F,EAAO+Z,KAAK,iBAAkB7f,GAC7B+c,oBACrB,EA2EMwqC,CAAwBzhD,EAAQ9F,KAIpCzgB,EAAEwX,EADc0B,GAAM1B,GAAK5f,IACTggB,EAAQ2B,GA9EO,SAAUgN,EAAQ9F,GACnD8F,EAAO+Z,KAAK,sBAAuB7f,EACrC,CA6EEwnD,CAA6B1hD,EAAQ9F,GACvC,EACIqnD,GAAkB,SAAUvhD,EAAQvmB,EAAG6+C,EAAKtlC,GAC9C,IAAI5rB,EAAOgmB,GAAqB4S,EAAOy4B,WACnCxnC,EAAM7D,GAAqB4S,EAAO6zC,UAC/BzsE,EAx0TE+lB,IAAI1Y,YAy0Tb,IAhC2BqB,EAAS2vB,EAChCyrC,EACA2D,EA8BAxjD,GAhCuBvb,EAgCDsX,GAAqBkrC,EAAIjyB,gBAhCfZ,EAgCgC6yB,EAAIjG,YA/BpE6e,EAnDQ,SAAUp7D,EAAS2vB,GAC/B,IAAIzT,EAAa7B,GAASra,GAC1B,GAA0B,IAAtBkc,EAAWvvB,QAAgBs+E,GAAmBjrE,GAChD,MAAO,CACLA,QAASA,EACT2vB,OAAQA,GAEL,GAAIA,EAASzT,EAAWvvB,SAAWs+E,GAAmB/uD,EAAWyT,IACtE,MAAO,CACL3vB,QAASkc,EAAWyT,GACpBA,OAAQ,GAGV,IAAIwd,EAAOjxB,EAAWA,EAAWvvB,OAAS,GAC1C,OAAIs+E,GAAmB99B,GACd,CACLntC,QAASA,EACT2vB,OAAQA,GAGS,QAAf9iC,GAAKsgD,GACA,CACLntC,QAASmtC,EACTxd,OAAQ,GAEDnW,GAAS2zB,GACX,CACLntC,QAASmtC,EACTxd,OAAQstC,GAAM9vB,GAAMxgD,QAGf,CACLqT,QAASmtC,EACTxd,OAAQtV,GAAS8yB,GAAMxgD,OAKjC,CAamBk/E,CAAQ7rE,EAAS2vB,GAC9BovC,EAAOznD,GAAsB,2EACjCgE,GAAS8/C,EAAWp7D,QAAS++D,GACtBmM,GAAWnM,GAAM,WACtB,OAAO/iD,GAAS+iD,EAClB,KA2BA2M,GAAiBxhD,EAAQ/O,EAAKxX,EAAG4X,EAAQ2B,GACzC3B,EAAOiiC,SACT,EACIsuB,GAAc,SAAU5hD,EAAQlqB,EAAS2D,EAAGuZ,GAC9C,IAAI/B,EAAM7D,GAAqB4S,EAAO6zC,UACtC2N,GAAiBxhD,EAAQ/O,EAAKxX,EA9BZ,SAAU3D,GAC5B,OAAOkrE,GAAW5zD,GAAqBtX,GAAU4F,EACnD,CA4BmCmmE,CAAc/rE,GAAUkd,EAC3D,EACIsuD,GAAe,SAAUthD,EAAQvmB,EAAG6+C,GACtC,IAAIwpB,EAAexpB,EAAIjyB,eACnBgsB,EAAciG,EAAIjG,YAClB0vB,EAAazpB,EAAIhG,aACjBC,EAAY+F,EAAI/F,UACpB94C,EAAE2T,GAAqB00D,GAAe10D,GAAqB20D,IAC3D,IAAI5kB,EAASn9B,EAAO7S,IAAIshC,YACxB0O,EAAOpL,SAAS+vB,EAAczvB,GAC9B8K,EAAOnL,OAAO+vB,EAAYxvB,GAC1BvyB,EAAOu4B,UAAU2U,OAAO5U,EAC1B,EACI0pB,GAAiB,SAAU3wD,EAAQ4wD,EAAYjvD,EAAY/B,GAC7D,IAAIngB,EAAMugB,EAAOvgB,IACjB,GAAIkiB,EACF/P,GAAGnS,EAAIgB,KAAMhB,EAAIO,IAAK4f,OACjB,CACL,IAAIrX,EAAI9I,EAAIO,IAAM4wE,EAAa5wD,EAAO+B,OACtCnQ,GAAGnS,EAAIgB,KAAM8H,EAAGqX,EAClB,CACF,EACIixD,GAAqB,SAAUjxD,EAAK9f,EAAW8wE,EAAY5wD,EAAQ2B,GACrE,IAAImvD,EAAiBF,EAAa9wE,EAC9BixE,EAAY/wD,EAAOvgB,IAAIO,IACvBgxE,EAAehxD,EAAOiC,OACtBgvD,EAAqBD,EAAeD,GAAaH,EACjDG,EAAYjxE,EACd6wE,GAAe3wD,EAAQ4wD,GAA2B,IAAfjvD,EAAsB/B,GAChDmxD,EAAYD,EAErBH,GAAe3wD,EAAQ4wD,EADXK,GAAoC,IAAftvD,GAAsC,IAAfA,EACd/B,GACjCoxD,EAAeF,IAAmBG,GAC3CN,GAAe3wD,EAAQ4wD,GAA2B,IAAfjvD,EAAqB/B,EAE5D,EACIsxD,GAAa,SAAUtxD,EAAK9f,EAAWkgB,EAAQ2B,GACjD,IAAIivD,EAAahxD,EAAI9D,IAAI0C,YAAYpe,YACrCywE,GAAmBjxD,EAAK9f,EAAW8wE,EAAY5wD,EAAQ2B,EACzD,EACIwvD,GAAY,SAAUvxD,EAAK9f,EAAWkgB,EAAQ2B,GAChD,IAAIyvD,EAAkBxxD,EAAI9D,IAAI0C,YAAYpe,YAC1CywE,GAAmBjxD,EAAK9f,EAAWsxE,EAAiBpxD,EAAQ2B,GAC5D,IAAI0vD,EA/JO,SAAU5sE,GACrB,IAAImb,EAAM7D,GAAqBlpB,UAC3BuvB,EAASd,GAAM1B,GACf0xD,EAvBO,SAAU7sE,EAAS0qE,GAC9B,IAAI1zD,EAAI0zD,EAAW/+C,MAAM3rB,GACzB,OAAOyqE,GAAOC,EAAY1zD,EAC5B,CAoBe81D,CAAO9sE,EAAS6qE,IACzBl7C,EAASnT,GAASxc,GAClBoJ,EAAIO,EAAMkjE,GAAQ,SAAU/4E,EAAGD,GACjC,IAAIk5E,EAAMvwD,GAAS3oB,GACnB,MAAO,CACLmI,KAAMlI,EAAEkI,KAAO+wE,EAAI/wE,KACnBT,IAAKzH,EAAEyH,IAAMwxE,EAAIxxE,IAErB,GAAG,CACDS,KAAM,EACNT,IAAK,IAEP,OAAO+gB,GAAclT,EAAEpN,KAAO2zB,EAAO3zB,KAAO2hB,EAAO3hB,KAAMoN,EAAE7N,IAAMo0B,EAAOp0B,IAAMoiB,EAAOpiB,IACvF,CA+IWyxE,CAAOzxD,EAAOvb,SACnBitE,EAAiBxvD,GAAUxvB,QAC3B2+E,EAAGrxE,IAAM0xE,EAAenpE,EAC1BmZ,GAAS1B,EAAOvb,SAAwB,IAAfkd,GAChB0vD,EAAGrxE,IAAM0xE,EAAezvD,QACjCP,GAAS1B,EAAOvb,SAAwB,IAAfkd,EAE7B,EACIgwD,GAAkB,SAAUhjD,EAAQs4B,EAAKtlC,GAC3C,OAAOquD,GAAWrhD,EAAQuiD,GAAYjqB,EAAKtlC,EAC7C,EACIiwD,GAAoB,SAAUjjD,EAAQlqB,EAASkd,GACjD,OAAO4uD,GAAY5hD,EAAQlqB,EAASysE,GAAYvvD,EAClD,EACIkwD,GAAiB,SAAUljD,EAAQs4B,EAAKtlC,GAC1C,OAAOquD,GAAWrhD,EAAQwiD,GAAWlqB,EAAKtlC,EAC5C,EACImwD,GAAmB,SAAUnjD,EAAQlqB,EAASkd,GAChD,OAAO4uD,GAAY5hD,EAAQlqB,EAAS0sE,GAAWxvD,EACjD,EAKIowD,GAAsB,SAAUpjD,EAAQs4B,EAAKtlC,IAChCgN,EAAOyQ,OAASuyC,GAAkBE,IACxCljD,EAAQs4B,EAAKtlC,EACxB,EASIqwD,GAAa,SAAUvtE,GACzB,IAAIkW,EAAO8E,GAAYhb,GAASqX,IAChC,OAAOrX,EAAQqX,MAAQnB,EAAK+3B,aAC9B,EACIu/B,GAAS,SAAUt3D,GAIrB,YAHa,IAATA,IACFA,EAZKoB,GAAqBlpB,WAcrBsa,EAASC,KAAKuN,EAAKmB,IAAI42B,eAAe36C,IAAIgkB,GACnD,EAiBIm2D,GAAQpnD,GAAa,CACvB,CAAE2sB,OAAQ,CAAC,YACX,CACEgB,GAAI,CACF,UACA,WAGJ,CAAEf,MAAO,CAAC,cAmBRzsB,IAXWinD,GAAMz6B,OACZy6B,GAAMz5B,GACDy5B,GAAMx6B,MASV5sB,GAAa,CACrB,CAAEqnD,SAAU,CAAC,QACb,CACE3iC,SAAU,CACR,YACA,eAGJ,CACE4iC,MAAO,CACL,QACA,UACA,SACA,eA4BFC,IARWpnD,GAAIknD,SACJlnD,GAAIukB,SACPvkB,GAAImnD,MAxED,SAAUpsE,EAAOssE,EAASC,EAAQC,GAC/C,MAAO,CACLxsE,MAAOA,EACPssE,QAASA,EACTC,OAAQA,EACRC,QAASA,EAEb,GAgFIC,GAAYlgE,KAASsE,QACrB67D,GAAU,SAAUt+C,EAAQ3vB,GAC9B,IAAInG,EAAM2f,GAASxZ,GAAWi9D,GAAMj9D,GAASrT,OAAS0tB,GAASra,GAASrT,OAAS,EACjF,OAAIgjC,EAAS91B,EACJA,EACE81B,EAAS,EACX,EAEFA,CACT,EACIu+C,GAAe,SAAU1rB,GAC3B,OAAOorB,GAAmBprB,EAAIjhD,MAAO0sE,GAAQzrB,EAAIqrB,QAASrrB,EAAIjhD,OAAQihD,EAAIsrB,OAAQG,GAAQzrB,EAAIurB,QAASvrB,EAAIsrB,QAC7G,EACIK,GAAe,SAAUj4D,EAAMqL,GACjC,OAAQnD,GAAiBmD,EAAIlK,OAASuB,GAAW1C,EAAMqL,IAAQ3d,GAAGsS,EAAMqL,GAC1E,EACI6sD,GAAc,SAAUl4D,GAC1B,OAAO,SAAUssC,GACf,OAAO2rB,GAAaj4D,EAAMssC,EAAIjhD,QAAU4sE,GAAaj4D,EAAMssC,EAAIsrB,OACjE,CACF,EACIO,GAAc,SAAUnkD,GAC1B,OAAyB,IAAlBA,EAAOyQ,QAAmBqzC,GAAUv9D,MAC7C,EACI69D,GAA8B,SAAUllE,GAC1C,OAAOwkE,GAAmBt2D,GAAqBlO,EAAEmnB,gBAAiBnnB,EAAEmzC,YAAajlC,GAAqBlO,EAAEozC,cAAepzC,EAAEqzC,UAC3H,EAaI8xB,GAAsB,SAAUzjB,GAClC,IAAItI,EAAMp0D,SAASwqD,cACnB,IAGE,OAFA4J,EAAIvG,SAAS6O,EAASvpD,MAAM8V,IAAKyzC,EAAS+iB,SAC1CrrB,EAAItG,OAAO4O,EAASgjB,OAAOz2D,IAAKyzC,EAASijB,SAClCrlE,EAASJ,KAAKk6C,EACvB,CAAE,MAAO78B,GACP,OAAOjd,EAAS1B,MAClB,CACF,EACIwnE,GAAQ,SAAUtkD,GACpB,IAlB0BhU,EALF6G,EACpB0lC,EAsBAgsB,EAAcJ,GAAYnkD,IAlBJhU,EAkB0BoB,GAAqB4S,EAAOy4B,YAvBxD5lC,EAMdhD,GAAY7D,GACDmB,IANjBorC,EAAY1lC,EAAItI,gBACTguC,GAAsC,IAAzBA,EAAU+Y,WAAqC9yD,EAASC,KAAK85C,EAAUgZ,WAAW,IAArD/yD,EAAS1B,QACnD1T,IAAIg7E,KAIW76E,OAAO26E,GAAYl4D,KAgBiDxN,EAAS1B,OACvGkjB,EAAO4gC,SAAW2jB,EAAYnnE,SAAWmnE,EAAcvkD,EAAO4gC,QAChE,EAOIpI,GAAS,SAAUx4B,GAErB,OADeA,EAAO4gC,SAAW5gC,EAAO4gC,SAAWpiD,EAAS1B,QAC5CiB,MAAK,SAAU7E,GAC7B,OA1BqB8S,EA0BLoB,GAAqB4S,EAAOy4B,WA1BjBmI,EA0B6B1nD,EAzBnDsF,EAASC,KAAKmiD,GAAUr3D,OAAO26E,GAAYl4D,IAAO5iB,IAAI46E,IADhD,IAAUh4D,EAAM40C,CA2B7B,IAAG7iD,KAAKsmE,GACV,EAWIG,GAAe,CAAEC,kBAJK,SAAUptD,GAClC,IAAIhrB,EAAYgrB,EAAIhrB,UAAU8R,WAC9B,OAAsC,IAA/B9R,EAAU7C,QAAQ,UAAiD,IAA/B6C,EAAU7C,QAAQ,OAC/D,GAsCIk7E,GAAa,SAAU1kD,GACzB,IAAI2kD,EAAiB1lC,IAAM,WACzBqlC,GAAMtkD,EACR,GAAG,GACHA,EAAO8pB,GAAG,QAAQ,WACZ9pB,EAAOyQ,QArCW,SAAUzQ,EAAQ2kD,GAC1C,IAAIC,EAAc,WAChBD,EAAevkD,UACjB,EACAqrB,GAAS+E,IAAIzyC,KAAK7Z,SAAU,UAAW0gF,GACvC5kD,EAAO8pB,GAAG,UAAU,WAClB2B,GAAS+E,IAAI5W,OAAO11C,SAAU,UAAW0gF,EAC3C,GACF,CA8BMC,CAAoB7kD,EAAQ2kD,GAnBP,SAAU3kD,EAAQ2kD,GAC7B/gE,KAASsE,QACX3B,OAZS,SAAUyZ,GAC/BA,EAAO8pB,GAAG,YAAY,WACpBw6B,GAAMtkD,EACR,GACF,CASI8kD,CAAiB9kD,GARC,SAAUA,EAAQ2kD,GACtC3kD,EAAO8pB,GAAG,oBAAoB,SAAU2pB,GACtCkR,EAAevkD,UACjB,GACF,CAMI2kD,CAAgB/kD,EAAQ2kD,GAE1B3kD,EAAO8pB,GAAG,oBAAoB,SAAU77C,IA7BjB,SAAUA,GACjC,MAAkB,eAAXA,EAAE7B,MAAyB6B,EAAE+2E,eACtC,EA4BSC,CAAmBh3E,IACtBq2E,GAAMtkD,EAEV,GACF,CASIklD,CAAqBllD,EAAQ2kD,EAC/B,IACA3kD,EAAO8pB,GAAG,UAAU,WAClB66B,EAAexqC,QACjB,GACF,EAGIgrC,GAAQ15B,GAAS+E,IAYjB40B,GAAc,SAAUplD,EAAQ3I,GAClC,IAAIguD,EAzjGoB,SAAUrlD,GAClC,OAAOA,EAAO6hC,SAAS,qBAAsB,GAAI,SACnD,CAujGuByjB,CAAoBtlD,GACrCtT,EAASy4D,GAAM51B,UAAUl4B,GAAK,SAAUA,GAC1C,OAdoB,SAAUA,GAChC,OAAOmtD,GAAaC,kBAAkBptD,EACxC,CAYWotD,CAAkBptD,MAASguD,GAAiBrlD,EAAO7S,IAAIhC,GAAGkM,EAAKguD,EACxE,IACA,OAAkB,OAAX34D,CACT,EAaI64D,GAAmB,SAAUC,EAAev3E,GAC9C,IAAI+xB,EAAS/xB,EAAE+xB,OACf0kD,GAAW1kD,GACXA,EAAO8pB,GAAG,WAAW,WACnB,IAAI27B,EAAgBD,EAAcC,cAC9BA,IAAkBzlD,IAChBylD,GACFA,EAAc1rC,KAAK,OAAQ,CAAE0rC,cAAezlD,IAE9CwlD,EAAcE,UAAU1lD,GACxBwlD,EAAcC,cAAgBzlD,EAC9BA,EAAO+Z,KAAK,QAAS,CAAE4rC,cAAeF,IACtCzlD,EAAO7xB,OAAM,GAEjB,IACA6xB,EAAO8pB,GAAG,YAAY,WACpBnqB,GAAMI,iBAAiBC,GAAQ,WAC7B,IAAIylD,EAAgBD,EAAcC,cAC7BL,GAAYplD,EA9BA,SAAUA,GAC/B,IACE,IAAIhU,EAAO8E,GAAY1D,GAAqB4S,EAAO4lD,eACnD,OAAOtC,GAAOt3D,GAAM/O,MAAK,WACvB,OAAO/Y,SAASkD,IAClB,IAAG,SAAU8R,GACX,OAAOA,EAAEiU,GACX,GACF,CAAE,MAAO+L,GACP,OAAOh1B,SAASkD,IAClB,CACF,CAmB+By+E,CAAiB7lD,KAAYylD,IAAkBzlD,IACtEA,EAAO+Z,KAAK,OAAQ,CAAE0rC,cAAe,OACrCD,EAAcC,cAAgB,KAElC,GACF,IACK3F,KACHA,GAAyB,SAAU7xE,GACjC,IAAI63E,EAAeN,EAAcM,aAC7BA,GAhlVmB,SAAUvvC,GACrC,GAAIxlB,MAAmBxV,EAAcg7B,EAAMtzC,QAAS,CAClD,IAAI4H,EAAKuiB,GAAqBmpB,EAAMtzC,QACpC,GAAIosB,GAAYxkB,IAYX0Q,EAZmC1Q,EAYbsiB,IAAI44D,aAXzBxvC,EAAMyvC,UAAYzvC,EAAMK,aAAc,CACxC,IAAIA,EAAeL,EAAMK,eACzB,GAAIA,EACF,OAAOp2B,GAAKo2B,EAEhB,CAEJ,CACA,OAAOp4B,EAASC,KAAK83B,EAAMtzC,OAC7B,CAokVQgjF,CAAuBh4E,GAAG6P,MAAK,SAAU7a,GACnCA,EAAOysB,gBAAkBxrB,WACvBjB,IAAWiB,SAASkD,MAASg+E,GAAYU,EAAc7iF,IAAWuiF,EAAcC,gBAAkBK,IACpGA,EAAa/rC,KAAK,OAAQ,CAAE0rC,cAAe,OAC3CD,EAAcC,cAAgB,MAGpC,GAEJ,EACAN,GAAMpnE,KAAK7Z,SAAU,UAAW47E,IAEpC,EACIoG,GAA2B,SAAUV,EAAev3E,GAClDu3E,EAAcC,gBAAkBx3E,EAAE+xB,SACpCwlD,EAAcC,cAAgB,MAE3BD,EAAcM,eACjBX,GAAMvrC,OAAO11C,SAAU,UAAW47E,IAClCA,GAAyB,KAE7B,EAyBIqG,GAAuB,SAAUnmD,EAAQs4B,IAXrB,SAAUtsC,EAAMssC,GACtC,OAJqB,SAAUA,GAC/B,OAAOA,EAAI8I,UAAY5iD,EAASC,KAAKy8C,GAAU5C,EAAIjyB,eAAgBiyB,EAAIjG,cAAcjpD,IAAIgkB,IAAwB5O,EAAS1B,MAC5H,CAESspE,CAAiB9tB,GAAKv6C,MAAK,SAAUmP,GAC1C,OAAIwX,GAAexX,GACV1O,EAASJ,KAAK8O,IACe,IAA3BwB,GAAW1C,EAAMkB,GACnB1O,EAASJ,KAAK4N,GAEdxN,EAAS1B,MAEpB,GACF,EAEEupE,CAAkBj5D,GAAqB4S,EAAOy4B,WAAYH,GAAKv6C,MAAK,SAAUsZ,GAC5E,OAAO6zC,GAAgB7zC,EAAIlK,IAC7B,IAAGlQ,MAAK,WACN+iB,EAAOu4B,UAAUmnB,WAEnB,IAAG,SAAU4G,GACX,OAAOtmD,EAAOu4B,UAAU2U,OAAOoZ,EAASvoB,UAC1C,GACF,EACIwoB,GAAY,SAAUn/E,GACxB,GAAIA,EAAKs+E,UACP,IACEt+E,EAAKs+E,WACP,CAAE,MAAOxsD,GACP9xB,EAAK+G,OACP,MAEA/G,EAAK+G,OAET,EAiBI61C,GAAW,SAAUhkB,GACvB,OAAOA,EAAOyQ,OAXK,SAAUzQ,GAC7B,IAP8B3I,EA3VTvhB,EAkWjB0wE,EAAUxmD,EAAOy4B,UACrB,OAAO+tB,IARuBnvD,EAQIjK,GAAqBo5D,GAPhDnD,GAAWhsD,KA5VGvhB,EA4VYuhB,EA3V1BisD,GAAOxyD,GAAYhb,IAAUvM,QAAO,SAAU0E,GACnD,OAAO6H,EAAQqX,IAAIjf,SAASD,EAAEkf,IAChC,KAyVsC/P,SAQxC,CAQyBqpE,CAAezmD,GAdnB,SAAUA,GAC7B,OAAOA,EAAO0mD,eAAiBrD,GAAWj2D,GAAqB4S,EAAO0mD,eACxE,CAYkDC,CAAe3mD,EACjE,EAkCI4mD,GAAiB,SAAU5mD,GAC7B,OAAOA,EAAOwlD,cAAcE,UAAU1lD,EACxC,EAYI6mD,GAAqB,SAAU76D,EAAMssC,EAAKjhD,EAAOyvE,EAAMr/E,GACzD,IAAImD,EAAYyM,EAAQihD,EAAIjyB,eAAiBiyB,EAAIhG,aAC7C7sB,EAASpuB,EAAQihD,EAAIjG,YAAciG,EAAI/F,UAC3C,OAAO/zC,EAASC,KAAK7T,GAAWxB,IAAIgkB,IAAsBhkB,KAAI,SAAUiuB,GACtE,OAAQyvD,GAASxuB,EAAI8I,UAA4D/pC,EAAhDjH,GAAQiH,EAAK5vB,EAAQ4vB,EAAKoO,IAASnoB,MAAM+Z,EAC5E,IAAGtZ,MAAK,SAAUsZ,GAChB,OAAOhI,GAAYgI,GAAO7Y,EAASJ,KAAKiZ,GAAO3K,GAAO2K,GAAK9tB,OAAO8lB,GACpE,IAAGjmB,KAAI,SAAUiuB,GACf,OAAOA,EAAIlK,GACb,IAAG7P,MAAM0O,EACX,EACI+wD,GAAW,SAAU/wD,EAAMssC,EAAKwuB,GAClC,OAAOD,GAAmB76D,EAAMssC,GAAK,EAAMwuB,GAAM,SAAUzvD,EAAKoO,GAC9D,OAAO3R,KAAK8mC,IAAIpqC,GAAgB6G,GAAMoO,EACxC,GACF,EACIu3C,GAAS,SAAUhxD,EAAMssC,EAAKwuB,GAChC,OAAOD,GAAmB76D,EAAMssC,GAAK,EAAOwuB,GAAM,SAAUzvD,EAAKoO,GAC/D,OAAOA,EAAS,EAAIA,EAAS,EAAIA,CACnC,GACF,EACIshD,GAAqB,SAAU75D,EAAMgtC,GAEvC,IADA,IAAI8sB,EAAO95D,EACJA,GAAQgI,GAAShI,IAAyB,IAAhBA,EAAKzqB,QACpCyqB,EAAOgtC,EAAWhtC,EAAK8C,YAAc9C,EAAK6C,gBAE5C,OAAO7C,GAAQ85D,CACjB,EA6EIC,GAAgB,SAAUjnD,EAAQqxC,GACpC,OAAOpyD,EAAMoyD,GAAQ,SAAU/mD,GAC7B,IAAI+uB,EAAMrZ,EAAO+Z,KAAK,oBAAqB,CAAEzvB,MAAOA,IACpD,OAAO+uB,EAAI/uB,QAAUA,EAAQ+uB,EAAI/uB,MAAQA,CAC3C,GACF,EAEI48D,GAAa,CACf,QAAS,EACT,WAAY,EACZ,SAAU,EACV,MAAO,EACP,WAAY,GACZ,qBAAsB,IAEpBC,GAAS,SAAUj6D,EAAMlB,EAAMwX,GACjC,IAAIK,EAAYL,EAAO,YAAc,aACjCM,EAAcN,EAAO,OAAS,OAClC,GAAItW,EAAK2W,GACP,OAAO3W,EAAK2W,GAEd,GAAI3W,IAASlB,EAAM,CACjB,IAAI+X,EAAU7W,EAAK4W,GACnB,GAAIC,EACF,OAAOA,EAET,IAAK,IAAIitC,EAAW9jD,EAAKR,OAAQskD,GAAYA,IAAahlD,EAAMglD,EAAWA,EAAStkD,OAElF,GADAqX,EAAUitC,EAASltC,GAEjB,OAAOC,CAGb,CACF,EACIqjD,GAAkB,SAAUl6D,GAC9B,IAAKka,GAAiBla,EAAKxmB,OACzB,OAAO,EAET,IAAI4E,EAAa4hB,EAAKR,OACtB,OAAIphB,GAAmC,SAApBA,EAAW3I,OAAmB2I,EAAWu+B,KAAK,WAAa,SAAS5iC,KAAKimB,EAAKxmB,MAInG,EACI8nD,GAAoB,SAAUthC,GAChC,IAAIua,EAA8B,MAAdva,EAAKvqB,OAAiBuqB,EAAK2c,KAAK,SAAW3c,EAAK2c,KAAK,MACzE,OAAO3c,EAAK2c,KAAK,SAAW3c,EAAK2c,KAAK,QAAU3c,EAAKoD,YAAcpD,EAAK2c,KAAK,sBAAwBpC,CACvG,EACI4/C,GAAU,WACZ,SAASA,EAAQ1kF,EAAMyJ,GACrBnG,KAAKtD,KAAOA,EACZsD,KAAKmG,KAAOA,EACC,IAATA,IACFnG,KAAKymC,WAAa,GAClBzmC,KAAKymC,WAAWtjC,IAAM,CAAC,EAE3B,CAoPA,OAnPAi+E,EAAQt7D,OAAS,SAAUppB,EAAMgI,GAC/B,IAAIuiB,EAAO,IAAIm6D,EAAQ1kF,EAAMukF,GAAWvkF,IAAS,GAMjD,OALIgI,GACFkW,GAAOlW,GAAO,SAAUjE,EAAOmuB,GAC7B3H,EAAK2c,KAAKhV,EAAUnuB,EACtB,IAEKwmB,CACT,EACAm6D,EAAQtvE,UAAU7H,QAAU,SAAUgd,GACpC,IAAI5O,EAAOrY,KAMX,OALIinB,EAAKR,QACPQ,EAAK5c,SAEPgO,EAAKgpE,OAAOp6D,EAAM5O,GAClBA,EAAKhO,SACEgO,CACT,EACA+oE,EAAQtvE,UAAU8xB,KAAO,SAAUlnC,EAAM+D,GACvC,IACIiE,EADA2T,EAAOrY,KAEX,GAAoB,iBAATtD,EAMT,OALIA,SACFke,GAAOle,GAAM,SAAU+D,EAAOjD,GAC5B6a,EAAKurB,KAAKpmC,EAAKiD,EACjB,IAEK4X,EAET,GAAI3T,EAAQ2T,EAAKouB,WAAY,CAC3B,QAAcpqC,IAAVoE,EAAqB,CACvB,GAAc,OAAVA,EAAgB,CAClB,GAAI/D,KAAQgI,EAAMvB,IAAK,QACduB,EAAMvB,IAAIzG,GAEjB,IADA,IAAIH,EAAImI,EAAMlI,OACPD,KACL,GAAImI,EAAMnI,GAAGG,OAASA,EAEpB,OADAgI,EAAMglC,OAAOntC,EAAG,GACT8b,CAGb,CACA,OAAOA,CACT,CACA,GAAI3b,KAAQgI,EAAMvB,KAEhB,IADI5G,EAAImI,EAAMlI,OACPD,KACL,GAAImI,EAAMnI,GAAGG,OAASA,EAAM,CAC1BgI,EAAMnI,GAAGkE,MAAQA,EACjB,KACF,OAGFiE,EAAMD,KAAK,CACT/H,KAAMA,EACN+D,MAAOA,IAIX,OADAiE,EAAMvB,IAAIzG,GAAQ+D,EACX4X,CACT,CACA,OAAO3T,EAAMvB,IAAIzG,EACnB,CACF,EACA0kF,EAAQtvE,UAAUyxC,MAAQ,WACxB,IAEI+9B,EAFAjpE,EAAOrY,KACPujD,EAAQ,IAAI69B,EAAQ/oE,EAAK3b,KAAM2b,EAAKlS,MAExC,GAAIm7E,EAAYjpE,EAAKouB,WAAY,CAC/B,IAAI86C,EAAa,GACjBA,EAAWp+E,IAAM,CAAC,EAClB,IAAK,IAAI5G,EAAI,EAAGsf,EAAIylE,EAAU9kF,OAAQD,EAAIsf,EAAGtf,IAAK,CAChD,IAAIilF,EAAWF,EAAU/kF,GACH,OAAlBilF,EAAS9kF,OACX6kF,EAAWA,EAAW/kF,QAAU,CAC9BE,KAAM8kF,EAAS9kF,KACf+D,MAAO+gF,EAAS/gF,OAElB8gF,EAAWp+E,IAAIq+E,EAAS9kF,MAAQ8kF,EAAS/gF,MAE7C,CACA8iD,EAAM9c,WAAa86C,CACrB,CAGA,OAFAh+B,EAAM9iD,MAAQ4X,EAAK5X,MACnB8iD,EAAMk+B,WAAappE,EAAKopE,WACjBl+B,CACT,EACA69B,EAAQtvE,UAAUqxC,KAAO,SAAUh+C,GACjC,IAAIkT,EAAOrY,KAGX,OAFAqY,EAAKoO,OAAO46D,OAAOl8E,EAASkT,GAC5BlT,EAAQqmB,OAAOnT,GACRA,CACT,EACA+oE,EAAQtvE,UAAUga,OAAS,WAEzB,IADA,IAAIzT,EAAOrY,KACFinB,EAAO5O,EAAKgS,WAAYpD,GAAO,CACtC,IAAIla,EAAOka,EAAKla,KAChBsL,EAAKgpE,OAAOp6D,EAAM5O,GAAM,GACxB4O,EAAOla,CACT,CACAsL,EAAKhO,QACP,EACA+2E,EAAQtvE,UAAUzH,OAAS,WACzB,IAAIgO,EAAOrY,KAAMymB,EAASpO,EAAKoO,OAAQ1Z,EAAOsL,EAAKtL,KAAMwwB,EAAOllB,EAAKklB,KAoBrE,OAnBI9W,IACEA,EAAO4D,aAAehS,GACxBoO,EAAO4D,WAAatd,EAChBA,IACFA,EAAKwwB,KAAO,OAGdA,EAAKxwB,KAAOA,EAEV0Z,EAAO6D,YAAcjS,GACvBoO,EAAO6D,UAAYiT,EACfA,IACFA,EAAKxwB,KAAO,OAGdA,EAAKwwB,KAAOA,EAEdllB,EAAKoO,OAASpO,EAAKtL,KAAOsL,EAAKklB,KAAO,MAEjCllB,CACT,EACA+oE,EAAQtvE,UAAU0Z,OAAS,SAAUvE,GACnC,IAAI5O,EAAOrY,KACPinB,EAAKR,QACPQ,EAAK5c,SAEP,IAAI2yC,EAAO3kC,EAAKiS,UAShB,OARI0yB,GACFA,EAAKjwC,KAAOka,EACZA,EAAKsW,KAAOyf,EACZ3kC,EAAKiS,UAAYrD,GAEjB5O,EAAKiS,UAAYjS,EAAKgS,WAAapD,EAErCA,EAAKR,OAASpO,EACP4O,CACT,EACAm6D,EAAQtvE,UAAUuvE,OAAS,SAAUp6D,EAAMy6D,EAAS7+B,GAC9C57B,EAAKR,QACPQ,EAAK5c,SAEP,IAAIoc,EAASi7D,EAAQj7D,QAAUzmB,KAqB/B,OApBI6iD,GACE6+B,IAAYj7D,EAAO4D,WACrB5D,EAAO4D,WAAapD,EAEpBy6D,EAAQnkD,KAAKxwB,KAAOka,EAEtBA,EAAKsW,KAAOmkD,EAAQnkD,KACpBtW,EAAKla,KAAO20E,EACZA,EAAQnkD,KAAOtW,IAEXy6D,IAAYj7D,EAAO6D,UACrB7D,EAAO6D,UAAYrD,EAEnBy6D,EAAQ30E,KAAKwwB,KAAOtW,EAEtBA,EAAKla,KAAO20E,EAAQ30E,KACpBka,EAAKsW,KAAOmkD,EACZA,EAAQ30E,KAAOka,GAEjBA,EAAKR,OAASA,EACPQ,CACT,EACAm6D,EAAQtvE,UAAUy+D,OAAS,SAAU7zE,GAGnC,IAFA,IACI2f,EAAa,GACR4K,EAFEjnB,KAEUqqB,WAAYpD,EAAMA,EAAOi6D,GAAOj6D,EAF1CjnB,MAGLinB,EAAKvqB,OAASA,GAChB2f,EAAW5X,KAAKwiB,GAGpB,OAAO5K,CACT,EACA+kE,EAAQtvE,UAAUoY,SAAW,WAG3B,IAFA,IACI7N,EAAa,GACR4K,EAFEjnB,KAEUqqB,WAAYpD,EAAMA,EAAOA,EAAKla,KACjDsP,EAAW5X,KAAKwiB,GAElB,OAAO5K,CACT,EACA+kE,EAAQtvE,UAAU4Z,MAAQ,WACxB,IAAIrT,EAAOrY,KACX,GAAIqY,EAAKgS,WAAY,CAEnB,IADA,IAAI6G,EAAQ,GACHjK,EAAO5O,EAAKgS,WAAYpD,EAAMA,EAAOi6D,GAAOj6D,EAAM5O,GACzD6Y,EAAMzsB,KAAKwiB,GAGb,IADA,IAAI1qB,EAAI20B,EAAM10B,OACPD,MACD0qB,EAAOiK,EAAM30B,IACZkqB,OAASQ,EAAKoD,WAAapD,EAAKqD,UAAYrD,EAAKla,KAAOka,EAAKsW,KAAO,IAE7E,CAEA,OADAllB,EAAKgS,WAAahS,EAAKiS,UAAY,KAC5BjS,CACT,EACA+oE,EAAQtvE,UAAU05C,QAAU,SAAU//B,EAAUupB,EAAYt4B,QACvC,IAAfs4B,IACFA,EAAa,CAAC,GAEhB,IAAI38B,EAAOrY,KACPinB,EAAO5O,EAAKgS,WAChB,GAAIk+B,GAAkBlwC,GACpB,OAAO,EAET,GAAI4O,EACF,EAAG,CACD,GAAkB,IAAdA,EAAK9gB,KAAY,CACnB,GAAI8gB,EAAK2c,KAAK,kBACZ,SAEF,GAAInY,EAASxE,EAAKvqB,MAChB,OAAO,EAET,GAAI6rD,GAAkBthC,GACpB,OAAO,CAEX,CACA,GAAkB,IAAdA,EAAK9gB,KACP,OAAO,EAET,GAAkB,IAAd8gB,EAAK9gB,OAAeg7E,GAAgBl6D,GACtC,OAAO,EAET,GAAkB,IAAdA,EAAK9gB,MAAc8gB,EAAKR,QAAUuuB,EAAW/tB,EAAKR,OAAO/pB,OAASykC,GAAiBla,EAAKxmB,OAC1F,OAAO,EAET,GAAIic,GAAaA,EAAUuK,GACzB,OAAO,CAEX,OAASA,EAAOi6D,GAAOj6D,EAAM5O,IAE/B,OAAO,CACT,EACA+oE,EAAQtvE,UAAU6U,KAAO,SAAU4W,GACjC,OAAO2jD,GAAOlhF,KAAM,KAAMu9B,EAC5B,EACO6jD,CACT,CA7Pc,GAqSVO,GAAkB,SAAUv6D,EAAMiQ,GACpC,OAAOjQ,EAAKnd,QAAQotB,EAAOuqD,IAAI,SAAUC,GACvC,OAAOvmE,GAAM+b,EAAOyqD,KAAMD,GAASxqE,MAAMwqE,EAC3C,GACF,EAaIE,GAAS98D,GAAMpN,KAAM3G,GAAO+T,GAAM/T,KAClC8wE,GAAa,uGAAuG18D,MAAM,KAC1H28D,GAAgB,CAClBC,IAAK,GACLC,KAAM,GACNC,MAAO,IACPC,OAAQ,IAENC,GAAyB,CAC3B,MACA,SAkBEC,GAAM,WACR,SAASA,EAAIx7D,EAAKuT,GAChBvT,EAAM7V,GAAK6V,GACX/mB,KAAKs6B,SAAWA,GAAY,CAAC,EAC7B,IAAIkoD,EAAUxiF,KAAKs6B,SAASmoD,SACxBpqE,EAAOrY,KACX,GAAI,yBAAyBgB,KAAK+lB,IAAQ,QAAQ/lB,KAAK+lB,GACrD1O,EAAKqqE,OAAS37D,MADhB,CAIA,IAAI47D,EAA2C,IAAtB57D,EAAIxjB,QAAQ,MAIrC,GAHyB,IAArBwjB,EAAIxjB,QAAQ,MAAeo/E,IAC7B57D,GAAOy7D,GAAUA,EAAQI,UAAqB,QAAU,cAAgB77D,IAErE,iBAAiB/lB,KAAK+lB,GAAM,CAC/B,IAAI4oC,EAAU3vD,KAAKs6B,SAASmoD,SAAWziF,KAAKs6B,SAASmoD,SAASxwE,KAAO,IAAIswE,EAAItkF,SAAS4/C,SAASG,MAAMwyB,UACrG,GAAIxwE,KAAKs6B,SAASmoD,UAA+C,IAAnCziF,KAAKs6B,SAASmoD,SAASG,SACnD77D,EAAM,aAAe1O,EAAKwqE,UAAUlzB,EAAS5oC,OACxC,CACL,IAAIV,EAAQ,oBAAoBD,KAAKW,GACrCA,GAAOy7D,GAAWA,EAAQI,UAAY,QAAU,cAAgBvqE,EAAKwqE,UAAUlzB,EAAStpC,EAAM,IAAMA,EAAM,EAC5G,CACF,CACAU,EAAMA,EAAI9c,QAAQ,MAAO,YACzB,IAAI64E,EAAW,uNAAuN18D,KAAKW,GAC3Og7D,GAAOC,IAAY,SAAUjnE,EAAGxe,GAC9B,IAAIwmF,EAAOD,EAASvmF,GAChBwmF,IACFA,EAAOA,EAAK94E,QAAQ,cAAe,OAErCoO,EAAK0C,GAAKgoE,CACZ,IACIP,IACGnqE,EAAKuqE,WACRvqE,EAAKuqE,SAAWJ,EAAQI,UAErBvqE,EAAK2qE,WACR3qE,EAAK2qE,SAAWR,EAAQQ,UAErB3qE,EAAK4qE,MAAsB,aAAd5qE,EAAKoS,OACrBpS,EAAK4qE,KAAOT,EAAQS,MAEjB5qE,EAAKoS,MAAsB,aAAdpS,EAAKoS,OACrBpS,EAAKoS,KAAO+3D,EAAQ/3D,MAEtBpS,EAAKqqE,OAAS,IAEZC,IACFtqE,EAAKuqE,SAAW,GAvClB,CAyCF,CA2MA,OA1MAL,EAAIW,aAAe,SAAUC,GAC3B,IAAIh9E,EACAi9E,EAAgBC,mBAAmBF,GAAK79D,MAAM,KAC9CxD,EAAU,eAAesE,KAAKg9D,EAAc,IAIhD,OAHIthE,IACF3b,EAAO2b,EAAQ,IAEV,CACL3b,KAAMA,EACN8tB,KAAMmvD,EAAc,GAExB,EACAb,EAAIe,UAAY,SAAUH,EAAKpsC,EAASj3C,GAItC,QAHgB,IAAZA,IACFA,EAAU,CAAC,GAETA,EAAQovC,kBACV,OAAO,EAEP,IAAIq0C,EAAat/C,GAASM,OAAO4+C,GAAKl5E,QAAQ,sBAAuB,IACrE,IACEs5E,EAAaF,mBAAmBE,EAClC,CAAE,MAAOtwD,GACPswD,EAAaC,SAASD,EACxB,CACA,OAAI,4BAA4BviF,KAAKuiF,KArFxB,SAAUjpD,EAAU6oD,EAAKt7E,GAC1C,OAAIyyB,EAASmpD,uBAEF,iBAAiBziF,KAAKmiF,GAVZ,SAAUO,EAAkB77E,GACjD,OAAIyN,EAAcouE,IACRA,GAEDpuE,EAAczN,KAAYiR,EAAWwpE,GAAwBz6E,EAExE,CAKW87E,CAAiBrpD,EAAS8U,oBAAqBvnC,IAAY,yBAAyB7G,KAAKmiF,GAEzF,UAAUniF,KAAKmiF,GAE1B,CAgFcS,CAAa9jF,EAASyjF,EAAYxsC,EAE9C,EACAwrC,EAAIsB,mBAAqB,SAAUjH,GACjC,IAAIjtB,EAYJ,OAVEA,EADmC,IAAjCitB,EAAIgG,SAASr/E,QAAQ,SAAkC,UAAjBq5E,EAAIgG,SAClChG,EAAI5+B,KAEJ4+B,EAAIgG,SAAW,KAAOhG,EAAInyD,KAAOmyD,EAAIkH,SAE7C,yBAAyB9iF,KAAK2uD,KAChCA,EAAUA,EAAQ1lD,QAAQ,WAAY,IAAIA,QAAQ,gBAAiB,IAC9D,UAAUjJ,KAAK2uD,KAClBA,GAAW,MAGRA,CACT,EACA4yB,EAAIzwE,UAAUiyE,QAAU,SAAU9xE,GAChC,IAAI+xE,EAAY,mBAAmB59D,KAAKnU,GACxCjS,KAAKiS,KAAO+xE,EAAU,GACtBhkF,KAAKwwE,UAAYwT,EAAU,GAC3BhkF,KAAKikF,KAAOD,EAAU,GACtBhkF,KAAK0iF,OAAS,GACd1iF,KAAKkkF,QACP,EACA3B,EAAIzwE,UAAUqyE,WAAa,SAAUhB,GACnC,IAAIiB,EACJ,GAAY,OAARjB,EACF,OAAOA,EAET,IAAIkB,EAAc,IAAI9B,EAAIY,EAAK,CAAEV,SAAUziF,OAC3C,GAAyB,aAArBqkF,EAAY55D,MAAuBzqB,KAAKyqB,OAAS45D,EAAY55D,MAAQ45D,EAAY55D,MAAQzqB,KAAKijF,OAASoB,EAAYpB,MAAQjjF,KAAK4iF,WAAayB,EAAYzB,UAAqC,KAAzByB,EAAYzB,SACnL,OAAOyB,EAAYH,SAErB,IAAII,EAAKtkF,KAAKkkF,SAAUK,EAAKF,EAAYH,SACzC,OAAII,IAAOC,GAAmC,MAA7BD,EAAG19E,OAAO09E,EAAG9nF,OAAS,IAAc8nF,EAAGhgF,OAAO,EAAGggF,EAAG9nF,OAAS,KAAO+nF,EAC5ED,GAETF,EAASpkF,KAAKwkF,UAAUxkF,KAAKiS,KAAMoyE,EAAYpyE,MAC3CoyE,EAAY73E,QACd43E,GAAU,IAAMC,EAAY73E,OAE1B63E,EAAYI,SACdL,GAAU,IAAMC,EAAYI,QAEvBL,EACT,EACA7B,EAAIzwE,UAAU4yE,WAAa,SAAUvB,EAAKwB,GACxC,IAAIC,EAAc,IAAIrC,EAAIY,EAAK,CAAEV,SAAUziF,OAC3C,OAAO4kF,EAAYV,OAAOS,GAAU3kF,KAAK6kF,aAAaD,GACxD,EACArC,EAAIzwE,UAAU+yE,aAAe,SAAU1B,GACrC,GAAInjF,KAAKyqB,MAAQ04D,EAAI14D,MAAQzqB,KAAK4iF,UAAYO,EAAIP,SAAU,CAC1D,GAAI5iF,KAAKijF,MAAQE,EAAIF,KACnB,OAAO,EAET,IAAI6B,EAAc7C,GAAcjiF,KAAK4iF,UACrC,GAAIkC,IAAgB9kF,KAAKijF,MAAQ6B,KAAiB3B,EAAIF,MAAQ6B,GAC5D,OAAO,CAEX,CACA,OAAO,CACT,EACAvC,EAAIzwE,UAAU0yE,UAAY,SAAUzrD,EAAM9mB,GACxC,IAA8B1V,EAAGsf,EAA7BkpE,EAAa,EAAG/oE,EAAM,GACtBgpE,EAAiBjsD,EAAKk3B,UAAU,EAAGl3B,EAAK7yB,YAAY,MAAMof,MAAM,KAChEF,EAAQnT,EAAKqT,MAAM,KACvB,GAAI0/D,EAAexoF,QAAU4oB,EAAM5oB,OACjC,IAAKD,EAAI,EAAGsf,EAAImpE,EAAexoF,OAAQD,EAAIsf,EAAGtf,IAC5C,GAAIA,GAAK6oB,EAAM5oB,QAAUwoF,EAAezoF,KAAO6oB,EAAM7oB,GAAI,CACvDwoF,EAAaxoF,EAAI,EACjB,KACF,CAGJ,GAAIyoF,EAAexoF,OAAS4oB,EAAM5oB,OAChC,IAAKD,EAAI,EAAGsf,EAAIuJ,EAAM5oB,OAAQD,EAAIsf,EAAGtf,IACnC,GAAIA,GAAKyoF,EAAexoF,QAAUwoF,EAAezoF,KAAO6oB,EAAM7oB,GAAI,CAChEwoF,EAAaxoF,EAAI,EACjB,KACF,CAGJ,GAAmB,IAAfwoF,EACF,OAAO9yE,EAET,IAAK1V,EAAI,EAAGsf,EAAImpE,EAAexoF,QAAUuoF,EAAa,GAAIxoF,EAAIsf,EAAGtf,IAC/Dyf,GAAO,MAET,IAAKzf,EAAIwoF,EAAa,EAAGlpE,EAAIuJ,EAAM5oB,OAAQD,EAAIsf,EAAGtf,IAE9Cyf,GADEzf,IAAMwoF,EAAa,EACd,IAAM3/D,EAAM7oB,GAEZ6oB,EAAM7oB,GAGjB,OAAOyf,CACT,EACAumE,EAAIzwE,UAAU+wE,UAAY,SAAU9pD,EAAM9mB,GACxC,IAAI1V,EAAmB0oF,EAAhBC,EAAK,EAAGvpE,EAAI,GACfgwB,EAAK,MAAM3qC,KAAKiR,GAAQ,IAAM,GAC9B+yE,EAAiBjsD,EAAKzT,MAAM,KAC5B6/D,EAAiBlzE,EAAKqT,MAAM,KAOhC,IANAy8D,GAAOiD,GAAgB,SAAU5gF,GAC3BA,GACFuX,EAAElX,KAAKL,EAEX,IACA4gF,EAAiBrpE,EACZpf,EAAI4oF,EAAe3oF,OAAS,EAAGmf,EAAI,GAAIpf,GAAK,EAAGA,IACjB,IAA7B4oF,EAAe5oF,GAAGC,QAAsC,MAAtB2oF,EAAe5oF,KAG3B,OAAtB4oF,EAAe5oF,GAIf2oF,EAAK,EACPA,IAGFvpE,EAAElX,KAAK0gF,EAAe5oF,IAPpB2oF,KAqBJ,OAN6B,KAJ3BD,GAFF1oF,EAAIyoF,EAAexoF,OAAS0oF,IACnB,EACGlrE,GAAQ2B,GAAGkb,KAAK,KAEhBmuD,EAAe5wE,MAAM,EAAG7X,GAAGs6B,KAAK,KAAO,IAAM7c,GAAQ2B,GAAGkb,KAAK,MAE7DtzB,QAAQ,OAClB0hF,EAAU,IAAMA,GAEdt5C,GAAMs5C,EAAQ/+E,YAAY,OAAS++E,EAAQzoF,OAAS,IACtDyoF,GAAWt5C,GAENs5C,CACT,EACA1C,EAAIzwE,UAAUoyE,OAAS,SAAUkB,GAI/B,IAAIp7E,EA8BJ,YAjCoB,IAAhBo7E,IACFA,GAAc,GAGXplF,KAAK0iF,SAAU0C,IAClBp7E,EAAI,GACCo7E,IACCplF,KAAK4iF,SACP54E,GAAKhK,KAAK4iF,SAAW,MAErB54E,GAAK,KAEHhK,KAAKgjF,WACPh5E,GAAKhK,KAAKgjF,SAAW,KAEnBhjF,KAAKyqB,OACPzgB,GAAKhK,KAAKyqB,MAERzqB,KAAKijF,OACPj5E,GAAK,IAAMhK,KAAKijF,OAGhBjjF,KAAKiS,OACPjI,GAAKhK,KAAKiS,MAERjS,KAAKwM,QACPxC,GAAK,IAAMhK,KAAKwM,OAEdxM,KAAKykF,SACPz6E,GAAK,IAAMhK,KAAKykF,QAElBzkF,KAAK0iF,OAAS14E,GAEThK,KAAK0iF,MACd,EACOH,CACT,CA9PU,GAgQN8C,GAA0BpgE,GAAME,QAAQ,6EAIxCmgE,GAAqBnoE,IAAO,WAC9B,OAAOlf,SAASsnF,eAAeC,mBAAmB,SACpD,IACIC,GAA0B,SAAUlgD,EAAQne,EAAMs+D,GAKpD,IAJA,IAAIC,EAAiB,iCACjBC,EAAe,4EACfC,EAAqBtgD,EAAOoH,wBAC5BpW,EAAQ,EAAGtzB,EAAQyiF,EACN,IAAVnvD,GAEL,IADAovD,EAAet2C,UAAYpsC,IACd,CACX,IAAI6iF,EAAaH,EAAev/D,KAAKgB,GACrC,GAAmB,OAAf0+D,EACF,OAAO7iF,EACF,GAAsB,MAAlB6iF,EAAW,GAAY,CAE9B7iF,EADE0b,GAAWmnE,EAAW,GAAI,MACpBC,GAAoB3+D,GAAM,EAAO0+D,EAAW7iF,MAAQ,GAEpD8iF,GAAoB3+D,GAAM,EAAM0+D,EAAW7iF,MAAQ,GAE7D,KACF,CACE2iF,EAAav2C,UAAYs2C,EAAet2C,UACxC,IAAI22C,EAAWJ,EAAax/D,KAAKgB,GACjC,IAAIlS,EAAO8wE,IAAaA,EAAS/iF,QAAU0iF,EAAet2C,UAA1D,CAGsB,MAAlBy2C,EAAW,GACbvvD,GAAS,EACChb,GAAMsqE,EAAoBC,EAAW,MAC/CvvD,GAAS,GAEXtzB,EAAQ0iF,EAAet2C,UAAY22C,EAAS,GAAGxpF,OAC/C,KAPA,CASJ,CAEF,OAAOyG,CACT,EAII8iF,GAAsB,SAAU3+D,EAAM4xC,EAAS0sB,QAC9B,IAAfA,IACFA,EAAa,GAEf,IAAIO,EAAS7+D,EAAK/jB,cAClB,IAA4C,IAAxC4iF,EAAO1iF,QAAQ,OAAQmiF,IARF,SAAUt+D,EAAMs+D,GACzC,MAAO,2CAA2C1kF,KAAKomB,EAAK9iB,OAAOohF,GACrE,CAMmDQ,CAAqBD,EAAQP,GAAa,CACzF,IAAIS,EAAaF,EAAO1iF,QAAQ,UAAWmiF,GAC3C,OAAOO,EAAO1iF,QAAQ,IAAK4iF,EAC7B,CACE,GAAIntB,EAAS,CACX,IAAIotB,EAAWH,EAAO1iF,QAAQ,IAAKmiF,GACnC,OAAqB,IAAdU,EAAkBA,EAAWH,EAAOzpF,MAC7C,CACE,IAAI6pF,EAAmB,SACvBA,EAAiBh3C,UAAYq2C,EAC7B,IAAIr/D,EAAQggE,EAAiBjgE,KAAKgB,GAClC,OAAOf,EAAQA,EAAMpjB,MAAQojB,EAAM,GAAG7pB,OAASypF,EAAOzpF,MAG5D,EACI8pF,GAAsB,SAAUC,EAAQC,GAC1C,IAAI1kE,EAAUykE,EAAOngE,KAAKogE,GAC1B,GAAI1kE,EAAS,CACX,IAAI+D,EAAS/D,EAAQ,GACjBrhB,EAAQqhB,EAAQ,GACpB,MAAyB,iBAAX+D,GAAgD,mBAAzBA,EAAOxiB,cAAqC5C,EAAQ,IAC3F,CACE,OAAO,IAEX,EACIgmF,GAAY,SAAUnsD,EAAUiL,QACnB,IAAXA,IACFA,EAASK,MAEXtL,EAAWA,GAAY,CAAC,EACxB,IAAItP,EAAMs6D,KACNrgF,EAAO+lB,EAAInmB,cAAc,SACK,IAA9By1B,EAASosD,mBACXpsD,EAASosD,kBAAmB,GAE9B,IAAIC,EAAUrsD,EAASqsD,QAAUrsD,EAASqsD,QAAUlxE,EAChDmxE,EAAQtsD,EAASssD,MAAQtsD,EAASssD,MAAQnxE,EAC1CiS,EAAO4S,EAAS5S,KAAO4S,EAAS5S,KAAOjS,EACvCrE,EAAQkpB,EAASlpB,MAAQkpB,EAASlpB,MAAQqE,EAC1ColD,EAAMvgC,EAASugC,IAAMvgC,EAASugC,IAAMplD,EACpCoxE,EAAKvsD,EAASusD,GAAKvsD,EAASusD,GAAKpxE,EACjCqxE,EAAUxsD,EAASwsD,QAAUxsD,EAASwsD,QAAUrxE,EAmTpD,MAAO,CAAEs4B,MANG,SAAU3mB,EAAM1Z,QACX,IAAXA,IACFA,EAAS,QA9SO,SAAUq5E,EAAer5E,QAC5B,IAAXA,IACFA,EAAS,QA2GX,IAzGA,IACIoU,EAAoBrhB,EAAOumF,EAE3BC,EAAU1qF,EAAG2qF,EAAUxqF,EACvByqF,EAAmBC,EACnBC,EAAaC,EAAgB1jD,EAAM2jD,EAAcC,EAAoBC,EACrEj+C,EAAoBG,EAAmBC,EAChB6c,EAPvBr/B,EAAO2/D,EAAc3/D,KACZnkB,EAAQ,EACjBykF,EAAQ,GAK0BntD,EAAU,EAC5CgK,EAASN,GAASM,OAClBojD,EAAmB1iE,GAAME,QAAQ,gEACjCyiE,EAAyB,SAAXl6E,EAAoB,EAAI,EACtCm6E,EAAgB,SAAUnrF,GAC5B,IAAImO,EAAKtO,EAET,IADAsO,EAAM68E,EAAMlrF,OACLqO,KACD68E,EAAM78E,GAAKnO,OAASA,IAI1B,GAAImO,GAAO,EAAG,CACZ,IAAKtO,EAAImrF,EAAMlrF,OAAS,EAAGD,GAAKsO,EAAKtO,KACnCG,EAAOgrF,EAAMnrF,IACJurF,OACPjtB,EAAIn+D,EAAKA,MAGbgrF,EAAMlrF,OAASqO,CACjB,CACF,EACIk9E,EAAc,SAAUtnF,EAAOmwB,GACjC,OAAOlJ,EAAKi6D,GAAgBlhF,EAAOsmF,GAAgBn2D,EACrD,EACIo3D,EAAiB,SAAUvnF,GACf,KAAVA,IAGoB,MAApBA,EAAMmG,OAAO,KACfnG,EAAQ,IAAMA,GAEX65B,EAAS2tD,4BAAmE,QAArCxnF,EAAM6D,OAAO,EAAG,GAAGjB,gBAC7D5C,EAAQ,IAAMA,GAEhBkmF,EAAQhF,GAAgBlhF,EAAOsmF,IACjC,EAIImB,EAA0B,SAAUznF,EAAOilF,GAC7C,IAAIyC,EAAW1nF,GAAS,GACpBu4D,GAAWr6C,GAAWwpE,EAAU,MAChC/B,EAAWL,GAAoB3+D,EAAM4xC,EAAS0sB,GAGlD,OAFAjlF,EAAQ2mB,EAAK9iB,OAAOohF,EAAYU,EAAWV,GAC3CsC,EAAehvB,EAAUmvB,EAAW1nF,EAAQA,GACrC2lF,EAAW,CACpB,EACIgC,EAAiB,SAAUvgF,EAASnL,EAAM+D,EAAO4nF,EAAMC,GAGzD,GADA7nF,EAbgB,SAAUA,GAC1B,OAAOkhF,GAAgBlhF,EAAOsmF,EAChC,CAWUwB,EADR7rF,EAAOA,EAAK2G,iBACgBmlF,EAAe9rF,EAAO6nC,EAAO9jC,GAAS4nF,GAAQC,GAAQ,KAC9EG,IAAatB,IAAqD,IA1JhD,SAAUzqF,GACpC,OAAiC,IAA1BA,EAAK6G,QAAQ,UAA4C,IAA1B7G,EAAK6G,QAAQ,QACrD,CAwJ4CmlF,CAAsBhsF,GAAiB,CAC3E,IAAIisF,EAAWnB,EAAmB9qF,GAClC,IAAKisF,GAAYlB,EAAwB,CAEvC,IADA,IAAI/3C,EAAM+3C,EAAuBjrF,OAC1BkzC,OACLi5C,EAAWlB,EAAuB/3C,IACrB1F,QAAQhpC,KAAKtE,MAIf,IAATgzC,IACFi5C,EAAW,KAEf,CACA,IAAKA,EACH,OAEF,GAAIA,EAAS7+C,eAAiBrpC,KAASkoF,EAAS7+C,aAC9C,MAEJ,EAC0B,SAATptC,GAA4B,OAATA,IAClBmL,KAAWw9E,KAA4B5kF,KAASuqB,GAAOvqB,KAASwE,IAG9E0iF,EAAiBjrF,KAAU6lF,GAAIe,UAAU7iF,EAAOoH,EAASyyB,IAGzD6sD,IAAsBzqF,KAAQirF,GAA2C,IAAvBjrF,EAAK6G,QAAQ,SAGnE0jF,EAAS9jF,IAAIzG,GAAQ+D,EACrBwmF,EAASxiF,KAAK,CACZ/H,KAAMA,EACN+D,MAAOA,IAEX,EACImoF,EAAc,IAAIvgD,OAAO,iUAA0W,KACnYwgD,EAAa,iFACbhD,EAAqBtgD,EAAOoH,wBAC5Bm8C,EAAcxuD,EAASyuD,uBAAyBxjD,EAAOqH,yBACvD47C,EAAejjD,EAAOiH,eACtBi8C,EAAWnuD,EAASmuD,SACpBO,EAAyB1uD,EAAS2uD,iBAClCC,EAAiB5uD,EAASosD,iBAC1B3gD,EAAkBR,EAAOyH,qBACzBm8C,EAAc/hE,EAAO,IAClBtF,EAAU8mE,EAAYxiE,KAAK+iE,IAAc,CAC9C,IAAIC,GAAYtnE,EAAQ,GAIxB,GAHI7e,EAAQ6e,EAAQ7e,OAClB8kF,EAAYxjD,EAAOnd,EAAK9iB,OAAOrB,EAAO6e,EAAQ7e,MAAQA,KAEpDxC,EAAQqhB,EAAQ,GAEM,OADxBrhB,EAAQA,EAAM4C,eACJuD,OAAO,KACfnG,EAAQA,EAAM6D,OAAO,IAEvBujF,EAAcpnF,QACT,GAAIA,EAAQqhB,EAAQ,GAAI,CAC7B,GAAIA,EAAQ7e,MAAQmmF,GAAU5sF,OAAS4qB,EAAK5qB,OAAQ,CAClDurF,EAAYxjD,EAAOnd,EAAK9iB,OAAOwd,EAAQ7e,SACvCA,EAAQ6e,EAAQ7e,MAAQmmF,GAAU5sF,OAClC,QACF,CAEwB,OADxBiE,EAAQA,EAAM4C,eACJuD,OAAO,KACfnG,EAAQA,EAAM6D,OAAO,IAEvB8iF,EAAe3mF,KAASolF,EACpBqD,GAAkBJ,EAAYroF,IAAUinF,EAAMlrF,OAAS,GAAKkrF,EAAMA,EAAMlrF,OAAS,GAAGE,OAAS+D,GAC/FonF,EAAcpnF,GAEhB,IAAI4oF,GAAa/C,GAAoBuC,EAAY/mE,EAAQ,IACzD,GAAmB,OAAfunE,GAAqB,CACvB,GAAmB,QAAfA,GAAsB,CACxBpmF,EAAQwiF,GAAwBlgD,EAAQne,EAAMwhE,EAAYv5C,WAC1Du5C,EAAYv5C,UAAYpsC,EACxB,QACF,CACAqkF,GAAiB,CACnB,CACA,IAAKmB,IAAapB,EAAc9hD,EAAOwF,eAAetqC,IAAS,CAqB7D,GApBA6mF,GAAiB,EACbmB,IACFjB,EAAqBH,EAAY5gD,WACjCghD,EAAyBJ,EAAYt9C,oBAEnCw9C,EAAezlE,EAAQ,MACzBqlE,GAA+D,IAA3CI,EAAahkF,QAAQ,mBAChBylF,IACvB1B,GAAiB,IAEnBL,EAAW,IACF9jF,IAAM,CAAC,EAChBokF,EAAat9E,QAAQ4+E,GAAY,SAAUxiE,EAAO3pB,EAAMiK,EAAK0hF,EAAMC,GAEjE,OADAF,EAAe3nF,EAAO/D,EAAMiK,EAAK0hF,EAAMC,GAChC,EACT,MAEArB,EAAW,IACF9jF,IAAM,CAAC,EAEdslF,IAAatB,EAAmB,CAQlC,GAPA39C,EAAqB69C,EAAY79C,mBACjCG,EAAoB09C,EAAY19C,kBAChCC,EAAmBy9C,EAAYz9C,iBACPy9C,EAAY99C,mBACN09C,EAASzqF,SACrC8qF,GAAiB,GAEf19C,EAEF,IADArtC,EAAIqtC,EAAiBptC,OACdD,KAELG,GADAknC,EAAOgG,EAAiBrtC,IACZG,KAEM,YADlB+pD,EAAY7iB,EAAKnjC,SAEfgmD,EAAY,OAASlsB,KAEvB0sD,EAAS9jF,IAAIzG,GAAQ+pD,EACrBwgC,EAASxiF,KAAK,CACZ/H,KAAMA,EACN+D,MAAOgmD,IAIb,GAAI9c,EAEF,IADAptC,EAAIotC,EAAkBntC,OACfD,MAELG,GADAknC,EAAO+F,EAAkBptC,IACbG,QACEuqF,EAAS9jF,MAEH,YADlBsjD,EAAY7iB,EAAKnjC,SAEfgmD,EAAY,OAASlsB,KAEvB0sD,EAAS9jF,IAAIzG,GAAQ+pD,EACrBwgC,EAASxiF,KAAK,CACZ/H,KAAMA,EACN+D,MAAOgmD,KAKf,GAAIjd,EAAoB,CAEtB,IADAjtC,EAAIitC,EAAmBhtC,OAChBD,OACDitC,EAAmBjtC,KAAM0qF,EAAS9jF,QAI7B,IAAP5G,IACF+qF,GAAiB,EAErB,CACA,GAAI1jD,EAAOqjD,EAAS9jF,IAAI,kBAAmB,CACzC,GAAa,QAATygC,EAAgB,CAClB3gC,EAAQwiF,GAAwBlgD,EAAQne,EAAMwhE,EAAYv5C,WAC1Du5C,EAAYv5C,UAAYpsC,EACxB,QACF,CACAqkF,GAAiB,CACnB,CACF,CACIA,GACFl2E,EAAM3Q,EAAOwmF,EAAUG,EAE3B,MACEE,GAAiB,EAEnB,GAAIN,EAAYjhD,EAAgBtlC,GAAQ,CACtCumF,EAAU33C,UAAYpsC,EAAQ6e,EAAQ7e,MAAQmmF,GAAU5sF,QACpDslB,EAAUklE,EAAU5gE,KAAKgB,KACvBkgE,IACFJ,EAAW9/D,EAAK9iB,OAAOrB,EAAO6e,EAAQ7e,MAAQA,IAEhDA,EAAQ6e,EAAQ7e,MAAQ6e,EAAQ,GAAGtlB,SAEnC0qF,EAAW9/D,EAAK9iB,OAAOrB,GACvBA,EAAQmkB,EAAK5qB,QAEX8qF,IACEJ,EAAS1qF,OAAS,GACpBurF,EAAYb,GAAU,GAExBrsB,EAAIp6D,IAENmoF,EAAYv5C,UAAYpsC,EACxB,QACF,CACKmkF,IACEG,GAAgBA,EAAahkF,QAAQ,OAASgkF,EAAa/qF,OAAS,EAK9D8qF,GACTzsB,EAAIp6D,GALJinF,EAAMjjF,KAAK,CACT/H,KAAM+D,EACNqnF,MAAOR,IAMf,MAAO,GAAI7mF,EAAQqhB,EAAQ,GACzBkmE,EAAevnF,QACV,GAAIA,EAAQqhB,EAAQ,GAAI,CAE7B,KAD0C,IAAhB8lE,GAAqBttD,EAASgvD,gBAAkB5B,EAAMlrF,OAAS,GAAK+oC,EAAO2H,aAAaw6C,EAAMA,EAAMlrF,OAAS,GAAGE,KAAM,WAGzI,CACLuG,EAAQilF,EAAwB,GAAIpmE,EAAQ7e,MAAQ,GACpD2lF,EAAYv5C,UAAYpsC,EACxB,QACF,CALE2jF,EAAMnmF,EAMV,MAAO,GAAIA,EAAQqhB,EAAQ,GACzBglE,EAAQrmF,OACH,KAAKA,EAAQqhB,EAAQ,KAAqB,OAAdsnE,GAAoB,CACrDnmF,EAAQilF,EAAwBznF,EAAOqhB,EAAQ7e,MAAQmmF,GAAU5sF,QACjEosF,EAAYv5C,UAAYpsC,EACxB,QACF,CAAO,GAAIxC,EAAQqhB,EAAQ,GAAI,CAC7B,GAAoB,IAAhB8lE,EAEG,CACL3kF,EAAQilF,EAAwB,IAAKpmE,EAAQ7e,MAAQ,GACrD2lF,EAAYv5C,UAAYpsC,EACxB,QACF,CALE4jF,EAAGpmF,EAAOqhB,EAAQ,GAMtB,EACA7e,EAAQ6e,EAAQ7e,MAAQmmF,GAAU5sF,MACpC,CAIA,IAHIyG,EAAQmkB,EAAK5qB,QACfurF,EAAYxjD,EAAOnd,EAAK9iB,OAAOrB,KAE5B1G,EAAImrF,EAAMlrF,OAAS,EAAGD,GAAK,EAAGA,KACjCkE,EAAQinF,EAAMnrF,IACJurF,OACRjtB,EAAIp6D,EAAM/D,KAGhB,CAKE6sF,CAhuBwB,SAAUniE,GAQpC,IAPA,IAIItF,EAJA0nE,EAAe,8CACfC,EAAS,GACT3H,EAAO,CAAC,EACRljE,EAASm0C,GAAS,OAElB9vD,EAAQ,EACRszB,EAAQ,EACLzU,EAAU0nE,EAAapjE,KAAKgB,IAAO,CACxC,IAAI+7D,EAAMrhE,EAAQ,GACd+/D,EAAUjjE,EAAS,IAAM2X,IAC7BurD,EAAKD,GAAWsB,EACZlgF,EAAQ6e,EAAQ7e,OAClBwmF,EAAOhlF,KAAK2iB,EAAK9iB,OAAOrB,EAAO6e,EAAQ7e,MAAQA,IAEjDwmF,EAAOhlF,KAAKo9E,GACZ5+E,EAAQ6e,EAAQ7e,MAAQkgF,EAAI3mF,MAC9B,CACA,IAAIolF,EAAK,IAAIv5C,OAAOzpB,EAAS,UAAW,KACxC,OAAc,IAAV3b,EACK,CACL2b,OAAQA,EACRkjE,KAAMA,EACN16D,KAAMA,EACNw6D,GAAIA,IAGF3+E,EAAQmkB,EAAK5qB,QACfitF,EAAOhlF,KAAK2iB,EAAK9iB,OAAOrB,IAEnB,CACL2b,OAAQA,EACRkjE,KAAMA,EACN16D,KAAMqiE,EAAO5yD,KAAK,IAClB+qD,GAAIA,GAGV,CA2rBkB8H,CAAsBtiE,GAAO1Z,EAC7C,EAEF,EACA+4E,GAAUkD,WAAalE,GAEvB,IAIImE,GAAe,SAAUnb,EAAYrnD,GAMvC,IALA,IAIItF,EAJA+nE,EAAiB,0CACjBtkD,EAASkpC,EAAWlpC,OACpB2d,EAPS,SAAU4mC,EAAW1iE,GAClC,IAAI2iE,EAAoB,IAAI1hD,OAAO,CAAC,QAAUyhD,EAAUjzD,KAAK,KAAO,aAAaA,KAAK,KAAM,MAC5F,OAAOzP,EAAKnd,QAAQ8/E,EAAmB,GACzC,CAIgBC,CAASvb,EAAWwb,eAAgB7iE,GAC9Cy+D,EAAqBtgD,EAAOoH,wBAEzB7qB,EAAU+nE,EAAezjE,KAAK88B,IAAU,CAC7C,IAEIgnC,EAFAjnF,EAAQ4mF,EAAex6C,UACvB86C,EAAcroE,EAAQ,GAAGtlB,OAG3B0tF,EADErE,EAAmB/jE,EAAQ,IACf7e,EAEAwjF,GAAUkD,WAAWpkD,EAAQ2d,EAASjgD,GAEtDigD,EAAUA,EAAQ+M,UAAU,EAAGhtD,EAAQknF,GAAejnC,EAAQ+M,UAAUi6B,GACxEL,EAAex6C,UAAYpsC,EAAQknF,CACrC,CACA,OAAOnrD,GAAOkkB,EAChB,EACIknC,GAAeR,GA+CfS,GAASplE,GAAMpN,KACfyyE,GAAe,SAAUpjE,GA4C3B,MAAO,CAAEs0B,QA3CK,SAAUqmB,EAAOC,GAC7B,GAAID,EAAM34C,WAAa44C,EAAM54C,SAC3B,OAAO,EAET,IAAIk9B,EAAa,SAAUn/B,GACzB,IAAIsjE,EAAU,CAAC,EAOf,OANAF,GAAOnjE,EAAIk/B,WAAWn/B,IAAO,SAAU2c,GACrC,IAAIlnC,EAAOknC,EAAK1a,SAAS7lB,cACC,IAAtB3G,EAAK6G,QAAQ,MAAuB,UAAT7G,GAA8C,IAA1BA,EAAK6G,QAAQ,WAC9DgnF,EAAQ7tF,GAAQwqB,EAAIg/B,UAAUj/B,EAAMvqB,GAExC,IACO6tF,CACT,EACIC,EAAiB,SAAUC,EAAMC,GACnC,IAAIjqF,EAAO/D,EACX,IAAKA,KAAQ+tF,EACX,GAAIlvE,GAAMkvE,EAAM/tF,GAAO,CAErB,QAAqB,KADrB+D,EAAQiqF,EAAKhuF,IAEX,OAAO,EAET,GAAI+tF,EAAK/tF,KAAU+D,EACjB,OAAO,SAEFiqF,EAAKhuF,EACd,CAEF,IAAKA,KAAQguF,EACX,GAAInvE,GAAMmvE,EAAMhuF,GACd,OAAO,EAGX,OAAO,CACT,EACA,SAAK8tF,EAAepkC,EAAWyb,GAAQzb,EAAW0b,MAG7C0oB,EAAetjE,EAAIgjC,WAAWhjC,EAAIg/B,UAAU2b,EAAO,UAAW36C,EAAIgjC,WAAWhjC,EAAIg/B,UAAU4b,EAAO,YAG/FoF,GAAiBrF,IAAWqF,GAAiBpF,GACvD,EAEF,EAEI6oB,GAAY1lE,GAAME,QAClBylE,GAAS,SAAUtwD,GACrB,IAAIlT,EAAO,GAEPyjE,GADJvwD,EAAWA,GAAY,CAAC,GACFuwD,OAClBC,EAAeH,GAAUrwD,EAASywD,eAAiB,IACnDC,EAAcL,GAAUrwD,EAAS2wD,cAAgB,IACjDx8C,EAASxK,GAASE,cAAc7J,EAAS4wD,iBAAmB,MAAO5wD,EAAS0J,UAC5EmnD,EAAyC,SAA5B7wD,EAAS8wD,eAC1B,MAAO,CACLh6E,MAAO,SAAU1U,EAAMgI,EAAOgnB,GAC5B,IAAInvB,EAAGsf,EAAG+nB,EAAMnjC,EAQhB,GAPIoqF,GAAUC,EAAapuF,IAAS0qB,EAAK5qB,OAAS,IAChDiE,EAAQ2mB,EAAKA,EAAK5qB,OAAS,IACjBA,OAAS,GAAe,OAAViE,GACtB2mB,EAAK3iB,KAAK,MAGd2iB,EAAK3iB,KAAK,IAAK/H,GACXgI,EACF,IAAKnI,EAAI,EAAGsf,EAAInX,EAAMlI,OAAQD,EAAIsf,EAAGtf,IACnCqnC,EAAOl/B,EAAMnI,GACb6qB,EAAK3iB,KAAK,IAAKm/B,EAAKlnC,KAAM,KAAM+xC,EAAO7K,EAAKnjC,OAAO,GAAO,KAI5D2mB,EAAKA,EAAK5qB,SADPkvB,GAASy/D,EACQ,IAEA,MAElBz/D,GAASm/D,GAAUG,EAAYtuF,IAAS0qB,EAAK5qB,OAAS,IACxDiE,EAAQ2mB,EAAKA,EAAK5qB,OAAS,IACjBA,OAAS,GAAe,OAAViE,GACtB2mB,EAAK3iB,KAAK,KAGhB,EACAo2D,IAAK,SAAUn+D,GACb,IAAI+D,EACJ2mB,EAAK3iB,KAAK,KAAM/H,EAAM,KAClBmuF,GAAUG,EAAYtuF,IAAS0qB,EAAK5qB,OAAS,IAC/CiE,EAAQ2mB,EAAKA,EAAK5qB,OAAS,IACjBA,OAAS,GAAe,OAAViE,GACtB2mB,EAAK3iB,KAAK,KAGhB,EACAijB,KAAM,SAAUA,EAAMkJ,GAChBlJ,EAAKlrB,OAAS,IAChB4qB,EAAKA,EAAK5qB,QAAUo0B,EAAMlJ,EAAO+mB,EAAO/mB,GAE5C,EACAk/D,MAAO,SAAUl/D,GACfN,EAAK3iB,KAAK,YAAaijB,EAAM,MAC/B,EACAi/D,QAAS,SAAUj/D,GACjBN,EAAK3iB,KAAK,UAAQijB,EAAM,SAC1B,EACAm/D,GAAI,SAAUnqF,EAAMgrB,GACdA,EACFN,EAAK3iB,KAAK,KAAM/H,EAAM,IAAK+xC,EAAO/mB,GAAO,MAEzCN,EAAK3iB,KAAK,KAAM/H,EAAM,MAEpBmuF,GACFzjE,EAAK3iB,KAAK,KAEd,EACAqiF,QAAS,SAAUp/D,GACjBN,EAAK3iB,KAAK,YAAaijB,EAAM,IAAKmjE,EAAS,KAAO,GACpD,EACAQ,MAAO,WACLjkE,EAAK5qB,OAAS,CAChB,EACA8uF,WAAY,WACV,OAAOlkE,EAAKyP,KAAK,IAAI5sB,QAAQ,MAAO,GACtC,EAEJ,EAEIshF,GAAiB,SAAUjxD,EAAUiL,QACxB,IAAXA,IACFA,EAASK,MAEX,IAAI4lD,EAASZ,GAAOtwD,GAsFpB,OArFAA,EAAWA,GAAY,CAAC,GACfmuD,WAAW,aAAcnuD,IAAWA,EAASmuD,SAoF/C,CAAEl5C,UAnFO,SAAUtoB,GACxB,IAAIwhE,EAAWnuD,EAASmuD,SACpBgD,EAAW,CACb,EAAG,SAAUxkE,GACXukE,EAAO9jE,KAAKT,EAAKxmB,MAAOwmB,EAAK2J,IAC/B,EACA,EAAG,SAAU3J,GACXukE,EAAO7E,QAAQ1/D,EAAKxmB,MACtB,EACA,EAAG,SAAUwmB,GACXukE,EAAO3E,GAAG5/D,EAAKvqB,KAAMuqB,EAAKxmB,MAC5B,EACA,GAAI,SAAUwmB,GACZukE,EAAO1E,QAAQ7/D,EAAKxmB,MACtB,EACA,EAAG,SAAUwmB,GACXukE,EAAO5E,MAAM3/D,EAAKxmB,MACpB,EACA,GAAI,SAAUwmB,GACZ,GAAIA,EAAOA,EAAKoD,WACd,GACE1D,EAAKM,SACEA,EAAOA,EAAKla,KAEzB,GAEFy+E,EAAOH,QACP,IAAI1kE,EAAO,SAAUM,GACnB,IAAIykE,EAAUD,EAASxkE,EAAK9gB,MAC5B,GAAKulF,EA4CHA,EAAQzkE,OA5CI,CACZ,IAAIpB,EAASoB,EAAKvqB,KACd8uD,EAAUvkC,EAAKw6D,WACf/8E,EAAQuiB,EAAKwf,WACjB,GAAIgiD,GAAY/jF,GAASA,EAAMlI,OAAS,EAAG,CACzC,IAAImvF,EAAc,GAClBA,EAAYxoF,IAAM,CAAC,EACnB,IAAIkkF,EAAc9hD,EAAOwF,eAAe9jB,EAAKvqB,MAC7C,GAAI2qF,EAAa,CACf,IAAK,IAAI9qF,EAAI,EAAGsf,EAAIwrE,EAAY1gD,gBAAgBnqC,OAAQD,EAAIsf,EAAGtf,IAE7D,IADIqyB,EAAWy4D,EAAY1gD,gBAAgBpqC,MAC3BmI,EAAMvB,IAAK,CACzB,IAAIsjD,EAAY/hD,EAAMvB,IAAIyrB,GAC1B+8D,EAAYxoF,IAAIyrB,GAAY63B,EAC5BklC,EAAYlnF,KAAK,CACf/H,KAAMkyB,EACNnuB,MAAOgmD,GAEX,CAEF,IAASlqD,EAAI,EAAGsf,EAAInX,EAAMlI,OAAQD,EAAIsf,EAAGtf,IAAK,CAC5C,IAAIqyB,KAAWlqB,EAAMnI,GAAGG,QACNivF,EAAYxoF,MACxBsjD,EAAY/hD,EAAMvB,IAAIyrB,GAC1B+8D,EAAYxoF,IAAIyrB,GAAY63B,EAC5BklC,EAAYlnF,KAAK,CACf/H,KAAMkyB,EACNnuB,MAAOgmD,IAGb,CACA/hD,EAAQinF,CACV,CACF,CAEA,GADAH,EAAOp6E,MAAM6V,EAAKvqB,KAAMgI,EAAO8mD,IAC1BA,EAAS,CACZ,GAAIvkC,EAAOA,EAAKoD,WACd,GACE1D,EAAKM,SACEA,EAAOA,EAAKla,MAEvBy+E,EAAO3wB,IAAIh1C,EACb,CACF,CAGF,EAMA,OALkB,IAAdoB,EAAK9gB,MAAem0B,EAASsxD,MAG/BH,EAAS,IAAIxkE,GAFbN,EAAKM,GAIAukE,EAAOF,YAChB,EAEF,EAEIO,GAAuB,IAAIC,IAoD7B5yE,EAlD8B,CAC5B,SACA,cACA,eACA,aACA,gBACA,UACA,eACA,gBACA,cACA,iBACA,SACA,eACA,eACA,eACA,aACA,wBACA,kBACA,mBACA,mBACA,oBACA,sBACA,oBACA,kBACA,QACA,WACA,OACA,QACA,MACA,SACA,UACA,UACA,YACA,QACA,YACA,YACA,SACA,aACA,aACA,WACA,aACA,aACA,gBACA,iBACA,aACA,mBACA,sBACA,sBACA,+BAE8B,SAAUtN,GACxCigF,GAAqBxqF,IAAIuK,EAC3B,IAEF,IAAImgF,GAAsB,CACxB,OACA,kBACA,iBAEEC,GAAgB,SAAU9kE,EAAKD,GACjC,OAAOvnB,GAAKwnB,EAAIgjC,WAAWhjC,EAAIg/B,UAAUj/B,EAAM,UACjD,EAgBIglE,GAAmB,SAAU/kE,EAAKD,EAAM5hB,GAC1C,IAAI6mF,EAAiBF,GAAc9kE,EAAKD,GACpCklE,EAAuBH,GAAc9kE,EAAK7hB,GAC1C+mF,EAAgB,SAAU7pC,GAC5B,IAAIhG,EAAYr1B,EAAIkgC,SAASngC,EAAMs7B,GAC/B8pC,EAAcnlE,EAAIkgC,SAAS/hD,EAAYk9C,GAC3C,OAAOrjC,GAAWq9B,IAAcr9B,GAAWmtE,IAAgB9vC,IAAc8vC,CAC3E,EACA,OAAOt0E,EAAOm0E,GAAgB,SAAUI,GACtC,IAAIC,EAAa,SAAUtvF,GACzB,OAAO8a,EAAO9a,GAAO,SAAUslD,GAC7B,OAAOA,IAAS+pC,CAClB,GACF,EACA,IAAKC,EAAWJ,IAAyBI,EAAWR,IAAsB,CACxE,IAAIS,EArBDjzE,EAqBuC4yE,GArBtB,SAAUvgF,GAChC,OAAOmM,EAAOg0E,IAAqB,SAAUxpC,GAC3C,OAAO5jC,GAAW/S,EAAO22C,EAC3B,GACF,IAkBI,OAAOxqC,EAAOy0E,EAAeJ,EAC/B,CACE,OAAOA,EAAcE,EAEzB,GACF,EAEIG,GAAS,SAAUvvC,EAASxgC,EAAW7R,GACzC,OAAO0N,EAASC,KAAK3N,EAAIlG,aAAarB,OAAO2rB,IAAUlX,QAAO,SAAU2P,GACtE,IAAIglE,EAAQxvC,EAAU,GAAK,EAC3B,OAAOxgC,EAAUgL,EAAKuM,KAAKrtB,OAAOiE,EAAI20B,SAAWktD,GACnD,GACF,EACIC,GAAgBr2E,EAAMm2E,IAAQ,EAAMplB,IACpCulB,GAAet2E,EAAMm2E,IAAQ,EAAOplB,IACpCwlB,GAAc,SAAUhiF,GAC1B,IAAIlG,EAAYkG,EAAIlG,YACpB,OAAOsqB,GAAStqB,KAAyC,IAA1BA,EAAUsvB,KAAKz3B,QAAgBsiC,GAAOn6B,EAAUsvB,OAAS28C,GAAgB9H,eAAenkE,EAAUU,YACnI,EACIynF,GAAyB,SAAUjqC,EAAQnmC,GAC7C,OAAO,SAAU7R,GACf,OAAO0N,EAASC,KAAK8oD,GAA6Bze,EAAS,GAAK,EAAGh4C,IAAMvH,OAAOoZ,GAAWvF,QAC7F,CACF,EACI41E,GAAe,SAAU9lE,GAC3B,OAAOqI,GAAMrI,IAA0D,UAAjDuJ,GAAMrJ,GAAqBF,GAAO,UAC1D,EACI+lE,GAAY,SAAU/lE,GACxB,OAAOuI,GAAyBvI,KA5/Xf,SAAUA,GAC3B,OAAOkH,GAAYlH,IAAiD,QAAxCA,EAAKppB,aAAa,iBAChD,CA0/X4CovF,CAAahmE,EACzD,EACIimE,GAAqBJ,IAAuB,EAAMC,IAClDI,GAAoBL,IAAuB,EAAOC,IAClDK,GAAgBN,IAAuB,EAAMp9D,IAC7C29D,GAAeP,IAAuB,EAAOp9D,IAC7C49D,GAAgBR,IAAuB,EAAMh+D,IAC7Cy+D,GAAeT,IAAuB,EAAOh+D,IAC7C0+D,GAA+BV,IAAuB,EAAME,IAC5DS,GAA8BX,IAAuB,EAAOE,IAkB5DU,GAAoB,SAAUt8D,GAChC1F,GAAM0F,GACN9F,GAAS8F,EAAKjK,GAAsB,2BACtC,EACIwmE,GAAsB,SAAUv8D,GAClC9G,GAAU8G,GAAKvZ,MAAK,SAAUyS,GAC5BT,GAAYS,GAAWzS,MAAK,SAAU+1E,GAChCzvD,GAAU/M,IAAQiN,GAAO/T,IAAc6T,GAAUyvD,IACnD/hE,GAASvB,EAEb,GACF,GACF,EAcI4hB,GAAU,SAAU96B,EAAO2U,GAC7B,OAViB,SAAU3U,EAAO2U,EAAMrJ,GACxC,OAAI+L,GAAW1C,EAAM3U,IAJE+C,EA12YT,SAAUtE,EAAS2nB,GAIjC,IAHA,IAAImB,EAAOpjB,EAAWiiB,GAAUA,EAAS7gB,EACrCuQ,EAAMrX,EAAQqX,IACduL,EAAM,GACgB,OAAnBvL,EAAI7hB,iBAA0ChJ,IAAnB6qB,EAAI7hB,YAA0B,CAC9D,IAAIwoF,EAAY3mE,EAAI7hB,WAChByX,EAAIqK,GAAqB0mE,GAE7B,GADAp7D,EAAIhuB,KAAKqY,IACO,IAAZ6b,EAAK7b,GACP,MAEAoK,EAAM2mE,CAEV,CACA,OAAOp7D,CACT,CAg2YoBq7D,CAAU18E,GAAO,SAAUggB,GACzC,OAAO1U,EAAU0U,IAAQ3d,GAAG2d,EAAKrL,EACnC,IANK5R,EAAGC,MAAM,GAAI,IAQX,GATI,IAAUD,CAWzB,CAESuwC,CAAatzC,EAAO2U,EAAMpP,EACnC,EACIo3E,GAAiB,SAAU38E,EAAO2U,GACpC,MAAO,CAAC3U,GAAO1L,OAAOwmC,GAAQ96B,EAAO2U,GACvC,EAEIioE,GAA+B,SAAU9wC,EAASn3B,EAAMvN,GAC1D,OAAOmsD,GAAeznB,EAASn3B,EAAMvN,EAAMq0E,GAC7C,EACIoB,GAAoB,SAAUloE,EAAMlb,GACtC,OAAOgP,EAAOk0E,GAAe5mE,GAAqBtc,EAAIlG,aAAcohB,GAAOoY,GAC7E,EACI+vD,GAA+B,SAAUhxC,EAASn3B,EAAMlb,GAC1D,OAAOmjF,GAA6B9wC,EAASn3B,EAAKmB,IAAKrc,GAAKmN,QAAO,SAAUm2E,GAC3E,OAAOF,GAAkBloE,EAAMlb,GAAKmM,MAAK,WACvC,OAAgD,IAAzCmqD,GAAcgtB,EAAQtjF,EAAKkb,EAAKmB,IACzC,IAAG,SAAUknE,GACX,OAAgD,IAAzCjtB,GAAcgtB,EAAQtjF,EAAKkb,EAAKmB,MAAkBuB,GAAW2lE,EAAWjnE,GAAqBgnE,EAAOxpF,aAC7G,GACF,GACF,EACI0pF,GAAoB,SAAUnxC,EAASn3B,EAAMlb,GAC/C,OAAOojF,GAAkBloE,EAAMlb,GAAKmM,MAAK,WACvC,OAAOg3E,GAA6B9wC,EAASn3B,EAAKmB,IAAKrc,GAAKmN,QAAO,SAAUm2E,GAC3E,OAAgD,IAAzChtB,GAAcgtB,EAAQtjF,EAAKkb,EAAKmB,IACzC,GACF,IAAG,SAAUT,GACX,OAAOunE,GAA6B9wC,EAASz2B,EAAOS,IAAKrc,GAAKuM,QAChE,GACF,EACIk3E,GAAmBh4E,EAAM+3E,IAAmB,GAC5CE,GAAiBj4E,EAAM+3E,IAAmB,GAC1CG,GAAgBl4E,EAAM43E,IAA8B,GACpDO,GAAen4E,EAAM43E,IAA8B,GAEnDQ,GAAO,SAAU7jF,GACnB,OAAO43D,GAAuB53D,GAAKkN,OAAOsmB,GAC5C,EACIswD,GAAS,SAAUzxC,EAASn3B,EAAMlb,GACpC,IAAI+jF,EAAer1E,EAASw0E,GAAe5mE,GAAqBtc,EAAIlG,aAAcohB,GAAOoY,IACrF9W,EAAQ9M,GAAKq0E,GAAcv3E,MAAM0O,GACrC,OAAOy+C,GAAatnB,EAAS71B,EAAMH,IAAKrc,GAAKvH,OAAOorF,GACtD,EACIG,GAAe,SAAU9oE,EAAMlb,GACjC,OAAO43D,GAAuB53D,GAAKkN,OAAOsmB,KAAWswD,IAAO,EAAM5oE,EAAMlb,GAAKsM,QAC/E,EACI23E,GAAY,SAAU/oE,EAAMlb,GAC9B,OA93I+B,SAAUA,GACzC,OAAO0N,EAASC,KAAK3N,EAAIotD,SAAQ,IAAO90D,IAAIgkB,GAC9C,CA43IS4nE,CAA2BlkF,GAAKkN,OAAOsmB,KAAWswD,IAAO,EAAO5oE,EAAMlb,GAAKsM,QACpF,EACI63E,GAAiB14E,EAAMq4E,IAAQ,GAC/BM,GAAa34E,EAAMq4E,IAAQ,GAE3BO,GAAmB,SAAUrkF,GAC/B,OAAO2sD,GAAcgB,eAAe3tD,KAASA,EAAI40B,cAAgB50B,EAAI80B,SACvE,EACIwvD,GAAkB,SAAUppE,EAAMlb,GACpC,IAAI+jF,EAAer1E,EAASw0E,GAAe5mE,GAAqBtc,EAAIlG,aAAcohB,GAAOoY,IACzF,OAAO5jB,GAAKq0E,GAAcv3E,MAAM0O,EAClC,EACIqpE,GAAiB,SAAUrpE,EAAMlb,GACnC,OAAIqkF,GAAiBrkF,GACZ+hF,GAAa/hF,GAEb+hF,GAAa/hF,IAAQm6D,GAAamqB,GAAgBppE,EAAMlb,GAAKqc,IAAKrc,GAAKkN,OAAO60E,GAEzF,EACIyC,GAAgB,SAAUtpE,EAAMlb,GAClC,OAAIqkF,GAAiBrkF,GACZ8hF,GAAc9hF,GAEd8hF,GAAc9hF,IAAQk6D,GAAaoqB,GAAgBppE,EAAMlb,GAAKqc,IAAKrc,GAAKkN,OAAO40E,GAE1F,EAOI2C,GAAU,SAAUzkF,GACtB,OAAO43D,GAAuB53D,GAAKiN,MAAK,SAAUsZ,GAChD,OAAOwH,GAAUxH,EAAKhI,GACxB,IAAGrR,QAAO,SAAUqZ,GAClB,OAVa,SAAU3wB,GACzB,OAAOqY,EAAW,CAChB,MACA,YACCrY,EACL,CAKW8uF,CAAW/+D,GAAMY,EAAK,eAC/B,GACF,EAiBIo+D,GAAoB,SAAUzpE,EAAMlb,GACtC,OAAIykF,GAAQzkF,KAGHyjF,GAAiBvoE,EAAMlb,IAAQ2jF,GAAczoE,EAAMlb,IAAQikF,GAAU/oE,EAAMlb,IAAQukF,GAAerpE,EAAMlb,GAEnH,EAUI4kF,GAAqB,SAAU1pE,EAAMlb,GACvC,OAAIykF,GAAQzkF,KAGH0jF,GAAexoE,EAAMlb,IAAQ4jF,GAAa1oE,EAAMlb,IAAQgkF,GAAa9oE,EAAMlb,IAAQwkF,GAActpE,EAAMlb,GAElH,EACI6kF,GAAgB,SAAU3pE,EAAMlb,GAClC,OAAO2kF,GAAkBzpE,EAAMlb,IAAQ4kF,GAAmB1pE,EAjB5C,SAAUlb,GACxB,IAAIlG,EAAYkG,EAAIlG,YAChB66B,EAAS30B,EAAI20B,SACjB,OAAIvQ,GAAStqB,IAAc66B,EAAS76B,EAAUsvB,KAAKz3B,OAC1Cg7D,GAAc7yD,EAAW66B,EAAS,GAElC30B,CAEX,CASkEu3D,CAAUv3D,GAC5E,EACI8kF,GAAW,SAAUjoE,EAAM8X,GAC7B,OAAO2nC,GAAOz/C,EAAK9gB,OAAO44B,GAC5B,EACIowD,GAAU,SAAU/kF,GACtB,IAAIlG,EAAYkG,EAAIlG,YACpB,OAAOsqB,GAAStqB,IAAc8Z,GAAW9Z,EAAUsvB,KAAM2K,GAC3D,EAyCIixD,GAAiB,SAAU9pE,EAAMlb,GACnC,OAAO0N,EAASJ,KAAKtN,GAAKvH,OAAOssF,IAAS93E,MAAK,SAAUjN,GACvD,IAtB4Coc,EAC1CS,EACAooE,EAoBEnrF,EAAYkG,EAAIlG,YAChB2gD,EAjCmB,SAAUv/B,EAAMkB,GACzC,IAAIS,EAAOT,EAAKgN,KACZ87D,EAAWv4B,GAAcvwC,EAAM,GACnC,SAAI0oE,GAASjoE,EAAM,IAAOgoE,GAAc3pE,EAAMgqE,KAC5C9oE,EAAKgN,KAAO,IAAMvM,EAAKtT,MAAM,GACtB,GAIX,CAwBqB47E,CAAqBjqE,EAAMphB,KAtB1C+iB,GAD0CT,EAuB8CtiB,GAtB5EsvB,KACZ67D,EAtBoB,SAAUpoE,GAClC,IAAIuoE,EAAQvoE,EAAKpC,MAAM,IACvB,OAAOtM,EAAMi3E,GAAO,SAAU1sD,EAAKhnC,GACjC,OAAI4qE,GAAO5jC,IAAQhnC,EAAI,GAAKA,EAAI0zF,EAAMzzF,OAAS,GAAK8qE,GAAU2oB,EAAM1zF,EAAI,KAAO+qE,GAAU2oB,EAAM1zF,EAAI,IAC1F,IAEAgnC,CAEX,IAAG1M,KAAK,GACV,CAagBq5D,CAAoBxoE,GAC9BooE,IAAYpoE,IACdT,EAAKgN,KAAO67D,GACL,KAKc,SAAU/pE,EAAMkB,GACvC,IAAIS,EAAOT,EAAKgN,KACZk8D,EAAU34B,GAAcvwC,EAAMS,EAAKlrB,OAAS,GAChD,SAAImzF,GAASjoE,EAAMA,EAAKlrB,OAAS,IAAOkzF,GAAc3pE,EAAMoqE,KAC1DlpE,EAAKgN,KAAOvM,EAAKtT,MAAM,GAAI,GAAK,IACzB,GAIX,CAI4Gg8E,CAAmBrqE,EAAMphB,GACjI,OAAO2gD,EAAa/sC,EAASJ,KAAKtN,GAAO0N,EAAS1B,MACpD,GACF,EACIw5E,GAAyB,SAAUt2D,GACrC,IAAIhU,EAAOoB,GAAqB4S,EAAOy4B,WACnCz4B,EAAOu4B,UAAUsI,eACnBi1B,GAAe9pE,EAAMyxC,GAAcU,eAAen+B,EAAOu4B,UAAUC,WAAW16C,MAAK,SAAUhN,GAC3FkvB,EAAOu4B,UAAU2U,OAAOp8D,EAAIitD,UAC9B,GAEJ,EA4BIw4B,GAAc,SAAUrpE,EAAMuY,EAAQjJ,GACxC,GAAc,IAAVA,EAAJ,CAGA,IAAInF,EAAMjK,GAAqBF,GAC3BlB,EAAO2S,GAAWtH,EAAK+M,IAAW9mB,MAAM+Z,GACxC4jB,EAAa/tB,EAAKgN,KAAK7f,MAAMorB,EAAQA,EAASjJ,GAC9Cg6D,EAAiB/wD,EAASjJ,GAAStP,EAAKgN,KAAKz3B,QAAUizF,GAAmB1pE,EAAMyxC,GAAcvwC,EAAMA,EAAKgN,KAAKz3B,SAC9Gg0F,EAA8B,IAAXhxD,GAAgBgwD,GAAkBzpE,EAAMyxC,GAAcvwC,EAAM,IACnFA,EAAKwpE,YAAYjxD,EAAQjJ,EAnCJ,SAAU2sB,EAASstC,EAAkBD,GAwB1D,OAvBa72E,EAAMwpC,GAAS,SAAUzpC,EAAKhd,GACzC,OAAI4qE,GAAa5qE,IAAM0qE,GAAO1qE,GACxBgd,EAAIi3E,qBAAmC,KAAZj3E,EAAIiF,KAAc8xE,GAAoB/2E,EAAIiF,IAAIliB,SAAW0mD,EAAQ1mD,OAAS,GAAK+zF,EACrG,CACLG,qBAAqB,EACrBhyE,IAAKjF,EAAIiF,IAAMkgB,IAGV,CACL8xD,qBAAqB,EACrBhyE,IAAKjF,EAAIiF,IAAM,KAIZ,CACLgyE,qBAAqB,EACrBhyE,IAAKjF,EAAIiF,IAAMjiB,EAGrB,GAAG,CACDi0F,qBAAqB,EACrBhyE,IAAK,KAEOA,GAChB,CAUkCiyE,CAAiB37C,EAAYw7C,EAAkBD,GAN/E,CAOF,EACIK,GAA2B,SAAU3pE,EAAMuY,GAC7C,IAAI0jB,EAAUj8B,EAAKgN,KAAK7f,MAAMorB,GAC1BqxD,EAAkB3tC,EAAQ1mD,OAASwiB,GAAMkkC,GAAS1mD,OACtD8zF,GAAYrpE,EAAMuY,EAAQqxD,EAC5B,EACIC,GAA4B,SAAU7pE,EAAMuY,GAC9C,IAAI0jB,EAAUj8B,EAAKgN,KAAK7f,MAAM,EAAGorB,GAC7BqxD,EAAkB3tC,EAAQ1mD,OAASyiB,GAAMikC,GAAS1mD,OACtD8zF,GAAYrpE,EAAMuY,EAASqxD,EAAiBA,EAC9C,EACIE,GAAiB,SAAUC,EAAUptB,EAAUqtB,EAAqBC,QAClD,IAAhBA,IACFA,GAAc,GAEhB,IAAIC,EAAmBlyE,GAAM+xE,EAAS/8D,MAAMz3B,OACxC40F,EAAUF,EAAcF,EAAWptB,EACnCytB,EAAaH,EAActtB,EAAWotB,EAU1C,OATIE,EACFE,EAAQrrB,WAAWsrB,EAAWp9D,MAE9Bm9D,EAAQE,WAAW,EAAGD,EAAWp9D,MAEnCpI,GAAS1E,GAAqBkqE,IAC1BJ,GACFL,GAAyBQ,EAASD,GAE7BC,CACT,EAOIlxB,GAAa,SAAU9uC,EAAKvmB,GAC9B,OANoB,SAAUA,EAAKumB,GACnC,IAAIzsB,EAAYkG,EAAIlG,YAChB66B,EAAS30B,EAAI20B,SACjB,OAA6C,IAAtCg4B,GAAcgB,eAAe3tD,IAAkBlG,IAAcysB,EAAI/rB,YAAcm6B,EAASg4B,GAAc3U,OAAOzxB,GAAKoO,QAC3H,CAES+xD,CAAgB1mF,EAAKumB,GAAOomC,GAAc3sD,EAAIlG,YAAakG,EAAI20B,SAAW,GAAK30B,CACxF,EAOI2mF,GAAkC,SAAUpgE,GAC9C,OAAIyP,GAAmBzP,EAAItH,iBAClBvR,EAASJ,MALS8O,EAKSmK,EAAItH,gBAJjCmF,GAAShI,GAAQuwC,GAAcvwC,EAAMA,EAAKgN,KAAKz3B,QAAUg7D,GAAc1U,MAAM77B,KAM3EmK,EAAItH,gBAAkBo7C,GAAe9zC,EAAItH,iBAAmBvR,EAAS1B,OAP7D,IAAUoQ,CAS7B,EACIwqE,GAA8B,SAAUrgE,GAC1C,OAAIyP,GAAmBzP,EAAIrH,aAClBxR,EAASJ,MAfY8O,EAeSmK,EAAIrH,YAdpCkF,GAAShI,GAAQuwC,GAAcvwC,EAAM,GAAKuwC,GAAc3U,OAAO57B,KAgB7DmK,EAAIrH,YAAck7C,GAAgB7zC,EAAIrH,aAAexR,EAAS1B,OAjBnD,IAAUoQ,CAmBhC,EA6BIyqE,GAAoC,SAAUx0C,EAAS7b,EAAajQ,GACtE,OAJsB,SAAU8rB,EAAS7b,EAAajQ,GACtD,OAAO8rB,EARsB,SAAU7b,EAAajQ,GACpD,OAAOqgE,GAA4BrgE,GAAKxZ,SAAQ,WAC9C,OAAO45E,GAAgCpgE,EACzC,IAAGxZ,SAAQ,WACT,OAhBmC,SAAUypB,EAAajQ,GAC5D,OAAO2zC,GAAa1jC,EAAam2B,GAAc1U,MAAM1xB,IAAMpa,MAAK,WAC9D,OAAOguD,GAAa3jC,EAAam2B,GAAc3U,OAAOzxB,GACxD,GAAG7Y,EAASJ,KACd,CAYWw5E,CAAiCtwD,EAAajQ,EACvD,GACF,CAEmBwgE,CAAyBvwD,EAAajQ,GAfxB,SAAUiQ,EAAajQ,GACtD,OAAOogE,GAAgCpgE,GAAKxZ,SAAQ,WAClD,OAAO65E,GAA4BrgE,EACrC,IAAGxZ,SAAQ,WACT,OAfoC,SAAUypB,EAAajQ,GAC7D,IAAIygE,EAAgBr6B,GAAc3U,OAAOzxB,EAAItH,gBAAkBsH,EAAItH,gBAAkBsH,EAAI/rB,YACzF,OAAO2/D,GAAa3jC,EAAawwD,GAAe76E,MAAK,WACnD,OAAO+tD,GAAa1jC,EAAam2B,GAAc1U,MAAM1xB,GACvD,GAAG7Y,EAASJ,KACd,CAUW25E,CAAkCzwD,EAAajQ,EACxD,GACF,CASgE2gE,CAA2B1wD,EAAajQ,EACxG,CAES4gE,CAAkB90C,EAAS7b,EAAajQ,GAAKjuB,IAAImT,EAAM4pD,GAAY9uC,GAC5E,EACI6gE,GAAiB,SAAUl4D,EAAQmjB,EAASryC,GAC9CA,EAAImM,MAAK,WACP+iB,EAAO7xB,OACT,IAAG,SAAU2C,GACXkvB,EAAOu4B,UAAU2U,OAAOp8D,EAAIitD,UAAW5a,EACzC,GACF,EAMI4L,GAAU,SAAU/uB,EAAQ3I,GAC9B,OAAOA,GAAO7V,GAAMwe,EAAOwL,OAAOkH,mBAAoB/vC,GAAK00B,GAC7D,EACI8gE,GAAiB,SAAU9gE,GAC7B,GAAIwQ,GAAUxQ,GAAM,CAClB,IAAI0uC,EAAK34C,GAAsB,2BAG/B,OAFAuE,GAAM0F,GACN9F,GAAS8F,EAAK0uC,GACPvnD,EAASJ,KAAKq/C,GAAc3U,OAAOid,EAAG54C,KAC/C,CACE,OAAO3O,EAAS1B,MAEpB,EAyBIs7E,GAAkB,SAAUp4D,EAAQmjB,EAAS9rB,EAAKghE,QAClC,IAAdA,IACFA,GAAY,GAEd,IA9CwBC,EA8CpBC,EAAiBZ,GAAkCx0C,EAASnjB,EAAOy4B,UAAWphC,EAAIlK,KAClFqrE,EAAc75D,GAAWtH,EAAK9a,EAAMwyC,GAAS/uB,IA/CzBs4D,EA+C4Ct4D,EAAOy4B,UA9CpE,SAAUphC,GACf,OAAOA,EAAIlK,MAAQmrE,CACrB,IA6CIG,EA9BiB,SAAUphE,EAAKqhE,EAAmBxB,GACvD,IAz0YoBlhE,EAAIC,EAAI0iE,EAAIl/E,EAy0Y5Bm/E,EAAc9oE,GAAYuH,GAAK9tB,OAAO+lB,IACtCupE,EAAc7oE,GAAYqH,GAAK9tB,OAAO+lB,IAE1C,OADAwC,GAASuF,IA30YWrB,EA40YP4iE,EA50YW3iE,EA40YE4iE,EA50YEF,EA40YWD,EA50YPj/E,EA40Y0B,SAAU+pB,EAAMxwB,EAAMlC,GAC9E,IAAImmF,EAAWzzD,EAAKrW,IAAK08C,EAAW72D,EAAKma,IACrCsY,EAASwxD,EAAS/8D,KAAKz3B,OAE3B,OADAu0F,GAAeC,EAAUptB,EAAUqtB,GAC5BpmF,EAAIlG,cAAgBi/D,EAAWpM,GAAcw5B,EAAUxxD,GAAU30B,CAC1E,EAh1YOklB,EAAG5Y,UAAY6Y,EAAG7Y,UAAYu7E,EAAGv7E,SAAWoB,EAASJ,KAAK3E,EAAEuc,EAAGxY,WAAYyY,EAAGzY,WAAYm7E,EAAGn7E,aAAegB,EAAS1B,QAg1YzHe,SAAQ,WAST,OARIq5E,IACF0B,EAAY96E,MAAK,SAAUuZ,GACzB,OAAO0/D,GAA0B1/D,EAAIlK,IAAKkK,EAAIlK,IAAI1qB,OACpD,IACAo2F,EAAY/6E,MAAK,SAAUuZ,GACzB,OAAOw/D,GAAyBx/D,EAAIlK,IAAK,EAC3C,KAEKurE,CACT,GACF,CAUiCI,CAAiBzhE,EAAKkhE,EATjC,SAAUv4D,EAAQlqB,GACtC,OAAO0L,GAAMwe,EAAOwL,OAAOmH,wBAAyBhwC,GAAKmT,GAC3D,CAOuEijF,CAAgB/4D,EAAQ3I,IACzF2I,EAAO7S,IAAIskC,QAAQzxB,EAAOy4B,YAC5Bz4B,EAAOg5D,WAAW,IAClBh5D,EAAOu4B,UAAU0gC,qBAEjBT,EAAYz6E,KAAKo6E,IAAgBl7E,MAAK,WAChCo7E,GACFH,GAAel4D,EAAQmjB,EAASs1C,EAEpC,IAAG,SAAUS,GACPb,GACFH,GAAel4D,EAAQmjB,EAAS3kC,EAASJ,KAAK86E,GAElD,GAEJ,EAOIC,GAAgB,SAAUlsD,GAC5B,OAAO+qB,GAAY/qB,EAAO,QAC5B,EAqBImsD,GAAe,SAAU/hF,EAAOypD,GAClC,MAAO,CACLzpD,MAAOA,EACPypD,IAAKA,EAET,EAQIu4B,GAAel9D,GAAa,CAC9B,CACEm9D,gBAAiB,CACf,MACA,SAGJ,CAAEC,UAAW,CAAC,UACd,CACEC,aAAc,CACZ,QACA,mBAGJ,CACEC,WAAY,CACV,kBACA,gBACA,iBAIFC,GAAmB,SAAU9uF,EAAW6yB,GAC1C,OAAOyB,GAAU9R,GAAqBxiB,GAAY,QAAS6yB,EAC7D,EACIk8D,GAAoB,SAAUC,GAChC,OAAQlgF,GAAGkgF,EAAQviF,MAAOuiF,EAAQ94B,IACpC,EACI+4B,GAAsB,SAAUD,EAASn8D,GAC3C,OAAOq0C,GAAgB8nB,EAAQviF,MAAOomB,GAAQ1f,MAAK,SAAU+7E,GAC3D,OAAOhoB,GAAgB8nB,EAAQ94B,IAAKrjC,GAAQ1f,MAAK,SAAUg8E,GACzD,OA57YiBnwF,EA47YH8P,GAAGogF,EAAkBC,GA57YfpwF,EA47YgCmwF,EA37YjDlwF,EAAI4U,EAASJ,KAAKzU,GAAK6U,EAAS1B,OAD5B,IAAUlT,EAAGD,CA67YtB,GACF,GACF,EA8BIqwF,GAA+B,SAAUv8D,GAC3C,OAAO,SAAUm8D,GACf,OAAOC,GAAoBD,EAASn8D,GAAQr0B,KAAI,SAAU6jC,GACxD,OA1Ee,SAAUqrB,EAAKrrB,EAAOgtD,GACzC,MAAO,CACL3hC,IAAKA,EACLrrB,MAAOA,EACPgtD,MAAOA,EAEX,CAoEaC,CAAeN,EAAS3sD,EAAOksD,GAAclsD,GACtD,GACF,CACF,EACIktD,GAAqB,SAAUP,EAASQ,EAAkB9hC,EAAK76B,GACjE,GAAI66B,EAAI8I,YAAcw4B,EAAQ37E,OAAO07E,IACnC,OAAOn7E,EAAS1B,OACX,GAAIs9E,EAAiBC,YAAa,CACvC,IAAIC,EAAqBV,EAAQ77E,KAAKi8E,GAA6Bv8D,IACnE,OAAOjf,EAASJ,KAAK,CACnB/G,MAAOijF,EACPx5B,IAAKw5B,GAET,CACE,IAAIC,EAAYb,GAAiBphC,EAAIjyB,eAAgB5I,GACjD+8D,EAAUd,GAAiBphC,EAAIhG,aAAc70B,GAC7Cg9D,EAAsBF,EAAUx8E,KArCP,SAAU0f,GACzC,OAAO,SAAU88D,GACf,OAAOzoB,GAAgByoB,EAAW98D,GAAQ1f,MAAK,SAAUkvB,GACvD,OAAOxsB,GAAO04E,GAAclsD,IAAQ7jC,KAAI,SAAUoxF,GAChD,OAAOpB,GAAamB,EAAWC,EACjC,GACF,GACF,CACF,CA6B6CE,CAA2Bj9D,IAAS1f,KAAKi8E,GAA6Bv8D,IAC3Gk9D,EAAoBH,EAAQz8E,KA7BL,SAAU0f,GACvC,OAAO,SAAU+8D,GACf,OAAO1oB,GAAgB0oB,EAAS/8D,GAAQ1f,MAAK,SAAUkvB,GACrD,OAAOzsB,GAAK24E,GAAclsD,IAAQ7jC,KAAI,SAAUmxF,GAC9C,OAAOnB,GAAamB,EAAWC,EACjC,GACF,GACF,CACF,CAqByCI,CAAyBn9D,IAAS1f,KAAKi8E,GAA6Bv8D,IACzG,OAAOjf,EAASJ,KAAK,CACnB/G,MAAOojF,EACP35B,IAAK65B,GAGX,EACIE,GAAe,SAAUZ,EAAOloB,GAClC,OAAOhyD,EAAYk6E,GAAO,SAAU/gF,GAClC,OAAOQ,GAAGR,EAAG64D,EACf,GACF,EACI+oB,GAAmB,SAAUZ,GAC/B,OAAOnkE,GAAM8kE,GAAaX,EAAeD,MAAOC,EAAe5hC,IAAIjhD,OAAQwjF,GAAaX,EAAeD,MAAOC,EAAe5hC,IAAIwI,MAAM,SAAU6qB,EAAYU,GAC3J,OAAO6N,EAAeD,MAAM5/E,MAAMsxE,EAAYU,EAAW,EAC3D,GACF,EAMI0O,GAAgB,SAAUziC,EAAK8hC,GACjC,IAAIY,EAAaZ,EAAiBY,WAAYC,EAAWb,EAAiBa,SACtEC,EAAkB5iC,EAAI8E,aAO1B,OANA49B,EAAWl9E,MAAK,SAAUmvB,GACxB,OAAOiuD,EAAgBtzB,cAAc36B,EAAM9f,IAC7C,IACA8tE,EAASn9E,MAAK,SAAUmvB,GACtB,OAAOiuD,EAAgBvzB,aAAa16B,EAAM9f,IAC5C,IACO+tE,CACT,EAmCIC,GAAqB,SAAUnvE,EAAMssC,GACvC,IAAI76B,EAjMkB,SAAUzR,GAChC,OAAO,SAAU8B,GACf,OAAOpU,GAAGsS,EAAM8B,EAClB,CACF,CA6LestE,CAAkBpvE,GAC3BqvE,EAhHW,SAAU/iC,EAAK76B,GAC9B,IAAI88D,EAAYb,GAAiBphC,EAAIjyB,eAAgB5I,GACjD+8D,EAAUd,GAAiBphC,EAAIhG,aAAc70B,GACjD,OAAO1H,GAAMwkE,EAAWC,EAASpB,GACnC,CA4GmBkC,CAAWhjC,EAAK76B,GAC7B28D,EA3LyB,SAAU9hC,EAAK76B,GAC5C,IAAI89D,EAAW,SAAUruE,GACvB,OAAO4kD,GAAgB1kD,GAAqBF,GAAOuQ,EACrD,EACIu9D,EAAaO,EAASjjC,EAAIjyB,gBAC1B40D,EAAWM,EAASjjC,EAAIhG,cACxBkpC,EAAiBR,EAAW59E,SAC5Bq+E,EAAeR,EAAS79E,SACxBi9E,EAActkE,GAAMilE,EAAYC,EAAUvhF,IAAI4D,OAAM,GAExD,MAAO,CACL09E,WAAYA,EACZC,SAAUA,EACVO,eAAgBA,EAChBC,aAAcA,EACdpB,YAAaA,EACbqB,cAPkBrB,GAAemB,GAAkBC,EASvD,CAyKyBE,CAAyBrjC,EAAK76B,GACrD,OAtDqC,SAAU49D,EAAY/iC,EAAK76B,GAChE,OAAO49D,EAAWr9E,QAAO,SAAU47E,GACjC,OApEoB,SAAUA,EAASn8D,GACzC,OAAQk8D,GAAkBC,IAAYC,GAAoBD,EAASn8D,GAAQzf,QAAO,SAAUivB,GAC1F,IAAI2uD,EAAO3uD,EAAM9f,IAAIyuE,KACrB,OAAuB,IAAhBA,EAAKn5F,QAAyC,IAAzBm5F,EAAK,GAAG3B,MAAMx3F,MAC5C,GACF,CA+DWo5F,CAAkBjC,EAASn8D,IAAWy0C,GAAuB0nB,EAAQviF,MAAOihD,EACrF,GACF,CAkDMwjC,CAAiCT,EAAY/iC,EAAK76B,GAC7C49D,EAAWjyF,KAAI,SAAUwwF,GAC9B,OAAOP,GAAaC,gBAAgBhhC,EAAKshC,EAAQviF,MACnD,IACS+iF,EAAiBsB,aArBP,SAAU9B,EAASQ,EAAkB9hC,EAAK76B,GAC/D,OAAO08D,GAAmBP,EAASQ,EAAkB9hC,EAAK76B,GAAQ1f,MAAK,SAAUwK,GAC/E,IAAIlR,EAAQkR,EAAGlR,MAAOypD,EAAMv4C,EAAGu4C,IAC3Bi7B,EAA0B1kF,EAAM0G,KAAK+8E,IAAkBx9E,MAAM,IAC7D0+E,EAAwBl7B,EAAI/iD,KAAK+8E,IAAkBx9E,MAAM,IAC7D,GAAIy+E,EAAwBt5F,OAAS,GAAKu5F,EAAsBv5F,OAAS,EAAG,CAC1E,IAAIy4F,EAAkBH,GAAcziC,EAAK8hC,GACzC,OAAO57E,EAASJ,KAAKi7E,GAAaI,WAAWsC,EAAyBC,EAAuBd,GAC/F,CACE,OAAO18E,EAAS1B,MAEpB,GACF,CAUWm/E,CAAiBZ,EAAYjB,EAAkB9hC,EAAK76B,GA3CvC,SAAUm8D,EAASQ,EAAkB9hC,EAAK76B,GAChE,OAAO08D,GAAmBP,EAASQ,EAAkB9hC,EAAK76B,GAAQ1f,MAAK,SAAUwK,GAC/E,IAAIlR,EAAQkR,EAAGlR,MAAOypD,EAAMv4C,EAAGu4C,IAC/B,OAAOzpD,EAAMuG,GAAGkjD,EAClB,IAAG/iD,MAAK,SAAUm8E,GAChB,IAAIG,EAAcD,EAAiBC,YAC/B5oB,EAAgBqpB,GAAiBZ,GAAgB58E,MAAM,IAC3D,GAAI+8E,GAAeH,EAAeD,MAAMx3F,SAAWgvE,EAAchvE,OAC/D,OAAO+b,EAASJ,KAAKi7E,GAAaE,UAAUW,EAAejtD,QACtD,GAAIwkC,EAAchvE,OAAS,EAAG,CACnC,GAAI43F,EACF,OAAO77E,EAASJ,KAAKi7E,GAAaG,aAAa/nB,EAAejzD,EAAS1B,SAEvE,IAAIo+E,EAAkBH,GAAcziC,EAAK8hC,GACzC,OAAO57E,EAASJ,KAAKi7E,GAAaG,aAAa/nB,EAAejzD,EAASJ,KAAKyE,GAASA,GAAS,CAAC,EAAGu3E,GAAmB,CAAE9hC,IAAK4iC,MAEhI,CACE,OAAO18E,EAAS1B,MAEpB,GACF,CAyBWo/E,CAAkBb,EAAYjB,EAAkB9hC,EAAK76B,EAEhE,EAEI0+D,GAAc,SAAUnwE,GAC1B,IAv+Z0BlW,EAw+Z1B,OA1iaY,IAmEL1J,GADmB0J,EAu+ZFkW,IAt+Z8B,aAAlBrpB,GAAKmT,GAs+ZTga,GAAY9D,GAAQuE,GAAUvE,IACjDjO,KAAKo+E,IAAat+E,SAAQ,WACrC,OAAOW,EAASJ,KAAK4N,EACvB,GACF,EACIowE,GAAa,SAAUnC,GACzB,OAAO96E,EAAO86E,GAAO,SAAUloB,GAC7Bv7C,GAASu7C,EAAM,mBACf4hB,GAAkB5hB,EACpB,GACF,EAcIsqB,GAA0B,SAAUr8D,EAAQ+xC,EAAMzZ,EAAKgkC,GACzD,IAAIC,EAAiBjkC,EAAI8E,aACrBk/B,GACFC,EAAexqC,SAASuG,EAAIjyB,eAAgBiyB,EAAIjG,aAChDkqC,EAAel/B,YAAY0U,EAAK5kD,IAAIoD,aAEpCgsE,EAAe70B,eAAeqK,EAAK5kD,IAAImD,YACvCisE,EAAevqC,OAAOsG,EAAIhG,aAAcgG,EAAI/F,YAE9CiqC,GAAmBx8D,EAAQu8D,EAAgBxqB,GAAM,EACnD,EACI0qB,GAAkC,SAAUz8D,GAC9C,IAAIyxC,EAAgBG,GAAmB5xC,GACnC08D,EAAetvE,GAAqB4S,EAAOu4B,UAAU2F,WACrDxoC,GAAcgnE,EAAavvE,MAAQ0a,GAAU60D,GAC/C18D,EAAOu4B,UAAU0gC,kBAAkByD,EAAavvE,IAAK,GAErD6S,EAAOu4B,UAAU+B,UAAS,GAExBmX,EAAchvE,OAAS,GAAKub,EAAOyzD,GAAe,SAAUM,GAC5D,OAAOr4D,GAAGq4D,EAAM2qB,EAClB,KACAtmE,GAAMsmE,EAAc,oBAAqB,IAE7C,EACIC,GAAwB,SAAU38D,EAAQi6D,EAAO2C,GACnD,IAAIC,EAAY78D,EAAOu4B,UAAUC,SAC7BskC,EAAeF,EAAe7+E,MAAK,SAAUwK,GAC/C,IAAI+vC,EAAM/vC,EAAG+vC,IAAKkjC,EAAiBjzE,EAAGizE,eAClCuB,EA1Cc,SAAU/8D,EAAQp1B,GACtC,OAAO4T,EAASC,KAAKuhB,EAAO7S,IAAIoiC,UAAU3kD,EAAWo1B,EAAO7S,IAAI4hC,UAAU3lD,IAAIgkB,GAChF,CAwCuB4vE,CAAgBh9D,EAAQw7D,EAAiBljC,EAAIhG,aAAegG,EAAIjyB,gBACnFiyB,EAAI2kC,iBAxCe,SAAUj9D,EAAQk9D,EAAcC,GACrDA,EAAWr/E,MAAK,SAAUmkD,GACpBi7B,EACFprE,GAASmwC,IAET0xB,GAAkB1xB,GAClBjiC,EAAOu4B,UAAU0gC,kBAAkBh3B,EAAM90C,IAAK,GAElD,GACF,CAgCIiwE,CAAiBp9D,EAAQw7D,EAAgBuB,EAAaxzF,OAAOs+B,KAC7D,IAAIw1D,EAAe7B,EAAiBvB,EAAM,GAAKA,EAAMA,EAAMx3F,OAAS,GAEpE,OADA45F,GAAwBr8D,EAAQq9D,EAAcR,EAAWrB,GACpD3zD,GAAUw1D,GAGN7+E,EAAS1B,OAFT0B,EAASJ,KAAKo9E,EAAiBvB,EAAM5/E,MAAM,GAAK4/E,EAAM5/E,MAAM,GAAI,GAI3E,IAAGiD,MAAM28E,GAGT,OAFAmC,GAAWU,GACXL,GAAgCz8D,IACzB,CACT,EACIs9D,GAAuB,SAAUt9D,EAAQu9D,EAAiBC,EAAeC,GAC3E,IAAInlC,EAAMt4B,EAAOu4B,UAAUC,SACvB+hC,EAAYgD,EAAgB,GAC5B/C,EAAUgD,EAAcA,EAAc/6F,OAAS,GACnD45F,GAAwBr8D,EAAQu6D,EAAWjiC,GAAK,GAChD+jC,GAAwBr8D,EAAQw6D,EAASliC,GAAK,GAC9C,IAAIolC,EAAyB71D,GAAU0yD,GAAagD,EAAkBA,EAAgBljF,MAAM,GACxFsjF,EAAuB91D,GAAU2yD,GAAWgD,EAAgBA,EAAcnjF,MAAM,GAAI,GAIxF,OAHA+hF,GAAWsB,EAAuB/xF,OAAOgyF,IACzCF,EAAWR,iBACXR,GAAgCz8D,IACzB,CACT,EACIw8D,GAAqB,SAAUx8D,EAAQs4B,EAAKyZ,EAAM6rB,QAC9B,IAAlBA,IACFA,GAAgB,GAElBtlC,EAAI2kC,iBACJ,IAjhauBnnF,EAihanB46D,EAAWyrB,GAAYpqB,GAAMz0D,MAAMy0D,GACnC8rB,EAAYzwE,GAAqB4S,EAAO7S,IAAIoiC,UAAUmhB,EAASvjD,IAAK6S,EAAO7S,IAAI4hC,UAOnF,GANIlnB,GAAUg2D,KACZlK,GAAkBkK,GACdD,GACF59D,EAAOu4B,UAAU0gC,kBAAkB4E,EAAU1wE,IAAK,KAGjDzT,GAAGq4D,EAAM8rB,GAAY,CACxB,IAAIC,EAAyBloE,GAAKlJ,GAAOmxE,GAAY9rB,GAAQ,GAphaxDrlD,GANgB5W,EA0hasD+nF,GAphatDz0F,IAAI+mB,IAAU/mB,KALpB,SAAUsoB,GACzB,OAAOlS,EAASkS,GAAU,SAAUxY,GAClC,OAAQQ,GAAG5D,EAASoD,EACtB,GACF,IACqDoE,MAAM,IAqhazD6B,EAAO2+E,EAAuBnyF,OAAOwkB,GAAS4hD,KAAQ,SAAU7kD,GACzDxT,GAAGwT,EAAM2wE,IAAenvE,GAAWxB,EAAM2wE,KAAch2D,GAAU3a,IACpE4E,GAAS5E,EAEb,GACF,CACA,OAAO,CACT,EACI6wE,GAAqB,SAAU/9D,EAAQiN,GAEzC,OADAmrD,GAAgBp4D,GAAQ,EAAOiN,IACxB,CACT,EAqBI+wD,GAAgB,SAAUnxC,EAASx1B,GACrC,OAAOvX,EAAOk0E,GAAe38D,EAAKw1B,GAAUloB,GAC9C,EACIs5D,GAAmB,SAAUpxC,EAASx1B,GACxC,OAAOvX,EAAOk0E,GAAe38D,EAAKw1B,IAAgB,UAnma3C,SAAU5+C,GACf,OAAOohB,GAAYphB,IAkma6B,YAlmavBtL,GAAKsL,EAChC,GAkmaF,EAQIiwF,GAAe,SAAUl+D,EAAQ3I,GAGnC,OAFAs8D,GAAkBt8D,GAClB2I,EAAOu4B,UAAU0gC,kBAAkB5hE,EAAIlK,IAAK,GACrC3O,EAASJ,MAAK,EACvB,EA+BI+/E,GAAc,SAAUh7C,EAASryC,GACnC,OAAOqyC,EAAUowC,GAAcziF,GAAO0iF,GAAa1iF,EACrD,EAOIstF,GAAgB,SAAUp+D,EAAQmjB,EAASk7C,GAC7C,IAAIxxC,EAAUz/B,GAAqB4S,EAAOy4B,WAC1C,OAAOwlC,GAAiBpxC,EAASwxC,GAAUphF,MAAK,WAC9C,OAtBmB,SAAU+iB,EAAQmjB,EAAS0J,EAASwxC,GACzD,IAAI5/E,EAAOg/C,GAAcU,eAAen+B,EAAOu4B,UAAUC,UACzD,OAAOwlC,GAAcnxC,EAASwxC,GAAUtgF,MAAK,SAAUugF,GACrD,OAAOz2D,GAAUy2D,GAAYJ,GAAal+D,EAAQs+D,GAnC7B,SAAUt+D,EAAQ6sB,EAAS1J,EAASm7C,EAAU7/E,GACrE,OAAOisD,GAASvnB,EAASnjB,EAAOy4B,UAAWh6C,GAAMV,MAAK,SAAUkF,GAC9D,OAAO+6E,GAAcnxC,EAASz/B,GAAqBnK,EAAGi7C,YAAY90D,KAAI,SAAUm1F,GAC9E,OAAgC,IAAzB7kF,GAAG6kF,EAAQD,EACpB,GACF,GACF,CA6BkEE,CAAmBx+D,EAAQ6sB,EAAS1J,EAASm7C,EAAU7/E,EACvH,IAAGnB,OAAM,EACX,CAiBWmhF,CAAiBz+D,EAAQmjB,EAAS0J,EAASwxC,IAT3B,SAAUr+D,EAAQmjB,GAC3C,IAAIu7C,EAAUjhC,GAAcU,eAAen+B,EAAOu4B,UAAUC,UAC5D,OAAO2lC,GAAYh7C,EAASu7C,IAAYj0B,GAAatnB,EAASnjB,EAAOy4B,UAAWimC,GAAS1gF,QAAO,SAAUlN,GACxG,OAAOqtF,GAAYh7C,EAASryC,EAC9B,GACF,CAImE6tF,CAAqB3+D,EAAQmjB,EAC9F,IAAG,SAAUy7C,GACX,OAlBqB,SAAU5+D,EAAQmjB,EAAS0J,EAAS+xC,GAC3D,IAAIngF,EAAOg/C,GAAcU,eAAen+B,EAAOu4B,UAAUC,UACzD,OAAO3wB,GAAU+2D,GAAeV,GAAal+D,EAAQ4+D,GAbxB,SAAU5+D,EAAQ6sB,EAAS1J,EAASy7C,EAAangF,GAC9E,OAAOisD,GAASvnB,EAASnjB,EAAOy4B,UAAWh6C,GAAMV,MAAK,SAAUkF,GAC9D,OAjBwB,SAAU27E,EAAaz7C,EAAS1kC,EAAMwE,GAChE,OAAOioD,GAAgB0zB,EAAYzxE,KAAKpP,MAAK,SAAUkhC,GACrD,OAAOksB,GAAeyzB,EAAYzxE,KAAK/jB,KAAI,SAAU65C,GACnD,OAAOE,EAAU1kC,EAAKw/C,QAAQhf,IAAUh8B,EAAGg7C,QAAQhb,GAAQxkC,EAAKw/C,QAAQhb,IAAShgC,EAAGg7C,QAAQhf,EAC9F,GACF,IAAG3hC,OAAM,EACX,CAWWuhF,CAAsBD,EAAaz7C,EAAS1kC,EAAMwE,GAVrC,SAAU+c,EAAQ3I,GACxC,OAAO6mE,GAAal+D,EAAQ3I,EAC9B,CAQmEynE,CAAkB9+D,EAAQ4+D,GAPlE,SAAU/xC,EAAS+xC,EAAa37E,GACzD,OAAOg7E,GAAiBpxC,EAASz/B,GAAqBnK,EAAGi7C,YAAY90D,KAAI,SAAU21F,GACjF,OAAsC,IAA/BrlF,GAAGqlF,EAAWH,EACvB,GACF,CAG4GI,CAAqBnyC,EAAS+xC,EAAa37E,EACrJ,IAAGrF,GAAGY,EAASJ,MAAK,GACtB,CASsE6gF,CAAyBj/D,EAAQ6sB,EAAS1J,EAASy7C,EAAangF,EACtI,CAeWygF,CAAmBl/D,EAAQmjB,EAAS0J,EAAS+xC,GAAathF,OAAM,EACzE,GACF,EACI6hF,GAAoB,SAAUn/D,EAAQmjB,GACxC,IAAIk7C,EAAWjxE,GAAqB4S,EAAOu4B,UAAUwkB,UAAS,IAC1Dkd,EAAQroB,GAAmB5xC,GAC/B,OAAOA,EAAOu4B,UAAUsI,eAAkC,IAAjBo5B,EAAMx3F,OAAe27F,GAAcp+D,EAAQmjB,EAASk7C,GAzE3E,SAAUr+D,EAAQq+D,EAAU5sB,GAC9C,IAAIluC,EAAWnW,GAAqB4S,EAAOy4B,WACvCH,EAAMt4B,EAAOu4B,UAAUC,SAC3B,OAAgC,IAAzBiZ,EAAchvE,OAAek6F,GAAsB38D,EAAQyxC,EAAejzD,EAAS1B,QAVrE,SAAUkjB,EAAQ6sB,EAASyL,EAAK+lC,GACrD,OAAOJ,GAAiBpxC,EAASwxC,GAAUphF,MAAK,WAC9C,OAVkB,SAAU+iB,EAAQ6sB,EAASyL,GAC/C,OAAO6iC,GAAmBtuC,EAASyL,GAAKlvD,KAAI,SAAUg2F,GACpD,OAAOA,EAAOniF,KAAKV,EAAMigF,GAAoBx8D,GAASzjB,EAAMwhF,GAAoB/9D,GAASzjB,EAAMogF,GAAuB38D,GAASzjB,EAAM+gF,GAAsBt9D,GAC7J,GACF,CAMWq/D,CAAgBr/D,EAAQ6sB,EAASyL,EAC1C,IAAG,SAAUtrB,GACX,OAPqB,SAAUhN,EAAQgN,GACzC,OAAOkxD,GAAal+D,EAAQgN,EAC9B,CAKWsyD,CAAmBt/D,EAAQgN,EACpC,IAAG1vB,OAAM,EACX,CAIsGiiF,CAAiBv/D,EAAQuD,EAAU+0B,EAAK+lC,EAC9I,CAqE2GmB,CAAcx/D,EAAQq+D,EAAUpE,EAC3I,EAoBIva,GAAY,SAAUpnB,GACxB,OAAOA,EAAI8I,UAAY9I,EAbU,SAAUA,GAC3C,IAAIsR,EAAWnM,GAAcU,eAAe7F,GACxCmU,EAAShP,GAAcW,aAAa9F,GACpC/0B,EAAW+0B,EAAImnC,wBACnB,OAAOh1B,IAAa,EAAOlnC,EAAUkpC,GAAQrjE,KAAI,SAAUs2F,GACzD,OAAKt4B,GAAcwC,EAAU6C,EAAQlpC,IAAa6jC,GAAcwC,EAAU81B,EAAWn8D,GAXvE,SAAUw5B,EAAIE,EAAID,EAAIE,GACtC,IAAI5E,EAAMp0D,SAASwqD,cAGnB,OAFA4J,EAAIvG,SAASgL,EAAIE,GACjB3E,EAAItG,OAAOgL,EAAIE,GACR5E,CACT,CAOa5J,CAAYkb,EAASh/D,YAAag/D,EAASnkC,SAAUi6D,EAAU90F,YAAa80F,EAAUj6D,UAEtF6yB,CAEX,IAAGh7C,MAAMg7C,EACX,CAE+BqnC,CAA6BrnC,EAC5D,EAgBIsnC,GAAiB,SAAUp0D,EAAQ4tB,GACrC,IAAI9oC,EAAa8oC,EAAS9oC,WACtBC,EAAY6oC,EAAS7oC,UAUzB,OATID,GAAkC,SAApBA,EAAW3tB,OAC3B2tB,EAAaA,EAAWtd,MAEtBud,GAAsC,eAAzBA,EAAUsZ,KAAK,QAC9BtZ,EAAYA,EAAUiT,MAXG,SAAUgI,EAAQte,GAC7C,IAAI2yE,EAAmBr0D,EAAOsH,sBAC9B,OAAO5lB,IAASA,EAAKukC,QAAQouC,IANN,SAAUr0D,EAAQte,GAEzC,OADoBse,EAAOkH,mBACNxlB,EAAKvqB,OARJ,SAAUuqB,GAChC,OAAOA,EAAKoD,YAAcpD,EAAKoD,aAAepD,EAAKqD,SACrD,CAMqCuvE,CAAkB5yE,IALnC,SAAUA,GAC5B,MAAqB,OAAdA,EAAKvqB,MAAiBuqB,EAAKxmB,QAAUm+B,EAC9C,CAGgEk7D,CAAc7yE,EAAKoD,WACnF,CAGoD0vE,CAAmBx0D,EAAQte,GAC/E,CAUM+yE,CAAuBz0D,EAAQjb,KACjCA,EAAYA,EAAUiT,SAEnBlT,GAAcA,IAAeC,GAGP,OAApBD,EAAW3tB,MAAqC,OAApB2tB,EAAW3tB,KAChD,EA+BIu9F,GAAgB,SAAUzyC,GAC5B,OAAOA,EAAKhrD,OAAS,MAJS40B,EAIYo2B,EAAKA,EAAKhrD,OAAS,IAHjD6tB,aAJmBpD,EAIYmK,IAH5BnK,EAAKoD,YAAcpD,EAAKoD,aAAepD,EAAKqD,WAJ7C,SAAUrD,GACxB,OAAOA,EAAKgN,OAAS2K,IAAQvP,GAAOpI,EACtC,CAE0EizE,CAAUjzE,EAAKoD,aAMpBm9B,EAAKpzC,MAAM,GAAI,GAAKozC,EAPlE,IAAUvgC,EAGDmK,CAKhC,EACI+oE,GAAc,SAAUjzE,EAAKD,GAC/B,IAAIsrE,EAAcrrE,EAAIoiC,UAAUriC,EAAMC,EAAI4hC,SAC1C,OAAOypC,GAAwC,OAAzBA,EAAYrpE,SAAoBqpE,EAAc,IACtE,EAoBI6H,GAAa,SAAUnzE,EAAMqW,GAC/B,IAAI+iD,EAAW7oB,GAAc1U,MAAM77B,GAE/BozE,EADcn2B,GAAY5mC,GACAC,KAAK8iD,GACnC,OAAOga,EAAcA,EAAYviC,UAAY,IAC/C,EAuBIwiC,GAAkB,SAAU7rB,EAAYvnD,EAAKmrC,EAAKc,GACpD,IArEwB/hC,EAqEpBmpE,EA1Ec,SAAUrzE,EAAKunD,EAAYtb,GAC7C,IAAI/rC,EAAOqnD,EAAWl/B,UAAU4jB,GAEhC,OAduB,SAAUonC,GACjC,IAAIlwE,EAAakwE,EAAYlwE,WACzBC,EAAYiwE,EAAYjwE,UAO5B,OANID,GAAsC,SAAxBA,EAAWnB,UAC3BmB,EAAWhlB,WAAW8J,YAAYkb,GAEhCC,GAA8B,eAAjBA,EAAU1sB,IACzB0sB,EAAUjlB,WAAW8J,YAAYmb,GAE5BiwE,CACT,CAISC,CADWtzE,EAAIyiC,eAAeviC,GAEvC,CAsEoBqzE,CAAcvzE,EAAKunD,EAAYtb,GAC7CunC,EAAWP,GAAYjzE,EAAKmrC,EAAIjyB,gBAChCu6D,EAASV,IAvEW7oE,EAuEampE,EAAYlwE,WAtE1C9Q,EAAS6X,EAAI5J,YAAY,SAAU6J,GACxC,MAA0B,OAAnBA,EAAMnI,QACf,MAsEIoU,EAAWpW,EAAI8+B,UACf40C,EAAO,SAAU/8C,GACnB,IAAIwiC,EAAW7oB,GAAcU,eAAe7F,GACxCwoC,EAAc32B,GAAYh9C,EAAI8+B,WAC9BmoC,EALU,IAKDtwC,EAAyBg9C,EAAYt9D,KAAK8iD,GAAYwa,EAAY9tF,KAAKszE,GACpF,OAAO8N,GAASgM,GAAYjzE,EAAKinE,EAAOl2B,aAAeyiC,CACzD,EACA,OAAIE,EARY,GAfG,SAAU59F,EAAQwqD,EAAMlqB,GAC3C,IAAI0qB,EAAYhrD,EAAOqI,WAIvB,OAHA4f,GAAMpN,KAAK2vC,GAAM,SAAUp2B,GACzB42B,EAAU1iD,aAAa8rB,EAAKp0B,EAC9B,IA3BgB,SAAUiqB,EAAMqW,GAChC,IAAI+iD,EAAW7oB,GAAc3U,OAAO57B,GAEhCozE,EADcn2B,GAAY5mC,GACAvwB,KAAKszE,GACnC,OAAOga,EAAcA,EAAYviC,UAAY,IAC/C,CAuBSgjC,CAAY99F,EAAQsgC,EAC7B,CAkBWy9D,CAAeL,EAAUC,EAAQr9D,GAC/Bs9D,EAVc,GARP,SAAU59F,EAAQwqD,EAAMlqB,EAAUpW,GAEpD,OADAA,EAAI6jC,YAAYvD,EAAKxtC,UAAWhd,GACzBo9F,GAAW5yC,EAAK,GAAIlqB,EAC7B,CAgBW09D,CAAcN,EAAUC,EAAQr9D,EAAUpW,GArClC,SAAUlqB,EAAQwqD,EAAMlqB,EAAU+0B,GACnD,IAAI31B,EAvBS,SAAUr3B,EAAYgtD,GACnC,IAAI4oC,EAAY5oC,EAAI8E,aAChB+jC,EAAW7oC,EAAI8E,aAGnB,OAFA8jC,EAAUx5B,eAAep8D,GACzB61F,EAAS9jC,YAAY/xD,GACd,CACL41F,EAAUE,gBACVD,EAASC,gBAEb,CAccC,CAASp+F,EAAQq1D,GACzBrK,EAAYhrD,EAAOqI,WAOvB,OANA2iD,EAAU1iD,aAAao3B,EAAM,GAAI1/B,GACjCioB,GAAMpN,KAAK2vC,GAAM,SAAUhc,GACzBwc,EAAU1iD,aAAakmC,EAAIxuC,EAC7B,IACAgrD,EAAU1iD,aAAao3B,EAAM,GAAI1/B,GACjCgrD,EAAU74C,YAAYnS,GACfo9F,GAAW5yC,EAAKA,EAAKhrD,OAAS,GAAI8gC,EAC3C,CA6BS+9D,CAAaX,EAAUC,EAAQr9D,EAAU+0B,EAClD,EAiBIipC,GAAgB7rE,GAkIhB8rE,GAAoB,SAAUxhE,EAAQt5B,EAAO+6F,GAC/C,IAAIn2F,EACAgtD,EAAKprC,EACLqrC,EAAYv4B,EAAOu4B,UACnBprC,EAAM6S,EAAO7S,IACb,QAAQlmB,KAAKP,KACfA,EAvJqB,SAAUymB,EAAKmrC,EAAKjrC,GAC3C,IAAIrB,EAAOoB,GAAqBD,EAAI8+B,WAWpC,OATE5+B,EADEooE,GAAkBzpE,EAAMyxC,GAAcU,eAAe7F,IAChDjrC,EAAKnd,QAAQ,KAAM,UAEnBmd,EAAKnd,QAAQ,UAAW,KAE7BwlF,GAAmB1pE,EAAMyxC,GAAcW,aAAa9F,IAC/CjrC,EAAKnd,QAAQ,0BAA2B,UAExCmd,EAAKnd,QAAQ,uBAAwB,IAGhD,CA0IYwxF,CAAmBv0E,EAAKorC,EAAUC,SAAU9xD,IAEtD,IAAIi7F,EAAS3hE,EAAO2hE,OAChBC,EAAQH,EAAQG,MAChBltB,EAAa8c,GAAe,CAAE9C,SAAUvrB,GAAenjC,IAAWA,EAAOwL,QACzEq2D,EAAe,iEACf/lF,EAAOkkB,EAAO+Z,KAAK,mBAAoB,CACzCoP,QAASziD,EACTiN,OAAQ,OACR4kD,WAAW,EACXupC,MAAOL,EAAQK,QAEjB,GAAIhmF,EAAKm7B,qBACPjX,EAAO+Z,KAAK,aAAc,CACxBoP,QAASrtC,EAAKqtC,QACdx1C,OAAQ,OACR4kD,WAAW,EACXupC,MAAOL,EAAQK,YALnB,EAUmC,KADnCp7F,EAAQoV,EAAKqtC,SACH3/C,QAAQ,cAChB9C,GAAS,YAEXA,EAAQA,EAAMwJ,QAAQ,cAAe2xF,GAErC,IAAIE,GADJzpC,EAAMC,EAAUC,UACOnyB,iBAAmBiyB,EAAI6lB,cAAgB7lB,EAAI6lB,gBAAkB,MAChF/2E,EAAO44B,EAAOy4B,UACdspC,IAAiB36F,GAAQmxD,EAAUsI,eACjC1zC,EAAI4hC,QAAQ3nD,EAAKkpB,aAtGH,SAAU0P,EAAQ9S,GACtC,OAAOA,IAAS8S,EAAOwL,OAAOoH,wBAAwB1lB,EAAKiC,SAC7D,CAoGwC6yE,CAAgBhiE,EAAQ54B,EAAKkpB,aAAenD,EAAIskC,QAAQrqD,EAAKkpB,eAC/FgoC,EAAMnrC,EAAIshC,aACNsD,SAAS3qD,EAAKkpB,WAAY,GAC9BgoC,EAAItG,OAAO5qD,EAAKkpB,WAAY,GAC5BioC,EAAU2U,OAAO5U,IAGhBC,EAAUsI,eAtDW,SAAU7gC,GACpC,IAAI7S,EAAM6S,EAAO7S,IACbmrC,EAAMonB,GAAU1/C,EAAOu4B,UAAUC,UACrCx4B,EAAOu4B,UAAU2U,OAAO5U,GACxB,IAAIiiC,EAAYptE,EAAIoiC,UAAU+I,EAAIjyB,eAAgBk7D,KA1HnB,SAAUp0E,EAAKmrC,EAAKyZ,GACnD,OAAa,OAATA,GAEKA,IADO5kD,EAAIoiC,UAAU+I,EAAIhG,aAAcivC,KACnBrvB,GAAuB9kD,GAAqB2kD,GAAOzZ,EAIlF,CAoHM2pC,CAA2B90E,EAAKmrC,EAAKiiC,GAGvCv6D,EAAO6zC,SAASqJ,YAAY,UAAU,EAAO,MAF7Csf,GAAmBx8D,EAAQs4B,EAAKlrC,GAAqBmtE,GAIzD,CA6CI2H,CAAsBliE,GAGxB,IAzHqC3I,EAyHjC8qE,EAAa,CACfnlD,SAFF1xC,EAAaitD,EAAU2F,WAED/uC,SAAS7lB,cAC7B4wB,KAAMunE,EAAQvnE,KACdotD,QAAQ,GAENluB,EAAWuoC,EAAO3tD,MAAMttC,EAAOy7F,GACnC,IAAsB,IAAlBV,EAAQK,OAAkBlC,GAAe5/D,EAAOwL,OAAQ4tB,IAzQxC,SAAUjsC,EAAKD,GACnC,QAASkzE,GAAYjzE,EAAKD,EAC5B,CAuQ2Ek1E,CAAgBj1E,EAAK7hB,GAI5F,OAHAgtD,EAAMioC,GAAgB7rB,EAAYvnD,EAAKorC,EAAUC,SAAUY,GAC3Db,EAAU2U,OAAO5U,QACjBt4B,EAAO+Z,KAAK,aAAcj+B,GAK5B,GA/IyB,SAAUs9C,GAEnC,IADA,IAAIlsC,EAAOksC,EACJlsC,EAAOA,EAAKN,QACC,IAAdM,EAAK9gB,MACP8gB,EAAK2c,KAAK,oBAAqB,IAGrC,CAsIEw4D,CAAqBjpC,GAEG,gBADxBlsC,EAAOksC,EAAS7oC,WACPsZ,KAAK,MAAwB,CACpC,IAAIxY,EAASnE,EACb,IAAKA,EAAOA,EAAKsW,KAAMtW,EAAMA,EAAOA,EAAKN,MAAK,GAC5C,GAAkB,IAAdM,EAAK9gB,OAAe+gB,EAAI4hC,QAAQ7hC,EAAKvqB,MAAO,CAC1Cq9B,EAAOwL,OAAO2H,aAAajmB,EAAKR,OAAO/pB,KAAM,SAC/CuqB,EAAKR,OAAO46D,OAAOj2D,EAAQnE,EAAoB,OAAdA,EAAKvqB,MAExC,KACF,CAEJ,CAEA,GADAq9B,EAAOsiE,oBAAoBC,wBAAwBj3F,GAC9C62F,EAAWK,QAGT,CACLxiE,EAAOu4B,UAAUygC,WAAW6I,GAC5Bv2F,EAAaitD,EAAU2F,UACvB,IAAI36B,EAAWvD,EAAOy4B,UAMtB,IAL4B,IAAxBntD,EAAW2iB,SACb3iB,EAAa4hB,EAAOqW,EAEpBrW,EAAO5hB,EAEF4hB,IAASqW,GACdj4B,EAAa4hB,EACbA,EAAOA,EAAK5hB,WAEd5E,EAAQ4E,IAAei4B,EAAWA,EAAShvB,UAAY4Y,EAAI0jC,aAAavlD,GACxE5E,EAAQguE,EAAWl/B,UAAUmsD,EAAO3tD,MAAMttC,EAAMwJ,QAAQ,qDAAqD,WAC3G,OAAOwkE,EAAWl/B,UAAU4jB,EAC9B,MACI9tD,IAAei4B,EACjBpW,EAAI4gC,QAAQxqB,EAAU78B,GAEtBymB,EAAI4jC,aAAazlD,EAAY5E,EAEjC,MA3NmB,SAAUs5B,EAAQt5B,EAAO4E,GAC5C,GAAkD,QAA9CA,EAAWxH,aAAa,kBAC1BwH,EAAWA,WAAWC,aAAay0B,EAAO7S,IAAIyiC,eAAelpD,GAAQ4E,OAChE,CACL,IAAI4hB,EAAO5hB,EAAWglB,WAClBy3C,EAAQz8D,EAAWilB,WAClBrD,GAAQA,IAAS66C,GAA2B,OAAlB76C,EAAKiC,SAClC6Q,EAAO7S,IAAI4gC,QAAQziD,EAAY5E,GAE/Bs5B,EAAOu4B,UAAUygC,WAAWtyF,EAEhC,CACF,CAwLI+7F,CAAeziE,EADft5B,EAAQguE,EAAWl/B,UAAU4jB,GACC9tD,IApLH,SAAU00B,EAAQ4hE,GAC/C,IAAIc,EAAqB1iE,EAAOwL,OAAOmH,wBACnCxlB,EAAM6S,EAAO7S,IACjB,GAAIy0E,EAAO,CACT,IAAIe,EAAS3iE,EAAOy4B,UAChBmqC,EAAiBrS,GAAapjE,GAClCjC,GAAMpN,KAAKqP,EAAI64B,OAAO,yBAAyB,SAAU94B,GAEvD,GADe3R,EAAcmnF,EAAmBx1E,EAAKiC,SAAS7lB,iBArlCzC,SAAU6jB,EAAKD,GACxC,OAAOjP,GAAOg0E,GAAc9kE,EAAKD,IAAO,SAAUrb,GAChD,OALwB,SAAUA,GACpC,OAAOigF,GAAqBpuC,IAAI7xC,EAClC,CAGYgxF,CAAsBhxF,EAChC,GACF,CAklCsBixF,CAAqB31E,EAAKD,GACxC,IAAK,IAAI5hB,EAAa4hB,EAAK5hB,WAAYiQ,EAAcjQ,IAAeA,IAAeq3F,IAC7DzQ,GAAiB/kE,EAAKD,EAAM5hB,GADyCA,EAAaA,EAAWA,WAKjH,GAAIs3F,EAAenhD,QAAQn2C,EAAY4hB,GAAO,CAC5CC,EAAI7c,OAAO4c,GAAM,GACjB,KACF,CAGN,GACF,CACF,CAsLE61E,CAAyB/iE,EAAQ4hE,GAlKP,SAAU5hE,EAAQ3O,GAC5C,IAAI2xE,EACA71E,EAAM6S,EAAO7S,IACborC,EAAYv4B,EAAOu4B,UACvB,GAAKlnC,EAAL,CAGAknC,EAAUrlC,eAAe7B,GACzB,IAAI4xE,EAAoBlsB,GAAyB/2C,EAAOy4B,UAAWpnC,GACnE,GAAkD,UAA9ClE,EAAIyhC,mBAAmBq0C,GAGzB,OAFA91E,EAAI7c,OAAO+gB,QACXknC,EAAUvS,OAAOi9C,GAGnB,IAAI3qC,EAAMnrC,EAAIshC,YACVvhC,EAAOmE,EAAOtB,gBAClB,GAAImF,GAAShI,IAEX,GADAorC,EAAIvG,SAAS7kC,EAAMA,EAAKs1B,UAAU//C,SAC7BqnB,GAAIC,GAAI,CACX,IAAIg+C,EAAQ12C,EAAOrB,YACfkF,GAAS6yC,KACX76C,EAAK8+C,WAAWjE,EAAM7tC,MACtB6tC,EAAMz8D,WAAW8J,YAAY2yD,GAEjC,OAEAzP,EAAIoP,eAAer2C,GACnBinC,EAAIqP,aAAat2C,GAEnB,IAQImnE,EAAcrrE,EAAIoiC,UAAUl+B,EAAQlE,EAAI4hC,SAC5C5hC,EAAI7c,OAAO+gB,GACPmnE,GAAerrE,EAAIskC,QAAQ+mC,KAC7Bx4D,EAAOgsB,EAAEwsC,GAAa7mE,QACtB2mC,EAAIvG,SAASymC,EAAa,GAC1BlgC,EAAItG,OAAOwmC,EAAa,GACnB+I,GAAc/I,IAjDA,SAAUtrE,GAC/B,QAASA,EAAKppB,aAAa,oBAC7B,CA+CwCo/F,CAAiB1K,MAAiBwK,EAdjD,SAAU1qC,GAC/B,IAAIguB,EAAW7oB,GAAcU,eAAe7F,GAG5C,GADAguB,EADkBnc,GAAYnqC,EAAOy4B,WACdzlD,KAAKszE,GAE1B,OAAOA,EAASvoB,SAEpB,CAOkFolC,CAAiB7qC,IAI/FnrC,EAAI7lB,IAAIkxF,EAAarrE,EAAIpB,OAAO,KAAM,CAAE,iBAAkB,QAH1DusC,EAAM0qC,EACN71E,EAAI7c,OAAOkoF,KAKfjgC,EAAU2U,OAAO5U,EA5CjB,CA6CF,CAgHE8qC,CAAsBpjE,EAAQ7S,EAAIiN,IAAI,eA9KD/C,EA+Kd2I,EAAOy4B,UA9K9BvtC,GAAMpN,KAAKuZ,EAAI8O,qBAAqB,MAAM,SAAU9O,GAClDA,EAAI7f,gBAAgB,oBACtB,IArCyB,SAAU2V,EAAKkK,GACxC7Y,EAASC,KAAK0O,EAAIoiC,UAAUl4B,EAAK,UAAUjuB,IAAIgkB,IAAsBtP,KAAK81E,GAC5E,CAgNEyP,CAAqBl2E,EAAKorC,EAAUwkB,YACpC/8C,EAAO+Z,KAAK,aAAcj+B,GAC1BkkB,EAAOsjE,WA9EP,CA+EF,EAEIC,GAAW,SAAUr2E,EAAM1Q,GAC7BA,EAAG0Q,GACCA,EAAKoD,YACPizE,GAASr2E,EAAKoD,WAAY9T,GAExB0Q,EAAKla,MACPuwF,GAASr2E,EAAKla,KAAMwJ,EAExB,EAuDIgnF,GAAa,SAAUr6C,GACzB,OAAOA,aAAmBk+B,EAC5B,EAUIoc,GAAgB,SAAUzjE,EAAQ3S,EAAMq2E,GAC1C1jE,EAAO7S,IAAI4gC,QAAQ/tB,EAAOy4B,UAAWprC,IACjB,IAAhBq2E,GAXc,SAAU1jE,GACxBgkB,GAAShkB,IACXkrC,GAAgBlrC,EAAOy4B,WAAW36C,MAAK,SAAUhN,GAC/C,IAAIoc,EAAOpc,EAAIotD,UACXooB,EAAWvxD,GAAU7H,GAAQg+C,GAAgBh+C,GAAM5P,MAAMxM,GAAOA,EACpEkvB,EAAOu4B,UAAU2U,OAAOoZ,EAASvoB,UACnC,GAEJ,CAII6/B,CAAc59D,EAElB,EAiDI2jE,GAAqB,SAAU3jE,EAAQmpB,EAASrtC,GAClD,IAAI8nF,EAPY,SAAU9nF,EAAMqtC,GAChC,OAAOtmC,GAASA,GAAS,CAAElP,OA9DP,QA8DkCmI,GAAO,CAC3DqnB,KAAK,EACLgmB,QAASq6C,GAAWr6C,GAAW,GAAKA,GAExC,CAEsB06C,CAAY/nF,EAAMqtC,GAClC26C,EAAchoF,EAAKioF,UAAYH,EAAgB5jE,EAAO+Z,KAAK,mBAAoB6pD,GAInF,OAHKJ,GAAWr6C,KACdA,EAAU26C,EAAY36C,SAEjB3qC,EAASC,KAAKuhB,EAAOy4B,WAAWx7C,KAAKb,EAAS+sC,IAAU,SAAU/hD,GACvE,OAAOo8F,GAAWr6C,GAvBD,SAAUnpB,EAAQ54B,EAAM+hD,EAASrtC,GA5DvC,IAAUkoF,EAAaC,EAChCl8E,EADmBi8E,EA6DdhkE,EAAO2hE,OAAOuC,iBA7DaD,EA6DKjkE,EAAO2hE,OAAOwC,sBA5DnDp8E,EA7CkB,SAAUi8E,EAAaC,EAAkB/2E,GAC/D,IAAIk3E,EAAc,CAAC,EACfC,EAAc,CAAC,EACft8E,EAAU,GA6Bd,IAAK,IAAI+D,KA5BLoB,EAAKoD,YACPizE,GAASr2E,EAAKoD,YAAY,SAAUpD,GAClC/N,EAAO6kF,GAAa,SAAUz6F,GACxBA,EAAO5G,OAASuqB,EAAKvqB,OACnByhG,EAAY76F,EAAO5G,MACrByhG,EAAY76F,EAAO5G,MAAMw0B,MAAMzsB,KAAKwiB,GAEpCk3E,EAAY76F,EAAO5G,MAAQ,CACzB4G,OAAQA,EACR4tB,MAAO,CAACjK,IAIhB,IACA/N,EAAO8kF,GAAkB,SAAU16F,GACK,iBAA3B2jB,EAAK2c,KAAKtgC,EAAO5G,QACtB0hG,EAAY96F,EAAO5G,MACrB0hG,EAAY96F,EAAO5G,MAAMw0B,MAAMzsB,KAAKwiB,GAEpCm3E,EAAY96F,EAAO5G,MAAQ,CACzB4G,OAAQA,EACR4tB,MAAO,CAACjK,IAIhB,GACF,IAEiBk3E,EACb5iF,GAAM4iF,EAAat4E,IACrB/D,EAAQrd,KAAK05F,EAAYt4E,IAG7B,IAAK,IAAIw4E,KAAUD,EACb7iF,GAAM6iF,EAAaC,IACrBv8E,EAAQrd,KAAK25F,EAAYC,IAG7B,OAAOv8E,CACT,CAEgBw8E,CAAkBP,EAAaC,EA4DiC96C,GA3D9EhqC,EAAO4I,GAAS,SAAUuE,GACxBnN,EAAOmN,EAAM/iB,OAAO4wB,WAAW,SAAUz0B,GACvCA,EAAS4mB,EAAM6K,MAAO7K,EAAM/iB,OAAO5G,KAAM,CAAC,EAC5C,GACF,IAwDA,IAAI0qB,EAAOmkE,GAAe,CAAE9C,SAAU1uD,EAAO0uD,UAAY1uD,EAAOwL,QAAQgK,UAAU2T,GAMlF,OALArtC,EAAKqtC,QAAUvkB,GAAoBxX,GAAqBhmB,IAASimB,EAAOnC,GAAM/T,KAAKkW,GACnFo2E,GAAczjE,EAAQlkB,EAAKqtC,QAASrtC,EAAK0oF,cACpC1oF,EAAKioF,WACR/jE,EAAO+Z,KAAK,aAAcj+B,GAErBqtC,CACT,CAciCs7C,CAAezkE,EAAQ54B,EAAM+hD,EAAS26C,GAvDhD,SAAU9jE,EAAQ54B,EAAM+hD,EAASrtC,GACtD,GAAuB,IAAnBqtC,EAAQ1mD,QAAgB,QAAQwE,KAAKkiD,GAAU,CACjD,IAAIu7C,EAAO,0BACW,UAAlBt9F,EAAK+nB,SACPg6B,EAAU,WAAau7C,EAAO,aACrB,YAAYz9F,KAAKG,EAAK+nB,YAC/Bg6B,EAAU,OAASu7C,EAAO,SAE5B,IAAIC,EAAsB3iC,GAAmBhiC,GACzC2kE,GAAuB3kE,EAAOwL,OAAO2H,aAAa/rC,EAAK+nB,SAAS7lB,cAAeq7F,EAAoBr7F,gBACrG6/C,EAAUu7C,EACVv7C,EAAUnpB,EAAO7S,IAAIuiC,WAAWi1C,EAAqBziC,GAAwBliC,GAASmpB,IAC5EA,IACVA,EAAU,2BAEZs6C,GAAczjE,EAAQmpB,EAASrtC,EAAK0oF,cACpCxkE,EAAO+Z,KAAK,aAAcj+B,EAC5B,KACsB,QAAhBA,EAAKnI,SACPw1C,EAAUqoC,GAAe,CAAE9C,SAAU1uD,EAAO0uD,UAAY1uD,EAAOwL,QAAQgK,UAAUxV,EAAO2hE,OAAO3tD,MAAMmV,EAAS,CAC5Gy7C,eAAe,EACftd,QAAQ,MAGZxrE,EAAKqtC,QAAUvkB,GAAoBxX,GAAqBhmB,IAAS+hD,EAAUj+B,GAAM/T,KAAKgyC,GACtFs6C,GAAczjE,EAAQlkB,EAAKqtC,QAASrtC,EAAK0oF,cACpC1oF,EAAKioF,WACR/jE,EAAO+Z,KAAK,aAAcj+B,GAG9B,OAAOA,EAAKqtC,OACd,CAwBsF07C,CAAiB7kE,EAAQ54B,EAAM+hD,EAAS26C,EAC5H,GACF,EAEI//D,GAAU,SAAUzW,EAAO3K,GAC7B,OAvkZc,SAAU2K,EAAO3K,GAC/B,IAAI7M,EAAUwX,EAAMH,IACpB,OAAKrX,EAAQxK,WAOH,SAAUgiB,EAAO3K,GAK3B,OADa7C,EAAOwN,EAAMH,IAAIM,YAHnB,SAAUP,GACnB,OAAOvK,EAAUyK,GAAqBF,GACxC,IAEc9jB,IAAIgkB,GACpB,CAVSkK,CAAMlK,GAAqBtX,EAAQxK,aAAa,SAAU4N,GAC/D,OAAQQ,GAAG4T,EAAOpU,IAAMyJ,EAAUzJ,EACpC,IAJSsF,EAAS1B,MAKpB,CA+jZSgoF,CAAUx3E,EAAO3K,GAAWvF,QACrC,EAEI2nF,GAAe,SAAUtnE,GAC3B,OAAOjiB,EAAWiiB,GAAUA,EAAS7gB,CACvC,EAgBIooF,GAAY,SAAU13E,EAAO23E,EAAWxnE,GAC1C,IAAItX,EAAU8+E,EAAU33E,GACpBsR,EAAOmmE,GAAatnE,GACxB,OAAOtX,EAAQtI,SAAQ,WACrB,OAAO+gB,EAAKtR,GAAS9O,EAAS1B,OAnBnB,SAAUwQ,EAAO23E,EAAWxnE,GAGzC,IAFA,IAAI3nB,EAAUwX,EAAMH,IAChByR,EAAOmmE,GAAatnE,GACjB3nB,EAAQxK,YAAY,CACzBwK,EAAUA,EAAQxK,WAClB,IAAIT,EAAKuiB,GAAqBtX,GAC1BovF,EAAcD,EAAUp6F,GAC5B,GAAIq6F,EAAY9nF,SACd,OAAO8nF,EACF,GAAItmE,EAAK/zB,GACd,KAEJ,CACA,OAAO2T,EAAS1B,MAClB,CAK2C0gB,CAASlQ,EAAO23E,EAAWrmE,EACpE,GACF,EAEIumE,GAAS/2B,GACTg3B,GAAmC,SAAUp3B,EAAI9gD,EAAMvqB,GACzD,IAAIktE,EAAa7B,EAAGq3B,UAAUjrE,IAAIz3B,GAClC,GAAIktE,EACF,IAAK,IAAIrtE,EAAI,EAAGA,EAAIqtE,EAAWptE,OAAQD,IAAK,CAC1C,IAAImR,EAASk8D,EAAWrtE,GACxB,GAAImsE,GAAiBh7D,KAA8B,IAAnBA,EAAO2xF,SAAqBt3B,EAAG7gD,IAAIhC,GAAG+B,EAAMvZ,EAAOqa,UACjF,OAAO,CAEX,CAEF,OAAO,CACT,EACIu3E,GAAe,SAAUvlE,EAAQ9S,EAAMvqB,EAAMwrE,EAAMq3B,GACrD,IAAIx5E,EAAOgU,EAAO7S,IAAI8+B,UACtB,OAAI/+B,IAASlB,IAGbkB,EAAO8S,EAAO7S,IAAIoiC,UAAUriC,GAAM,SAAUA,GAC1C,QAAIk4E,GAAiCplE,EAAQ9S,EAAMvqB,IAG5CuqB,EAAK5hB,aAAe0gB,KAAUy5E,GAAUzlE,EAAQ9S,EAAMvqB,EAAMwrE,GAAM,EAC3E,MACSs3B,GAAUzlE,EAAQ9S,EAAMvqB,EAAMwrE,EAAMq3B,GAC/C,EACIE,GAAc,SAAUv4E,EAAKD,EAAMvZ,GACrC,QAAIwxF,GAAOj4E,EAAMvZ,EAAO88B,WAGpB00D,GAAOj4E,EAAMvZ,EAAOsuD,SAGpBtuD,EAAOqa,SACgB,IAAlBd,EAAKe,UAAkBd,EAAIhC,GAAG+B,EAAMvZ,EAAOqa,eADpD,EAGF,EACI23E,GAAa,SAAUx4E,EAAKD,EAAMvZ,EAAQiyF,EAAUJ,EAASr3B,GAC/D,IAAI9iD,EAAQ1X,EAAOiyF,GACnB,GAAIpqF,EAAW7H,EAAOkyF,SACpB,OAAOlyF,EAAOkyF,QAAQ34E,EAAMvZ,EAAQiyF,GAEtC,GAAIv6E,EACF,GAAIhQ,EAAYgQ,EAAM5oB,SACpB,IAAK,IAAIgB,KAAO4nB,EACd,GAAI7J,GAAM6J,EAAO5nB,GAAM,CACrB,IAAIiD,EAAqB,eAAbk/F,EAA4Bz4E,EAAIg/B,UAAUj/B,EAAMzpB,GAAO4pD,GAASlgC,EAAKD,EAAMzpB,GACnFqiG,EAAgB53B,GAAY7iD,EAAM5nB,GAAM0qE,GACxC43B,EAAezqF,EAAW5U,IAAU0e,GAAU1e,GAClD,GAAIq/F,GAAgBzqF,EAAWwqF,GAC7B,SAEF,GAAIN,GAAWO,IAAiBpyF,EAAO8vE,MACrC,OAAO,EAET,KAAM+hB,GAAW7xF,EAAO8vE,SAAW0hB,GAAOz+F,EAAO4nE,GAAoBnhD,EAAK24E,EAAeriG,IACvF,OAAO,CAEX,OAGF,IAAK,IAAIjB,EAAI,EAAGA,EAAI6oB,EAAM5oB,OAAQD,IAChC,GAAiB,eAAbojG,EAA4Bz4E,EAAIg/B,UAAUj/B,EAAM7B,EAAM7oB,IAAM6qD,GAASlgC,EAAKD,EAAM7B,EAAM7oB,IACxF,OAAO,EAKf,OAAO,CACT,EACIijG,GAAY,SAAUz3B,EAAI9gD,EAAMvqB,EAAMwrE,EAAMq3B,GAC9C,IAAI31B,EAAa7B,EAAGq3B,UAAUjrE,IAAIz3B,GAC9BwqB,EAAM6gD,EAAG7gD,IACb,GAAI0iD,GAAc3iD,EAChB,IAAK,IAAI1qB,EAAI,EAAGA,EAAIqtE,EAAWptE,OAAQD,IAAK,CAC1C,IAAImR,EAASk8D,EAAWrtE,GACxB,GAAIkjG,GAAY13B,EAAG7gD,IAAKD,EAAMvZ,IAAWgyF,GAAWx4E,EAAKD,EAAMvZ,EAAQ,aAAc6xF,EAASr3B,IAASw3B,GAAWx4E,EAAKD,EAAMvZ,EAAQ,SAAU6xF,EAASr3B,GAAO,CAC7J,IAAIuF,EAAU//D,EAAO+/D,QACrB,GAAIA,EACF,IAAK,IAAIx6D,EAAI,EAAGA,EAAIw6D,EAAQjxE,OAAQyW,IAClC,IAAK80D,EAAG7gD,IAAI+5B,SAASh6B,EAAMghD,GAAYwF,EAAQx6D,GAAIi1D,IACjD,OAIN,OAAOx6D,CACT,CACF,CAEJ,EACIqyF,GAAU,SAAUhmE,EAAQr9B,EAAMwrE,EAAMjhD,EAAMs4E,GAChD,GAAIt4E,EACF,OAAOq4E,GAAavlE,EAAQ9S,EAAMvqB,EAAMwrE,EAAMq3B,GAGhD,GADAt4E,EAAO8S,EAAOu4B,UAAU2F,UACpBqnC,GAAavlE,EAAQ9S,EAAMvqB,EAAMwrE,EAAMq3B,GACzC,OAAO,EAET,IAAIliE,EAAYtD,EAAOu4B,UAAUwkB,WACjC,QAAIz5C,IAAcpW,IACZq4E,GAAavlE,EAAQsD,EAAW3gC,EAAMwrE,EAAMq3B,GAKpD,EAmDIS,GAAiB,SAAUjmE,EAAQ9S,EAAMg5E,GAC3C,OAAOvmF,EAAMumF,GAAa,SAAUxmF,EAAK/c,GACvC,IAAIwjG,EA9uKmB,SAAUnmE,EAAQomE,GAe3C,OAAOpoF,EAAOgiB,EAAOqlE,UAAUjrE,IAAIgsE,IAdX,SAAUzyF,GAChC,IAAI0yF,EAAkB,SAAUz5F,GAC9B,OAAOA,EAAInK,OAAS,GAAuB,MAAlBmK,EAAIC,OAAO,EACtC,EACA,OAAOmR,EAAO,CACZ,SACA,eACC,SAAUva,GACX,OAAO8d,GAAM5N,EAAQlQ,GAAKua,QAAO,SAAUsoF,GACzC,IAAIC,EAAcrrF,EAAUorF,GAASA,EAliT5B,SAAU7gG,EAAKgU,GAC9B,IAAIyF,EAAI,GAIR,OAHA2B,GAAOpb,GAAK,SAAUiB,EAAO/D,GAC3Buc,EAAExU,KAAK+O,EAAE/S,EAAO/D,GAClB,IACOuc,CACT,CAESsnF,CA0hTmDF,EA1hTnCjqF,GA2hTjB,OAAO2B,EAAOuoF,EAAaF,EAC7B,GACF,GACF,GAEF,CA8tKuBI,CAAqBzmE,EAAQr9B,GAChD,OAAIq9B,EAAOqlE,UAAUI,UAAUv4E,EAAMvqB,EAAM,CAAC,EAAGwjG,GACtCzmF,EAAI/T,OAAO,CAAChJ,IAEZ+c,CAEX,GAAG,GACL,EAEIgnF,GAAO5hE,GAAQ6hE,GAAW,aAiB1BC,GAAwB,SAAU15E,GACpC,OAd4B,SAAUA,GAEtC,IADA,IAAIiK,EAAQ,GACLjK,GAAM,CACX,GAAsB,IAAlBA,EAAKe,UAAkBf,EAAKs1B,YAAckkD,IAAQx5E,EAAKO,WAAWhrB,OAAS,EAC7E,MAAO,GAEa,IAAlByqB,EAAKe,UACPkJ,EAAMzsB,KAAKwiB,GAEbA,EAAOA,EAAKoD,UACd,CACA,OAAO6G,CACT,CAES0vE,CAAwB35E,GAAMzqB,OAAS,CAChD,EACIqkG,GAAoB,SAAU55E,GAChC,GAAIA,EAAM,CACR,IAAI+a,EAAS,IAAI5E,GAAcnW,EAAMA,GACrC,IAAKA,EAAO+a,EAAO9hB,UAAW+G,EAAMA,EAAO+a,EAAOj1B,OAChD,GAAIkiB,GAAShI,GACX,OAAOA,CAGb,CACA,OAAO,IACT,EACI65E,GAAuB,SAAUC,GACnC,IAAIhhE,EAAiB5Y,GAAqB,QAS1C,OARAiJ,GAAS2P,EAAgB,CACvB,GAAM2gE,GACN,iBAAkB,IAClB,gBAAiB,iBAEfK,GACFz1E,GAASyU,EAAgB5Y,GAAsBs5E,KAE1C1gE,CACT,EAQIihE,GAA2B,SAAUjnE,EAAQ9S,EAAMmrE,QACnC,IAAdA,IACFA,GAAY,GAEd,IAAIlrE,EAAM6S,EAAO7S,IAAKorC,EAAYv4B,EAAOu4B,UACzC,GAAIquC,GAAsB15E,GACxBkrE,GAAgBp4D,GAAQ,EAAO5S,GAAqBF,GAAOmrE,OACtD,CACL,IAAI//B,EAAMC,EAAUC,SAChByJ,EAAQ90C,EAAIoiC,UAAUriC,EAAMC,EAAI4hC,SAChC1oB,EAAiBiyB,EAAIjyB,eACrBgsB,EAAciG,EAAIjG,YAClBC,EAAegG,EAAIhG,aACnBC,EAAY+F,EAAI/F,UAChBmT,EArByB,SAAUnB,GACzC,IAAImB,EAAWohC,GAAkBviC,GAIjC,OAHImB,GAAYA,EAASljB,UAAU31C,OAAO,KAAO65F,IAC/ChhC,EAAS7B,WAAW,EAAG,GAElB6B,CACT,CAemBwhC,CAA2Bh6E,GAC1CC,EAAI7c,OAAO4c,GAAM,GACbmZ,IAAmBq/B,GAAYrT,EAAc,GAC/CiG,EAAIvG,SAAS2T,EAAUrT,EAAc,GAEnCC,IAAiBoT,GAAYnT,EAAY,GAC3C+F,EAAItG,OAAO0T,EAAUnT,EAAY,GAE/B0P,GAAS90C,EAAIskC,QAAQwQ,IACvB0xB,GAAkBvmE,GAAqB60C,IAEzC1J,EAAU2U,OAAO5U,EACnB,CACF,EACI6uC,GAAuB,SAAUnnE,EAAQ9S,EAAMmrE,QAC/B,IAAdA,IACFA,GAAY,GAEd,IAAIlrE,EAAM6S,EAAO7S,IAAKorC,EAAYv4B,EAAOu4B,UACzC,GAAKrrC,EAQH+5E,GAAyBjnE,EAAQ9S,EAAMmrE,QANvC,KADAnrE,EAAOo+C,GAAwBtrC,EAAOy4B,UAAWF,EAAUwkB,aAEzD,KAAO7vD,EAAOC,EAAIiN,IAAIusE,KACpBM,GAAyBjnE,EAAQ9S,GAAM,EAM/C,EAcIk6E,GAAa,SAAU97F,EAAY4hB,GAErC,OADA5hB,EAAWN,YAAYkiB,GAChBA,CACT,EACIm6E,GAAsC,SAAUC,EAAathE,GAC/D,IAAIuhE,EAAsB9nF,EAAM6nF,GAAa,SAAUh8F,EAAYk8F,GACjE,OAAOJ,GAAW97F,EAAYk8F,EAAWzyF,WAAU,GACrD,GAAGixB,GACH,OAAOohE,GAAWG,EAAqBA,EAAoB73E,cAAc9B,eAAe84E,IAC1F,EAqDIe,GAAoB,SAAUznE,EAAQr9B,EAAMwrE,EAAMq3B,GACpD,IAEIkC,EAAiBx6E,EAAMs6E,EAFvBr6E,EAAM6S,EAAO7S,IACborC,EAAYv4B,EAAOu4B,UAEnBpmB,EAAU,GACVmmB,EAAMC,EAAUC,SAChB5tD,EAAY0tD,EAAIjyB,eAChBZ,EAAS6yB,EAAIjG,YAQjB,IAPAnlC,EAAOtiB,EACoB,IAAvBA,EAAUqjB,WACRwX,IAAW76B,EAAU43C,UAAU//C,SACjCilG,GAAkB,GAEpBx6E,EAAOA,EAAK5hB,YAEP4hB,GAAM,CACX,GAAIu4E,GAAUzlE,EAAQ9S,EAAMvqB,EAAMwrE,EAAMq3B,GAAU,CAChDgC,EAAat6E,EACb,KACF,CACIA,EAAK8C,cACP03E,GAAkB,GAEpBv1D,EAAQznC,KAAKwiB,GACbA,EAAOA,EAAK5hB,UACd,CACA,GAAKk8F,EAGL,GAAIE,EAAiB,CACnB,IAAI9mC,EAAWrI,EAAUue,cACzBxe,EAAIgC,UAAS,GACb,IAAIqtC,EAAct3B,GAAUrwC,EAAQs4B,EAAKt4B,EAAOqlE,UAAUjrE,IAAIz3B,IAAO,GACrEglG,EAAcp8E,GAAMo8E,GACpB3nE,EAAOqlE,UAAU/0F,OAAO3N,EAAMwrE,EAAMw5B,EAAanC,GACjDjtC,EAAUiJ,eAAeZ,EAC3B,KAAO,CACL,IAAI56B,EAAiBslC,GAAwBtrC,EAAOy4B,UAAW+uC,GAC3DI,EAAoBb,IAAqB,GAAO55E,KAjHzB,SAAU6S,EAAQgG,EAAgBwhE,GAC/D,IAtoD+BnwE,EAC3BwwE,EACA3hE,EAooDA/Y,EAAM6S,EAAO7S,IAAK80C,EAAQ90C,EAAIoiC,UAAUi4C,EAAYjrF,EAAMwxD,GAAe/tC,IACzEiiC,GAAS90C,EAAIskC,QAAQwQ,GACvBulC,EAAWl8F,WAAWijD,aAAavoB,EAAgBwhE,IAxoDtBnwE,EA0oDZjK,GAAqBo6E,GAzoDpCK,EAAS7vC,GAAY3gC,EAAK,MAC1B6O,EAAM1mB,EAXU,SAAU6X,GAG9B,IAFA,IAAIlH,EAAW,GACXmoE,EAAUjhE,EAAIlK,IACXmrE,GACLnoE,EAASzlB,KAAK0iB,GAAqBkrE,IACnCA,EAAUA,EAAQ/nE,UAEpB,OAAOJ,CACT,CAGqB23E,CAAgBzwE,GAAKhd,OAAO,GAAIiqB,IAC/CujE,EAAOplG,SAAWyjC,EAAIzjC,QACxB0c,EAAO+mB,EAAKpU,IAuoDR3E,EAAIskC,QAAQ+1C,GACdA,EAAWl8F,WAAWijD,aAAavoB,EAAgBwhE,GAEnDr6E,EAAI6jC,YAAYhrB,EAAgBwhE,GAGtC,CAsGIO,CAAyB/nE,EAAQ4nE,EAAsC,OAAnB5hE,EAA0BA,EAAiBwhE,GAC/F,IAAIQ,EA5Fc,SAAUhoE,EAAQgG,EAAgBwhE,EAAY7kG,EAAMwrE,EAAMq3B,GAC9E,IAAIH,EAAYrlE,EAAOqlE,UACnBl4E,EAAM6S,EAAO7S,IACb86E,EAAezoF,EAAS7Z,GAAK0/F,EAAUjrE,QAAQ,SAAUgsE,GAC3D,OAAOA,IAAezjG,IAAS+hB,GAAW0hF,EAAY,eACxD,IACI8B,EAAiBjC,GAAejmE,EAAQwnE,EAAYS,GAIxD,GAHoBzoF,EAAS0oF,GAAgB,SAAUC,GACrD,OAn2KoB,SAAUnoE,EAAQomE,EAAYgC,GACpD,IAAIC,EAAY,CACd,SACA,QACA,WACA,aACA,SACA,WAEEC,EAAY,SAAU30F,GACxB,OAAO2N,GAAS3N,GAAQ,SAAU8nB,EAAGh4B,GACnC,OAAOua,EAAOqqF,GAAW,SAAUE,GACjC,OAAOA,IAAa9kG,CACtB,GACF,GACF,EACA,OAAOua,EAAOgiB,EAAOqlE,UAAUjrE,IAAIgsE,IAAa,SAAUoC,GACxD,IAAIC,EAAeH,EAAUE,GAC7B,OAAOxqF,EAAOgiB,EAAOqlE,UAAUjrE,IAAIguE,IAAkB,SAAUM,GAC7D,IAAIC,EAAeL,EAAUI,GAC7B,OA1iTQ,SAAUvoF,EAAIC,EAAI1G,GAI9B,YAHW,IAAPA,IACFA,EAAKgB,GAEAX,EAASL,GAAIA,GAAGyG,EAAIC,EAC7B,CAqiTawoF,CAAQH,EAAcE,EAC/B,GACF,GACF,CA40KYE,CAAkB7oE,EAAQmoE,EAASxlG,EAC7C,IACkBF,OAAS,EAAG,CAC5B,IAAIqmG,EAAmBtB,EAAWzyF,WAAU,GAI5C,OAHAoY,EAAI7lB,IAAI0+B,EAAgB8iE,GACxBzD,EAAU/0F,OAAO3N,EAAMwrE,EAAM26B,EAAkBtD,GAC/Cr4E,EAAI7c,OAAOw4F,GACJtqF,EAASJ,KAAK0qF,EACvB,CACE,OAAOtqF,EAAS1B,MAEpB,CAyE4BisF,CAAgB/oE,EAAQ4nE,EAAmBJ,EAAY7kG,EAAMwrE,EAAMq3B,GACvFwD,EAAgB3B,GAAoCl1D,EAAQxmC,OAAOq8F,EAAkB9pF,WAAY0pF,GACrGX,GAAyBjnE,EAAQgG,GAAgB,GACjDuyB,EAAU0gC,kBAAkB+P,EAAe,GACvC77E,EAAIskC,QAAQ+1C,IACdr6E,EAAI7c,OAAOk3F,EAEf,CACF,EAuBIyB,GAAkB,SAAUjpE,EAAQlqB,GACtC,IAAIozF,EAAiBlpE,EAAOwL,OAAOmH,wBACnC,OAAOnxB,GAAM0nF,EAAgBvmG,GAAKmT,MAAcu1D,GAAYv1D,EAAQqX,OAAS2H,GAAUhf,EAAQqX,IACjG,EAKIg8E,GAAmB,CAAC,EACpB5/F,GAAS4Y,GACTinF,GAASznF,IACY,SAAUhf,EAAM4lD,GAC3B4gD,GAAiBxmG,KAE3BwmG,GAAiBxmG,GAAQ,IAE3BwmG,GAAiBxmG,GAAM+H,MAOC,SAAUs1B,GAClC,IACIqpE,EADA/wC,EAAMt4B,EAAOu4B,UAAUC,SASvB8wC,EAAQj1E,GAAe,CAAC,QACvBikC,EAAI8I,YACPioC,EAASrpE,EAAOu4B,UAAUgxC,oBAC1BH,GAAO7/F,GAAOA,GAAO8/F,EAAQC,IAVX,SAAUE,GAC5B,OAAOF,EAAME,EAAIz5E,mBAAgE,IAA5C3N,GAAUinF,EAAQG,EAAIz5E,gBAC7D,KAQuD,SAAUy5E,GAPnD,IAAUC,EAAMC,EAAND,EAQZD,EAAIz5E,gBAPdi3B,GAD4B0iD,EAQGF,GAPhBl5F,SACf02C,GAASyiD,GAAMh4E,OAAO,YAAYA,OAAOi4E,EAAKj8E,WAO9C,IAEJ,GAvBA,CAMAk8E,CAAmB,OAmBnB,IA6vH0BC,GAqQpB3lE,GAlgIF4lE,GAAS3+E,GAAMpN,KACfgsF,GAAkB,SAAU58E,GAC9B,OAAOkH,GAAYlH,KAAUigD,GAAiBjgD,KAAUm+C,GAAYn+C,KAAU4H,GAAU5H,EAC1F,EACI68E,GAAqB,SAAU78E,EAAM4W,GACvC,IAAK,IAAIC,EAAU7W,EAAM6W,EAASA,EAAUA,EAAQD,GAAc,CAChE,GAAI5O,GAAS6O,IAAY5e,GAAW4e,EAAQ7J,MAC1C,OAAOhN,EAET,GAAIkH,GAAY2P,KAAaopC,GAAiBppC,GAC5C,OAAOA,CAEX,CACA,OAAO7W,CACT,EACI88E,GAAqB,SAAU78E,EAAKqW,EAAMxwB,GAC5C,IAAIi3F,EAAe1Z,GAAapjE,GAChC,GAAIqW,GAAQxwB,IACVwwB,EAAOumE,GAAmBvmE,EAAM,mBAChCxwB,EAAO+2F,GAAmB/2F,EAAM,eAC5Bi3F,EAAaxoD,QAAQje,EAAMxwB,IAAO,CACpC,IAAK,IAAI+wB,EAAUP,EAAKxT,YAAa+T,GAAWA,IAAY/wB,GAAO,CACjE,IAAIk3F,EAAanmE,EACjBA,EAAUA,EAAQ/T,YAClBwT,EAAKx4B,YAAYk/F,EACnB,CAKA,OAJA/8E,EAAI7c,OAAO0C,GACXkY,GAAMpN,KAAKoN,GAAMM,KAAKxY,EAAKya,aAAa,SAAUP,GAChDsW,EAAKx4B,YAAYkiB,EACnB,IACOsW,CACT,CAEF,OAAOxwB,CACT,EACIm3F,GAAgB,SAAUh9E,EAAKxZ,EAAQw6D,EAAMjhD,GAC/C,GAAIA,IAAkC,IAA1BvZ,EAAOy2F,eAA0B,CAC3C,IAAI/S,EAAU2S,GAAmB78E,EAAKygD,GAAwB1gD,GAAOA,GACrE88E,GAAmB78E,EAAKkqE,EAASzpB,GAAwBypB,GAAS,GACpE,CACF,EAaIgT,GAAuB,SAAUn9E,EAAM3jB,EAAQwwD,GACjD8vC,GAAO38E,EAAKO,YAAY,SAAUP,GAC5B48E,GAAgB58E,KACd3jB,EAAO2jB,IACT6sC,EAAQ7sC,GAENA,EAAKM,iBACP68E,GAAqBn9E,EAAM3jB,EAAQwwD,GAGzC,GACF,EAMIuwC,GAAW,SAAUn9E,EAAKxqB,GAC5B,OAAO,SAAUuqB,GACf,SAAUA,IAAQmgC,GAASlgC,EAAKD,EAAMvqB,GACxC,CACF,EACI4nG,GAAa,SAAUp9E,EAAKxqB,EAAM+D,GACpC,OAAO,SAAUwmB,GACfC,EAAI0iC,SAAS3iC,EAAMvqB,EAAM+D,GACU,KAA/BwmB,EAAKppB,aAAa,UACpBopB,EAAK1V,gBAAgB,SAdL,SAAU2V,EAAKD,GACb,SAAlBA,EAAKiC,UAAuD,IAAhChC,EAAIk/B,WAAWn/B,GAAMzqB,QACnD0qB,EAAI7c,OAAO4c,GAAM,EAErB,CAYIs9E,CAAgBr9E,EAAKD,EACvB,CACF,EAEIu9E,GAAetuE,GAAa,CAC9B,CAAEslC,KAAM,IACR,CAAEtQ,OAAQ,CAAC,SACX,CAAElxB,QAAS,MAETyqE,GAAc,qBACdC,GAASz/E,GAAMpN,KACf8sF,GAASx8B,GAITy8B,GAAwB,SAAU19E,EAAKD,EAAMR,GAC/C,OAAOS,EAAIglC,UAAUjlC,EAAMR,IAAWQ,IAASR,IAAWS,EAAI4hC,QAAQriC,EACxE,EACIo+E,GAAe,SAAU98B,EAAI1V,EAAKjhD,GACpC,IAAIzM,EAAY0tD,EAAIjhD,EAAQ,iBAAmB,gBAC3CouB,EAAS6yB,EAAIjhD,EAAQ,cAAgB,aACzC,GAAI+c,GAAYxpB,GAAY,CAC1B,IAAImgG,EAAUngG,EAAU6iB,WAAWhrB,OAAS,GACvC4U,GAASouB,GACZA,IAEF76B,EAAYA,EAAU6iB,WAAWgY,EAASslE,EAAUA,EAAUtlE,EAChE,CAOA,OANIvQ,GAAStqB,IAAcyM,GAASouB,GAAU76B,EAAU43C,UAAU//C,SAChEmI,EAAY,IAAIy4B,GAAcz4B,EAAWojE,EAAGvV,WAAWzlD,QAAUpI,GAE/DsqB,GAAStqB,KAAeyM,GAAoB,IAAXouB,IACnC76B,EAAY,IAAIy4B,GAAcz4B,EAAWojE,EAAGvV,WAAWj1B,QAAU54B,GAE5DA,CACT,EACIogG,GAA0B,SAAU99E,EAAM7V,GAC5C,IAAImxC,EAAOnxC,EAAQ,aAAe,YAClC,GA1BqB,SAAU6V,GAC/B,MAAO,eAAejmB,KAAKimB,EAAKiC,SAClC,CAwBM87E,CAAiB/9E,IAASA,EAAKs7B,GAAO,CACxC,IAAI0iD,EAAYh+E,EAAKs7B,GACrB,MAAsB,OAAlBt7B,EAAKiC,UACA+7E,EAAU1iD,IAEV0iD,CAEX,CACA,OAAOh+E,CACT,EACIi+E,GAAS,SAAUh+E,EAAKD,EAAMvqB,EAAMgI,GACtC,IAAIS,EAAU+hB,EAAIpB,OAAOppB,EAAMgI,GAG/B,OAFAuiB,EAAK5hB,WAAWC,aAAaH,EAAS8hB,GACtC9hB,EAAQJ,YAAYkiB,GACb9hB,CACT,EACIggG,GAAmB,SAAUj+E,EAAKD,EAAMla,EAAMrQ,EAAMgI,GACtD,IAAI0M,EAAQ+V,GAAqBF,GAC7B9hB,EAAUgiB,GAAqBD,EAAIpB,OAAOppB,EAAMgI,IAChDkmE,EAAW79D,EAAOkd,GAAa7Y,GAAS4Y,GAAa5Y,GASzD,OARAoa,GAAOrmB,EAASylE,GACZ79D,GACFoe,GAAS/Z,EAAOjM,GAChBomB,GAAQpmB,EAASiM,KAEjBia,GAAQja,EAAOjM,GACfmmB,GAASnmB,EAASiM,IAEbjM,EAAQ+hB,GACjB,EAeIi0B,GAAO,SAAUj0B,EAAKD,EAAMla,EAAM66D,GACpC,IAAI9pC,EAAU6pC,GAAwB1gD,EAAMla,EAAM66D,GAClD,OAAOvyD,EAAWyoB,IAAiC,OAArBA,EAAQ5U,UAAqBhC,EAAI4hC,QAAQhrB,EACzE,EAuCIsnE,GAAuB,SAAUr9B,EAAIr6D,EAAQw6D,EAAMjhD,EAAMo+E,GAC3D,IAAIC,EACAp+E,EAAM6gD,EAAG7gD,IACb,IA3Dc,SAAUA,EAAKD,EAAMvZ,GACnC,SAAIi7D,GAAej7D,KAAWi3F,GAAO19E,EAAMvZ,EAAO88B,aAG9Ci+B,GAAc/6D,KAAWi3F,GAAO19E,EAAMvZ,EAAOsuD,UAG7C0M,GAAiBh7D,GACZygB,GAAYlH,IAASC,EAAIhC,GAAG+B,EAAMvZ,EAAOqa,eADlD,EAGF,CAiDOw9E,CAAUr+E,EAAKD,EAAMvZ,KAhDC,SAAUuZ,EAAMvZ,GAC3C,OAAOA,EAAO83F,OAA2B,MAAlBv+E,EAAKiC,QAC9B,CA8CwCu8E,CAAuBx+E,EAAMvZ,GACjE,OAAO82F,GAAahpC,OAEtB,IAAIpqC,EAAMnK,EACV,GAAI0hD,GAAej7D,IAA6B,QAAlBA,EAAOrD,QAAoB4K,EAAUvH,EAAOg4F,qBAAsB,CAC9F,IAAIC,EAAkBpsF,EAAS2N,EAAIk/B,WAAWh1B,IAAM,SAAUwS,GAC5D,OAAO9qB,EAAWpL,EAAOg4F,oBAAqB9hE,EAAKlnC,KAAK2G,cAC1D,IAKA,GAJA6jB,EAAI8iC,iBAAiB54B,GACrBlY,EAAOysF,GAAiB,SAAU/hE,GAChC,OAAO1c,EAAIm/B,UAAUj1B,EAAKwS,EAAKlnC,KAAMknC,EAAKnjC,MAC5C,IACIklG,EAAgBnpG,OAAS,EAC3B,OAAOgoG,GAAat5C,OAAO,OAE/B,CACA,GAAsB,QAAlBx9C,EAAOrD,OAAkB,CAC3Bq6F,GAAOh3F,EAAOi4B,QAAQ,SAAUllC,EAAO/D,GACrC+D,EAAQ4nE,GAAoBnhD,EAAK+gD,GAAYxnE,EAAOynE,GAAOxrE,EAAO,IAC9D8Y,EAAS9Y,KACXA,EAAO+D,EACP4kG,EAAc,OAEZ33F,EAAOk4F,iBAAoBP,GAAeV,GAAOv9C,GAASlgC,EAAKm+E,EAAa3oG,GAAO+D,KACrFymB,EAAI0iC,SAASx4B,EAAK10B,EAAM,IAE1B4oG,GAAiB,CACnB,IACIA,GAAkD,KAAhCp+E,EAAIg/B,UAAU90B,EAAK,WACvCA,EAAI7f,gBAAgB,SACpB6f,EAAI7f,gBAAgB,mBAEtBmzF,GAAOh3F,EAAO+4B,YAAY,SAAUhmC,EAAO/D,GACzC,IAAImpG,EAMJ,GALAplG,EAAQwnE,GAAYxnE,EAAOynE,GACvB1yD,EAAS9Y,KACXA,EAAO+D,EACP4kG,EAAc,MAEZ33F,EAAOk4F,iBAAoBP,GAAeV,GAAOz9E,EAAIg/B,UAAUm/C,EAAa3oG,GAAO+D,GAAS,CAC9F,GAAa,UAAT/D,IACF+D,EAAQymB,EAAIg/B,UAAU90B,EAAK10B,MAEzBmpG,EAAW,GACX3sF,EAAOzY,EAAM6kB,MAAM,QAAQ,SAAU8iC,GAC/B,WAAWpnD,KAAKonD,KAClBy9C,IAAaA,EAAW,IAAM,IAAMz9C,EAExC,IACIy9C,GAEF,YADA3+E,EAAIm/B,UAAUj1B,EAAK10B,EAAMmpG,GAQ/B,GAHIpB,GAAYzjG,KAAKtE,IACnB00B,EAAI7f,gBAAgB,YAAc7U,GAEvB,UAATA,GAAoB0xB,GAAe,CAAC,MAAhBA,CAAuBgD,IAAiD,SAAzClK,EAAIkgC,SAASh2B,EAAK,mBAGvE,OAFAA,EAAI7f,gBAAgB7U,QACpBwqB,EAAI0iC,SAASx4B,EAAK,kBAAmB,QAG1B,UAAT10B,GACF00B,EAAI7f,gBAAgB,aAEtB6f,EAAI7f,gBAAgB7U,EACtB,CACF,IACAgoG,GAAOh3F,EAAO+/D,SAAS,SAAUhtE,GAC/BA,EAAQwnE,GAAYxnE,EAAOynE,GACtBm9B,IAAen+E,EAAI+5B,SAASokD,EAAa5kG,IAC5CymB,EAAIw8B,YAAYtyB,EAAK3wB,EAEzB,IAEA,IADA,IAAIiE,EAAQwiB,EAAIk/B,WAAWh1B,GAClB70B,EAAI,EAAGA,EAAImI,EAAMlI,OAAQD,IAAK,CACrC,IAAIqyB,EAAWlqB,EAAMnI,GAAG2sB,SACxB,GAA8B,IAA1B0F,EAASrrB,QAAQ,MAA4C,IAA9BqrB,EAASrrB,QAAQ,SAClD,OAAOihG,GAAahpC,MAExB,CACF,CACA,MAAsB,SAAlB9tD,EAAOrD,QA5HI,SAAU09D,EAAI9gD,EAAMvZ,GACnC,IACIo4F,EADAzgG,EAAa4hB,EAAK5hB,WAElB6hB,EAAM6gD,EAAG7gD,IAAK6+E,EAAkBhqC,GAAmBgM,GACnDU,GAAc/6D,KACXq4F,EAUC1gG,IAAe6hB,EAAI8+B,YAChBt4C,EAAOs4F,YAAerB,GAAO19E,EAAMvZ,EAAOs4F,aAC7C9sF,EAAOV,GAAKyO,EAAKO,aAAa,SAAUP,GAClCkmB,GAAQ46B,EAAIg+B,EAAiB9+E,EAAKiC,SAAS7lB,eACxCyiG,EAIHA,EAAa/gG,YAAYkiB,IAHzB6+E,EAAeZ,GAAOh+E,EAAKD,EAAM8+E,GACjC7+E,EAAI2gC,WAAWi+C,EAAc/9B,EAAGztC,SAAS2rE,0BAK3CH,EAAe,IAEnB,KAtBA5+E,EAAI4hC,QAAQ7hC,KAAUC,EAAI4hC,QAAQzjD,KAC/B81C,GAAKj0B,EAAKD,GAAM,IAAWk0B,GAAKj0B,EAAKD,EAAKoD,YAAY,GAAM,IAC/DpD,EAAK3hB,aAAa4hB,EAAIpB,OAAO,MAAOmB,EAAKoD,YAEtC8wB,GAAKj0B,EAAKD,GAAM,IAAUk0B,GAAKj0B,EAAKD,EAAKqD,WAAW,GAAO,IAC9DrD,EAAKliB,YAAYmiB,EAAIpB,OAAO,SAjpLlB,SAAUpY,GAC5B,OAAOg7D,GAAiBh7D,IAAWi7D,GAAej7D,IAAWiiB,GAAKrU,GAAM5N,EAAQ,UAAU,EAC5F,CAqqLMw4F,CAAcx4F,KAAYi3F,GAAOj3F,EAAO88B,OAAQvjB,IAGpDC,EAAI7c,OAAO4c,GAAM,EACnB,CAwFIoqE,CAAWtpB,EAAI32C,EAAK1jB,GACb82F,GAAaxqE,WAEfwqE,GAAahpC,MACtB,EACI2qC,GAAiB,SAAUp+B,EAAIr6D,EAAQw6D,EAAMjhD,EAAMo+E,GACrD,OAAOD,GAAqBr9B,EAAIr6D,EAAQw6D,EAAMjhD,EAAMo+E,GAAaruF,KAAKL,GAAO,SAAUyvF,GAErF,OADAr+B,EAAG7gD,IAAIgkC,OAAOjkC,EAAMm/E,IACb,CACT,GAAGxvF,EACL,EAaIyvF,GAAwB,SAAUtsE,EAAQrsB,EAAQw6D,EAAM3kB,GAC1D,OAAO6hD,GAAqBrrE,EAAQrsB,EAAQw6D,EAAM3kB,EAAOA,GAAOvsC,KAAKb,EAASotC,IAAQ,SAAU6iD,GAG9F,OAFersE,EAAO7S,IAAIyiC,iBACjB5kD,YAAYw+C,GACdxpB,EAAO7S,IAAIgkC,OAAO3H,EAAO6iD,EAClC,GAAGjwF,EAAS,MACd,EAqCImwF,GAAW,SAAUv+B,EAAIrrE,EAAMwrE,EAAMjhD,EAAMs4E,GAC7C,IAAI31B,EAAa7B,EAAGq3B,UAAUjrE,IAAIz3B,GAC9BgR,EAASk8D,EAAW,GACpB1lD,GAAkB,EAClBgD,EAAM6gD,EAAG7gD,IACTorC,EAAYyV,EAAGzV,UACfi0C,EAAoB,SAAU5hG,GAChC,IAAI6hG,EA9Da,SAAUzsE,EAAQp1B,EAAWjI,EAAMwrE,EAAMq3B,GAC5D,IAAIiH,EASJ,OARAttF,EAAOsvD,GAAazuC,EAAO7S,IAAKviB,EAAUU,YAAY2U,WAAW,SAAUyM,GACzE,IAAK+/E,GAA4B,WAAd//E,EAAO7oB,IAAiC,SAAd6oB,EAAO7oB,GAAe,CACjE,IAAI8P,EAAS8xF,GAAUzlE,EAAQtT,EAAQ/pB,EAAMwrE,EAAMq3B,GAC/C7xF,IAA2B,IAAjBA,EAAO4X,QACnBkhF,EAAa//E,EAEjB,CACF,IACO+/E,CACT,CAmDqBC,CAAe1+B,EAAIpjE,EAAWjI,EAAMwrE,EAAMq3B,GAC3D,OA5Ce,SAAUxlE,EAAQ6vC,EAAY48B,EAAY7hG,EAAW3H,EAAQsoB,EAAO5X,EAAQw6D,GAC7F,IAAI3kB,EAAOmjD,EAAWC,EAClBz/E,EAAM6S,EAAO7S,IACjB,GAAIs/E,EAAY,CAEd,IADA,IAAII,EAAmBJ,EAAWnhG,WACzB0lE,EAAWpmE,EAAUU,WAAY0lE,GAAYA,IAAa67B,EAAkB77B,EAAWA,EAAS1lE,WAAY,CACnHk+C,EAAQr8B,EAAIq8B,MAAMwnB,GAAU,GAC5B,IAAK,IAAIxuE,EAAI,EAAGA,EAAIqtE,EAAWptE,QAEf,QADd+mD,EAAQ8iD,GAAsBtsE,EAAQ6vC,EAAWrtE,GAAI2rE,EAAM3kB,IADtBhnD,KAMnCgnD,IACEmjD,GACFnjD,EAAMx+C,YAAY2hG,GAEfC,IACHA,EAAapjD,GAEfmjD,EAAYnjD,EAEhB,CACe71C,EAAOm5F,OAAU3/E,EAAI4hC,QAAQ09C,KAC1C7hG,EAAYuiB,EAAI5B,MAAMkhF,EAAY7hG,IAEhC+hG,IACF1pG,EAAOqI,WAAWC,aAAaohG,EAAW1pG,GAC1C2pG,EAAW5hG,YAAY/H,GACnB2rE,GAAej7D,IACjBw2F,GAAch9E,EAAKxZ,EAAQw6D,EAAMw+B,GAGvC,CACA,OAAO/hG,CACT,CASWmiG,CAAa/+B,EAAI6B,EAAY48B,EAAY7hG,EAAWA,EAAW,EAAM+I,EAAQw6D,EACtF,EAII6+B,EAAmB,SAAU9/E,GAC/B,OAAOlP,EAAO6xD,GAAY,SAAUo9B,GAClC,OAAOb,GAAep+B,EAAIi/B,EAAK9+B,EAAMjhD,EAAMA,EAC7C,GACF,EACI6sC,EAAU,SAAU7sC,GACtB,IAAIggF,GAAsB,EACtBl4E,GAA0B,EAC1BZ,GAAYlH,IAASC,EAAIyhC,mBAAmB1hC,KAC9CggF,EAAsB/iF,EACtBA,EAAmD,SAAjCgD,EAAIyhC,mBAAmB1hC,GACzC8H,GAA0B,GAE5B,IAAI7E,EAAW1R,GAAKyO,EAAKO,YACzB,GAAItD,IAAoB6K,EAAyB,CAC/C,IACIm4E,EADUH,EAAiB9/E,IACKlP,EAAO6xD,GAAY,SAAUp2D,GAC/D,OAAOisF,GAAYv4E,EAAKD,EAAMzT,EAChC,IACInO,EAAa4hB,EAAK5hB,YACjB6hG,GAAsB5xF,EAAcjQ,IAAeujE,GAAuBl7D,IAC7Eq5F,EAAiB1hG,EAErB,CACA,GAAIqI,EAAOq7C,MACL7+B,EAAS1tB,OAAQ,CACnB,IAAK,IAAID,EAAI,EAAGA,EAAI2tB,EAAS1tB,OAAQD,IACnCu3D,EAAQ5pC,EAAS3tB,IAEfwyB,IACF7K,EAAkB+iF,EAEtB,CAOF/tF,EALsB,CACpB,YACA,eACA,aAEsB,SAAUqvD,GAC5Bp6C,GAAYlH,IAAS8gD,EAAG7gD,IAAIkgC,SAASngC,EAAM,qBAAuBshD,GAActhD,EAAK5hB,YAAcijE,GAAkBphD,EAAKD,EAAK5hB,cAAgBkjE,GACjJ49B,GAAep+B,EAAI,CACjBhf,MAAM,EACNy0B,OAAO,EACPhzC,OAAQ,OACR7E,OAAQ,CAAEwhE,eAAgB5+B,IACzB,KAAMthD,EAEb,GACF,EACI6E,EAAS,SAAU1a,GACrB,IAAI6V,EAAOC,EAAIiN,IAAI/iB,EAAQ,SAAW,QAClC4K,EAAMiL,EAAK7V,EAAQ,aAAe,aAQtC,OA/DyB,SAAU6V,GACnC,OAAOigD,GAAiBjgD,IAASkH,GAAYlH,KAAsB,WAAZA,EAAKrpB,IAA+B,SAAZqpB,EAAKrpB,GACtF,CAsDMwpG,CAAqBprF,KACvBA,EAAMA,EAAI5K,EAAQ,aAAe,cAE/B6d,GAASjT,IAA4B,IAApBA,EAAIiY,KAAKz3B,SAC5Bwf,EAAM5K,EAAQ6V,EAAK6C,iBAAmB7C,EAAK8C,YAAc9C,EAAK8C,aAAe9C,EAAK6C,iBAEpF5C,EAAI7c,OAAO4c,GAAM,GACVjL,CACT,EACIqrF,EAAiB,SAAUh1C,GAC7B,IAAIjyB,EAAgBisB,EAChBq1C,EAAct3B,GAAUrC,EAAI1V,EAAKuX,EAAYvX,EAAI8I,WACrD,GAAIztD,EAAO4X,MAAO,CAIhB,GAHAo8E,EAAcp8E,GAAMo8E,IACpBthE,EAAiBykE,GAAa98B,EAAI25B,GAAa,OAC/Cr1C,EAAew4C,GAAa98B,EAAI25B,IACK,CAGnC,GAFAthE,EAAiB2kE,GAAwB3kE,GAAgB,GACzDisB,EAAe04C,GAAwB14C,GAAc,GACjDu4C,GAAsB19E,EAAKkZ,EAAgBisB,GAAe,CAC5D,IAAIjhC,EAAS7S,EAASC,KAAK4nB,EAAe/V,YAAYhT,MAAM+oB,GAM5D,OALAmmE,EAAkBpB,GAAiBj+E,EAAKkE,GAAQ,EAAM,OAAQ,CAC5D,GAAM,SACN,gBAAiB,mBAEnBU,GAAO,EAET,CACA,GAAI84E,GAAsB19E,EAAKmlC,EAAcjsB,GAO3C,OANIhV,EAAS7S,EAASC,KAAK6zC,EAAa/hC,WAAWjT,MAAMg1C,GACzDk6C,EAAkBpB,GAAiBj+E,EAAKkE,GAAQ,EAAO,OAAQ,CAC7D,GAAM,OACN,gBAAiB,mBAEnBU,GAAO,GAGTsU,EAAiB8kE,GAAOh+E,EAAKkZ,EAAgB,OAAQ,CACnD,GAAM,SACN,gBAAiB,aAEnBisB,EAAe64C,GAAOh+E,EAAKmlC,EAAc,OAAQ,CAC/C,GAAM,OACN,gBAAiB,aAEnB,IAAI6K,EAAShwC,EAAIshC,YACjB0O,EAAOyK,cAAcvhC,GACrB82B,EAAOwK,aAAarV,GACpBie,GAAOpjD,EAAKgwC,GAAQ,SAAUhmC,GAC5BhY,EAAOgY,GAAO,SAAUja,GACjBiwD,GAAiBjwD,IAAOiwD,GAAiBjwD,EAAE5R,aAC9CkhG,EAAkBtvF,EAEtB,GACF,IACAsvF,EAAkBnmE,GAClBmmE,EAAkBl6C,GAClBjsB,EAAiBtU,GAAO,GACxBugC,EAAevgC,GACjB,MACEsU,EAAiBisB,EAAek6C,EAAkBnmE,GAEpDshE,EAAYthE,eAAiBA,EAAe/6B,WAAa+6B,EAAe/6B,WAAa+6B,EACrFshE,EAAYt1C,YAAcllC,EAAIk2B,UAAUhd,GACxCshE,EAAYr1C,aAAeA,EAAahnD,WAAagnD,EAAahnD,WAAagnD,EAC/Eq1C,EAAYp1C,UAAYplC,EAAIk2B,UAAUiP,GAAgB,CACxD,CACAie,GAAOpjD,EAAKw6E,GAAa,SAAUxwE,GACjChY,EAAOgY,EAAO4iC,EAChB,GACF,EACA,GAAI7sC,EAAJ,CACE,GAAIsgD,GAAOtgD,GAAO,CAChB,IAAIorC,EAAMnrC,EAAIshC,YACd6J,EAAIoP,eAAex6C,GACnBorC,EAAI+E,YAAYnwC,GAChBogF,EAAeh1C,EACjB,MACEg1C,EAAepgF,GAEjBkqD,GAAiBpJ,EAAIrrE,EAAMuqB,EAAMihD,EAEnC,MACA,GAAoD,UAAhDhhD,EAAIyhC,mBAAmB2J,EAAU2F,WAYhC3F,EAAUsI,eAAkB+N,GAAej7D,KAAWi+D,GAAmB5D,GAAIvrE,OAShFglG,GAAkBz5B,EAAIrrE,EAAMwrE,EAAMq3B,IARlC5yB,GAASra,GAAW,GAAM,WACxBia,GAAYxE,EAAIs/B,EAClB,IACI1+B,GAAej7D,IAAWqyF,GAAQh4B,EAAIrrE,EAAMwrE,EAAM5V,EAAUwkB,aAC9DtP,GAAUtgD,EAAKorC,EAAWA,EAAUC,UAEtCwV,EAAGiO,eAIL7E,GAAiBpJ,EAAIrrE,EAAMuqB,EAAMihD,OAvBjC,CACEjhD,EAAOqrC,EAAU2F,UACjB,IAAK,IAAI17D,EAAI,EAAGA,EAAIqtE,EAAWptE,UACzBotE,EAAWrtE,GAAG+qG,kBACZnB,GAAep+B,EAAI6B,EAAWrtE,GAAI2rE,EAAMjhD,EAAMA,IAFf1qB,KAOvC40E,GAAiBpJ,EAAIrrE,EAAMuqB,EAAMihD,EAEnC,CAaF,EAEIq/B,GAAStiF,GAAMpN,KAyDf2vF,GAASviF,GAAMpN,KACf4vF,GAAgB,SAAUxgF,GAC5B,OAAOkH,GAAYlH,KAAUigD,GAAiBjgD,KAAUm+C,GAAYn+C,KAAU4H,GAAU5H,EAC1F,EAYIygF,GAAgB,SAAU3/B,EAAIrrE,EAAMwrE,EAAMjhD,GAC5C,IAAI2iD,EAAa7B,EAAGq3B,UAAUjrE,IAAIz3B,GAC9BgR,EAASk8D,EAAW,GACpBhP,GAAe3zC,GAAQ8gD,EAAGzV,UAAUsI,cACpC1zC,EAAM6gD,EAAG7gD,IACTorC,EAAYyV,EAAGzV,UACfq1C,EAAmB,SAAUv2E,EAAK41E,GAUpC,QATY,IAARA,IACFA,EAAMt5F,GAEJ6H,EAAWyxF,EAAIY,WACjBZ,EAAIY,SAASx2E,EAAK41E,EAAK9+B,EAAMjhD,GAE/BugF,GAAOR,EAAIrhE,QAAQ,SAAUllC,EAAO/D,GAClCwqB,EAAI0iC,SAASx4B,EAAK10B,EAAMurE,GAAYxnE,EAAOynE,GAC7C,IACI8+B,EAAIrhE,OAAQ,CACd,IAAIkiE,EAAW3gF,EAAIg/B,UAAU90B,EAAK,SAC9By2E,GACF3gF,EAAIm/B,UAAUj1B,EAAK,iBAAkBy2E,EAEzC,CACAL,GAAOR,EAAIvgE,YAAY,SAAUhmC,EAAO/D,GACtCwqB,EAAIm/B,UAAUj1B,EAAK10B,EAAMurE,GAAYxnE,EAAOynE,GAC9C,IACAs/B,GAAOR,EAAIv5B,SAAS,SAAUhtE,GAC5BA,EAAQwnE,GAAYxnE,EAAOynE,GACtBhhD,EAAI+5B,SAAS7vB,EAAK3wB,IACrBymB,EAAIs8B,SAASpyB,EAAK3wB,EAEtB,GACF,EACIqnG,EAAiB,SAAUl+B,EAAY3iD,GACzC,IAAI8gF,GAAQ,EAcZ,OAbAP,GAAO59B,GAAY,SAAUl8D,GAC3B,QAAKg7D,GAAiBh7D,KAGlB4H,EAAc5H,EAAOytD,YAAcztD,EAAOytD,YAAcP,OAA5D,EAGI1zC,EAAIhC,GAAG+B,EAAMvZ,EAAOqa,YAAcq9C,GAAYn+C,IAChD0gF,EAAiB1gF,EAAMvZ,GACvBq6F,GAAQ,GACD,QAHT,EAKF,IACOA,CACT,EACIC,EAAoB,SAAUh6B,GAChC,GAAIj5D,EAAWi5D,GAAW,CACxB,IAAIi6B,EAAU/gF,EAAIpB,OAAOkoD,GAEzB,OADA25B,EAAiBM,GACVA,CACT,CACE,OAAO,IAEX,EACIC,EAAgB,SAAUhhF,EAAKmrC,EAAK81C,GACtC,IAAIx6B,EAAc,GACdzpD,GAAkB,EAClB8pD,EAAWtgE,EAAO88B,QAAU98B,EAAOsuD,MACnCisC,EAAUD,EAAkBh6B,GAChC1D,GAAOpjD,EAAKmrC,GAAK,SAAUnhC,GACzB,IAAIk3E,EACAt0C,EAAU,SAAU7sC,GACtB,IAAI8H,GAA0B,EAC1Bk4E,EAAsB/iF,EACtBgF,EAAWjC,EAAKiC,SAAS7lB,cACzBgC,EAAa4hB,EAAK5hB,WAClBgjG,EAAahjG,EAAW6jB,SAAS7lB,cAMrC,GALI8qB,GAAYlH,IAASC,EAAIyhC,mBAAmB1hC,KAC9CggF,EAAsB/iF,EACtBA,EAAmD,SAAjCgD,EAAIyhC,mBAAmB1hC,GACzC8H,GAA0B,GAExBM,GAAOpI,KAvFD,SAAU8S,EAAQrsB,EAAQuZ,EAAMohF,GAChD,GAnrOwB,SAAUtuE,GAClC,OAAOA,EAAO6hC,SAAS,sBAAsB,EAAO,UACtD,CAirOM0sC,CAAoBvuE,IAAW4uC,GAAej7D,GAAS,CACzD,IAAI66F,EAAwBjjE,GAAyBvL,EAAOwL,QACxDijE,EAAsB1qE,GAAQ3W,GAAqBF,IAAO,SAAU6W,GACtE,OAAOsnC,GAAYtnC,EAAQ5W,IAC7B,IACA,OAAO1L,GAAkB+sF,EAAuBF,IAAezmE,GAAUza,GAAqBF,EAAK5hB,aAAa,KAAWmjG,CAC7H,CACE,OAAO,CAEX,CA6E6BC,CAAY1gC,EAAIr6D,EAAQuZ,EAAMohF,GAKjD,OAJAD,EAAiB,UACb3/B,GAAc/6D,IAChBwZ,EAAI7c,OAAO4c,IAIf,GAAIwhD,GAAc/6D,IAAWA,EAAOvI,SAAWq6F,GAAUz3B,EAAI9gD,EAAMvqB,EAAMwrE,GACvEkgC,EAAiB,SADnB,CAIA,GAAIlkF,IAAoB6K,GAA2B05C,GAAc/6D,KAAYA,EAAOvI,SAAW2iE,GAAcC,EAAI7+C,IAAaikB,GAAQ46B,EAAIsgC,EAAYr6B,GAAW,CAC/J,IAAI58C,EAAMlK,EAAIgkC,OAAOjkC,EAAM+mD,GAI3B,OAHA25B,EAAiBv2E,GACjBu8C,EAAYlpE,KAAK2sB,QACjBg3E,EAAiB,KAEnB,CACA,GAAI1/B,GAAiBh7D,GAAS,CAC5B,IAAIq6F,EAAQD,EAAel+B,EAAY3iD,GAIvC,IAHK8gF,GAASzyF,EAAcjQ,IAAeujE,GAAuBl7D,KAChEq6F,EAAQD,EAAel+B,EAAYvkE,KAEhCsjE,GAAej7D,IAAWq6F,EAE7B,YADAK,EAAiB,KAGrB,EACIlkF,GAAoB6K,IAA2Boe,GAAQ46B,EAAIiG,EAAU9kD,KAAaikB,GAAQ46B,EAAIsgC,EAAYr6B,KAAgBm6B,GAAgBl5E,GAAShI,IAAS6X,GAAO7X,EAAKgN,OAAWmxC,GAAYn+C,IAAW0hD,GAAej7D,IAAYwZ,EAAI4hC,QAAQ7hC,IAQnPmhF,EAAiB,KACjBlvF,EAAOV,GAAKyO,EAAKO,YAAassC,GAC1B/kC,IACF7K,EAAkB+iF,GAEpBmB,EAAiB,OAZZA,IACHA,EAAiBlhF,EAAIq8B,MAAM0kD,GAAS,GACpChhF,EAAK5hB,WAAWC,aAAa8iG,EAAgBnhF,GAC7C0mD,EAAYlpE,KAAK2jG,IAEnBA,EAAerjG,YAAYkiB,GAxB7B,CAiCF,EACA/N,EAAOgY,EAAO4iC,EAChB,KACqB,IAAjBpmD,EAAO83F,OACTtsF,EAAOy0D,GAAa,SAAU1mD,GAC5B,IAAI6sC,EAAU,SAAU7sC,GACA,MAAlBA,EAAKiC,UACPy+E,EAAiB1gF,EAAMvZ,GAEzBwL,EAAOV,GAAKyO,EAAKO,YAAassC,EAChC,EACAA,EAAQ7sC,EACV,IAEF/N,EAAOy0D,GAAa,SAAU1mD,GAC5B,IAqBIyhF,EArBgB,SAAUzhF,GAC5B,IAAIsP,EAAQ,EAMZ,OALArd,EAAO+N,EAAKO,YAAY,SAAUP,IApyMlB,SAAUA,GAChC,OAAO3R,EAAc2R,IAASgI,GAAShI,IAAyB,IAAhBA,EAAKzqB,MACvD,EAmyMemsG,CAAkB1hF,IAAUigD,GAAiBjgD,IAChDsP,GAEJ,IACOA,CACT,CAaiBqyE,CAAc3hF,KAC1B0mD,EAAYnxE,OAAS,IAAM0qB,EAAI4hC,QAAQ7hC,IAAyB,IAAfyhF,GAIlD//B,GAAej7D,IAAW+6D,GAAc/6D,IAAWA,EAAOvI,WACvDuI,EAAO8vE,OAAwB,IAAfkrB,IACnBzhF,EAnBc,SAAUA,GAC1B,IAAI4hF,EAAehvF,EAAOoN,EAAKO,WAAYigF,IAAenkG,QAAO,SAAU+tB,GACzE,OAAOouE,GAAYv4E,EAAKmK,EAAO3jB,EACjC,IACA,OAAOm7F,EAAa1lG,KAAI,SAAUkuB,GAChC,IAAIkyB,EAAQr8B,EAAIq8B,MAAMlyB,GAAO,GAI7B,OAHAs2E,EAAiBpkD,GACjBr8B,EAAIjd,QAAQs5C,EAAOt8B,GAAM,GACzBC,EAAI7c,OAAOgnB,GAAO,GACXkyB,CACT,IAAGlsC,MAAM4P,EACX,CAQW6hF,CAAY7hF,IA9ML,SAAU8S,EAAQ6vC,EAAY1B,EAAMjhD,GAC1DsgF,GAAO39B,GAAY,SAAUl8D,GACvBi7D,GAAej7D,IACjB65F,GAAOxtE,EAAO7S,IAAI64B,OAAOryC,EAAO88B,OAAQvjB,IAAO,SAAUoK,GAClDwyE,GAAgBxyE,IAGrB80E,GAAepsE,EAAQrsB,EAAQw6D,EAAM72C,EAAO3jB,EAAO8vE,MAAQnsD,EAAQ,KACrE,IAhhBiB,SAAUnK,EAAKxZ,EAAQuZ,GAC5C,GAAIvZ,EAAOq7F,mBAAoB,CAC7B,IAAIhhF,EAAWra,EAAO83F,MAAQ,WAAa,IAC3C5B,GAAO18E,EAAI64B,OAAOh4B,EAAUd,IAAO,SAAUA,GACvC48E,GAAgB58E,IAClB28E,GAAOl2F,EAAOi4B,QAAQ,SAAUllC,EAAO/D,GACrCwqB,EAAI0iC,SAAS3iC,EAAMvqB,EAAM,GAC3B,GAEJ,GACF,CACF,CAugBIssG,CAAiBjvE,EAAO7S,IAAKxZ,EAAQuZ,EACvC,GACF,CAoMQgiF,CAAkBlhC,EAAI6B,EAAY1B,EAAMjhD,GAnMzB,SAAU8S,EAAQrsB,EAAQhR,EAAMwrE,EAAMjhD,GACvDu4E,GAAUzlE,EAAQ9S,EAAK5hB,WAAY3I,EAAMwrE,IACvCi+B,GAAepsE,EAAQrsB,EAAQw6D,EAAMjhD,IAIvCvZ,EAAOw7F,oBACTnvE,EAAO7S,IAAIoiC,UAAUriC,EAAK5hB,YAAY,SAAUohB,GAC9C,GAAI+4E,GAAUzlE,EAAQtT,EAAQ/pB,EAAMwrE,GAElC,OADAi+B,GAAepsE,EAAQrsB,EAAQw6D,EAAMjhD,IAC9B,CAEX,GAEJ,CAsLQkiF,CAAiBphC,EAAIr6D,EAAQhR,EAAMwrE,EAAMjhD,GA5NX,SAAUC,EAAKxZ,EAAQw6D,EAAMjhD,GAC7DvZ,EAAOi4B,QAAUj4B,EAAOi4B,OAAOyjE,iBACjChF,GAAqBn9E,EAAMo9E,GAASn9E,EAAK,YAAao9E,GAAWp9E,EAAK,kBAAmB+gD,GAAYv6D,EAAOi4B,OAAOyjE,gBAAiBlhC,IAExI,CAyNQmhC,CAAgCniF,EAAKxZ,EAAQw6D,EAAMjhD,GA7OxB,SAAUC,EAAKxZ,EAAQw6D,EAAMjhD,GAC9D,IAAIqiF,EAAiC,SAAUryF,GAC7C,GAAmB,IAAfA,EAAE+Q,UAAkB/Q,EAAE5R,YAAwC,IAA1B4R,EAAE5R,WAAW2iB,SAAgB,CACnE,IAAIm/E,EAAiB7+B,GAAkBphD,EAAKjQ,EAAE5R,YAC1C6hB,EAAIkgC,SAASnwC,EAAG,UAAYkwF,EAC9BjgF,EAAI0iC,SAAS3yC,EAAG,kBAAmBkwF,GAC1BjgF,EAAIkgC,SAASnwC,EAAG,qBAAuBkwF,GAChDjgF,EAAI0iC,SAAS3yC,EAAG,kBAAmB,KAEvC,CACF,EACIvJ,EAAOi4B,SAAWj4B,EAAOi4B,OAAOmI,OAASpgC,EAAOi4B,OAAOwhE,kBACzDliF,GAAM0B,KAAKM,EAAMqiF,EAAgC,cACjDA,EAA+BriF,GAEnC,CA+NQsiF,CAA6BriF,EAAKxZ,EAAQw6D,EAAMjhD,GAzNtC,SAAUC,EAAKxZ,EAAQw6D,EAAMjhD,IACzC0hD,GAAej7D,IAA8B,QAAlBA,EAAO88B,QAAsC,QAAlB98B,EAAO88B,SAC/D45D,GAAqBn9E,EAAMo9E,GAASn9E,EAAK,YAAao9E,GAAWp9E,EAAK,WAAY,KAClFA,EAAI7c,OAAO6c,EAAI64B,OAAyB,QAAlBryC,EAAO88B,OAAmB,MAAQ,MAAOvjB,IAAO,GAE1E,CAqNQuiF,CAAYtiF,EAAKxZ,EAAQw6D,EAAMjhD,GAC/Bi9E,GAAch9E,EAAKxZ,EAAQw6D,EAAMjhD,IAZjCC,EAAI7c,OAAO4c,GAAM,EAcrB,GACF,EACA,GAAoD,UAAhDC,EAAIyhC,mBAAmB2J,EAAU2F,WAArC,CAYA,GAAIvqD,EAAQ,CACV,GAAIuZ,EACF,GAAIsgD,GAAOtgD,IACT,IAAK6gF,EAAel+B,EAAY3iD,GAAO,CACrC,IAAIorC,EAAMnrC,EAAIshC,YACd6J,EAAIoP,eAAex6C,GACnBorC,EAAI+E,YAAYnwC,GAChBihF,EAAchhF,EAAKkjD,GAAUrC,EAAI1V,EAAKuX,IAAa,EACrD,OAEAs+B,EAAchhF,EAAKD,GAAM,QAG3B,GAAK2zC,GAAgB+N,GAAej7D,KAAWi+D,GAAmB5D,GAAIvrE,QAp7BrD,SAAUu9B,EAAQr9B,EAAMwrE,GAC7C,IAAInoC,EAAgB0/B,EAChBnN,EAAYv4B,EAAOu4B,UACnB8d,EAAe9d,EAAUC,SACzB/yB,EAAS4wC,EAAahkB,YAEtB1kC,EADY0oD,EAAahwC,eACRmc,WACrBxc,EAAiBslC,GAAwBtrC,EAAOy4B,UAAWF,EAAUwkB,eAEnErX,EAAWohC,GAAkB9gE,IAE/B,IAnJyBtW,EAAexC,EAmJpCwiF,EAAgB,gCACpB,GAAI/hF,GAAQ8X,EAAS,GAAKA,EAAS9X,EAAKlrB,QAAUitG,EAAczoG,KAAK0mB,EAAK9gB,OAAO44B,KAAYiqE,EAAczoG,KAAK0mB,EAAK9gB,OAAO44B,EAAS,IAAK,CACxI,IAAIm7B,EAAWrI,EAAUue,cACzBT,EAAa/b,UAAS,GACtB,IAAIhC,EAAM+X,GAAUrwC,EAAQq2C,EAAcr2C,EAAOqlE,UAAUjrE,IAAIz3B,IAC/D21D,EAAM/sC,GAAM+sC,GACZt4B,EAAOqlE,UAAUrpF,MAAMrZ,EAAMwrE,EAAM7V,GACnCC,EAAUiJ,eAAeZ,EAC3B,MACO56B,GAAkB0/B,EAASljB,YAAckkD,KA5JvBh3E,EA6JOsQ,EAAO6zC,SA7JC3mD,EA6JS65E,IAAqB,GAAM55E,IACxEu4C,GADA1/B,EA5JGtW,EAAcigF,WAAWziF,GAAM,IA6JRoD,WAC1B+lD,EAAavX,WAAW94B,GACxBP,EAAS,GAGTzF,EAAOqlE,UAAUrpF,MAAMrZ,EAAMwrE,EAAMnoC,GAErCuyB,EAAU0gC,kBAAkBvzB,EAAUjgC,EAE1C,CAq6BQmqE,CAAiB5hC,EAAIrrE,EAAMwrE,OAhBiD,CAC5E,IAAI0hC,EAAat3C,EAAU2F,UACvB4xC,EAAcjgC,EAAW,GACxB7B,EAAGztC,SAASwvE,oBAAqBD,EAAYE,cAAiB7iF,EAAIoiC,UAAUsgD,EAAY1iF,EAAI4hC,UAC/F4+C,GAAc3/B,EAAI8hC,EAAYE,cAEhCz3C,EAAU2U,OAAOwS,GAAUnnB,EAAUC,WACrCoa,GAASra,GAAW,GAAM,WACxBia,GAAYxE,GAAI,SAAUqI,EAAc45B,GACtC,IAAItI,EAAcsI,EAAO55B,EAAehG,GAAUrC,EAAIqI,EAAcxG,GACpEs+B,EAAchhF,EAAKw6E,GAAa,EAClC,GACF,IACAl6B,GAAUtgD,EAAKorC,EAAWA,EAAUC,UACpCwV,EAAGiO,aACL,EA10Bc,SAAUt5E,EAAMq9B,GAClCopE,GAAOD,GAAiBxmG,IAAO,SAAU4lD,GACvCA,EAAKvoB,EACP,GACF,CA00BIkwE,CAAcvtG,EAAMqrE,EACtB,CACAmJ,GAAgBnJ,EAAIrrE,EAAMuqB,EAAMihD,EAnChC,KAXA,CACEjhD,EAAOqrC,EAAU2F,UACjB,IAAK,IAAI17D,EAAI,EAAGsf,EAAI+tD,EAAWptE,OAAQD,EAAIsf,EAAGtf,IAAK,CACjD,IAAI2tG,EAAatgC,EAAWrtE,GAC5B,GAAI2tG,EAAW5C,iBAAmB5+B,GAAiBwhC,IAAehjF,EAAIhC,GAAG+B,EAAMijF,EAAWniF,UAAW,CACnG4/E,EAAiB1gF,EAAMijF,GACvB,KACF,CACF,CACAh5B,GAAgBnJ,EAAIrrE,EAAMuqB,EAAMihD,EAElC,CAoCF,EAEIiiC,GAAU,SAAU1pG,GACtB,OAAO8a,GAAM9a,EAAO,OACtB,EAiBI2pG,GAAkB,SAAUrwE,GAC9B,OAAOA,EAAOu4B,UAAUwkB,UAC1B,EACIuzB,GAAe,SAAUtwE,EAAQmS,EAASx+B,EAAQ6xF,EAASr3B,GAgB7D,OAAOvuD,EAAYuyB,GAfE,SAAUjlB,GAC7B,IAAIqjF,EAAiBvwE,EAAOqlE,UAAUI,UAAUv4E,EAAMvZ,EAAQw6D,QAAmCA,EAAO,CAAC,EAAGq3B,GAC5G,OAAQnqF,EAAYk1F,EACtB,IACsB,SAAUrjF,GAC9B,QAAIk4E,GAAiCplE,EAAQ9S,EAAMvZ,KAG5C6xF,GACIjqF,EAAcykB,EAAOqlE,UAAUI,UAAUv4E,EAAMvZ,EAAQw6D,GAAM,GAK1E,GAEF,EACIzgB,GAAa,SAAU1tB,EAAQ3I,GACjC,IAAIvhB,EAAUuhB,QAAiCA,EAAMg5E,GAAgBrwE,GACrE,OAAOxgB,EAASivD,GAAazuC,EAAO7S,IAAKrX,IAAU,SAAUoX,GAC3D,OAAOkH,GAAYlH,KAAU4H,GAAU5H,EACzC,GACF,EACIsjF,GAA+B,SAAUxwE,EAAQ3I,EAAKo5E,GACxD,IAAIt+D,EAAUub,GAAW1tB,EAAQ3I,GACjCxW,GAAO4vF,GAAqB,SAAUv2E,EAAMvmB,GAC1C,IAAI+8F,EAAe,SAAUC,GAC3B,IAAIrkF,EAAQgkF,GAAatwE,EAAQmS,EAASx+B,EAAQg9F,EAAKnL,QAAS4K,GAAQO,GAAQA,EAAKxiC,UAAO7rE,GACxFg1D,EAAQhrC,EAAMlP,SAClB,GAAIuzF,EAAK1vE,MAAM7G,QAAUk9B,EAAO,CAC9Bq5C,EAAK1vE,MAAMkC,IAAIm0B,GACf,IAAIs5C,EAAStkF,EAAMhP,MAAM+Z,GACrB+4E,GAAQO,GACVA,EAAKjrG,SAAS4xD,EAAO,CACnBpqC,KAAM0jF,EACNj9F,OAAQA,EACRw+B,QAASA,IAGXhzB,EAAOwxF,EAAKx2E,WAAW,SAAUz0B,GAC/B,OAAOA,EAAS4xD,EAAO,CACrBpqC,KAAM0jF,EACNj9F,OAAQA,EACRw+B,QAASA,GAEb,GAEJ,CACF,EACAhzB,EAAO,CACL+a,EAAK22E,YACL32E,EAAK42E,gBACJJ,GACHvxF,EAAO+a,EAAK62E,SAAUL,EACxB,GACF,EAsFIM,GAAe,SAAUt/E,EAAUpE,GACrC,IACI8rC,GADM9rC,GAASppB,UACAyiD,yBAInB,OAHAxnC,EAAOuS,GAAU,SAAU5b,GACzBsjD,EAASpuD,YAAY8K,EAAQqX,IAC/B,IACOC,GAAqBgsC,EAC9B,EAEI63C,GAAa,SAAUn7F,EAASX,EAAOymF,GACzC,MAAO,CACL9lF,QAASA,EACTX,MAAOA,EACPymF,KAAMA,EAEV,EACIsV,GAAW,SAAUp7F,EAASmkF,GAChC,MAAO,CACLnkF,QAASA,EACTmkF,MAAOA,EAEX,EACIkX,GAAe,SAAUj4F,EAAGU,GAC9B,MAAO,CACLV,EAAGA,EACHU,EAAGA,EAEP,EACIw3F,GAAU,SAAU1/D,EAAIjuC,GAC1B,IAAIiD,EAAQwQ,SAASof,GAAMob,EAAIjuC,GAAM,IACrC,OAAOwT,MAAMvQ,GAAS,EAAIA,CAC5B,EAeI2qG,GAAa,SAAUpkE,EAAO/zB,EAAGU,GACnC,IAAIgiF,EAAO3uD,EAAM2uD,KAEjB,SADYA,EAAKhiF,GAAKgiF,EAAKhiF,GAAGqgF,MAAQ,IACvB/gF,EACjB,EAOIo4F,GAAW,SAAU1V,GACvB,OAAOj8E,EAAMi8E,GAAM,SAAUl8E,EAAK6xF,GAChC,OAAOA,EAAItX,MAAMx3F,OAASid,EAAM6xF,EAAItX,MAAMx3F,OAASid,CACrD,GAAG,EACL,EACI8xF,GAAiB,SAAUvkE,EAAOn3B,GAEpC,IADA,IAAI8lF,EAAO3uD,EAAM2uD,KACRhiF,EAAI,EAAGA,EAAIgiF,EAAKn5F,OAAQmX,IAE/B,IADA,IAAIqgF,EAAQ2B,EAAKhiF,GAAGqgF,MACX/gF,EAAI,EAAGA,EAAI+gF,EAAMx3F,OAAQyW,IAChC,GAAIQ,GAAGugF,EAAM/gF,GAAIpD,GACf,OAAO0I,EAASJ,KAAK+yF,GAAaj4F,EAAGU,IAI3C,OAAO4E,EAAS1B,MAClB,EACI20F,GAAc,SAAUxkE,EAAOykE,EAAIC,EAAIz4E,EAAI04E,GAG7C,IAFA,IAAIC,EAAU,GACVjW,EAAO3uD,EAAM2uD,KACRhiF,EAAI+3F,EAAI/3F,GAAKg4F,EAAIh4F,IAAK,CAC7B,IAAIqgF,EAAQ2B,EAAKhiF,GAAGqgF,MAChB5/E,EAAQq3F,EAAKx4E,EAAK+gE,EAAM5/E,MAAMq3F,EAAIx4E,EAAK,GAAK+gE,EAAM5/E,MAAM6e,EAAIw4E,EAAK,GACrEG,EAAQnnG,KAAKwmG,GAAStV,EAAKhiF,GAAG9D,QAASuE,GACzC,CACA,OAAOw3F,CACT,EAoCIC,GAAQ,SAAU7kE,GACpB,OA9BmB,SAAUA,EAAO2uD,GACpC,IAAImW,EAAeruE,GAAQuJ,EAAMn3B,SAC7Bk8F,EAAY5kF,GAAqB,SAGrC,OAFAqE,GAAOugF,EAAWpW,GAClBrqE,GAASwgF,EAAcC,GAChBD,CACT,CAwBSE,CAAehlE,EAvBC,SAAUA,GACjC,OAAOhuB,EAAMguB,EAAM2uD,MAAM,SAAU2V,GACjC,IAAItX,EAAQh7E,EAAMsyF,EAAItX,OAAO,SAAUloB,GACrC,IAAIrgC,EAAK+nB,GAAOsY,GAGhB,OAFAv7C,GAASkb,EAAI,WACblb,GAASkb,EAAI,WACNA,CACT,IACIE,EAAKlO,GAAQ6tE,EAAIz7F,SAErB,OADA2b,GAAOmgB,EAAIqoD,GACJroD,CACT,GACF,CAW+BsgE,CAAmBjlE,GAClD,EAcIklE,GAA+B,SAAUhgE,EAASmmB,GACpD,OAAOx4C,EAAOqyB,GAAS,SAAU9a,GAC/B,MAAqB,OAAd10B,GAAK00B,IAAiB66C,GAAuB76C,EAAKihC,EAC3D,IAAGr7C,KAAKb,EAAS,KAAK,SAAUg2F,GAC9B,OAT0B,SAAUjgE,GACtC,OAAOryB,EAAOqyB,GAAS,SAAU9a,GAC/B,MAAqB,OAAd10B,GAAK00B,IAA+B,OAAd10B,GAAK00B,EACpC,GACF,CAKWg7E,CAAwBlgE,GAAS/oC,KAAI,SAAUkpG,GACpD,IAAIC,EAAUnlF,GAAqBzqB,GAAK2vG,IACpCE,EAAalxF,GAASwV,GAAUw7E,IAAW,SAAUG,EAAQ9vG,GAC/D,OAAOiiB,GAAWjiB,EAAM,aAC1B,IAEA,OAx0dO,SAAUmT,EAASihB,GAC9B,IAAI5J,EAAMrX,EAAQqX,IAClBtM,GAAOkW,GAAK,SAAU/V,EAAG3W,IAXT,SAAU8iB,EAAKuJ,EAAUhwB,GACzC,IAAKsU,EAAWtU,GAEd,MAAM,IAAI0N,MAAM,+BAAiC1N,GAE/CwvB,GAAY/I,IACdA,EAAItb,MAAM6gG,YAAYh8E,EAAUhwB,EAEpC,CAIIisG,CAAYxlF,EAAK9iB,EAAG2W,EACtB,GACF,CAk0dM4xF,CAAOL,EAASC,GACT,CACLplF,GAAqB,MACrBmlF,EAEJ,IAAGj1F,MAAM,GACX,GACF,EA8BIu1F,GAAgB,WAClB,OAAO7B,GAAa,GACtB,EACI8B,GAAuB,SAAUvvE,EAAU+0B,GAC7C,OAjCmBy6C,EAiCP3lF,GAAqBkrC,EAAI8oC,iBAjCR3zC,EAmBT,SAAUlqB,EAAU+0B,GACxC,IAAI06C,EAAwB5lF,GAAqBkrC,EAAImnC,yBACjDttD,EAAU6hD,GAAegf,EAAuBzvE,GAChD0vE,EAAezzF,EAAS2yB,GAAS,SAAU9a,GAC7C,OAAOgN,GAAWhN,IAAQ8M,GAAU9M,EACtC,IACI67E,EAAef,GAA6BhgE,EAASmmB,GACrD66C,EAAcF,EAAatnG,OAAOunG,EAAazwG,OAASywG,EAnBrC,SAAUF,GACjC,OAAIvuE,GAAWuuE,GACNtmF,GAAOsmF,GAAuBzpG,OAAOi7B,IAAQvnB,KAAKb,EAAS,KAAK,SAAUm2F,GAC/E,MAAO,CACLS,EACAT,EAEJ,IAEO/tE,GAAOwuE,GAAyB,CAACA,GAAyB,EAErE,CAQ6EI,CAAmBJ,IAC9F,OAAO/zF,EAAMk0F,EAAazvE,GAC5B,CAKyD2vE,CAAgB9vE,EAAU+0B,GAhC7Eg7C,EAAU3zF,EAAM8tC,GAAM,SAAU/tC,EAAK2X,GAEvC,OADA9F,GAAS8F,EAAK3X,GACP2X,CACT,GAAG07E,GACItlD,EAAKhrD,OAAS,EAAIuuG,GAAa,CAACsC,IAAYA,EAL1C,IAAUP,EAAUtlD,EACzB6lD,CAiCN,EAIIC,GAAmB,SAAUhwE,EAAUiwE,GACzC,OAJ6B3mD,EAIPtpB,EAJgBwuC,EAINyhC,EAAmB,GAH5C10E,GAAWizC,EAAM,QAASx1D,EAAM7C,GAAImzC,KAGY9uC,MAAK,SAAU01F,GACpE,IAtEuBxmE,EAAO60C,EAAcC,EAsExC2xB,EAAYF,EAAmB,GAC/BG,EAAWH,EAAmBA,EAAmB/wG,OAAS,GAC1DmxG,EApFM,SAAUH,GACtB,IAAIxmE,EAAQgkE,GAAWvtE,GAAQ+vE,GAAW,EAAG,IAM7C,OALAt0F,EAAO64C,GAAYy7C,EAAU,OAAO,SAAU7hE,EAAIh4B,GAChDuF,EAAO64C,GAAYpmB,EAAI,UAAU,SAAUF,EAAIx4B,IAjFrC,SAAU+zB,EAAO/zB,EAAGU,EAAGg4B,EAAIF,GAIvC,IAHA,IAAImiE,EAAUzC,GAAQ1/D,EAAI,WACtBoiE,EAAU1C,GAAQ1/D,EAAI,WACtBkqD,EAAO3uD,EAAM2uD,KACRmY,EAAKn6F,EAAGm6F,EAAKn6F,EAAIi6F,EAASE,IAAM,CAClCnY,EAAKmY,KACRnY,EAAKmY,GAAM7C,GAASz3C,GAAO7nB,GAAK,KAElC,IAAK,IAAIoiE,EAAK96F,EAAG86F,EAAK96F,EAAI46F,EAASE,IACrBpY,EAAKmY,GAAI9Z,MACf+Z,GAAMD,IAAOn6F,GAAKo6F,IAAO96F,EAAIw4B,EAAKhO,GAAQgO,EAEpD,CACF,CAqEMuiE,CAAQhnE,EA/DG,SAAUA,EAAO/zB,EAAGU,GACnC,KAAOy3F,GAAWpkE,EAAO/zB,EAAGU,IAC1BV,IAEF,OAAOA,CACT,CA0DqBg7F,CAAWjnE,EAAO/zB,EAAGU,GAAIA,EAAGg4B,EAAIF,EACjD,GACF,IACOu/D,GAAWhkE,EAAMn3B,QAASw7F,GAASrkE,EAAM2uD,MAAO3uD,EAAM2uD,KAC/D,CA4EyBuY,CAAQV,GAC7B,OAzEuBxmE,EAyEL2mE,EAzEY9xB,EAyEI4xB,EAzEU3xB,EAyEC4xB,EAxExCnC,GAAevkE,EAAO60C,GAAc/jE,MAAK,SAAU6rD,GACxD,OAAO4nC,GAAevkE,EAAO80C,GAAY34E,KAAI,SAAUqjE,GACrD,OAzCS,SAAUx/B,EAAO28B,EAAU6C,GACxC,IAAIilC,EAAK9nC,EAAS1wD,EAAGy4F,EAAK/nC,EAAShwD,EAC/Bsf,EAAKuzC,EAAOvzD,EAAG04F,EAAKnlC,EAAO7yD,EAC3Bi4F,EAAUF,EAAKC,EAAKH,GAAYxkE,EAAOykE,EAAIC,EAAIz4E,EAAI04E,GAAMH,GAAYxkE,EAAOykE,EAAIE,EAAI14E,EAAIy4E,GAC5F,OAAOV,GAAWhkE,EAAMn3B,QAASw7F,GAASO,GAAUA,EACtD,CAoCauC,CAASnnE,EAAO28B,EAAU6C,EACnC,GACF,KAoEyDrjE,KAAI,SAAUirG,GACnE,OAAOrD,GAAa,CAACc,GAAMuC,IAC7B,GACF,IAAG92F,WAAWs1F,IAXK,IAAUhmD,EAASklB,CAYxC,EAYIuiC,GAA0B,SAAU3mF,EAAMzkB,GAC5C,OAAOA,GAAS,GAAKA,EAAQykB,EAAKlrB,QAAU6qE,GAAa3/C,EAAK9gB,OAAO3D,GACvE,EACIqrG,GAAe,SAAUC,EAAKC,GAChC,IAAI9mF,EAAOsX,GAAOuvE,EAAI/pE,WACtB,OAAOgqE,EARwB,SAAU9mF,GACzC,OAAOA,EAAKzd,QAAQ,kBAAmB,GACzC,CAMsBwkG,CAA2B/mF,GAAQA,CACzD,EAoDIgnF,GAA6B,SAAU30E,EAAQrsB,EAAQmI,QAC5C,IAATA,IACFA,EAAO,CAAC,GAEV,IAAI8nF,EAXY,SAAU9nF,EAAMnI,GAChC,OAAOkP,GAASA,GAAS,CAAC,EAAG/G,GAAO,CAClCnI,OAAQA,EACRymB,KAAK,EACLm+B,WAAW,GAEf,CAKsBq8C,CAAY94F,EAAMnI,GAClCmwF,EAAc9jE,EAAO+Z,KAAK,mBAAoB6pD,GAClD,GAAIE,EAAY7sD,qBAEd,OADAjX,EAAO+Z,KAAK,aAAc+pD,GACnBA,EAAY36C,QAErB,GAA2B,SAAvB26C,EAAYnwF,OACd,OAzDiB,SAAUqsB,GAC7B,OAAOxhB,EAASC,KAAKuhB,EAAOu4B,UAAUC,UAAUpvD,KAAI,SAAUkvD,GAC5D,IAAIu8C,EAAiBr2F,EAASC,KAAKuhB,EAAO7S,IAAIoiC,UAAU+I,EAAImnC,wBAAyBz/D,EAAO7S,IAAI4hC,UAC5F3nD,EAAO44B,EAAOy4B,UACdq8C,EATiB,SAAUD,GACjC,OAAOA,EAAezrG,KAAI,SAAU64D,GAClC,OAAOA,EAAM9yC,QACf,IAAG7R,MAAM,OAAOhU,aAClB,CAK0ByrG,CAAmBF,GACrCG,EAAmBlrF,GAAI5B,QAAQ3B,QAA8B,QAApBuuF,EACzCN,EAAMx0E,EAAO7S,IAAI7lB,IAAIF,EAAM0tG,EAAiB,CAC9C,iBAAkB,MAClB,MAAS,iCACRx8C,EAAI8oC,iBACHzzE,EAAO4mF,GAAaC,EAAKQ,GACzBC,EAAkBhwE,GAAOuvE,EAAI5iF,aAEjC,GADAoO,EAAO7S,IAAI7c,OAAOkkG,GACdF,GAAwBW,EAAiB,IAAMX,GAAwBW,EAAiBA,EAAgBxyG,OAAS,GAAI,CACvH,IAAI+1F,EAAcqc,EAAev3F,MAAMlW,GACnC8tG,EAAkBX,GAAa/b,EAAawc,GAC5CG,EAAYD,EAAgB1rG,QAAQmkB,GACxC,OAAmB,IAAfwnF,EACKxnF,GAEkB2mF,GAAwBY,EAAiBC,EAAY,GAEjD,IAAM,IAAMxnF,GADlB2mF,GAAwBY,EAAiBC,EAAYxnF,EAAKlrB,QACb,IAAM,GAE9E,CACE,OAAOkrB,CAEX,IAAGrQ,MAAM,GACX,CA6BW83F,CAAep1E,GAEtB8jE,EAAYuR,UAAW,EACvB,IAAIlsD,EA/BmB,SAAUnpB,EAAQlkB,GAC3C,IAAIw8C,EAAMt4B,EAAOu4B,UAAUC,SAAU88C,EAASt1E,EAAO7S,IAAIpB,OAAO,QAC5DwmD,EAAMvyC,EAAOu4B,UAAUsZ,SACvBR,EAAS4V,GAAcjnD,EAAQoxC,GAAUmB,IACzCnZ,EAAWt9C,EAAKy5F,WArDT,SAAUhyE,EAAU8tC,GAC/B,IAAII,EAAgBD,GAA4BH,EAAQ9tC,GACxD,OAAOkuC,EAAchvE,OAAS,EAAI8wG,GAAiBhwE,EAAUkuC,GALpC,SAAUluC,EAAU8tC,GAC7C,OAAOA,EAAO5uE,OAAS,GAAK4uE,EAAO,GAAGjQ,UAAYyxC,KAAkBC,GAAqBvvE,EAAU8tC,EAAO,GAC5G,CAGgFmkC,CAAqBjyE,EAAU8tC,EAC/G,CAkDmCokC,CAAOroF,GAAqB4S,EAAOy4B,WAAY4Y,GAAQlkD,IAAMmrC,EAAI8oC,gBAIlG,OAHIhoC,GACFk8C,EAAOtqG,YAAYouD,GAEdp5B,EAAOu4B,UAAUmc,WAAWl/B,UAAU8/D,EAAQx5F,EACvD,CAsBkB45F,CAAqB11E,EAAQ8jE,GAC3C,MAA2B,SAAvBA,EAAYnwF,OACPw1C,GAEP26C,EAAY36C,QAAUnpB,EAAOu4B,UAAUsI,cAAgB,GAAK1X,EAC5DnpB,EAAO+Z,KAAK,aAAc+pD,GACnBA,EAAY36C,QAGzB,EAuHIwsD,GAAe,SAAUt+E,GAC3B,OAAIjD,GAAYiD,GACPA,EAAIy5B,UACF57B,GAASmC,GACX6S,GAASN,UAAUvS,EAAI6C,MAAM,GAC3B/E,GAAUkC,GACZ,UAASA,EAAI6C,KAAO,SAEtB,EACT,EA8CI07E,GAAQ,SAAUC,EAAWx+E,GAC/B,IA5KmBvlB,EAAMuhB,EACrBi8B,EACAwmD,EACAC,EAQAC,EAwCAC,EAOAC,EAqDA79F,EA6DA89F,EAAmBl3F,EAAMR,GAAK4Y,EAAI5J,YAAakoF,IAEnD,OArBc,SAAUv3D,EAAM/mB,GAC9B,IAAInuB,EAAQ,EACZiW,EAAOi/B,GAAM,SAAUghD,GA5Jd,IA6JHA,EAAO,GACTl2F,IA9JiB,IA+JRk2F,EAAO,IApBP,SAAU/nE,EAAKhK,EAAMnkB,GAClC,IAAIkwD,EAbe,SAAU/rC,GAC7B,IAAIH,EACAtiB,EAAY1G,SAAS4G,cAAc,OACnC47C,EAAOxiD,SAASyiD,yBAIpB,IAHIt5B,IACFziB,EAAU2J,UAAY8Y,GAEjBH,EAAOtiB,EAAU0lB,YACtBo2B,EAAK17C,YAAYkiB,GAEnB,OAAOw5B,CACT,CAEiBkJ,CAAeviC,GAC9B,GAAIgK,EAAI7J,iBAAmBtkB,EAAQmuB,EAAI5J,WAAWhrB,OAAQ,CACxD,IAAIQ,EAASo0B,EAAI5J,WAAWvkB,GAC5BjG,EAAOqI,WAAWC,aAAa6tD,EAAUn2D,EAC3C,MACEo0B,EAAIrsB,YAAYouD,EAEpB,CAaMg9C,CAAS/+E,EAAK+nE,EAAO,GAAIl2F,GACzBA,KAjK6B,IAkKpBk2F,EAAO,IAdP,SAAU/nE,EAAKnuB,GAC5B,GAAImuB,EAAI7J,iBAAmBtkB,EAAQmuB,EAAI5J,WAAWhrB,OAAQ,CACxD,IAAIQ,EAASo0B,EAAI5J,WAAWvkB,GAC5BjG,EAAOqI,WAAW8J,YAAYnS,EAChC,CACF,CAUMozG,CAASh/E,EAAKnuB,EAElB,GACF,CAQEotG,EA7KyBjjF,EA6KQwiF,EA5K7BvmD,GADex9C,EA6KJqkG,GA5KC1zG,OAAS4wB,EAAM5wB,OAAS,EACpCqzG,EAAQ,IAAI18F,MAAMk2C,GAClBymD,EAAM,IAAI38F,MAAMk2C,GAQhB0mD,EAAc,SAAUO,EAAQC,EAAMC,EAAQC,EAAMr+F,GACtD,IAAItC,EAASmgG,EAAeK,EAAQC,EAAMC,EAAQC,GAClD,GAAe,OAAX3gG,GAAmBA,EAAOsB,QAAUm/F,GAAQzgG,EAAO4gG,OAASH,EAAOE,GAAQ3gG,EAAO+qD,MAAQy1C,GAAUxgG,EAAO4gG,OAASJ,EAASE,EAG/H,IAFA,IAAIj0G,EAAI+zG,EACJpsG,EAAIssG,EACDj0G,EAAIg0G,GAAQrsG,EAAIusG,GACjBl0G,EAAIg0G,GAAQrsG,EAAIusG,GAAQ5kG,EAAKtP,KAAO6wB,EAAMlpB,IAC5CkO,EAAO3N,KAAK,CAnBX,EAqBCoH,EAAKtP,OAELA,IACA2H,GAEEqsG,EAAOD,EAASG,EAAOD,GACzBp+F,EAAO3N,KAAK,CA3BW,EA6BrBoH,EAAKtP,OAELA,IAEF6V,EAAO3N,KAAK,CAjCD,EAmCT2oB,EAAMlpB,OAENA,OAIH,CACL6rG,EAAYO,EAAQxgG,EAAOsB,MAAOo/F,EAAQ1gG,EAAOsB,MAAQtB,EAAO4gG,KAAMt+F,GACtE,IAAK,IAAIu+F,EAAK7gG,EAAOsB,MAAOu/F,EAAK7gG,EAAO+qD,MAAO81C,EAC7Cv+F,EAAO3N,KAAK,CA5CT,EA8CDoH,EAAK8kG,KAGTZ,EAAYjgG,EAAO+qD,IAAK01C,EAAMzgG,EAAO+qD,IAAM/qD,EAAO4gG,KAAMD,EAAMr+F,EAChE,CACF,EACI49F,EAAa,SAAU5+F,EAAOs/F,EAAMH,EAAME,GAE5C,IADA,IAAI51C,EAAMzpD,EACHypD,EAAM61C,EAAOD,GAAQ51C,EAAM01C,GAAQ1kG,EAAKgvD,KAASztC,EAAMytC,EAAM61C,MAChE71C,EAEJ,OApDU,SAAUzpD,EAAOypD,EAAK61C,GAChC,MAAO,CACLt/F,MAAOA,EACPypD,IAAKA,EACL61C,KAAMA,EAEV,CA8CSE,CAAMx/F,EAAOypD,EAAK61C,EAC3B,EACIT,EAAiB,SAAUK,EAAQC,EAAMC,EAAQC,GACnD,IAAIv5D,EAAIq5D,EAAOD,EACXr5F,EAAIw5F,EAAOD,EACf,GAAU,IAANt5D,GAAiB,IAANjgC,EACb,OAAO,KAET,IAKI4P,EAAGziB,EAAG7H,EAAG0W,EAAGU,EALZ+4E,EAAQx1C,EAAIjgC,EACZ45F,EAAM55F,EAAIigC,EACV1X,GAAUqxE,EAAM,GAAM,EAAIA,EAAMA,EAAM,GAAK,EAI/C,IAHAhB,EAAM,EAAIrwE,GAAU8wE,EACpBR,EAAI,EAAItwE,GAAU+wE,EAAO,EAEpB1pF,EAAI,EAAGA,GAAK2Y,IAAU3Y,EAAG,CAC5B,IAAKziB,GAAKyiB,EAAGziB,GAAKyiB,EAAGziB,GAAK,EAAG,CAS3B,IARA7H,EAAI6H,EAAIo7B,EACJp7B,KAAOyiB,GAAKziB,IAAMyiB,GAAKgpF,EAAMtzG,EAAI,GAAKszG,EAAMtzG,EAAI,GAClDszG,EAAMtzG,GAAKszG,EAAMtzG,EAAI,GAErBszG,EAAMtzG,GAAKszG,EAAMtzG,EAAI,GAAK,EAG5BoX,GADAV,EAAI48F,EAAMtzG,IACF+zG,EAASE,EAASpsG,EACnB6O,EAAIs9F,GAAQ58F,EAAI88F,GAAQ5kG,EAAKoH,KAAOma,EAAMzZ,IAC/Ck8F,EAAMtzG,KAAO0W,IACXU,EAEJ,GAAI+4E,EAAQ,GAAM,GAAKA,EAAQ7lE,GAAKziB,GAAKA,GAAKsoF,EAAQ7lE,GAChDipF,EAAIvzG,EAAImwF,IAAUmjB,EAAMtzG,GAC1B,OAAOyzG,EAAWF,EAAIvzG,EAAImwF,GAAQtoF,EAAIksG,EAASE,EAAQD,EAAME,EAGnE,CACA,IAAKrsG,EAAIsoF,EAAQ7lE,EAAGziB,GAAKsoF,EAAQ7lE,EAAGziB,GAAK,EAAG,CAS1C,IARA7H,EAAI6H,EAAIo7B,EAASktD,EACbtoF,IAAMsoF,EAAQ7lE,GAAKziB,IAAMsoF,EAAQ7lE,GAAKipF,EAAIvzG,EAAI,IAAMuzG,EAAIvzG,EAAI,GAC9DuzG,EAAIvzG,GAAKuzG,EAAIvzG,EAAI,GAAK,EAEtBuzG,EAAIvzG,GAAKuzG,EAAIvzG,EAAI,GAGnBoX,GADAV,EAAI68F,EAAIvzG,GAAK,GACL+zG,EAASE,EAASpsG,EACnB6O,GAAKq9F,GAAU38F,GAAK68F,GAAU3kG,EAAKoH,KAAOma,EAAMzZ,IACrDm8F,EAAIvzG,GAAK0W,IACTU,IAEF,GAAI+4E,EAAQ,GAAM,IAAM7lE,GAAKziB,GAAKA,GAAKyiB,GACjCipF,EAAIvzG,IAAMszG,EAAMtzG,EAAImwF,GACtB,OAAOsjB,EAAWF,EAAIvzG,GAAI6H,EAAIksG,EAASE,EAAQD,EAAME,EAG3D,CACF,CACF,EACIr+F,EAAS,GACb29F,EAAY,EAAGlkG,EAAKrP,OAAQ,EAAG4wB,EAAM5wB,OAAQ4V,GACtCA,GA4DsCgf,GACtCA,CACT,EAEI0/E,GAAmB3zF,IAAO,WAC5B,OAAOlf,SAASsnF,eAAeC,mBAAmB,OACpD,IAsBIurB,GAAmB,SAAUh3E,GAC/B,IApCqB3I,EAoCjBw+E,GApCiBx+E,EAoCE2I,EAAOy4B,UAnCvBj5C,EAASP,EAAMR,GAAK4Y,EAAI5J,YAAakoF,KAAe,SAAUzzF,GACnE,OAAOA,EAAKzf,OAAS,CACvB,KAkCIw0G,EAAmBl5F,EAAK83F,GAAW,SAAUxoF,GAC/C,IAAI6pF,EAAUrnB,GAAa7vD,EAAO00C,WAAYrnD,GAC9C,OAAO6pF,EAAQz0G,OAAS,EAAI,CAACy0G,GAAW,EAC1C,IACI/tD,EAAU8tD,EAAiBn6E,KAAK,IACpC,OA3BsC,IA2BpBqsB,EA3BN3/C,QAAQ,aAEM,SAAUqsG,GACpC,MAAO,CACLzpG,KAAM,aACNypG,UAAWA,EACX1sD,QAAS,GACTyX,SAAU,KACVu2C,eAAgB,KAEpB,CAiB+BC,CAAsBH,GAhB3B,SAAU9tD,GAClC,MAAO,CACL/8C,KAAM,WACNypG,UAAW,KACX1sD,QAASA,EACTyX,SAAU,KACVu2C,eAAgB,KAEpB,CAQyEE,CAAoBluD,EAC7F,EACImuD,GAAgB,SAAUt3E,EAAQu3E,EAAOzuD,GAC3C,IAAI8X,EAAW9X,EAASyuD,EAAMJ,eAAiBI,EAAM32C,SAClC,eAAf22C,EAAMnrG,KACRwpG,GAAM2B,EAAM1B,UAAW71E,EAAOy4B,WAE9Bz4B,EAAOg5D,WAAWue,EAAMpuD,QAAS,CAC/Bx1C,OAAQ,MACR6wF,cAAcjpF,EAAcqlD,KAAa2K,GAAe3K,KAAaA,EAASG,cAGlF/gC,EAAOu4B,UAAUiJ,eAAeZ,EAClC,EACI42C,GAAkB,SAAUD,GAC9B,MAAsB,eAAfA,EAAMnrG,KAAwBmrG,EAAM1B,UAAU/4E,KAAK,IAAMy6E,EAAMpuD,OACxE,EACIsuD,GAAuB,SAAUF,GACnC,IAAIlgF,EAAMjK,GAAqB,OAAQ2pF,MAGvC,OAFA5zE,GAAI9L,EAAKmgF,GAAgBD,IACzBp4F,EAAO64C,GAAY3gC,EAAK,qBAAsBtF,IACjCsF,EA/iSElK,IAAI5Y,SAgjSrB,EAOImjG,GAAS,SAAUC,EAAQC,GAC7B,SAAKD,IAAWC,OAPI,SAAUD,EAAQC,GACtC,OAAOJ,GAAgBG,KAAYH,GAAgBI,EACrD,CAOaC,CAAgBF,EAAQC,IANR,SAAUD,EAAQC,GAC7C,OAAOH,GAAqBE,KAAYF,GAAqBG,EAC/D,CAOWE,CAAuBH,EAAQC,GAE1C,EAEIG,GAAa,SAAUC,GACzB,OAAuB,IAAhBA,EAAM59E,KACf,EAEI69E,GAAY,SAAUjiC,EAAakiC,EAAQF,GACzCD,GAAWC,KACbhiC,EAAYkiC,OAASA,EAEzB,EACIC,GAAY,SAAUniC,EAAagiC,GACjChiC,EAAYkiC,SACdD,GAAUjiC,GAAa,EAAOgiC,GAC9BhiC,EAAY1uE,MAEhB,EA0KI8wG,GAAmB,SAAUp4E,GAC/B,MAAO,CACLg2C,YAAa,CACXqiC,aAAc,SAAUL,EAAOb,GAC7B,OAtKa,SAAUn3E,EAAQg4E,EAAOb,GACxCY,GAAWC,IACbb,EAAeh0E,IAAIu+B,GAAgB1hC,EAAOu4B,WAE9C,CAkKe+/C,CAAet4E,EAAQg4E,EAAOb,EACvC,EACA7vG,IAAK,SAAU0uE,EAAa9sE,EAAO8uG,EAAOb,EAAgBI,EAAOhhE,GAC/D,OApKa,SAAUvW,EAAQg2C,EAAa9sE,EAAO8uG,EAAOb,EAAgBI,EAAOhhE,GACvF,IAAIgiE,EAAevB,GAAiBh3E,GAGpC,GAFAu3E,EAAQA,GAAS,CAAC,EAClBA,EAAQrsF,GAAMS,OAAO4rF,EAAOgB,IACF,IAAtBR,GAAWC,IAAoBh4E,EAAOC,QACxC,OAAO,KAET,IAAIu4E,EAAYxiC,EAAY97C,KAAKhxB,EAAMkxB,OACvC,GAAI4F,EAAO+Z,KAAK,gBAAiB,CAC7Bw9D,MAAOA,EACPiB,UAAWA,EACX9hE,cAAeH,IACdU,qBACH,OAAO,KAET,GAAIuhE,GAAad,GAAOc,EAAWjB,GACjC,OAAO,KAELvhC,EAAY97C,KAAKhxB,EAAMkxB,QACzB+8E,EAAe/8E,MAAMtc,MAAK,SAAU26F,GAClCziC,EAAY97C,KAAKhxB,EAAMkxB,OAAO+8E,eAAiBsB,CACjD,IAEF,IAAIC,EAjnQwB,SAAU14E,GACtC,OAAOA,EAAO6hC,SAAS,0BAA2B,EAAG,SACvD,CA+mQ6B82C,CAAwB34E,GACnD,GAAI04E,GACE1iC,EAAY97C,KAAKz3B,OAASi2G,EAAsB,CAClD,IAAK,IAAIl2G,EAAI,EAAGA,EAAIwzE,EAAY97C,KAAKz3B,OAAS,EAAGD,IAC/CwzE,EAAY97C,KAAK13B,GAAKwzE,EAAY97C,KAAK13B,EAAI,GAE7CwzE,EAAY97C,KAAKz3B,SACjByG,EAAMi6B,IAAI6yC,EAAY97C,KAAKz3B,OAC7B,CAEF80G,EAAM32C,SAAWc,GAAgB1hC,EAAOu4B,WACpCrvD,EAAMkxB,MAAQ47C,EAAY97C,KAAKz3B,OAAS,IAC1CuzE,EAAY97C,KAAKz3B,OAASyG,EAAMkxB,MAAQ,GAE1C47C,EAAY97C,KAAKxvB,KAAK6sG,GACtBruG,EAAMi6B,IAAI6yC,EAAY97C,KAAKz3B,OAAS,GACpC,IAAIqZ,EAAO,CACTy7F,MAAOA,EACPiB,UAAWA,EACX9hE,cAAeH,GASjB,OAPIrtC,EAAMkxB,MAAQ,GAChB4F,EAAO44E,UAAS,GAChB54E,EAAO+Z,KAAK,UAAWj+B,GACvBkkB,EAAO+Z,KAAK,SAAUj+B,IAEtBkkB,EAAO+Z,KAAK,UAAWj+B,GAElBy7F,CACT,CAgHesB,CAAe74E,EAAQg2C,EAAa9sE,EAAO8uG,EAAOb,EAAgBI,EAAOhhE,EAClF,EACAuiE,KAAM,SAAU9iC,EAAagiC,EAAO9uG,GAClC,OAvFK,SAAU82B,EAAQg2C,EAAagiC,EAAO9uG,GACjD,IAAIquG,EAaJ,OAZIvhC,EAAYkiC,SACdliC,EAAY1uE,MACZ0uE,EAAYkiC,QAAS,EACrBD,GAAUjiC,GAAa,EAAOgiC,IAE5B9uG,EAAMkxB,MAAQ,IAChBlxB,EAAMi6B,IAAIj6B,EAAMkxB,MAAQ,GACxBm9E,EAAQvhC,EAAY97C,KAAKhxB,EAAMkxB,OAC/Bk9E,GAAct3E,EAAQu3E,GAAO,GAC7Bv3E,EAAO44E,UAAS,GAChB54E,EAAO+Z,KAAK,OAAQ,CAAEw9D,MAAOA,KAExBA,CACT,CAwEewB,CAAO/4E,EAAQg2C,EAAagiC,EAAO9uG,EAC5C,EACA8vG,KAAM,SAAU9vG,EAAOgxB,GACrB,OArGK,SAAU8F,EAAQ92B,EAAOgxB,GACpC,IAAIq9E,EAQJ,OAPIruG,EAAMkxB,MAAQF,EAAKz3B,OAAS,IAC9ByG,EAAMi6B,IAAIj6B,EAAMkxB,MAAQ,GACxBm9E,EAAQr9E,EAAKhxB,EAAMkxB,OACnBk9E,GAAct3E,EAAQu3E,GAAO,GAC7Bv3E,EAAO44E,UAAS,GAChB54E,EAAO+Z,KAAK,OAAQ,CAAEw9D,MAAOA,KAExBA,CACT,CA2Fe0B,CAAOj5E,EAAQ92B,EAAOgxB,EAC/B,EACAm9B,MAAO,SAAU2e,EAAa9sE,GAC5B,OAxHM,SAAU82B,EAAQg2C,EAAa9sE,GAC3C8sE,EAAY97C,KAAO,GACnBhxB,EAAMi6B,IAAI,GACV6yC,EAAYkiC,QAAS,EACrBl4E,EAAO+Z,KAAK,aACd,CAmHem/D,CAAQl5E,EAAQg2C,EAAa9sE,EACtC,EACAooF,MAAO,SAAUtb,GACf,OAhFM,SAAUA,GACtBA,EAAY3e,QACZ2e,EAAY1uE,KACd,CA6Ee6xG,CAAQnjC,EACjB,EACAojC,QAAS,SAAUpjC,EAAa9sE,GAC9B,OA/EQ,SAAU82B,EAAQg2C,EAAa9sE,GAC7C,OAAOA,EAAMkxB,MAAQ,GAAK47C,EAAYkiC,QAAUliC,EAAY97C,KAAK,KAAOw9E,GAAOV,GAAiBh3E,GAASg2C,EAAY97C,KAAK,GAC5H,CA6Eem/E,CAAUr5E,EAAQg2C,EAAa9sE,EACxC,EACAowG,QAAS,SAAUtjC,EAAa9sE,GAC9B,OA/EQ,SAAU8sE,EAAa9sE,GACrC,OAAOA,EAAMkxB,MAAQ47C,EAAY97C,KAAKz3B,OAAS,IAAMuzE,EAAYkiC,MACnE,CA6EeqB,CAAUvjC,EAAa9sE,EAChC,EACA+sE,SAAU,SAAUD,EAAagiC,EAAOtyG,GACtC,OA/ES,SAAUswE,EAAagiC,EAAOtyG,GAI7C,OAHAyyG,GAAUniC,EAAagiC,GACvBhiC,EAAYqiC,eACZriC,EAAYwjC,OAAO9zG,GACZswE,EAAY1uE,KACrB,CA0EemyG,CAAWzjC,EAAagiC,EAAOtyG,EACxC,EACA8zG,OAAQ,SAAUxB,EAAOtyG,GACvB,OA5EO,SAAUsyG,EAAOtyG,GAC9B,IACEsyG,EAAM70E,IAAI60E,EAAM59E,MAAQ,GACxB10B,GACF,CAAE,QACAsyG,EAAM70E,IAAI60E,EAAM59E,MAAQ,EAC1B,CACF,CAqEes/E,CAAS1B,EAAOtyG,EACzB,EACAi0G,MAAO,SAAU3jC,EAAa9sE,EAAO0wG,EAAWC,GAC9C,OApIM,SAAU75E,EAAQg2C,EAAa9sE,EAAO0wG,EAAWC,GAC7D,GAAI7jC,EAAYC,SAAS2jC,GAAY,CACnC,IAAIh5C,EAAWoV,EAAY97C,KAAKhxB,EAAMkxB,OAAOwmC,SACzC43C,EAAYxiC,EAAY97C,KAAKhxB,EAAMkxB,MAAQ,GAC/Ck9E,GAAct3E,EAAQw4E,GAAW,GAC7BxiC,EAAYC,SAAS4jC,KACvB7jC,EAAY97C,KAAKhxB,EAAMkxB,MAAQ,GAAG+8E,eAAiBv2C,EAEvD,CACF,CA2Hek5C,CAAQ95E,EAAQg2C,EAAa9sE,EAAO0wG,EAAWC,EACxD,GAEFxU,UAAW,CACT/4E,MAAO,SAAU3pB,EAAMwrE,EAAMjhD,EAAMs4E,GACjC,OAAOQ,GAAQhmE,EAAQr9B,EAAMwrE,EAAMjhD,EAAMs4E,EAC3C,EACAuU,SAAU,SAAUzlF,EAAO65C,GACzB,OAtjEO,SAAUnuC,EAAQ1L,EAAO65C,GACtC,IAAI6rC,EAAqB,GACrBC,EAAa,CAAC,EACdn4B,EAAe9hD,EAAOu4B,UAAUwkB,WAUpC,OATA/8C,EAAO7S,IAAIoiC,UAAUuyB,GAAc,SAAU50D,GAC3C,IAAK,IAAI1qB,EAAI,EAAGA,EAAI8xB,EAAM7xB,OAAQD,IAAK,CACrC,IAAIspB,EAASwI,EAAM9xB,IACdy3G,EAAWnuF,IAAW25E,GAAUzlE,EAAQ9S,EAAMpB,EAAQqiD,KACzD8rC,EAAWnuF,IAAU,EACrBkuF,EAAmBtvG,KAAKohB,GAE5B,CACF,GAAGkU,EAAO7S,IAAI8+B,WACP+tD,CACT,CAwiEeD,CAAS/5E,EAAQ1L,EAAO65C,EACjC,EACAs3B,UAAW,SAAUv4E,EAAMvqB,EAAMwrE,EAAMq3B,GACrC,OAAOC,GAAUzlE,EAAQ9S,EAAMvqB,EAAMwrE,EAAMq3B,EAC7C,EACA0U,SAAU,SAAUv3G,GAClB,OA9hEO,SAAUq9B,EAAQr9B,GAC/B,IAAIktE,EAAa7vC,EAAOqlE,UAAUjrE,IAAIz3B,GAClCwqB,EAAM6S,EAAO7S,IACjB,GAAI0iD,EAGF,IAFA,IAAIvsC,EAAYtD,EAAOu4B,UAAUwkB,WAC7B5qC,EAAUs8B,GAAathD,EAAKmW,GACvBpqB,EAAI22D,EAAWptE,OAAS,EAAGyW,GAAK,EAAGA,IAAK,CAC/C,IAAIvF,EAASk8D,EAAW32D,GACxB,IAAKy1D,GAAiBh7D,IAAW4H,EAAc5H,EAAOq8F,cACpD,OAAO,EAET,IAAK,IAAIxtG,EAAI2vC,EAAQ1vC,OAAS,EAAGD,GAAK,EAAGA,IACvC,GAAI2qB,EAAIhC,GAAGgnB,EAAQ3vC,GAAImR,EAAOqa,UAC5B,OAAO,CAGb,CAEF,OAAO,CACT,CA2gEeksF,CAASl6E,EAAQr9B,EAC1B,EACAwnD,QAAS,SAAU71B,GACjB,OAhjEM,SAAU0L,EAAQ1L,GAC9B,IAAImJ,EAAS,SAAUpG,GACrB,OAAO3d,GAAG2d,EAAKjK,GAAqB4S,EAAOy4B,WAC7C,EAIA,OAAOj6C,EAASC,KAAKuhB,EAAOu4B,UAAUwkB,UAAS,IAAOh/D,MAAK,SAAUo8F,GACnE,OAAOnV,GAAU53E,GAAqB+sF,IAAS,SAAU9iF,GACvD,OAAO3W,GAAQ4T,GAAO,SAAU3xB,GAC9B,OANM,SAAU00B,EAAK10B,GACzB,OAAO8iG,GAAUzlE,EAAQ3I,EAAIlK,IAAKxqB,GAAQ6b,EAASJ,KAAKzb,GAAQ6b,EAAS1B,MAC3E,CAIawP,CAAM+K,EAAK10B,EACpB,GACF,GAAG86B,EACL,IAAG/f,WACL,CAkiEeysC,CAAQnqB,EAAQ1L,EACzB,EACAtY,MAAO,SAAUrZ,EAAMwrE,EAAMjhD,GAC3B,OAAOygF,GAAc3tE,EAAQr9B,EAAMwrE,EAAMjhD,EAC3C,EACA5c,OAAQ,SAAU3N,EAAMwrE,EAAMjhD,EAAMs4E,GAClC,OAAO+G,GAASvsE,EAAQr9B,EAAMwrE,EAAMjhD,EAAMs4E,EAC5C,EACA4U,OAAQ,SAAUz3G,EAAMwrE,EAAMjhD,GAC5B,OA3xBK,SAAU8S,EAAQr9B,EAAMwrE,EAAMjhD,GACzC,IAAI+/E,EAAMjtE,EAAOqlE,UAAUjrE,IAAIz3B,IAC3BqjG,GAAQhmE,EAAQr9B,EAAMwrE,EAAMjhD,IAAY,WAAY+/E,EAAI,KAAOA,EAAI,GAAGmN,OAGxEzM,GAAc3tE,EAAQr9B,EAAMwrE,EAAMjhD,GAFlCq/E,GAASvsE,EAAQr9B,EAAMwrE,EAAMjhD,EAIjC,CAoxBektF,CAAOp6E,EAAQr9B,EAAMwrE,EAAMjhD,EACpC,EACAmtF,cAAe,SAAUC,EAA2BC,EAAS70G,EAAU8/F,EAASr3B,GAC9E,OA1yBoB,SAAUnuC,EAAQs6E,EAA2BC,EAAS70G,EAAU8/F,EAASr3B,GAKnG,OAJwC,OAApCmsC,EAA0BlgF,OA7IlB,SAAUkgF,EAA2Bt6E,GACjDs6E,EAA0Bn3E,IAAI,CAAC,GAC/BnD,EAAO8pB,GAAG,cAAc,SAAU77C,GAChCuiG,GAA6BxwE,EAAQ/xB,EAAE6H,QAASwkG,EAA0BlgF,MAC5E,IACA4F,EAAO8pB,GAAG,4BAA4B,SAAU77C,GAC9C,IAAI6H,EAAU0I,EAASC,KAAKxQ,EAAEif,MAAM9jB,KAAI,SAAUoxG,GAChD,OAAOhtC,GAAOgtC,GAAeA,EAAcA,EAAYn0E,cACzD,IAAGtoB,MAAK,SAAUmP,GAChB,OAAOkH,GAAYlH,GAAQ1O,EAASJ,KAAK8O,GAAQ1O,EAASC,KAAKyO,EAAKixD,cACtE,IAAG5gE,YAAW,WACZ,OAAO8yF,GAAgBrwE,EACzB,IACAwwE,GAA6BxwE,EAAQlqB,EAASwkG,EAA0BlgF,MAC1E,GACF,CA+HIqgF,CAAQH,EAA2Bt6E,GAlEpB,SAAUA,EAAQs6E,EAA2BC,EAAS70G,EAAU8/F,EAASr3B,GAC1F,IAAIusC,EAAoBJ,EAA0BlgF,MAClDjb,EAAOo7F,EAAQhvF,MAAM,MAAM,SAAU5X,GACnC,IAAIuQ,EAAQ3C,GAAMm5F,EAAmB/mG,GAAQ4J,YAAW,WACtD,IAAIyhB,EAAO,CACT6xE,YAAa,CACX5vE,MAAO+yB,IAAK,GACZwxC,SAAS,EACTrrE,UAAW,IAEb22E,eAAgB,CACd7vE,MAAO+yB,IAAK,GACZwxC,SAAS,EACTrrE,UAAW,IAEb42E,SAAU,IAGZ,OADA2J,EAAkB/mG,GAAUqrB,EACrBA,CACT,IACI27E,EAAa,WACf,IAAIxoE,EAAUub,GAAW1tB,GACzB,OAAOswE,GAAatwE,EAAQmS,EAASx+B,EAAQ6xF,EAASr3B,GAAM/wD,QAC9D,EACA,GAAI/B,EAAY8yD,GAAO,CACrB,IAAIysC,EAAapV,EAAUthF,EAAM2sF,YAAc3sF,EAAM4sF,eACrD8J,EAAWzgF,UAAUzvB,KAAKhF,GACU,IAAhCk1G,EAAWzgF,UAAU13B,QACvBm4G,EAAW35E,MAAMkC,IAAIw3E,IAEzB,MACEz2F,EAAM6sF,SAASrmG,KAAK,CAClBu2B,MAAO+yB,GAAK2mD,KACZnV,QAASA,EACTr3B,KAAMA,EACNzoE,SAAUA,GAGhB,IACA40G,EAA0Bn3E,IAAIu3E,EAChC,CA4BEG,CAAa76E,EAAQs6E,EAA2BC,EAAS70G,EAAU8/F,EAASr3B,GACrE,CACLv0B,OAAQ,WACN,OA9BgB,SAAU0gE,EAA2BC,EAAS70G,GAClE,IAAIg1G,EAAoBJ,EAA0BlgF,MAClDjb,EAAOo7F,EAAQhvF,MAAM,MAAM,SAAU5X,GACnC,OAAO4N,GAAMm5F,EAAmB/mG,GAAQmK,MAAK,SAAUoG,GACrDw2F,EAAkB/mG,GAAU,CAC1Bk9F,YAAahuF,GAASA,GAAS,CAAC,EAAGqB,EAAM2sF,aAAc,CACrD12E,UAAW3a,EAAS0E,EAAM2sF,YAAY12E,WAAW,SAAUtY,GACzD,OAAOA,IAAOnc,CAChB,MAEForG,eAAgBjuF,GAASA,GAAS,CAAC,EAAGqB,EAAM4sF,gBAAiB,CAC3D32E,UAAW3a,EAAS0E,EAAM4sF,eAAe32E,WAAW,SAAUtY,GAC5D,OAAOA,IAAOnc,CAChB,MAEFqrG,SAAUvxF,EAAS0E,EAAM6sF,UAAU,SAAU7uF,GAC3C,OAAOA,EAAKxc,WAAaA,CAC3B,IAEJ,GACF,IACA40G,EAA0Bn3E,IAAIu3E,EAChC,CAQaI,CAAgBR,EAA2BC,EAAS70G,EAC7D,EAEJ,CAgyBeq1G,CAAsB/6E,EAAQs6E,EAA2BC,EAAS70G,EAAU8/F,EAASr3B,EAC9F,GAEFnuC,OAAQ,CACNuxD,WAAY,SAAUz1E,EAAMnI,GAC1B,OA56HiB,SAAUqsB,EAAQlkB,EAAMnI,GAC/C,OAAO6K,EAASC,KAAKuhB,EAAOy4B,WAAWx7C,KAAKb,EAAyB,SAAhBN,EAAKnI,OAAoB,IAAI0zE,GAAQ,OAAQ,IAAM,KAAK,SAAUjgF,GACrH,OA7BqB,SAAU44B,EAAQlkB,EAAMnI,EAAQvM,GACvD,IAEI+hD,EAFAy6C,EARY,SAAU9nF,EAAMnI,GAChC,OAAOkP,GAASA,GAAS,CAAC,EAAG/G,GAAO,CAClCnI,OAAQA,EACRymB,KAAK,EACLi7E,UAAU,GAEd,CAEsB2F,CAAYl/F,EAAMnI,GAClCmwF,EAAchoF,EAAKioF,UAAYH,EAAgB5jE,EAAO+Z,KAAK,mBAAoB6pD,GAmBnF,OAhBEz6C,EADyB,QAAvB26C,EAAYnwF,OACJuX,GAAM/T,KAAKk5E,GAAarwD,EAAO00C,WAAYttE,EAAKmN,YAC1B,SAAvBuvF,EAAYnwF,OACXqsB,EAAO7S,IAAIskC,QAAQrqD,GAAQ,GAAK69B,GAAO79B,EAAKqjC,WAAarjC,EAAKwqB,aACxC,SAAvBkyE,EAAYnwF,OACXqsB,EAAO00C,WAAWl/B,UAAUpuC,EAAM08F,GArBxB,SAAU9jE,EAAQ3S,GACxC,IAAIy4C,EAAY9D,GAAmBhiC,GAC/Bi7E,EAAc,IAAI3sE,OAAO,MAAQw3B,EAAY,4CAAiDA,EAAY,8BAC9G,OAAOz4C,EAAKnd,QAAQ+qG,EAAa,GACnC,CAmBcC,CAAkBl7E,EAAQA,EAAO00C,WAAWl/B,UAAUpuC,EAAM08F,IAEnE/kF,EAAW,CACZ,OACA,QACC+kF,EAAYnwF,SAAYixB,GAAoBxX,GAAqBhmB,IAGpE08F,EAAY36C,QAAUA,EAFtB26C,EAAY36C,QAAUj+B,GAAM/T,KAAKgyC,GAI/B26C,EAAYC,UACPD,EAAY36C,QAEZnpB,EAAO+Z,KAAK,aAAc+pD,GAAa36C,OAElD,CAGWgyD,CAAmBn7E,EAAQlkB,EAAMnI,EAAQvM,EAClD,GACF,CAw6Heg0G,CAAmBp7E,EAAQlkB,EAAMnI,EAC1C,EACAqlF,WAAY,SAAU7vC,EAASrtC,GAC7B,OAAO6nF,GAAmB3jE,EAAQmpB,EAASrtC,EAC7C,EACAu/F,cAAe,SAAU30G,EAAO+6F,GAC9B,OAAOD,GAAkBxhE,EAAQt5B,EAAO+6F,EAC1C,EACA6B,UAAW,SAAUjsE,GACnB,OAjHgB,SAAU2I,EAAQ3I,GACxC,IAAIlK,EAAM6S,EAAO7S,IACbG,EAAQ/R,EAAc8b,GAAOA,EAAM2I,EAAOy4B,UAC1Cp9C,EAAY2kB,EAAOs7E,aACrBt7E,EAAOs7E,UAlsQe,SAAUt7E,GAClC,OAAOA,EAAO6hC,SAAS,UAAU,EAAM,UACzC,CAgsQuB05C,CAAoBv7E,IAEzC7gB,EAAOgO,EAAI64B,OAAO,UAAW14B,IAAQ,SAAUkuF,GAC7C,OAAQA,EAAWrsF,UACnB,IAAK,QACH,IAAIk/B,EApsQoB,SAAUruB,GACtC,OAAOA,EAAO6hC,SAAS,qBAAsB,iBAAkB,SACjE,CAksQgB45C,CAAwBz7E,GAC9Bt5B,EAAQymB,EAAIg/B,UAAUqvD,EAAY,UAChC90G,GAAmB,MAAVA,IAAkBs5B,EAAOs7E,UAGtCnuF,EAAIw8B,YAAY6xD,EAAYntD,GAF5BlhC,EAAIs8B,SAAS+xD,EAAYntD,GAI3B,MACF,IAAK,IACH,IAAKlhC,EAAIg/B,UAAUqvD,EAAY,QAAS,CACtC,IAAIE,EAAUvuF,EAAIg/B,UAAUqvD,EAAY,SAAWA,EAAW33G,GAC1D83G,EA5sQmB,SAAU37E,GACvC,OAAOA,EAAO6hC,SAAS,sBAAuB,kBAAmB,SACnE,CA0sQoB+5C,CAAyB57E,GACjC07E,GAAW17E,EAAOs7E,UACpBnuF,EAAIs8B,SAAS+xD,EAAYG,GAEzBxuF,EAAIw8B,YAAY6xD,EAAYG,EAEhC,EAGJ,IACA37E,EAAO+Z,KAAK,YAAa,CACvBjkC,QAASuhB,EACTikF,UAAWt7E,EAAOs7E,WAEtB,CA+EeO,CAAkB77E,EAAQ3I,EACnC,GAEFkhC,UAAW,CACTg5B,WAAY,SAAU59E,EAAQmI,GAC5B,OAAO64F,GAA2B30E,EAAQrsB,EAAQmI,EACpD,GAEF+a,IAAK,CACHilF,SAAU,WACR,OAAOt9F,EAAS1B,MAClB,GAGN,EAiHIi/F,GAAQ,SAAU/7E,GACpB,OAAOxe,GAAMwe,EAAOg8E,QAAS,MAC/B,EAqBIC,GAA6B,SAAUj8E,GACzC,OAAOA,EAAOk8E,YAAcl8E,EAAOk8E,YAAc9D,GAAiBp4E,EACpE,EACIm8E,GAA0B,SAAUn8E,GACtC,IAAIk8E,EAAcl8E,EAAOk8E,YACzB,GAAKA,EAGH,OAAOA,EAFP,MAAM,IAAI9nG,MAAM,kDAIpB,EAqFIm7B,GAAc,SAAU5hB,GAC1B,OAAwB,IAApBA,EAAKR,IAAI1qB,QACXqvB,GAASnE,GACFnP,EAAS1B,QAET0B,EAASJ,KAAKuP,EAEzB,EA4BIyuF,GAAwB,SAAUC,EAAWvyC,EAAWxR,EAAKjhD,GAC/DglG,EAAUt+F,MAAK,SAAUu+F,GAGvB,OAFiBjlG,EAAQ0/E,GAA4BF,IAC1CylB,EAAMnvF,IAAK9V,EAAQilG,EAAMnvF,IAAI1qB,OAAS,GAC1CqnE,EAAUvgE,OAAO+lB,IAAUlmB,KAAI,SAAUyoF,GAC9C,OA3BM,SAAUyqB,EAAOzqB,EAAOv5B,EAAKjhD,GACvC,IAAIklG,EAAWD,EAAMnvF,IACjB4lF,EAAWlhB,EAAM1kE,IACjBqvF,EAAYnlG,EAAQklG,EAAS95G,OAASswG,EAAStwG,OAC/C4U,GACF2/E,GAAeulB,EAAUxJ,GAAU,GAAQ17F,GAC3CihD,EAAIvG,SAASghD,EAAUyJ,KAEvBxlB,GAAe+b,EAAUwJ,GAAU,GAAQllG,GAC3CihD,EAAItG,OAAO+gD,EAAUyJ,GAEzB,CAgBa5a,CAAM0a,EAAOzqB,EAAOv5B,EAAKjhD,EAClC,GACF,IAAGwG,SAAQ,WACT,IAAI4+F,EAnCe,SAAUvvF,EAAM7V,GACrC,OAAO6V,EAAK3jB,QAAO,SAAU8tB,GAC3B,OAAOw/C,GAAgB9H,eAAe13C,EAAIlK,IAC5C,IAAGpP,KAAK1G,EAAQ2Y,GAAcF,GAChC,CA+BwB4sF,CAAiB5yC,EAAWzyD,GAAOuG,GAAGksD,GAAWvgE,OAAO+lB,IAC5E,OAAOmtF,EAAcrzG,KAAI,SAAUyoF,GACjC,OApBwB,SAAUA,EAAOx6E,GAC7CqV,GAAOmlE,GAAO/zE,MAAK,SAAUkO,GAC3B,IAAI2B,EAAOkkE,EAAM1kE,IACb9V,GAASo+E,GAAkBzpE,EAAMyxC,GAAc9vC,EAAM,IACvDkpE,GAAyBlpE,EAAM,IACrBtW,GAASq+E,GAAmB1pE,EAAMyxC,GAAc9vC,EAAMA,EAAKlrB,UACrEs0F,GAA0BppE,EAAMA,EAAKlrB,OAEzC,GACF,CAWak6G,CAAwB9qB,EAAOx6E,EACxC,GACF,GACF,EA0DIulG,GAAwB,SAAUnnC,EAAaznD,EAAUtoB,GAC3D,GAAI+vE,GAAej0D,GAAMi0D,EAAaznD,GAAW,CAC/C,IAAI6uF,EAAer9F,EAASi2D,EAAYznD,IAAW,SAAUnM,GAC3D,OAAOA,IAAOnc,CAChB,IAC4B,IAAxBm3G,EAAap6G,cACRgzE,EAAYznD,GAEnBynD,EAAYznD,GAAY6uF,CAE5B,CACF,EAmEIC,GAAsB,SAAUxkD,GAClC,QAASA,EAAItS,MACf,EACI+2D,GAAkB,SAAU7vF,GAC9B,SAAUA,IAAQA,EAAKwC,gBAAkBhB,GAAWtB,GAAqBF,EAAKwC,eAAgBtC,GAAqBF,GACrH,EAUI8vF,GAAkB,SAAU7vF,EAAK0F,EAAK6hD,EAAY10C,GACpD,IAAIi9E,EACAC,EACAC,EApFN,SAA0BhwF,EAAK6S,GAC7B,IAAIo9E,EACAC,EACAC,EAAmB,SAAUtvF,EAAUmJ,GACzC,OAAOrX,EAAOqX,GAAO,SAAUjK,GAC7B,OAAOC,EAAIhC,GAAG+B,EAAMc,EACtB,GACF,EACI0/B,EAAa,SAAUx/B,GACzB,OAAOf,EAAIugC,WAAWx/B,EAAM,KAAMf,EAAI8+B,UACxC,EACA,MAAO,CACLkxD,0BAA2B,SAAUnvF,EAAUtoB,GA4C7C,OA3CK03G,IACHA,EAAsB,CAAC,EACvBC,EAAmB,CAAC,EACpBr9E,EAAO8pB,GAAG,cAAc,SAAU77C,GAChC,IAAIif,EAAOjf,EAAE6H,QACTq8B,EAAUub,EAAWxgC,GACrBqwF,EAAmB,CAAC,EACxBryF,GAAMpN,KAAKs/F,GAAqB,SAAUjjF,EAAWnM,GACnDsvF,EAAiBtvF,EAAUmkB,GAASr0B,MAAK,SAAUoP,GAC5CmwF,EAAiBrvF,KACpB7O,EAAOgb,GAAW,SAAUz0B,GAC1BA,GAAS,EAAM,CACbwnB,KAAMA,EACNc,SAAUA,EACVmkB,QAASA,GAEb,IACAkrE,EAAiBrvF,GAAYmM,GAE/BojF,EAAiBvvF,GAAYmM,CAC/B,GACF,IACAjP,GAAMpN,KAAKu/F,GAAkB,SAAUljF,EAAWnM,GAC3CuvF,EAAiBvvF,YACbqvF,EAAiBrvF,GACxB9C,GAAMpN,KAAKqc,GAAW,SAAUz0B,GAC9BA,GAAS,EAAO,CACdwnB,KAAMA,EACNc,SAAUA,EACVmkB,QAASA,GAEb,IAEJ,GACF,KAEGirE,EAAoBpvF,KACvBovF,EAAoBpvF,GAAY,IAElCovF,EAAoBpvF,GAAUtjB,KAAKhF,GACnC43G,EAAiBtvF,EAAU0/B,EAAW1tB,EAAOu4B,UAAUwkB,aAAaj/D,MAAK,WACvEu/F,EAAiBrvF,GAAYovF,EAAoBpvF,EACnD,IACO,CACL4rB,OAAQ,WACNgjE,GAAsBQ,EAAqBpvF,EAAUtoB,GACrDk3G,GAAsBS,EAAkBrvF,EAAUtoB,EACpD,EAEJ,EAEJ,CAoBkC83G,CAAgBrwF,EAAK6S,GAAQm9E,0BAgBzDnkB,EAAa,SAAU7vC,EAASrtC,GAClC,OA1Ie,SAAUkkB,EAAQmpB,EAASrtC,QAC/B,IAATA,IACFA,EAAO,CAAC,GAEV,IAAI8nF,EAzBU,SAAU9nF,EAAMqtC,GAC9B,OAAOtmC,GAASA,GAAS,CAAElP,OAAQ,QAAUmI,GAAO,CAClDqnB,KAAK,EACLo1B,WAAW,EACXpP,QAASA,GAEb,CAmBsBs0D,CAAU3hG,EAAMqtC,GAChC26C,EAAcF,EAClB,IAAKA,EAAcG,UAAW,CAC5B,IAAI2Z,EAAY19E,EAAO+Z,KAAK,mBAAoB6pD,GAChD,GAAI8Z,EAAUzmE,qBAEZ,YADAjX,EAAO+Z,KAAK,aAAc2jE,GAG1B5Z,EAAc4Z,CAElB,CACA5Z,EAAY36C,QA7BK,SAAUnpB,EAAQlkB,GACnC,GAAoB,QAAhBA,EAAKnI,OAAkB,CACzB,IAAI2kD,EAAMt4B,EAAOu4B,UAAUC,SACvBmlD,EAAe39E,EAAO7S,IAAIoiC,UAAU+I,EAAImnC,wBAAyBz/D,EAAO7S,IAAI4hC,SAC5E6uD,EAAcD,EAAe,CAAE3gE,QAAS2gE,EAAaxuF,SAAS7lB,eAAkB,CAAC,EACjF4jB,EAAO8S,EAAO2hE,OAAO3tD,MAAMl4B,EAAKqtC,QAAStmC,GAASA,GAAS,CAC7D+hF,eAAe,EACfmL,mBAAmB,GAClB6N,GAAc9hG,IACjB,OAAO01E,GAAe,CAAE9C,SAAU1uD,EAAO0uD,UAAY1uD,EAAOwL,QAAQgK,UAAUtoB,EAChF,CACE,OAAOpR,EAAKqtC,OAEhB,CAgBwB00D,CAAa79E,EAAQ8jE,GAC3C,IAAIxrC,EAAMt4B,EAAOu4B,UAAUC,UAhDT,SAAUF,EAAKc,GACjC,IAAI9oC,EAAa9R,EAASC,KAAK26C,EAAS9oC,YAAYlnB,IAAIgkB,IACpDmD,EAAY/R,EAASC,KAAK26C,EAAS7oC,WAAWnnB,IAAIgkB,IACtDkrC,EAAI2kC,iBACJ3kC,EAAIwG,WAAW1F,GACf,IAAI0kD,EAAWxtF,EAAWvS,KAAK+R,IAAavmB,OAAO+lB,IAAUvR,KAAKwxB,IAC9DwuE,EAAWxtF,EAAUxS,KAAKiS,IAAazmB,OAAO+lB,IAAUvR,KAAKwxB,IACjE6sE,GAAsB0B,EAAUxtF,EAAYgoC,GAAK,GACjD8jD,GAAsB2B,EAAUxtF,EAAW+nC,GAAK,GAChDA,EAAIgC,UAAS,EACf,CAuCE0jD,CAAc1lD,EAAKA,EAAI2lD,yBAAyBna,EAAY36C,UAC5DnpB,EAAOu4B,UAAU2U,OAAO5U,GACxB8qB,GAAoBpjD,EAAQs4B,GACvBwrC,EAAYC,WACf/jE,EAAO+Z,KAAK,aAAc+pD,EAE9B,CAmHWoa,CAAal+E,EAAQmpB,EAASrtC,EACvC,EA2BIw+C,EAAW,SAAUC,GACvB,IAAIjC,EAAM6lD,IACV7lD,EAAIgC,WAAWC,GACf2S,EAAO5U,EACT,EACIuZ,EAAS,WACX,OAAOh/C,EAAItI,aAAesI,EAAItI,eAAiBsI,EAAI3uB,SAASq0D,SAC9D,EACI4lD,EAAW,WACb,IAAI5lD,EAAWD,EAAKjhC,EAChB+mF,EAA2B,SAAUC,EAAKC,EAAaC,GACzD,IACE,OAAOD,EAAYE,sBAAsBH,EAAKE,EAChD,CAAE,MAAOrlF,GACP,OAAQ,CACV,CACF,EACIjI,EAAM4B,EAAI3uB,SACd,QAAwB5B,IAApB09B,EAAO4gC,WAA+C,IAArB5c,GAAShkB,GAAmB,CAC/D,IAAI4gC,EAAWpI,GAAOx4B,GACtB,GAAI4gC,EAASxjD,SACX,OAAOwjD,EAASx3D,KAAI,SAAU8V,GAC5B,OAAO+nE,GAAcjnD,EAAQ,CAAC9gB,IAAI,EACpC,IAAG5B,MAAM2T,EAAIy9B,cAEjB,CACA,KACO6J,EAAYsZ,OAAc39C,GAAiBqkC,EAAUkmD,cAEtDnmD,EADEC,EAAU+Y,WAAa,EACnB/Y,EAAUgZ,WAAW,GAErBhZ,EAAU7J,YAAc6J,EAAU7J,cAAgBz9B,EAAIy9B,cAE9D4J,EAAM2uB,GAAcjnD,EAAQ,CAACs4B,IAAM,GAEvC,CAAE,MAAOp/B,GACT,CAiBA,OAhBKo/B,IACHA,EAAMrnC,EAAIy9B,YAAcz9B,EAAIy9B,cAAgBz9B,EAAI7pB,KAAKy2E,mBAEnDvlB,EAAIvG,UAA4C,IAAhCuG,EAAIjyB,eAAepY,UAAkBqqC,EAAI8I,YAC3D/pC,EAAMlK,EAAI8+B,UACVqM,EAAIvG,SAAS16B,EAAK,GAClBihC,EAAItG,OAAO36B,EAAK,IAEd4lF,GAAiBC,IACsD,IAArEkB,EAAyB9lD,EAAIomD,eAAgBpmD,EAAK2kD,IAAyF,IAAjEmB,EAAyB9lD,EAAIqmD,WAAYrmD,EAAK2kD,GAC1H3kD,EAAM4kD,GAEND,EAAgB,KAChBC,EAAgB,OAGb5kD,CACT,EACI4U,EAAS,SAAU5U,EAAKnV,GAC1B,IAAIj2B,EACJ,GAlHe,SAAUorC,GAC3B,QAAKA,MAEMwkD,GAAoBxkD,IAGtBykD,GAAgBzkD,EAAIjyB,iBAAmB02E,GAAgBzkD,EAAIhG,cAEtE,CA0GSssD,CAAatmD,GAAlB,CAGA,IAAIumD,EAAU/B,GAAoBxkD,GAAOA,EAAM,KAC/C,GAAIumD,EAAJ,CACE3B,EAAgB,KAChB,IACE2B,EAAQ74D,QACV,CAAE,MAAO9sB,GACT,CAEF,KAPA,CAQA,IAAIq5C,EAAMV,IAMV,GADAvZ,EAJUt4B,EAAO+Z,KAAK,oBAAqB,CACzCzvB,MAAOguC,EACPnV,QAASA,IAED74B,MACNioD,EAAK,CACP2qC,EAAgB5kD,EAChB,IACEia,EAAIusC,kBACJvsC,EAAIwsC,SAASzmD,EACf,CAAE,MAAOp/B,GACT,EACgB,IAAZiqB,GAAqBovB,EAAI5mD,SAC3B4mD,EAAIjY,SAAShC,EAAIhG,aAAcgG,EAAI/F,WACnCggB,EAAI5mD,OAAO2sC,EAAIjyB,eAAgBiyB,EAAIjG,cAErC4qD,EAAgB1qC,EAAIjB,WAAa,EAAIiB,EAAIhB,WAAW,GAAK,IAC3D,CACKjZ,EAAI8I,WAAa9I,EAAIjyB,iBAAmBiyB,EAAIhG,eAAgBigB,EAAIysC,kBAAqBl1F,GAAIC,IACxFuuC,EAAI/F,UAAY+F,EAAIjG,YAAc,GAChCiG,EAAIjyB,eAAe7Y,kBACrBN,EAAOorC,EAAIjyB,eAAe5Y,WAAW6qC,EAAIjG,eACZ,QAAjBnlC,EAAKpf,UACfykE,EAAIysC,iBAAiB1mD,EAAIjyB,eAAgBiyB,EAAIjG,YAAaiG,EAAIhG,aAAcgG,EAAI/F,WAC5EggB,EAAIksC,aAAenmD,EAAIjyB,gBAAkBksC,EAAI0sC,YAAc3mD,EAAIhG,cACjEigB,EAAIysC,iBAAiB9xF,EAAM,EAAGA,EAAM,IAM9C8S,EAAO+Z,KAAK,yBAA0B,CACpCzvB,MAAOguC,EACPnV,QAASA,GAnCX,CATA,CA8CF,EAWI+7D,EAAY,WACd,IAAI3sC,EAAMV,IACN4sC,EAAalsC,aAAiC,EAASA,EAAIksC,WAC3DQ,EAAY1sC,aAAiC,EAASA,EAAI0sC,UAC9D,IAAK1sC,IAAQksC,IAAeQ,GAAa/qF,GAAiBuqF,IAAevqF,GAAiB+qF,GACxF,OAAO,EAET,IAAIE,EAAchyF,EAAIshC,YACtB0wD,EAAYptD,SAAS0sD,EAAYlsC,EAAI6sC,cACrCD,EAAY7kD,UAAS,GACrB,IAAI+kD,EAAalyF,EAAIshC,YAGrB,OAFA4wD,EAAWttD,SAASktD,EAAW1sC,EAAI+sC,aACnCD,EAAW/kD,UAAS,GACb6kD,EAAYX,sBAAsBW,EAAYT,eAAgBW,IAAe,CACtF,EA+CItmG,EAAU,CACZwmG,gBAAiB,KACjBC,iBAAkB,KAClBryF,IAAKA,EACL0F,IAAKA,EACL6hD,WAAYA,EACZ10C,OAAQA,EACRs6B,SAAUA,EACV2+B,kBArOsB,SAAU/rE,EAAMuY,GACtC,IAAI6yB,EAAMnrC,EAAIshC,YACVlzC,EAAc2R,IAAS3R,EAAckqB,IACvC6yB,EAAIvG,SAAS7kC,EAAMuY,GACnB6yB,EAAItG,OAAO9kC,EAAMuY,GACjBynC,EAAO5U,GACPgC,GAAS,KAET+X,GAAallD,EAAKmrC,EAAKt4B,EAAOy4B,WAAW,GACzCyU,EAAO5U,GAEX,EA2NEi5B,WA1Ne,SAAUz1E,GACzB,OAhOe,SAAUkkB,EAAQlkB,GAKnC,YAJa,IAATA,IACFA,EAAO,CAAC,GATa,SAAUkkB,EAAQrsB,EAAQmI,GACjD,OAAOqgG,GAAwBn8E,GAAQu4B,UAAUg5B,WAAW59E,EAAQmI,EACtE,CAUS2jG,CAAmBz/E,EADblkB,EAAKnI,OAASmI,EAAKnI,OAAS,OACCmI,EAC5C,CA0NW4jG,CAAa1/E,EAAQlkB,EAC9B,EAyNEk9E,WAAYA,EACZliB,YAhNgB,SAAU1qE,EAAMm/C,GAChC,OAAOg0D,EAAgBzoC,YAAY1qE,EAAMm/C,EAC3C,EA+MEiW,eA9MmB,SAAUZ,GAC7B,OAAO2+C,EAAgB/9C,eAAeZ,EACxC,EA6ME5a,OA5Ma,SAAU94B,EAAMi8B,GAE7B,OAz/KS,SAAUh8B,EAAKD,EAAMi8B,GAChC,OAAO3qC,EAASC,KAAKyO,GAAM9jB,KAAI,SAAU8jB,GACvC,IAAIs2B,EAAMr2B,EAAIk2B,UAAUn2B,GACpBorC,EAAMnrC,EAAIshC,YAOd,OANA6J,EAAIvG,SAAS7kC,EAAK5hB,WAAYk4C,GAC9B8U,EAAItG,OAAO9kC,EAAK5hB,WAAYk4C,EAAM,GAC9B2F,IACFkpB,GAAallD,EAAKmrC,EAAKprC,GAAM,GAC7BmlD,GAAallD,EAAKmrC,EAAKprC,GAAM,IAExBorC,CACT,GACF,CA4+KItS,CAAO74B,EAAKD,EAAMi8B,GAASrrC,KAAKovD,GACzBhgD,CACT,EA0ME2zC,YAzMgB,WAChB,IAAIvI,EAAM6lD,IAAY5rC,EAAMV,IAC5B,SAAKvZ,GAAOA,EAAIp2C,QAGZo2C,EAAIqnD,iBAC6C,IAA5CrnD,EAAIqnD,iBAAiB,aAAcrnD,IAEpCia,GAAOja,EAAI8I,UACrB,EAiME89C,UAAWA,EACXU,QAvFY,SAAUvoF,GAEtB,OADA2hE,EAAW7rE,EAAI0jC,aAAax5B,IACrBA,CACT,EAqFE6mC,QApFc,WACd,OAlrLU,SAAUlyC,EAAMssC,GAC5B,IAAIjhC,EAAKgP,EAAgBisB,EACzB,IAAKgG,EACH,OAAOtsC,EAETqa,EAAiBiyB,EAAIjyB,eACrBisB,EAAegG,EAAIhG,aACnB,IAAID,EAAciG,EAAIjG,YAClBE,EAAY+F,EAAI/F,UAEpB,OADAl7B,EAAMihC,EAAImnC,yBACLnnC,EAAI8I,YACH/6B,IAAmBisB,GACjBC,EAAYF,EAAc,GACxBhsB,EAAe7Y,kBACjB6J,EAAMgP,EAAe5Y,WAAW4kC,IAIN,IAA5BhsB,EAAepY,UAA4C,IAA1BqkC,EAAarkC,WAE9CoY,EADEA,EAAe5jC,SAAW4vD,EACX00B,GAAmB1gD,EAAerW,aAAa,GAE/CqW,EAAe/6B,WAGhCgnD,EADgB,IAAdC,EACaw0B,GAAmBz0B,EAAaviC,iBAAiB,GAEjDuiC,EAAahnD,WAE1B+6B,GAAkBA,IAAmBisB,IAChCjsB,EAIThP,GAAwB,IAAjBA,EAAIpJ,SACNoJ,EAAI/rB,WAEN+rB,CACT,CA4oLW6mC,CAAQl+B,EAAOy4B,UAAW0lD,IACnC,EAmFEtsC,OAAQA,EACR3E,OAAQA,EACR1U,OAAQ2lD,EACRphC,SAhOe,SAAU+J,GACzB,OAAO/J,GAAS/8C,EAAOy4B,UAAW0lD,IAAYr3B,EAChD,EA+NE9J,OA9Na,SAAU8J,GACvB,OAAO9J,GAAOh9C,EAAOy4B,UAAW0lD,IAAYr3B,EAC9C,EA6NEyiB,kBAvFwB,SAAUlL,EAAUwhB,GAC5C,OA9oLoB,SAAU1yF,EAAKmrC,EAAK+lC,EAAUwhB,GACpD,IAAI3yF,EACA4yF,EAAiB,GACjB9zF,EAAOmB,EAAI8+B,UAMf,GALAoyC,EAAWlxE,EAAIoiC,UAAU8uC,GAAYthB,GAAS/wD,EAAMssC,EAAKA,EAAI8I,WAAYj0C,EAAI4hC,SAC7E8wD,EAAS1yF,EAAIoiC,UAAUswD,GAAU7iC,GAAOhxD,EAAMssC,EAAKA,EAAI8I,WAAYj0C,EAAI4hC,SACnEsvC,GAAYA,IAAaryE,GAC3B8zF,EAAep1G,KAAK2zF,GAElBA,GAAYwhB,GAAUxhB,IAAawhB,EAAQ,CAC7C3yF,EAAOmxE,EAEP,IADA,IAAIp2D,EAAS,IAAI5E,GAAcg7D,EAAUryE,IACjCkB,EAAO+a,EAAOj1B,SAAWka,IAAS2yF,GACpC1yF,EAAI4hC,QAAQ7hC,IACd4yF,EAAep1G,KAAKwiB,EAG1B,CAIA,OAHI2yF,GAAUxhB,IAAawhB,GAAUA,IAAW7zF,GAC9C8zF,EAAep1G,KAAKm1G,GAEfC,CACT,CAwnLWvW,CAAkBp8E,EAAKgxF,IAAY9f,EAAUwhB,EACtD,EAsFEngC,UAtEc,WACd,IAAIpnB,EAAM6lD,IACN5rC,EAAMV,IACV,KA7gPKT,GA6gPkBmB,GA7gPG9vE,OAAS,IA6gPJ6vE,GAAatyC,GAAS,CACnD,IAAIw/C,EAAUD,GAAYpyD,EAAKmrC,GAI/B,OAHAknB,EAAQ1hE,MAAK,SAAU0hE,GACrBtS,EAAOsS,EAAS0/B,IAClB,IACO1/B,EAAQliE,MAAMg7C,EACvB,CACA,OAAOA,CACT,EA4DEynD,gBA3DoB,SAAU/xF,EAAUtoB,GAExC,OADAy3G,EAA0BnvF,EAAUtoB,GAC7BqT,CACT,EAyDEokG,0BAA2BA,EAC3B6C,mBAzDuB,WAGvB,IAFA,IAAIC,EACA/yF,EAAOC,EAAI8+B,UACR/+B,GAA0B,SAAlBA,EAAKiC,UAAqB,CACvC,GAAIjC,EAAKwuD,aAAexuD,EAAK0G,aAAc,CACzCqsF,EAAkB/yF,EAClB,KACF,CACAA,EAAOA,EAAK5hB,UACd,CACA,OAAO20G,CACT,EA+CE/sF,eA9CmB,SAAUmE,EAAKrE,GAC9BzX,EAAc8b,GAtrMM,SAAU2I,EAAQlqB,EAASkd,IACtCgN,EAAOyQ,OAASwyC,GAAoBE,IAC1CnjD,EAAQlqB,EAASkd,EAC5B,CAorMMktF,CAAsBlgF,EAAQ3I,EAAKrE,GAEnCowD,GAAoBpjD,EAAQm+E,IAAYnrF,EAE5C,EAyCEmtF,aAxCiB,SAAUnoE,EAASK,GACpC,OAAO60B,EAAOsQ,GAAUxlC,EAASK,EAASrY,EAAO6zC,UACnD,EAuCE9iE,sBAtC0B,WAC1B,IAAIunD,EAAM6lD,IACV,OAAO7lD,EAAI8I,UAAY3D,GAAcU,eAAe7F,GAAKqE,iBAAiB,GAAKrE,EAAIvnD,uBACrF,EAoCEmpC,QAnCY,WACZrnB,EAAMoqF,EAAgBC,EAAgB,KACtCsC,EAAiBtlE,SACnB,GAkCIqlE,EAAkB1oC,GAAgB99D,GAClCymG,EAAmB9mC,GAAiB3/D,EAASinB,GAGjD,OAFAjnB,EAAQwmG,gBAAkBA,EAC1BxmG,EAAQymG,iBAAmBA,EACpBzmG,CACT,EA2CIqnG,GAAa,SAAUC,EAAW9/E,GACpC,IAAIqL,EAAS4H,KACTjT,EAAS+/E,wBAtCY,SAAUD,EAAWz0E,EAAQ20E,GACtDF,EAAU1rC,cAAc,QAAQ,SAAUx9C,GACxChY,EAAOgY,GAAO,SAAUjK,GACtB,IAAIhqB,EAAQ0oC,EAAOoI,MAAM9mB,EAAK2c,KAAK,UAC/BkK,EAAQ7mB,EAAK2c,KAAK,SAClB22E,EAAOtzF,EAAK2c,KAAK,QACjBylB,EAAOpiC,EAAK2c,KAAK,QACjBkK,IACF7wC,EAAM6wC,MAAQA,GAEZysE,IACFt9G,EAAM,eAAiBs9G,GAErBlxD,IACFpsD,EAAM,aAAeq9G,EAAUrpG,SAASgW,EAAK2c,KAAK,QAAS,IAAM,IAEnE3c,EAAKvqB,KAAO,OACZuqB,EAAK2c,KAAK,QAAS+B,EAAO4J,UAAUtyC,IAtBxB,SAAUgqB,EAAMoH,GAChCnV,EAsBsB,CAChB,QACA,OACA,SAzBQ,SAAUxc,GACtBuqB,EAAK2c,KAAKlnC,EAAM,KAClB,GACF,CAmBM89G,CAAYvzF,EAKd,GACF,GACF,CAcIwzF,CAAqBL,EAAWz0E,EAAQ1gB,GAAM2B,QAAQ0T,EAASogF,0BAbvC,SAAUN,EAAWz0E,GAC/Cy0E,EAAU1rC,cAAc,UAAU,SAAUx9C,GAC1ChY,EAAOgY,GAAO,SAAUjK,GACtB,IAAIhqB,EAAQ0oC,EAAOoI,MAAM9mB,EAAK2c,KAAK,UACnC3mC,EAAM,mBAAqB,eAC3BgqB,EAAKvqB,KAAO,OACZuqB,EAAK2c,KAAK,QAAS+B,EAAO4J,UAAUtyC,GACtC,GACF,GACF,CAME09G,CAAsBP,EAAWz0E,EACnC,EA8BIu9C,GAAe,SAAUC,GAC3B,IAAIh9E,EACAy0G,EAAWv3B,mBAAmBF,GAAK79D,MAAM,KACzCxD,EAAU,eAAesE,KAAKw0F,EAAS,IAI3C,OAHI94F,IACF3b,EAAO2b,EAAQ,IAEV,CACL3b,KAAMA,EACN8tB,KAAM2mF,EAAS,GAEnB,EACIC,GAAY,SAAU10G,EAAM8tB,GAC9B,IAAIvV,EACJ,IACEA,EAAMo8F,KAAK7mF,EACb,CAAE,MAAOjsB,GACP,OAAOuQ,EAAS1B,MAClB,CAEA,IADA,IAAI6D,EAAM,IAAIqgG,WAAWr8F,EAAIliB,QACpBD,EAAI,EAAGA,EAAIme,EAAIle,OAAQD,IAC9Bme,EAAIne,GAAKmiB,EAAIolB,WAAWvnC,GAE1B,OAAOgc,EAASJ,KAAK,IAAI6iG,KAAK,CAACtgG,GAAM,CAAEvU,KAAMA,IAC/C,EASI80G,GAAY,SAAUl0F,GACxB,OAA6B,IAAzBA,EAAIxjB,QAAQ,SAzDE,SAAUwjB,GAC5B,OAAO,IAAImS,IAAW,SAAU13B,EAASC,GACvC,IAAIy5G,EAAkB,WACpBz5G,EAAO,kBAAoBslB,EAAM,yDACnC,EACA,IACE,IAAIo0F,EAAQ,IAAIC,eAChBD,EAAME,KAAK,MAAOt0F,GAAK,GACvBo0F,EAAMG,aAAe,OACrBH,EAAM9oG,OAAS,WACQ,MAAjB8oG,EAAM//E,OACR55B,EAAQ25G,EAAMI,UAEdL,GAEJ,EACAC,EAAM7oG,QAAU4oG,EAChBC,EAAMK,MACR,CAAE,MAAOvoF,GACPioF,GACF,CACF,GACF,CAoCWO,CAAc10F,GAEM,IAAzBA,EAAIxjB,QAAQ,UAZY4/E,EAaLp8D,EAZhB,IAAImS,IAAW,SAAU13B,GAC9B,IAAI8gB,EAAK4gE,GAAaC,GAAMh9E,EAAOmc,EAAGnc,KAAM8tB,EAAO3R,EAAG2R,KACtD4mF,GAAU10G,EAAM8tB,GAAMjd,MAAK,WACzB,OAAOxV,EAAQ,IAAIw5G,KAAK,IAC1B,GAAGx5G,EACL,KASO,KAfW,IAAU2hF,CAgB9B,EAWIu4B,GAAU,EACV/wD,GAAW,SAAU/rC,GACvB,OAAQA,GAAU,UAAY88F,IAChC,EAmDIC,GAAe,SAAUC,EAAcC,GACzC,IAAIC,EAAiB,CAAC,EAuDtB,MAAO,CAAEnrC,QAtDK,SAAUv/C,EAAK1U,GACtBA,IACHA,EAAY9F,GAEd,IAAImlG,EAASxiG,EATE,SAAU6X,GAC3B,OAAOA,EAAM5Y,GAAK4Y,EAAI8O,qBAAqB,QAAU,EACvD,CAO0B87E,CAAa5qF,IAAM,SAAUwlD,GACjD,IAAIpkE,EAAMokE,EAAIpkE,IACd,QAAKqR,GAAIJ,UAGLmzD,EAAI5xE,aAAa,oBAGjB4xE,EAAI5xE,aAAa,4BAGhBwN,GAAOA,IAAQqR,GAAIM,kBAGK,IAAzB3R,EAAIjP,QAAQ,UACNq4G,EAAaK,WAAWzpG,IAAQkK,EAAUk6D,GAEvB,IAAzBpkE,EAAIjP,QAAQ,UACPmZ,EAAUk6D,GAGrB,IACIslC,EAAWljG,EAAM+iG,GAAQ,SAAUnlC,GACrC,QAAgCv6E,IAA5By/G,EAAellC,EAAIpkE,KACrB,OAAO,IAAI0mB,IAAW,SAAU13B,GAC9Bs6G,EAAellC,EAAIpkE,KAAKmgB,MAAK,SAAUwpF,GACrC,GAAyB,iBAAdA,EACT,OAAOA,EAET36G,EAAQ,CACN46G,MAAOxlC,EACPylC,SAAUF,EAAUE,UAExB,GACF,IAEF,IAAIC,EAAa,IAAIpjF,IAAW,SAAU13B,EAASC,IA5FnC,SAAUo6G,EAAWjlC,EAAKp1E,EAASC,GACvD,IAAI86G,EAAQF,EACZ,GAAiC,IAA7BzlC,EAAIpkE,IAAIjP,QAAQ,SAApB,CAwBA,IAAI+e,EAAK4gE,GAAatM,EAAIpkE,KAAMyhB,EAAO3R,EAAG2R,KAAM9tB,EAAOmc,EAAGnc,KAC1Do2G,EAAStoF,GACTooF,EAAWR,EAAUW,UAAUD,EAAQp2G,IAErC3E,EAAQ,CACN46G,MAAOxlC,EACPylC,SAAUA,IAGZpB,GAAUrkC,EAAIpkE,KAAKmgB,MAAK,SAAU8pF,GAChCJ,EAAWR,EAAU/1F,OAAO6kC,KAAY8xD,EAAMF,GAC9CV,EAAUx6G,IAAIg7G,GACd76G,EAAQ,CACN46G,MAAOxlC,EACPylC,SAAUA,GAEd,IAAG,SAAU9oF,GACX9xB,EAAO8xB,EACT,GAnBF,MAtBE8oF,EAAWR,EAAUa,SAAS9lC,EAAIpkE,MAEhChR,EAAQ,CACN46G,MAAOxlC,EACPylC,SAAUA,IAGZpB,GAAUrkC,EAAIpkE,KAAKmgB,MAAK,SAAU8pF,IAxBpB,SAAUA,GAC5B,OAAO,IAAIvjF,IAAW,SAAU13B,GAC9B,IAAIm7G,EAAS,IAAIC,WACjBD,EAAOE,UAAY,WACjBr7G,EAAQm7G,EAAOtlF,OACjB,EACAslF,EAAOG,cAAcL,EACvB,GACF,EAiBQM,CAAcN,GAAM9pF,MAAK,SAAUqqF,GACjCT,EAASr5B,GAAa85B,GAAS/oF,KAC/BooF,EAAWR,EAAU/1F,OAAO6kC,KAAY8xD,EAAMF,GAC9CV,EAAUx6G,IAAIg7G,GACd76G,EAAQ,CACN46G,MAAOxlC,EACPylC,SAAUA,GAEd,GACF,IAAG,SAAU9oF,GACX9xB,EAAO8xB,EACT,GAwBN,CA+CQ0pF,CAAgBpB,EAAWjlC,EAAKp1E,EAASC,EAC3C,IAAGkxB,MAAK,SAAU0E,GAEhB,cADOykF,EAAezkF,EAAO+kF,MAAM5pG,KAC5B6kB,CACT,IAAG6lF,OAAM,SAAUtnF,GAEjB,cADOkmF,EAAellC,EAAIpkE,KACnBojB,CACT,IAEA,OADAkmF,EAAellC,EAAIpkE,KAAO8pG,EACnBA,CACT,IACA,OAAOpjF,GAAWl3B,IAAIk6G,EACxB,EAEF,EAEIiB,GAAgB,SAAU7iF,EAAUzkB,EAAMunG,EAAen2F,IACzCqT,EAAS+iF,oBAAsBxnG,EAAKwrE,SACnC+7B,EAAcn2F,EAAKvqB,MACpCuqB,EAAKyE,QAAQF,OAAO,IAAI41D,GAAQ,KAAM,IAAIK,YAAa,EAEvDx6D,EAAKyE,QAAQF,OAAO,IAAI41D,GAAQ,QAAS,IAAI3gF,MAAQm+B,EAEzD,EAII0+E,GAAe,SAAUr2F,EAAMvqB,GACjC,OAAOuqB,GAAQA,EAAKoD,YAAcpD,EAAKoD,aAAepD,EAAKqD,WAAarD,EAAKoD,WAAW3tB,OAASA,CACnG,EAKI8uD,GAAU,SAAUjmB,EAAQq0D,EAAkB2jB,EAAoBt2F,GACpE,OAAOA,EAAKukC,QAAQouC,EAAkB2jB,GAAoB,SAAUt2F,GAClE,OANW,SAAUse,EAAQte,GAC/B,IAAIsjB,EAAOhF,EAAOwF,eAAe9jB,EAAKvqB,MACtC,OAAO6tC,GAAQA,EAAKlB,SACtB,CAGWm0E,CAASj4E,EAAQte,EAC1B,GACF,EA8MI9B,GAAUF,GAAME,QAASs4F,GAASx4F,GAAMpN,KAAM6lG,GAAYz4F,GAAM2B,QAAS+2F,GAAW14F,GAAMS,OAC1Fk4F,GAAY,SAAUtjF,EAAUiL,QACnB,IAAXA,IACFA,EAASK,MAEX,IAAIm4D,EAAc,CAAC,EACfC,EAAmB,GACnB6f,EAAe,CAAC,EAChBC,EAAoB,CAAC,GACzBxjF,EAAWA,GAAY,CAAC,GACfmuD,WAAW,aAAcnuD,IAAWA,EAASmuD,SACtDnuD,EAASyjF,UAAYzjF,EAASyjF,WAAa,OAC3C,IAuGIC,EAAa,SAAU/2F,GACzB,IAAIvqB,EAAOuqB,EAAKvqB,KACZA,KAAQqhG,KACNkgB,EAAOJ,EAAanhH,IAEtBuhH,EAAKx5G,KAAKwiB,GAEV42F,EAAanhH,GAAQ,CAACuqB,IAI1B,IADA,IAAI1qB,EAAIyhG,EAAiBxhG,OAClBD,KAAK,CACV,IAEM0hH,EAFFrvF,EAAWovE,EAAiBzhG,GAAGG,KAC/BkyB,KAAY3H,EAAKwf,WAAWtjC,OAC1B86G,EAAOH,EAAkBlvF,IAE3BqvF,EAAKx5G,KAAKwiB,GAEV62F,EAAkBlvF,GAAY,CAAC3H,GAGrC,CACA,OAAOA,CACT,EA+VInU,EAAU,CACZyyB,OAAQA,EACR24E,mBA3UuB,SAAUxhH,EAAM+C,GACvCg+G,GAAOC,GAAUhhH,IAAO,SAAUA,GAChC,IAAIH,EACJ,IAAKA,EAAI,EAAGA,EAAIyhG,EAAiBxhG,OAAQD,IACvC,GAAIyhG,EAAiBzhG,GAAGG,OAASA,EAE/B,YADAshG,EAAiBzhG,GAAG23B,UAAUzvB,KAAKhF,GAIvCu+F,EAAiBv5F,KAAK,CACpB/H,KAAMA,EACNw3B,UAAW,CAACz0B,IAEhB,GACF,EA8TEy+F,oBA7TwB,WACxB,MAAO,GAAGx4F,OAAOs4F,EACnB,EA4TEtvB,cAlWkB,SAAUhyE,EAAM+C,GAClCg+G,GAAOC,GAAUhhH,IAAO,SAAUA,GAChC,IAAIuhH,EAAOlgB,EAAYrhG,GAClBuhH,IACHlgB,EAAYrhG,GAAQuhH,EAAO,IAE7BA,EAAKx5G,KAAKhF,EACZ,GACF,EA2VEw+F,eA1VmB,WACnB,IAAIjiF,EAAM,GACV,IAAK,IAAI6J,KAAUk4E,EACbxiF,GAAMwiF,EAAal4E,IACrB7J,EAAIvX,KAAK,CACP/H,KAAMmpB,EACNqO,UAAW6pE,EAAYl4E,KAI7B,OAAO7J,CACT,EAgVEgiG,WAAYA,EACZjwE,MA9TU,SAAU3mB,EAAMvR,GAC1B,IAAIqb,EAAO30B,EAAGsf,EAAGsiG,EAAIC,EAAIH,EAAMvhH,EAE3BuqB,EADAo3F,EAAkB,GAWtBxoG,EAAOA,GAAQ,CAAC,EAChBgoG,EAAe,CAAC,EAChBC,EAAoB,CAAC,EACrB,IAAIV,EAAgBO,GAASx4F,GAAQ,gDAAiDogB,EAAOkH,oBACzF6xE,EAAwBh5E,GAAyBC,GACjDq0D,EAAmBr0D,EAAOsH,sBAC1B3iB,EAAWqb,EAAOrb,SAClBu+D,EAAWnuD,EAASmuD,SAEpB81B,EAlBmB,SAAU7hH,GAC/B,OAAa,IAATA,EACK,IACW,IAATA,EACF,IAEAA,CAEX,CAUoB8hH,CADM,sBAAuB3oG,EAAOA,EAAKi0F,kBAAoBxvE,EAASwvE,mBAEtF2U,EAAqBl5E,EAAOwH,wBAC5B2xE,EAAwB,cACxBC,EAAsB,cACtBC,EAAsB,cACtBC,EAAwB,eACxBC,EAAiCvjG,GAAMkjG,EAAoB5oG,EAAKkhC,UAAYx7B,GAAMkjG,EAAoBnkF,EAASyjF,WAqC/GgB,EAAa,SAAUriH,EAAMyJ,GAC/B,IACI83G,EADAh3F,EAAO,IAAIm6D,GAAQ1kF,EAAMyJ,GAU7B,OARIzJ,KAAQqhG,KACVkgB,EAAOJ,EAAanhH,IAElBuhH,EAAKx5G,KAAKwiB,GAEV42F,EAAanhH,GAAQ,CAACuqB,IAGnBA,CACT,EACI+3F,EAAyB,SAAU/3F,GAErC,IADA,IAAIm2F,EAAgB73E,EAAOkH,mBAClBgzB,EAAWx4C,EAAKsW,KAAMkiC,GAA8B,IAAlBA,EAASt5D,MAAa,CAC/D,IAAI84G,EAAUx/C,EAASh/D,MAAMwJ,QAAQ00G,EAAqB,IAC1D,GAAIM,EAAQziH,OAAS,EAEnB,YADAijE,EAASh/D,MAAQw+G,GAGnB,IAAIC,EAAez/C,EAAS1yD,KAC5B,GAAImyG,EAAc,CAChB,GAA0B,IAAtBA,EAAa/4G,MAAc+4G,EAAaz+G,MAAMjE,OAAQ,CACxDijE,EAAWA,EAASliC,KACpB,QACF,CACA,IAAK6/E,EAAc8B,EAAaxiH,OAA+B,WAAtBwiH,EAAaxiH,MAA2C,UAAtBwiH,EAAaxiH,KAAkB,CACxG+iE,EAAWA,EAASliC,KACpB,QACF,CACF,CACA,IAAIO,EAAU2hC,EAASliC,KACvBkiC,EAASp1D,SACTo1D,EAAW3hC,CACb,CACF,EAqBI49D,EAASjV,GAAU,CACrBgC,SAAUA,EACVxqF,SAAUq8B,EAASr8B,SACnBwlF,qBAAsBnpD,EAASmpD,qBAC/Br0C,oBAAqB9U,EAAS8U,oBAC9BF,kBAAmB5U,EAAS4U,kBAC5B+4C,2BAA4B3tD,EAAS2tD,2BACrCqB,eAAgBhvD,EAASgvD,eACzBP,sBA5B0B,SAAUprF,GACpC,IAAIymF,EAAS,CAAC,EACd,IAAK,IAAIia,KAAU1gG,EACF,OAAX0gG,GAA8B,MAAXA,IACrBja,EAAOia,GAAU1gG,EAAM0gG,IAG3B,OAAOja,CACT,CAoByB+6B,CAAsB55E,EAAOqH,0BACpDg6C,MAAO,SAAUl/D,GACfT,EAAKuE,OAAOuzF,EAAW,SAAU,IAAIt+G,MAAQinB,CAC/C,EACAA,KAAM,SAAUA,EAAMkJ,GACpB,IAAI6uC,EACCq/C,IACHp3F,EAAOA,EAAKzd,QAAQ20G,EAAqB,KAxgB7B,SAAU33F,EAAMm2F,GACpC,OAAOn2F,IAAS1L,GAAM6hG,EAAen2F,EAAKvqB,OAAuB,OAAduqB,EAAKvqB,KAC1D,CAugBc0iH,CAAgBn4F,EAAKqD,UAAW8yF,KAClC11F,EAAOA,EAAKzd,QAAQy0G,EAAuB,MAG3B,IAAhBh3F,EAAKlrB,UACPijE,EAAWs/C,EAAW,QAAS,IACtBnuF,MAAQA,EACjB3J,EAAKuE,OAAOi0C,GAAUh/D,MAAQinB,EAElC,EACAi/D,QAAS,SAAUj/D,GACjBT,EAAKuE,OAAOuzF,EAAW,WAAY,IAAIt+G,MAAQinB,CACjD,EACAm/D,GAAI,SAAUnqF,EAAMgrB,GAClBT,EAAKuE,OAAOuzF,EAAWriH,EAAM,IAAI+D,MAAQinB,EACzCs3F,EAAuB/3F,EACzB,EACA6/D,QAAS,SAAUp/D,GACHT,EAAKuE,OAAOuzF,EAAW,WAAY,KACzCt+G,MAAQinB,EAChBs3F,EAAuB/3F,EACzB,EACA7V,MAAO,SAAU1U,EAAMgI,EAAOgnB,GAC5B,IAAI27D,EAAcoB,EAAWljD,EAAOwF,eAAeruC,GAAQ,CAAC,EAC5D,GAAI2qF,EAAa,CACf,IAAI+J,EAAU2tB,EAAW13B,EAAYt+C,YAAcrsC,EAAM,GACzD00F,EAAQ3qD,WAAa/hC,EACrB0sF,EAAQ3P,WAAa/1D,EACrBzE,EAAKuE,OAAO4lE,GACZ,IAAIiuB,EAAWn1F,EAASjD,EAAKvqB,MACzB2iH,GAAYn1F,EAASknE,EAAQ10F,QAAU2iH,EAASjuB,EAAQ10F,OAC1D2hH,EAAgB55G,KAAK2sF,GAGvB,IADA,IAAIkuB,EAAiBthB,EAAiBxhG,OAC/B8iH,KAAkB,CACvB,IAAI1wF,EAAWovE,EAAiBshB,GAAgB5iH,KAC5CkyB,KAAYlqB,EAAMvB,OACpB86G,EAAOH,EAAkBlvF,IAEvBqvF,EAAKx5G,KAAK2sF,GAEV0sB,EAAkBlvF,GAAY,CAACwiE,GAGrC,CACIgsB,EAAc1gH,IAChBsiH,EAAuB5tB,GAEpB1lE,IACHzE,EAAOmqE,IAEJ0tB,GAAkCL,EAAmB/hH,KACxDoiH,GAAiC,EAErC,CACF,EACAjkD,IAAK,SAAUn+D,GACb,IAAI+iE,EAAU/3C,EAAMoW,EAChBupD,EAAcoB,EAAWljD,EAAOwF,eAAeruC,GAAQ,CAAC,EAC5D,GAAI2qF,EAAa,CACf,GAAI+1B,EAAc1gH,KACXoiH,EAAgC,CAEnC,IADAr/C,EAAWx4C,EAAKoD,aACkB,IAAlBo1C,EAASt5D,KAEvB,IADAuhB,EAAO+3C,EAASh/D,MAAMwJ,QAAQy0G,EAAuB,KAC5CliH,OAAS,EAChBijE,EAASh/D,MAAQinB,EACjB+3C,EAAWA,EAAS1yD,UAKpB,IAHA+wB,EAAU2hC,EAAS1yD,KACnB0yD,EAASp1D,SACTo1D,EAAW3hC,EACJ2hC,GAA8B,IAAlBA,EAASt5D,MAC1BuhB,EAAO+3C,EAASh/D,MAChBq9B,EAAU2hC,EAAS1yD,MACC,IAAhB2a,EAAKlrB,QAAgBqiH,EAAsB79G,KAAK0mB,MAClD+3C,EAASp1D,SACTo1D,EAAW3hC,GAEb2hC,EAAW3hC,EAKjB,IADA2hC,EAAWx4C,EAAKqD,YACkB,IAAlBm1C,EAASt5D,KAEvB,IADAuhB,EAAO+3C,EAASh/D,MAAMwJ,QAAQ00G,EAAqB,KAC1CniH,OAAS,EAChBijE,EAASh/D,MAAQinB,EACjB+3C,EAAWA,EAASliC,UAKpB,IAHAO,EAAU2hC,EAASliC,KACnBkiC,EAASp1D,SACTo1D,EAAW3hC,EACJ2hC,GAA8B,IAAlBA,EAASt5D,MAC1BuhB,EAAO+3C,EAASh/D,MAChBq9B,EAAU2hC,EAASliC,MACC,IAAhB7V,EAAKlrB,QAAgBqiH,EAAsB79G,KAAK0mB,MAClD+3C,EAASp1D,SACTo1D,EAAW3hC,GAEb2hC,EAAW3hC,CAInB,CAEEghF,GAAkCL,EAAmB/hH,KACvDoiH,GAAiC,GAEnC,IAAIS,EAAc/zD,GAAQjmB,EAAQq0D,EAAkB6kB,EAAoBx3F,GACpE5hB,EAAa4hB,EAAKR,OAClB4gE,EAAYn8C,kBAAoBq0E,GA1If,SAAUt4F,GAEnC,IADA,IAAIu4F,EAAWv4F,EACR3R,EAAckqG,IAAW,CAC9B,GAAIA,EAAS9iH,QAAQ4hH,EACnB,OAAO9yD,GAAQjmB,EAAQq0D,EAAkB6kB,EAAoBe,GAE7DA,EAAWA,EAAS/4F,MAExB,CACA,OAAO,CACT,CAgIyDg5F,CAAqBx4F,GACtEk2F,GAAc7iF,EAAUzkB,EAAMunG,EAAen2F,GACpCogE,EAAY/9C,aAAei2E,EAChCnC,EAAcn2F,EAAKvqB,MACrBuqB,EAAKyE,QAAQrhB,SAEb4c,EAAK6E,SAEEu7D,EAAYh+C,YA/oBV,SAAUpiB,GAC/B,OAAOq2F,GAAar2F,EAAM,UAAYA,EAAKoD,WAAW5pB,QAAUm+B,EAClE,CA6oB+C8gF,CAAiBz4F,IAASs4F,IAC7DpC,GAAc7iF,EAAUzkB,EAAMunG,EAAen2F,GAE/CA,EAAO5hB,CACT,CACF,GACCkgC,GACCjI,EAAWrW,EAAO,IAAIm6D,GAAQvrE,EAAKkhC,SAAWzc,EAASyjF,UAAW,IAYtE,GAXAriB,EAAO3tD,MAAM3mB,EAAMvR,EAAKnI,QACpB+6E,GAAY41B,EAAgB7hH,SACzBqZ,EAAKkhC,QAGRlhC,EAAK0mF,SAAU,EApbI,SAAUrrE,GAuBjC,IAtBA,IAAIyuF,EAAuBx6F,GAAQ,oCAC/By0E,EAAmBr0D,EAAOsH,sBAC1B0wE,EAAqBh4E,EAAOwH,wBAC5B6yE,EAAoBr6E,EAAOC,uBAC3BO,EAAkBR,EAAOyH,qBACzB6yE,EAA4B,SAAU54F,EAAM64F,GAI9C,QAH2B,IAAvBA,IACFA,EAAqB74F,EAAKR,QAExBsf,EAAgB9e,EAAKvqB,MACvBuqB,EAAKyE,QAAQrhB,aACR,CAEL,IADA,IACStG,EAAK,EAAGg8G,EADF94F,EAAKiD,WACoBnmB,EAAKg8G,EAAWvjH,OAAQuH,IAAM,CACpE,IAAIkhG,EAAY8a,EAAWh8G,GACtBwhC,EAAO2H,aAAa4yE,EAAmBpjH,KAAMuoG,EAAUvoG,OAC1DmjH,EAA0B5a,EAAW6a,EAEzC,CACA74F,EAAK6E,QACP,CACF,EACS4a,EAAK,EAAGA,EAAKxV,EAAM10B,OAAQkqC,IAAM,CACxC,IAAIzf,EAAOiK,EAAMwV,GACbqkC,OAAW,EAAQi1C,OAAY,EAAQR,OAAW,EACtD,GAAKv4F,EAAKR,SAAUQ,EAAKg5F,MAGzB,GAAIL,EAAkB34F,EAAKvqB,OAA8B,OAArBuqB,EAAKR,OAAO/pB,KAAhD,CAEE,IADA,IAAIohC,EAAU7W,EAAKla,KACZ+wB,GACD8hF,EAAkB9hF,EAAQphC,OAC5BohC,EAAQphC,KAAO,KACfohC,EAAQmiF,OAAQ,EAChBh5F,EAAKR,OAAO46D,OAAOvjD,EAAS7W,EAAKR,QAInCqX,EAAUA,EAAQ/wB,KAEpBka,EAAK6E,QAEP,KAdA,CAeA,IAAIogB,EAAU,CAACjlB,GACf,IAAK8jD,EAAW9jD,EAAKR,OAAQskD,IAAaxlC,EAAO2H,aAAa69B,EAASruE,KAAMuqB,EAAKvqB,QAAUijH,EAAqB50C,EAASruE,MAAOquE,EAAWA,EAAStkD,OACnJylB,EAAQznC,KAAKsmE,GAEf,GAAIA,GAAY7+B,EAAQ1vC,OAAS,EAC/B,GAAI+oC,EAAO2H,aAAa69B,EAASruE,KAAMuqB,EAAKvqB,MAAO,CACjDwvC,EAAQlyB,UAGR,IADA,IAAIkmG,EADJF,EAAYhC,EAAW9xE,EAAQ,GAAGqX,SAEzBhnD,EAAI,EAAGA,EAAI2vC,EAAQ1vC,OAAS,EAAGD,IAAK,CACvCgpC,EAAO2H,aAAagzE,EAAYxjH,KAAMwvC,EAAQ3vC,GAAGG,OACnD8iH,EAAWxB,EAAW9xE,EAAQ3vC,GAAGgnD,SACjC28D,EAAY10F,OAAOg0F,IAEnBA,EAAWU,EAEb,IAAK,IAAIjb,EAAY/4D,EAAQ3vC,GAAG8tB,WAAY46E,GAAaA,IAAc/4D,EAAQ3vC,EAAI,IAAK,CACtF,IAAIqnE,EAAWqhC,EAAUl4F,KACzByyG,EAASh0F,OAAOy5E,GAChBA,EAAYrhC,CACd,CACAs8C,EAAcV,CAChB,CACKh0D,GAAQjmB,EAAQq0D,EAAkB2jB,EAAoByC,GAIzDj1C,EAASsW,OAAOp6D,EAAMilB,EAAQ,IAAI,IAHlC6+B,EAASsW,OAAO2+B,EAAW9zE,EAAQ,IAAI,GACvC6+B,EAASsW,OAAOp6D,EAAM+4F,IAIxBj1C,EAAW7+B,EAAQ,IACfsf,GAAQjmB,EAAQq0D,EAAkB2jB,EAAoBxyC,IAAauyC,GAAavyC,EAAU,QAC5FA,EAASr/C,QAAQrhB,QAErB,MACEw1G,EAA0B54F,QAEvB,GAAIA,EAAKR,OAAQ,CACtB,GAAkB,OAAdQ,EAAKvqB,KAAe,CAEtB,IADIohC,EAAU7W,EAAKsW,QACc,OAAjBO,EAAQphC,MAAkC,OAAjBohC,EAAQphC,MAAgB,CAC/DohC,EAAQtS,OAAOvE,GACf,QACF,CAEA,IADA6W,EAAU7W,EAAKla,QACkB,OAAjB+wB,EAAQphC,MAAkC,OAAjBohC,EAAQphC,MAAgB,CAC/DohC,EAAQujD,OAAOp6D,EAAM6W,EAAQzT,YAAY,GACzC,QACF,CACApD,EAAKk8B,KAAK66D,EAAW,IAAI58B,GAAQ,KAAM,KACvC,QACF,CACI77C,EAAO2H,aAAajmB,EAAKR,OAAO/pB,KAAM,QAAU6oC,EAAO2H,aAAa,MAAOjmB,EAAKvqB,MAClFuqB,EAAKk8B,KAAK66D,EAAW,IAAI58B,GAAQ,MAAO,KAExCy+B,EAA0B54F,EAE9B,CAzDA,CA0DF,CACF,CA4UMk5F,CAAmB9B,IAKnBE,IAAoC,SAAlBjhF,EAAS5gC,MAAmBmZ,EAAK8oF,gBApPnC,WAClB,IAAI13E,EAAOqW,EAASjT,WAAY+1F,EAAgB,KAC5ClvG,EAAO,SAAUiuD,GACfA,KACFl4C,EAAOk4C,EAAU90C,aACS,IAAdpD,EAAK9gB,OACf8gB,EAAKxmB,MAAQwmB,EAAKxmB,MAAMwJ,QAAQy0G,EAAuB,MAEzDz3F,EAAOk4C,EAAU70C,YACS,IAAdrD,EAAK9gB,OACf8gB,EAAKxmB,MAAQwmB,EAAKxmB,MAAMwJ,QAAQ00G,EAAqB,KAG3D,EACA,GAAKp5E,EAAO2H,aAAa5P,EAAS5gC,KAAM6hH,EAAcl7G,eAAtD,CAGA,KAAO4jB,GAAM,CACX,IAAIla,EAAOka,EAAKla,KACE,IAAdka,EAAK9gB,MAA4B,IAAd8gB,EAAK9gB,MAA4B,MAAd8gB,EAAKvqB,OAAiB0gH,EAAcn2F,EAAKvqB,QAAUuqB,EAAK2c,KAAK,kBAChGw8E,KACHA,EAAgBrB,EAAWR,EAAe,IAC5B36E,KAAKtJ,EAAS2rE,yBAC5B3oE,EAAS+jD,OAAO++B,EAAen5F,IAG/Bm5F,EAAc50F,OAAOvE,KAGvB/V,EAAKkvG,GACLA,EAAgB,MAElBn5F,EAAOla,CACT,CACAmE,EAAKkvG,EAlBL,CAmBF,CAkNEC,IAEGxqG,EAAK0mF,QAAS,CACjB,IAAK7/F,KAAQmhH,EACX,GAAKtiG,GAAMsiG,EAAcnhH,GAAzB,CAMA,IAHAuhH,EAAOlgB,EAAYrhG,GAEnByhH,GADAjtF,EAAQ2sF,EAAanhH,IACVF,OACJ2hH,KACAjtF,EAAMitF,GAAI13F,QACbyK,EAAMwY,OAAOy0E,EAAI,GAGrB,IAAK5hH,EAAI,EAAGsf,EAAIoiG,EAAKzhH,OAAQD,EAAIsf,EAAGtf,IAClC0hH,EAAK1hH,GAAG20B,EAAOx0B,EAAMmZ,EAVvB,CAaF,IAAKtZ,EAAI,EAAGsf,EAAImiF,EAAiBxhG,OAAQD,EAAIsf,EAAGtf,IAE9C,IADA0hH,EAAOjgB,EAAiBzhG,IACfG,QAAQohH,EAAmB,CAGlC,IADAK,GADAjtF,EAAQ4sF,EAAkBG,EAAKvhH,OACpBF,OACJ2hH,KACAjtF,EAAMitF,GAAI13F,QACbyK,EAAMwY,OAAOy0E,EAAI,GAGrB,IAAKA,EAAK,EAAGC,EAAKH,EAAK/pF,UAAU13B,OAAQ2hH,EAAKC,EAAID,IAChDF,EAAK/pF,UAAUiqF,GAAIjtF,EAAO+sF,EAAKvhH,KAAMmZ,EAEzC,CAEJ,CACA,OAAOynB,CACT,GAYA,OA/oBe,SAAUo+D,EAAQphE,GACjC,IAAIiL,EAASm2D,EAAOn2D,OAChBjL,EAASgmF,qBACX5kB,EAAOhtB,cAAc,MAAM,SAAUx9C,EAAOsE,EAAG3f,GAC7C,IAAItZ,EAEA0qB,EAGAR,EAAQ06B,EAAY5jB,EAAMgjF,EAE1Bl5B,EAAa5nB,EANb5jD,EAAIqV,EAAM10B,OAEV4gH,EAAgBn4F,GAAMS,OAAO,CAAC,EAAG6f,EAAOkH,oBACxCmtD,EAAmBr0D,EAAOsH,sBAE1B4xE,EAAqBl5E,EAAOwH,wBAGhC,IADAqwE,EAAcj8G,KAAO,EAChB5E,EAAI,EAAGA,EAAIsf,EAAGtf,IAGjB,GADAkqB,GADAQ,EAAOiK,EAAM30B,IACCkqB,OACV22F,EAAcn2F,EAAKR,OAAO/pB,OAASuqB,IAASR,EAAO6D,UAAW,CAEhE,IADAiT,EAAOtW,EAAKsW,KACLA,GAAM,CAEX,GAAiB,UADjBgjF,EAAWhjF,EAAK7gC,OAC0C,aAA/B6gC,EAAKqG,KAAK,iBAAiC,CACnD,OAAb28E,IACFt5F,EAAO,MAET,KACF,CACAsW,EAAOA,EAAKA,IACd,CACItW,IACFA,EAAK5c,SACDmhD,GAAQjmB,EAAQq0D,EAAkB6kB,EAAoBh4F,KACxD4gE,EAAc9hD,EAAOwF,eAAetkB,EAAO/pB,SAErC2qF,EAAY/9C,YACd7iB,EAAOpc,SACEg9E,EAAYh+C,WACrB8zE,GAAc7iF,EAAUzkB,EAAMunG,EAAe32F,IAKvD,KAAO,CAEL,IADA06B,EAAal6B,EACNR,GAAUA,EAAO4D,aAAe82B,GAAc16B,EAAO6D,YAAc62B,IACxEA,EAAa16B,GACT22F,EAAc32F,EAAO/pB,QAGzB+pB,EAASA,EAAOA,OAEd06B,IAAe16B,IAA0C,IAAhC6T,EAAS+iF,sBACpC59C,EAAW,IAAI2hB,GAAQ,QAAS,IACvB3gF,MAAQm+B,GACjB3X,EAAKhd,QAAQw1D,GAEjB,CAEJ,IAEFi8B,EAAOwiB,mBAAmB,QAAQ,SAAUhtF,GAC1C,IAO4B6K,EACtBykF,EARFjkH,EAAI20B,EAAM10B,OAed,IAAK89B,EAASmmF,yBACZ,KAAOlkH,KAAK,CACV,IAAI0qB,EAAOiK,EAAM30B,GACC,MAAd0qB,EAAKvqB,MAAwC,WAAxBuqB,EAAK2c,KAAK,WACjC3c,EAAK2c,KAAK,YAXV48E,KADsBzkF,EAYO9U,EAAK2c,KAAK,QAXxB3e,GAAM/T,KAAK6qB,GAAO,GAChC,kBAAkB/6B,KAAKw/G,GAGnBA,EAXK,SAAUzkF,GAIxB,OAHYA,EAAIzW,MAAM,KAAKhiB,QAAO,SAAUwZ,GAC1C,OAAOA,EAAEtgB,OAAS,CACpB,IACakJ,OAAO,CAAC,aAAa9C,OAAOi0B,KAAK,IAChD,CAIW6pF,CAAUF,IAWnB,CAEJ,IACKlmF,EAASqmF,4BACZjlB,EAAOwiB,mBAAmB,WAAW,SAAUhtF,GAE7C,IADA,IAAsB4M,EAASjU,EAAapD,EAAQQ,EAAhD1qB,EAAI20B,EAAM10B,OACPD,KAEL,GAAkB,OADlB0qB,EAAOiK,EAAM30B,IACJG,MAAgBuqB,EAAKoD,aAAepD,EAAK2c,KAAK,QAAS,CAC9Dnd,EAASQ,EAAKR,OACdqX,EAAU7W,EAAKqD,UACf,GACET,EAAciU,EAAQP,KACtB9W,EAAO46D,OAAOvjD,EAAS7W,GACvB6W,EAAUjU,QACHiU,EACX,CAEJ,IAEExD,EAASsmF,mBACXllB,EAAOhtB,cAAc,SAAS,SAAUx9C,GAEtC,IADA,IAAsBjK,EAAM5hB,EAAxB9I,EAAI20B,EAAM10B,OACPD,KAGL,GAAwB,QADxB8I,GADA4hB,EAAOiK,EAAM30B,IACKkqB,QACH/pB,MAAqC,OAApB2I,EAAW3I,KACzC,GAAIuqB,EAAKsW,MAA2B,OAAnBtW,EAAKsW,KAAK7gC,KACzBuqB,EAAKsW,KAAK/R,OAAOvE,OACZ,CACL,IAAIukB,EAAK,IAAI41C,GAAQ,KAAM,GAC3B51C,EAAG5H,KAAK,QAAS,yBACjB3c,EAAKk8B,KAAK3X,EACZ,CAGN,IAEElR,EAASmuD,UAAYljD,EAAOgH,mBAC9BmvD,EAAOwiB,mBAAmB,SAAS,SAAUhtF,GAG3C,IAFA,IAAIsW,EAAejC,EAAOgH,kBACtBhwC,EAAI20B,EAAM10B,OACPD,KAAK,CAIV,IAHA,IAAI0qB,EAAOiK,EAAM30B,GACb6E,EAAY6lB,EAAK2c,KAAK,SAASte,MAAM,KACrCu7F,EAAa,GACRjtE,EAAK,EAAGA,EAAKxyC,EAAU5E,OAAQo3C,IAAM,CAC5C,IAAIxtC,EAAYhF,EAAUwyC,GACtBk0C,GAAQ,EACRg5B,EAAkBt5E,EAAa,KAC/Bs5E,GAAmBA,EAAgB16G,KACrC0hF,GAAQ,GAEVg5B,EAAkBt5E,EAAavgB,EAAKvqB,OAC/BorF,GAASg5B,GAAmBA,EAAgB16G,KAC/C0hF,GAAQ,GAENA,IACE+4B,IACFA,GAAc,KAEhBA,GAAcz6G,EAElB,CACKy6G,EAAWrkH,SACdqkH,EAAa,MAEf55F,EAAK2c,KAAK,QAASi9E,EACrB,CACF,IAlL4B,SAAUnlB,EAAQphE,GAChD,IAAIuhF,EAAYvhF,EAASymF,WACrBC,EAAe,SAAUpqC,GAC3B,IAxpL2BuM,EACzBrhE,EAupLEm/F,EAAWrqC,EAAIhzC,KAAK,QAlBA,SAAUgzC,GACpC,OAAOA,EAAIhzC,KAAK,SAAW/f,GAAIM,gBAAkB7O,EAAcshE,EAAIhzC,KAAK,wBAC1E,EAiBQs9E,CAAsBtqC,IAtBX,SAAUA,GAC3B,OAAOthE,EAAcshE,EAAIhzC,KAAK,kBAChC,CAoBsCu9E,CAAavqC,KAzpLpBuM,EA4pLZ89B,EA3pLbn/F,EAAU,0CAA0CsE,KAAK+8D,GACzDrhE,EACKvJ,EAASJ,KAAK,CACnBhS,KAAM2b,EAAQ,GACdmS,KAAMovD,mBAAmBvhE,EAAQ,MAG5BvJ,EAAS1B,QAopLSvT,QAAO,WAC9B,OApBe,SAAUszE,EAAKt8C,GAClC,GAAIA,EAAS8mF,sBAAuB,CAClC,IAAIC,EAAY,IAAIC,MAKpB,OAJAD,EAAU7uG,IAAMokE,EAAIhzC,KAAK,OACzBhpB,GAAOg8D,EAAInwC,WAAWtjC,KAAK,SAAU1C,EAAOjD,GAC1C6jH,EAAUv8G,aAAatH,EAAKiD,EAC9B,IACO65B,EAAS8mF,sBAAsBC,EACxC,CACE,OAAO,CAEX,CASaE,CAAe3qC,EAAKt8C,EAC7B,IAAGxiB,MAAK,SAAUwK,GAChB,IAAInc,EAAOmc,EAAGnc,KAAM8tB,EAAO3R,EAAG2R,KAC9B,OAAO1b,EAASC,KAAKqjG,EAAUW,UAAUvoF,EAAM9tB,IAAOyR,SAAQ,WAC5D,OAAOijG,GAAU10G,EAAM8tB,GAAM9wB,KAAI,SAAUs5G,GACzC,IAAIJ,EAAWR,EAAU/1F,OAAO6kC,KAAY8xD,EAAMxoF,GAElD,OADA4nF,EAAUx6G,IAAIg7G,GACPA,CACT,GACF,GACF,IAAGxkG,MAAK,SAAUwkG,GAChBzlC,EAAIhzC,KAAK,MAAOy4E,EAASmF,UAC3B,GACF,EACI3F,GACFngB,EAAOwiB,mBAAmB,OAAO,SAAUhtF,GACzC,OAAOhY,EAAOgY,EAAO8vF,EACvB,GAEJ,CAyJES,CAA0B/lB,EAAQphE,EACpC,CAofEonF,CAAW5uG,EAASwnB,GAx5BL,SAAU8/E,EAAW9/E,GAChCA,EAASqnF,eACXxH,GAAWC,EAAW9/E,EAE1B,CAq5BEsnF,CAAW9uG,EAASwnB,GACbxnB,CACT,EAwLI+uG,GAAc,SAAUC,EAAYh4B,EAAWptF,IACT,IAApCuoB,GAAMO,QAAQskE,EAAWptF,KAC3BolH,EAAW5D,mBAAmBxhH,GAAM,SAAUw0B,EAAOx0B,GAEnD,IADA,IAAIH,EAAI20B,EAAM10B,OACPD,KACL20B,EAAM30B,GAAGqnC,KAAKlnC,EAAM,KAExB,IACAotF,EAAUrlF,KAAK/H,GAEnB,EA2BIqlH,GAAoB,SAAUznF,EAAUP,GAC1C,IAAI+vD,EAAY,CAAC,qBACb5iE,EAAM6S,GAAUA,EAAO7S,IAAM6S,EAAO7S,IAAMs+B,GAAS+E,IACnDhlB,EAASxL,GAAUA,EAAOwL,OAASxL,EAAOwL,OAASK,GAAOtL,GAC9DA,EAAS4wD,gBAAkB5wD,EAAS4wD,iBAAmB,QACvD5wD,EAASgmF,sBAAsB,wBAAyBhmF,IAAWA,EAASgmF,oBAC5E,IAAIwB,EAAalE,GAAUtjF,EAAUiL,GAYrC,OA7Oa,SAAUu8E,EAAYxnF,EAAUpT,GAC7C46F,EAAW5D,mBAAmB,qBAAqB,SAAUhtF,EAAOx0B,GAElE,IADA,IAAIH,EAAI20B,EAAM10B,OACPD,KAAK,CACV,IAAI0qB,EAAOiK,EAAM30B,GACjB0qB,EAAK2c,KAAK,WAAY3c,EAAK2c,KAAK,sBAChC3c,EAAK2c,KAAKlnC,EAAM,KAClB,CACF,IACAolH,EAAW5D,mBAAmB,kBAAkB,SAAUhtF,EAAOx0B,GAK/D,IAJA,IAAIslH,EAAe,YAActlH,EAC7BuxC,EAAe3T,EAAS4T,cACxBC,EAAoB7T,EAAS8T,oBAC7B7xC,EAAI20B,EAAM10B,OACPD,KAAK,CACV,IAAI0qB,EAAOiK,EAAM30B,GACbkE,EAAQwmB,EAAK2c,KAAKo+E,QACR3lH,IAAVoE,GACFwmB,EAAK2c,KAAKlnC,EAAM+D,EAAMjE,OAAS,EAAIiE,EAAQ,MAC3CwmB,EAAK2c,KAAKo+E,EAAc,QAExBvhH,EAAQwmB,EAAK2c,KAAKlnC,GACL,UAATA,EACF+D,EAAQymB,EAAIkjC,eAAeljC,EAAIgjC,WAAWzpD,GAAQwmB,EAAKvqB,MAC9CuxC,IACTxtC,EAAQwtC,EAAa55B,KAAK85B,EAAmB1tC,EAAO/D,EAAMuqB,EAAKvqB,OAEjEuqB,EAAK2c,KAAKlnC,EAAM+D,EAAMjE,OAAS,EAAIiE,EAAQ,MAE/C,CACF,IACAqhH,EAAW5D,mBAAmB,SAAS,SAAUhtF,GAE/C,IADA,IAAI30B,EAAI20B,EAAM10B,OACPD,KAAK,CACV,IAAI0qB,EAAOiK,EAAM30B,GACbkE,EAAQwmB,EAAK2c,KAAK,SAClBnjC,IACFA,EAAQwmB,EAAK2c,KAAK,SAAS35B,QAAQ,8BAA+B,IAClEgd,EAAK2c,KAAK,QAASnjC,EAAMjE,OAAS,EAAIiE,EAAQ,MAElD,CACF,IACAqhH,EAAW5D,mBAAmB,iBAAiB,SAAUhtF,EAAOx0B,EAAMmZ,GAEpE,IADA,IAAItZ,EAAI20B,EAAM10B,OACPD,KAAK,CACV,IAAI0qB,EAAOiK,EAAM30B,GACjB,GAAmC,aAA/B0qB,EAAK2c,KAAK,mBAAoC/tB,EAAKw3C,QAAS,CAC9D,IAAI40D,EAAc1pG,EAASC,KAAKyO,EAAKoD,YAAYtS,QAAO,SAAUsS,GAChE,OAAQyU,GAAOzU,EAAW5pB,MAC5B,IACIwhH,EACFh7F,EAAK6E,SAEL7E,EAAK5c,QAET,CACF,CACF,IACAy3G,EAAWpzC,cAAc,YAAY,SAAUx9C,GAE7C,IADA,IAAI30B,EAAI20B,EAAM10B,OACPD,KAAK,CACV,IAAI0qB,EAAOiK,EAAM30B,GAAG8tB,WAChBpD,IACFA,EAAKxmB,MAAQwjC,GAASM,OAAOtd,EAAKxmB,OAEtC,CACF,IACAqhH,EAAWpzC,cAAc,gBAAgB,SAAUx9C,EAAOx0B,GAKxD,IAJA,IAAIwU,EAAO,SAAUzQ,GACnB,OAAOA,EAAMwJ,QAAQ,2BAA4B,MAAMA,QAAQ,qBAAsB,IAAIA,QAAQ,0HAA2H,IAAIA,QAAQ,4GAA6G,GACvV,EACI1N,EAAI20B,EAAM10B,OACPD,KAAK,CACV,IAAI0qB,EAAOiK,EAAM30B,GACbkE,EAAQwmB,EAAKoD,WAAapD,EAAKoD,WAAW5pB,MAAQ,GACtD,GAAa,WAAT/D,EAAmB,CACrB,IAAIyJ,EAAO8gB,EAAK2c,KAAK,QACjBz9B,GACF8gB,EAAK2c,KAAK,OAAiB,gBAATz9B,EAAyB,KAAOA,EAAK8D,QAAQ,SAAU,KAE3C,UAA5BqwB,EAAS8wD,gBAA8B3qF,EAAMjE,OAAS,IACxDyqB,EAAKoD,WAAW5pB,MAAQ,iBAAmByQ,EAAKzQ,GAAS,WAE7D,KACkC,UAA5B65B,EAAS8wD,gBAA8B3qF,EAAMjE,OAAS,IACxDyqB,EAAKoD,WAAW5pB,MAAQ,YAAWyQ,EAAKzQ,GAAS,WAGvD,CACF,IACAqhH,EAAWpzC,cAAc,YAAY,SAAUx9C,GAE7C,IADA,IAAI30B,EAAI20B,EAAM10B,OACPD,KAAK,CACV,IAAI0qB,EAAOiK,EAAM30B,GACb+9B,EAASgvD,gBAAoD,IAAlCriE,EAAKxmB,MAAM8C,QAAQ,YAChD0jB,EAAKvqB,KAAO,SACZuqB,EAAK9gB,KAAO,EACZ8gB,EAAKxmB,MAAQymB,EAAIqd,OAAOtd,EAAKxmB,MAAMwJ,QAAQ,oBAAqB,MACd,IAAzCgd,EAAKxmB,MAAM8C,QAAQ,oBAC5B0jB,EAAKvqB,KAAO,QACZuqB,EAAK9gB,KAAO,EACZ8gB,EAAK2J,KAAM,EACX3J,EAAKxmB,MAAQ+iF,SAASv8D,EAAKxmB,OAAO6D,OAAO,IAE7C,CACF,IACAw9G,EAAWpzC,cAAc,uBAAuB,SAAUx9C,EAAOx0B,GAE/D,IADA,IAAIH,EAAI20B,EAAM10B,OACPD,KAAK,CACV,IAAI0qB,EAAOiK,EAAM30B,GACC,IAAd0qB,EAAK9gB,KACP8gB,EAAK5c,SACkB,IAAd4c,EAAK9gB,OACD,UAATzJ,GAAqBuqB,EAAK2c,KAAK,SACjC3c,EAAK2c,KAAK,OAAQ,QAGxB,CACF,IACAk+E,EAAW5D,mBAAmB,iBAAiB,SAAUhtF,GACvDhY,EAAOgY,GAAO,SAAUjK,GACa,iBAA/BA,EAAK2c,KAAK,mBACR3c,EAAKukC,QAAQs2D,EAAWv8E,OAAOsH,uBACjC5lB,EAAK5c,SAEL4c,EAAK6E,SAGX,GACF,IACAg2F,EAAW5D,mBAAmB,mIAA6I,SAAUhtF,EAAOx0B,GAE1L,IADA,IAAIH,EAAI20B,EAAM10B,OACPD,KACL20B,EAAM30B,GAAGqnC,KAAKlnC,EAAM,KAExB,GACF,CA0FE8xE,CAASszC,EAAYxnF,EAAUpT,GAWxB,CACLqe,OAAQA,EACRmpC,cAAeozC,EAAWpzC,cAC1BwvC,mBAAoB4D,EAAW5D,mBAC/B3uE,UAdc,SAAUtoB,EAAMi1E,QACX,IAAfA,IACFA,EAAa,CAAC,GAEhB,IAAIrmF,EAAO+G,GAAS,CAAElP,OAAQ,QAAUwuF,GACpCp6D,EAtDM,SAAU/H,EAAQ9S,EAAMpR,GACpC,OAJoB,SAAUkkB,EAAQlkB,GACtC,OAAOkkB,GAAUA,EAAOmoF,kBAAkB,gBAAkBrsG,EAAKioF,SACnE,CAESqkB,CAAgBpoF,EAAQlkB,GA5BhB,SAAUkkB,EAAQ9S,EAAMpR,GACvC,IAAIusG,EACAl7F,EAAM6S,EAAO7S,IACbm7F,EAAap7F,EAAKnY,WAAU,GAC5BwzG,EAAOrkH,SAASsnF,eACpB,GAAI+8B,EAAK98B,mBAAoB,CAC3B,IAAI+8B,EAAQD,EAAK98B,mBAAmB,IACpCvgE,GAAMpN,KAA6B,SAAxBwqG,EAAWn5F,SAAsBm5F,EAAW76F,WAAa,CAAC66F,IAAa,SAAUp7F,GAC1Fs7F,EAAMphH,KAAK4D,YAAYw9G,EAAM7Y,WAAWziF,GAAM,GAChD,IAEEo7F,EAD0B,SAAxBA,EAAWn5F,SACAq5F,EAAMphH,KAAKkpB,WAEXk4F,EAAMphH,KAErBihH,EAASl7F,EAAI8D,IACb9D,EAAI8D,IAAMu3F,CACZ,CAKA,OAt5QmB,SAAUxoF,EAAQlkB,GAC9BkkB,EAAO+Z,KAAK,aAAcj+B,EACnC,CAg5QE2sG,CAAezoF,EAAQnd,GAASA,GAAS,CAAC,EAAG/G,GAAO,CAAEoR,KAAMo7F,KACxDD,IACFl7F,EAAI8D,IAAMo3F,GAELC,CACT,CAKyCI,CAAW1oF,EAAQ9S,EAAMpR,GAAQoR,CAC1E,CAoDqB6sC,CAAQ/5B,EAAQ9S,EAAMpR,GACnCuR,EAhCc,SAAUF,EAAKD,EAAMpR,GACzC,IAAIuR,EAAO4X,GAAOnpB,EAAKu5F,SAAWnoF,EAAK3Y,UAAY4Y,EAAI0jC,aAAa3jC,IACpE,OAAOpR,EAAKy8C,WAAa3zB,GAAoBxX,GAAqBF,IAASG,EAAOnC,GAAM/T,KAAKkW,EAC/F,CA6Bes7F,CAAgBx7F,EAAK4a,EAAYjsB,GACxCynB,EA7BQ,SAAUwkF,EAAY16F,EAAMvR,GAC1C,IAAIqmF,EAAarmF,EAAKy8C,UAAY11C,GAAS,CAAEktF,mBAAmB,GAASj0F,GAAQA,EAC7EynB,EAAWwkF,EAAW/zE,MAAM3mB,EAAM80E,GAEtC,OAxEmB,SAAU5+D,GAC7B,IAAIoxD,EAAO,SAAUznE,GACnB,OAAOA,GAAsB,OAAdA,EAAKvqB,IACtB,EACIimH,EAAUrlF,EAAShT,UACvB,GAAIokE,EAAKi0B,GAAU,CACjB,IAAIC,EAAUD,EAAQplF,KAClBmxD,EAAKk0B,KACPD,EAAQt4G,SACRu4G,EAAQv4G,SAEZ,CACF,CA2DEw4G,CAAevlF,GACRA,CACT,CAwBmBwlF,CAAUhB,EAAY16F,EAAMvR,GAC3C,MAAuB,SAAhBA,EAAKnI,OAAoB4vB,EApBvB,SAAUvD,EAAQO,EAAUiL,EAAQjI,EAAUznB,GACzD,IAAIqtC,EALc,SAAU5oB,EAAUiL,EAAQte,GAE9C,OADqBskE,GAAejxD,EAAUiL,GACxBgK,UAAUtoB,EAClC,CAEgB87F,CAAczoF,EAAUiL,EAAQjI,GAC9C,OAxBgB,SAAUvD,EAAQlkB,EAAMqtC,GACxC,IAAKrtC,EAAKioF,WAAa/jE,EAAQ,CAC7B,IAAIipF,EAz6Qc,SAAUjpF,EAAQlkB,GACtC,OAAOkkB,EAAO+Z,KAAK,cAAej+B,EACpC,CAu6QkBotG,CAAgBlpF,EAAQnd,GAASA,GAAS,CAAC,EAAG/G,GAAO,CAAEqtC,QAASA,KAC9E,OAAO8/D,EAAQ9/D,OACjB,CACE,OAAOA,CAEX,CAiBSggE,CAAYnpF,EAAQlkB,EAAMqtC,EACnC,CAiB+CigE,CAAOppF,EAAQO,EAAUiL,EAAQjI,EAAUznB,EACxF,EAMEutG,SAAU79E,EAAOgD,iBACjB86E,SAAU99E,EAAO0E,iBACjB43E,YAAavrG,EAAMurG,GAAaC,EAAYh4B,GAC5CG,aAAc9zE,EAAS2zE,GACvBmU,eAAgB6jB,EAAW7jB,eAC3BC,oBAAqB4jB,EAAW5jB,oBAEpC,EAEIolB,GAAgB,SAAUhpF,EAAUP,GACtC,IAAIwpF,EAAgBxB,GAAkBznF,EAAUP,GAChD,MAAO,CACLwL,OAAQg+E,EAAch+E,OACtBmpC,cAAe60C,EAAc70C,cAC7BwvC,mBAAoBqF,EAAcrF,mBAClC3uE,UAAWg0E,EAAch0E,UACzB6zE,SAAUG,EAAcH,SACxBC,SAAUE,EAAcF,SACxBxB,YAAa0B,EAAc1B,YAC3B53B,aAAcs5B,EAAct5B,aAC5BgU,eAAgBslB,EAActlB,eAC9BC,oBAAqBqlB,EAAcrlB,oBAEvC,EAWInL,GAAa,SAAUh5D,EAAQmpB,EAASrtC,GAI1C,YAHa,IAATA,IACFA,EAAO,CAAC,GAxsDO,SAAUkkB,EAAQmpB,EAASrtC,GAC5C,OAAOmgG,GAA2Bj8E,GAAQA,OAAOg5D,WAAW7vC,EAASrtC,EACvE,CAwsDS2tG,CAAazpF,EAAQmpB,EAASrtC,EACvC,EAEI4tG,GAAQj+D,GAAS+E,IAIjBm5D,GAAc,SAAUzwG,GAC1B,OAAOsF,EAASC,KAAKvF,GAAG4E,MAAK,SAAU5E,GACrC,OAAOA,EAAEghC,SACX,GACF,EA2FI0vE,IArBsBhgB,GAJf,SAAUvsD,EAAK15B,GAExB,OADkB1I,EAASoiC,IAAQpiC,EAAS0I,GACvBimG,GAAUvsE,EAAK15B,GAAMA,CAC5C,EAES,WAEL,IADA,IAAIkmG,EAAU,GACL7/G,EAAK,EAAGA,EAAK+R,UAAUtZ,OAAQuH,IACtC6/G,EAAQ7/G,GAAM+R,UAAU/R,GAE1B,GAAuB,IAAnB6/G,EAAQpnH,OACV,MAAM,IAAI2R,MAAM,4BAGlB,IADA,IAAIskB,EAAM,CAAC,EACFvuB,EAAI,EAAGA,EAAI0/G,EAAQpnH,OAAQ0H,IAAK,CACvC,IAAI2/G,EAAYD,EAAQ1/G,GACxB,IAAK,IAAI1G,KAAOqmH,EACVtoG,GAAMsoG,EAAWrmH,KACnBi1B,EAAIj1B,GAAOmmG,GAAOlxE,EAAIj1B,GAAMqmH,EAAUrmH,IAG5C,CACA,OAAOi1B,CACT,GAIEqxF,GAAqB,6rBAAwtBx+F,MAAM,KACnvBy+F,GAAoB,8EAA8Ez+F,MAAM,KACxG0+F,GAAwB,iBAAiB1+F,MAAM,KAC/C2+F,GAAwB,SAAU3pF,GACpC,IAAI4pF,EAAe3qG,EAASuqG,IAAoB,SAAUK,GACxD,OAAO5oG,GAAM+e,EAAU6pF,EACzB,IACIpe,EAAkBzrE,EAASwvE,kBAI/B,OAHwB,IAApB/D,GAAiD,KAApBA,GAC/Bme,EAAaz/G,KAAK,kCAEb7B,GAAKshH,EACd,EACIE,GAAuB,SAAU9pF,GACnC,IAAIy7E,EAAU9wF,GAAME,QAAQmV,EAASy7E,QAAS,KAC1CsO,EAAY,SAAUC,GACxB,OAAO/oG,GAAMw6F,EAASuO,EACxB,EACIC,EAAcxnG,GAAcA,GAAc,GAAIxD,EAASwqG,GAAmBM,IAAY,GAAOvsG,EAAKksG,IAAuB,SAAUM,GACrI,OAAOD,EAAUC,GAAU,CAACA,EAAS,wBAA0B,EACjE,KAAI,GACJ,OAAO1hH,GAAK2hH,EACd,EAsBIC,GAAkB7mG,KAASgF,WAC3BG,GAAU0hG,GAAgB1hG,UAC1BE,GAAUwhG,GAAgBxhG,UAC1BD,GAAWyhG,GAAgBzhG,WAC3B0hG,GAAsB,CACxB,QACA,WACA,YAEEC,GAAuB,CACzBC,YAAY,EACZC,iBAAiB,EACjBC,QAAQ,GAENC,GAAmB,SAAU/O,GAC/B,IAAIwO,EAActvG,EAAU8gG,GAAWA,EAAQl/E,KAAK,KAAOk/E,EACvDgP,EAAiB/rG,EAAMjE,EAAWwvG,GAAeA,EAAYj/F,MAAM,KAAO,GAAIvG,IAClF,OAAOxF,EAASwrG,GAAgB,SAAU9oG,GACxC,OAAOA,EAAKzf,OAAS,CACvB,GACF,EAkBIwoH,GAAa,SAAUC,EAAevoH,GACxC,OAAO6e,GAAM0pG,EAAcC,WAAYxoH,EACzC,EAQIyoH,GAAiB,SAAU7qF,EAAU6rB,GACvC,OAAO7qC,GAAMgf,EAAU,gBAAgB1iB,SAAQ,WAC7C,OAAO0D,GAAMgf,EAAU,kBAAkBn3B,KAAI,SAAUwD,GACrD,OAAe,IAARA,EAAgB,OAASA,CAClC,GACF,IAAG0Q,MAAM8uC,EACX,EA+BIi/D,GAA2B,SAAUC,EAAgBriG,GACvD,IAAIsiG,EAAwB,CAC1BT,QAAQ,EACRU,aAAcJ,GAAeE,EAAgB,aAC7CG,gBAAgB,GAGlB,OAAO5oG,GAASA,GAASA,GAAS,CAAC,EAAG8nG,IAAuBY,GAAwBtiG,EAD1D,CAAEyiG,SAAS,GACgF,CAAC,EACzH,EACIC,GAAqB,SAAUC,EAAkBrrF,GACnD,IAAIsrF,EAA6BtrF,EAASurF,iBAAmBvrF,EAASurF,iBAAmB,CAAC,EAC1F,OAAIF,GAAoBA,EAAiBE,iBAChC5gG,GAAMS,OAAO,CAAC,EAAGigG,EAAiBE,iBAAkBD,GAEpDA,CAEX,EAaIE,GAAiB,SAAUC,EAAgBd,EAAee,EAAyB1rF,GACrF,IAAI2rF,EAAgBnB,GAAiBkB,EAAwBE,gBACzDC,EAAiBrB,GAAiBxqF,EAASy7E,SAC3CqQ,EAxEiB,SAAUnB,EAAevoH,GAC9C,OAAOsoH,GAAWC,EAAevoH,GAAQuoH,EAAcC,WAAWxoH,GAAQ,CAAC,CAC7E,CAsEqB2pH,CAAiBpB,EAAe,UAG/CqB,EAlBe,SAAUL,EAAelQ,GAC5C,MAAO,GAAGrwG,OAAOo/G,GAAiBmB,IAAgBvgH,OAAOo/G,GAAiB/O,GAC5E,CAgBwBwQ,CAAeN,EAfd,SAAUF,EAAgBd,EAAekB,EAAgBK,GAChF,OAAIT,GAjEe,SAAUd,EAAevoH,EAAM+pH,GAClD,IAAIC,EAAUzB,EAAcC,WAC5B,OAAOF,GAAWC,EAAevoH,IA+D6B,WA/DpBgqH,EAAQhqH,GAAM+pH,KAC1D,CA8DwBE,CAAe1B,EAAe,UApF7C1rG,EAqF4BitG,EArFVlwG,EAAMwC,EAAY2rG,KAsFhCsB,GAAkBf,GAAWC,EAAe,UAC9CuB,EAEAL,CAEX,CAMwBS,CAAmBb,EAAgBd,EAAekB,EADpDC,EAAarQ,QAAU+O,GAAiBsB,EAAarQ,SAAWoQ,IAGpF,GAAItiG,GAAI5B,QAAQ3B,QAAUxH,EAAWwtG,EAAiB,OACpD,MAAM,IAAIn4G,MAAM,yCAElB,OAAO8W,GAAMS,OAAO4U,EAAU,CAAEy7E,QAASuQ,EAAgBzvF,KAAK,MAChE,EAIIgwF,GAAkB,SAAUd,EAAgB/iG,EAAS8jG,EAAiBd,EAAyB1rF,GACjG,IAAIysF,EAAwBhB,EAAiB,CAAEiB,OAAQ5B,GAAyB9qF,EAAS0sF,QAAU,CAAC,EAAGhkG,IAAa,CAAC,EACjHiiG,EA3GgB,SAAUvlH,EAAM46B,GACpC,IA/4lBIpnB,EACAM,EA84lBA6jB,GA94lBA7jB,EAAI,CAAC,EACT0H,GA64lBsBof,GAAU,SAAU75B,EAAOjD,GAC/C,OAAOsb,EAAWpZ,EAAMlC,EAC1B,GA/4lB0Byd,GAFtB/H,EAAI,CAAC,GAE4B+H,GAAOzH,IACrC,CACLN,EAAGA,EACHM,EAAGA,IA64lBL,OAlCkB,SAAU0xG,EAAU5qF,GACtC,MAAO,CACL4qF,SAAU/uG,EAAS+uG,GACnB5qF,SAAUnkB,EAASmkB,GAEvB,CA6BS2qF,CAAc5tF,EAAOnkB,EAAGmkB,EAAO7jB,EACxC,CAsGsByzG,CAAgB,CAAC,UAAWtD,GAAUoD,EAAuBzsF,IAC7E4sF,EAAmBjiG,GAAMS,OAAOohG,EAAiBd,EAAyBf,EAAc3qF,WAN7E,SAAUyrF,EAAgBd,GACzC,OAAOc,GAAkBf,GAAWC,EAAe,SACrD,CAI0GkC,CAAWpB,EAAgBd,GAtGpH,SAAUA,EAAevoH,EAAMyB,QAC7B,IAAbA,IACFA,EAAW,CAAC,GAEd,IAAI+mH,EAAWD,EAAcC,WACzBkC,EAAkB9rG,GAAM4pG,EAiGkJ,UAjGlI7tG,MAAM,CAAC,GACnD,OAAO4N,GAAMS,OAAO,CAAC,EAAGvnB,EAAUipH,EACpC,CA+FsJC,CAAWpC,GAA2B,CAAC,EAAG,CAC5Lx8B,UAAU,EACVo9B,iBAAkBH,GAAmBM,EAAyBf,EAAc3qF,cAE9E,OAAOwrF,GAAeC,EAAgBd,EAAee,EAAyBkB,EAChF,EASII,GAAc,SAAU5qG,EAAWqd,EAAQr9B,GAC7C,OAAO6b,EAASC,KAAKuhB,EAAOO,SAAS59B,IAAO4G,OAAOoZ,EACrD,EAiEI6qG,IAnBEvpF,GAAS,CAAC,EAaP,CACL38B,IAbQ,SAAUzD,EAAI4pH,GACtBxpF,GAAOpgC,GAAM4pH,CACf,EAYErzF,IAXQ,SAAUv2B,GAClB,OAAIogC,GAAOpgC,GACFogC,GAAOpgC,GAET,CAAE6pH,MAAO,CAAC,EACnB,EAOEhqE,IANQ,SAAU7/C,GAClB,OAAO2d,GAAMyiB,GAAQpgC,EACvB,IASE8pH,GAAU,SAAUC,EAAUv2F,GAEhC,OADaA,EAAIlK,IACHygG,EAChB,EACIC,GAAsB,SAAUD,EAAUv2F,GAC5C,OAAOngB,SAASuf,GAAMY,EAAKu2F,GAAW,GACxC,EACIE,GAAiBvxG,EAAMoxG,GAAS,eAChCI,GAAkBxxG,EAAMoxG,GAAS,gBACjCK,GAAezxG,EAAMsxG,GAAqB,cAC1CI,GAAgB1xG,EAAMsxG,GAAqB,eAoB3CK,GAAoB,SAAUluF,EAAQgY,EAASK,GACjD,IAAI81E,EAAU/gG,GAAqB4S,EAAOy4B,WACtCyjB,EAAYl8C,EAAOyQ,OAAS09E,EArtkBzB/gG,GAAqBuC,GAqtkB8Bw+F,GArtkBLhhG,IAAIjc,iBAstkBrDk9G,EAdU,SAAU39E,EAAQpZ,EAAK2gB,EAASK,GAC9C,IAAIokB,EATsB,SAAUplC,GACpC,OAAOA,EAAIlK,IAAIpc,uBACjB,CAOmBA,CAAsBsmB,GAKvC,MAAO,CACLne,EAHM8+B,GAFKvH,EAASgsB,EAAW3qD,KAAOulB,EAAIlK,IAAIgrB,WAAa81E,GAAc52F,GAAO,GAMhFzd,EAHMy+B,GAFK5H,EAASgsB,EAAWprD,IAAMgmB,EAAIlK,IAAImrB,UAAY01E,GAAa32F,GAAO,GAOjF,CAIwBg3F,CAAUruF,EAAOyQ,OAAQyrC,EAAWlkC,EAASK,GACnE,OApB+B,SAAU81E,EAASn2E,EAASK,GAC3D,IAAI1kB,EAAcm6F,GAAeK,GAC7Bv6F,EAAem6F,GAAgBI,GACnC,OAAOn2E,GAAW,GAAKK,GAAW,GAAKL,GAAWrkB,GAAe0kB,GAAWzkB,CAC9E,CAgBS06F,CAA2BpyC,EAAWkyC,EAAgBl1G,EAAGk1G,EAAgBx0G,EAClF,EAqBI20G,GAAsB,SAAUvuF,GAClC,IAAIwuF,EAAgB,GAChBC,EAAoB,WACtB,IAdEC,EAcEhC,EAAQ1sF,EAAO0sF,MACnB,OAAOA,GAASA,EAAMiC,2BAA6BjC,EAAMiC,6BAZpD,CACLrN,KAJEoN,EAAgB,WAClB,MAAM,IAAIt6G,MAAM,8DAClB,EAGEw6G,MAAOF,EACPvoD,WAAYuoD,EACZG,QAASH,EASX,EACII,EAAqB,WACvB,OAAOtwG,EAASC,KAAK+vG,EAAc,GACrC,EAIIroD,EAAa,WACXqoD,EAAc/rH,OAAS,GACzBgsH,IAAoBtoD,WAAWqoD,EAEnC,EAIIO,EAAoB,SAAUC,GAChCjvG,EAAYyuG,GAAe,SAAUS,GACnC,OAAOA,IAAsBD,CAC/B,IAAGlxG,MAAK,SAAU5U,GAChBslH,EAAc7+E,OAAOzmC,EAAO,EAC9B,GACF,EACIo4G,EAAO,SAAU3Q,EAAMue,GAIzB,QAHkB,IAAdA,IACFA,GAAY,IAEVlvF,EAAOC,SAhDa,SAAUD,GACpC,IAJ0B9S,EAK1B,OAL0BA,EAIP8S,EAAOyQ,OAASzQ,EAAOy4B,UAAYz4B,EAAOmvF,0BAHtD3wG,EAASC,KAAKyO,GAAM9jB,IAAIgkB,KAIEhkB,IAAI6oB,IAAQ3U,OAAM,EACrD,CA6C2B8xG,CAAsBpvF,GAM7C,OAHIkvF,GACFlvF,EAAO+Z,KAAK,yBAA0B,CAAEi1E,aAAcre,IAEjD7wF,EAAO0uG,GAAe,SAAUQ,GACrC,OA7BoBrlH,EA6BL8kH,IAAoBI,QAAQG,GA7BpBplH,EA6BmC+mG,IA5BrDhnG,EAAEyC,OAASxC,EAAEwC,MAAQzC,EAAEgkB,OAAS/jB,EAAE+jB,MAAShkB,EAAE0lH,aAAgB1lH,EAAE2lH,SAAY1lH,EAAEylH,aAAgBzlH,EAAE0lH,SAD1F,IAAU3lH,EAAGC,CA8BzB,IAAG2T,YAAW,WACZyiB,EAAOwlD,cAAcE,UAAU1lD,GAC/B,IAAIgvF,EAAeP,IAAoBnN,KAAK3Q,GAAM,WAChDoe,EAAkBC,GAClB7oD,IACA2oD,IAAqB7xG,MAAK,WACxB,OAAO+iB,EAAO7xB,OAChB,IAAG,SAAUkD,GACX,OAAe+b,GAAqB/b,EAAIk+G,SAx5PjCpiG,IAAIhf,OAy5Pb,GACF,IAIA,OApCkB,SAAU6gH,GAC9BR,EAAc9jH,KAAKskH,EACrB,CA+BIQ,CAAgBR,GAChB7oD,IACAnmC,EAAO+Z,KAAK,mBAAoB,CAAEi1E,aAAcnsG,GAAS,CAAC,EAAGmsG,KACtDA,CACT,GACF,EAQIS,EAAmBrzG,EAASoyG,GAuBhC,OAtBqB,SAAUxuF,GAC7BA,EAAO8pB,GAAG,cAAc,WACtB,IAAI4lE,EAxwVc,SAAU1vF,GAChC,OAAOA,EAAO6hC,SAAS,kBACzB,CAswV2B8tD,CAAkB3vF,GACnC0vF,GACFpO,EAAK,CACH3zF,KAAM+hG,EACNtjH,KAAM,UACNkjH,QAAS,IACR,GAELnpD,GACF,IACAnmC,EAAO8pB,GAAG,6CAA6C,WACrDnqB,GAAMC,sBAAsBumC,EAC9B,IACAnmC,EAAO8pB,GAAG,UAAU,WAClB3qC,EAAOqvG,EAAcn0G,SAAS,SAAU20G,GACtCP,IAAoBG,MAAMI,EAC5B,GACF,GACF,CACAY,CAAe5vF,GACR,CACLshF,KAAMA,EACNsN,MAhCU,WACVE,IAAqBhxG,MAAK,SAAUkxG,GAClCP,IAAoBG,MAAMI,GAC1BD,EAAkBC,GAClB7oD,GACF,GACF,EA2BEspD,iBAAkBA,EAEtB,EAEIz4D,GAAgB3B,GAAa2B,cAE7BC,GAAe5B,GAAa4B,aAiB5B44D,GAAgB,SAAU7vF,GAC5B,IAAI8vF,EAAU,GACVrB,EAAoB,WACtB,IAjBEC,EAiBEhC,EAAQ1sF,EAAO0sF,MACnB,OAAOA,GAASA,EAAMqD,qBAAuBrD,EAAMqD,uBAf9C,CACLzO,KAJEoN,EAAgB,WAClB,MAAM,IAAIt6G,MAAM,wDAClB,EAGE47G,QAAStB,EACTuB,MAAOvB,EACPwB,QAASxB,EACTE,MAAOF,EACPyB,UAAWzB,EACX0B,UAAW1B,EASb,EACI2B,EAAW,SAAU/iG,EAAO7T,GAC9B,OAAO,WAEL,IADA,IAAIqC,EAAO,GACF9R,EAAK,EAAGA,EAAK+R,UAAUtZ,OAAQuH,IACtC8R,EAAK9R,GAAM+R,UAAU/R,GAEvB,OAAOyP,EAAIA,EAAEuC,MAAMsR,EAAOxR,QAAQxZ,CACpC,CACF,EAWIguH,EAAc,SAAUC,IAPP,SAAUA,GAC7BvwF,EAAO+Z,KAAK,cAAe,CAAEw2E,OAAQA,GACvC,CAMEC,CAAeD,GAIQ,KAHvBT,EAAUtwG,EAASswG,GAAS,SAAUW,GACpC,OAAOA,IAAgBF,CACzB,KACY9tH,QACVu9B,EAAO7xB,OAEX,EAIIuiH,EAA8B,SAAUC,GAC1C3wF,EAAOwlD,cAAcE,UAAU1lD,GAC/BskD,GAAMtkD,GACN,IAAIuwF,EAASI,IAEb,OArBc,SAAUJ,GACxBT,EAAQplH,KAAK6lH,GAPK,SAAUA,GAC5BvwF,EAAO+Z,KAAK,aAAc,CAAEw2E,OAAQA,GACtC,CAMEK,CAAcL,EAChB,CAiBEM,CAAUN,GACHA,CACT,EA8BA,OALAvwF,EAAO8pB,GAAG,UAAU,WAClB3qC,EAAO2wG,GAAS,SAAUS,GACxB9B,IAAoBG,MAAM2B,EAC5B,GACF,IACO,CACLjP,KA9BS,SAAUxlG,EAAMg1G,GACzB,OAAOJ,GAA4B,WACjC,OAAOjC,IAAoBnN,KAAKxlG,EAAMg1G,EAAQR,EAChD,GACF,EA2BEN,QA1BY,SAAUl0G,GACtB,OAAO40G,GAA4B,WACjC,OAAOjC,IAAoBuB,QAAQl0G,EAAMw0G,EAC3C,GACF,EAuBEL,MAtBU,SAAUn0F,EAASp2B,EAAU4nB,GACvC,IAAIyjG,EAAoBtC,IACxBsC,EAAkBd,MAAMn0F,EAASu0F,EAAS/iG,GAAgByjG,EAAmBrrH,GAC/E,EAoBEwqH,QAnBY,SAAUp0F,EAASp2B,EAAU4nB,GACzC,IAAIyjG,EAAoBtC,IACxBsC,EAAkBb,QAAQp0F,EAASu0F,EAAS/iG,GAAgByjG,EAAmBrrH,GACjF,EAiBEkpH,MAhBU,WA3BHpwG,EAASC,KAAKqxG,EAAQA,EAAQrtH,OAAS,IA4B/Bqb,MAAK,SAAUyyG,GAC5B9B,IAAoBG,MAAM2B,GAC1BD,EAAYC,EACd,GACF,EAaF,EAEIS,GAAsB,SAAUhxF,EAAQlE,GAC1CkE,EAAOixF,oBAAoB3P,KAAK,CAC9Bl1G,KAAM,QACNuhB,KAAMmO,GAEV,EACIo1F,GAAe,SAAUlxF,EAAQlE,GAC/BkE,EAAOmxF,YACTH,GAAoBhxF,EAAQlE,GAE5BkE,EAAO8pB,GAAG,cAAc,WACtBknE,GAAoBhxF,EAAQlE,EAC9B,GAEJ,EAOIs1F,GAAW,SAAUpxF,EAAQk3C,EAAWz5D,GAC1Cw5D,GAAUj3C,EAAQk3C,EAAW,CAAEp7C,QAASre,GAE1C,EACI4zG,GAAkB,SAAUjlH,EAAM4gB,EAAKrqB,GACzC,OAAOA,EAAO,kBAAoByJ,EAAO,KAAOzJ,EAAO,aAAeqqB,EAAM,kBAAoB5gB,EAAO,SAAW4gB,CACpH,EACIskG,GAAkB,SAAUtxF,EAAQhT,EAAKrqB,GAC3CyuH,GAASpxF,EAAQ,kBAAmBqxF,GAAgB,SAAUrkG,EAAKrqB,GACrE,EAgBI4uH,GAAY,SAAUz1F,GAExB,IADA,IAAI5iB,EAAI,GACClP,EAAK,EAAGA,EAAK+R,UAAUtZ,OAAQuH,IACtCkP,EAAElP,EAAK,GAAK+R,UAAU/R,GAExB,IAAIyvB,EAAU11B,OAAO01B,QACjBA,IACEA,EAAQoC,MACVpC,EAAQoC,MAAM7f,MAAMyd,EAASzW,GAAc,CAAC8Y,GAAU5iB,GAAG,IAEzDugB,EAAQuD,IAAIhhB,MAAMyd,EAASzW,GAAc,CAAC8Y,GAAU5iB,GAAG,IAG7D,EAWIs4G,GAAkB,SAAUxxF,EAAQyxF,GACtC,IAAIC,EAAU1xF,EAAOwlD,cAAcvvB,QAAU,iBAEzC07D,EAAiB,UADR3xF,EAAOwlD,cAAcjxC,OACQ,OACtC9D,GAA2B,IAAlBzQ,EAAOyQ,OACpB,OAAOxxB,EAAMwyG,GAAU,SAAUzkG,GAC/B,OAfuB,SAAUA,GACnC,MAAO,iBAAiB/lB,KAAK+lB,EAC/B,CAaQ4kG,CAAqB5kG,KAASyjB,EACzBihF,EAAU,IAAM1kG,EAAM,IAAM2kG,EAE5B3xF,EAAO6xF,gBAAgBlnC,WAAW39D,EAE7C,GACF,EACI8kG,GAA+B,SAAU9xF,GAC3CA,EAAO+xF,WAAa/xF,EAAO+xF,WAAWpmH,OApBhB,SAAUq0B,GAChC,OAAOwxF,GAAgBxxF,EAh/VL,SAAUA,GAC5B,IAAIgyF,EAAahyF,EAAO6hC,SAAS,eACjC,OAAI7mD,EAAWg3G,GACN/yG,EAAM+yG,EAAWzmG,MAAM,KAAMvG,IAC3B9J,EAAU82G,GACZA,GACiB,IAAfA,GAAwBhyF,EAAOyQ,OACjC,GAEA,CAAC,UAEZ,CAq+ViCwhF,CAAcjyF,GAC/C,CAkB+CkyF,CAAkBlyF,GAjB5C,SAAUA,GAC7B,OAAOwxF,GAAgBxxF,EAAQ8iC,GAAW9iC,GAC5C,CAe0EmyF,CAAenyF,GACzF,EAEIoyF,GAAe,WACjB,IACIC,EAAkB,CAAC,EACnBC,EAAe,SAAUjxF,EAAQkxF,GACnC,MAAO,CACLlxF,OAAQA,EACRkxF,UAAWA,EAEf,EACIC,EAAa,SAAU/K,GACzB,OAAOA,KAAW4K,CACpB,EAuBA,MAAO,CACLG,WAAYA,EACZC,aAxBiB,SAAUhL,GAC3B,IAAInqF,EAAS+0F,EAAgB5K,GAC7B,OAAOnqF,EAASA,EAAOi1F,UAAY,IACrC,EAsBEG,UArBc,SAAUjL,GACxB,QAAO+K,EAAW/K,IAhBN,IAgBiB4K,EAAgB5K,GAASpmF,MACxD,EAoBE6gF,WAnBe,SAAUuF,GACzB,QAAO+K,EAAW/K,IAnBQ,IAmBG4K,EAAgB5K,GAASpmF,MACxD,EAkBEsxF,YAjBgB,SAAUlL,GAC1B4K,EAAgB5K,GAAW6K,EAtBf,EAsBqC,KACnD,EAgBEM,aAfiB,SAAUnL,EAAS8K,GACpCF,EAAgB5K,GAAW6K,EAzBD,EAyBwBC,EACpD,EAcEM,aAbiB,SAAUpL,UACpB4K,EAAgB5K,EACzB,EAYEvtE,QAXY,WACZm4E,EAAkB,CAAC,CACrB,EAWF,EAEI71F,GAAQ,EAQRs2F,GAAO,SAAUjuG,GACnB,OAAOA,EAAS2X,MAPZu2F,EAAM,WACR,OAAOj/F,KAAKsmC,MAAsB,WAAhBtmC,KAAKgyB,UAAuB3nC,SAAS,GACzD,EAEO,KADG,IAAIyjB,MAAOq3B,UACJ96C,SAAS,IAAM40G,IAAQA,IAAQA,KALvC,IACLA,CAQN,EAsGIC,GAAW,SAAUnR,EAActhF,GACrC,IAAI0yF,EAAkB,CAAC,EAOnBC,EAAiB,SAAU5Q,EAAUzhF,EAASC,EAASqyF,GACzD,IAAIC,EAAM,IAAI/R,eACd+R,EAAI9R,KAAK,OAAQ/gF,EAASvT,KAC1BomG,EAAIC,gBAAkB9yF,EAAS+yF,YAC/BF,EAAIG,OAAOC,WAAa,SAAUvlH,GAChCklH,EAASllH,EAAEwlH,OAASxlH,EAAEylH,MAAQ,IAChC,EACAN,EAAI76G,QAAU,WACZuoB,EAAQ,2DAA6DsyF,EAAI/xF,OAC3E,EACA+xF,EAAI96G,OAAS,WACX,GAAI86G,EAAI/xF,OAAS,KAAO+xF,EAAI/xF,QAAU,IACpCP,EAAQ,eAAiBsyF,EAAI/xF,YAD/B,CAIA,IArBqBsyF,EAAOC,EAqBxBC,EAAOC,KAAK9/E,MAAMo/E,EAAIW,cACrBF,GAAiC,iBAAlBA,EAAK/vE,SAIzBjjB,GA1BqB8yF,EA0BJpzF,EAASyzF,SA1BEJ,EA0BQC,EAAK/vE,SAzBvC6vE,EACKA,EAAMzjH,QAAQ,MAAO,IAAM,IAAM0jH,EAAM1jH,QAAQ,MAAO,IAExD0jH,IAmBH9yF,EAAQ,iBAAmBsyF,EAAIW,aAHjC,CAOF,EACA,IAAIE,EAAW,IAAIC,SACnBD,EAASxiG,OAAO,OAAQ6wF,EAASI,OAAQJ,EAAS6R,YAClDf,EAAI3R,KAAKwS,EACX,EAMIG,EAAiB,SAAU9R,EAAUt1F,GACvC,MAAO,CACLA,IAAKA,EACLs1F,SAAUA,EACVjhF,QAAQ,EAEZ,EACIgzF,EAAiB,SAAU/R,EAAUxmF,EAAS/1B,GAChD,MAAO,CACLinB,IAAK,GACLs1F,SAAUA,EACVjhF,QAAQ,EACRxF,MAAO,CACLC,QAASA,EACT/1B,QAASA,GAGf,EACIuuH,EAAiB,SAAU7M,EAASnqF,GACtCpS,GAAMpN,KAAKm1G,EAAgBxL,IAAU,SAAUhgH,GAC7CA,EAAQ61B,EACV,WACO21F,EAAgBxL,EACzB,EAkEA,OAHqC,IAAjCjsG,EAAW+kB,EAASoxD,WACtBpxD,EAASoxD,QAAUuhC,GAEd,CAAEK,OANI,SAAUgB,EAAWC,GAChC,OAAQj0F,EAASvT,KAAwBuT,EAASoxD,UAlB/BuhC,EASH,SAAUqB,EAAWC,GAIrC,OAHAD,EAAYrpG,GAAMM,KAAK+oG,GAAW,SAAUjS,GAC1C,OAAQT,EAAaK,WAAWI,EAASmF,UAC3C,IACOtoF,GAAWl3B,IAAIijB,GAAM9hB,IAAImrH,GAAW,SAAUjS,GACnD,OAAOT,EAAa6Q,UAAUpQ,EAASmF,WAZf,SAAUnF,GACpC,IAAImF,EAAUnF,EAASmF,UACvB,OAAO,IAAItoF,IAAW,SAAU13B,GAC9BwrH,EAAgBxL,GAAWwL,EAAgBxL,IAAY,GACvDwL,EAAgBxL,GAAS/8G,KAAKjD,EAChC,GACF,CAMwDgtH,CAAsBnS,GAxDzD,SAAUA,EAAU3wB,EAAS6iC,GAEhD,OADA3S,EAAa8Q,YAAYrQ,EAASmF,WAC3B,IAAItoF,IAAW,SAAU13B,GAC9B,IAAIunH,EACJ,IACE,IAAI0F,EAAsB,WACpB1F,GACFA,EAAaJ,OAGjB,EAyBAj9B,EAAQ2wB,GAxBM,SAAUt1F,GACtB0nG,IACA7S,EAAa+Q,aAAatQ,EAASmF,UAAWz6F,GAC9CsnG,EAAehS,EAASmF,UAAW2M,EAAe9R,EAAUt1F,IAC5DvlB,EAAQ2sH,EAAe9R,EAAUt1F,GACnC,IACc,SAAU6O,EAAO91B,GAC7B,IAAI4uH,EAAiB5uH,GAAoB,CAAC,EAC1C2uH,IACA7S,EAAagR,aAAavQ,EAASmF,WACnC6M,EAAehS,EAASmF,UAAW4M,EAAe/R,EAAUzmF,EAAO84F,IACnEltH,EAAQ4sH,EAAe/R,EAAUzmF,EAAO84F,GAC1C,IACW,SAAUC,GACfA,EAAU,GAAKA,EAAU,KAG7Bp2G,EAASC,KAAKuwG,GAAcnxG,SAAQ,WAClC,OAAOW,EAASC,KAAK+1G,GAAkBprH,IAAI4S,EAC7C,IAAG8B,MAAK,SAAUZ,GAChB8xG,EAAe9xG,EACfA,EAAEmyG,YAAY3oH,MAAMkuH,EACtB,GACF,GAEF,CAAE,MAAO17F,GACPzxB,EAAQ4sH,EAAe/R,EAAUppF,EAAG4C,QAAS,CAAC,GAChD,CACF,GACF,CAgB0F+4F,CAAevS,EAAU/hF,EAASoxD,QAAS6iC,EACnI,IACF,CAE4EM,CAAYP,EAAWC,GAxF1F,IAAIr1F,IAAW,SAAU13B,GAC9BA,EAAQ,GACV,GAuFF,EAKF,EAEI+sH,GAAmB,SAAUx0F,GAC/B,OAAO,WACL,OAAOA,EAAOixF,oBAAoB3P,KAAK,CACrC3zF,KAAMqS,EAAO7N,UAAU,sBACvB/lB,KAAM,OACNkjH,SAAU,EACVD,aAAa,GAEjB,CACF,EACI0F,GAAiB,SAAU/0F,EAAQ6hF,GACrC,OAAOmR,GAASnR,EAAc,CAC5B70F,IAAKs1C,GAAkBtiC,GACvBg0F,SAAUzxD,GAAuBviC,GACjCszF,YAAa9wD,GAA2BxiC,GACxC2xD,QAASlvB,GAAuBziC,IAEpC,EAmlBIg1F,GAAS9pG,GAAMpN,KACfqP,GAAMs+B,GAAS+E,IACfykE,GAAuB,SAAUC,EAAUl1F,GAC7C,IAAI3I,EAAKnV,EAAMk3C,EACX5tB,EAASxL,GAAUA,EAAOwL,QAAUK,GAAO,CAAC,GAO5C/gC,EAAgB,SAAUqqH,GAC5BjzG,EAAwB,iBAAVizG,EAAqB,CACjCxyH,KAAMwyH,EACNzhD,QAAS,GACT/oE,MAAO,CAAC,GACNwqH,EACJ,IAAI99F,EAAMlK,GAAIpB,OAAO7J,EAAKvf,MAE1B,OAda,SAAU00B,EAAKnV,GACxBA,EAAKwxD,QAAQjxE,QACf0qB,GAAIs8B,SAASpyB,EAAKnV,EAAKwxD,QAAQ52C,KAAK,MAEtC3P,GAAI2gC,WAAWz2B,EAAKnV,EAAKvX,MAC3B,CAQEuoE,CAAS77C,EAAKnV,GACPmV,CACT,EAWI+9F,EAAa,SAAU/9F,EAAK69F,EAAUrkD,GACxC,IAAInkD,EAAQ2oG,EACR73F,EAAW03F,EAASzyH,OAAS,GAAKyyH,EAAS,GAC3CI,EAAe93F,GAAYA,EAAS76B,KACpC4yH,EAdkB,SAAUl+F,EAAK7S,GACrC,IAAI7hB,EAAsB,iBAAR00B,EAAmBA,EAAIlI,SAAS7lB,cAAgB+tB,EAC9Dm+F,EAAUhqF,EAAOwF,eAAeruC,GAChCyvC,EAAkBojF,GAAWA,EAAQpjF,gBACzC,SAAIA,IAAmBA,EAAgB3vC,UAC9B+hB,IAA4D,IAA/C0G,GAAMO,QAAQ2mB,EAAiB5tB,GAAoBA,EAAY4tB,EAAgB,GAIvG,CAKuBqjF,CAAkBp+F,EAAKi+F,GAC5C,GAAIC,EACED,IAAiBC,GACnBF,EAAkBH,EAAS,GAC3BA,EAAWA,EAAS76G,MAAM,IAE1Bg7G,EAAkBE,OAEf,GAAI/3F,EACT63F,EAAkBH,EAAS,GAC3BA,EAAWA,EAAS76G,MAAM,QACrB,IAAKw2D,EACV,OAAOx5C,EAgBT,OAdIg+F,IACF3oG,EAAS5hB,EAAcuqH,IAChBrqH,YAAYqsB,GAEjBw5C,IACGnkD,IACHA,EAASS,GAAIpB,OAAO,QACb/gB,YAAYqsB,GAErBnM,GAAMpN,KAAK+yD,GAAU,SAAU9sC,GAC7B,IAAI2xF,EAAa5qH,EAAci5B,GAC/BrX,EAAOnhB,aAAamqH,EAAYr+F,EAClC,KAEK+9F,EAAW1oG,EAAQwoG,EAAUG,GAAmBA,EAAgBxkD,SACzE,EACA,OAAIqkD,GAAYA,EAASzyH,QACvByf,EAAOgzG,EAAS,GAChB79F,EAAMvsB,EAAcoX,IACpBk3C,EAAWjsC,GAAIpB,OAAO,QACb/gB,YAAYoqH,EAAW/9F,EAAK69F,EAAS76G,MAAM,GAAI6H,EAAK2uD,WACtDzX,GAEA,EAEX,EACIu8D,GAAoB,SAAUzzG,GAChC,IAAIpU,EACArI,EAAM,CACRiuE,QAAS,GACT/oE,MAAO,CAAC,GA4BV,MAzBa,OADbuX,EAAOzc,EAAIuoB,SAAW9C,GAAM/T,KAAK+K,MAE/BpU,EAAUoU,EAAKhS,QAAQ,6CAA6C,SAAU0lH,EAAI3gE,EAAIC,EAAI2gE,EAAIC,GAC5F,OAAQ7gE,GACR,IAAK,IACHxvD,EAAIkF,MAAM9G,GAAKqxD,EACf,MACF,IAAK,IACHzvD,EAAIiuE,QAAQhpE,KAAKwqD,GACjB,MACF,IAAK,KACkF,IAAjFhqC,GAAMO,QAAQ,8CAA8CF,MAAM,KAAM2pC,KAC1EzvD,EAAIkF,MAAMuqD,GAAMA,GAIpB,GAAW,MAAP2gE,EAAY,CACd,IAAI14E,EAAI24E,EAAGxpG,MAAM,8BACb6wB,IACF13C,EAAIkF,MAAMwyC,EAAE,IAAMA,EAAE,GAExB,CACA,MAAO,EACT,KAEF13C,EAAI9C,KAAOmL,GAAW,MACfrI,CACT,EAgBIswH,GAAa,SAAU/1F,EAAQrsB,GACjC,IAAIhR,EAAMqzH,EACWC,EAAjBC,EAAa,GACbC,EAp9XiB,SAAUn2F,GAC/B,IAAInuB,EAAQmuB,EAAO6hC,SAAS,iBAxKH,+IAyKzB,OAAI7mD,EAAWnJ,GACNA,EAEA,EAEX,CA68XsBukH,CAAiBp2F,GACrC,GAAsB,KAAlBm2F,EACF,MAAO,GAET,IAAIE,EAAa,SAAUzpH,GACzB,OAAOA,EAAIsD,QAAQ,UAAW,GAChC,EACA,GAAsB,iBAAXyD,EAAqB,CAE9B,KADAA,EAASqsB,EAAOqlE,UAAUjrE,IAAIzmB,IAE5B,OAEFA,EAASA,EAAO,EAClB,CACA,GAAI,YAAaA,EAAQ,CACvB,IAAI2iH,EAAa/0G,GAAM5N,EAAQ,WAC/B,GAAIiiB,GAAK0gG,GAAY,GACnB,MAAO,GAEPH,EAAgBG,EAAWh5G,MAAM64G,EAErC,CACAxzH,EAAOgR,EAAOsuD,OAAStuD,EAAO88B,QAAU,OACxC,IAzC4BziB,EAyCxB3C,GAzCwB2C,EAyCFra,EAAOqa,WAxCI,iBAAbA,GAIxBA,GADAA,EAAWA,EAASzC,MAAM,WAAW,IACjBrb,QAAQ,sBAAuB,MAC5Cgb,GAAM9hB,IAAI4kB,EAASzC,MAAM,4BAA4B,SAAUrJ,GACpE,IAAI2uD,EAAW3lD,GAAM9hB,IAAI8Y,EAAKqJ,MAAM,gBAAiBoqG,IACjDlwH,EAAMorE,EAASh2B,MAInB,OAHIg2B,EAASpuE,SACXgD,EAAIorE,SAAWA,GAEVprE,CACT,IAAGwa,WAXM,GAwCLoL,EAAM5oB,QACH4oB,EAAM,GAAG1oB,OACZ0oB,EAAM,GAAG1oB,KAAOA,GAElBA,EAAOgR,EAAOqa,SACdgoG,EAAcf,GAAqB5pG,EAAO2U,IAE1Cg2F,EAAcf,GAAqB,CAACtyH,GAAOq9B,GAE7C,IAAIu2F,EAAappG,GAAI64B,OAAOrjD,EAAMqzH,GAAa,IAAMA,EAAY1lG,WAwDjE,OAvDA0kG,GAAOrhH,EAAOi4B,QAAQ,SAAUllC,EAAO/D,GACrC,IAAIg2B,EAAW09F,EAAW3vH,GACtBiyB,GACFxL,GAAI0iC,SAAS0mE,EAAY5zH,EAAMg2B,EAEnC,IACAq8F,GAAOrhH,EAAO+4B,YAAY,SAAUhmC,EAAO/D,GACzC,IAAIg2B,EAAW09F,EAAW3vH,GACtBiyB,GACFxL,GAAIm/B,UAAUiqE,EAAY5zH,EAAMg2B,EAEpC,IACAq8F,GAAOrhH,EAAO+/D,SAAS,SAAUhtE,GAC/B,IAAIiyB,EAAW09F,EAAW3vH,GACrBymB,GAAI+5B,SAASqvE,EAAY59F,IAC5BxL,GAAIs8B,SAAS8sE,EAAY59F,EAE7B,IACAqH,EAAO+Z,KAAK,kBACZ5sB,GAAI4iC,UAAUimE,EAAa,CACzB1rD,SAAU,WACVx4D,MAAO,QAETkuB,EAAOy4B,UAAUztD,YAAYgrH,GAC7BC,EAAiB9oG,GAAIkgC,SAASrtB,EAAOy4B,UAAW,YAAY,GAC5Dw9D,EAAiB,MAAMhvH,KAAKgvH,GAAkB/+G,SAAS++G,EAAgB,IAAM,EAC7EjB,GAAOmB,EAAc5qG,MAAM,MAAM,SAAU5oB,GACzC,IAAI+D,EAAQymB,GAAIkgC,SAASkpE,EAAY5zH,GAAM,GAC3C,KAAa,qBAATA,GAA+B,oCAAoCsE,KAAKP,KAC1EA,EAAQymB,GAAIkgC,SAASrtB,EAAOy4B,UAAW91D,GAAM,GACN,YAAnCwqB,GAAImmB,MAAM5sC,GAAO4C,gBAIV,UAAT3G,GACqC,YAAnCwqB,GAAImmB,MAAM5sC,GAAO4C,eADvB,CAKA,GAAa,cAAT3G,GACE,QAAQsE,KAAKP,GAAQ,CACvB,GAAuB,IAAnBuvH,EACF,OAGFvvH,EADeu5E,WAAWv5E,IAAU,KAAKO,KAAKP,GAAS,IAAM,GAC1CuvH,EAAiB,IACtC,CAEW,WAATtzH,GAAqB+D,IACvBwvH,GAAc,kBAEhBA,GAAcvzH,EAAO,IAAM+D,EAAQ,GAbnC,CAcF,IACAs5B,EAAO+Z,KAAK,uBACZ5sB,GAAI7c,OAAO0lH,GACJE,CACT,EA8BIM,GAAY,SAAUx2F,GACxB,IAAIu6E,EAhTe,SAAUv6E,GAC7B,IAAIu6E,EAAU,CAAC,EAOX9lC,EAAW,SAAU9xE,EAAMgR,GACzBhR,IACGqY,EAAWrY,IAKTuY,EAAUvH,KACbA,EAAS,CAACA,IAEZwL,EAAOxL,GAAQ,SAAUA,GACnB0H,EAAY1H,EAAOq7C,QACrBr7C,EAAOq7C,MAAQ2f,GAAiBh7D,IAE9B0H,EAAY1H,EAAO4X,SACrB5X,EAAO4X,OAASojD,GAAiBh7D,IAAWi7D,GAAej7D,IAEzD0H,EAAY1H,EAAOrD,SAAWq+D,GAAiBh7D,KAAYi7D,GAAej7D,KAC5EA,EAAOrD,OAAS,QAEdq+D,GAAiBh7D,IAAWi7D,GAAej7D,KAC7CA,EAAOm5F,OAAQ,EACfn5F,EAAOw8D,cAAe,GAEpBn1D,EAAWrH,EAAO+/D,WACpB//D,EAAO+/D,QAAU//D,EAAO+/D,QAAQnoD,MAAM,OAE1C,IACAgvF,EAAQ53G,GAAQgR,GAzBhBkN,GAAOle,GAAM,SAAUgR,EAAQhR,GAC7B8xE,EAAS9xE,EAAMgR,EACjB,IA0BN,EASA,OAFA8gE,EAnVQ,SAAUtnD,GAClB,IAAIotF,EAAU,CACZkc,UAAW,CAAC,CACRzoG,SAAU,QACV4d,OAAQ,CAAE8qF,cAAe,SAE7BC,aAAc,CAAC,CACX3oG,SAAU,QACV4d,OAAQ,CAAE8qF,cAAe,YAE7BE,aAAc,CAAC,CACX5oG,SAAU,QACV4d,OAAQ,CAAE8qF,cAAe,YAE7BG,UAAW,CACT,CACE7oG,SAAU,eACVozC,WAAW,EACXsS,QAAS,aACT65B,iBAAiB,EACjBupB,QAAS,yBAEX,CACE9oG,SAAU,mDACV4d,OAAQ,CAAEmrF,UAAW,QACrBzxB,SAAS,EACTwxB,SAAS,EACT9mB,aAAc,OAEhB,CACEhiF,SAAU,wBACVozC,WAAW,EACXx1B,OAAQ,CAAEic,MAAO,QACjBivE,QAAS,0BAGbE,YAAa,CACX,CACEhpG,SAAU,mDACV4d,OAAQ,CAAEmrF,UAAW,UACrBzxB,SAAS,EACTwxB,QAAS,wBACT9mB,aAAc,OAEhB,CACEhiF,SAAU,eACVozC,WAAW,EACXsS,QAAS,eACT65B,iBAAiB,EACjBupB,QAAS,yBAEX,CACE9oG,SAAU,kBACVozC,WAAW,EACXx1B,OAAQ,CACN0vC,QAAS,QACT27C,WAAY,OACZC,YAAa,QAEfJ,SAAS,GAEX,CACE9oG,SAAU,QACVozC,WAAW,EACXx1B,OAAQ,CACNqrF,WAAY,OACZC,YAAa,QAEfJ,QAAS,0BAGbK,WAAY,CACV,CACEnpG,SAAU,eACVozC,WAAW,EACXsS,QAAS,cACT65B,iBAAiB,EACjBupB,QAAS,yBAEX,CACE9oG,SAAU,mDACV4d,OAAQ,CAAEmrF,UAAW,SACrBzxB,SAAS,EACTwxB,QAAS,wBACT9mB,aAAc,OAEhB,CACEhiF,SAAU,wBACVozC,WAAW,EACXx1B,OAAQ,CAAEic,MAAO,SACjBivE,QAAS,0BAGbM,aAAc,CAAC,CACXppG,SAAU,mDACV4d,OAAQ,CAAEmrF,UAAW,WACrBzxB,SAAS,EACT0K,aAAc,MACd8mB,QAAS,0BAEbO,KAAM,CACJ,CACE5mF,OAAQ,SACRngC,OAAQ,MACRq7F,oBAAqB,CACnB,QACA,UAGJ,CACEl7D,OAAQ,OACR7E,OAAQ,CAAE0rF,WAAY,SAExB,CACE7mF,OAAQ,IACRngC,OAAQ,MACRq7F,oBAAqB,CACnB,QACA,WAIN4rB,OAAQ,CACN,CACE9mF,OAAQ,KACRngC,OAAQ,MACRq7F,oBAAqB,CACnB,QACA,UAGJ,CACEl7D,OAAQ,OACR7E,OAAQ,CAAE4rF,UAAW,WAEvB,CACE/mF,OAAQ,IACRngC,OAAQ,MACRq7F,oBAAqB,CACnB,QACA,WAIN8rB,UAAW,CACT,CACEhnF,OAAQ,OACR7E,OAAQ,CAAEwhE,eAAgB,aAC1B3pB,OAAO,GAET,CACEhzC,OAAQ,IACRngC,OAAQ,MACRq7F,oBAAqB,CACnB,QACA,WAIN+rB,cAAe,CACb,CACEjnF,OAAQ,OACR7E,OAAQ,CAAEwhE,eAAgB,gBAC1B3pB,OAAO,GAET,CACEhzC,OAAQ,SACRngC,OAAQ,MACRq7F,oBAAqB,CACnB,QACA,UAGJ,CACEl7D,OAAQ,IACRngC,OAAQ,MACRq7F,oBAAqB,CACnB,QACA,WAINgsB,UAAW,CACTlnF,OAAQ,OACR7E,OAAQ,CAAEmI,MAAO,UACjB03D,OAAO,EACPI,gBAAgB,EAChBmD,oBAAoB,GAEtB4oB,YAAa,CACXnnF,OAAQ,OACR7E,OAAQ,CAAEyjE,gBAAiB,UAC3B5D,OAAO,EACPI,gBAAgB,EAChBmD,oBAAoB,GAEtB6oB,SAAU,CACRpnF,OAAQ,OACR2pE,QAAQ,EACRxuE,OAAQ,CAAEksF,WAAY,UACtB9oB,oBAAoB,GAEtB+oB,SAAU,CACRtnF,OAAQ,OACR2pE,QAAQ,EACRxuE,OAAQ,CAAEosF,SAAU,UACpBhpB,oBAAoB,GAEtBipB,WAAY,CACVjqG,SAAU,mCACVgiF,aAAc,IACdpkE,OAAQ,CAAEssF,WAAY,WAExBC,eAAgB,CACd1nF,OAAQ,OACR/D,WAAY,CAAEgb,MAAO,WAEvB0wE,WAAY,CACVn2D,MAAO,aACP72D,SAAS,EACTkF,OAAQ,OAEV+nH,UAAW,CAAE5nF,OAAQ,OACrB6nF,YAAa,CAAE7nF,OAAQ,OACvBgkB,KAAM,CAAEhkB,OAAQ,QAChB1P,KAAM,CACJ0P,OAAQ,IACRziB,SAAU,IACV1d,OAAQ,MACRib,OAAO,EACPyjC,MAAM,EACN62C,QAAS,SAAU34E,EAAMqrG,EAAMC,GAC7B,OAAOpkG,GAAYlH,IAASA,EAAKjiB,aAAa,OAChD,EACA4iG,SAAU,SAAUx2E,EAAKkhG,EAAMpqD,GAC7BjjD,GAAMpN,KAAKqwD,GAAM,SAAUznE,EAAOjD,GAChC0pB,EAAIm/B,UAAUj1B,EAAK5zB,EAAKiD,EAC1B,GACF,GAEFi9C,KAAM,CACJlT,OAAQ,OACRu+D,oBAAoB,EACpBnD,gBAAgB,EAChBn/D,WAAY,CACV,KAAQ,SACR,gBAAiB,SAAUyhC,GACzB,IAAI5lD,EACJ,OAA+E,QAAvEA,EAAK4lD,aAAmC,EAASA,EAAKsqD,mBAAgC,IAAPlwG,EAAgBA,EAAK,IAC9G,IAGJmwG,aAAc,CACZ,CACE1qG,SAAU,wFACV1d,OAAQ,MACRib,OAAO,EACPujD,QAAQ,EACRqB,cAAc,EACdnhB,MAAM,GAER,CACEhhC,SAAU,OACV0e,WAAY,CACV,QACA,SAEFp8B,OAAQ,QACRib,OAAO,EACPujD,QAAQ,EACR9f,MAAM,GAER,CACEhhC,SAAU,IACV0e,WAAY,CACV,QACA,SAEFnhB,OAAO,EACPujD,QAAQ,EACR9f,MAAM,KAUZ,OANA9jC,GAAMpN,KAAK,iDAAiDyN,MAAM,OAAO,SAAU5oB,GACjF43G,EAAQ53G,GAAQ,CACds/D,MAAOt/D,EACP2N,OAAQ,MAEZ,IACOiqG,CACT,CAgDWngF,CAAI4F,EAAO7S,MACpBsnD,EA/0Xe,SAAUz0C,GACzB,OAAOA,EAAO6hC,SAAS,UACzB,CA60XW82D,CAAW34F,IACb,CACL5F,IA/CU,SAAUz3B,GACpB,OAAO4Y,EAAc5Y,GAAQ43G,EAAQ53G,GAAQ43G,CAC/C,EA8CE72D,IA7CQ,SAAU/gD,GAClB,OAAO6e,GAAM+4F,EAAS53G,EACxB,EA4CE8xE,SAAUA,EACVmkD,WAZe,SAAUj2H,GAIzB,OAHIA,GAAQ43G,EAAQ53G,WACX43G,EAAQ53G,GAEV43G,CACT,EASF,CA0PgBse,CAAe74F,GACzB84F,EAAoB9kE,GAAK,MAG7B,OAjCY,SAAUh0B,GACtBA,EAAO+4F,YAAY,SAAU,GAAI,QACjC/4F,EAAO+4F,YAAY,SAAU,GAAI,UACjC/4F,EAAO+4F,YAAY,SAAU,GAAI,aACjC,IAAK,IAAIv2H,EAAI,EAAGA,GAAK,EAAGA,IACtBw9B,EAAO+4F,YAAY,UAAYv2H,EAAG,GAAI,CACpC,eACA,EACA,IAAMA,IAGVw9B,EAAO+4F,YAAY,WAAY,GAAI,CACjC,eACA,EACA,MAEF/4F,EAAO+4F,YAAY,WAAY,GAAI,CACjC,eACA,EACA,QAEF/4F,EAAO+4F,YAAY,WAAY,GAAI,CACjC,eACA,EACA,WAEJ,CAKEC,CAAQh5F,GA7hLI,SAAUA,GACtBA,EAAO8pB,GAAG,mBAAmB,SAAU77C,IAXb,SAAU+xB,EAAQi5F,GAC5C,IAAI1gE,EAAYv4B,EAAOu4B,UAAWnxD,EAAO44B,EAAOy4B,UAChD0uC,GAAqBnnE,EAAQ,MAAM,GAClB,IAAZi5F,GAA6B,KAAZA,IAAmB1gE,EAAUsI,eAAiBtI,EAAUwkB,WAAWxoE,YAAcmyF,IACrGS,GAAqBnnE,EAAQsrC,GAAwBlkE,EAAMmxD,EAAUwkB,aAEvD,KAAZk8C,GAA8B,KAAZA,GACpB9xB,GAAqBnnE,EAAQsrC,GAAwBlkE,EAAMmxD,EAAUwkB,YAEzE,CAGIm8C,CAAsBl5F,EAAQ/xB,EAAEgrH,QAClC,GACF,CA0hLEE,CAAQn5F,GACD,CACL5F,IAAKmgF,EAAQngF,IACbspB,IAAK62D,EAAQ72D,IACb+wB,SAAU8lC,EAAQ9lC,SAClBmkD,WAAYre,EAAQqe,WACpB58G,MAAO,SAAUrZ,EAAMwrE,EAAMjhD,IA3hHf,SAAU8S,EAAQr9B,EAAMwrE,EAAMjhD,GAC9CivF,GAAwBn8E,GAAQqlE,UAAUrpF,MAAMrZ,EAAMwrE,EAAMjhD,EAC9D,CA0hHMksG,CAAYp5F,EAAQr9B,EAAMwrE,EAAMjhD,EAClC,EACA5c,OAAQ,SAAU3N,EAAMwrE,EAAMjhD,EAAMs4E,IA3hHrB,SAAUxlE,EAAQr9B,EAAMwrE,EAAMjhD,EAAMs4E,GACrD2W,GAAwBn8E,GAAQqlE,UAAU/0F,OAAO3N,EAAMwrE,EAAMjhD,EAAMs4E,EACrE,CA0hHM6zB,CAAar5F,EAAQr9B,EAAMwrE,EAAMjhD,EAAMs4E,EACzC,EACA4U,OAAQ,SAAUz3G,EAAMwrE,EAAMjhD,IA3hHf,SAAU8S,EAAQr9B,EAAMwrE,EAAMjhD,GAC/CivF,GAAwBn8E,GAAQqlE,UAAU+U,OAAOz3G,EAAMwrE,EAAMjhD,EAC/D,CA0hHMosG,CAAat5F,EAAQr9B,EAAMwrE,EAAMjhD,EACnC,EACAZ,MAAO,SAAU3pB,EAAMwrE,EAAMjhD,EAAMs4E,GACjC,OApjHY,SAAUxlE,EAAQr9B,EAAMwrE,EAAMjhD,EAAMs4E,GACpD,OAAO2W,GAAwBn8E,GAAQqlE,UAAU/4E,MAAM3pB,EAAMwrE,EAAMjhD,EAAMs4E,EAC3E,CAkjHa+zB,CAAYv5F,EAAQr9B,EAAMwrE,EAAMjhD,EAAMs4E,EAC/C,EACAr7C,QAAS,SAAU71B,GACjB,OA3iHc,SAAU0L,EAAQ1L,GACpC,OAAO6nF,GAAwBn8E,GAAQqlE,UAAUl7C,QAAQ71B,EAC3D,CAyiHaklG,CAAcx5F,EAAQ1L,EAC/B,EACAylF,SAAU,SAAUzlF,EAAO65C,GACzB,OAvjHgB,SAAUnuC,EAAQ1L,EAAO65C,GAC7C,OAAOguC,GAAwBn8E,GAAQqlE,UAAU0U,SAASzlF,EAAO65C,EACnE,CAqjHasrD,CAAgBz5F,EAAQ1L,EAAO65C,EACxC,EACAs3B,UAAW,SAAUv4E,EAAMvqB,EAAMwrE,EAAMq3B,GACrC,OAvjHgB,SAAUxlE,EAAQ9S,EAAMvqB,EAAMwrE,EAAMq3B,GACxD,OAAO2W,GAAwBn8E,GAAQqlE,UAAUI,UAAUv4E,EAAMvqB,EAAMwrE,EAAMq3B,EAC/E,CAqjHak0B,CAAgB15F,EAAQ9S,EAAMvqB,EAAMwrE,EAAMq3B,EACnD,EACA0U,SAAU,SAAUv3G,GAClB,OAvjHe,SAAUq9B,EAAQr9B,GACrC,OAAOw5G,GAAwBn8E,GAAQqlE,UAAU6U,SAASv3G,EAC5D,CAqjHag3H,CAAe35F,EAAQr9B,EAChC,EACA03G,cAAe,SAAUE,EAAS70G,EAAU8/F,EAASr3B,GACnD,OA3iHc,SAAUnuC,EAAQs6E,EAA2BC,EAAS70G,EAAU8/F,EAASr3B,GAC3F,OAAOguC,GAAwBn8E,GAAQqlE,UAAUgV,cAAcC,EAA2BC,EAAS70G,EAAU8/F,EAASr3B,EACxH,CAyiHaksC,CAAcr6E,EAAQ84F,EAAmBve,EAAS70G,EAAU8/F,EAASr3B,EAC9E,EACA4nD,WAAYx5G,EAAMw5G,GAAY/1F,GAElC,EAEI45F,GAAsB,SAAUC,GAClC,OAAQA,EAAIvwH,eACZ,IAAK,OACL,IAAK,OACL,IAAK,aACL,IAAK,WACH,OAAO,EACT,QACE,OAAO,EAEX,EAsGIwwH,GAAc,SAAU95F,GAC1B,IAAIm3E,EAAiBzwG,KACjBsxG,EAAQhkD,GAAK,GACb9qD,EAAQ8qD,GAAK,GACbgiB,EAAc,CAChB97C,KAAM,GACNg+E,QAAQ,EACRG,aAAc,YAjuHC,SAAUr4E,EAAQg4E,EAAOb,GAC1CgF,GAAwBn8E,GAAQg2C,YAAYqiC,aAAaL,EAAOb,EAClE,CAguHMkB,CAAar4E,EAAQg4E,EAAOb,EAC9B,EACA7vG,IAAK,SAAUiwG,EAAOhhE,GACpB,OAluHa,SAAUvW,EAAQg2C,EAAa9sE,EAAO8uG,EAAOb,EAAgBI,EAAOhhE,GACrF,OAAO4lE,GAAwBn8E,GAAQg2C,YAAY1uE,IAAI0uE,EAAa9sE,EAAO8uG,EAAOb,EAAgBI,EAAOhhE,EAC3G,CAguHawjF,CAAa/5F,EAAQg2C,EAAa9sE,EAAO8uG,EAAOb,EAAgBI,EAAOhhE,EAChF,EACAuiE,KAAM,WACJ,OAluHK,SAAU94E,EAAQg2C,EAAagiC,EAAO9uG,GAC/C,OAAOizG,GAAwBn8E,GAAQg2C,YAAY8iC,KAAK9iC,EAAagiC,EAAO9uG,EAC9E,CAguHa4vG,CAAK94E,EAAQg2C,EAAagiC,EAAO9uG,EAC1C,EACA8vG,KAAM,WACJ,OAluHK,SAAUh5E,EAAQ92B,EAAOgxB,GAClC,OAAOiiF,GAAwBn8E,GAAQg2C,YAAYgjC,KAAK9vG,EAAOgxB,EACjE,CAguHa8+E,CAAKh5E,EAAQ92B,EAAO8sE,EAAY97C,KACzC,EACAm9B,MAAO,YAjuHC,SAAUr3B,EAAQg2C,EAAa9sE,GACzCizG,GAAwBn8E,GAAQg2C,YAAY3e,MAAM2e,EAAa9sE,EACjE,CAguHMmuD,CAAMr3B,EAAQg2C,EAAa9sE,EAC7B,EACAooF,MAAO,YAjuHC,SAAUtxD,EAAQg2C,GAC5BmmC,GAAwBn8E,GAAQg2C,YAAYsb,MAAMtb,EACpD,CAguHMsb,CAAMtxD,EAAQg2C,EAChB,EACAojC,QAAS,WACP,OAluHQ,SAAUp5E,EAAQg2C,EAAa9sE,GAC3C,OAAOizG,GAAwBn8E,GAAQg2C,YAAYojC,QAAQpjC,EAAa9sE,EAC1E,CAguHakwG,CAAQp5E,EAAQg2C,EAAa9sE,EACtC,EACAowG,QAAS,WACP,OAluHQ,SAAUt5E,EAAQg2C,EAAa9sE,GAC3C,OAAOizG,GAAwBn8E,GAAQg2C,YAAYsjC,QAAQtjC,EAAa9sE,EAC1E,CAguHaowG,CAAQt5E,EAAQg2C,EAAa9sE,EACtC,EACA+sE,SAAU,SAAUvwE,GAClB,OAluHS,SAAUs6B,EAAQg2C,EAAagiC,EAAOtyG,GACnD,OAAOy2G,GAAwBn8E,GAAQg2C,YAAYC,SAASD,EAAagiC,EAAOtyG,EAClF,CAguHauwE,CAASj2C,EAAQg2C,EAAagiC,EAAOtyG,EAC9C,EACA8zG,OAAQ,SAAU9zG,IAjuHT,SAAUs6B,EAAQg4E,EAAOtyG,GACpCy2G,GAAwBn8E,GAAQg2C,YAAYwjC,OAAOxB,EAAOtyG,EAC5D,CAguHM8zG,CAAOx5E,EAAQg4E,EAAOtyG,EACxB,EACAi0G,MAAO,SAAUC,EAAWC,IAjuHpB,SAAU75E,EAAQg2C,EAAa9sE,EAAO0wG,EAAWC,GAC3DsC,GAAwBn8E,GAAQg2C,YAAY2jC,MAAM3jC,EAAa9sE,EAAO0wG,EAAWC,EACnF,CAguHMF,CAAM35E,EAAQg2C,EAAa9sE,EAAO0wG,EAAWC,EAC/C,GAMF,OAJKkC,GAAM/7E,IA9IQ,SAAUA,EAAQg2C,EAAagiC,GAClD,IAAIgiB,EAAwBhmE,IAAK,GAC7BimE,EAAwB,SAAUhsH,GACpCgqG,GAAUjiC,GAAa,EAAOgiC,GAC9BhiC,EAAY1uE,IAAI,CAAC,EAAG2G,EACtB,EACA+xB,EAAO8pB,GAAG,QAAQ,WAChBksB,EAAY1uE,KACd,IACA04B,EAAO8pB,GAAG,qBAAqB,SAAU77C,GACvC,IAAI4rH,EAAM5rH,EAAEisH,QACPN,GAAoBC,KACvB1hB,GAAUniC,EAAagiC,GACvBhiC,EAAYqiC,eAEhB,IACAr4E,EAAO8pB,GAAG,eAAe,SAAU77C,GACjC,IAAI4rH,EAAM5rH,EAAEisH,QACPN,GAAoBC,IACvBI,EAAsBhsH,EAE1B,IACA+xB,EAAO8pB,GAAG,yBAAyB,WACjCksB,EAAYqiC,cACd,IACAr4E,EAAO8pB,GAAG,iCAAkCmwE,GAC5Cj6F,EAAO8pB,GAAG,UAAWmwE,GACrBj6F,EAAO8pB,GAAG,SAAS,SAAU77C,GAC3B,IAAIgrH,EAAUhrH,EAAEgrH,QACZhrH,EAAEgpC,wBAGFgiF,GAAW,IAAMA,GAAW,IAAMA,GAAW,IAAMA,GAAW,IAAkB,KAAZA,GAAkBhrH,EAAEqqE,WAC1F2hD,IACAj6F,EAAOi8C,eAEO,KAAZg9C,GAA8B,IAAZA,GACpBj5F,EAAOi8C,cAEL+9C,EAAsB5/F,OAAS47C,EAAYkiC,SAAoE,IAA1DR,GAAOV,GAAiBh3E,GAASg2C,EAAY97C,KAAK,OAChF,IAArB8F,EAAOm6F,YACTn6F,EAAO44E,UAAS,GAChB54E,EAAO+Z,KAAK,SAAU,CACpBw9D,MAAOvhC,EAAY97C,KAAK,GACxBs+E,UAAW,QAGfx4E,EAAO+Z,KAAK,cACZigF,EAAsB72F,KAAI,GAC1BnD,EAAOi8C,eAEX,IACAj8C,EAAO8pB,GAAG,WAAW,SAAU77C,GAC7B,IAAIgrH,EAAUhrH,EAAEgrH,QAChB,IAAIhrH,EAAEgpC,qBAGN,GAAIgiF,GAAW,IAAMA,GAAW,IAAMA,GAAW,IAAMA,GAAW,IAAkB,KAAZA,EAClEjjD,EAAYkiC,QACd+hB,EAAsBhsH,OAF1B,CAMA,IAAImsH,EAASnsH,EAAEqqE,UAAYrqE,EAAEsqE,QAAUtqE,EAAEsqC,UACpC0gF,EAAU,IAAMA,EAAU,KAAmB,MAAZA,GAA+B,KAAZA,GAAmBjjD,EAAYkiC,QAAWkiB,IACjGpkD,EAAYqiC,eACZJ,GAAUjiC,GAAa,EAAMgiC,GAC7BhiC,EAAY1uE,IAAI,CAAC,EAAG2G,GACpB+rH,EAAsB72F,KAAI,GAN5B,CAQF,IACAnD,EAAO8pB,GAAG,aAAa,SAAU77C,GAC3B+nE,EAAYkiC,QACd+hB,EAAsBhsH,EAE1B,IAUA+xB,EAAO8pB,GAAG,SAAS,SAAU77C,GANF,IAAUsoC,EAO/BtoC,EAAEosH,YATqB,0BASiBpsH,EAT/BosH,WAGc,gBADQ9jF,EAOoCtoC,GAN1DosH,WAA6C,OAAf9jF,EAAMrc,MAErB,SAAUqc,GACtC,MAA2B,oBAApBA,EAAM8jF,WAAuD,mBAApB9jF,EAAM8jF,SACxD,CAE+EC,CAAwBrsH,KACnGgsH,EAAsBhsH,EAE1B,IACA+xB,EAAO8pB,GAAG,gCAAgC,SAAU77C,GAC7CA,EAAEgpC,sBACLjX,EAAOi8C,aAEX,GACF,CAgDI2zC,CAAe5vF,EAAQg2C,EAAagiC,GA/Cb,SAAUh4E,GACnCA,EAAO+4F,YAAY,SAAU,GAAI,QACjC/4F,EAAO+4F,YAAY,sBAAuB,GAAI,OAChD,CA8CEwB,CAAqBv6F,GACdg2C,CACT,EAEIwkD,GAAoB,CACtB,EACA,GACAnjD,GAAGc,KACHd,GAAGa,IACH,GACA,GACA,GACA,IACA,IACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACAb,GAAGG,KACHH,GAAGU,GACHV,GAAGM,KACHN,GAAGO,OACHjsE,OAAOme,GAAI5B,QAAQzB,YAAc,CAAC,KAAO,IACvCg0G,GAAkB,uBAClBC,GAAkB,SAAUzsH,GAC9B,MAAkB,YAAXA,EAAE7B,MAAiC,UAAX6B,EAAE7B,IACnC,EACIuuH,GAAgB,SAAU1sH,GAC5B,IAAIgrH,EAAUhrH,EAAEgrH,QAChB,OAAOA,IAAY5hD,GAAGC,WAAa2hD,IAAY5hD,GAAGE,MACpD,EA2DIqjD,GAAY,4CAKZC,GAAiB,SAAU76F,EAAQ3I,GACrC,OAAOtJ,GAAKX,GAAqBiK,GAx5YH,SAAU2I,GACxC,OAAOA,EAAO6hC,SAAS,6BAA8B,+BAAgC,SACvF,CAs5YyCi5D,CAA0B96F,GACnE,EAOI+6F,GAAiB,SAAUF,EAAgBt3F,EAAUzyB,GACvD,IAAIqhC,EAJkB,SAAU0oF,EAAgBt3F,EAAUzyB,GAC1D,OAAO0O,EAASisC,GAAS+E,IAAI9C,WAAW58C,EAAIlG,YAAa,IAAK24B,GAAWs3F,EAC3E,CAEgBG,CAAkBH,EAAgBt3F,EAAUzyB,GAC1D,OAAO0N,EAASC,KAAK0zB,EAAQA,EAAQ1vC,OAAS,GAChD,EASIw4H,GAAoB,SAAU93E,EAASryC,GACzC,IAAKA,EACH,OAAOA,EAET,IAAIlG,EAAYkG,EAAIlG,YAAa66B,EAAS30B,EAAI20B,SAC9C,OAAI0d,EACE9d,GAAuBz6B,GACrBsqB,GAAStqB,EAAUolB,aACdytC,GAAc7yD,EAAUolB,YAAa,GAErCytC,GAAc1U,MAAMn+C,GAGtB46B,GAAe10B,GAAO2sD,GAAc7yD,EAAW66B,EAAS,GAAK30B,EAGlEu0B,GAAuBz6B,GACrBsqB,GAAStqB,EAAUmlB,iBACd0tC,GAAc7yD,EAAUmlB,gBAAiBnlB,EAAUmlB,gBAAgBmK,KAAKz3B,QAExEg7D,GAAc3U,OAAOl+C,GAGvB+6B,GAAc70B,GAAO2sD,GAAc7yD,EAAW66B,EAAS,GAAK30B,CAGzE,EACIoqH,GAAoB3+G,EAAM0+G,IAAmB,GAC7CE,GAAqB5+G,EAAM0+G,IAAmB,GAO9CG,GAAwB,SAAUtlH,GACpC,OAAOyuB,GAAczuB,IAAY2uB,GAAW3uB,EAC9C,EACIulH,GAAmB,SAAU93F,EAAUlM,GACzC,OAAI3I,GAAW6U,EAAUlM,GAChBwH,GAAUxH,EAAK+jG,GAVP,SAAU73F,GAC3B,OAAO,SAAUlM,GACf,OAAO3d,GAAG6pB,EAAUnW,GAAqBiK,EAAIlK,IAAI7hB,YACnD,CACF,CAMiDgwH,CAAa/3F,IAEnD/kB,EAAS1B,MAEpB,EAMIy+G,GAAgB,SAAUv7F,GACxBA,EAAO7S,IAAIskC,QAAQzxB,EAAOy4B,aAC5Bz4B,EAAOg5D,WAAW,IAPM,SAAUh5D,GACpC,IAAI54B,EAAO44B,EAAOy4B,UACdvrC,EAAO9lB,EAAKkpB,YAAc0P,EAAO7S,IAAI4hC,QAAQ3nD,EAAKkpB,YAAclpB,EAAKkpB,WAAalpB,EACtF44B,EAAOu4B,UAAU0gC,kBAAkB/rE,EAAM,EAC3C,CAIIsuG,CAAsBx7F,GAE1B,EAwBIy7F,GAAgB,SAAUh9G,EAAMwE,GAClC,MAAO,CACLxE,KAAMA,EACNwE,GAAIA,EAER,EACIy4G,GAAmB,SAAUn4F,EAAUzyB,GACzC,IAAI+7C,EAAUz/B,GAAqBmW,GAC/Bo4F,EAAevuG,GAAqBtc,EAAIlG,aAC5C,OAAOywH,GAAiBxuE,EAAS8uE,GAAcvyH,KAAI,SAAU64D,GAC3D,OAhBgB,SAAUA,EAAOqI,GACnC,MAAO,CACLrI,MAAOA,EACPqI,SAAUA,EAEd,CAWWsxD,CAAc35D,EAAOnxD,EAC9B,GACF,EA8CI+qH,GAAgC,SAAU55D,GAC5C,IAAIjwC,EAAa7B,GAAS8xC,GAC1B,OAAOliD,EAAYiS,EAAYoS,IAAWnnB,KAAKb,EAAS4V,IAAa,SAAU9oB,GAC7E,OAAO8oB,EAAW3X,MAAM,EAAGnR,EAC7B,GACF,EACI4yH,GAAkB,SAAU75D,GAC9B,IAAI9xC,EAAW0rG,GAA8B55D,GAE7C,OADA9iD,EAAOgR,EAAU2B,IACV3B,CACT,EACI4rG,GAAkB,SAAUx4F,EAAU0+B,GACxC,IAAI9vB,EAAU6hD,GAAe/xB,EAAO1+B,GACpC,OAAOzjB,EAAOqyB,EAAQlyB,WAAW,SAAUnK,GACzC,OAAO+xB,GAAU/xB,EACnB,IAAGgI,KAAKgU,GACV,EAMIkqG,GAAmB,SAAUz4F,EAAU8wD,EAAW4nC,EAASC,GAC7D,GAAIr0F,GAAUo0F,GAEZ,OADAtoC,GAAkBsoC,GACX/wD,GAAgB+wD,EAAQ9uG,KALnB,IAFP3N,EAASyQ,GASEisG,IATgB,SAAUrxH,GAC1C,OAAQg9B,GAAUh9B,EACpB,IAAGpI,QAOkColC,GAAUwsD,IAC7CjjE,GAAS8qG,EAAgB9uG,GAAqB,OAEhD,IAAIk9C,EAAWW,GAAagxD,EAAQ9uG,IAAKswC,GAAc3U,OAAOozE,EAAe/uG,MAK7E,OAJAhO,EAAO28G,GAAgBznC,IAAY,SAAU/8D,GAC3ClG,GAAS8qG,EAAgB5kG,EAC3B,IACAykG,GAAgBx4F,EAAU8wD,GACnB/pB,CACT,EACI6xD,GAAqB,SAAU54F,EAAU8wD,EAAW4nC,GACtD,GAAIp0F,GAAUo0F,GAKZ,OAJAnqG,GAASmqG,GACLp0F,GAAUwsD,IACZV,GAAkBU,GAEbnpB,GAAgBmpB,EAAUlnE,KAEnC,IAAIm9C,EAAWa,GAAe8wD,EAAQ9uG,KAKtC,OAJAhO,EAAO28G,GAAgBznC,IAAY,SAAU/8D,GAC3C/F,GAAS0qG,EAAS3kG,EACpB,IACAykG,GAAgBx4F,EAAU8wD,GACnB/pB,CACT,EAQI8xD,GAAS,SAAUn9E,EAAOgjB,GAC5B6I,GAAW7rB,EAAOgjB,EAAM90C,KAAK/jB,KAAI,SAAUkhE,GACzC,OAAOA,EAASpM,SAClB,IAAG90D,IAAIgkB,IAAsB7jB,OAAO+6B,IAAQxmB,KAAKgU,GACnD,EACIuqG,GAAiB,SAAU94F,EAAU8wD,EAAW4nC,GAGlD,OAFAG,IAAO,EAAM/nC,GACb+nC,IAAO,EAAOH,GAVQ,SAAU5nC,EAAW4nC,GAC3C,OAAOvtG,GAAWutG,EAAS5nC,GALJ,SAAU4nC,EAASh6D,GAC1C,IAAIq6D,EAAmBtoC,GAAe/xB,EAAOg6D,GAC7C,OAAOz9G,EAASC,KAAK69G,EAAiBA,EAAiB75H,OAAS,GAClE,CAE0C85H,CAAmBN,EAAS5nC,GAAa71E,EAAS1B,MAC5F,CASS0/G,CAAkBnoC,EAAW4nC,GAASh/G,KAAKV,EAAM4/G,GAAoB54F,EAAU8wD,EAAW4nC,GAAU1/G,EAAMy/G,GAAkBz4F,EAAU8wD,EAAW4nC,GAC1J,EACIQ,GAAc,SAAUl5F,EAAU4f,EAASu5E,EAAQC,GACrD,OAAOx5E,EAAUk5E,GAAe94F,EAAUo5F,EAAQD,GAAUL,GAAe94F,EAAUm5F,EAAQC,EAC/F,EAEIC,GAAoB,SAAU58F,EAAQmjB,GACxC,IAAI5f,EAAWnW,GAAqB4S,EAAOy4B,WACvC6R,EA/EO,SAAU/mC,EAAU4f,EAASmV,GACxC,OAAOA,EAAI8I,UAdO,SAAU79B,EAAU4f,EAASmV,GAC/C,IAAIukE,EAAenB,GAAiBn4F,EAAUk6B,GAAcU,eAAe7F,IACvEwkE,EAAaD,EAAa9+G,MAAK,SAAUg/G,GAC3C,OAAOtyD,GAAatnB,EAAS5f,EAAUw5F,EAASzyD,UAAUvsD,MAAK,SAAUkF,GACvE,OAAOy4G,GAAiBn4F,EAAUtgB,GAAI7Z,KAAI,SAAU2zH,GAClD,OApBS,SAAUx5F,EAAU4f,EAASy4E,GAC5C,OAAItmG,GAAOsmG,EAActxD,SAASpM,aAAiD,IAAnCr2B,GAAU+zF,EAAc35D,OAC/D6I,IAAW,EAAO8wD,EAAc35D,MAAM90C,KAAKpP,MAAK,SAAUi/G,GAC/D,OAAIA,EAAoB/+D,QAAQ29D,EAActxD,UACrCG,GAAatnB,EAAS5f,EAAUy5F,GAAqBj/G,MAAK,SAAUkF,GACzE,OAAOy4G,GAAiBn4F,EAAUtgB,EACpC,IAEOzE,EAASJ,KAAKw9G,EAEzB,IAAGt+G,MAAMs+G,GAEFA,CAEX,CAMeqB,CAAW15F,EAAU4f,EAAS45E,EACvC,GACF,GACF,IACA,OAAOhnG,GAAM8mG,EAAcC,EAAYrB,IAAelyH,QAAO,SAAUkyH,GACrE,OAtCoB,SAAUA,GAChC,OAAgE,IAAzD/hH,GAAG+hH,EAAch9G,KAAKwjD,MAAOw5D,EAAcx4G,GAAGg/C,MACvD,CAoCWi7D,CAAkBzB,IAnCT,SAAUA,GAC5B,OAAO/uG,GAAO+uG,EAAch9G,KAAKwjD,OAAOlkD,MAAK,SAAUo/G,GACrD,OAAOzwG,GAAO+uG,EAAcx4G,GAAGg/C,OAAO14D,QAAO,SAAU6zH,GACrD,OAAO1jH,GAAGyjH,EAASC,EACrB,GACF,IAAGhgH,QACL,CA6B+CigH,CAAc5B,IA5B1C,SAAUA,GAC3B,OAAkE,IAA3DhmG,GAAyBgmG,EAAch9G,KAAKwjD,MAAM90C,OAA2E,IAAzDsI,GAAyBgmG,EAAcx4G,GAAGg/C,MAAM90C,IAC7H,CA0B+EmwG,CAAa7B,EAC1F,GACF,CAEyB8B,CAAch6F,EAAU4f,EAASmV,GAAO95C,EAAS1B,MAC1E,CA6EiB0gH,CAAOj6F,EAASpW,IAAKg2B,EAASnjB,EAAOu4B,UAAUC,UAAUz6C,MAAK,SAAU09G,GACrF,OAAOgB,GAAYl5F,EAAU4f,EAASs4E,EAAch9G,KAAKwjD,MAAOw5D,EAAcx4G,GAAGg/C,MACnF,IAIA,OAHAqI,EAASxsD,MAAK,SAAUhN,GACtBkvB,EAAOu4B,UAAU2U,OAAOp8D,EAAIitD,UAC9B,IACOuM,EAASltD,QAClB,EAgBIqgH,GAAmB,SAAUzxG,EAAMssE,GACrC,IAAIprE,EAAOE,GAAqBkrE,GAC5B76D,EAASlhB,EAAM7C,GAAIsS,GACvB,OAAO2S,GAAWzR,EAAMyX,GAAelH,GAAQrgB,QACjD,EAcIsgH,GAAgB,SAAU19F,GAC5B,IAAIuD,EAAWnW,GAAqB4S,EAAOy4B,WAE3C,OAbyB,SAAUzsC,EAAMssC,GACzC,IAAIqlE,EAAa1yD,GAAaj/C,EAAKmB,IAAKswC,GAAcU,eAAe7F,IAAMj7C,SACvEugH,EAAS5yD,GAAah/C,EAAKmB,IAAKswC,GAAcW,aAAa9F,IAAMj7C,SACrE,OANuB,SAAU2O,EAAMssC,GACvC,OAAOmlE,GAAiBzxG,EAAMssC,EAAIjyB,iBAAmBo3F,GAAiBzxG,EAAMssC,EAAIhG,aAClF,CAIUurE,CAAmB7xG,EAAMssC,IAAQqlE,GAAcC,CACzD,CASSE,CAAqBv6F,EADlBvD,EAAOu4B,UAAUC,UAPX,SAAUx4B,GAG1B,OAFAA,EAAOg5D,WAAW,IAClBh5D,EAAOu4B,UAAU0gC,qBACV,CACT,CAI+C8kC,CAAY/9F,GAnC9B,SAAUuD,EAAUg1B,GAC/C,IAAID,EAAMC,EAAUC,SACpB,OAAOziC,GAAMslG,GAAiB93F,EAAUnW,GAAqBkrC,EAAIjyB,iBAAkBg1F,GAAiB93F,EAAUnW,GAAqBkrC,EAAIhG,gBAAgB,SAAUoqE,EAAQC,GACvK,OAA2B,IAAvBjjH,GAAGgjH,EAAQC,KACbrkE,EAAI2kC,iBACJw/B,GAAYl5F,GAAU,EAAMm5F,EAAQC,GAAQ7+G,MAAK,SAAUhN,GACzDynD,EAAU2U,OAAOp8D,EAAIitD,UACvB,KACO,EAIX,IAAGzgD,OAAM,EACX,CAsBqE0gH,CAAuBz6F,EAAUvD,EAAOu4B,UAC7G,EACI0lE,GAAoB,SAAUj+F,EAAQk+F,GACxC,OAAOl+F,EAAOu4B,UAAUsI,eAAwB68D,GAAc19F,EAChE,EAEIm+F,GAA0B3oG,GAC1B4oG,GAA2B3oG,GAC3B4oG,GAAY,SAAUzkE,EAAW55B,EAAQ9S,EAAM47B,EAAQ51B,GACzD,OAAO1U,EAASC,KAAKuhB,EAAOsiE,oBAAoB+7B,UAAUzkE,EAAW1sC,EAAM47B,EAAQ51B,GACrF,EAMI45C,GAAa,SAAU9sC,EAAQ9S,GAEjC,OADQ8S,EAAO+Z,KAAK,uBAAwB,CAAE92C,OAAQiqB,IAChD+pB,qBACGz4B,EAAS1B,OAEX0B,EAASJ,KAVC,SAAU8O,GAC3B,IAAIorC,EAAMprC,EAAKwC,cAAcg/B,cAE7B,OADA4J,EAAIwU,WAAW5/C,GACRorC,CACT,CAMuBgmE,CAAapxG,GACpC,EACIqxG,GAAqB,SAAUv+F,EAAQ1V,EAAO4I,GAChD,IAAIu1C,EAAkBN,GAAe,EAAGnoC,EAAOy4B,UAAWnuC,GACtDozC,EAAgBD,GAAcU,eAAesK,GAC7C+1D,EAAoB9gE,EAAcQ,UACtC,GAAI2H,GAAwB24D,GAC1B,OAAOH,GAAU,EAAGr+F,EAAQw+F,GAAoB9gE,EAAc93B,WAAW,GAE3E,IAAI64F,EAA0B/gE,EAAcQ,SAAQ,GACpD,GAAI2H,GAAwB44D,GAC1B,OAAOJ,GAAU,EAAGr+F,EAAQy+F,GAAyB,GAAO,GAE9D,IAAIC,EAAS1+F,EAAO7S,IAAIoiC,UAAUmO,EAAcQ,WAAW,SAAUhxC,GACnE,OAAOkxG,GAAyBlxG,IAASixG,GAAwBjxG,EACnE,IACA,OAAI24C,GAAwB64D,GACnBL,GAAU,EAAGr+F,EAAQ0+F,GAAQ,EAAOxrG,GAEtC1U,EAAS1B,MAClB,EACI6hH,GAAmB,SAAU3+F,EAAQ1V,EAAO4I,GAC9C,OAAO5I,EAAM82C,UAAYm9D,GAAmBv+F,EAAQ1V,EAAO4I,GAAgB5V,MAAMgN,GAASA,CAC5F,EAEIs0G,GAAmB,SAAU9tH,GAC/B,OAAO2iF,GAA6B3iF,IAAQuiF,GAAcviF,EAC5D,EACI+tH,GAAkB,SAAU/tH,GAC9B,OAAO4iF,GAA4B5iF,IAAQwiF,GAAaxiF,EAC1D,EAMIguH,GAA4B,SAAU9+F,EAAQ1V,EAAO4C,EAAM0sC,EAAWzW,EAAS47E,GAgBjF,OAfAV,GAAUzkE,EAAW55B,EAAQ++F,EAAkB7gE,SAAS/a,GAAUA,GAAS,GAAMrlC,MAAK,SAAUkhH,GAC9F,GAAI10G,EAAM82C,UAAW,CACnB,IAAI69D,EAAc30G,EAAM8yC,aACpBja,EACF87E,EAAYjtE,OAAOgtE,EAAW34F,eAAgB24F,EAAW3sE,aAEzD4sE,EAAYltE,SAASitE,EAAW1sE,aAAc0sE,EAAWzsE,WAE3D0sE,EAAYhiC,gBACd,MACE3yE,EAAM2yE,iBAERj9D,EAAOu4B,UAAU2U,OAAO8xD,EAC1B,IAnBsB,SAAU7xG,EAAKD,GACjCgI,GAAShI,IAA8B,IAArBA,EAAKgN,KAAKz3B,QAC9B0qB,EAAI7c,OAAO4c,EAEf,CAgBEgyG,CAAkBl/F,EAAO7S,IAAKD,IACvB,CACT,EAyBIiyG,GAAoB,SAAUn/F,EAAQmjB,GACxC,OAzBuB,SAAUnjB,EAAQmjB,GACzC,IAAI74B,EAAQ0V,EAAOu4B,UAAUC,SAC7B,IAAKtjC,GAAS5K,EAAMm1E,yBAClB,OAAO,EAET,IAAI7lC,EAAYzW,EAAUwb,GAAWoL,SAAWpL,GAAWyL,UACvD02B,EAAc32B,GAAYnqC,EAAOy4B,WACjC2mE,EAAe7iH,EAAMosD,GAAwBxlB,EAAU29C,EAAY9tF,KAAO8tF,EAAYt9D,MACtF67F,EAAal8E,EAAUy7E,GAAmBC,GAC1CnhE,EAAgB8K,GAA2B5O,EAAW55B,EAAOy4B,UAAWnuC,GACxEg1G,EAAoBrE,GAAkB93E,EAASi8E,EAAa1hE,IAChE,IAAK4hE,IAAsBz2D,GAAsBnL,EAAe4hE,GAC9D,OAAO,EACF,GAAID,EAAWC,GACpB,OAAOR,GAA0B9+F,EAAQ1V,EAAOozC,EAAcQ,UAAWtE,EAAWzW,EAASm8E,GAE/F,IAAIP,EAAoBK,EAAaE,GACrC,SAAIP,GAAqBM,EAAWN,IAC9Bl2D,GAAsBy2D,EAAmBP,KACpCD,GAA0B9+F,EAAQ1V,EAAOozC,EAAcQ,UAAWtE,EAAWzW,EAAS47E,EAInG,CAESQ,CAAmBv/F,EAAQmjB,EACpC,EAKIq8E,GAAerjG,GAAa,CAC9B,CAAE7rB,OAAQ,CAAC,YACX,CAAEmvH,cAAe,CAAC,YAClB,CAAEC,eAAgB,CAAC,eAuBjBC,GAAkB,SAAU3zG,EAAMm3B,EAAS1kC,GAC7C,OAAOgsD,GAAatnB,EAASn3B,EAAMvN,GAAMV,MAAK,SAAUkF,GACtD,OA/B8BiK,EA+BRjK,EAAGi7C,UA9BpBv5B,GAAcvX,GAAqBF,KAAUuX,GAAWrX,GAAqBF,KAYjD,SAAUlB,EAAMm3B,EAAS1kC,EAAMwE,GAClE,IAAI6lD,EAAc,SAAUzxC,GAC1B,OAAOgN,GAAWjX,GAAqBiK,MAAU+vC,GAAc3oD,EAAMwE,EAAI+I,EAC3E,EACA,OAAOu8C,IAAmBplB,EAAS1kC,GAAMxB,MAAK,WAC5C,OAAOsrD,GAAkBplB,EAASlgC,GAAIhG,KAAKL,EAAOksD,EACpD,GAAGA,EACL,CAae82D,CAA+B5zG,EAAMm3B,EAAS1kC,EAAMwE,GADtDzE,EAAS1B,OAGPqmC,GAAW1tB,GAAyBxS,EAAGi7C,aAE3B,IAAZ/a,GAAqB1tB,GAAyBxS,EAAGi7C,SAAQ,IAhBtC,SAAUlyC,EAAMm3B,EAAS1kC,EAAMwE,GAC/D,IAAI48G,EAAW58G,EAAGi7C,SAAoB,IAAZ/a,GAC1B,OAAOk4E,GAAiBjuG,GAAqBpB,GAAOoB,GAAqB3O,EAAKy/C,YAAY90D,KAAI,SAAU02H,GACtG,OAAOj4F,GAAUi4F,GAAYN,GAAalvH,OAAOwvH,EAAS3yG,KAAOqyG,GAAaC,cAAcI,EAC9F,IAAGhiH,SAAQ,WACT,OAAOW,EAASJ,KAAKohH,GAAaC,cAAcI,GAClD,GACF,CAQaE,CAA4B/zG,EAAMm3B,EAAS1kC,EAAMwE,GAG/CkgC,GAAWuwC,GAA4Bj1E,KAE3B,IAAZ0kC,GAAqBswC,GAA6Bh1E,GADpDD,EAASJ,KAAKohH,GAAaE,eAAez8G,IAI1CzE,EAAS1B,OA5CE,IAAUoQ,CA8ChC,GACF,EA2EI8yG,GAAgB,SAAUhgG,EAAQ9S,GACpC,OAAO1O,EAASC,KAAKs4D,GAAyB/2C,EAAOy4B,UAAWvrC,GAClE,EACI+yG,GAAuB,SAAUjgG,EAAQmjB,GAC3C,IAAIu5C,EAAe18D,EAAOu4B,UAAU2F,UACpC,OAAO8hE,GAAchgG,EAAQ08D,GAAcnzF,OAAOksB,IAA0BxY,MAAK,WAC/E,OA/CO,SAAU+O,EAAMm3B,EAASmV,GAClC,IAAImQ,EAAkBN,GAAehlB,EAAU,GAAK,EAAGn3B,EAAMssC,GACzD75C,EAAOg/C,GAAcU,eAAesK,GACpCnhC,EAAcla,GAAqBpB,GACvC,OAAgB,IAAZm3B,GAAqBuwC,GAA4Bj1E,GAC5CD,EAASJ,KAAKohH,GAAalvH,OAAOmO,EAAKy/C,SAAQ,KAC7C/a,GAAWswC,GAA6Bh1E,GAC1CD,EAASJ,KAAKohH,GAAalvH,OAAOmO,EAAKy/C,aACzB,IAAZ/a,GAAqBswC,GAA6Bh1E,IAASs2E,GAAUztD,EAAa7oB,GACpFw2E,GAAe3tD,EAAa7oB,GAAMrV,KAAI,SAAU28D,GACrD,OAAOy5D,GAAalvH,OAAOy1D,EAAG7H,UAChC,IACS/a,GAAWuwC,GAA4Bj1E,IAASq2E,GAAaxtD,EAAa7oB,GAC5Ey2E,GAAW5tD,EAAa7oB,GAAMrV,KAAI,SAAU28D,GACjD,OAAOy5D,GAAalvH,OAAOy1D,EAAG7H,UAChC,IA1B2B,SAAUlyC,EAAMm3B,EAAS1kC,GACtD,OA/DkC,SAAU0kC,EAAS1kC,GACrD,IAAI4Y,EAAM5Y,EAAKy/C,SAAoB,IAAZ/a,GACnB+8E,EAAgB/8E,EAAU,QAAU,SACxC,OAAO/uB,GAAYiD,IAAQA,EAAIvzB,aAAa,oBAAsBo8H,CACpE,CA2DMC,CAA8Bh9E,EAAS1kC,GAvBT,SAAU0kC,EAAS9rB,GACrD,OAAI8rB,GAAW1tB,GAAyB4B,EAAIrH,aACnCxR,EAASJ,KAAKohH,GAAaC,cAAcpoG,EAAIrH,eAC/B,IAAZmzB,GAAqB1tB,GAAyB4B,EAAItH,iBACpDvR,EAASJ,KAAKohH,GAAaC,cAAcpoG,EAAItH,kBAE7CvR,EAAS1B,MAEpB,CAgBWsjH,CAA8Bj9E,EAAS1kC,EAAKy/C,SAAoB,IAAZ/a,IAAoBlmC,MAAK,WAClF,OAAO0iH,GAAgB3zG,EAAMm3B,EAAS1kC,EACxC,GAAGD,EAASJ,MAELuhH,GAAgB3zG,EAAMm3B,EAAS1kC,GAAMV,MAAK,SAAUs7E,GACzD,OApBuC,SAAUrtE,EAAMvN,EAAM46E,GACjE,OAAOA,EAAap8E,MAAK,SAAUoa,GACjC,OAAO7Y,EAASJ,KAAKohH,GAAalvH,OAAO+mB,GAC3C,IAAG,SAAUA,GACX,OAAO7Y,EAASJ,KAAKohH,GAAaC,cAAcpoG,GAClD,IAAG,SAAUpU,GACX,OAAImkD,GAAc3oD,EAAMwE,EAAI+I,GACnBxN,EAAS1B,OAET0B,EAASJ,KAAKohH,GAAaE,eAAez8G,GAErD,GACF,CAQao9G,CAAuCr0G,EAAMvN,EAAM46E,EAC5D,GAEJ,CAkBWinC,CAAyBt0G,EAAMm3B,EAAS1kC,EAEnD,CA4BW8hH,CAAKvgG,EAAOy4B,UAAWtV,EAASnjB,EAAOu4B,UAAUC,UAAUx6C,QAAO,SAAUq7E,GACjF,OAAOA,EAAap8E,KA3BJ,SAAU+iB,EAAQmjB,GACtC,OAAO,SAAUrtC,GAGf,OAFAkqB,EAAOsiE,oBAAoBk+B,gBAC3BpoC,GAAgBp4D,EAAQmjB,EAAS/1B,GAAqBtX,KAC/C,CACT,CACF,CAqB+B2qH,CAAgBzgG,EAAQmjB,GApBnC,SAAUnjB,EAAQmjB,GACpC,OAAO,SAAUrtC,GACf,IAAIhF,EAAMqyC,EAAUsa,GAAc3U,OAAOhzC,GAAW2nD,GAAc1U,MAAMjzC,GAExE,OADAkqB,EAAOu4B,UAAU2U,OAAOp8D,EAAIitD,YACrB,CACT,CACF,CAciE0hE,CAAcz/F,EAAQmjB,GAblE,SAAUnjB,GAC7B,OAAO,SAAUlvB,GAEf,OADAkvB,EAAOu4B,UAAU2U,OAAOp8D,EAAIitD,YACrB,CACT,CACF,CAQiG2hE,CAAe1/F,GAC5G,GACF,GAAGnjB,EACL,EAiBI6jH,GAAmB,SAAU1gG,GAC/B,IAAI7S,EAAM6S,EAAO7S,IAAKorC,EAAYv4B,EAAOu4B,UACrCmmE,EAAS3nD,GAAyB/2C,EAAOy4B,UAAWF,EAAU2F,WAClE,GAAI1oC,GAAwBkpG,IAAWvxG,EAAI4hC,QAAQ2vE,IAAWvxG,EAAIskC,QAAQitE,GAAS,CACjF,IAAI34D,EAAK54C,EAAIpB,OAAO,KAAM,CAAE,iBAAkB,MAC9CoB,EAAI4gC,QAAQ2wE,EAAQ,IACpBA,EAAO1zH,YAAY+6D,GACnBxN,EAAU2U,OAAOzP,GAAc3U,OAAOid,GAAIhI,UAC5C,CACA,OAAO,CACT,EACI4iE,GAAoB,SAAU3gG,EAAQmjB,GACxC,OAAInjB,EAAOu4B,UAAUsI,cACZo/D,GAAqBjgG,EAAQmjB,GA1Bb,SAAUnjB,EAAQmjB,GAC3C,IAAIu5C,EAAe18D,EAAOu4B,UAAU2F,UACpC,SAAIzoC,GAAyBinE,IAAkBhnE,GAAcgnE,KACtCsjC,GAAchgG,EAAQ08D,EAAapxF,YAAY/B,OAAOksB,IACrDxY,MAAK,WAPA,IAAUqqB,EAWnC,OAXmCA,EAQVla,GAAqB4S,EAAOy4B,WAPzDt5C,EAAO64C,GAAY1wB,EAAa,4BAA6BxV,IAQzDsmE,GAAgBp4D,EAAQmjB,EAAS/1B,GAAqB4S,EAAOu4B,UAAU2F,YACvEq9D,GAAcv7F,IACP,CACT,GAAGnjB,EAGP,CAgBW+jH,CAAqB5gG,EAAQmjB,EAExC,EAaI09E,GAAoB,SAAU7gG,EAAQmjB,GACxC,QAAOnjB,EAAOu4B,UAAUsI,eAZN,SAAU7gC,EAAQmjB,GACpC,IAAIu7C,EAAUjhC,GAAcU,eAAen+B,EAAOu4B,UAAUC,UAC5D,OAAOiS,GAAatnB,EAASnjB,EAAOy4B,UAAWimC,GAASn1F,QAAO,SAAUuH,GACvE,OAAOqyC,EAAUgwC,GAAmBriF,GAAOsiF,GAAkBtiF,EAC/D,IAAGiN,MAAK,SAAUjN,GAChB,OAAO0N,EAASC,KAAK8oD,GAA6BpkB,EAAU,GAAK,EAAGryC,GACtE,IAAGkN,QAAO,SAAUqZ,GAElB,OADA2I,EAAOu4B,UAAUvS,OAAO3uB,IACjB,CACT,GACF,CAE0CypG,CAAc9gG,EAAQmjB,EAChE,EAEI49E,GAAS7rG,GACT8rG,GAA2B,SAAU9zG,GACvC,OAAO6zG,GAAO7zG,IAASA,EAAKgN,KAAK,KAAO4K,EAC1C,EACIm8F,GAAyB,SAAU/zG,GACrC,OAAO6zG,GAAO7zG,IAASA,EAAKgN,KAAKhN,EAAKgN,KAAKz3B,OAAS,KAAOqiC,EAC7D,EACIo8F,GAAa,SAAUh0G,GACzB,OAAOA,EAAKwC,cAAc9B,eAAekX,GAC3C,EA+CIq8F,GAAe,SAAUr4E,EAAQ57B,GACnC,OAAO47B,EA/CU,SAAU57B,GAC3B,GAAI6zG,GAAO7zG,EAAK6C,iBACd,OAAIkxG,GAAuB/zG,EAAK6C,kBAG9B7C,EAAK6C,gBAAgBi8C,WAAWlnC,IAFzB5X,EAAK6C,gBAKT,GAAIgxG,GAAO7zG,GAChB,OAAI8zG,GAAyB9zG,IAG3BA,EAAKqqE,WAAW,EAAGzyD,IAFZ5X,EAMT,IAAImqE,EAAU6pC,GAAWh0G,GAEzB,OADAA,EAAK5hB,WAAWC,aAAa8rF,EAASnqE,GAC/BmqE,CAEX,CA2BkB9rF,CAAa2hB,GA1Bb,SAAUA,GAC1B,GAAI6zG,GAAO7zG,EAAK8C,aACd,OAAIgxG,GAAyB9zG,EAAK8C,cAGhC9C,EAAK8C,YAAYunE,WAAW,EAAGzyD,IAFxB5X,EAAK8C,YAKT,GAAI+wG,GAAO7zG,GAChB,OAAI+zG,GAAuB/zG,IAGzBA,EAAK8+C,WAAWlnC,IAFT5X,EAMT,IAAImqE,EAAU6pC,GAAWh0G,GAMzB,OALIA,EAAK8C,YACP9C,EAAK5hB,WAAWC,aAAa8rF,EAASnqE,EAAK8C,aAE3C9C,EAAK5hB,WAAWN,YAAYqsF,GAEvBA,CAEX,CAEuCrmC,CAAY9jC,EACnD,EACIk0G,GAAqB7kH,EAAM4kH,IAAc,GACzCE,GAAoB9kH,EAAM4kH,IAAc,GAExCG,GAAkB,SAAUxwH,EAAKg4C,GACnC,OAAI5zB,GAASpkB,EAAIlG,aACRu2H,GAAar4E,EAAQh4C,EAAIlG,aAEzBu2H,GAAar4E,EAAQh4C,EAAIotD,UAEpC,EACIqjE,GAAsB,SAAUzwH,EAAK20D,GACvC,IAAI+7D,EAAY/7D,EAAMrrC,MACtB,OAAOonG,GAAa1wH,EAAIlG,cAAgB42H,GAAan8F,GAAuBm8F,EAC9E,EACIC,GAAc,SAAUh8D,EAAO3hB,GACjC,OAAOA,EAAS7mC,MAAK,SAAUnH,GAC7BiuD,GAAS0B,EAAMrrC,OACf,IAAIzM,EAAOyzG,GAAmBtrH,GAE9B,OADA2vD,EAAMtiC,IAAIxV,GACHnP,EAASJ,KAAKq/C,GAAc9vC,EAAMA,EAAKlrB,OAAS,GACzD,IAAG,SAAUqT,GACX,OAAOo1D,GAAgBp1D,GAAS1M,KAAI,SAAU0H,GAC5C,GAAKywH,GAAoBzwH,EAAK20D,GAM5B,OAAOhI,GAAcgI,EAAMrrC,MAAO,GALlC2pC,GAAS0B,EAAMrrC,OACf,IAAIzM,EAAO2zG,GAAgBxwH,GAAK,GAEhC,OADA20D,EAAMtiC,IAAIxV,GACH8vC,GAAc9vC,EAAM,EAI/B,GACF,IAAG,SAAU7X,GACX,OAAOq1D,GAAer1D,GAAS1M,KAAI,SAAU0H,GAC3C,GAAKywH,GAAoBzwH,EAAK20D,GAM5B,OAAOhI,GAAcgI,EAAMrrC,MAAOqrC,EAAMrrC,MAAM33B,OAAS,GALvDshE,GAAS0B,EAAMrrC,OACf,IAAIzM,EAAO2zG,GAAgBxwH,GAAK,GAEhC,OADA20D,EAAMtiC,IAAIxV,GACH8vC,GAAc9vC,EAAMA,EAAKlrB,OAAS,EAI7C,GACF,IAAG,SAAUqT,GACXiuD,GAAS0B,EAAMrrC,OACf,IAAIzM,EAAO0zG,GAAkBvrH,GAE7B,OADA2vD,EAAMtiC,IAAIxV,GACHnP,EAASJ,KAAKq/C,GAAc9vC,EAAM,GAC3C,GACF,EAEI+zG,GAAgB,SAAUC,EAAK7lH,GACjC,IAAK,IAAItZ,EAAI,EAAGA,EAAIm/H,EAAIl/H,OAAQD,IAAK,CACnC,IAAI86B,EAASqkG,EAAIn/H,GAAGwZ,MAAM,KAAMF,GAChC,GAAIwhB,EAAOlgB,SACT,OAAOkgB,CAEX,CACA,OAAO9e,EAAS1B,MAClB,EAEI8kH,GAAWzlG,GAAa,CAC1B,CAAE2sB,OAAQ,CAAC,YACX,CAAEzxC,MAAO,CAAC,YACV,CAAEypD,IAAK,CAAC,YACR,CAAE/X,MAAO,CAAC,cAER84E,GAAY,SAAUt+F,EAAUrW,GAElC,OADkBi6C,GAAiBj6C,EAAMqW,IACNA,CACrC,EACIulB,GAAS,SAAU+xE,EAAgBt3F,EAAUzyB,GAC/C,IAAIgxH,EAAO5G,GAAkBpqH,GACzBwc,EAAQu0G,GAAUt+F,EAAUu+F,EAAKl3H,aACrC,OAAOmwH,GAAeF,EAAgBvtG,EAAOw0G,GAAM7kH,MAAK,WACtD,OAAO+tD,GAAa19C,EAAOw0G,GAAM/jH,KAAKxB,EAAMw+G,GAAgBF,EAAgBvtG,IAAQlkB,KAAI,SAAUqnC,GAChG,OAAOmxF,GAAS94E,OAAOrY,EACzB,GACF,GAAGjyB,EAAS1B,KACd,EACIilH,GAAkC,SAAUx+F,EAAUlM,GACxD,OAAkD,OAA3Ci0C,GAAwB/nC,EAAUlM,EAC3C,EACI2qG,GAAuB,SAAUnH,EAAgBt3F,EAAUzyB,GAC7D,OAAOiqH,GAAeF,EAAgBt3F,EAAUzyB,GAAKvH,OAAOgT,EAAMwlH,GAAiCx+F,GACrG,EACI0+F,GAAU,SAAUpH,EAAgBt3F,EAAUzyB,GAChD,IAAIgxH,EAAO3G,GAAmBrqH,GAC9B,OAAOkxH,GAAqBnH,EAAgBt3F,EAAUu+F,GAAM/jH,MAAK,SAAU0yB,GAEzE,OADcw6B,GAAax6B,EAAQqxF,GACpBzkH,SAAWmB,EAASJ,KAAKwjH,GAASvqH,MAAMo5B,IAAWjyB,EAAS1B,MAC7E,GACF,EACIgkD,GAAM,SAAU+5D,EAAgBt3F,EAAUzyB,GAC5C,IAAIgxH,EAAO5G,GAAkBpqH,GAC7B,OAAOkxH,GAAqBnH,EAAgBt3F,EAAUu+F,GAAM/jH,MAAK,SAAU0yB,GAEzE,OADcu6B,GAAav6B,EAAQqxF,GACpBzkH,SAAWmB,EAASJ,KAAKwjH,GAAS9gE,IAAIrwB,IAAWjyB,EAAS1B,MAC3E,GACF,EACIisC,GAAQ,SAAU8xE,EAAgBt3F,EAAUzyB,GAC9C,IAAIgxH,EAAO3G,GAAmBrqH,GAC1Bwc,EAAQu0G,GAAUt+F,EAAUu+F,EAAKl3H,aACrC,OAAOmwH,GAAeF,EAAgBvtG,EAAOw0G,GAAM7kH,MAAK,WACtD,OAAOguD,GAAa39C,EAAOw0G,GAAM/jH,KAAKxB,EAAMw+G,GAAgBF,EAAgBvtG,IAAQlkB,KAAI,SAAUqnC,GAChG,OAAOmxF,GAAS74E,MAAMtY,EACxB,GACF,GAAGjyB,EAAS1B,KACd,EACIolH,GAAkB,SAAUp+E,GAC9B,OAAuC,KAxtBnBhuC,EAwtBP8vE,GAAW9hC,GAvtBqC,QAAtD2H,GAAS+E,IAAInD,SAASv3C,EAAS,aAAa,KARxB6X,EAQwD7X,EAAQ8b,YAPpFgpG,GAAU3zH,KAAK0mB,KAMZ,IAAU7X,EAPO6X,CAguB7B,EACIw0G,GAAe,SAAUtH,EAAgBt3F,EAAUzyB,GAWrD,OAVe4wH,GAAc,CAC3B54E,GACAm5E,GACAnhE,GACA/X,IACC,CACD8xE,EACAt3F,EACAzyB,IAEcvH,OAAO24H,GACzB,EACIt8C,GAAa,SAAU9hC,GACzB,OAAOA,EAAS7mC,KAAKZ,EAAUA,EAAUA,EAAUA,EACrD,EACI+lH,GAAU,SAAUt+E,GACtB,OAAOA,EAAS7mC,KAAKb,EAAS,UAAWA,EAAS,SAAUA,EAAS,OAAQA,EAAS,SACxF,EACIimH,GAAU,SAAUv+E,GACtB,OAAOA,EAAS7mC,KAAK2kH,GAAS94E,OAAQ84E,GAAS94E,OAAQ84E,GAAS74E,MAAO64E,GAAS74E,MAClF,EACIu5E,GAAS,SAAUx+E,GACrB,OAAOA,EAAS7mC,KAAK2kH,GAASvqH,MAAOuqH,GAASvqH,MAAOuqH,GAAS9gE,IAAK8gE,GAAS9gE,IAC9E,EAIIyhE,GAAiB,SAAUp/E,EAAS03E,EAAgBt3F,EAAU9kB,EAAMwE,EAAI6gC,GAC1E,OAAO/tB,GAAMglG,GAAeF,EAAgBt3F,EAAU9kB,GAAOs8G,GAAeF,EAAgBt3F,EAAUtgB,IAAK,SAAUu/G,EAAYC,GAC/H,OAAID,IAAeC,GA9uBE,SAAUl/F,EAAUukC,EAAOC,GAClD,IAAI20D,EAASv1D,GAAiBW,EAAOvkC,GACjCo5F,EAASx1D,GAAiBY,EAAOxkC,GACrC,OAAOm5F,GAAUA,IAAWC,CAC9B,CA0uBmC+F,CAAmBn/F,EAAUi/F,EAAYC,GAC/Db,GAAS74E,MAAM5F,EAAUq/E,EAAaC,GAEtC3+E,CAEX,IAAGxmC,MAAMwmC,EACX,EACI6+E,GAAiB,SAAUC,EAAcC,GAC3C,OAAOD,EAAa3lH,KAAKJ,GAAQ,SAAU+lH,GACzC,OAd4BE,EAcDD,IAbtBT,GADYW,EAcJH,KAbeR,GAAQU,IAAcl9C,GAAWm9C,KAAen9C,GAAWk9C,IADhF,IAAUC,EAAWD,CAe9B,GACF,EAWIE,GAAqB,SAAU7/E,EAASW,GAC1C,OAAIX,EACKW,EAAS7mC,KAAKtB,EAAQ6C,EAASJ,KAAMwjH,GAASvqH,OAAQmH,EAAS1B,KAAMnB,EAAQ6C,EAASJ,KAAMwjH,GAAS74E,OAAQvqC,EAAS1B,MAEtHgnC,EAAS7mC,KAAKuB,EAAS1B,KAAMnB,EAAQ6C,EAASJ,KAAMwjH,GAAS94E,QAAStqC,EAAS1B,KAAMnB,EAAQ6C,EAASJ,KAAMwjH,GAAS9gE,KAEhI,EACImiE,GAAiB,SAAU9/E,EAAS03E,EAAgBt3F,EAAUzyB,GAChE,IAAI2N,EAAOw8G,GAAkB93E,EAASryC,GAClC8xH,EAAeT,GAAatH,EAAgBt3F,EAAU9kB,GAC1D,OAAO0jH,GAAatH,EAAgBt3F,EAAU9kB,GAAMV,KAAKxB,EAAMymH,GAAoB7/E,IAAUtlC,SAAQ,WACnG,OArBuB,SAAUslC,EAAS03E,EAAgBt3F,EAAUq/F,EAAc9xH,GACpF,IAAI2N,EAAOw8G,GAAkB93E,EAASryC,GAOtC,OANS25D,GAAatnB,EAAS5f,EAAU9kB,GAAMrV,IAAImT,EAAM0+G,GAAmB93E,IAC1DlmC,MAAK,WACrB,OAAO2lH,EAAax5H,IAAIi5H,GAC1B,IAAG,SAAUp/G,GACX,OAAOk/G,GAAatH,EAAgBt3F,EAAUtgB,GAAI7Z,IAAImT,EAAMgmH,GAAgBp/E,EAAS03E,EAAgBt3F,EAAU9kB,EAAMwE,IAAK1Z,OAAOgT,EAAMomH,GAAgBC,GACzJ,IACgBr5H,OAAO24H,GACzB,CAYWgB,CAAqB//E,EAAS03E,EAAgBt3F,EAAUq/F,EAAc9xH,EAC/E,GACF,EACAyL,EAAM0mH,IAAgB,GACtB1mH,EAAM0mH,IAAgB,GAEtB,IAuBIE,GApBAC,GAAU,SAAUjgF,EAASoV,EAAWznD,GAC1C,IAAI6hF,EAAQxvC,EAAU,GAAK,EAG3B,OAFAoV,EAAU2U,OAAOzP,GAAc3sD,EAAIlG,YAAakG,EAAI20B,SAAWktD,GAAO50B,WACtExF,EAAUsZ,SAASwxD,OAAO,OAAQlgF,EAAU,UAAY,WAAY,SAC7D,CACT,GAgBC,SAAUggF,GACTA,EAAUA,EAAc,GAAI,GAAK,KACjCA,EAAUA,EAAiB,MAAI,GAAK,QACpCA,EAAUA,EAAgB,KAAI,GAAK,OACnCA,EAAUA,EAAe,IAAI,GAAK,KACpC,CALA,CAKEA,KAAcA,GAAY,CAAC,IAC7B,IA+HIG,GA/HAC,GAAO,SAAU3pE,EAAW4pE,GAC9B,OAAO5pE,IAAc+E,GAAWyL,UAAYnqD,GAAQujH,GAAaA,CACnE,EACI52G,GAAO,SAAUgtC,EAAWknC,EAAahwF,GAC3C,OAAO8oD,IAAc+E,GAAWoL,SAAW+2B,EAAY9tF,KAAKlC,GAAOgwF,EAAYt9D,KAAK1yB,EACtF,EACI2yH,GAAe,SAAUn2G,EAAOssC,EAAW8pE,EAAYC,GACzD,OAAIruG,GAAOquG,EAAQzlE,QAAQtE,IAAc+E,GAAWoL,WAC3Co5D,GAAUS,IAC+B,IAAvCx8D,GAAcs8D,EAAYC,GAC5BR,GAAUU,MAEVV,GAAUW,IAErB,EACIC,GAAoB,SAAUphH,EAAWi3C,EAAWtsC,EAAOjW,GAI7D,IAHA,IAAIypF,EAAc32B,GAAY78C,GAC1Bo2G,EAAarsH,EACbmsH,EAAY,GACTE,GAAY,CACjB,IAAIC,EAAU/2G,GAAKgtC,EAAWknC,EAAa4iC,GAC3C,IAAKC,EACH,MAEF,GAAIruG,GAAOquG,EAAQzlE,SAAQ,IACzB,OAAItE,IAAc+E,GAAWoL,SACpB,CACLy5D,UAAWD,GAAK3pE,EAAW4pE,GAAW73H,OAAO,CAACg4H,IAC9CK,UAAWb,GAAUS,GACrBK,QAASzlH,EAASJ,KAAKulH,IAGlB,CACLH,UAAWD,GAAK3pE,EAAW4pE,GAC3BQ,UAAWb,GAAUS,GACrBK,QAASzlH,EAASJ,KAAKulH,IAI7B,GAAKA,EAAQ3lE,YAAb,CAIA,GAAIr7C,EAAU+gH,EAAYC,GAAU,CAClC,IAAIK,EAAYP,GAAan2G,EAAOssC,EAAW8pE,EAAYC,GAC3D,MAAO,CACLH,UAAWD,GAAK3pE,EAAW4pE,GAC3BQ,UAAWA,EACXC,QAASzlH,EAASJ,KAAKulH,GAE3B,CACAH,EAAU94H,KAAKi5H,GACfD,EAAaC,CAVb,MAFED,EAAaC,CAajB,CACA,MAAO,CACLH,UAAWD,GAAK3pE,EAAW4pE,GAC3BQ,UAAWb,GAAUe,IACrBD,QAASzlH,EAAS1B,OAEtB,EACIqnH,GAA2B,SAAUvqE,EAAWwqE,EAAwB92G,EAAOjW,GACjF,OAAO+sH,EAAuB92G,EAAOjW,GAAO4sH,QAAQ76H,KAAI,SAAU0H,GAChE,IAAI0yH,EAAYY,EAAuB92G,EAAOxc,GAAK0yH,UACnD,OAAO5pE,IAAc+E,GAAWyL,UAAYo5D,EAAU73H,OAAOmF,GAAO,CAACA,GAAKnF,OAAO63H,EACnF,IAAGlmH,MAAM,GACX,EACI+mH,GAAyC,SAAUb,EAAWtqH,GAChE,OAAOyG,EAAM6jH,GAAW,SAAU9jH,EAAK00E,GACrC,OAAO10E,EAAIzC,MAAK,WACd,OAAOuB,EAASJ,KAAKg2E,EACvB,IAAG,SAAUgC,GACX,OAAOrgE,GAAMvV,GAAK41E,EAAQz5B,kBAAmBn8C,GAAK4zE,EAAOz3B,mBAAmB,SAAU2nE,EAAUC,GAC9F,IAAIC,EAAW1wG,KAAK6lD,IAAIzgE,EAAIorH,EAASxyH,MAErC,OADcgiB,KAAK6lD,IAAIzgE,EAAIqrH,EAAQzyH,OACjB0yH,EAAWpwC,EAASgC,CACxC,IAAGx4E,GAAG8B,EACR,GACF,GAAGlB,EAAS1B,OACd,EACI2nH,GAAgC,SAAUjB,EAAW1yH,GACvD,OAAO0P,GAAK1P,EAAI6rD,kBAAkB5+C,MAAK,SAAU2mH,GAC/C,OAAOL,GAAuCb,EAAWkB,EAAW5yH,KACtE,GACF,EACI6yH,GAAgCpoH,EAAMwnH,GAAmBtmE,GAAcY,SAAU,GACjFumE,GAA4BroH,EAAMwnH,GAAmBtmE,GAAce,QAAS,GAC5EqmE,GAAoBtoH,EAAM4nH,IAA2B,EAAGQ,IACxDG,GAAoBvoH,EAAM4nH,GAA0B,EAAGS,IAkBvDG,GAAqB,SAAU73G,GACjC,IAAI83G,EAAkB,SAAUtoE,GAC9B,OAAOz9C,EAAMy9C,GAAa,SAAUrC,GAClC,IAAIoC,EAAajT,GAAM6Q,GAEvB,OADAoC,EAAWvvC,KAAOA,EACXuvC,CACT,GACF,EACA,GAAIroC,GAAYlH,GACd,OAAO83G,EAAgB93G,EAAKyvC,kBAE9B,GAAIznC,GAAShI,GAAO,CAClB,IAAIorC,EAAMprC,EAAKwC,cAAcg/B,cAG7B,OAFA4J,EAAIvG,SAAS7kC,EAAM,GACnBorC,EAAItG,OAAO9kC,EAAMA,EAAKgN,KAAKz3B,QACpBuiI,EAAgB1sE,EAAIqE,iBAC7B,CACF,EACIA,GAAiB,SAAUxlC,GAC7B,OAAOpZ,EAAKoZ,EAAO4tG,GACrB,GAGC,SAAUzB,GACTA,EAAWA,EAAe,IAAK,GAAK,KACpCA,EAAWA,EAAiB,KAAI,GAAK,MACvC,CAHA,CAGEA,KAAeA,GAAa,CAAC,IAC/B,IAywKI2B,GAsxBAC,GAxhMAC,GAAc,SAAUvrE,EAAWwrE,EAAWC,EAAYr5G,EAAMi7C,EAAavJ,GAC/E,IAAI4nE,EAAO,EACPhoG,EAAS,GACTh2B,EAAM,SAAU4lB,GAClB,IAAIwvC,EAAcC,GAAe,CAACzvC,KACf,IAAf0sC,IACF8C,EAAcA,EAAYz8C,WAE5B,IAAK,IAAIzd,EAAI,EAAGA,EAAIk6D,EAAYj6D,OAAQD,IAAK,CAC3C,IAAIi6D,EAAaC,EAAYl6D,GAC7B,IAAI6iI,EAAW5oE,EAAY8oE,GAA3B,CAOA,GAJIjoG,EAAO76B,OAAS,GAAK2iI,EAAU3oE,EAAY75C,GAAO0a,KACpDgoG,IAEF7oE,EAAW6oE,KAAOA,EACdr+D,EAAYxK,GACd,OAAO,EAETn/B,EAAO5yB,KAAK+xD,EARZ,CASF,CACF,EACI8oE,EAAmB3iH,GAAO86C,EAAcf,kBAC5C,IAAK4oE,EACH,OAAOjoG,EAET,IAAIpQ,EAAOwwC,EAAcQ,UAGzB,OAFA52D,EAAI4lB,GAnCU,SAAU0sC,EAAW5tC,EAAMi7C,EAAa/5C,GACtD,KAAOA,EAAO85C,GAAW95C,EAAM0sC,EAAW3yB,GAA4Bjb,IACpE,GAAIi7C,EAAY/5C,GACd,MAGN,CA8BEs4G,CAAU5rE,EAAW5tC,EAAM1kB,EAAK4lB,GACzBoQ,CACT,EAOImoG,GAAUlpH,EAAM4oH,GAAa7B,GAAWoC,GAAI7qE,GAAWE,IACvD4qE,GAAYppH,EAAM4oH,GAAa7B,GAAWsC,KAAM7qE,GAAWF,IAgD3DgrE,GAAc,SAAUC,GAC1B,OAAO,SAAUrpE,GACf,OAzDkB,SAAUqpE,EAAYrpE,GAC1C,OAAOA,EAAW6oE,KAAOQ,CAC3B,CAuDWC,CAAgBD,EAAYrpE,EACrC,CACF,EACIupE,GAAS,SAAUF,GACrB,OAAO,SAAUrpE,GACf,OA3De,SAAUqpE,EAAYrpE,GACvC,OAAOA,EAAW6oE,OAASQ,CAC7B,CAyDWG,CAAaH,EAAYrpE,EAClC,CACF,EAEIypE,GAA2BzwG,GAC3B0wG,GAAWn/D,GACXo/D,GAAqB,SAAU3pE,EAAYzkB,GAC7C,OAAOlkB,KAAK6lD,IAAIld,EAAW3qD,KAAOkmC,EACpC,EACIquF,GAAsB,SAAU5pE,EAAYzkB,GAC9C,OAAOlkB,KAAK6lD,IAAIld,EAAWppC,MAAQ2kB,EACrC,EACIsuF,GAAY,SAAUtuF,EAASykB,GACjC,OAAOzkB,GAAWykB,EAAW3qD,MAAQkmC,GAAWykB,EAAWppC,KAC7D,EACIkzG,GAAY,SAAUluF,EAASokB,GACjC,OAAOpkB,GAAWokB,EAAWprD,KAAOgnC,GAAWokB,EAAWnpC,MAC5D,EAIIkzG,GAAwB,SAAU9pE,EAAa1kB,EAASyuF,GAI1D,YAHoB,IAAhBA,IACFA,EAAc5pH,GAETwF,GAAOq6C,GAAa,SAAUgqE,EAAejqE,GAClD,GAAI6pE,GAAUtuF,EAASykB,GACrB,OAAOgqE,EAAYhqE,GAAcA,EAAaiqE,EAEhD,GAAIJ,GAAUtuF,EAAS0uF,GACrB,OAAOD,EAAYC,GAAiBA,EAAgBjqE,EAEtD,IAAIkqE,EAAc7yG,KAAK8mC,IAAIwrE,GAAmBM,EAAe1uF,GAAUquF,GAAoBK,EAAe1uF,IACtG4uF,EAAc9yG,KAAK8mC,IAAIwrE,GAAmB3pE,EAAYzkB,GAAUquF,GAAoB5pE,EAAYzkB,IACpG,OAAI4uF,IAAgBD,GAffllH,GAe+Cg7C,EAfvB,SAesCypE,GAAyBzpE,EAAWvvC,OAGnG05G,EAAcD,EAFTlqE,EAKFiqE,CACT,GACF,EACIG,GAAY,SAAUjtE,EAAW5tC,EAAMi7C,EAAa3jC,EAAWwjG,GACjE,IAAI55G,EAAOi5G,GAAS7iG,EAAWs2B,EAAW3yB,GAA4Bjb,GAAO86G,GAC7E,GACE,IAAK55G,GAAQ+5C,EAAY/5C,GACvB,aAEKA,EAAOi5G,GAASj5G,EAAM0sC,EAAW3yB,GAA4Bjb,GACxE,EA4CI+6G,GAAc,SAAU/mG,EAAQs4B,GAClCt4B,EAAOu4B,UAAU2U,OAAO5U,GACxB8qB,GAAoBpjD,EAAQA,EAAOu4B,UAAUC,SAC/C,EACIwuE,GAAsB,SAAUhnG,EAAQ1V,EAAO4I,GACjD,OAAO1U,EAASJ,KAAKugH,GAAiB3+F,EAAQ1V,EAAO4I,GACvD,EACI+zG,GAAmB,SAAUjnG,EAAQ45B,EAAWtvC,EAAO48G,EAAUC,EAASh+D,GAC5E,IAAIjP,EAAWN,IAAc+E,GAAWoL,SACpC+2B,EAAc32B,GAAYnqC,EAAOy4B,WACjC2mE,EAAe7iH,EAAMosD,GAAwBzO,EAAW4mC,EAAY9tF,KAAO8tF,EAAYt9D,MACvF67F,EAAanlE,EAAWgtE,EAAWC,EACvC,IAAK78G,EAAM82C,UAAW,CACpB,IAAIl0C,EAAO+tC,GAAgB3wC,GAC3B,GAAI6+C,EAAUj8C,GACZ,OAAOmxG,GAAUzkE,EAAW55B,EAAQ9S,EAAM0sC,IAAc+E,GAAWyL,WAAW,EAElF,CACA,IAAI1M,EAAgB8K,GAA2B5O,EAAW55B,EAAOy4B,UAAWnuC,GAC5E,GAAI+0G,EAAW3hE,GACb,OAAOoP,GAAW9sC,EAAQ09B,EAAcQ,SAAShE,IAEnD,IAAIolE,EAAoBrE,GAAkB/gE,EAAUklE,EAAa1hE,IAC7D0pE,EAA0BhhG,GAA6B9b,GAC3D,IAAKg1G,EACH,OAAO8H,EAA0B5oH,EAASJ,KAAKkM,GAAS9L,EAAS1B,OAEnE,GAAIuiH,EAAWC,GACb,OAAOjB,GAAUzkE,EAAW55B,EAAQs/F,EAAkBphE,SAAShE,GAAWA,GAAU,GAEtF,IAAI6kE,EAAoBK,EAAaE,GACrC,OAAIP,GAAqBM,EAAWN,IAC9Bl2D,GAAsBy2D,EAAmBP,GACpCV,GAAUzkE,EAAW55B,EAAQ++F,EAAkB7gE,SAAShE,GAAWA,GAAU,GAGpFktE,EACKJ,GAAoBhnG,EAAQs/F,EAAkBvhE,WAAW,GAE3Dv/C,EAAS1B,MAClB,EACIuqH,GAAiB,SAAUrnG,EAAQ45B,EAAWtvC,EAAO48G,EAAUC,EAASh+D,GAC1E,IAAIzL,EAAgB8K,GAA2B5O,EAAW55B,EAAOy4B,UAAWnuC,GACxEg9G,EAAkB1kH,GAAO86C,EAAcf,kBACvCzC,EAAWN,IAAc0pE,GAAWsC,KACxC,IAAK0B,EACH,OAAO9oH,EAAS1B,OAElB,IAUIqpG,EATAohB,GADWrtE,EAAWyrE,GAAYF,IACTzlG,EAAOy4B,UAAWotE,GAAY,GAAInoE,GAC3D8pE,EAAoBhoH,EAAS+nH,EAAevB,GAAO,IACnDhuF,EAAUsvF,EAAgBx1H,KAC1B21H,EAAejB,GAAsBgB,EAAmBxvF,GAC5D,GAAIyvF,GAAgBt+D,EAAUs+D,EAAav6G,MAAO,CAChD,IAAIw6G,EAAQ5zG,KAAK6lD,IAAI3hC,EAAUyvF,EAAa31H,MACxC61H,EAAQ7zG,KAAK6lD,IAAI3hC,EAAUyvF,EAAap0G,OAC5C,OAAOgrG,GAAUzkE,EAAW55B,EAAQynG,EAAav6G,KAAMw6G,EAAQC,GAAO,EACxE,CASA,GANExhB,EADE+gB,EAASxpE,GACGA,EAAcQ,UACnBipE,EAAQzpE,GACHA,EAAcQ,SAAQ,GAEtBjD,GAAgB3wC,GAEf,CACf,IAAIs9G,EAvNa,SAAUhuE,EAAW5tC,EAAMi7C,EAAa/5C,GAC3D,IACI07C,EACAi/D,EACAzC,EACA1nE,EAJAojC,EAAc32B,GAAYn+C,GAK1BsR,EAAS,GACTgoG,EAAO,EACPwC,EAAgB,SAAUpqE,GAC5B,OACS96C,GAAO86C,EAAcf,iBAGhC,EACkB,IAAd/C,GACFgP,EAASk4B,EAAY9tF,KACrB60H,EAAY9sE,GACZqqE,EAAYvqE,GACZ6C,EAAgBD,GAAc1U,MAAM77B,KAEpC07C,EAASk4B,EAAYt9D,KACrBqkG,EAAYhtE,GACZuqE,EAAYrqE,GACZ2C,EAAgBD,GAAc3U,OAAO57B,IAEvC,IAAIq4G,EAAmBuC,EAAcpqE,GACrC,GACE,GAAKA,EAAcM,YAAnB,CAGA,IAAI3D,EAAOytE,EAAcpqE,GACzB,IAAI0nE,EAAU/qE,EAAMkrE,GAApB,CAGIjoG,EAAO76B,OAAS,GAAKolI,EAAUxtE,EAAMz3C,GAAO0a,KAC9CgoG,IAEF,IAAI7oE,EAAajT,GAAM6Q,GAGvB,GAFAoC,EAAW6N,SAAW5M,EACtBjB,EAAW6oE,KAAOA,EACdr+D,EAAYxK,GACd,OAAOn/B,EAETA,EAAO5yB,KAAK+xD,EAVZ,CAJA,QAeOiB,EAAgBkL,EAAOlL,IAChC,OAAOpgC,CACT,CAyKyByqG,CAAenuE,EAAW55B,EAAOy4B,UAAWotE,GAAY,GAAI1f,GAC7E6hB,EAAsBxB,GAAsBhnH,EAASooH,EAAgB5B,GAAO,IAAKhuF,GACrF,GAAIgwF,EACF,OAAOhB,GAAoBhnG,EAAQgoG,EAAoB19D,SAASvM,WAAW,GAG7E,GADAiqE,EAAsBplH,GAAOpD,EAASooH,EAAgB5B,GAAO,KAE3D,OAAOgB,GAAoBhnG,EAAQgoG,EAAoB19D,SAASvM,WAAW,EAE/E,CACA,OAAiC,IAA7BypE,EAAkB/kI,OACbwlI,GAAgBjoG,EAAQk6B,GAAU3wD,OAAO2wD,EAAWitE,EAAUD,GAAU99H,KAAI,SAAU0H,GAC3F,OAAO6tH,GAAiB3+F,EAAQlvB,EAAIitD,WAAW,EACjD,IAEKv/C,EAAS1B,MAClB,EACImrH,GAAkB,SAAUjoG,EAAQmjB,GACtC,IAAImV,EAAMt4B,EAAOu4B,UAAUC,SACvBpxD,EAAO44B,EAAOy4B,UAClB,GAAItV,EAAS,CACX,IAAI1kC,EAAOg/C,GAAcW,aAAa9F,GAClCh7B,EAASsnG,GAA0Bx9H,EAAMqX,GAC7C,OAAOgC,GAAO6c,EAAOkmG,UACvB,CAGE,OAFI/kH,EAAOg/C,GAAcU,eAAe7F,GACpCh7B,EAASqnG,GAA8Bv9H,EAAMqX,GAC1C+B,GAAK8c,EAAOkmG,UAEvB,EACI0E,GAAuB,SAAUloG,EAAQmjB,EAASub,GACpD,OAAOupE,GAAgBjoG,EAAQmjB,GAAS55C,OAAOm1D,GAAmB1gD,QAAO,SAAUlN,GAEjF,OADAkvB,EAAOu4B,UAAU2U,OAAOp8D,EAAIitD,YACrB,CACT,GACF,EAEIoqE,GAAmB,SAAUnoG,EAAQlvB,GACvC,IAAIwnD,EAAMt4B,EAAO7S,IAAIshC,YACrB6J,EAAIvG,SAASjhD,EAAIlG,YAAakG,EAAI20B,UAClC6yB,EAAItG,OAAOlhD,EAAIlG,YAAakG,EAAI20B,UAChCzF,EAAOu4B,UAAU2U,OAAO5U,EAC1B,EACI8vE,GAAc,SAAUnnG,EAAO5J,GAC7B4J,EACF5J,EAAItsB,aAAa,oBAAqB,mBAEtCssB,EAAI7f,gBAAgB,oBAExB,EACI6wH,GAAsB,SAAUroG,EAAQylC,EAAO3hB,GACjD,OAAO29E,GAAYh8D,EAAO3hB,GAAU16C,KAAI,SAAU0H,GAEhD,OADAq3H,GAAiBnoG,EAAQlvB,GAClBgzC,CACT,GACF,EAuCIwkF,GAAS,SAAUtoG,EAAQylC,EAAOtiB,GACpC,QAAOigB,GAA0BpjC,IAvChB,SAAUA,EAAQylC,EAAOtiB,GAC1C,IAAI5f,EAAWvD,EAAOy4B,UAClBh6C,EAAOg/C,GAAcU,eAAen+B,EAAOu4B,UAAUC,UACrD+vE,EAAmBhsH,EAAMs+G,GAAgB76F,GAE7C,OADeijG,GAAe9/E,EAASolF,EAAkBhlG,EAAU9kB,GACnDV,MAAK,SAAU+lC,GAC7B,OAAOukF,GAAoBroG,EAAQylC,EAAO3hB,EAC5C,GACF,CA+B6C0kF,CAAaxoG,EAAQylC,EAAOtiB,GAAS/lC,QAClF,EACIqrH,GAAW,SAAUtlF,EAASnjB,EAAQ0oG,GACxC,QAAOtlE,GAA0BpjC,IAjgBlB,SAAUmjB,EAASnjB,GAClC,IAAIs4B,EAAMt4B,EAAOu4B,UAAUC,SACvB1nD,EAAMqyC,EAAUsa,GAAcW,aAAa9F,GAAOmF,GAAcU,eAAe7F,GACnF,QAZ0B,SAAUt4B,GACpC,OAAOxkB,EAAWwkB,EAAOu4B,UAAUsZ,SAASwxD,OAC9C,CAUOsF,CAAsB3oG,KAEhBmjB,GAAW3d,GAAe10B,GAC5BsyH,IAAQ,EAAMpjG,EAAOu4B,UAAWznD,KAC7BqyC,IAAWxd,GAAc70B,KAC5BsyH,IAAQ,EAAOpjG,EAAOu4B,UAAWznD,GAI5C,CAqf6C83H,CAAWzlF,EAASnjB,EACjE,EACI6oG,GAAqB,SAAU7oG,GACjC,IAAIylC,EAAQzR,GAAK,MACbu0E,EAAmBhsH,EAAMs+G,GAAgB76F,GAQ7C,OAPAA,EAAO8pB,GAAG,cAAc,SAAU77C,IAC5Bm1D,GAA0BpjC,IAAalW,GAAI5B,QAAQ3B,QAAUtY,EAAEgmD,UAvCnD,SAAU4mE,EAAgB1tG,EAAKsgC,GACjD,IAAIq7E,EAAmB7pH,EAAM+4C,GAAY5qC,GAAqBD,EAAI8+B,WAAY,2CAA2C,SAAUh+C,GACjI,OAAOA,EAAEkf,GACX,IACI47G,EAAkBvpH,EAASspH,EAAkBjO,GAC7CmO,EAAgBxpH,EAASiuC,EAAMotE,GACnC17G,EAAOe,GAAW6oH,EAAiBC,GAAgBzsH,EAAM6rH,IAAa,IACtEjpH,EAAOe,GAAW8oH,EAAeD,GAAkBxsH,EAAM6rH,IAAa,GACxE,CAgCMa,CAAcV,EAAkBvoG,EAAO7S,IAAKlf,EAAEkkC,SA/BrB,SAAUnS,EAAQylC,GAC/C,GAAIzlC,EAAOu4B,UAAUsI,gBAAsC,IAArB7gC,EAAOs9C,WAAsB7X,EAAMrrC,MAAO,CAC9E,IAAItpB,EAAM2sD,GAAcU,eAAen+B,EAAOu4B,UAAUC,UACpDiF,GAAcgB,eAAe3tD,KAA0B,IArwChD,SAAUA,GACvB,OAAO00B,GAAe10B,IAAQ60B,GAAc70B,EAC9C,CAmwC6Co4H,CAASp4H,KAChDq3H,GAAiBnoG,EAAQgkC,GAAoByB,EAAMrrC,MAAOtpB,IAC1D20D,EAAMtiC,IAAI,MAEd,CACF,CAwBMgmG,CAAyBnpG,EAAQylC,GAvBT,SAAUo1D,EAAgB76F,EAAQylC,EAAOhY,GACrE,GAAIztB,EAAOu4B,UAAUsI,cAAe,CAClC,IAAIuoE,EAAU5pH,EAASiuC,EAAMotE,GAC7B17G,EAAOiqH,GAAS,SAAUC,GACxB,IAAIv4H,EAAM2sD,GAAcU,eAAen+B,EAAOu4B,UAAUC,UACxD2pE,GAAatH,EAAgB76F,EAAOy4B,UAAW3nD,GAAKiN,MAAK,SAAU+lC,GACjE,OAAOukF,GAAoBroG,EAAQylC,EAAO3hB,EAC5C,GACF,GACF,CACF,CAcMwlF,CAAwBf,EAAkBvoG,EAAQylC,EAAOx3D,EAAEkkC,SAE/D,IACOszB,CACT,EACI8jE,GAAehtH,EAAMksH,IAAU,GAC/Be,GAAejtH,EAAMksH,IAAU,GAC/BgB,GAAuB,SAAUzpG,EAAQmjB,EAASsiB,GACpD,GAAIrC,GAA0BpjC,GAAS,CACrC,IAAI0pG,EAAYzB,GAAgBjoG,EAAQmjB,GAAS5lC,YAAW,WAC1D,IAAI+6C,EAAMt4B,EAAOu4B,UAAUC,SAC3B,OAAOrV,EAAUsa,GAAcW,aAAa9F,GAAOmF,GAAcU,eAAe7F,EAClF,IACA,OAAO6pE,GAAa5lH,EAAMs+G,GAAgB76F,GAASA,EAAOy4B,UAAWixE,GAAW1rH,QAAO,SAAU6kE,GAC/F,IAAI8mD,EAAatH,GAAQx/C,GACzB,OAAO4+C,GAAYh8D,EAAOkkE,GAAY3rH,QAAO,SAAUlN,GAErD,OADAq3H,GAAiBnoG,EAAQlvB,IAClB,CACT,GACF,GACF,CACE,OAAO,CAEX,EAiBI84H,GAAmB,SAAU5pG,EAAQylC,GACvC,OAAO,SAAU3hB,GACf,OAAO29E,GAAYh8D,EAAO3hB,GAAU9lC,QAAO,SAAUlN,GAEnD,OADAq3H,GAAiBnoG,EAAQlvB,IAClB,CACT,GACF,CACF,EACI+4H,GAAe,SAAU7pG,EAAQylC,EAAOhnD,EAAMwE,GAChD,IAAIsgB,EAAWvD,EAAOy4B,UAClB8vE,EAAmBhsH,EAAMs+G,GAAgB76F,GAC7CA,EAAOg2C,YAAYwjC,QAAO,WACxBx5E,EAAOu4B,UAAU2U,OA3BI,SAAUzuD,EAAMwE,GACvC,IAAIqH,EAAQpmB,SAASwqD,cAGrB,OAFApkC,EAAMynC,SAAStzC,EAAK7T,YAAa6T,EAAKgnB,UACtCnb,EAAM0nC,OAAO/uC,EAAGrY,YAAaqY,EAAGwiB,UACzBnb,CACT,CAsB4Bw/G,CAAmBrrH,EAAMwE,IACjD+c,EAAOk9C,YAAY,UACnBilD,GAAaoG,EAAkBhlG,EAAUk6B,GAAcU,eAAen+B,EAAOu4B,UAAUC,WAAWpvD,IAAIk5H,IAAQl5H,IAAIwgI,GAAiB5pG,EAAQylC,GAC7I,IACAzlC,EAAOi8C,aACT,EA2CI8tD,GAAoB,SAAU/pG,EAAQylC,EAAOtiB,GAC/C,GAAInjB,EAAOu4B,UAAUsI,eAAiBuC,GAA0BpjC,GAAS,CACvE,IAAIvhB,EAAOg/C,GAAcU,eAAen+B,EAAOu4B,UAAUC,UACzD,OAzC2B,SAAUx4B,EAAQylC,EAAOtiB,EAAS1kC,GAC/D,IAAI8kB,EALQ,SAAUA,EAAUrW,GAEhC,OADkBi6C,GAAiBj6C,EAAMqW,IACNA,CACrC,CAEiBymG,CAAQhqG,EAAOy4B,UAAWh6C,EAAK7T,aAC1C29H,EAAmBhsH,EAAMs+G,GAAgB76F,GACzC4iG,EAAeT,GAAaoG,EAAkBhlG,EAAU9kB,GAC5D,OAAOmkH,EAAa7kH,MAAK,SAAU+lC,GACjC,OAAIX,EACKW,EAAS7mC,KAAKb,EAASoC,EAASJ,KAAKkkH,GAAOx+E,KAAatlC,EAAS1B,KAAMV,EAASoC,EAASJ,KAAKikH,GAAQv+E,KAAatlC,EAAS1B,MAE7HgnC,EAAS7mC,KAAKuB,EAAS1B,KAAMV,EAASoC,EAASJ,KAAKikH,GAAQv+E,KAAatlC,EAAS1B,KAAMV,EAASoC,EAASJ,KAAKkkH,GAAOx+E,KAEjI,IAAG16C,IAAIwgI,GAAiB5pG,EAAQylC,IAAQloD,YAAW,WACjD,IAAI0sH,EAAav/D,GAASvnB,EAAS5f,EAAU9kB,GACzCokH,EAAaoH,EAAWlsH,MAAK,SAAUjN,GACzC,OAAOqxH,GAAaoG,EAAkBhlG,EAAUzyB,EAClD,IACA,OAAOilB,GAAM6sG,EAAcC,GAAY,WACrC,OAAO9H,GAAewN,EAAkBhlG,EAAU9kB,GAAMT,QAAO,SAAUqZ,GACvE,QAhD4B,SAAUA,GAC5C,OAAOtB,GAAMm1C,GAAgB7zC,GAAM8zC,GAAe9zC,IAAM,SAAU2+D,EAAUI,GAC1E,IAAI8zC,EAAqBjP,IAAkB,EAAMjlC,GAC7Cm0C,EAAoBlP,IAAkB,EAAO7kC,GACjD,OAAOprB,GAAa3zC,EAAK6yG,GAAoBjsH,QAAO,SAAUnN,GAC5D,OAAOA,EAAImtD,QAAQksE,EACrB,GACF,IAAG7sH,OAAM,EACX,CAwCY8sH,CAA8B/yG,KAChC+gE,GAAgBp4D,EAAQmjB,EAAS/1B,GAAqBiK,KAC/C,EAIX,GACF,IAAGxZ,SAAQ,WACT,OAAOglH,EAAW9kH,MAAK,SAAU0d,GAC/B,OAAOwuG,EAAW7gI,KAAI,SAAU6Z,GAM9B,OALIkgC,EACF0mF,GAAa7pG,EAAQylC,EAAOhnD,EAAMwE,GAElC4mH,GAAa7pG,EAAQylC,EAAOxiD,EAAIxE,IAE3B,CACT,GACF,GACF,IAAGnB,OAAM,EACX,GACF,CAIW+sH,CAAyBrqG,EAAQylC,EAAOtiB,EAAS1kC,EAC1D,CACA,OAAO,CACT,EAQI6rH,GAAkB,SAAUjzG,GAC9B,OAAgC,IAAzB7G,GAAgB6G,EACzB,EAaIkzG,GAAgB,SAAUvqG,EAAQmjB,GACpC,IAAI0J,EAAUz/B,GAAqB4S,EAAOy4B,WACtC4lC,EAAWjxE,GAAqB4S,EAAOu4B,UAAUwkB,YACjDytD,EAAgBhrH,EAxBC,SAAUqtC,EAASwxC,GACxC,IAAIlsD,EAAU6hD,GAAeqK,EAAUxxC,GACvC,OAAO9sC,EAAYoyB,EAAS/N,IAAWnnB,KAAKb,EAAS+1B,IAAU,SAAUjpC,GACvE,OAAOipC,EAAQ93B,MAAM,EAAGnR,EAC1B,GACF,CAmB+BuhI,CAAiB59E,EAASwxC,GAAWisC,IAClE,OAAO7pH,GAAO+pH,GAAexsH,QAAO,SAAU/a,GAC5C,IA7uOsC6S,EA6uOlC4oF,EAAUjhC,GAAcU,eAAen+B,EAAOu4B,UAAUC,UAC5D,SA/2CkC,SAAUrV,EAASu7C,EAASrnE,GAChE,OAAOtB,GAAMm1C,GAAgB7zC,GAAM8zC,GAAe9zC,IAAM,SAAU2+D,EAAUI,GAC1E,IAAI8zC,EAAqBjP,IAAkB,EAAMjlC,GAC7Cm0C,EAAoBlP,IAAkB,EAAO7kC,GAC7Cs0C,EAAoBzP,IAAkB,EAAOv8B,GACjD,OAAIv7C,EACK6nB,GAAa3zC,EAAKqzG,GAAmB1sH,QAAO,SAAU2lH,GAC3D,OAAOA,EAAQ1lE,QAAQksE,IAAsBzrC,EAAQzgC,QAAQisE,EAC/D,IAEOj/D,GAAa5zC,EAAKqzG,GAAmB1sH,QAAO,SAAU2sH,GAC3D,OAAOA,EAAQ1sE,QAAQisE,IAAuBxrC,EAAQzgC,QAAQksE,EAChE,GAEJ,IAAG7sH,OAAM,EACX,CAg2CQstH,CAAgCznF,EAASu7C,EAASz7F,EAAOkqB,OA9uOvBrX,EA8uO0D7S,EA7uO3FooE,GAAYv1D,EAAQqX,MAAQy5E,GAAsB9wF,EAAQqX,QA2tO1C,SAAUg2B,EAASnjB,EAAQ/8B,EAAQunI,GAC1D,IAAIK,EAAoBtuH,EAAM0sF,GAAiBjpE,GAC3CsnE,EAAcroF,EAAMO,EAASgrH,EAAeK,IAAoB,SAAUxzG,GAC5E,OAAOA,EAAIlK,GACb,IACA,GAA2B,IAAvBm6E,EAAY7kG,OACd21F,GAAgBp4D,EAAQmjB,EAASlgD,OAC5B,CACL,IAAI6N,EA/uOqB,SAAUi3B,EAAYu/D,GACjD,IAAIthE,EAAiB+gE,IAAqB,GACtC+jC,EAAYzjC,GAAoCC,EAAathE,EAAe7Y,KAGhF,OAFAiE,GAAShE,GAAqB2a,GAAa/B,GAC3ClU,GAAS1E,GAAqB2a,IACvB01B,GAAcqtE,EAAW,EAClC,CAyuOcC,CAAuB9nI,EAAOkqB,IAAKm6E,GAC7CtnE,EAAOu4B,UAAU2U,OAAOp8D,EAAIitD,UAC9B,CACF,CAQMitE,CAAmB7nF,EAASnjB,EAAQ/8B,EAAQunI,GACrC,GAIX,GACF,EACIS,GAAoB,SAAUjrG,EAAQmjB,GACxC,QAAOnjB,EAAOu4B,UAAUsI,eAAgB0pE,GAAcvqG,EAAQmjB,EAChE,EAEI+nF,GAAgB,SAAUlrG,EAAQmjB,EAASrtC,GAG7C,OAFAkqB,EAAOsiE,oBAAoBk+B,gBAC3BpoC,GAAgBp4D,EAAQmjB,EAAS/1B,GAAqBtX,KAC/C,CACT,EAmBIq1H,GAAoB,SAAUnrG,EAAQmjB,GACxC,OAAOnjB,EAAOu4B,UAAUsI,cAnBR,SAAU7gC,EAAQmjB,GAClC,IAAIioF,EAAcjoF,EAAUkwC,GAAgBC,GACxC15B,EAAYzW,EAAUwb,GAAWoL,SAAWpL,GAAWyL,UACvDs0B,EAAUl2B,GAA2B5O,EAAW55B,EAAOy4B,UAAWz4B,EAAOu4B,UAAUC,UACvF,OAAI4yE,EAAY1sC,GACPwsC,GAAclrG,EAAQmjB,EAASu7C,EAAQxgC,SAAS/a,IAEhD3kC,EAASC,KAAKw8G,GAAkB93E,EAASu7C,IAAUn1F,QAAO,SAAUuH,GACzE,OAAOs6H,EAAYt6H,IAAQ+3D,GAAsB61B,EAAS5tF,EAC5D,IAAGkN,QAAO,SAAUlN,GAClB,OAAOo6H,GAAclrG,EAAQmjB,EAASryC,EAAIotD,SAAS/a,GACrD,GAEJ,CAM0CkoF,CAAYrrG,EAAQmjB,GAL5C,SAAUnjB,EAAQmjB,GAClC,IAAIu5C,EAAe18D,EAAOu4B,UAAU2F,UACpC,QAAOvoC,GAAU+mE,IAAgBwuC,GAAclrG,EAAQmjB,EAASu5C,EAClE,CAEyEuiC,CAAYj/F,EAAQmjB,EAC7F,EASImoF,GAAmB,SAAU5kI,GAC/B,IAAIgJ,EAASwH,SAASxQ,EAAO,IAC7B,OAAOuQ,MAAMvH,GAAU,EAAIA,CAC7B,EACI67H,GAAqB,SAAUC,EAAW11H,GAG5C,OAFsB01H,GAzznBA,UAAf7oI,GAyznBsCmT,GAAW,SAAW,YACtB,QAAhC2gB,GAAM3gB,EAAS,aAAyB,SAAW,QAElE,EAmBI21H,GAAa,SAAUzrG,GACzB,IAAIqpE,EAASqiC,GAAkB1rG,GAC/B,OAAQA,EAAO2L,KAAKggG,eAAiBtiC,EAAO5mG,OAAS,GAVlC,SAAUu9B,EAAQqpE,GACrC,OAAOprF,GAAOorF,GAAQ,SAAUpnC,GAC9B,IAAI2pE,EAAkBL,GAAmB1oE,GAAsB7iC,GAASiiC,GACpE4pE,EAAcj1G,GAAOqrC,EAAO2pE,GAAiBxiI,IAAIkiI,IAAkBhuH,MAAM,GAE7E,MAA2B,UADL0iB,EAAO7S,IAAIyhC,mBAAmBqT,EAAM90C,MACpB0+G,EAAc,CACtD,GACF,CAG4DC,CAAe9rG,EAAQqpE,GACnF,EACI0iC,GAAkB,SAAUlhI,GAC9B,OAAO25B,GAAO35B,IAAO45B,GAAW55B,EAClC,EAII6gI,GAAoB,SAAU1rG,GAChC,OAAOxgB,GAr2diB2X,EAq2dE6I,EAAOu4B,UAAUgxC,oBAp2dpCtqF,EAAMkY,EAAO/J,MAo2d6C,SAAUviB,GACzE,OAAQkhI,GAAgBlhI,KALA,SAAUA,GACpC,OAAO6hB,GAAO7hB,GAAImT,OAAO+tH,GAC3B,CAGoCC,CAAsBnhI,IA7CjDg0B,GA6CmEh0B,GA7CjD,SAAUwsB,GACjC,OAAO7B,GAAwB6B,EAAIlK,MAAQsI,GAAyB4B,EAAIlK,IAC1E,IAAGnP,QAAO,SAAUqZ,GAClB,OAAO7B,GAAwB6B,EAAIlK,IACrC,GA0CA,IAv2dc,IAAUgK,CAw2d1B,EACIkB,GAAS,SAAU2H,EAAQk6F,GAC7B,IAAI/sG,EAAM6S,EAAO7S,IAAKorC,EAAYv4B,EAAOu4B,UAAW8sC,EAAYrlE,EAAOqlE,UACnE4mC,EAn8be,SAAUjsG,GAC7B,OAAOA,EAAO6hC,SAAS,cAAe,OAAQ,SAChD,CAi8boBqqE,CAAelsG,GAC7BmsG,EAAa,YAAY9/G,KAAK4/G,GAAa,GAC3CG,EAAcl1H,SAAS+0H,EAAa,IACpCT,EAAY3oE,GAAsB7iC,GAClCgsE,EAAkBhqC,GAAmBhiC,GACpCA,EAAOqsG,kBAAkB,wBAA2BrsG,EAAOqsG,kBAAkB,sBACxD,KAApBrgC,GAA2B7+E,EAAIoiC,UAAUgJ,EAAU2F,UAAW/wC,EAAI4hC,UACpEs2C,EAAUrpF,MAAM,OAGpBmD,EAAOusH,GAAkB1rG,IAAS,SAAUiiC,IA7C1B,SAAU90C,EAAK+sG,EAASsR,EAAW9kI,EAAO4lI,EAAMx2H,GAClE,IAAI81H,EAAkBL,GAAmBC,EAAWp+G,GAAqBtX,IACzE,GAAgB,YAAZokH,EAAuB,CACzB,IAAIqS,EAAaz4G,KAAKnkB,IAAI,EAAG27H,GAAiBx1H,EAAQjE,MAAM+5H,IAAoBllI,GAChFymB,EAAI0iC,SAAS/5C,EAAS81H,EAAiBW,EAAaA,EAAaD,EAAO,GAC1E,MACMC,EAAajB,GAAiBx1H,EAAQjE,MAAM+5H,IAAoBllI,EAAQ4lI,EAC5En/G,EAAI0iC,SAAS/5C,EAAS81H,EAAiBW,EAE3C,CAqCIC,CAAcr/G,EAAK+sG,EAASsR,EAAWY,EAAaD,EAAYlqE,EAAM90C,IACxE,GACF,EAEIs/G,GAAkB,SAAUzsG,EAAQk+F,GACtC,GAAIl+F,EAAOu4B,UAAUsI,eAAiB4qE,GAAWzrG,GAAS,CACxD,IAAI7S,EAAM6S,EAAO7S,IACbmrC,EAAMt4B,EAAOu4B,UAAUC,SACvB1nD,EAAM2sD,GAAcU,eAAe7F,GACnC2J,EAAQ90C,EAAIoiC,UAAU+I,EAAIjyB,eAAgBlZ,EAAI4hC,SAClD,GAAc,OAAVkT,GAAkBsyB,GAAiBnnE,GAAqB60C,GAAQnxD,GAElE,OADAunB,GAAO2H,EAAQ,YACR,CAEX,CACA,OAAO,CACT,EAEI0sG,GAAgB,SAAU1sG,EAAQk6F,GACpCl6F,EAAO6zC,SAASqJ,YAAYg9C,GAAS,EAAO,KAC9C,EA6DIyS,GAAW,SAAUp2F,GACvB,YAAsBj0C,IAAlBi0C,EAAM6jC,SAAkD,IAAzB7jC,EAAM6jC,QAAQ33E,OACxC+b,EAAS1B,OAEX0B,EAASJ,KAAKm4B,EAAM6jC,QAAQ,GACrC,EAuDIwyD,GAAiB,SAAUvpB,EAAen2F,GAC5C,OAAO1L,GAAM6hG,EAAen2F,EAAKiC,SACnC,EACI09G,GAAgB,SAAUxpB,EAAen2F,GAC3C,QAAIgI,GAAShI,MAEFkH,GAAYlH,KACb0/G,GAAevpB,EAAen2F,KAAUigD,GAAiBjgD,EAIrE,EAMI4/G,GAAuB,SAAUzpB,EAAen2F,GAClD,GAAIgI,GAAShI,GAAO,CAClB,GAA8B,IAA1BA,EAAKs1B,UAAU//C,OACjB,OAAO,EACF,GAAI,QAAQwE,KAAKimB,EAAKs1B,cAAgBt1B,EAAK8C,aAAe48G,GAAevpB,EAAen2F,EAAK8C,cAClG,OAAO,CAEX,CACA,OAAO,CACT,EACIs2F,GAAgB,SAAUtmF,GAC5B,IAIIqmF,EAAeZ,EAAUnS,EAJzBnmF,EAAM6S,EAAO7S,IAAKorC,EAAYv4B,EAAOu4B,UACrC/sB,EAASxL,EAAOwL,OAAQ63E,EAAgB73E,EAAOkH,mBAC/CxlB,EAAOqrC,EAAUwkB,WACjBx5C,EAAWvD,EAAOy4B,UAElBuzC,EAAkBhqC,GAAmBhiC,GACzC,GAAK9S,GAASkH,GAAYlH,IAAU8+E,EAApC,CAGA,IAAI+gC,EAAexpG,EAASpU,SAAS7lB,cACrC,GAAKkiC,EAAO2H,aAAa45F,EAAc/gC,EAAgB1iG,iBA1BpC,SAAU+5G,EAAer3F,EAAMkB,GAClD,OAAOlP,EAAOm0B,GAAQ/kB,GAAqBF,GAAOE,GAAqBpB,KAAQ,SAAUqL,GACvF,OAAOu1G,GAAevpB,EAAehsF,EAAIlK,IAC3C,GACF,CAsB2E6/G,CAAe3pB,EAAe9/E,EAAUrW,GAAjH,CAGA,IAAIorC,EAAMC,EAAUC,SAChBnyB,EAAiBiyB,EAAIjyB,eACrBgsB,EAAciG,EAAIjG,YAClBC,EAAegG,EAAIhG,aACnBC,EAAY+F,EAAI/F,UAChB06E,EAAmBjpF,GAAShkB,GAEhC,IADA9S,EAAOqW,EAASjT,WACTpD,GACL,GAAI2/G,GAAcxpB,EAAen2F,GAAO,CACtC,GAAI4/G,GAAqBzpB,EAAen2F,GAAO,CAC7Cu4F,EAAWv4F,EACXA,EAAOA,EAAK8C,YACZ7C,EAAI7c,OAAOm1G,GACX,QACF,CACKY,IACHA,EAAgBl5F,EAAIpB,OAAOigF,EAAiB9pC,GAAwBliC,IACpE9S,EAAK5hB,WAAWC,aAAa86G,EAAen5F,GAC5ComF,GAAU,GAEZmS,EAAWv4F,EACXA,EAAOA,EAAK8C,YACZq2F,EAAcr7G,YAAYy6G,EAC5B,MACEY,EAAgB,KAChBn5F,EAAOA,EAAK8C,YAGZsjF,GAAW25B,IACb30E,EAAIvG,SAAS1rB,EAAgBgsB,GAC7BiG,EAAItG,OAAOM,EAAcC,GACzBgG,EAAU2U,OAAO5U,GACjBt4B,EAAOi8C,cAjCT,CAJA,CAuCF,EAeIsmB,GAA0B,SAAUviE,EAAQktG,GAC1CA,EAAoBjiI,aAAa,oBACnC86B,GAAwBmnG,GALF,SAAUltG,GAClCA,EAAOu4B,UAAU2U,OAAOltC,EAAOu4B,UAAUC,SAC3C,CAII20E,CAAoBntG,GACpBA,EAAOu4B,UAAUrlC,eAAeg6G,GAEpC,EACIE,GAAuB,SAAUptG,EAAQ/xB,GAC3C,IAAIi/H,EAhBwB,SAAUltG,GACtC,OAAOjB,GAAW3R,GAAqB4S,EAAOy4B,WAAY,qBAAqBrvD,KAAI,SAAUiuB,GAC3F,OAAOA,EAAIlK,GACb,IAAGzP,WACL,CAY4B2vH,CAAwBrtG,GAClD,GAAKktG,EAGL,MAAe,qBAAXj/H,EAAE7B,MACJ6B,EAAEG,iBACFH,EAAEW,uBACF2zF,GAAwBviE,EAAQktG,SAG9B3nG,GAAW2nG,KACb3qC,GAAwBviE,EAAQktG,GAChCltG,EAAOg2C,YAAY1uE,OAEvB,EAKIgmI,GAA2B73G,GAoB3B83G,GAAe,SAAUvtG,EAAQ45B,EAAWtvC,GAC9C,IAAIw2E,EAAc32B,GAAYnqC,EAAOy4B,WACjC+0E,EAA2BjxH,EAAMosD,GAAsC,IAAd/O,EAAkBknC,EAAY9tF,KAAO8tF,EAAYt9D,MAC9G,GAAIlZ,EAAM82C,WA3oca,SAAUphC,GACjC,MAAsC,KAA/BgiC,GAAmBhiC,EAC5B,CAyocyBytG,CAAmBztG,GAAS,CACjD,IAAIwpE,EAAMxpE,EAAO7S,IAAIoiC,UAAUjlC,EAAM+b,eAAgB,OACrD,IAAKmjE,EACH,OAGF,IADegkC,EAAyB/vE,GAAcU,eAAe7zC,IACtD,CACb,IAAIojH,EAjBY,SAAU1tG,GAC9B,IAAI2tG,EAAY3tG,EAAO7S,IAAIpB,OAAOi2C,GAAmBhiC,IAIrD,QAHKlW,GAAIC,IAAMD,GAAIC,IAAM,MACvB4jH,EAAUp5H,UAAY,2BAEjBo5H,CACT,CAWqBC,CAAgB5tG,GACb,IAAd45B,EACF55B,EAAOgsB,EAAEw9C,GAAKzgD,MAAM2kF,GAEpB1tG,EAAOgsB,EAAEw9C,GAAK1gD,OAAO4kF,GAEvB1tG,EAAOu4B,UAAUvS,OAAO0nF,GAAU,GAClC1tG,EAAOu4B,UAAU+B,UACnB,CACF,CACF,EAiBIuzE,GAAU,SAAU7tG,EAAQmjB,GAC9B,OAjBuB,SAAUnjB,EAAQmjB,GACzC,IAAIyW,EAAYzW,EAAUwb,GAAWoL,SAAWpL,GAAWyL,UACvD9/C,EAAQ0V,EAAOu4B,UAAUC,SAC7B,OA3C8B,SAAUoB,EAAW55B,EAAQ1V,GAC3D,OAAO28G,GAAiBjnG,EAAQ45B,EAAWtvC,EAAOmpE,GAA8BC,GAA6B45C,GAC/G,CAyCSQ,CAA0Bl0E,EAAW55B,EAAQ1V,GAAOzM,SAAQ,WAEjE,OADA0vH,GAAavtG,EAAQ45B,EAAWtvC,GACzB9L,EAAS1B,MAClB,GACF,CAUSixH,CAAmB/tG,EAAQmjB,GAASnlC,QAAO,SAAUgwH,GAE1D,OADAjH,GAAY/mG,EAAQguG,IACb,CACT,GACF,EACIC,GAAU,SAAUjuG,EAAQkuG,GAC9B,OAfqB,SAAUluG,EAAQkuG,GACvC,IAAIt0E,EAAYs0E,EAAO,GAAK,EACxB5jH,EAAQ0V,EAAOu4B,UAAUC,SAC7B,OAhD4B,SAAUoB,EAAW55B,EAAQ1V,GAOzD,OAAO+8G,GAAernG,EAAQ45B,EAAWtvC,GAN1B,SAAUozC,GACvB,OAAO+1B,GAA6B/1B,IAAkB61B,GAAc71B,EACtE,IACc,SAAUA,GACtB,OAAOg2B,GAA4Bh2B,IAAkB81B,GAAa91B,EACpE,GACmE4vE,GACrE,CAwCSa,CAAwBv0E,EAAW55B,EAAQ1V,GAAOzM,SAAQ,WAE/D,OADA0vH,GAAavtG,EAAQ45B,EAAWtvC,GACzB9L,EAAS1B,MAClB,GACF,CAQSsxH,CAAiBpuG,EAAQkuG,GAAMlwH,QAAO,SAAUgwH,GAErD,OADAjH,GAAY/mG,EAAQguG,IACb,CACT,GACF,EACIK,GAAuB,SAAUruG,EAAQmjB,GAE3C,OAAO+kF,GAAqBloG,EAAQmjB,EADhBA,EAAUuwC,GAA8BD,GAE9D,EAEI66C,GAAW,SAAUphH,GACvB,OAAOnO,EAAW,CAAC,cAAepc,GAAKuqB,GACzC,EACIqhH,GAAc,SAAUtrI,GAC1B,IAAIq1D,EAAMp0D,SAASwqD,cAGnB,OAFA4J,EAAIoP,eAAezkE,EAAOkqB,KAC1BmrC,EAAIqP,aAAa1kE,EAAOkqB,KACjBmrC,CACT,EACIk2E,GAAgB,SAAUxiH,EAAMqL,EAAK8rB,GACnCA,EACF5xB,GAASvF,EAAMqL,GAEf7F,GAAQxF,EAAMqL,EAElB,EA4BIo3G,GAA0B,SAAUzuG,EAAQmjB,GAC9C,IAAIn3B,EAAOoB,GAAqB4S,EAAOy4B,WACnC3nD,EAAM2sD,GAAcU,eAAen+B,EAAOu4B,UAAUC,UACpD4M,EAAYpD,GAAmBhiC,GAC/B0uG,EAAiBxsE,GAAwBliC,GAC7C,OAZ0B,SAAUlvB,EAAKkb,GACzC,IAAIyR,EAASlhB,EAAM7C,GAAIsS,GACvB,OAAO6S,GAAUzR,GAAqBtc,EAAIlG,aAAcw5B,GAAW3G,GAAQl0B,OAAO+kI,GACpF,CASSK,CAAsB79H,EAAKkb,GAAMhO,QAAO,WAC7C,GATsB,SAAUgO,EAAMm3B,EAASryC,GACjD,OAAOqyC,EA3/BU,SAAU71B,EAAOxc,GAClC,OAAO8zH,GAA0Bt3G,EAAOxc,GAAKmzH,QAAQ5mH,QACvD,CAy/BmBuxH,CAAa5iH,EAAKmB,IAAKrc,GA9/BtB,SAAUwc,EAAOxc,GACnC,OAAO6zH,GAA8Br3G,EAAOxc,GAAKmzH,QAAQ5mH,QAC3D,CA4/BiDwxH,CAAc7iH,EAAKmB,IAAKrc,EACzE,CAOQg+H,CAAoB9iH,EAAMm3B,EAASryC,GAAM,CAC3C,IAAIwnD,EArBY,SAAUtsC,EAAMw4F,EAAe75G,EAAOw4C,GAC1D,MAAsB,KAAlBqhE,EAdS,SAAUx4F,EAAMm3B,GAC7B,IAAI4iB,EAAK34C,GAAqB,MAE9B,OADAohH,GAAcxiH,EAAM+5C,EAAI5iB,GACjBorF,GAAYxoE,EACrB,CAWWgpE,CAAS/iH,EAAMm3B,GAVR,SAAUn3B,EAAMm3B,EAAS2iB,EAAWn7D,GACpD,IAAIs3D,EAAQ70C,GAAqB04C,GAC7BC,EAAK34C,GAAqB,MAI9B,OAHAiJ,GAAS4rC,EAAOt3D,GAChB4mB,GAAS0wC,EAAO8D,GAChByoE,GAAcxiH,EAAMi2C,EAAO9e,GACpBorF,GAAYxoE,EACrB,CAKWipE,CAAYhjH,EAAMm3B,EAASqhE,EAAe75G,EAErD,CAegBskI,CAAgBjjH,EAAMo5C,EAAWspE,EAAgBvrF,GAE3D,OADAnjB,EAAOu4B,UAAU2U,OAAO5U,IACjB,CACT,CACE,OAAO,CAEX,GACF,EACI42E,GAAU,SAAUlvG,EAAQmjB,GAC9B,QAAInjB,EAAOu4B,UAAUsI,eACZ4tE,GAAwBzuG,EAAQmjB,EAI3C,EAsBIi8C,GAAS,SAAU3lF,GAErB,IADA,IAAIP,EAAI,GACClP,EAAK,EAAGA,EAAK+R,UAAUtZ,OAAQuH,IACtCkP,EAAElP,EAAK,GAAK+R,UAAU/R,GAExB,OAAO,WACL,OAAOyP,EAAEuC,MAAM,KAAM9C,EACvB,CACF,EACIi2H,GAAU,SAAUC,EAAU/1F,GAChC,OAAOv5B,EAfK,SAAUsvH,EAAU/1F,GAChC,OAAOt7B,EAhBa,SAAUqxH,GAC9B,OAAOnwH,EAAMmwH,GAAU,SAAUn/F,GAC/B,OAAOptB,GAAS,CACdw1D,UAAU,EACVE,QAAQ,EACRD,SAAS,EACT//B,SAAS,EACT0gF,QAAS,EACT75B,OAAQ1jF,GACPu0B,EACL,GACF,CAKco/F,CAAgBD,IAAW,SAAUn/F,GAC/C,OALe,SAAUA,EAASoJ,GACpC,OAAOA,EAAI4/E,UAAYhpF,EAAQgpF,SAAW5/E,EAAIg/B,WAAapoC,EAAQooC,UAAYh/B,EAAIk/B,SAAWtoC,EAAQsoC,QAAUl/B,EAAIi/B,UAAYroC,EAAQqoC,SAAWj/B,EAAId,UAAYtI,EAAQsI,OAC7K,CAGW+2F,CAAar/F,EAASoJ,GAAO,CAACpJ,GAAW,EAClD,GACF,CAWgBs/F,CAAQH,EAAU/1F,IAAM,SAAUpJ,GAC9C,OAAOA,EAAQmvD,QACjB,GACF,EAEIowC,GAAU,SAAUxvG,EAAQmjB,GAC9B,IAAIyW,EAAYzW,EAAUwb,GAAWoL,SAAWpL,GAAWyL,UACvD9/C,EAAQ0V,EAAOu4B,UAAUC,SAC7B,OAAOyuE,GAAiBjnG,EAAQ45B,EAAWtvC,EAAO+oE,GAAeC,GAAc39D,IAAW3X,QAAO,SAAUgwH,GAEzG,OADAjH,GAAY/mG,EAAQguG,IACb,CACT,GACF,EACIyB,GAAU,SAAUzvG,EAAQkuG,GAC9B,IAAIt0E,EAAYs0E,EAAO,GAAK,EACxB5jH,EAAQ0V,EAAOu4B,UAAUC,SAC7B,OAAO6uE,GAAernG,EAAQ45B,EAAWtvC,EAAO+oE,GAAeC,GAAc39D,IAAW3X,QAAO,SAAUgwH,GAEvG,OADAjH,GAAY/mG,EAAQguG,IACb,CACT,GACF,EACI0B,GAAqB,SAAU1vG,EAAQmjB,GAEzC,OAAO+kF,GAAqBloG,EAAQmjB,EADlBA,EAAUmwC,GAAeD,GAE7C,EAwCIs8C,GAAiB,SAAUC,EAAeC,EAAgB5iG,EAAO/zB,EAAGU,GACtE,IAAIqgF,EAAQjiC,GAAY5qC,GAAqB6f,GAAQ,iBAAiB7jC,KAAI,SAAU6E,GAClF,OAAOA,EAAEkf,GACX,IACI2iH,EAAUtwH,EAhCC,SAAUowH,EAAeG,GACxC,OAAOhyH,EAAKgyH,GAAK,SAAUr+F,GACzB,IAAI2oB,EAZM,SAAUA,EAAMs4B,GAC5B,MAAO,CACL7gF,KAAMuoD,EAAKvoD,KAAO6gF,EAClBthF,IAAKgpD,EAAKhpD,IAAMshF,EAChBt/D,MAAOgnC,EAAKhnC,OAAQs/D,EACpBr/D,OAAQ+mC,EAAK/mC,QAASq/D,EACtBx9E,MAAOklD,EAAKllD,MAAQw9E,EACpBv/D,OAAQinC,EAAKjnC,OAASu/D,EAE1B,CAGeq9C,CAAQxmF,GAAM9X,EAAG3gC,0BAA2B,GACvD,MAAO,CACL,CACEmI,EAAGmhD,EAAKvoD,KACR8H,EAAGg2H,EAAcv1E,GACjB0X,KAAMrgC,GAER,CACEx4B,EAAGmhD,EAAKhnC,MACRzZ,EAAGg2H,EAAcv1E,GACjB0X,KAAMrgC,GAGZ,GACF,CAgByBu+F,CAAWL,EAAe31C,IAAQ,SAAUi2C,GACjE,OAAOL,EAAeK,EAAQt2H,EAChC,IACA,OAlBsB,SAAUk2H,EAAS52H,EAAGU,GAC5C,OAAO+F,EAAMmwH,GAAS,SAAUpwH,EAAKywH,GACnC,OAAOzwH,EAAIzC,MAAK,WACd,OAAOuB,EAASJ,KAAK+xH,EACvB,IAAG,SAAUC,GACX,IAAIC,EAAUv8G,KAAKw8G,KAAKx8G,KAAK6lD,IAAIy2D,EAAUl3H,EAAIA,GAAK4a,KAAK6lD,IAAIy2D,EAAUx2H,EAAIA,IACvE22H,EAAUz8G,KAAKw8G,KAAKx8G,KAAK6lD,IAAIw2D,EAAUj3H,EAAIA,GAAK4a,KAAK6lD,IAAIw2D,EAAUv2H,EAAIA,IAC3E,OAAO4E,EAASJ,KAAKmyH,EAAUF,EAAUF,EAAYC,EACvD,GACF,GAAG5xH,EAAS1B,OACd,CAQS0zH,CAAkBV,EAAS52H,EAAGU,GAAGxQ,KAAI,SAAU8mI,GACpD,OAAOA,EAAOn+D,IAChB,GACF,EAaI0+D,GAAsBl0H,EAAMozH,IAZX,SAAUt1E,GAC7B,OAAOA,EAAK/mC,MACd,IAIc,SAAU48G,EAAQt2H,GAC9B,OAAOs2H,EAAOt2H,EAAIA,CACpB,IAKI82H,GAAsBn0H,EAAMozH,IAVd,SAAUt1E,GAC1B,OAAOA,EAAKhpD,GACd,IAIc,SAAU6+H,EAAQt2H,GAC9B,OAAOs2H,EAAOt2H,EAAIA,CACpB,IA6BI+2H,GAAoB,SAAU5M,EAAmBz2G,EAAOxc,GAC1D,IAAI8/H,EAAW7M,EAAkBz2G,EAAOxc,GACxC,OARwB,SAAU8/H,GAClC,OAAOA,EAAS5M,YAAcb,GAAUW,MAAsC,IAA9B8M,EAASpN,UAAU/gI,MACrE,CAMMouI,CAAoBD,KAAct7G,GAAOxkB,EAAIotD,YAL3B,SAAU0yE,GAChC,OAAOA,EAAS5M,YAAcb,GAAUS,IAAoC,IAA9BgN,EAASpN,UAAU/gI,MACnE,CAGiEquI,CAAkBF,IAbhE,SAAU7M,EAAmBz2G,EAAOsjH,GACrD,OAAOA,EAAS3M,QAAQjmH,QAAO,SAAU+yH,GACvC,OAAOhN,EAAkBz2G,EAAOyjH,GAAU9M,QAAQ7mH,QACpD,GACF,CAUY4zH,CAAajN,EAAmBz2G,EAAOsjH,GAExCA,EAAS3M,QAAQ5mH,QAE5B,EACI4zH,GAAyB10H,EAAMo0H,GAAmBhM,IAClDuM,GAAwB30H,EAAMo0H,GAAmB/L,IAOjDuM,GAAuB,SAAUnxG,EAAQmjB,EAASlW,EAAOmkG,GAC3D,IAAI94E,EAAMt4B,EAAOu4B,UAAUC,SACvBoB,EAAYzW,EAAU,GAAK,EAC/B,SAAIijB,OAT2B,SAAUjjB,EAASmV,EAAKrrB,GACvD,IAAIq5C,EAAW7oB,GAAcU,eAAe7F,GAC5C,OAAOwS,IAAY3nB,EAASlW,GAAOjvB,QAAO,SAAUlN,GAClD,OAAOA,EAAImtD,QAAQqoB,EACrB,GACF,CAImC+qD,CAA2BluF,EAASmV,EAAKrrB,KACxEoxF,GAAUzkE,EAAW55B,EAAQiN,GAAQkW,GAAS,GAAOrlC,MAAK,SAAUq/C,GAClE4pE,GAAY/mG,EAAQm9B,EACtB,IACO,GAGX,EAwCIk7B,GAAY,SAAUr4D,EAAQkuG,EAAMp9H,GACtC,IAAIm8B,EA1BS,SAAUqoC,EAAUxkE,GACjC,IAAIoc,EAAOpc,EAAIotD,QAAQoX,GACvB,OAAOlhD,GAAYlH,IAA2B,UAAlBA,EAAKiC,SAAuB3Q,EAASJ,KAAK8O,GAAQ1O,EAAS1B,MACzF,CAuBqBy+E,GAAP2yC,EAAsBp9H,GAC9BmyC,GAAgB,IAATirF,EACXjhG,EAAMhwB,MAAK,WACT,OAAO8pH,GAAY/mG,EAAQlvB,EAAIitD,UACjC,IAAG,SAAU9wB,GACX,OAAO69B,GAAW7nB,EAAMjjB,EAAOy4B,WAAWlvD,QAAO,SAAU6sF,GACzD,OAAOA,EAAQn4B,QAAQntD,EACzB,IAAGmM,MAAK,WACN,OAAO8pH,GAAY/mG,EAAQlvB,EAAIitD,UACjC,IAAG,SAAUtiC,GACX,OAhCY,SAAUyyG,EAAMluG,EAAQiN,EAAOn8B,GAC/C,IAAIk7F,EAAkBhqC,GAAmBhiC,GACrCgsE,EACFhsE,EAAOg2C,YAAYC,UAAS,WAC1B,IAAIngE,EAAUsX,GAAqB4+E,GACnC31E,GAASvgB,EAASosD,GAAwBliC,IAC1CzO,GAASzb,EAASsX,GAAqB,OACnC8gH,EACF58G,GAAQlE,GAAqB6f,GAAQn3B,GAErCsb,GAAShE,GAAqB6f,GAAQn3B,GAExC,IAAIwiD,EAAMt4B,EAAO7S,IAAIshC,YACrB6J,EAAIvG,SAASj8C,EAAQqX,IAAK,GAC1BmrC,EAAItG,OAAOl8C,EAAQqX,IAAK,GACxB45G,GAAY/mG,EAAQs4B,EACtB,IAEAyuE,GAAY/mG,EAAQlvB,EAAIitD,UAE5B,CAYauzE,CAAYpD,EAAMluG,EAAQiN,EAAOn8B,EAC1C,GACF,GACF,EACIygI,GAAqB,SAAUvxG,EAAQkuG,EAAMjhG,EAAOyE,GACtD,IAAI4mB,EAAMt4B,EAAOu4B,UAAUC,SACvB1nD,EAAM2sD,GAAcU,eAAe7F,GACnCtsC,EAAOgU,EAAOy4B,UAClB,IAAKy1E,GAAQ+C,GAAuBv/F,EAAI5gC,GAAM,CAC5C,IAAIsjF,EA3DsB,SAAUpoE,EAAMihB,EAAO51B,GACnD,OAtDmC,SAAU41B,EAAOn8B,GACpD,OAAO0P,GAAK1P,EAAI6rD,kBAAkB5+C,MAAK,SAAUs8C,GAC/C,OAAOo2E,GAAoBxjG,EAAOotB,EAAKvoD,KAAMuoD,EAAKhpD,IACpD,IAAG0M,MAAK,SAAUg0D,GAChB,OAAO0yD,GAtoCFt5D,GAD4B79C,EAuoCyBykD,GAtoC/B3oE,KAAI,SAAU0H,GACzC,OAAO6zH,GAA8Br3G,EAAOxc,GAAK0yH,UAAU73H,OAAOmF,EACpE,IAAGwM,MAAM,IAooC0DxM,GAvoC1C,IAAUwc,CAwoCnC,GACF,CAgDSkkH,CAA+BvkG,EAAO51B,GAAOwG,SAAQ,WAC1D,OAAO2C,GAAKnJ,EAAMslD,kBAAkB5+C,MAAK,SAAUs8C,GACjD,OAAOgqE,GAAuCQ,GAAkB74G,EAAMyxC,GAAc3U,OAAO7b,IAASotB,EAAKvoD,KAC3G,GACF,IAAGwL,MAAMmgD,GAAc3U,OAAO7b,GAChC,CAqDiBwkG,CAAwBzlH,EAAMihB,EAAOn8B,GAElD,OADAunF,GAAUr4D,EAAQkuG,EAAM95C,IACjB,CACT,CAAO,SAAI85C,IAAQgD,GAAsBx/F,EAAI5gC,MACvCsjF,EAxDsB,SAAUpoE,EAAMihB,EAAO51B,GACnD,OAtDmC,SAAU41B,EAAOn8B,GACpD,OAAO2P,GAAO3P,EAAI6rD,kBAAkB5+C,MAAK,SAAUs8C,GACjD,OAAOq2E,GAAoBzjG,EAAOotB,EAAKvoD,KAAMuoD,EAAKhpD,IACpD,IAAG0M,MAAK,SAAUg0D,GAChB,OAAO0yD,GAlpCFv5D,GAD6B59C,EAmpCyBykD,GAlpC/B3oE,KAAI,SAAU0H,GAC1C,MAAO,CAACA,GAAKnF,OAAOi5H,GAA0Bt3G,EAAOxc,GAAK0yH,UAC5D,IAAGlmH,MAAM,IAgpC2DxM,GAnpC1C,IAAUwc,CAopCpC,GACF,CAgDSokH,CAA+BzkG,EAAO51B,GAAOwG,SAAQ,WAC1D,OAAO2C,GAAKnJ,EAAMslD,kBAAkB5+C,MAAK,SAAUs8C,GACjD,OAAOgqE,GAAuCS,GAAkB94G,EAAMyxC,GAAc1U,MAAM9b,IAASotB,EAAKvoD,KAC1G,GACF,IAAGwL,MAAMmgD,GAAc1U,MAAM9b,GAC/B,CAkDiB0kG,CAAwB3lH,EAAMihB,EAAOn8B,GAClDunF,GAAUr4D,EAAQkuG,EAAM95C,IACjB,EAIX,EACIw9C,GAAS,SAAU5xG,EAAQmjB,EAAS0uF,GACtC,OAAOrzH,EAASC,KAAKuhB,EAAO7S,IAAIoiC,UAAUvvB,EAAOu4B,UAAU2F,UAAW,UAAUngD,MAAK,SAAU2zB,GAC7F,OAAOlzB,EAASC,KAAKuhB,EAAO7S,IAAIoiC,UAAU7d,EAAI,UAAUtoC,KAAI,SAAU6jC,GACpE,OAAO4kG,EAAM7xG,EAAQmjB,EAASlW,EAAOyE,EACvC,GACF,IAAGp0B,OAAM,EACX,EACIw0H,GAAQ,SAAU9xG,EAAQmjB,GAC5B,OAAOyuF,GAAO5xG,EAAQmjB,EAASguF,GACjC,EACIY,GAAQ,SAAU/xG,EAAQmjB,GAC5B,OAAOyuF,GAAO5xG,EAAQmjB,EAASouF,GACjC,EAgNIS,GAAsB,SAAUhyG,EAAQhU,GAC1C,IAAIkB,EAAMwjD,EAAW1kD,EACjBmB,EAAM6S,EAAO7S,IACb8gB,EAAoCjO,EAAOwL,OAAOuH,oCACtD,GAAK/mB,EAAL,CAGA,GAAI,eAAe/kB,KAAK+kB,EAAKmD,UAAW,CACtC,IAAImB,EAhB4B,SAAUpD,GAC5C,KAAOA,GAAM,CACX,GAAsB,IAAlBA,EAAKe,UAAoC,IAAlBf,EAAKe,UAAkBf,EAAKgN,MAAQ,WAAWjzB,KAAKimB,EAAKgN,MAClF,OAAOhN,EAETA,EAAOA,EAAK8C,WACd,CACF,CASqBiiH,CAA8BjmH,EAAKsE,YAChDA,GAAc,eAAerpB,KAAKqpB,EAAWnB,WAC/CnD,EAAKzgB,aAAa4hB,EAAI8D,IAAIrD,eAAeiX,IAAO7Y,EAAKsE,WAEzD,CACA,IAAIgoC,EAAMnrC,EAAIshC,YAEd,GADAziC,EAAK0zD,YACD1zD,EAAKwB,gBAAiB,CAExB,IADA,IAAIya,EAAS,IAAI5E,GAAcrX,EAAMA,GAC9BkB,EAAO+a,EAAO9hB,WAAW,CAC9B,GAAI+O,GAAShI,GAAO,CAClBorC,EAAIvG,SAAS7kC,EAAM,GACnBorC,EAAItG,OAAO9kC,EAAM,GACjB,KACF,CACA,GAAI+gB,EAAkC/gB,EAAKiC,SAAS7lB,eAAgB,CAClEgvD,EAAIoP,eAAex6C,GACnBorC,EAAIqP,aAAaz6C,GACjB,KACF,CACAwjD,EAAWxjD,EACXA,EAAO+a,EAAOj1B,MAChB,CACKka,IACHorC,EAAIvG,SAAS2e,EAAU,GACvBpY,EAAItG,OAAO0e,EAAU,GAEzB,MACMp7C,GAAOtJ,GACLA,EAAKgE,aAAe7C,EAAI4hC,QAAQ/iC,EAAKgE,cACvCsoC,EAAIoP,eAAe17C,GACnBssC,EAAIqP,aAAa37C,KAEjBssC,EAAIsP,cAAc57C,GAClBssC,EAAI+E,YAAYrxC,KAGlBssC,EAAIvG,SAAS/lC,EAAM,GACnBssC,EAAItG,OAAOhmC,EAAM,IAGrBgU,EAAOu4B,UAAU2U,OAAO5U,GACxB8qB,GAAoBpjD,EAAQs4B,EA5C5B,CA6CF,EAaI45E,GAAiB,SAAUlyG,GAC7B,OAAOxhB,EAASC,KAAKuhB,EAAO7S,IAAIoiC,UAAUvvB,EAAOu4B,UAAUwkB,UAAS,GAAO/8C,EAAO7S,IAAI4hC,SACxF,EAmBIojF,GAAY,SAAU96G,EAAKi3E,GAC7B,OAAOj3E,GAAOA,EAAI/rB,YAAc+rB,EAAI/rB,WAAW6jB,WAAam/E,CAC9D,EACI8jC,GAAc,SAAU/6G,GAC1B,OAAOA,GAAO,eAAepwB,KAAKowB,EAAIlI,SACxC,EAIIkjH,GAAoB,SAAUC,GAChC,IAAIC,EAAuBD,EAAehnI,WAC1C,MAAI,eAAerE,KAAKsrI,EAAqBpjH,UACpCojH,EAEFD,CACT,EACIE,GAAkB,SAAUF,EAAgB95C,EAAav5C,GAE3D,IADA,IAAI/xB,EAAOolH,EAAerzF,EAAQ,aAAe,aAC1C/xB,IACDkH,GAAYlH,IAGhBA,EAAOA,EAAK+xB,EAAQ,cAAgB,mBAEtC,OAAO/xB,IAASsrE,CAClB,EA2DIi6C,GAAgB,SAAUtlH,EAAKkK,GACjC,OAAOA,GAAwB,MAAjBA,EAAIlI,UAAoBhC,EAAIskC,QAAQp6B,EACpD,EAII8lE,GAAa,SAAU9lE,GACzBA,EAAI9iB,UAAY,yBAClB,EACIm+H,GAA0B,SAAU9nI,EAAWukB,GACjD,OAAOvkB,EAAUukB,WAAaA,GAAYvkB,EAAUmlB,iBAAmBnlB,EAAUmlB,gBAAgBZ,WAAaA,CAChH,EACIwjH,GAAgB,SAAUxlH,EAAKD,GACjC,OAAOA,GAAQC,EAAI4hC,QAAQ7hC,KAAU,yBAAyBjmB,KAAKimB,EAAKiC,YAAc,qBAAqBloB,KAAKimB,EAAKrb,MAAMy4D,WAA8C,SAAjCn9C,EAAIyhC,mBAAmB1hC,EACjK,EA4BI0lH,GAAsB,SAAUv7H,EAAOzM,EAAW66B,GACpD,OAA4B,IAAxBvQ,GAAStqB,GACJ66B,EACEpuB,EACS,IAAXouB,GAAgB76B,EAAUsvB,KAAKrtB,OAAO44B,EAAS,KAAOX,GAAS,EAAIW,EAEnEA,IAAW76B,EAAUsvB,KAAKz3B,OAAS,GAAKmI,EAAUsvB,KAAKrtB,OAAO44B,KAAYX,GAASl6B,EAAUsvB,KAAKz3B,OAASgjC,CAEtH,EAeIotG,GAAkB,SAAU1lH,EAAKD,GACnC,IACIR,EAAQomH,EADR9mH,EAAOmB,EAAI8+B,UAGf,IADAv/B,EAASQ,EACFR,IAAWV,GAA2C,UAAnCmB,EAAIyhC,mBAAmBliC,IACR,SAAnCS,EAAIyhC,mBAAmBliC,KACzBomH,EAAepmH,GAEjBA,EAASA,EAAOphB,WAElB,OAAOohB,IAAWV,EAAO8mH,EAAe9mH,CAC1C,EAgCI+mH,GAAsB,SAAU/yG,EAAQ9S,GAC1C,IAAIy3E,EAAsB3iC,GAAmBhiC,GACzC2kE,GAAuBA,EAAoBr7F,gBAAkB4jB,EAAKpf,QAAQxE,eAjC1D,SAAU02B,EAAQ9S,EAAM8lH,GAC5C,IAAI7lH,EAAM6S,EAAO7S,IACjB3O,EAASC,KAAKu0H,EAAqBnhI,OAAOzI,IAAI+jB,EAAIgjC,YAAYryC,MAAK,SAAUm1H,GAC3E,IAAIC,EAAgBp8G,GAAU1J,GAAqBF,IAC/CimH,EAAYtwH,GAASA,GAAS,CAAC,EAAGqwH,GAAgBD,GACtD9lH,EAAI4iC,UAAU7iC,EAAMimH,EACtB,IACA,IAAIC,EAAiB50H,EAASC,KAAKu0H,EAAqBtrF,OAAOt+C,KAAI,SAAUiqI,GAC3E,OAAOA,EAAY9nH,MAAM,MAC3B,IACI+nH,EAAoB90H,EAASC,KAAKyO,EAAK7gB,WAAWjD,KAAI,SAAUmqI,GAClE,OAAO/zH,EAAS+zH,EAAehoH,MAAM,QAAQ,SAAUqsC,GACrD,MAAiB,KAAVA,CACT,GACF,IACA7hC,GAAMq9G,EAAgBE,GAAmB,SAAUD,EAAaE,GAC9D,IAAIC,EAAkBh0H,EAAS+zH,GAAgB,SAAU37E,GACvD,OAAQ74C,EAAWs0H,EAAaz7E,EAClC,IACI67E,EAAazwH,GAAcA,GAAc,GAAIqwH,GAAa,GAAOG,GAAiB,GACtFrmH,EAAIm/B,UAAUp/B,EAAM,QAASumH,EAAW32G,KAAK,KAC/C,IACA,IAAI42G,EAAe,CACjB,QACA,SAEEC,EAAiBryH,GAAS0xH,GAAsB,SAAUv3G,EAAG9wB,GAC/D,OAAQoU,EAAW20H,EAAc/oI,EACnC,IACAwiB,EAAI2gC,WAAW5gC,EAAMymH,EACvB,CAKIC,CAAgB5zG,EAAQ9S,EADGg1C,GAAwBliC,GAGvD,EAoDI6zG,GAAW,SAAU7zG,EAAQqZ,GAC/B,IAAIy6F,EAAQlpI,EAAW66B,EAAQ+yD,EAC3Bk1C,EAAUt0E,EAAUk5E,EAAgByB,EAAiBC,EAAcC,EACnE9mH,EAAM6S,EAAO7S,IACbqe,EAASxL,EAAOwL,OAAQwC,EAAsBxC,EAAOsH,sBACrDwlB,EAAMt4B,EAAOu4B,UAAUC,SACvB07E,EAAiB,SAAUvxI,GAC7B,IAAsBs/D,EAAOqmD,EAAYkZ,EAArCt0G,EAAOtiB,EACP83F,EAAqBl3D,EAAOmH,wBAOhC,GADA6uF,EAJEv/D,EADEt/D,GAA4B,UAApBoxI,GAAmD,OAApBA,EACjC5mH,EAAIpB,OAAOppB,GAAQqxI,GAEnBx7C,EAAYzjF,WAAU,IAGC,IAjsed,SAAUirB,GAC/B,OAAOA,EAAO6hC,SAAS,eAAe,EACxC,CA+reQsyE,CAAiBn0G,GACnB7S,EAAIm/B,UAAU2V,EAAO,QAAS,MAC9B90C,EAAIm/B,UAAU2V,EAAO,QAAS,WAE9B,GACE,GAAIygC,EAAmBx1E,EAAKiC,UAAW,CACrC,GAAIk8C,GAAYn+C,IAASigD,GAAiBjgD,GACxC,SAEFo7F,EAAap7F,EAAKnY,WAAU,GAC5BoY,EAAIm/B,UAAUg8D,EAAY,KAAM,IAC5BrmD,EAAMz0C,iBACR86F,EAAWt9G,YAAYi3D,EAAM3xC,YAC7B2xC,EAAMj3D,YAAYs9G,KAElBkZ,EAAYlZ,EACZrmD,EAAMj3D,YAAYs9G,GAEtB,SACQp7F,EAAOA,EAAK5hB,aAAe4hB,IAAS4lH,GAIhD,OAFAC,GAAoB/yG,EAAQiiC,GAC5Bk7B,GAAWqkC,GACJv/D,CACT,EACImyE,EAA6B,SAAU/8H,GACzC,IAAI6V,EAAMvqB,EACN0xI,EAAmBzB,GAAoBv7H,EAAOzM,EAAW66B,GAC7D,GAAIvQ,GAAStqB,KAAeyM,EAAQg9H,EAAmB,EAAIA,EAAmBzpI,EAAU43C,UAAU//C,QAChG,OAAO,EAET,GAAImI,EAAUU,aAAektF,GAAey7C,IAA+B58H,EACzE,OAAO,EAET,GAAIA,GAAS+c,GAAYxpB,IAAcA,IAAc4tF,EAAYloE,WAC/D,OAAO,EAET,GAAIoiH,GAAwB9nI,EAAW,UAAY8nI,GAAwB9nI,EAAW,MACpF,OAAOqpI,IAA+B58H,IAAU48H,GAA8B58H,EAEhF,IAAI4wB,EAAS,IAAI5E,GAAcz4B,EAAW4tF,GAQ1C,IAPItjE,GAAStqB,KACPyM,GAA8B,IAArBg9H,EACXpsG,EAAOzE,OACGnsB,GAASg9H,IAAqBzpI,EAAU43C,UAAU//C,QAC5DwlC,EAAOj1B,QAGJka,EAAO+a,EAAO9hB,WAAW,CAC9B,GAAIiO,GAAYlH,IACd,IAAKA,EAAKppB,aAAa,oBACrBnB,EAAOuqB,EAAKiC,SAAS7lB,cACjB0kC,EAAoBrrC,IAAkB,OAATA,GAC/B,OAAO,OAGN,GAAIuyB,GAAShI,KAAUka,GAAiBla,EAAKs1B,WAClD,OAAO,EAELnrC,EACF4wB,EAAOzE,OAEPyE,EAAOj1B,MAEX,CACA,OAAO,CACT,EACIshI,EAAsB,WAEtB5G,EADE,wBAAwBzmI,KAAK8sI,IAA2C,WAAvBQ,EACxCL,EAAeF,GAEfE,IArweoB,SAAUl0G,GAC7C,OAAOA,EAAO6hC,SAAS,gCAAgC,EACzD,CAqweQ2yE,CAA+Bx0G,IAAW2yG,GAAcxlH,EAAKmlH,IAAmBnlH,EAAIskC,QAAQ+mC,GAC9Fk1C,EAAWvgH,EAAI5B,MAAM+mH,EAAgB95C,GAErCrrE,EAAI6jC,YAAY08E,EAAUl1C,GAE5Bw5C,GAAoBhyG,EAAQ0tG,EAC9B,EACAnuD,GAAYpyD,EAAKmrC,GAAKx6C,MAAK,SAAU0hE,GACnClnB,EAAIvG,SAASytB,EAAQn5C,eAAgBm5C,EAAQntB,aAC7CiG,EAAItG,OAAOwtB,EAAQltB,aAAcktB,EAAQjtB,UAC3C,IACA3nD,EAAY0tD,EAAIjyB,eAChBZ,EAAS6yB,EAAIjG,YACb2hF,EAAehyE,GAAmBhiC,GAClC,IAAIq4C,KAAch/B,IAAOA,EAAIg/B,UACzBC,KAAaj/B,IAAOA,EAAIi/B,SACxBlkD,GAAYxpB,IAAcA,EAAU4iB,kBACtCymH,EAA6BxuG,EAAS76B,EAAU6iB,WAAWhrB,OAAS,EACpEmI,EAAYA,EAAU6iB,WAAWqG,KAAK8mC,IAAIn1B,EAAQ76B,EAAU6iB,WAAWhrB,OAAS,KAAOmI,EAErF66B,EADEwuG,GAA8B/+G,GAAStqB,GAChCA,EAAU43C,UAAU//C,OAEpB,GAGb,IAAIqwI,EAAeD,GAAgB1lH,EAAKviB,GACxC,GAAKkoI,EAAL,EAGIkB,IAAiB37D,IAAa27D,GAAgB37D,KAChDztE,EAzKoC,SAAUo1B,EAAQg0G,EAAc17E,EAAK1tD,EAAW66B,GACtF,IAAIioG,EAAUl1C,EAAal1D,EAAWpW,EAAMla,EAAMwxG,EAC9C1+C,EAAYkuE,GAAgB,IAC5B7mH,EAAM6S,EAAO7S,IAAK2lH,EAAeD,GAAgB1lH,EAAKviB,GAE1D,KADA4tF,EAAcrrE,EAAIoiC,UAAU3kD,EAAWuiB,EAAI4hC,YACtB4jF,GAAcxlH,EAAKqrE,GAAc,CAOpD,GAJEgsB,GAFFhsB,EAAcA,GAAes6C,KACT9yG,EAAOy4B,WAvHb,SAAUvrC,GAC1B,OAAOA,GAAQ,oBAAoBjmB,KAAKimB,EAAKiC,SAC/C,CAqH4CslH,CAAYj8C,GAClCA,EAAYrpE,SAAS7lB,cAErBkvF,EAAYltF,WAAW6jB,SAAS7lB,eAE7CkvF,EAAYhrE,gBAMf,OALAkgH,EAAWvgH,EAAIpB,OAAO+5C,GACtBitE,GAAoB/yG,EAAQ0tG,GAC5Bl1C,EAAYxtF,YAAY0iI,GACxBp1E,EAAIvG,SAAS27E,EAAU,GACvBp1E,EAAItG,OAAO07E,EAAU,GACdA,EAGT,IADAxgH,EAAOtiB,EACAsiB,EAAK5hB,aAAektF,GACzBtrE,EAAOA,EAAK5hB,WAEd,KAAO4hB,IAASC,EAAI4hC,QAAQ7hC,IAC1BoW,EAAYpW,EACZA,EAAOA,EAAK6C,gBAEd,GAAIuT,GAAatD,EAAOwL,OAAO2H,aAAaqxE,EAAe1+C,EAAUx8D,eAAgB,CAKnF,IAJAokI,EAAWvgH,EAAIpB,OAAO+5C,GACtBitE,GAAoB/yG,EAAQ0tG,GAC5BpqG,EAAUh4B,WAAWC,aAAamiI,EAAUpqG,GAC5CpW,EAAOoW,EACApW,IAASC,EAAI4hC,QAAQ7hC,IAC1Bla,EAAOka,EAAK8C,YACZ09G,EAAS1iI,YAAYkiB,GACrBA,EAAOla,EAETslD,EAAIvG,SAASnnD,EAAW66B,GACxB6yB,EAAItG,OAAOpnD,EAAW66B,EACxB,CACF,CACA,OAAO76B,CACT,CA8HgB8pI,CAAkC10G,EAAQg0G,EAAc17E,EAAK1tD,EAAW66B,IAEtF+yD,EAAcrrE,EAAIoiC,UAAU3kD,EAAWuiB,EAAI4hC,SAC3CujF,EAAiB95C,EAAcrrE,EAAIoiC,UAAUipC,EAAYltF,WAAY6hB,EAAI4hC,SAAW,KACpFglF,EAAkBv7C,EAAcA,EAAYrpE,SAASmc,cAAgB,GACrE,IAAIipG,EAAqBjC,EAAiBA,EAAenjH,SAASmc,cAAgB,GACvD,OAAvBipG,GAAgCj8D,IAClCkgB,EAAc85C,EACdA,EAAiBA,EAAehnI,WAChCyoI,EAAkBQ,GAEhB,eAAettI,KAAK8sI,IAClB5mH,EAAIskC,QAAQ+mC,GAlWL,SAAUx4D,EAAQk0G,EAAgB5B,EAAgB95C,EAAaw7C,GAC5E,IAAI7mH,EAAM6S,EAAO7S,IACbmrC,EAAMt4B,EAAOu4B,UAAUC,SAC3B,GAAI85E,IAAmBtyG,EAAOy4B,UAA9B,CAvBiB,IAAUphC,EACpB+6G,GADoB/6G,EA0BVi7G,IAzBUF,GAAY/6G,EAAI/rB,cA0BzC0oI,EAAe,MAEjB,IAAItG,EAAWsG,EAAeE,EAAeF,GAAgB7mH,EAAIpB,OAAO,MACxE,GAAIymH,GAAgBF,EAAgB95C,GAAa,IAASg6C,GAAgBF,EAAgB95C,GAAa,GACrG,GAAI25C,GAAUG,EAAgB,MAAO,CACnC,IAAIC,EAAuBF,GAAkBC,GAC7CnlH,EAAI6jC,YAAY08E,EAAU6E,GA3Cb,SAAUl7G,GAC3B,IAAI9O,EACJ,OAAkC,QAAzBA,EAAK8O,EAAI/rB,kBAA+B,IAAPid,OAAgB,EAASA,EAAG+H,cAAgB+G,CACxF,CAyCUs9G,CAAarC,GACfnlH,EAAI7c,OAAOiiI,GAEXplH,EAAI7c,OAAOgiI,EAEf,MACEnlH,EAAIjd,QAAQw9H,EAAU4E,QAEnB,GAAIE,GAAgBF,EAAgB95C,GAAa,GAClD25C,GAAUG,EAAgB,OAC5BnlH,EAAI6jC,YAAY08E,EAAU2E,GAAkBC,IAC5C5E,EAAS1iI,YAAYmiB,EAAI8D,IAAIrD,eAAe,MAC5C8/G,EAAS1iI,YAAYsnI,IAErBA,EAAehnI,WAAWC,aAAamiI,EAAU4E,GAEnDnlH,EAAI7c,OAAOkoF,QACN,GAAIg6C,GAAgBF,EAAgB95C,GAAa,GACtDrrE,EAAI6jC,YAAY08E,EAAU2E,GAAkBC,IAC5CnlH,EAAI7c,OAAOkoF,OACN,CACL85C,EAAiBD,GAAkBC,GACnC,IAAIwB,EAASx7E,EAAI8E,aACjB02E,EAAOlsE,cAAc4wB,GACrBs7C,EAAOz2E,YAAYi1E,GACnB,IAAIl5E,EAAW06E,EAAO7hF,kBACD,OAAjB+hF,GAzEY,SAAU38G,EAAK10B,GACjC,OAAO00B,EAAI/G,YAwE4C,OAxE9B+G,EAAI/G,WAAWnB,QAC1C,CAuEiCylH,CAAcx7E,IACzCs0E,EAAWt0E,EAAS9oC,WACpBnD,EAAI6jC,YAAYoI,EAAUk5E,KAE1BnlH,EAAI6jC,YAAYoI,EAAUk5E,GAC1BnlH,EAAI6jC,YAAY08E,EAAU4E,IAE5BnlH,EAAI7c,OAAOkoF,EACb,CACAw5C,GAAoBhyG,EAAQ0tG,EA5C5B,CA6CF,CAiTMmH,CAAS70G,EAAQk0G,EAAgB5B,EAAgB95C,EAAaw7C,GAI9DA,GAAgBx7C,IAAgBx4D,EAAOy4B,YAG3Cu7E,EAAeA,GAAgB,IAC3B5uG,GAAwBozD,IAC1Bk1C,EAAW3nG,GAAwByyD,GAC/BrrE,EAAIskC,QAAQ+mC,IACd2E,GAAW3E,GAEbu6C,GAAoB/yG,EAAQ0tG,GAC5BsE,GAAoBhyG,EAAQ0tG,IACnB0G,IACTE,IACSF,GAA2B,IACpC1G,EAAWl1C,EAAYltF,WAAWC,aAAa2oI,IAAkB17C,GACjEw5C,GAAoBhyG,EAAQ0yG,GAAwBl6C,EAAa,MAAQk1C,EAAWl1C,KAEpFs7C,EA3QqB,SAAUx7E,GACjC,IAAI6E,EAAS7E,EAAI8E,aAGjB,OAFAD,EAAOpL,SAASuG,EAAIjyB,eAAgBusG,IAAoB,EAAMt6E,EAAIjyB,eAAgBiyB,EAAIjG,cACtF8K,EAAOnL,OAAOsG,EAAIhG,aAAcsgF,IAAoB,EAAOt6E,EAAIhG,aAAcgG,EAAI/F,YAC1E4K,CACT,CAsQa23E,CAAmBx8E,GAAK8E,aACjC02E,EAAOz2E,YAAYm7B,GArUR,SAAUp/B,GACvBj6C,EAAO44C,GAAc3qC,GAAqBgsC,GAAW9pC,KAAW,SAAU3B,GACxE,IAAI2qE,EAAU3qE,EAAKR,IACnBmrE,EAAQ91C,UAAYvd,GAAOqzD,EAAQ91C,UACrC,GACF,CAkUIuyF,CADA37E,EAAW06E,EAAO7hF,mBAvQM,SAAU/kC,GACpC,GACMgI,GAAShI,KACXA,EAAKs1B,UAAYt1B,EAAKs1B,UAAUtyC,QAAQ,WAAY,KAEtDgd,EAAOA,EAAKoD,iBACLpD,EACX,CAkQI8nH,CAAsB57E,GACtBs0E,EAAWt0E,EAAS9oC,WACpBnD,EAAI6jC,YAAYoI,EAAUo/B,GArTY,SAAUrrE,EAAK6gB,EAAqBi0B,GAC5E,IAEIz/D,EAFA0qB,EAAO+0C,EACPgzE,EAAc,GAElB,GAAK/nH,EAAL,CAGA,KAAOA,EAAOA,EAAKoD,YAAY,CAC7B,GAAInD,EAAI4hC,QAAQ7hC,GACd,OAEEkH,GAAYlH,KAAU8gB,EAAoB9gB,EAAKiC,SAAS7lB,gBAC1D2rI,EAAYvqI,KAAKwiB,EAErB,CAEA,IADA1qB,EAAIyyI,EAAYxyI,OACTD,QACL0qB,EAAO+nH,EAAYzyI,IACTgrB,iBAAmBN,EAAKoD,aAAepD,EAAKqD,WAA2C,KAA9BrD,EAAKoD,WAAWkyB,WAG7EiwF,GAActlH,EAAKD,KAFvBC,EAAI7c,OAAO4c,EAbf,CAoBF,CA4RIgoH,CAAoC/nH,EAAK6gB,EAAqB0/F,GAtKvC,SAAUvgH,EAAK80C,GACxCA,EAAMyd,YACN,IAAInvD,EAAY0xC,EAAM1xC,UACjBA,IAAa,mBAAmBtpB,KAAKkmB,EAAIkgC,SAAS98B,EAAW,SAAS,KACzEpD,EAAI7lB,IAAI26D,EAAO,KAEnB,CAiKIkzE,CAAqBhoH,EAAKqrE,GACtBrrE,EAAIskC,QAAQ+mC,IACd2E,GAAW3E,GAEbk1C,EAAShuD,YACLvyD,EAAIskC,QAAQi8E,IACdvgH,EAAI7c,OAAOo9H,GACX4G,MAEAvB,GAAoB/yG,EAAQ0tG,GAC5BsE,GAAoBhyG,EAAQ0tG,KAGhCvgH,EAAIm/B,UAAUohF,EAAU,KAAM,IAC9B1tG,EAAO+Z,KAAK,WAAY,CAAE2zF,SAAUA,IA1DpC,CA2DF,EAYI0H,GAAoB,SAAUp1G,EAAQq1G,EAAOC,GAC/C,IAAIh9E,EAAMt4B,EAAO7S,IAAIshC,YAChB6mF,GAIHh9E,EAAIoP,eAAe2tE,GACnB/8E,EAAIqP,aAAa0tE,KAJjB/8E,EAAIsP,cAAcytE,GAClB/8E,EAAI+E,YAAYg4E,IAKlBr1G,EAAOu4B,UAAU2U,OAAO5U,GACxB8qB,GAAoBpjD,EAAQs4B,EAC9B,EA2CIi9E,GAAiB,SAAUv1G,EAAQyQ,GACrC,IAAIs1B,EAAK34C,GAAqB,MAC9BgE,GAAShE,GAAqBqjB,GAASs1B,GACvC/lC,EAAOg2C,YAAY1uE,KACrB,EACIkuI,GAAgB,SAAUx1G,EAAQyQ,GAC/BglG,GAAWz1G,EAAOy4B,UAAWhoB,IAChCnf,GAAQlE,GAAqBqjB,GAASrjB,GAAqB,OAE7D,IAAI24C,EAAK34C,GAAqB,MAC9BkE,GAAQlE,GAAqBqjB,GAASs1B,GACtCqvE,GAAkBp1G,EAAQ+lC,EAAG54C,KAAK,GAClC6S,EAAOg2C,YAAY1uE,KACrB,EAIImuI,GAAa,SAAUlyG,EAAUD,GACnC,OAJyBxyB,EAIV2sD,GAAc1U,MAAMzlB,KAH5BhO,GAAOxkB,EAAIotD,YAMT8M,GAAaznC,EAAUk6B,GAAc1U,MAAMzlB,IAAYl6B,KAAI,SAAU0H,GAC1E,OAAOwkB,GAAOxkB,EAAIotD,UACpB,IAAG5gD,OAAM,GATI,IAAUxM,CAW3B,EACI4kI,GAAe,SAAUr+G,GAC3B,OAAOA,GAAwB,MAAjBA,EAAIlI,UAAoB,SAAUkI,CAClD,EACIs+G,GAAiB,SAAU7xF,GAC7B,OAAOA,EAAS7mC,KAAKL,EAAO84H,GAAcA,GAAc94H,EAC1D,EAMIg5H,GAAwB,SAAU51G,EAAQ8jB,GAC5CA,EAAS7mC,KAAKvB,EAAMa,EAAMg5H,GAAgBv1G,GAASzjB,EAAMi5H,GAAex1G,GAAStkB,EACnF,EACIm6H,GAAW,SAAU71G,EAAQqZ,GAC/B,IAAIy8F,EATyB,SAAU91G,GACvC,IAAIuoG,EAAmBhsH,EAAMs+G,GAAgB76F,GACzCsqC,EAAW7M,GAAcU,eAAen+B,EAAOu4B,UAAUC,UAC7D,OAAO2pE,GAAaoG,EAAkBvoG,EAAOy4B,UAAW6R,GAAU/gE,OAAOosI,GAC3E,CAKuBI,CAAyB/1G,GAC1C81G,EAAe14H,SACjB04H,EAAeh4H,KAAKvB,EAAMq5H,GAAuB51G,IArF/B,SAAUA,EAAQqZ,GACtC,IAGIg8F,EACAC,EAJA/8E,EAAYv4B,EAAOu4B,UACnBprC,EAAM6S,EAAO7S,IACbmrC,EAAMC,EAAUC,SAGpB+mB,GAAYpyD,EAAKmrC,GAAKx6C,MAAK,SAAU0hE,GACnClnB,EAAIvG,SAASytB,EAAQn5C,eAAgBm5C,EAAQntB,aAC7CiG,EAAItG,OAAOwtB,EAAQltB,aAAcktB,EAAQjtB,UAC3C,IACA,IAAI9sB,EAAS6yB,EAAIjG,YACbznD,EAAY0tD,EAAIjyB,eACpB,GAA2B,IAAvBz7B,EAAUqjB,UAAkBrjB,EAAU4iB,gBAAiB,CACzD,IAAIymH,EAA6BxuG,EAAS76B,EAAU6iB,WAAWhrB,OAAS,EACxEmI,EAAYA,EAAU6iB,WAAWqG,KAAK8mC,IAAIn1B,EAAQ76B,EAAU6iB,WAAWhrB,OAAS,KAAOmI,EAErF66B,EADEwuG,GAAqD,IAAvBrpI,EAAUqjB,SACjCrjB,EAAU43C,UAAU//C,OAEpB,CAEb,CACA,IAAI+1F,EAAcrrE,EAAIoiC,UAAU3kD,EAAWuiB,EAAI4hC,SAC3CujF,EAAiB95C,EAAcrrE,EAAIoiC,UAAUipC,EAAYltF,WAAY6hB,EAAI4hC,SAAW,KACpFwlF,EAAqBjC,EAAiBA,EAAenjH,SAASmc,cAAgB,GAC9E0qG,KAAkB38F,IAAOA,EAAIi/B,SACN,OAAvBi8D,GAAgCyB,IAClCx9C,EAAc85C,GAEZ1nI,GAAoC,IAAvBA,EAAUqjB,UAAkBwX,GAAU76B,EAAU43C,UAAU//C,SAlDnD,SAAU+oC,EAAQ5gC,EAAW4tF,GAIrD,IAHA,IACItrE,EADA+a,EAAS,IAAI5E,GAAcz4B,EAAW4tF,GAEtCxqD,EAAsBxC,EAAOsH,sBAC1B5lB,EAAO+a,EAAOj1B,QACnB,GAAIg7B,EAAoB9gB,EAAKiC,SAAS7lB,gBAAkB4jB,EAAKzqB,OAAS,EACpE,OAAO,CAGb,CA0CSwzI,CAAoBj2G,EAAOwL,OAAQ5gC,EAAW4tF,KACjD68C,EAAQloH,EAAIpB,OAAO,MACnBusC,EAAIwG,WAAWu2E,GACf/8E,EAAIsP,cAAcytE,GAClB/8E,EAAI+E,YAAYg4E,GAChBC,GAAU,IAGdD,EAAQloH,EAAIpB,OAAO,MACnB8yC,GAAgB1xC,EAAKmrC,EAAK+8E,GAC1BD,GAAkBp1G,EAAQq1G,EAAOC,GACjCt1G,EAAOg2C,YAAY1uE,KACrB,CA8CI4uI,CAAgBl2G,EAAQqZ,EAE5B,EAEI2I,GAAkB,SAAUhiB,EAAQhS,GACtC,OAAOkkH,GAAelyG,GAAQz2B,QAAO,SAAUivF,GAC7C,OAAOxqE,EAASvrB,OAAS,GAAKsrB,GAAKX,GAAqBorE,GAAcxqE,EACxE,IAAG5Q,QACL,EAQI+4H,GAAgBh6G,GAAa,CAC/B,CAAE4pC,GAAI,IACN,CAAE9D,MAAO,IACT,CAAEnlD,KAAM,MAENs5H,GAAqB,SAAUp2G,EAAQq2G,GACzC,OAVyB,SAAUr2G,GACnC,OAAOgiB,GAAgBhiB,EAh+eE,SAAUA,GACnC,OAAOA,EAAO6hC,SAAS,sBAAuB,GAChD,CA89eiCy0E,CAAqBt2G,GACtD,CAQSu2G,CAAqBv2G,EAC9B,EACIw2G,GAAW,SAAUC,GACvB,OAAO,SAAUz2G,EAAQq2G,GAEvB,MAD4C,KAA/Br0E,GAAmBhiC,KACdy2G,CACpB,CACF,EACIC,GAAc,SAAUD,GAC1B,OAAO,SAAUz2G,EAAQq2G,GACvB,OArkBwB,SAAUr2G,GACpC,OAAOkyG,GAAelyG,GAAQz2B,QAAO,SAAU8tB,GAC7C,OAAOoN,GAAWrX,GAAqBiK,GACzC,IAAGja,QACL,CAikBWu5H,CAAsB32G,KAAYy2G,CAC3C,CACF,EACIG,GAAU,SAAU9wE,EAAW2wE,GACjC,OAAO,SAAUz2G,EAAQq2G,GACvB,IAAIp1G,EA/kBiB,SAAUjB,GACjC,OAAOkyG,GAAelyG,GAAQ/iB,KAAKb,EAAS,KAAK,SAAUo8E,GACzD,OAAOA,EAAYrpE,SAASmc,aAC9B,GACF,CA2kBgBurG,CAAmB72G,KAAY8lC,EAAUx6B,cACrD,OAAOrK,IAAUw1G,CACnB,CACF,EACIK,GAAa,SAAUL,GACzB,OAAOG,GAAQ,MAAOH,EACxB,EAIIM,GAAmB,SAAUN,GAC/B,OAAO,SAAUz2G,EAAQq2G,GACvB,OA1hfqB,SAAUr2G,GACjC,OAAOA,EAAO6hC,SAAS,aAAa,EACtC,CAwhfWm1E,CAAmBh3G,KAAYy2G,CACxC,CACF,EACIQ,GAAc,SAAUj3G,EAAQq2G,GAClC,OA5CmB,SAAUr2G,GAC7B,OAAOgiB,GAAgBhiB,EAh+eE,SAAUA,GACnC,OAAOA,EAAO6hC,SAAS,sBAAuB,iCAChD,CA89eiCq1E,CAAqBl3G,GACtD,CA0CSm3G,CAAen3G,EACxB,EACIo3G,GAAc,SAAUC,EAASh/D,GACnC,OAAOA,CACT,EACIi/D,GAA4B,SAAUt3G,GACxC,IAAIgsE,EAAkBhqC,GAAmBhiC,GACrCu3G,EArnBkB,SAAUpqH,EAAKD,GACrC,IACIR,EAAQomH,EADR9mH,EAAOmB,EAAI8+B,UAGf,IADAv/B,EAASQ,EACFR,IAAWV,GAA2C,UAAnCmB,EAAIyhC,mBAAmBliC,IACR,SAAnCS,EAAIyhC,mBAAmBliC,KACzBomH,EAAepmH,GAEjBA,EAASA,EAAOphB,WAElB,OAAOohB,IAAWV,EAAO8mH,EAAe9mH,CAC1C,CA0mBqBwrH,CAAkBx3G,EAAO7S,IAAK6S,EAAOu4B,UAAUwkB,YAClE,OAAOw6D,GAAgBv3G,EAAOwL,OAAO2H,aAAaokG,EAAapoH,SAAU68E,GAAoC,IAC/G,EACI1/E,GAAQ,SAAUmrH,EAAYr4C,GAChC,OAAO,SAAUp/D,EAAQq4C,GAIvB,OAHc14D,EAAM83H,GAAY,SAAUp+G,EAAKtW,GAC7C,OAAOsW,GAAOtW,EAAEid,EAAQq4C,EAC1B,IAAG,GACc75D,EAASJ,KAAKghF,GAAU5gF,EAAS1B,MACpD,CACF,EA8CIwqE,GAAS,SAAUtnD,EAAQqZ,IA7Cf,SAAUrZ,EAAQqZ,GAChC,OAAOqoF,GAAc,CACnBp1G,GAAM,CAAC8pH,IAAqBD,GAAcr5H,QAC1CwP,GAAM,CA7BDsqH,GAAQ,WAAW,IA6BET,GAAcpwE,MACxCz5C,GAAM,CACJwqH,IAAW,GACXC,IAAiB,GACjBK,IACCjB,GAAcpwE,MACjBz5C,GAAM,CACJwqH,IAAW,GACXC,IAAiB,IAChBZ,GAAcl0E,SACjB31C,GAAM,CACJwqH,IAAW,GACXC,IAAiB,GACjBK,IACCjB,GAAcl0E,SACjB31C,GAAM,CACJwqH,IAAW,GACXC,IAAiB,IAChBZ,GAAcpwE,MACjBz5C,GAAM,CACJoqH,IAAY,GACZU,IACCjB,GAAcpwE,MACjBz5C,GAAM,CAACoqH,IAAY,IAAQP,GAAcl0E,SACzC31C,GAAM,CACJkqH,IAAS,GACTY,GACAE,IACCnB,GAAcl0E,SACjB31C,GAAM,CAACkqH,IAAS,IAAQL,GAAcpwE,MACtCz5C,GAAM,CAAC2qH,IAAcd,GAAcpwE,MACnCz5C,GAAM,CACJkqH,IAAS,GACTY,IACCjB,GAAcpwE,MACjBz5C,GAAM,CAACgrH,IAA4BnB,GAAcl0E,UAChD,CACDjiC,KACGqZ,IAAOA,EAAIg/B,YACb/6D,MAAM64H,GAAcr5H,OACzB,EAGE46H,CAAU13G,EAAQqZ,GAAKp8B,MAAK,WAC1B44H,GAAS71G,EAAQqZ,EACnB,IAAG,WACDw6F,GAAS7zG,EAAQqZ,EACnB,GAAG39B,EACL,EA6DIwM,GAAUtE,KAASsE,QAyBnByvH,GAAW/zH,KAaXwzB,GAA2B,SAAUnpC,GACvC,OAAOA,EAAEmpC,0BACX,EACIwgG,GAAe,SAAUv+F,GAC3B,OAAOA,EAAI4/E,UAAY5hD,GAAGW,SAAW3+B,EAAI4/E,UAAY5hD,GAAGY,SAC1D,EACI4/D,GAAuB,SAAUC,EAAS93G,EAAQiiC,GAChDA,IAAU61E,EAAQ19G,MACpB4F,EAAO8pB,GAAG,aAAc1S,IAA0B,IACxC6qB,GAAS61E,EAAQ19G,OAC3B4F,EAAO+pB,IAAI,aAAc3S,IAE3B0gG,EAAQ30G,IAAI8+B,EACd,EAsBI81E,GAAuB,SAAUpqH,EAAM7c,GACzC,IAAIlG,EAAYkG,EAAIlG,YAChB66B,EAAS30B,EAAI20B,SACjB,OAAIvQ,GAAStqB,IACXA,EAAU2sF,WAAW9xD,EAAQ9X,GACtBnP,EAASJ,KAAKq/C,GAAc7yD,EAAW66B,EAAS9X,EAAKlrB,UAErDimE,GAAuB53D,GAAK1H,KAAI,SAAUiuB,GAC/C,IAAIquC,EAAWt4C,GAAsBO,GAMrC,OALI7c,EAAI80B,UACNtU,GAAQ+F,EAAKquC,GAEbt0C,GAASiG,EAAKquC,GAETjI,GAAciI,EAASv4C,IAAKQ,EAAKlrB,OAC1C,GAEJ,EACIu1I,GAAuBz7H,EAAMw7H,GAAsBlzG,IACnDozG,GAAwB17H,EAAMw7H,GAAsB,KAepDG,GAAkC,SAAUlsH,EAAMlb,GACpD,OAAO,SAAUqnI,GACf,OA1tVkB,SAAUnsH,EAAMlb,GACpC,OAAIykF,GAAQzkF,KAJS,SAAUkb,EAAMlb,GACrC,OAPwB,SAAUkb,EAAMlb,GACxC,OAAOm6D,GAAaj/C,EAAKmB,IAAKrc,GAAKuM,QACrC,CAKS+6H,CAAoBpsH,EAAMlb,IAJf,SAAUkb,EAAMlb,GAClC,OAAOk6D,GAAah/C,EAAKmB,IAAKrc,GAAKuM,QACrC,CAE2Cg7H,CAAcrsH,EAAMlb,IAAQyjF,GAAiBvoE,EAAMlb,IAAQ0jF,GAAexoE,EAAMlb,IAAQikF,GAAU/oE,EAAMlb,IAAQgkF,GAAa9oE,EAAMlb,EAC9K,CAKWwnI,CAAiBtsH,EAAMlb,IAAQukF,GAAerpE,EAAMlb,IAAQwkF,GAActpE,EAAMlb,GAE3F,CAotVWynI,CAAgBvsH,EAAMmsH,GAAYH,GAAqBlnI,GAAOmnI,GAAsBnnI,EAC7F,CACF,EAQI0nI,GAA+B,SAAUx4G,GAC3C,IAAIlvB,EAAM2sD,GAAcU,eAAen+B,EAAOu4B,UAAUC,UACpDxsC,EAAOoB,GAAqB4S,EAAOy4B,WACvC,GAAIz4B,EAAOu4B,UAAUsI,cAAe,CAClC,IAAI0nE,EAAmBhsH,EAAMs+G,GAAgB76F,GACzC09B,EAAgBD,GAAcU,eAAen+B,EAAOu4B,UAAUC,UAClE,OAAO2pE,GAAaoG,EAAkBvoG,EAAOy4B,UAAWiF,GAAe3/C,KA/B7C,SAAUiO,GACtC,OAAO,SAAU83B,GACf,OAAOA,EAAS7mC,MAAK,SAAUnH,GAC7B,OAAOm1D,GAAaj/C,EAAKmB,IAAKswC,GAAc3U,OAAOhzC,GACrD,IAAG,SAAUA,GACX,OAAOo1D,GAAgBp1D,EACzB,IAAG,SAAUA,GACX,OAAOq1D,GAAer1D,EACxB,IAAG,SAAUA,GACX,OAAOk1D,GAAah/C,EAAKmB,IAAKswC,GAAc1U,MAAMjzC,GACpD,GACF,CACF,CAmBgF2iI,CAAwBzsH,IAAOjO,KAAKm6H,GAAgClsH,EAAMlb,IAAMkN,OAb7I,SAAUgiB,GAC3B,OAAO,SAAUlvB,GAGf,OAFAkvB,EAAOu4B,UAAU2U,OAAOp8D,EAAIitD,WAC5B/9B,EAAOi8C,eACA,CACT,CACF,CAOuKy8D,CAAa14G,GAClL,CACE,OAAO,CAEX,EAkBI24G,GAA4B,SAAU34G,GACxC,IAAIylC,EAAQojE,GAAmB7oG,GAS/B,OA/hDY,SAAUA,GACtBA,EAAO8pB,GAAG,yBAA0BvtC,EAAM6wH,GAAsBptG,GAClE,CAqhDE44G,CAAQ54G,GApjCI,SAAUA,EAAQylC,GAC9BzlC,EAAO8pB,GAAG,WAAW,SAAUzQ,IACI,IAA7BA,EAAIpC,sBArFmB,SAAUjX,EAAQylC,EAAOpsB,GACtD,IAAI3wB,EAAK9E,KAAS8E,GAClBymH,GAAQ,CACN,CACElW,QAAS5hD,GAAGO,MACZwnB,OAAQA,GAAOyuC,GAAS7tG,GAAQ,IAElC,CACEi5F,QAAS5hD,GAAGM,KACZynB,OAAQA,GAAOyuC,GAAS7tG,GAAQ,IAElC,CACEi5F,QAAS5hD,GAAGU,GACZqnB,OAAQA,GAAO6uC,GAASjuG,GAAQ,IAElC,CACEi5F,QAAS5hD,GAAGG,KACZ4nB,OAAQA,GAAO6uC,GAASjuG,GAAQ,IAElC,CACEi5F,QAAS5hD,GAAGO,MACZwnB,OAAQA,GAAO0yC,GAAO9xG,GAAQ,IAEhC,CACEi5F,QAAS5hD,GAAGM,KACZynB,OAAQA,GAAO0yC,GAAO9xG,GAAQ,IAEhC,CACEi5F,QAAS5hD,GAAGU,GACZqnB,OAAQA,GAAO2yC,GAAO/xG,GAAQ,IAEhC,CACEi5F,QAAS5hD,GAAGG,KACZ4nB,OAAQA,GAAO2yC,GAAO/xG,GAAQ,IAEhC,CACEi5F,QAAS5hD,GAAGO,MACZwnB,OAAQA,GAAOowC,GAASxvG,GAAQ,IAElC,CACEi5F,QAAS5hD,GAAGM,KACZynB,OAAQA,GAAOowC,GAASxvG,GAAQ,IAElC,CACEi5F,QAAS5hD,GAAGU,GACZqnB,OAAQA,GAAOqwC,GAASzvG,GAAQ,IAElC,CACEi5F,QAAS5hD,GAAGG,KACZ4nB,OAAQA,GAAOqwC,GAASzvG,GAAQ,IAElC,CACEi5F,QAAS5hD,GAAGO,MACZwnB,OAAQA,GAAOkpC,GAAQtoG,EAAQylC,GAAO,IAExC,CACEwzD,QAAS5hD,GAAGM,KACZynB,OAAQA,GAAOkpC,GAAQtoG,EAAQylC,GAAO,IAExC,CACEwzD,QAAS5hD,GAAGO,MACZU,SAAU5vD,EAAGnB,QACbgxD,OAAQ7vD,EAAGnB,QACX63E,OAAQA,GAAOmqC,GAAcvpG,EAAQylC,IAEvC,CACEwzD,QAAS5hD,GAAGM,KACZW,SAAU5vD,EAAGnB,QACbgxD,OAAQ7vD,EAAGnB,QACX63E,OAAQA,GAAOoqC,GAAcxpG,EAAQylC,IAEvC,CACEwzD,QAAS5hD,GAAGU,GACZqnB,OAAQA,GAAO8vC,GAASlvG,GAAQ,IAElC,CACEi5F,QAAS5hD,GAAGG,KACZ4nB,OAAQA,GAAO8vC,GAASlvG,GAAQ,KAEjCqZ,GAAKv7B,MAAK,SAAU2d,GACrB4d,EAAIjrC,gBACN,GACF,CAIMyqI,CAAyB74G,EAAQylC,EAAOpsB,EAE5C,GACF,CA+iCEy/F,CAAQ94G,EAAQylC,GA/8BJ,SAAUzlC,EAAQylC,GAC9BzlC,EAAO8pB,GAAG,WAAW,SAAUzQ,IACI,IAA7BA,EAAIpC,sBAhGmB,SAAUjX,EAAQylC,EAAOpsB,GACtD81F,GAAQ,CACN,CACElW,QAAS5hD,GAAGC,UACZ8nB,OAAQA,GAAOqtC,GAAiBzsG,GAAQ,IAE1C,CACEi5F,QAAS5hD,GAAGC,UACZ8nB,OAAQA,GAAOuhC,GAAmB3gG,GAAQ,IAE5C,CACEi5F,QAAS5hD,GAAGE,OACZ6nB,OAAQA,GAAOuhC,GAAmB3gG,GAAQ,IAE5C,CACEi5F,QAAS5hD,GAAGC,UACZ8nB,OAAQA,GAAO+/B,GAAmBn/F,GAAQ,IAE5C,CACEi5F,QAAS5hD,GAAGE,OACZ6nB,OAAQA,GAAO+/B,GAAmBn/F,GAAQ,IAE5C,CACEi5F,QAAS5hD,GAAGC,UACZ8nB,OAAQA,GAAO2qC,GAAmB/pG,EAAQylC,GAAO,IAEnD,CACEwzD,QAAS5hD,GAAGE,OACZ6nB,OAAQA,GAAO2qC,GAAmB/pG,EAAQylC,GAAO,IAEnD,CACEwzD,QAAS5hD,GAAGC,UACZ8nB,OAAQA,GAAOD,GAAmBn/D,GAAQ,IAE5C,CACEi5F,QAAS5hD,GAAGE,OACZ6nB,OAAQA,GAAOD,GAAmBn/D,GAAQ,IAE5C,CACEi5F,QAAS5hD,GAAGC,UACZ8nB,OAAQA,GAAOyhC,GAAmB7gG,GAAQ,IAE5C,CACEi5F,QAAS5hD,GAAGE,OACZ6nB,OAAQA,GAAOyhC,GAAmB7gG,GAAQ,IAE5C,CACEi5F,QAAS5hD,GAAGC,UACZ8nB,OAAQA,GAAO+rC,GAAmBnrG,GAAQ,IAE5C,CACEi5F,QAAS5hD,GAAGE,OACZ6nB,OAAQA,GAAO+rC,GAAmBnrG,GAAQ,IAE5C,CACEi5F,QAAS5hD,GAAGC,UACZ8nB,OAAQA,GAAO6+B,GAAmBj+F,GAAQ,IAE5C,CACEi5F,QAAS5hD,GAAGE,OACZ6nB,OAAQA,GAAO6+B,GAAmBj+F,GAAQ,IAE5C,CACEi5F,QAAS5hD,GAAGC,UACZ8nB,OAAQA,GAAOw9B,GAAmB58F,GAAQ,IAE5C,CACEi5F,QAAS5hD,GAAGE,OACZ6nB,OAAQA,GAAOw9B,GAAmB58F,GAAQ,IAE5C,CACEi5F,QAAS5hD,GAAGC,UACZ8nB,OAAQA,GAAO6rC,GAAmBjrG,GAAQ,IAE5C,CACEi5F,QAAS5hD,GAAGE,OACZ6nB,OAAQA,GAAO6rC,GAAmBjrG,GAAQ,KAE3CqZ,GAAKv7B,MAAK,SAAU2d,GACrB4d,EAAIjrC,gBACN,GACF,CAgBM2qI,CAAyB/4G,EAAQylC,EAAOpsB,EAE5C,IACArZ,EAAO8pB,GAAG,SAAS,SAAUzQ,IACM,IAA7BA,EAAIpC,sBAnBe,SAAUjX,EAAQqZ,GAC3C81F,GAAQ,CACN,CACElW,QAAS5hD,GAAGC,UACZ8nB,OAAQA,GAAOshC,GAAkB1gG,IAEnC,CACEi5F,QAAS5hD,GAAGE,OACZ6nB,OAAQA,GAAOshC,GAAkB1gG,KAElCqZ,EACL,CASM2/F,CAAqBh5G,EAAQqZ,EAEjC,GACF,CAq8BE4/F,CAAQj5G,EAAQylC,GArMJ,SAAUzlC,GACtBA,EAAO8pB,GAAG,WAAW,SAAUvT,GACzBA,EAAM0iF,UAAY5hD,GAAGI,OAfH,SAAUz3C,EAAQuW,GAt2OZ,IAAUy/B,EAu2OpCz/B,EAAMU,uBAGVV,EAAMnoC,kBA12OkC4nE,EA22Odh2C,EAAOg2C,aA12OjBkiC,SACdliC,EAAYkiC,QAAS,EACrBliC,EAAY1uE,OAy2Od04B,EAAOg2C,YAAYC,UAAS,YACa,IAAnCj2C,EAAOu4B,UAAUsI,eACnB7gC,EAAOk9C,YAAY,UAErBoK,GAAOtnD,EAAQuW,EACjB,IACF,CAIM2iG,CAAoBl5G,EAAQuW,EAEhC,GACF,CAgME4iG,CAAQn5G,GAbI,SAAUA,GACtBA,EAAO8pB,GAAG,WAAW,SAAUzQ,IACI,IAA7BA,EAAIpC,sBAViB,SAAUjX,EAAQqZ,GAC7C81F,GAAQ,CAAC,CACLlW,QAAS5hD,GAAGQ,SACZunB,OAAQA,GAAOo5C,GAA8Bx4G,KAC3CqZ,GAAKv7B,MAAK,SAAU2d,GACxB4d,EAAIjrC,gBACN,GACF,CAIMgrI,CAAuBp5G,EAAQqZ,EAEnC,GACF,CAQEggG,CAAQr5G,GAzII,SAAUA,IAfL,SAAUA,GAC3B,IAAIs5G,EAAmBr6F,IAAM,WACtBjf,EAAOs9C,WACVgZ,GAAuBt2D,EAE3B,GAAG,GACC9X,GAAQ3B,SACVyZ,EAAO8pB,GAAG,YAAY,SAAU2pB,GAC9B6lE,EAAiBl5G,UACnB,IACAJ,EAAO8pB,GAAG,UAAU,SAAU2pB,GAC5B6lE,EAAiBn/F,QACnB,IAEJ,CAEEo/F,CAAav5G,GACbA,EAAO8pB,GAAG,SAAS,SAAU77C,IACL,IAAlBA,EAAEurI,aACJljD,GAAuBt2D,EAE3B,GACF,CAmIEy5G,CAAQz5G,GAlKI,SAAUA,EAAQylC,GAC9BzlC,EAAO8pB,GAAG,WAAW,SAAUzQ,IACI,IAA7BA,EAAIpC,sBAhCmB,SAAUjX,EAAQylC,EAAOpsB,GACtD81F,GAAQ,CACN,CACElW,QAAS5hD,GAAGa,IACZknB,OAAQA,GAAOivC,GAAsBruG,GAAQ,IAE/C,CACEi5F,QAAS5hD,GAAGc,KACZinB,OAAQA,GAAOivC,GAAsBruG,GAAQ,IAE/C,CACEi5F,QAAS5hD,GAAGa,IACZknB,OAAQA,GAAOswC,GAAoB1vG,GAAQ,IAE7C,CACEi5F,QAAS5hD,GAAGc,KACZinB,OAAQA,GAAOswC,GAAoB1vG,GAAQ,IAE7C,CACEi5F,QAAS5hD,GAAGa,IACZknB,OAAQA,GAAOqqC,GAAsBzpG,GAAQ,EAAMylC,IAErD,CACEwzD,QAAS5hD,GAAGc,KACZinB,OAAQA,GAAOqqC,GAAsBzpG,GAAQ,EAAOylC,KAErDpsB,GAAKv7B,MAAK,SAAU2d,GACrB4d,EAAIjrC,gBACN,GACF,CAIMsrI,CAAyB15G,EAAQylC,EAAOpsB,EAE5C,GACF,CA6JEsgG,CAAQ35G,EAAQylC,GAvGJ,SAAUzlC,EAAQylC,GAC9B,IAAIkyE,GAASjvH,GAAGnB,QAAhB,CAGA,IAAIuwH,EAAU9jF,IAAK,GACnBh0B,EAAO8pB,GAAG,WAAW,SAAUzQ,GACzBu+F,GAAav+F,IACfw+F,GAAqBC,EAAS93G,GAAQ,EAE1C,IACAA,EAAO8pB,GAAG,SAAS,SAAUzQ,IACM,IAA7BA,EAAIpC,sBArCa,SAAUjX,EAAQylC,EAAOpsB,GAChD81F,GAAQ,CACN,CACElW,QAAS5hD,GAAGW,QACZonB,OAAQA,GAAOqqC,GAAsBzpG,GAAQ,EAAOylC,IAEtD,CACEwzD,QAAS5hD,GAAGY,UACZmnB,OAAQA,GAAOqqC,GAAsBzpG,GAAQ,EAAMylC,KAEpDpsB,EACL,CA2BMugG,CAAmB55G,EAAQylC,EAAOpsB,GAEhCu+F,GAAav+F,IAAQy+F,EAAQ19G,QAC/By9G,GAAqBC,EAAS93G,GAAQ,GACtCA,EAAOi8C,cAEX,GAfA,CAgBF,CAqFE49D,CAAQ75G,EAAQylC,GACTA,CACT,EASIq0E,GAAa,WACf,SAASA,EAAW95G,GAGlB,IAAI+5G,EAFJ9zI,KAAK+zI,SAAW,GAChB/zI,KAAK+5B,OAASA,EAEd,IAAI1hB,EAAOrY,KACL,sBAAuB+5B,EAAO6zC,UAClC7zC,EAAO8pB,GAAG,wCAAwC,SAAU77C,GAC1D,IAAIgsI,EAAYj6G,EAAOu4B,UAAUC,SAC7B0hF,EAAU,CACZ7zG,eAAgB4zG,EAAU5zG,eAC1BgsB,YAAa4nF,EAAU5nF,YACvBC,aAAc2nF,EAAU3nF,aACxBC,UAAW0nF,EAAU1nF,WAER,eAAXtkD,EAAE7B,MAA0BkyE,GAAO47D,EAASH,IAC9C/5G,EAAO+Z,KAAK,mBAEdggG,EAAUG,CACZ,IAEFl6G,EAAO8pB,GAAG,eAAe,WACvB9pB,EAAO+Z,KAAK,kBACd,IACA/Z,EAAO8pB,GAAG,mBAAmB,WAC3B,IAAIu0C,EAAWr+D,EAAOu4B,UAAUwkB,UAAS,IACpCshB,IAAav0E,GAAIQ,OAAS0V,EAAOu4B,UAAUsI,eAG5CyR,GAAatyC,KAAY1hB,EAAK67H,kBAAkB97C,IAAar+D,EAAO7S,IAAIglC,UAAUksC,EAAUr+D,EAAOy4B,YACrGz4B,EAAOi8C,YAAY,CAAE+I,iBAAiB,GAE1C,IACAhlD,EAAO8pB,GAAG,WAAW,SAAU77C,IACxBA,EAAEgpC,sBAAwBq7B,GAAatyC,KACE,QAAxCA,EAAOu4B,UAAU2F,UAAU/uC,SAC7BwQ,GAAMI,iBAAiBC,GAAQ,WAC7BA,EAAOi8C,aACT,IAEAj8C,EAAOi8C,cAGb,GACF,CAwCA,OAvCA69D,EAAW/hI,UAAUkkE,YAAc,SAAUngE,GAC3C,IACIoR,EAAMilB,EAASnmB,EADfusC,EAAYtyD,KAAK+5B,OAAOu4B,UAExBtyD,KAAK+5B,OAAOo6G,aAAe7hF,IAAsCtyD,KAAK+5B,OAlsf9D6hC,SAAS,wBAksfiE57D,KAAK+5B,OAAO2L,KAAKggG,eACrG3/G,EAAO/lB,KAAK+5B,OAAOy4B,WACnBvrC,EAAOqrC,EAAUwkB,UAAS,IAAS/wD,GAC1B0D,gBAAkBzpB,KAAK+5B,OAAO6zC,UAAa5tE,KAAK+5B,OAAO7S,IAAIglC,UAAUjlC,EAAMlB,KAClFkB,EAAOlB,GAETmmB,EAAU,GACVlsC,KAAK+5B,OAAO7S,IAAIoiC,UAAUriC,GAAM,SAAUA,GACxC,GAAIA,IAASlB,EACX,OAAO,EAETmmB,EAAQznC,KAAKwiB,EACf,KACApR,EAAOA,GAAQ,CAAC,GACXhG,QAAUoX,EACfpR,EAAKq2B,QAAUA,EACflsC,KAAK+5B,OAAO+Z,KAAK,aAAcj+B,GAEnC,EACAg+H,EAAW/hI,UAAUoiI,kBAAoB,SAAU97C,GACjD,IAAI77F,EACA63I,EAAcp0I,KAAK+5B,OAAOgsB,EAAEqyC,GAAU1zC,aAAa1kD,KAAK+5B,OAAOy4B,WAAWnxD,IAAI+2F,GAClF,GAAIg8C,EAAY53I,SAAWwD,KAAK+zI,SAASv3I,OAAQ,CAC/C,IAAKD,EAAI63I,EAAY53I,OAAQD,GAAK,GAC5B63I,EAAY73I,KAAOyD,KAAK+zI,SAASx3I,GADFA,KAKrC,IAAW,IAAPA,EAEF,OADAyD,KAAK+zI,SAAWK,GACT,CAEX,CAEA,OADAp0I,KAAK+zI,SAAWK,GACT,CACT,EACOP,CACT,CArFiB,GAkHbQ,GAAkB,SAAUptH,GAC9B,OAAOkH,GAAYlH,IAASqX,GAAcnX,GAAqBF,GACjE,EA+BIqtH,GAAsB,SAAUljH,GAClC,IAAIolC,EAAaplC,EAAItmB,wBACjBkgB,EAAMoG,EAAI3H,cACV6O,EAAUtN,EAAI/f,gBACd2hB,EAAM5B,EAAIpB,YACd,MAAO,CACLxe,IAAKorD,EAAWprD,IAAMwhB,EAAI5hB,YAAcstB,EAAQ+Z,UAChDxmC,KAAM2qD,EAAW3qD,KAAO+gB,EAAIquD,YAAc3iD,EAAQ4Z,WAEtD,EAqDIqiG,GAA2B/kH,GAA0BglH,GAA0BjlH,GAe/EklH,GAAc,SAAU16G,EAAQ3I,EAAKliB,EAAOie,GAC9C,IAAIjG,EAAM6S,EAAO7S,IACbwtH,EAAYtjH,EAAItiB,WAAU,GAC9BoY,EAAI4iC,UAAU4qF,EAAW,CACvBxlI,MAAOA,EACPie,OAAQA,IAEVjG,EAAIm/B,UAAUquF,EAAW,oBAAqB,MAC9C,IAAI//D,EAAWztD,EAAIpB,OAAO,MAAO,CAC/B,MAAS,qBACT,iBAAkB,MAClB,aAAgB,KAChB,gBAAmB,UAiBrB,OAfAoB,EAAI4iC,UAAU6qB,EAAU,CACtBtQ,SAAU,WACVswE,QAAS,GACTC,SAAU,SACVtlG,OAAQ,EACRulG,QAAS,EACT91E,OAAQ,EACR7vD,MAAOA,EACPie,OAAQA,IAEVjG,EAAI4iC,UAAU4qF,EAAW,CACvB31E,OAAQ,EACR+1E,UAAW,eAEbngE,EAAS5vE,YAAY2vI,GACd//D,CACT,EAmBIogE,GAAgB,SAAU3jH,GACxBA,GAAOA,EAAI/rB,YACb+rB,EAAI/rB,WAAW8J,YAAYiiB,EAE/B,EAoGI4jH,GAAkB,SAAUh6G,GAC9BA,EAAM6oB,IAAG,SAAU7oB,GACjB+5G,GAAc/5G,EAAMi6G,MACtB,IACAj6G,EAAMo2B,OACR,EACI8jF,GAAqB,SAAUn7G,GACjC,IAAIiB,EAAQv6B,KACR00I,EAAU3vF,GAAS+E,IACnBkpB,EAAex1E,SACfm3I,EApGM,SAAUp6G,EAAOjB,GAC3B,OAAO,SAAU/xB,GACf,GAX2B,SAAUA,GACvC,OAAoB,IAAbA,EAAEu2C,MACX,CASQ82F,CAAyBrtI,GAAI,CAC/B,IAAIstI,EAAQz7H,EAAOkgB,EAAO7S,IAAIugC,WAAWz/C,EAAEhL,QA5vhBxC,WAEP,IADA,IAAI6Y,EAAO,GACF9R,EAAK,EAAGA,EAAK+R,UAAUtZ,OAAQuH,IACtC8R,EAAK9R,GAAM+R,UAAU/R,GAEvB,OAAO,SAAUkP,GACf,IAAK,IAAI1W,EAAI,EAAGA,EAAIsZ,EAAKrZ,OAAQD,IAC/B,GAAIsZ,EAAKtZ,GAAG0W,GACV,OAAO,EAGX,OAAO,CACT,CACF,CA+uhB0D0E,CAAG48H,GAA0BC,KAA0Bn9H,MAAM,MACjH,GAjFsBuvC,EAiFN7sB,EAAOy4B,UAhFpB+hF,GAD4BnjH,EAiFGkkH,IAhFElkH,IAAQw1B,EAgFF,CACxC,IAAI2uF,EAASx7G,EAAO7S,IAAIigC,OAAOmuF,GAC3BptB,EAAUnuF,EAAOy4B,UACjBrO,EAASpqB,EAAO6zC,SAAS3iE,gBAC7B+vB,EAAMkC,IAAI,CACRrtB,QAASylI,EACTE,UAAU,EACVtgE,QAASltE,EAAEktE,QACXC,QAASntE,EAAEmtE,QACXsgE,MAAO17G,EAAOyQ,OAAS09E,EAAQ1yC,YAAcrxB,EAAO31C,aAAe,EACnEknI,MAAO37G,EAAOyQ,OAAS09E,EAAQzyC,aAAetxB,EAAO74C,cAAgB,EACrEqqI,KAAM3tI,EAAE8pC,MAAQyjG,EAAOtiI,EACvB2iI,KAAM5tI,EAAEmqC,MAAQojG,EAAO5hI,EACvBzE,MAAOomI,EAAM9mI,YACb2e,OAAQmoH,EAAMhqI,aACd2pI,MAAOR,GAAY16G,EAAQu7G,EAAOA,EAAM9mI,YAAa8mI,EAAMhqI,eAE/D,CACF,CAnGc,IAAUs7C,EAASx1B,CAoGnC,CACF,CA4EyBhgB,CAAM4pB,EAAOjB,GAChC87G,EA5EK,SAAU76G,EAAOjB,GAC1B,IAAI+7G,EAAwBp8G,GAAMS,UAAS,SAAU4X,EAASK,GAC5DrY,EAAOsiE,oBAAoBk+B,gBAC3BxgG,EAAOu4B,UAAU4nD,aAAanoE,EAASK,EACzC,GAAG,GAEH,OADArY,EAAO8pB,GAAG,SAAUiyF,EAAsBn9G,MACnC,SAAU3wB,GACf,OAAOgzB,EAAM6oB,IAAG,SAAU7oB,GACxB,IAjE4B25C,EAAUuzC,EAiElC6tB,EAAWloH,KAAKnkB,IAAImkB,KAAK6lD,IAAI1rE,EAAEktE,QAAUl6C,EAAMk6C,SAAUrnD,KAAK6lD,IAAI1rE,EAAEmtE,QAAUn6C,EAAMm6C,UACxF,IAAKn6C,EAAMw6G,UAAYO,EAAW,GAAI,CAEpC,GADWh8G,EAAO+Z,KAAK,YAAa,CAAE92C,OAAQg+B,EAAMnrB,UAC3CmhC,qBACP,OAEFhW,EAAMw6G,UAAW,EACjBz7G,EAAO7xB,OACT,CACA,GAAI8yB,EAAMw6G,SAAU,CAClB,IAAIQ,EAjDM,SAAUh7G,EAAOqpC,GACjC,MAAO,CACLvyB,MAAOuyB,EAASvyB,MAAQ9W,EAAM26G,KAC9BxjG,MAAOkyB,EAASlyB,MAAQ,EAE5B,CA4CwB8jG,CAAYj7G,EA7HzB,SAAUjB,EAAQuW,GAC3B,OAPgC4lG,EA1CZ,SAAUn8G,GAC9B,OAAOA,EAAOyQ,OAAS8pG,GAAoBv6G,EAAOy4B,WAAa,CAC7D3mD,KAAM,EACNT,IAAK,EAET,CA4C2B+qI,CAAgBp8G,GAPKq8G,EApCxB,SAAUr8G,GAChC,IAAI54B,EAAO44B,EAAOy4B,UAClB,OAAOz4B,EAAOyQ,OAAS,CACrB3+B,KAAM1K,EAAK2K,WACXV,IAAKjK,EAAK+J,WACR,CACFW,KAAM,EACNT,IAAK,EAET,CAkCoDirI,CAAkBt8G,GAPNu8G,EAdzC,SAAUv8G,EAAQuW,GACvC,GAAIA,EAAMtzC,OAAOysB,gBAAkBsQ,EAAO6zC,SAAU,CAClD,IAAI2oE,EAAiBjC,GAAoBv6G,EAAOmvF,2BAC5CktB,EAfY,SAAUr8G,GAC5B,IAAI54B,EAAO44B,EAAOy4B,UAAWrO,EAASpqB,EAAO6zC,SAAS3iE,gBAClDurI,EAAe,CACjB3qI,KAAM1K,EAAK2K,WACXV,IAAKjK,EAAK+J,WAERurI,EAAe,CACjB5qI,KAAM1K,EAAK2K,YAAcq4C,EAAOr4C,WAChCV,IAAKjK,EAAK+J,WAAai5C,EAAOj5C,WAEhC,OAAO6uB,EAAOyQ,OAASgsG,EAAeC,CACxC,CAIyBC,CAAc38G,GACnC,MAAO,CACLluB,KAAMykC,EAAMwB,MAAQykG,EAAe1qI,KAAOuqI,EAAevqI,KACzDT,IAAKklC,EAAM6B,MAAQokG,EAAenrI,IAAMgrI,EAAehrI,IAE3D,CACA,MAAO,CACLS,KAAMykC,EAAMwB,MACZ1mC,IAAKklC,EAAM6B,MAEf,CAQ+EwkG,CAAiB58G,EAAQuW,GAN/F,CACLwB,MAAOwkG,EAAczqI,KAAOqqI,EAAarqI,KAAOuqI,EAAevqI,KAC/DsmC,MAAOmkG,EAAclrI,IAAM8qI,EAAa9qI,IAAMgrI,EAAehrI,KAHzC,IAAU8qI,EAAcE,EAAgBE,CAQhE,CA2H2CM,CAAK78G,EAAQ/xB,IA3EtB2sE,EA4ER35C,EAAMi6G,MA5EY/sB,EA4ELnuF,EAAOy4B,UA3ExCmiB,EAAStvE,aAAe6iH,GAC1BA,EAAQnjH,YAAY4vE,GAGR,SAAUA,EAAUtQ,EAAUn1D,EAAOie,EAAQsoH,EAAMC,GACjE,IAAImB,EAAY,EAAGriF,EAAY,EAC/BmgB,EAAS/oE,MAAMC,KAAOw4D,EAASvyB,MAAQ,KACvC6iC,EAAS/oE,MAAMR,IAAMi5D,EAASlyB,MAAQ,KAClCkyB,EAASvyB,MAAQ5iC,EAAQumI,IAC3BoB,EAAYxyE,EAASvyB,MAAQ5iC,EAAQumI,GAEnCpxE,EAASlyB,MAAQhlB,EAASuoH,IAC5BlhF,EAAY6P,EAASlyB,MAAQhlB,EAASuoH,GAExC/gE,EAAS/oE,MAAMsD,MAAQA,EAAQ2nI,EAAY,KAC3CliE,EAAS/oE,MAAMuhB,OAASA,EAASqnC,EAAY,IAC/C,CA4DQsiF,CAAU97G,EAAMi6G,MAAOe,EAAWh7G,EAAM9rB,MAAO8rB,EAAM7N,OAAQ6N,EAAMy6G,KAAMz6G,EAAM06G,MAC/EI,EAAsB9tI,EAAE+pC,QAAS/pC,EAAEoqC,QACrC,CACF,GACF,CACF,CAmDoB2kG,CAAK/7G,EAAOjB,GAC1Bi9G,EA9CK,SAAUh8G,EAAOjB,GAC1B,OAAO,SAAU/xB,GACfgzB,EAAM6oB,IAAG,SAAU7oB,GACjB,GAAIA,EAAMw6G,SAAU,CAClB,GAtIgB,SAAUz7G,EAAQk9G,EAAeC,GACvD,OAAID,IAAkBC,IAAen9G,EAAO7S,IAAIglC,UAAU+qF,EAAeC,KAGjE3C,GAAyB0C,EACnC,CAiIYE,CAAkBp9G,EANO,KAD/BqG,EAO6CrG,EAAOu4B,UARpCsZ,SAASN,WAAW,GACflrC,gBACHpY,SAAiBoY,EAAe/6B,WAAa+6B,EAMCpF,EAAMnrB,SAAU,CAC5E,IAAIunI,IAhIRC,EAgIqCr8G,EAAMnrB,QAhI5Bf,WAAU,IACpByC,gBAAgB,qBAClB8lI,GA+HYt9G,EAAO+Z,KAAK,OAAQ,CAC7B/B,QAAS/pC,EAAE+pC,QACXK,QAASpqC,EAAEoqC,UAEHpB,sBACRjX,EAAOg2C,YAAYC,UAAS,WAC1B+kE,GAAc/5G,EAAMnrB,SACpBkqB,EAAOq7E,cAAcr7E,EAAO7S,IAAI0jC,aAAawsF,IAC7Cr9G,EAAOsiE,oBAAoBk+B,eAC7B,GAEJ,CACAxgG,EAAO+Z,KAAK,UACd,CA/Ia,IACbujG,EAwHAj3G,CAuBF,IACA40G,GAAgBh6G,EAClB,CACF,CAuBoBs8G,CAAKt8G,EAAOjB,GAC1Bw9G,EAvBK,SAAUv8G,EAAOjB,GAC1B,OAAO,WACLiB,EAAM6oB,IAAG,SAAU7oB,GACbA,EAAMw6G,UACRz7G,EAAO+Z,KAAK,UAEhB,IACAkhG,GAAgBh6G,EAClB,CACF,CAcuBrC,CAAKqC,EAAOjB,GACjCA,EAAO8pB,GAAG,YAAauxF,GACvBr7G,EAAO8pB,GAAG,YAAagyF,GACvB97G,EAAO8pB,GAAG,UAAWmzF,GACrB7B,EAAQr9H,KAAK27D,EAAc,YAAaoiE,GACxCV,EAAQr9H,KAAK27D,EAAc,UAAW8jE,GACtCx9G,EAAO8pB,GAAG,UAAU,WAClBsxF,EAAQxhG,OAAO8/B,EAAc,YAAaoiE,GAC1CV,EAAQxhG,OAAO8/B,EAAc,UAAW8jE,EAC1C,IACAx9G,EAAO8pB,GAAG,WAAW,SAAU77C,GACzBA,EAAEgrH,UAAY5hD,GAAGK,KACnB8lE,GAEJ,GACF,EA6FIC,GAAwBjoH,GACxBkoH,GAAyBjoH,GACzBkoH,GAAyB,SAAU39G,EAAQ9S,GAC7C,OAAO6pD,GAAyB/2C,EAAOy4B,UAAWvrC,EACpD,EACI0wH,GAAqB,SAAU59G,GACjC,IAQI69G,EARAtlF,EAAYv4B,EAAOu4B,UAAWprC,EAAM6S,EAAO7S,IAC3C4hC,EAAU5hC,EAAI4hC,QACdxrB,EAAWvD,EAAOy4B,UAClBqlF,EAAY74E,GAAUjlC,EAAQuD,EAAUwrB,GAAS,WACnD,OAAO/K,GAAShkB,EAClB,IACI+9G,EAAkB,OAAS5wH,EAAIyjC,WAC/B4oB,EAAuB,oBAKvBwkE,EAA+B,SAAU9wH,GAC3C,OAAOA,IAASqW,IAAam6G,GAAuBxwH,IAASyI,GAAUzI,KAAUC,EAAIglC,UAAUjlC,EAAMqW,EACvG,EACI06G,EAA6B,SAAUntI,GACzC,OAAO2iF,GAA6B3iF,IAAQ4iF,GAA4B5iF,IAAQuiF,GAAcviF,IAAQwiF,GAAaxiF,EACrH,EAKIotI,EAAW,SAAU5zH,GACnBA,GACFiuC,EAAU2U,OAAO5iD,EAErB,EACI6zH,EAAW5lF,EAAUC,OACrB6lE,EAAY,SAAUzkE,EAAW1sC,EAAM47B,EAAQ51B,GASjD,YARuB,IAAnBA,IACFA,GAAiB,GAEX8M,EAAO+Z,KAAK,YAAa,CAC/B92C,OAAQiqB,EACR0sC,UAAWA,EACX9Q,OAAQA,IAEJ7R,qBACG,MAEL/jB,GACFqlC,EAAUrlC,eAAehG,GAAqB,IAAf0sC,GAE1BkkF,EAAU7zF,KAAKnB,EAAQ57B,GAChC,EAmKIkxH,EAAyB,SAAUlxH,GACrC,OAAOoY,GAAmBpY,IAAS2Y,GAA2B3Y,IAAS4Y,GAAyB5Y,EAClG,EACImxH,EAA0B,SAAU/lF,GACtC,OAAO8lF,EAAuB9lF,EAAIjyB,iBAAmB+3G,EAAuB9lF,EAAIhG,aAClF,EA+EIgsF,EAAsB,SAAUh0H,EAAO64B,GACzC,IAAK74B,EACH,OAAO,KAET,GAAIA,EAAM82C,UAAW,CACnB,IAAKi9E,EAAwB/zH,GAAQ,CACnC,IAAIw0B,EAAMqE,EAAU,GAAK,EACrBua,EAAgB8K,GAA2B1pB,EAAKvb,EAAUjZ,GAC1DuzC,EAAaH,EAAcQ,SAAS/a,GACxC,GAAIkjB,GAAkBxI,GACpB,OAAOwgE,EAAUv/E,EAAK+e,IAAY1a,IAAWua,EAAc93B,WAAmB,GAEhF,IAAI24G,EAAY7gF,EAAcQ,QAAQ/a,GACtC,GAAIkjB,GAAkBk4E,GACpB,OAAOlgB,EAAUv/E,EAAKy/F,GAAWp7F,IAAmBua,EAAc93B,WAAW,EAEjF,CACA,OAAO,IACT,CACA,IAAIS,EAAiB/b,EAAM+b,eACvBgsB,EAAc/nC,EAAM+nC,YACpBE,EAAYjoC,EAAMioC,UAMtB,GALgC,IAA5BlsB,EAAepY,UAAkC,IAAhBokC,GAAqBqrF,GAAuBr3G,EAAe/6B,cAC9F+6B,EAAiBA,EAAe/6B,WAChC+mD,EAAcllC,EAAIk2B,UAAUhd,GAC5BA,EAAiBA,EAAe/6B,YAEF,IAA5B+6B,EAAepY,SACjB,OAAO,KAET,GAAIskC,IAAcF,EAAc,GAAKhsB,IAAmB/b,EAAMgoC,aAAc,CAC1E,IAAIplC,EAAOmZ,EAAe5Y,WAAW4kC,GACrC,GAAI2rF,EAA6B9wH,GAC/B,OAxDc,SAAUmK,GAC5B,IAAImnH,EAAcnnH,EAAItiB,WAAU,GAC5B9G,EAAI+xB,EAAO+Z,KAAK,iBAAkB,CACpC92C,OAAQo0B,EACRmnH,YAAaA,IAEf,GAAIvwI,EAAEgpC,qBACJ,OAAO,KAET,IAAI3sB,EArCwB,SAAU4C,EAAMsxH,EAAaC,GACzD,IAAIzyF,EAAIhsB,EAAOgsB,EACX0yF,EAA0B3/G,GAAW3R,GAAqB4S,EAAOy4B,WAAY,IAAMslF,GAAiB9gI,MAAK,WAC3G,OAAO+uC,EAAE,GACX,IAAG,SAAU30B,GACX,OAAO20B,EAAE,CAAC30B,EAAIlK,KAChB,IACuC,IAAnCuxH,EAAwBj8I,SAC1Bi8I,EAA0B1yF,EAAE,oEAAoEniB,KAAK,KAAMk0G,IACnF/0F,SAAShpB,EAAOy4B,WAE1C,IAAIu1E,EAAW7gH,EAAIshC,YACf+vF,IAAgBC,GAAmB30H,GAAIC,IACzC20H,EAAwB/sH,QAAQF,OAAO,sDAAyDA,OAAO+sH,GACvGxQ,EAASpmE,cAAc82E,EAAwB,GAAGpuH,WAAWA,YAC7D09G,EAAS3wE,YAAYmhF,KAErBE,EAAwB/sH,QAAQF,OAAOoT,IAAMpT,OAAO+sH,GAAa/sH,OAAOoT,IACxEmpG,EAASj8E,SAAS2sF,EAAwB,GAAGpuH,WAAY,GACzD09G,EAASh8E,OAAO0sF,EAAwB,GAAGnuH,UAAW,IAExDmuH,EAAwB3nH,IAAI,CAAE1lB,IAAK8b,EAAIigC,OAAOlgC,EAAM8S,EAAOy4B,WAAW7+C,IACtE8kI,EAAwB,GAAGvwI,QAC3B,IAAIokE,EAAMha,EAAUsZ,SAGpB,OAFAU,EAAIusC,kBACJvsC,EAAIwsC,SAASivB,GACNA,CACT,CAUc2Q,CAAwBtnH,EAAKppB,EAAEuwI,YAAaA,GACpDI,EAAUxxH,GAAqBiK,GAWnC,OAVAlY,EAAO64C,GAAY5qC,GAAqB4S,EAAOy4B,WAAY,yBAAyB,SAAUphC,GACvF3d,GAAGklI,EAASvnH,IACfb,GAASa,EAAKmiD,EAElB,IACKrsD,EAAIg/B,UAAU90B,EAAKmiD,IACtBniD,EAAItsB,aAAayuE,EAAsB,KAEzCqkE,EAAkBxmH,EAClBmpG,IACOl2G,CACT,CAkCau0H,CAAc3xH,EAEzB,CACA,OAAO,IACT,EACI4xH,EAAyB,WACvBjB,GACFA,EAAgBrmI,gBAAgBgiE,GAElCz6C,GAAW3R,GAAqB4S,EAAOy4B,WAAY,IAAMslF,GAAiBjgI,KAAKgU,IAC/E+rH,EAAkB,IACpB,EAKIrd,EAAgB,WAClBsd,EAAU5zF,MACZ,EAIA,OAHIpgC,GAAIW,UAAYsxF,GAAM/7E,IAnSL,WACnBA,EAAO8pB,GAAG,WAAW,SAAU77C,GAC7B,IAAIqc,EAAQ6zH,IACR7zH,EAAM82C,WAAa8sD,GAAkBluF,EAAQ/xB,EAAE+pC,QAAS/pC,EAAEoqC,UAC5DkmF,GAAmBv+F,EAAQ1V,GAAO,GAAOxM,KAAKogI,EAElD,IACAl+G,EAAO8pB,GAAG,SAAS,SAAU77C,GAC3B,IAAI8wI,EAAsBpB,GAAuB39G,EAAQ/xB,EAAEhL,QACvD87I,IACErB,GAAuBqB,KACzB9wI,EAAEG,iBACF4xB,EAAO7xB,SAELsvI,GAAsBsB,IACpB5xH,EAAIglC,UAAU4sF,EAAqBxmF,EAAU2F,YAC/C4gF,IAIR,IACA9+G,EAAO8pB,GAAG,gBAAiBg1F,GAC3B9+G,EAAO8pB,GAAG,sCAAuCg0F,EAAU33E,YA+B3DnmC,EAAO8pB,GAAG,OAAO,SAAU77C,GACzB,IAAIiuE,EAAYjuE,EAAEhL,OACd87I,EAAsBpB,GAAuB39G,EAAQk8C,GACrDwhE,GAAuBqB,IACzB9wI,EAAEG,iBACF0+D,GAAW9sC,EAAQ++G,GAAqBjhI,KAAKwgI,IACpCN,EAA6B9hE,IACtCpP,GAAW9sC,EAAQk8C,GAAWp+D,KAAKwgI,EAEvC,IAAG,GACHt+G,EAAO8pB,GAAG,aAAa,SAAU77C,GAC/B,IAtBmC85B,EAAYy5F,EALnB15D,EAAOC,EAM/Bi3E,EACA35E,EAoBA6W,EAAYjuE,EAAEhL,OAClB,IAAIi5E,IAAc34C,GAAmC,SAAvB24C,EAAU/sD,UAAwBhC,EAAIglC,UAAU+pB,EAAW34C,MAGjC,IAApD2qF,GAAkBluF,EAAQ/xB,EAAE+pC,QAAS/pC,EAAEoqC,SAA3C,CAGA,IAAI0mG,EAAsBpB,GAAuB39G,EAAQk8C,GACzD,GAAI6iE,EACErB,GAAuBqB,IACzB9wI,EAAEG,iBACF0+D,GAAW9sC,EAAQ++G,GAAqBjhI,KAAKwgI,KAE7CQ,IACMrB,GAAsBsB,IAAwB9wI,EAAEoqE,UAAcrB,GAAgB/oE,EAAE+pC,QAAS/pC,EAAEoqC,QAASkgB,EAAUC,YAClHgoE,IACAjoE,EAAU4nD,aAAalyG,EAAE+pC,QAAS/pC,EAAEoqC,gBAGnC,GAAI2lG,EAA6B9hE,GACtCpP,GAAW9sC,EAAQk8C,GAAWp+D,KAAKwgI,QAC9B,IAAqC,IAAjCj4E,GAAkB6V,GAAsB,CACjD4iE,IACAte,IACA,IAAIye,EAt1FW,SAAUjzH,EAAMgsB,EAASK,GAC9C,IAAI6mG,EAAsBviF,GAVF,SAAU3wC,GAClC,OAAOxM,EAASf,GAAKuN,EAAKma,qBAAqB,MAAOkgC,GACxD,CAQ2C84E,CAAoBnzH,IACzDozH,EAAkB5/H,EAAS0/H,EAAqB3iI,EAAMgqH,GAAWluF,IACjEgnG,EAAc,SAAU5iF,GAC1B,OAAQ1nC,GAAU0nC,EAAWvvC,QAAUyI,GAAU8mC,EAAWvvC,KAC9D,EACIoyH,EAAkB9Y,GAAsB4Y,EAAiBpnG,EAASqnG,GACtE,GAAIC,EAAiB,CACnB,IAAIxY,EAAkBuY,EAAYC,GAElC,GADAA,EAAkB9Y,GAnCE,SAAUx6G,EAAMuzH,EAAgBzY,QAC9B,IAApBA,IACFA,GAAkB,GAEpB,IAAIpqE,EAAc,GACd/O,EAAU,SAAU6xF,EAAYtyH,GAClC,IAAIuyH,EAAYjgI,EAASm9C,GAAe,CAACzvC,KAAQ,SAAUuvC,GACzD,OAAQ+iF,EAAW/iF,EAAY8iF,EACjC,IAEA,OADA7iF,EAAcA,EAAY/wD,OAAO8zI,GACL,IAArBA,EAAUh9I,MACnB,EAIA,OAHAi6D,EAAYhyD,KAAK60I,GACjB1Y,GAAUvD,GAAWoC,GAAI15G,EAAMzP,EAAMoxC,EAASkN,IAAY0kF,EAAeryH,KAAM45G,GAC/ED,GAAUvD,GAAWsC,KAAM55G,EAAMzP,EAAMoxC,EAASoN,IAAYwkF,EAAeryH,KAAM45G,GAC1EpqE,CACT,CAmB4CgjF,CAAkB1zH,EAAMszH,EAAiBxY,GAAkB9uF,EAASqnG,GACxGC,GAAmBj5E,GAAkBi5E,EAAgBpyH,MACvD,OAjBU,SAAUuvC,EAAYzkB,GACpC,MAAO,CACL9qB,KAAMuvC,EAAWvvC,KACjB47B,OAAQs9E,GAAmB3pE,EAAYzkB,GAAWquF,GAAoB5pE,EAAYzkB,GAEtF,CAYa2nG,CAAUL,EAAiBtnG,EAEtC,CACA,OAAO,IACT,CAu0F4B4nG,CAAiBr8G,EAAUt1B,EAAE+pC,QAAS/pC,EAAEoqC,SAC5D,GAAI4mG,IA/C6Bl3G,EAgDLm0C,EAhDiBslD,EAgDNyd,EAAc/xH,KA/CnD8xH,EAAc7xH,EAAIoiC,UAAUxnB,EAAYgnB,GACxCsW,EAAal4C,EAAIoiC,UAAUiyE,EAAWzyE,GACtCzzC,EAAW0jI,MAGXj3G,IAAes9B,GAAcl4C,EAAIglC,UAAU6sF,EAAa35E,KAAuF,IAAxEq4E,GAAuBC,GAAuB39G,EAAQg/G,MAGzH7xH,EAAIglC,UAAUkT,EAAY25E,KAdNl3E,EAcqCk3E,EAd9Bj3E,EAc2C1C,EAbjEl4C,EAAIoiC,UAAUuY,EAAO/Y,KACrB5hC,EAAIoiC,UAAUwY,EAAOhZ,KAhBP,SAAU13B,GACrC,IAAIhgB,EAAQggB,EAAI/G,WAChB,GAAIhV,EAAWjE,GACb,OAAO,EAET,IAAIuyD,EAAWnM,GAAc3U,OAAOzxC,GACpC,GAAIie,GAAOs0C,EAAS1L,YAAwC,IAA1B7mC,EAAI5J,WAAWhrB,OAC/C,OAAQw7I,EAA2Br0E,GAEnC,IACIwqB,EADcjqB,GAAY9yC,GACLrkB,KAAK42D,GAC9B,OAAOwqB,IAAW6pD,EAA2B7pD,EAEjD,CAe+FyrD,CAAuBb,KAuCtD,CACxD/wI,EAAEG,iBACF,IAAIkc,EAAQ+zG,EAAU,EAAG4gB,EAAc/xH,KAAM+xH,EAAcn2F,QAAQ,GACnEo1F,EAAS5zH,GACT0V,EAAOy4B,UAAUtqD,OACnB,CAEJ,CA3BA,CA4BF,IACA6xB,EAAO8pB,GAAG,YAAY,SAAU77C,GAC1BopE,GAAGe,gBAAgBnqE,IAGnByvI,GAAuBnlF,EAAU2F,YACnCjwD,EAAEG,gBAEN,IACA4xB,EAAO8pB,GAAG,qBAAqB,SAAU77C,GACvC,IAAIqqD,EAAMrqD,EAAEqc,MACZ,GAAIuzH,EAAiB,CACnB,IAAKA,EAAgBvyI,WAEnB,YADAuyI,EAAkB,OAGpBvlF,EAAMA,EAAI8E,cACN0P,WAAW+wE,GACf5vI,EAAEqc,MAAQguC,CACZ,CACF,IACAt4B,EAAO8pB,GAAG,qBAAqB,SAAU77C,GACvCA,EAAEqc,MAyCoC,SAAUguC,GAClD,IAAIwzB,EAAqB9rD,EAAOwL,OAAOoH,wBACnCuqB,EAAShwC,EAAIshC,YACbpoB,EAAiBiyB,EAAIjyB,eACrBgsB,EAAciG,EAAIjG,YAClBC,EAAegG,EAAIhG,aACnBC,EAAY+F,EAAI/F,UAmBpB,OAlBI/wC,GAAMsqE,EAAoBzlD,EAAelX,SAAS7lB,eAChC,IAAhB+oD,EACF8K,EAAOuK,eAAerhC,GAEtB82B,EAAOyK,cAAcvhC,GAGvB82B,EAAOpL,SAAS1rB,EAAgBgsB,GAE9B7wC,GAAMsqE,EAAoBx5B,EAAanjC,SAAS7lB,eAChC,IAAdipD,EACF4K,EAAOwK,aAAarV,GAEpB6K,EAAOE,YAAY/K,GAGrB6K,EAAOnL,OAAOM,EAAcC,GAEvB4K,CACT,CAnEc2iF,CAAoC7xI,EAAEqc,OAChD,IAAIguC,EAAMgmF,EAAoBrwI,EAAEqc,MAAOrc,EAAEk1C,SACrCmV,IACFrqD,EAAEqc,MAAQguC,EAEd,IAIAt4B,EAAO8pB,GAAG,0BAA0B,SAAU77C,GAC5C,IA7KmCif,EA6K/BorC,EAAMrqD,EAAEqc,MACRhf,EAAagtD,EAAIjyB,eAAe/6B,WAC/B+yI,EAAwB/lF,IALV,gBAK8BhtD,EALrCzH,IAMV28H,IAhLiCtzG,EAkLP5hB,EAjLvB6hB,EAAI+5B,SAASh6B,EAAM,4BAkLtB4xH,GAEJ,IACA9+G,EAAO8pB,GAAG,QAAQ,SAAU77C,GAC1B,IA7KErD,EA6KEm1I,EAAgB9xI,EAAE8xI,cACtB,IAAK9xI,EAAEgpC,sBAAwBhpC,EAAE8xI,gBAAkBj2H,GAAIC,GAAI,CACzD,IAAIi2H,GA/KJp1I,EAAYuiB,EAAIiN,IAAI2jH,IACLnzI,EAAUu7B,qBAAqB,KAAK,GAAKv7B,EA+KpDo1I,IACF/xI,EAAEG,iBACF2xI,EAAcE,YACdF,EAAcG,QAAQ,YAAaF,EAAqBlvF,WACxDivF,EAAcG,QAAQ,aAAcF,EAAqBG,WAAaH,EAAqBv1G,WAE/F,CACF,IA3PS,SAAUzK,GACrBm7G,GAAmBn7G,GAlDH,SAAUA,GAC1BA,EAAO8pB,GAAG,QAAQ,SAAU77C,GAC1B,IAAImyI,OAAkC,IAAdnyI,EAAE+pC,QAA0BhY,EAAO6zC,SAASmK,iBAAiB/vE,EAAE+pC,QAAS/pC,EAAEoqC,SAAW,MACzGmiG,GAAyB4F,IAAmE,UAApDpgH,EAAO7S,IAAI+kC,yBAAyBkuF,KAC9EnyI,EAAEG,gBAEN,GACF,CA4CEiyI,CAAYrgH,GA7kgBmB,SAAUA,GACzC,OAAOA,EAAO6hC,SAAS,0BAA0B,EAAM,UACzD,CA4kgBMy+E,CAA2BtgH,IA5CF,SAAUA,GACvC,IAAIugH,EAAkB,SAAUtyI,GAC9B,IAAKA,EAAEgpC,qBAAsB,CAC3B,IAAIupG,EAAevyI,EAAEuyI,aACjBA,IAAiBzhI,EAAWyhI,EAAaC,MAAO,UAAYD,EAAa70F,MAAMlpD,OAAS,KAC1FwL,EAAEG,iBACa,SAAXH,EAAE7B,MACJ8kH,GAAalxF,EAAQ,sCAG3B,CACF,EACI0gH,EAA6B,SAAUzyI,GACrCm3E,GAAYplD,EAAQ/xB,EAAEhL,SACxBs9I,EAAgBtyI,EAEpB,EACI0yI,EAAQ,WACV,IAAIvF,EAAU3vF,GAAS+E,IACnBrjC,EAAM6S,EAAO7S,IACb8D,EAAM/sB,SACN08I,EAAa5gH,EAAOyQ,OAASzQ,EAAOy4B,UAAYz4B,EAAO6zC,SACvDgtE,EAAa,CACf,OACA,YAEF1hI,EAAO0hI,GAAY,SAAUl+I,GAC3By4I,EAAQr9H,KAAKkT,EAAKtuB,EAAM+9I,GACxBvzH,EAAIpP,KAAK6iI,EAAYj+I,EAAM49I,EAC7B,IACAvgH,EAAO8pB,GAAG,UAAU,WAClB3qC,EAAO0hI,GAAY,SAAUl+I,GAC3By4I,EAAQxhG,OAAO3oB,EAAKtuB,EAAM+9I,GAC1BvzH,EAAIysB,OAAOgnG,EAAYj+I,EAAM49I,EAC/B,GACF,GACF,EACAvgH,EAAO8pB,GAAG,QAAQ,WAChBnqB,GAAMI,iBAAiBC,EAAQ2gH,EAAO,EACxC,GACF,CAKIG,CAAyB9gH,EAE7B,CAsPI+gH,CAAO/gH,GApPG,SAAUA,GACtB,IAAIghH,EAAmB/hG,IAAM,WAC3B,IAAKjf,EAAOC,SAAWD,EAAOy4B,UAAUvqD,SAAShK,SAAS6/C,eAAgB,CACxE,IAAIuU,EAAMt4B,EAAOu4B,UAAUC,SAC3B,GAAIF,EAAI8I,UAAW,CACjB,IAAI49D,EAAaL,GAAiB3+F,EAAQs4B,GAAK,GAC/Ct4B,EAAOu4B,UAAU2U,OAAO8xD,EAC1B,CACF,CACF,GAAG,GACHh/F,EAAO8pB,GAAG,SAAS,WACjBk3F,EAAiB5gH,UACnB,IACAJ,EAAO8pB,GAAG,QAAQ,WAChBk3F,EAAiB7mG,QACnB,GACF,CAqOI8mG,CAAQjhH,GAnOA,SAAUA,GACpBA,EAAO8pB,GAAG,QAAQ,WAChB9pB,EAAO8pB,GAAG,WAAW,SAAU77C,GAC7B,IAAIhL,EAASgL,EAAEhL,OACf,GAAI0yB,GAAU1yB,GAAS,CACrB,IAAIy7H,EAAS3nD,GAAyB/2C,EAAOy4B,UAAWx1D,GACpDiqB,EAAOuI,GAAyBipG,GAAUA,EAASz7H,EACnD+8B,EAAOu4B,UAAU2F,YAAchxC,GACjC4/C,GAAW9sC,EAAQ9S,GAAMpP,MAAK,SAAUw6C,GACtC,OAAOt4B,EAAOu4B,UAAU2U,OAAO5U,EACjC,GAEJ,CACF,GACF,GACF,CAqNIqoF,CAAM3gH,EACR,CA0IE4vF,GAEK,CACLyO,UAAWA,EACX97B,wBA/S4B,SAAU2qC,GAClCA,EAAoBjiI,aAAa,oBACnC86B,GAAwBmnG,GACxBgR,EAASC,KACT5lF,EAAUrlC,eAAeg6G,GAE7B,EA0SE1M,cAAeA,EACftmF,QAdY,WACZ4jG,EAAU5jG,UACV2jG,EAAkB,IACpB,EAaF,EAscIqD,GAAQz1F,GAAS+E,IAYjB2wF,GAAc,SAAUnhH,GAC1B,OAAOA,EAAOyQ,OAASzQ,EAAO4lD,aAAaz2D,SAAS7lB,mBAAgBhH,CACtE,EACI8+I,GAAkB,SAAU37I,GAC9B,OAAO6b,GAAS7b,GAAK,SAAUub,GAC7B,OAA0B,IAAnB3F,EAAY2F,EACrB,GACF,EACIqgI,GAAmB,SAAUrhH,GAC/B,IAAIO,EAAWP,EAAOO,SACtB,OAAO6gH,GAAgB,CACrB7wG,eAAgBhQ,EAASgQ,eACzB+wG,mBAAoB/gH,EAAS+gH,mBAC7BlwG,gBAAiB7Q,EAAS6Q,gBAC1BE,wBAAyB/Q,EAAS+Q,wBAClCe,iBAAkB9R,EAAS8R,iBAC3B7E,eAAgBjN,EAASiN,eACzB+zG,oCAAqChhH,EAASghH,oCAC9CC,mBAAoBjhH,EAASihH,mBAC7Bh2G,OAAQjL,EAASiL,OACjBwjD,sBAAuBzuD,EAASyuD,sBAChCyyD,qBAAsBlhH,EAASkhH,qBAC/BpzG,QAAS9N,EAAS8N,QAClBiC,oBAAqB/P,EAAS+P,oBAC9BoxG,qBAAsBnhH,EAASmhH,qBAC/BrwG,eAAgB9Q,EAAS8Q,eACzB3D,cAAenN,EAASmN,cACxBN,eAAgB7M,EAAS6M,eACzBE,aAAc/M,EAAS+M,aACvBH,YAAa5M,EAAS4M,YACtBw0G,oBAAqBphH,EAASohH,oBAC9BzwG,iCAAkC3Q,EAASqhH,oBAE/C,EACIC,GAAmB,SAAU7hH,GAC/B,IAAIO,EAAWP,EAAOO,SAClBuhF,EAAY9hF,EAAO8hH,aAAahgC,UACpC,OAAOs/B,GAAgB,CACrBlzD,2BAA4B3tD,EAAS2tD,2BACrCxE,qBAAsBnpD,EAASmpD,qBAC/Br0C,oBAAqB9U,EAAS8U,oBAC9BuxE,2BAA4BrmF,EAASqmF,2BACrCzxE,kBAAmB5U,EAAS4U,kBAC5BuxE,yBAA0BnmF,EAASmmF,yBACnCpG,uBAAwB//E,EAAS+/E,uBACjCuG,kBAAmBtmF,EAASsmF,kBAC5BlG,wBAAyBpgF,EAASogF,wBAClC5Q,kBAAmBxvE,EAASwvE,kBAC5B7D,wBAAyB3rE,EAAS2rE,wBAClCoX,mBAAoB/iF,EAAS+iF,mBAC7B/zB,eAAgBhvD,EAASgvD,eACzBg3B,oBAAqBhmF,EAASgmF,oBAC9BqB,cAAernF,EAASqnF,cACxB5D,UAAWm9B,GAAYnhH,GACvB0uD,UAAU,EACVs4B,WAAYlF,EACZ59G,SAAU87B,EAAO6zC,SACjBwzC,sBAAuB9mF,EAAS8mF,uBAEpC,EAyGI06B,GAAa,SAAU/hH,GACzBA,EAAOgiH,4BACPhiH,EAAOo6G,aAAc,EAp1eR,SAAUp6G,GAChBA,EAAO+Z,KAAK,OACrB,CAm1eEkoG,CAASjiH,GACTA,EAAO7xB,OAAM,GAlByB,SAAU6xB,GAChD,IAAIhU,EAAOgU,EAAO7S,IAAI8+B,UACjBjsB,EAAOyQ,QAAY6hC,GAAatyC,IAAWA,EAAOu4B,UAAUwkB,UAAS,KAAU/wD,GAClFk/C,GAAgBl/C,GAAMlO,MAAK,SAAUhN,GACnC,IAAIoc,EAAOpc,EAAIotD,UACXooB,EAAWvxD,GAAU7H,GAAQg+C,GAAgBh+C,GAAM5P,MAAMxM,GAAOA,EAChEgZ,GAAI5B,QAAQ3B,OAtpcJ,SAAUyZ,EAAQs4B,GAClC,IAAItsC,EAAOoB,GAAqB4S,EAAOy4B,WAEnC8rB,GADQJ,GAAYnkD,GAAUxhB,EAASC,KAAK65C,GAAO95C,EAAS1B,QACxC1T,IAAIg7E,IAA6B76E,OAAO26E,GAAYl4D,IAC5EgU,EAAO4gC,SAAW2jB,EAAYnnE,SAAWmnE,EAAcvkD,EAAO4gC,QAChE,CAkpcQshF,CAAYliH,EAAQsmD,EAASvoB,WAE7B/9B,EAAOu4B,UAAU2U,OAAOoZ,EAASvoB,UAErC,GAEJ,CAMEokF,CAAkCniH,GAClCA,EAAOi8C,YAAY,CAAEhoB,SAAS,IAC9Bj0B,EAAOoiH,aAAa,yBAA0BpiH,GApChC,SAAUA,GACpBA,EAAOO,SAAS8hH,YAClB1iH,GAAMI,iBAAiBC,GAAQ,WAC7B,IAAIsiH,GAEFA,GADiC,IAA/BtiH,EAAOO,SAAS8hH,WACJriH,EAEAA,EAAOwlD,cAAcprD,IAAI4F,EAAOO,SAAS8hH,aAExCE,WACfD,EAAYn0I,OAEhB,GAAG,IAEP,CAuBEq0I,CAAUxiH,EACZ,EACIyiH,GAAwB,SAAUziH,GACpC,OAAOA,EAAOyQ,OAASzQ,EAAO0iH,GAAG72F,iBAAmB7rB,EAAO7S,IAAI0+B,gBACjE,EAaI82F,GAAiB,SAAU3iH,GAC7B,IAAI6rB,EAAmB42F,GAAsBziH,GACzC+iC,EAAUD,GAAW9iC,GACrBjJ,EAAMiJ,EAAO+xF,WACb6wB,EAAY,WACd/2F,EAAiBjpB,UAAU7L,GACtBiJ,EAAOyQ,QACVzQ,EAAO0iH,GAAG72F,iBAAiBjpB,UAAUmgC,EAEzC,EACI0wD,EAAS,WACPzzF,EAAOC,QACT2iH,IAEA5iH,EAAO8pB,GAAG,SAAU84F,EAExB,EACA,GAAI5iH,EAAO6iH,cAAcpgJ,OAAS,EAAG,CACnC,IAAIqgJ,EAAmB,GACvB53H,GAAMpN,KAAKkiB,EAAO6iH,eAAe,SAAUhxI,GACzCixI,GAAoBjxI,EAAQ,MAC9B,IACAmuB,EAAO7S,IAAImjC,SAASwyF,EACtB,CACA,IAAIC,EAAiB5jH,GAAWl3B,IApCE,SAAU+3B,EAAQjJ,EAAKisH,GACzD,IAAI7gC,EAAW,CAAC,IAAIhjF,IAAW,SAAU13B,EAASC,GAC9C,OAAO+6I,GAAsBziH,GAAQsC,QAAQvL,EAAKtvB,EAASC,EAC7D,KACF,OAAIs4B,EAAOyQ,OACF0xE,EAEAA,EAASx2G,OAAO,CAAC,IAAIwzB,IAAW,SAAU13B,EAASC,GACtD,OAAOs4B,EAAO0iH,GAAG72F,iBAAiBvpB,QAAQ0gH,EAAav7I,EAASC,EAClE,KAEN,CAyBsCu7I,CAA8BjjH,EAAQjJ,EAAKgsC,IAAUnqC,KAAK66F,GAAQtQ,MAAMsQ,GAI5G,OAHIzzF,EAAOO,SAAS2iH,eAjOJ,SAAUljH,EAAQrS,GAClC,IAAIvmB,EAAOgmB,GAAqB4S,EAAOy4B,WACnC7tD,EAAYomB,GAAkBF,GAAY1pB,IAC1CyK,EAAQub,GAAqB,SACjCgJ,GAAMvkB,EAAO,OAAQ,YACrB0f,GAAS1f,EAAOub,GAAsBO,IACtC4D,GAAS3mB,EAAWiH,GACpBmuB,EAAO8pB,GAAG,UAAU,WAClBh4B,GAASjgB,EACX,GACF,CAwNIsxI,CAAYnjH,EAAQA,EAAOO,SAAS2iH,eAE/BH,CACT,EACIK,GAAU,SAAUpjH,GACtB,IAAIO,EAAWP,EAAOO,SAAUtP,EAAM+O,EAAO6zC,SAAUzsE,EAAO44B,EAAOy4B,WAh5erD,SAAUz4B,GACnBA,EAAO+Z,KAAK,UACrB,CA+4eEspG,CAAYrjH,GACPO,EAAS+iH,oBAAuB/iH,EAASgjH,mBAC5CtyH,EAAI7pB,KAAKo8I,YAAa,EACtBtC,GAAM50F,UAAUllD,EAAM,aAAc,UAEtC44B,EAAOyjH,OAlrBI,SAAUzjH,GACrB,IAgKM0jH,EAYAC,EAxHAC,EApDF9lI,EAAOoN,GAAMpN,KACbw5D,EAAYD,GAAGC,UAAWC,EAASF,GAAGE,OAAQpqD,EAAM6S,EAAO7S,IAAKorC,EAAYv4B,EAAOu4B,UAAWopC,EAAS3hE,EAAO2hE,OAC9GkiD,EAAU/5H,GAAIE,MAAOzD,EAAOuD,GAAIC,GAAI+5H,EAAWh6H,GAAIL,OACnDs6H,EAAuB,0BACvBC,EAAsBz9H,EAAO,OAAS,MACtC09H,EAAwB,SAAUpqB,EAAK54F,GACzC,IACEjB,EAAO6zC,SAASqJ,YAAY28C,GAAK,EAAO54F,EAC1C,CAAE,MAAO/H,GACT,CACF,EACI+d,EAAqB,SAAUhpC,GACjC,OAAOA,EAAEgpC,oBACX,EA2EIitG,EAAY,WACdlkH,EAAOmkH,UAAU78I,IAAI,SAAU,KAAM,YACvC,EACI88I,EAA8B,WAC3BpkH,EAAOyQ,QACVtjB,EAAIpP,KAAKiiB,EAAO6zC,SAAU,qBAAqB,SAAU5lE,GACvD,IAAIqqD,EACJ,GAAIrqD,EAAEhL,SAAW+8B,EAAO6zC,SAAS3iE,gBAG/B,GAFAonD,EAAMC,EAAUC,SAChBx4B,EAAOy4B,UAAUtqD,QACF,cAAXF,EAAE7B,KAAsB,CAC1B,GAAIk5B,GAAmBgzB,EAAIjyB,gBACzB,OAEFkyB,EAAU4nD,aAAalyG,EAAE+pC,QAAS/pC,EAAEoqC,QACtC,MACEkgB,EAAU2U,OAAO5U,EAGvB,GAEJ,EAuBIiuB,EAAY,WACT89D,MAAMtsI,UAAU4kD,gBACnB38B,EAAO8pB,GAAG,aAAa,SAAU77C,GAC/B,IAAKgpC,EAAmBhpC,IAA4B,SAAtBA,EAAEhL,OAAOksB,SAAqB,CAC1D,IAAIm1H,EAAStkH,EAAOy4B,UACpB6rF,EAAOC,OACP5kH,GAAMI,iBAAiBC,GAAQ,WAC7BskH,EAAOn2I,OACT,GACF,CACF,GAEJ,EACIq2I,EAAwB,WAC1BxkH,EAAO8pB,GAAG,SAAS,SAAU77C,GAC3B,IAAIhL,EAASgL,EAAEhL,OACX,aAAagE,KAAKhE,EAAOksB,WAAsD,UAAzChC,EAAI+kC,yBAAyBjvD,KACrEgL,EAAEG,iBACF4xB,EAAOu4B,UAAUvS,OAAO/iD,GACxB+8B,EAAOi8C,eAEe,MAApBh5E,EAAOksB,UAAoBhC,EAAI+5B,SAASjkD,EAAQ,qBAClDgL,EAAEG,iBACFmqD,EAAUvS,OAAO/iD,GAErB,GACF,EAqCIwhJ,EAA6B,WAC/BzkH,EAAO8pB,GAAG,WAAW,SAAU77C,GAC7B,IAAKgpC,EAAmBhpC,IAAMA,EAAEgrH,UAAY3hD,GACtC/e,EAAUsI,eAAoD,IAAnCtI,EAAUC,SAASnG,YAAmB,CACnE,IAAItiC,EAAkBwoC,EAAU2F,UAAUnuC,gBAC1C,GAAIA,GAAmBA,EAAgBZ,UAAuD,UAA3CY,EAAgBZ,SAAS7lB,cAE1E,OADA2E,EAAEG,kBACK,CAEX,CAEJ,GACF,EA2BIs2I,EAAyB,YArthBZ,SAAU1kH,GAC3B,OAAOA,EAAO6hC,SAAS,WACzB,EA2thBS8iF,CAAa3kH,IAChBA,EAAO8pB,GAAG,+BARE,WACZm6F,EAAsB,gBAAgB,GACtCA,EAAsB,4BAA4B,GAC7CjhF,GAAkBhjC,IACrBikH,EAAsB,wBAAwB,EAElD,GAIF,EAqCIW,EAAsB,WACxB5kH,EAAO6iH,cAAcn4I,KAAK,kFAC5B,EACIm6I,EAAwB,WACrB7kH,EAAOyQ,QACVzQ,EAAO8pB,GAAG,WAAW,WACf5lD,SAAS6/C,gBAAkB7/C,SAASkD,MACtC44B,EAAO8kH,SAAS32I,OAEpB,GAEJ,EACI42I,EAAa,WACV/kH,EAAOyQ,SACVzQ,EAAO6iH,cAAcn4I,KAAK,4BAC1Bs1B,EAAO8pB,GAAG,SAAS,SAAU77C,GAC3B,IAAIqqD,EACJ,GAA0B,SAAtBrqD,EAAEhL,OAAOksB,SAAqB,CAChC,GAAIrF,GAAIC,GAAK,GAEX,YADAiW,EAAOy4B,UAAUtqD,QAGnBmqD,EAAMt4B,EAAOu4B,UAAUC,SACvBx4B,EAAOy4B,UAAUtqD,QACjB6xB,EAAOu4B,UAAU2U,OAAO5U,GACxBt4B,EAAOu4B,UAAUmnB,YACjB1/C,EAAOi8C,aACT,CACF,IAEJ,EACI+oE,EAA0B,WACxBl7H,GAAIG,KACN+V,EAAO8pB,GAAG,WAAW,SAAU77C,IACzBopE,GAAGmB,eAAevqE,IAAOA,EAAEoqE,UAA2B,KAAdpqE,EAAEgrH,SAAgC,KAAdhrH,EAAEgrH,UAChEhrH,EAAEG,iBACgB4xB,EAAOu4B,UAAUsZ,SACvBwxD,OAAO,OAAsB,KAAdp1H,EAAEgrH,QAAiB,WAAa,UAAW,gBAE1E,GAEJ,EAIIgsB,EAAoB,WACtBjlH,EAAO8pB,GAAG,SAAS,SAAU77C,GAC3B,IAAIopB,EAAMppB,EAAEhL,OACZ,GACE,GAAoB,MAAhBo0B,EAAIvpB,QAEN,YADAG,EAAEG,uBAGGipB,EAAMA,EAAI/rB,WACrB,IACA00B,EAAO6iH,cAAcn4I,KAAK,kDAC5B,EACIw6I,EAA8B,WAChCllH,EAAO8pB,GAAG,QAAQ,WAChB9pB,EAAO7S,IAAIpP,KAAKiiB,EAAOy4B,UAAW,UAAU,SAAUxqD,GACpDA,EAAEG,gBACJ,GACF,GACF,EA2BI+2I,EAAyBzpI,EAyE7B,OALIqgG,GAAM/7E,IA3DJ8jH,IACFM,IACAI,IACAU,IACAhB,IACIp6H,GAAII,MACN26H,IACAE,IACAE,MAGApB,IACFt9D,IACAm+D,IACAE,IACAI,OA3LFhlH,EAAO8pB,GAAG,WAAW,SAAU77C,GAC7B,IAAIqqD,EAAK5rC,EACT,IAAIuqB,EAAmBhpC,IAAMA,EAAEgrH,UAAY5hD,GAAGC,UAA9C,CAIA,IAAI1sE,GADJ0tD,EAAMC,EAAUC,UACInyB,eAChBZ,EAAS6yB,EAAIjG,YACbrmC,EAAOmB,EAAI8+B,UAEf,GADAv/B,EAAS9hB,EACJ0tD,EAAI8I,WAAwB,IAAX37B,EAAtB,CAGA,KAAO/Y,GAAUA,EAAOphB,YAAcohB,EAAOphB,WAAWglB,aAAe5D,GAAUA,EAAOphB,aAAe0gB,GACrGU,EAASA,EAAOphB,WAEK,eAAnBohB,EAAO5e,UACTkyB,EAAOqlE,UAAU+U,OAAO,aAAc,KAAM1tF,IAC5C4rC,EAAMnrC,EAAIshC,aACNsD,SAASnnD,EAAW,GACxB0tD,EAAItG,OAAOpnD,EAAW,GACtB2tD,EAAU2U,OAAO5U,GATnB,CARA,CAmBF,IApLIsrF,EAAe,SAAUtrF,GAC3B,IAAIlxD,EAAO+lB,EAAIpB,OAAO,QAClBw9B,EAAW+O,EAAI8oC,gBAEnB,OADAh6F,EAAK4D,YAAYu+C,GACVgP,EAAUmc,WAAWl/B,UAAUpuC,EAAM,CAAEuM,OAAQ,QACxD,EAQAqsB,EAAO8pB,GAAG,WAAW,SAAU77C,GAC7B,IACI4yD,EAAaz5D,EADb6xH,EAAUhrH,EAAEgrH,QAEhB,IAAKhiF,EAAmBhpC,KAAOgrH,IAAY1hD,GAAU0hD,IAAY3hD,GAAY,CAG3E,GAFAzW,EAAc7gC,EAAOu4B,UAAUsI,cAC/Bz5D,EAAO44B,EAAOy4B,UACVoI,IAAgB1zC,EAAIskC,QAAQrqD,GAC9B,OAEF,IAAKy5D,IAhBiB,SAAUvI,GAClC,IAAIC,EAAYqrF,EAAatrF,GACzB8sF,EAASj4H,EAAIshC,YAGjB,OAFA22F,EAAOt4E,WAAW9sC,EAAOy4B,WAElBF,IADYqrF,EAAawB,EAElC,CAUyBC,CAAoBrlH,EAAOu4B,UAAUC,UACxD,OAEFvqD,EAAEG,iBACF4xB,EAAOg5D,WAAW,IACd5xF,EAAKkpB,YAAcnD,EAAI4hC,QAAQ3nD,EAAKkpB,YACtC0P,EAAOu4B,UAAU0gC,kBAAkB7xF,EAAKkpB,WAAY,GAEpD0P,EAAOu4B,UAAU0gC,kBAAkB7xF,EAAM,GAE3C44B,EAAOi8C,aACT,CACF,IA4TKnyD,GAAID,cA9HTmW,EAAO8pB,GAAG,yBAAyB,SAAU77C,GACtCopE,GAAGe,gBAAgBnqE,IACtBsqD,EAAUmnB,WAEd,IAAG,GA6HCokE,IACFM,IACAI,IA1IExiF,GAAmBhiC,IACrBA,EAAO8pB,GAAG,QAAQ,WAChBm6F,EAAsB,4BAA6BjiF,GAAmBhiC,GACxE,IAyIAklH,IACAT,IA/DF9iD,EAAOhtB,cAAc,MAAM,SAAUx9C,GAEnC,IADA,IAAI30B,EAAI20B,EAAM10B,OACPD,KAC0B,8BAA3B20B,EAAM30B,GAAGqnC,KAAK,UAChB1S,EAAM30B,GAAG8N,QAGf,IA0DMwZ,GAAII,KACN26H,IACAE,IACAE,KAEAf,KAGAp6H,GAAIC,IAAM,KACZg7H,IACAN,KAEE36H,GAAIC,KACNm6H,IApGFD,EAAsB,iBAAiB,GAgCvCjkH,EAAO8pB,GAAG,aAAa,SAAU77C,IAvVP,SAAUA,GACpC,IAAIq3I,EAAeC,EACft3I,EAAEuyI,eACAxgH,EAAOu4B,UAAUsI,eAAsC,QAArB5yD,EAAEhL,OAAO6K,SAC7CyqD,EAAUvS,OAAO/3C,EAAEhL,SAErBqiJ,EAAgBtlH,EAAOu4B,UAAUg5B,cACf9uF,OAAS,IACzB8iJ,EAAkBxB,EAAuByB,OAAOxlH,EAAOn8B,IAAM,IAAM2hJ,OAAOF,GAC1Er3I,EAAEuyI,aAAaN,QAAQ8D,EAAqBuB,IAGlD,CA4UIE,CAAsBx3I,EACxB,IACA+xB,EAAO8pB,GAAG,QAAQ,SAAU77C,GAC1B,IAAKgpC,EAAmBhpC,GAAI,CAC1B,IAAIs3I,EA/UkB,SAAUt3I,GACpC,IAAIs3I,EACJ,OAAIt3I,EAAEuyI,eACJ+E,EAAkBt3I,EAAEuyI,aAAansF,QAAQ2vF,KAClBuB,EAAgB/7I,QAAQu6I,IAAyB,GACtEwB,EAAkBA,EAAgBh7I,OAAOw5I,IAA6Bx4H,MAAM,KACrE,CACL1nB,GAAI4lF,SAAS87D,EAAgB,IAC7Bl4H,KAAMo8D,SAAS87D,EAAgB,MAI9B,IACT,CAkU4BG,CAAsBz3I,GAC5C,GAAIs3I,GAAmBA,EAAgB1hJ,KAAOm8B,EAAOn8B,GAAI,CACvDoK,EAAEG,iBACF,IAAIkqD,EAAMklB,GAAUvvE,EAAEiL,EAAGjL,EAAE2L,EAAGomB,EAAO6zC,UACrCtb,EAAU2U,OAAO5U,GArUenP,EAsURo8F,EAAgBl4H,KArU1C2S,EAAO2lH,sBAAsB,6BAC/B3lH,EAAOk9C,YAAY,6BAA6B,EAAO,CACrD/zB,QAASA,EACTy8F,UAkUgD,IA/TlD5lH,EAAOk9C,YAAY,oBAAoB,EAAO/zB,EAgU5C,CACF,CAxU0B,IAAUA,CAyUtC,KA2DI06F,IA9TJ7jH,EAAO8pB,GAAG,WAAW,SAAU77C,GAC7B,IAAKgpC,EAAmBhpC,IAAMA,EAAEgrH,UAAY3hD,EAAW,CACrD,IAAKt3C,EAAOy4B,UAAUtyB,qBAAqB,MAAM1jC,OAC/C,OAEF,GAAI81D,EAAUsI,eAAoD,IAAnCtI,EAAUC,SAASnG,YAAmB,CACnE,IAAInlC,EAAOqrC,EAAU2F,UACjBnuC,EAAkB7C,EAAK6C,gBAC3B,GAAsB,OAAlB7C,EAAKiC,SAGP,OAFAhC,EAAI7c,OAAO4c,QACXjf,EAAEG,iBAGA2hB,GAAmBA,EAAgBZ,UAAuD,OAA3CY,EAAgBZ,SAAS7lB,gBAC1E6jB,EAAI7c,OAAOyf,GACX9hB,EAAEG,iBAEN,CACF,CACF,IA6SEm4E,IA/QEm9D,EAA4B,WAC9B,IAAImC,EAAW14H,EAAIk/B,WAAWkM,EAAUwkB,WAAWhoE,WAAU,IAC7D,OAAO,WACL,IAAI9R,EAASs1D,EAAUwkB,WACnB95E,IAAW+8B,EAAOy4B,YACpBtrC,EAAIm/B,UAAUrpD,EAAQ,QAAS,MAC/B6a,EAAK+nI,GAAU,SAAUh8G,GACvB5mC,EAAO6iJ,iBAAiBj8G,EAAK90B,WAAU,GACzC,IAEJ,CACF,EACI4uI,EAA4B,WAC9B,OAAQprF,EAAUsI,eAAiB1zC,EAAIoiC,UAAUgJ,EAAUwkB,WAAY5vD,EAAI4hC,WAAa5hC,EAAIoiC,UAAUgJ,EAAUykB,SAAU7vD,EAAI4hC,QAChI,EACA/uB,EAAO8pB,GAAG,YAAY,SAAU77C,GAC9B,IAAI2lI,EACJ,IAAK38F,EAAmBhpC,KAAqB,IAAdA,EAAEgrH,SAA+B,KAAdhrH,EAAEgrH,UAAmB0qB,IAKrE,OAJA/P,EAAkB8P,IAClB1jH,EAAO6zC,SAASqJ,YAAY,UAAU,EAAO,MAC7C02D,IACA3lI,EAAEG,kBACK,CAEX,IACA+e,EAAIpP,KAAKiiB,EAAO6zC,SAAU,OAAO,SAAU5lE,GACzC,IAAI2lI,GACC38F,EAAmBhpC,IAAM01I,MAC5B/P,EAAkB8P,IAClB/jH,GAAMI,iBAAiBC,GAAQ,WAC7B4zG,GACF,IAEJ,IAgPE8Q,IA3KF1kH,EAAO8pB,GAAG,0BAA0B,SAAU77C,GAC7B,eAAXA,EAAE7B,MAAuC,kBAAd6B,EAAEisH,SAfjCp8G,EAAKqP,EAAI64B,OAAO,MAAM,SAAU94B,GAC9B,IAAI5hB,EAAa4hB,EAAK5hB,WAClB0gB,EAAOmB,EAAI8+B,UACf,GAAI3gD,EAAWilB,YAAcrD,EAAM,CACjC,KAAO5hB,IAAe6hB,EAAI4hC,QAAQzjD,IAAa,CAC7C,GAAIA,EAAWA,WAAWilB,YAAcjlB,GAAcA,IAAe0gB,EACnE,OAEF1gB,EAAaA,EAAWA,UAC1B,CACA6hB,EAAI7lB,IAAIgE,EAAY,KAAM,CAAE,iBAAkB,GAChD,CACF,GAMF,IAyKEs5I,IACAI,IACAP,MAQG,CACLU,uBAAwBA,EACxBx0F,SA1Ea,WACb,IAAKkzF,GAAW7jH,EAAOC,QACrB,OAAO,EAET,IAAIsyC,EAAMvyC,EAAOu4B,UAAUsZ,SAC3B,OAAQU,IAAQA,EAAIjB,YAAiC,IAAnBiB,EAAIjB,UACxC,EAsEF,CAgPkBy0E,CAAO/lH,GAn5eJ,SAAUA,GACtBA,EAAO+Z,KAAK,aACrB,CAk5eEisG,CAAehmH,GACf,IAAIimH,EAhviBkB,SAAUjmH,GAChC,OAAOA,EAAO6hC,SAAS,iBAAkBzN,GAAKe,QAAU,WAAQ7yD,EAClE,CA8uiBuB4jJ,CAAkBlmH,QAChB19B,IAAnB2jJ,IACF7+I,EAAK03C,IAAMmnG,GAET1lH,EAAS4lH,SACXnmH,EAAO8pB,GAAG,oBAAoB,SAAU77C,GACtCid,GAAMpN,KAAKyiB,EAAS4lH,SAAS,SAAUl2G,GACrChiC,EAAEk7C,QAAUl7C,EAAEk7C,QAAQj5C,QAAQ+/B,GAAS,SAAUtrB,GAC/C,MAAO,wBAAuB6gI,OAAO7gI,GAAO,QAC9C,GACF,GACF,IAEFqb,EAAO8pB,GAAG,cAAc,WACtB9pB,EAAOsjE,UAAUtjE,EAAOy4B,UAC1B,IACAz4B,EAAO8pB,GAAG,mCAAmC,SAAU77C,GACrD+xB,EAAOs9C,UAAuB,qBAAXrvE,EAAE7B,IACvB,GACF,EAUIg6I,GAA+B,SAAUpmH,IACpB,IAAnBA,EAAOC,UAVY,SAAUD,GAC5B+7E,GAAM/7E,IACTA,EAAOY,KAAK,CACVqzB,SAAS,EACTtgD,OAAQ,SAGZqsB,EAAOqmH,aAAermH,EAAOuxD,WAAW,CAAE59E,OAAQ,OACpD,CAGI2yI,CAAmBtmH,GACnB+hH,GAAW/hH,GAEf,EACIumH,GAAkB,SAAUvmH,EAAQwmH,GACtC,IAAIjmH,EAAWP,EAAOO,SAClB27C,EAAYl8C,EAAO4lD,aACnB30D,EAAM+O,EAAO6zC,SACZtzC,EAASkQ,SACZzQ,EAAO4lD,aAAa/zE,MAAMmD,WAAagrB,EAAOymH,eAE3CD,GAAcxmH,EAAOyQ,SACxBxf,EAAIqwF,OACJrwF,EAAI2kF,MAAM51E,EAAO0mH,YACjBz1H,EAAI29F,SAEF5uF,EAAOyQ,SACTywG,GAAMz3F,SAASyyB,EAAW,oBAC1Bl8C,EAAOwqB,gBAAkBv5B,EAAM/sB,SAC/B87B,EAAOyqB,cAAgB1mD,OACvBi8B,EAAO2mH,YAAczqE,EACrBl8C,EAAO4mH,qBAAuB1qE,GAEhC,IAAI90E,EAAO44B,EAAOy4B,UAClBrxD,EAAKoH,UAAW,EAChBwxB,EAAO2nB,WAAapnB,EAASonB,SACxB3nB,EAAO2nB,WACN3nB,EAAOyQ,QAAqD,WAA3CywG,GAAM7zF,SAASjmD,EAAM,YAAY,KACpDA,EAAKyK,MAAMy4D,SAAW,YAExBljE,EAAK+iB,gBAAkB6V,EAAO6hC,SAAS,0BAA0B,IAEnEz6D,EAAKoH,UAAW,EAChBwxB,EAAO8hH,aAv+LU,SAAU9hH,GAC3B,IACI6mH,EAAUC,EA1RV5rH,EAgCA6rH,EAsBAC,EAGA5sH,EAgOA0nF,GAzRA5mF,EAAQ,GAgCR6rH,EAAa,SAAUnlI,GACzB,IAAKA,EAAE8gG,OAAS9gG,EAAE4gG,OAChB,MAAM,IAAIpuG,MAAM,wFAElB,IAnCwB6yI,EAmCpBpjJ,EAAK+d,EAAE/d,IAAMivH,GAAK,UAClBnwH,EAAOif,EAAEjf,MAAQkB,EACjB6+G,EAAO9gG,EAAE8gG,KACb,MAAO,CACL7+G,GAAIuY,EAASvY,GACblB,KAAMyZ,EAASzZ,GACfwxH,SAAU/3G,EAASwF,EAAEuyG,UAAYxxH,EAAO,KAzClBskJ,EAyCkCvkC,EAAKt2G,KAxCnD,CACV,aAAc,MACd,YAAa,MACb,YAAa,MACb,YAAa,MACb,aAAc,OACd,aAAc,OACd,gBAAiB,MACjB,aAAc,OACd,YAAa,MACb,aAAc,QAEH66I,EAAK39I,gBAAkB,QA6BlCo5G,KAAMtmG,EAASsmG,GACfF,OAAQpmG,EAASwF,EAAE4gG,QACnBiF,QAASrrG,EAASwF,EAAE6lG,SAAW99F,IAAIC,gBAAgB84F,IACnDt5B,IAAKhtE,EAASwF,EAAEwnE,KAEpB,EAuCO,CACLr9D,OAxEW,SAAUnK,EAAG8gG,EAAMF,EAAQ7/G,EAAMwxH,GAC5C,GAAIn5G,EAAW4G,GAEb,OAAOmlI,EAAW,CAChBljJ,GAFO+d,EAGPjf,KAAMA,EACNwxH,SAAUA,EACVzR,KAAMA,EACNF,OAAQA,IAEL,GAAIvnG,EAAS2G,GAClB,OAAOmlI,EAAWnlI,GAElB,MAAM,IAAIxN,MAAM,qBAEpB,EA0DE9M,IAxCQ,SAAUg7G,GACbloF,EAAIkoF,EAASz+G,OAChBq3B,EAAMxwB,KAAK43G,EAEf,EAqCEloF,IAjCEA,EAAM,SAAUv2B,GAClB,OAAOmjJ,GAAU,SAAUE,GACzB,OAAOA,EAAerjJ,OAASA,CACjC,GACF,EA8BE8+G,SA7Ba,SAAU8E,GACvB,OAAOu/B,GAAU,SAAU1kC,GACzB,OAAOA,EAASmF,YAAcA,CAChC,GACF,EA0BEhF,UAzBc,SAAUD,EAAQp2G,GAChC,OAAO46I,GAAU,SAAU1kC,GACzB,OAAOA,EAASE,WAAaA,GAAUF,EAASI,OAAOt2G,OAASA,CAClE,GACF,EAsBE46I,UAvCEA,EAAY,SAAUrkI,GACxB,OAAO7C,EAAOob,EAAOvY,GAAWhF,gBAClC,EAsCEwpI,YAtBgB,SAAU1/B,GAC1BvsF,EAAQ1b,EAAS0b,GAAO,SAAUonF,GAChC,OAAIA,EAASmF,YAAcA,IACzB99F,IAAIy9H,gBAAgB9kC,EAASmF,YACtB,EAGX,GACF,EAeEvtE,QAdY,WACZ/6B,EAAO+b,GAAO,SAAUgsH,GACtBv9H,IAAIy9H,gBAAgBF,EAAez/B,UACrC,IACAvsF,EAAQ,EACV,IAqMI2mF,EAAeuQ,KACfi1B,EAAa,GACbC,EAxBoB,SAAUtnH,GAClC,IAAIunH,EAAmBvzF,GAAK,MAgB5B,OAfAh0B,EAAO8pB,GAAG,kBAAkB,SAAU77C,GACpCs5I,EAAiBpkH,IAAItgB,GAAS,CAAC,EAAG5U,EAAEspG,OACtC,IAaO,CAAEiwC,cAZW,WAClB,IAAIttH,EAAO8F,EAAOg2C,YAAY97C,KAC9BzZ,GAAOyZ,GAAM3wB,QAAO,SAAUguG,GAC5B,OAAQG,GAAO6vC,EAAiBntH,MAAOm9E,EACzC,IAAGz5F,MAAK,SAAUy5F,GAChBv3E,EAAO44E,UAAS,GAChB54E,EAAO+Z,KAAK,SAAU,CACpBw9D,MAAOA,EACPiB,UAAWj4F,GAAM2Z,EAAMA,EAAKz3B,OAAS,GAAGib,aAE5C,GACF,EAEF,CAMsB+pI,CAAoBznH,GACpC0nH,EAAa,SAAUhiJ,GACzB,OAAO,SAAU43B,GACf,OAAI0C,EAAOu4B,UACF7yD,EAAS43B,GAEX,EACT,CACF,EAIIqqH,EAAgB,SAAUx+F,EAAS1kC,EAAQvU,GAC7C,IAAIhH,EAAQ,EACZ,IAEiB,KADfA,EAAQigD,EAAQ3/C,QAAQib,EAAQvb,MAE9BigD,EAAUA,EAAQ+M,UAAU,EAAGhtD,GAASgH,EAAUi5C,EAAQ5+C,OAAOrB,EAAQub,EAAOhiB,QAChFyG,GAASgH,EAAQzN,OAASgiB,EAAOhiB,OAAS,UAE1B,IAAXyG,GACT,OAAOigD,CACT,EACIy+F,EAAkB,SAAUz+F,EAAS0+F,EAAWC,GAClD,IAAIC,EAAoB,QAAUD,EAAiB,KAAOA,IAAmBh+H,GAAIM,eAAiB,4BAA8B,IAGhI,OAFA++B,EAAUw+F,EAAcx+F,EAAS,QAAU0+F,EAAY,IAAKE,GAClDJ,EAAcx+F,EAAS,iBAAmB0+F,EAAY,IAAK,iBAAmBC,EAAiB,IAE3G,EACIE,EAAwB,SAAUH,EAAWC,GAC/C3oI,EAAO6gB,EAAOg2C,YAAY97C,MAAM,SAAUq9E,GACrB,eAAfA,EAAMnrG,KACRmrG,EAAM1B,UAAY52F,EAAMs4F,EAAM1B,WAAW,SAAUz8C,GACjD,OAAOwuF,EAAgBxuF,EAAUyuF,EAAWC,EAC9C,IAEAvwC,EAAMpuD,QAAUy+F,EAAgBrwC,EAAMpuD,QAAS0+F,EAAWC,EAE9D,GACF,EASIG,EAAe,SAAUviJ,GAI3B,OAHKmhJ,IACHA,EAAW9xB,GAAe/0F,EAAQ6hF,IAE7BqmC,IAAgBtvH,KAAK8uH,GAAW,SAAUS,GAC/C,IAAI5zB,EAAYt1G,EAAMkpI,GAAY,SAAU/lC,GAC1C,OAAOA,EAAUE,QACnB,IACA,OAAOukC,EAAStzB,OAAOgB,EAAWC,GAAiBx0F,IAASpH,KAAK8uH,GAAW,SAAUpqH,GACpF,IAAI8qH,EAAiB,GACjBC,EAAiBppI,EAAMqe,GAAQ,SAAUgrH,EAAYp/I,GACvD,IAAIo5G,EAAW6lC,EAAWj/I,GAAOo5G,SAC7BD,EAAQ8lC,EAAWj/I,GAAOm5G,MAa9B,OAZIimC,EAAWjnH,QAl8WG,SAAUrB,GACpC,OAAOA,EAAO6hC,SAAS,4BAA4B,EAAM,UAC3D,CAg8WmC0mF,CAAsBvoH,IAC7C8hF,EAAUqlC,YAAY9kC,EAAM5pG,KACxBsjG,GAAM/7E,IAvBQ,SAAUqiF,EAAOkQ,GAC3C,IAhC+BvlG,EAgC3BvU,EAAMunB,EAAOwoH,WAAWj2B,EAAW,OACvCy1B,EAAsB3lC,EAAM5pG,IAAK85G,GACjCvyF,EAAOgsB,EAAEq2D,GAAOx4E,KAAK,CACnB,IAAOu4B,GAAoBpiC,IAnCEhT,EAmCyBulG,EAlCjDvlG,IAA6B,IAAtBA,EAAIxjB,QAAQ,KAAc,IAAM,MAAO,IAAIo4B,MAAOq3B,WAkCKs5D,EACnE,eAAgB95G,GAEpB,CAiBYgwI,CAAsBpmC,EAAOimC,EAAWt7H,MAEjCs7H,EAAWzsH,QAChBysH,EAAWzsH,MAAM91B,QAAQuK,SAC3B03I,EAAsB3lC,EAAMv+G,aAAa,OAAQgmB,GAAIM,gBACrDg+H,EAAe19I,KAAK23G,IArehB,SAAUriF,EAAQlE,GAClCo1F,GAAalxF,EAAQo0B,GAAKjiC,UAAU,CAClC,8BACA2J,IAEJ,CAkeY4sH,CAAY1oH,EAAQsoH,EAAWzsH,MAAMC,UAEhC,CACLhmB,QAASusG,EACThhF,OAAQinH,EAAWjnH,OACnBsnH,UAAWL,EAAWt7H,IACtBs1F,SAAUA,EAEd,IAmBA,OAlBI+lC,EAAe5lJ,OAAS,GAC1B6kJ,EAAcE,gBAEZY,EAAe3lJ,OAAS,IACtBs5G,GAAM/7E,IAGRA,EAAOg2C,YAAYC,UAAS,WAC1B92D,EAAOipI,GAAgB,SAAUtyI,GAC/BkqB,EAAO7S,IAAI7c,OAAOwF,GAClBgsG,EAAUqlC,YAAYrxI,EAAQ2C,IAChC,GACF,KAGA/S,GACFA,EAAS2iJ,GAEJA,CACT,IACF,IACF,EACIO,EAAmB,SAAUljJ,GAC/B,GAAIy8D,GAA0BniC,GAC5B,OAAOioH,EAAaviJ,EAExB,EACImjJ,EAAsB,SAAUC,GAClC,IAES,IAFL7qI,GAAOopI,GAAY,SAAU99I,GAC7B,OAAOA,EAAOu/I,EAChB,IACA,OAAO,EAET,GAAoD,IAAhDA,EAAOhlJ,aAAa,OAAO0F,QAAQ,SAAgB,CACrD,IAAIu/I,EAhgXmB,SAAU/oH,GACrC,OAAOA,EAAO6hC,SAAS,wBAAyBhlD,EAAQ,WAC1D,CA8/W0BmsI,CAAuBhpH,GAC3C,OAAO+oH,EAAcD,EACvB,CACA,OAAO,CACT,EAIIZ,EAAgB,WAIlB,OAHKpB,IACHA,EAAellC,GAAaC,EAAcC,IAErCglC,EAAalwE,QAAQ52C,EAAOy4B,UAAWowF,GAAqBjwH,KAAK8uH,GAAW,SAAUpqH,GAe3F,OAdAA,EAAS9d,EAAS8d,GAAQ,SAAU2rH,GAClC,MAA0B,iBAAfA,IACT/3B,GAAalxF,EAAQipH,IACd,EAGX,IACIltC,GAAM/7E,IACR7gB,EAAOme,GAAQ,SAAU2rH,GACvBjB,EAAsBiB,EAAW5mC,MAAM5pG,IAAKwwI,EAAW3mC,SAASmF,WAChEwhC,EAAW5mC,MAAM5pG,IAAMwwI,EAAW3mC,SAASmF,UAC3CwhC,EAAW5mC,MAAM7qG,gBAAgB,eACnC,IAEK8lB,CACT,IACF,EAMI4rH,EAAkB,SAAU//F,GAC9B,OAAOA,EAAQj5C,QAAQ,uBAAuB,SAAUoc,EAAOm7F,GAC7D,IAAI8K,EAAY1Q,EAAa4Q,aAAahL,GAC1C,GAAI8K,EACF,MAAO,QAAUA,EAAY,IAE/B,IAAIjQ,EAAWR,EAAUa,SAAS8E,GAMlC,OALKnF,IACHA,EAAW3iG,EAAMqgB,EAAOwlD,cAAcprD,OAAO,SAAUkD,EAAQ0C,GAC7D,OAAO1C,GAAU0C,EAAO8hH,cAAgB9hH,EAAO8hH,aAAahgC,UAAUa,SAAS8E,EACjF,GAAG,OAEDnF,EAEK,aADIA,EAASI,OACOt2G,KAAO,WAAak2G,EAASE,SAAW,IAE9Dl2F,CACT,GACF,EA+BA,OA9BA0T,EAAO8pB,GAAG,cAAc,WAClBqY,GAA0BniC,GAC5B4oH,IAEAV,GAEJ,IACAloH,EAAO8pB,GAAG,kBAAkB,SAAU77C,GACpCA,EAAEk7C,QAAU+/F,EAAgBj7I,EAAEk7C,QAChC,IACAnpB,EAAO8pB,GAAG,cAAc,SAAU77C,GAC5BA,EAAEk7I,aAA4B,QAAbl7I,EAAE0F,QAAiC,SAAb1F,EAAE0F,SAG7C1F,EAAEk7C,QAAU+/F,EAAgBj7I,EAAEk7C,SAChC,IACAnpB,EAAO8pB,GAAG,cAAc,WACtB9pB,EAAO2hE,OAAOhtB,cAAc,OAAO,SAAUqtC,GAC3C7iG,EAAO6iG,GAAQ,SAAUnlC,GACvB,IAAIpkE,EAAMokE,EAAIhzC,KAAK,OACnB,IAAIi4E,EAAUa,SAASlqG,GAAvB,CAGA,IAAI85G,EAAY1Q,EAAa4Q,aAAah6G,GACtC85G,GACF11C,EAAIhzC,KAAK,MAAO0oF,EAHlB,CAKF,GACF,GACF,IACO,CACLzQ,UAAWA,EACXsnC,UAjFc,SAAU7/I,GACxB89I,EAAW38I,KAAKnB,EAClB,EAgFE0+I,aAAcA,EACdW,iBAAkBA,EAClBV,cAAeA,EACfhuG,QA5DY,WACZ4nE,EAAU5nE,UACV2nE,EAAa3nE,UACb4sG,EAAeD,EAAW,IAC5B,EA0DF,CAoxLwBwC,CAAarpH,GACnCA,EAAOwL,OAASK,GAAOw1G,GAAiBrhH,IACxCA,EAAO7S,IAAMs+B,GAASx6B,EAAK,CACzByhC,aAAa,EACbve,cAAenU,EAAOwoH,WACtBn0G,oBAAqBrU,EACrBspH,WAAY/oH,EAASgpH,uBACrBz5F,eAAe,EACfnD,aAAc3sB,EAAOyQ,OAASzQ,EAAOy4B,UAAY,KACjD9K,QAAS,WACP,OAAO3tB,EAAOyQ,MAChB,EACAjF,OAAQxL,EAAOwL,OACfvJ,eAAgBygC,GAAwB1iC,GACxCkC,eAAgBygC,GAAkB3iC,GAClCwsB,YAAa,SAAUv+C,GACrB+xB,EAAO+Z,KAAK,YAAa9rC,EAC3B,IAEF+xB,EAAO2hE,OA9OU,SAAU3hE,GAC3B,IAAI2hE,EAASkiB,GAAUg+B,GAAiB7hH,GAASA,EAAOwL,QA2DxD,OA1DAm2D,EAAOwiB,mBAAmB,2BAA2B,SAAUhtF,EAAOx0B,GAIpE,IAHA,IAAsBuqB,EAAMxmB,EAAxBlE,EAAI20B,EAAM10B,OACV0qB,EAAM6S,EAAO7S,IACb86F,EAAe,YAActlH,EAC1BH,KAGL,IADAkE,GADAwmB,EAAOiK,EAAM30B,IACAqnC,KAAKlnC,MACJuqB,EAAK2c,KAAKo+E,GAAe,CACrC,GAA+B,IAA3BvhH,EAAM8C,QAAQ,UAA6C,IAA3B9C,EAAM8C,QAAQ,SAChD,SAEW,UAAT7G,IACF+D,EAAQymB,EAAIkjC,eAAeljC,EAAIgjC,WAAWzpD,GAAQwmB,EAAKvqB,OAC5CF,SACTiE,EAAQ,MAEVwmB,EAAK2c,KAAKo+E,EAAcvhH,GACxBwmB,EAAK2c,KAAKlnC,EAAM+D,IACE,aAAT/D,GACTuqB,EAAK2c,KAAKo+E,EAAcvhH,GACxBwmB,EAAK2c,KAAKlnC,EAAM,OAEhBuqB,EAAK2c,KAAKo+E,EAAcjoF,EAAOwoH,WAAW9hJ,EAAO/D,EAAMuqB,EAAKvqB,MAEhE,CAEJ,IACAg/F,EAAOhtB,cAAc,UAAU,SAAUx9C,GAEvC,IADA,IAAI30B,EAAI20B,EAAM10B,OACPD,KAAK,CACV,IAAI0qB,EAAOiK,EAAM30B,GACb4J,EAAO8gB,EAAK2c,KAAK,SAAW,UACH,IAAzBz9B,EAAK5C,QAAQ,SACf0jB,EAAK2c,KAAK,OAAQ,OAASz9B,EAE/B,CACF,IACI4zB,EAAOO,SAASgvD,gBAClBoS,EAAOhtB,cAAc,UAAU,SAAUx9C,GAEvC,IADA,IAAI30B,EAAI20B,EAAM10B,OACPD,KAAK,CACV,IAAI0qB,EAAOiK,EAAM30B,GACjB0qB,EAAK9gB,KAAO,EACZ8gB,EAAKvqB,KAAO,WACZuqB,EAAKxmB,MAAQ,UAAYs5B,EAAO7S,IAAIunB,OAAOxnB,EAAKxmB,OAAS,IAC3D,CACF,IAEFi7F,EAAOhtB,cAAc,2BAA2B,SAAUx9C,GAGxD,IAFA,IAAI30B,EAAI20B,EAAM10B,OACVo9F,EAAmB7/D,EAAOwL,OAAOsH,sBAC9BtwC,KAAK,CACV,IAAI0qB,EAAOiK,EAAM30B,GACb0qB,EAAKukC,QAAQouC,IAAkD,IAA7B3yE,EAAKspD,OAAO,MAAM/zE,SACtDyqB,EAAKuE,OAAO,IAAI41D,GAAQ,KAAM,IAAIK,YAAa,EAEnD,CACF,IACOia,CACT,CAiLkB6nD,CAAaxpH,GAC7BA,EAAO00C,WAAa60C,GA5PK,SAAUvpF,GACnC,IAAIO,EAAWP,EAAOO,SACtB,OAAO1d,GAASA,GAASA,GAAS,CAAC,EAAGg/H,GAAiB7hH,IAAUqhH,GAAiBrhH,IAAUohH,GAAgB,CAC1GjtG,cAAe5T,EAAS4T,cACxBE,oBAAqB9T,EAAS8T,oBAC9Bg9C,eAAgB9wD,EAAS8wD,eACzBpnD,SAAU1J,EAAS0J,SACnBknD,gBAAiB5wD,EAAS4wD,gBAC1BL,OAAQvwD,EAASuwD,OACjBI,aAAc3wD,EAAS2wD,aACvBF,cAAezwD,EAASywD,gBAE5B,CAgPoCy4D,CAAqBzpH,GAASA,GAChEA,EAAOu4B,UAAYykD,GAAgBh9E,EAAO7S,IAAK6S,EAAO8kH,SAAU9kH,EAAO00C,WAAY10C,GACnFA,EAAO0pH,UAAYp1E,GAAUt0C,GAC7BA,EAAOqlE,UAAYmxB,GAAUx2F,GAC7BA,EAAOg2C,YAAc8jD,GAAY95F,GACjCA,EAAO2pH,sBAAwB,IAAI7P,GAAW95G,GAC9CA,EAAOsiE,oBAAsBs7C,GAAmB59G,GAnzGpC,SAAUA,GACtB,IAAI4pH,EAAYljJ,KACZmjJ,EAAiB71F,IAAK,GACtB81F,EAAoB7mG,IAAK,SAAUh1C,GACrC+xB,EAAO+Z,KAAK,YAAal3B,GAASA,GAAS,CAAC,EAAG5U,GAAI,CAAE7B,KAAM,eAC3Dy9I,EAAe1mH,KAAI,EACrB,GAlBoB,KAmBpBnD,EAAO8pB,GAAG,cAAc,SAAU77C,GAChC0+H,GAAS1+H,GAAG6P,MAAK,SAAUq8D,GACzB2vE,EAAkB3vG,SAClB,IAAIjgB,EAAO,CACThhB,EAAGihE,EAAMniC,QACTp+B,EAAGugE,EAAM9hC,QACTp1C,OAAQgL,EAAEhL,QAEZ6mJ,EAAkB1pH,SAASnyB,GAC3B47I,EAAe1mH,KAAI,GACnBymH,EAAUzmH,IAAIjJ,EAChB,GACF,IAAG,GACH8F,EAAO8pB,GAAG,aAAa,SAAU77C,GAC/B67I,EAAkB3vG,SAClBwyF,GAAS1+H,GAAG6P,MAAK,SAAUq8D,GACzByvE,EAAU9/F,IAAG,SAAU5vB,IA5BX,SAAUigD,EAAOjgD,GACjC,IAAI6vH,EAAQj2H,KAAK6lD,IAAIQ,EAAMniC,QAAU9d,EAAKhhB,GACtC8wI,EAAQl2H,KAAK6lD,IAAIQ,EAAM9hC,QAAUne,EAAKtgB,GAC1C,OAAOmwI,EAXc,GAWcC,EAXd,CAYvB,EAyBYC,CAAY9vE,EAAOjgD,KACrB0vH,EAAUvyF,QACVwyF,EAAe1mH,KAAI,GACnBnD,EAAO+Z,KAAK,mBAEhB,GACF,GACF,IAAG,GACH/Z,EAAO8pB,GAAG,wBAAwB,SAAU77C,GAC1C67I,EAAkB3vG,SACH,gBAAXlsC,EAAE7B,MAGNw9I,EAAUxvH,MAAM7wB,QAAO,SAAU2wB,GAC/B,OAAOA,EAAKj3B,OAAOinJ,YAAYj8I,EAAEhL,OACnC,IAAG6a,MAAK,WACF+rI,EAAezvH,MACjBnsB,EAAEG,iBAEF4xB,EAAO+Z,KAAK,MAAOl3B,GAASA,GAAS,CAAC,EAAG5U,GAAI,CAAE7B,KAAM,QAEzD,GACF,IAAG,EACL,CAqwGE+9I,CAAQnqH,GA5/CI,SAAUA,IAtBG,SAAUA,GACnCA,EAAO8pB,GAAG,SAAS,SAAU77C,GACvB+xB,EAAO7S,IAAIoiC,UAAUthD,EAAEhL,OAAQ,YACjCgL,EAAEG,gBAEN,GACF,CAiBEg8I,CAAqBpqH,GAhBH,SAAUA,GAC5BA,EAAO2hE,OAAOhtB,cAAc,WAAW,SAAUlnB,GAC/CtuC,EAAOsuC,GAAM,SAAUg0C,GACrBA,EAAQ53D,KAAK,gBAAiB43D,EAAQ53D,KAAK,SAC3C43D,EAAQ53D,KAAK,OAAQ,OACvB,GACF,IACA7J,EAAO00C,WAAWC,cAAc,WAAW,SAAUlnB,GACnDtuC,EAAOsuC,GAAM,SAAUg0C,GACrB,IAAI6f,EAAO7f,EAAQ53D,KAAK,iBACxB43D,EAAQ53D,KAAK,OAAQ7uB,EAAWsmG,GAAQA,EAAO,MAC/C7f,EAAQ53D,KAAK,gBAAiB,KAChC,GACF,GACF,CAGEwgH,CAAcrqH,EAChB,CA0/CEsqH,CAAQtqH,GACH+7E,GAAM/7E,IAh+CC,SAAUA,GACtBA,EAAO8pB,GAAG,SAAS,SAAU77C,GACvBA,EAAEs8I,QAAU,GAxBK,SAAUvqH,GACjC,IAAIs4B,EAAMt4B,EAAOu4B,UAAUC,SACvBoR,EAAWnM,GAAcU,eAAe7F,GACxCmU,EAAShP,GAAcW,aAAa9F,GACxC,GAAImF,GAAciB,kBAAkBkL,GAAW,CAC7C,IAAIh/D,EAAYg/D,EAASh/D,YACrB0vI,GAAgB1vI,IAClBsgE,GAAgBtgE,GAAWkT,MAAK,SAAUhN,GACxC,OAAOwnD,EAAIvG,SAASjhD,EAAIlG,YAAakG,EAAI20B,SAC3C,GAEJ,CACIg4B,GAAciB,kBAAkB+N,KAC9B7hE,EAAYg/D,EAASh/D,YACrB0vI,GAAgB1vI,IAClBugE,GAAevgE,GAAWkT,MAAK,SAAUhN,GACvC,OAAOwnD,EAAItG,OAAOlhD,EAAIlG,YAAakG,EAAI20B,SACzC,KAGJzF,EAAOu4B,UAAU2U,OAAOwS,GAAUpnB,GACpC,CAIMkyF,CAAmBxqH,EAEvB,GACF,CA29CIyqH,CAAQzqH,GAEV,IAAIylC,EAtnDQ,SAAUzlC,GACtB,OAAK+7E,GAAM/7E,GAGFg0B,GAAK,MAFL2kF,GAA0B34G,EAIrC,CAgnDc0qH,CAAQ1qH,IA/0GR,SAAUA,EAAQylC,GAC9BzlC,EAAO2qH,WAAW,UAAU,YAlDV,SAAU3qH,EAAQylC,GAChCgnE,GAAgBzsG,IAET2gG,GAAkB3gG,GAAQ,IAE1Bm/F,GAAkBn/F,GAAQ,IAE1B+pG,GAAkB/pG,EAAQylC,GAAO,IAEjCm3D,GAAkB58F,GAAQ,IAE1Bm/D,GAAkBn/D,IAElB6gG,GAAkB7gG,GAAQ,IAE1BmrG,GAAkBnrG,GAAQ,IAE1Bi+F,GAAkBj+F,IAElBirG,GAAkBjrG,GAAQ,KAGnC0sG,GAAc1sG,EAAQ,UACtBu7F,GAAcv7F,GAElB,CA0BI4qH,CAAc5qH,EAAQylC,EACxB,IACAzlC,EAAO2qH,WAAW,iBAAiB,YA3BV,SAAU3qH,EAAQylC,GACvCk7D,GAAkB3gG,GAAQ,IAEnBm/F,GAAkBn/F,GAAQ,IAE1B+pG,GAAkB/pG,EAAQylC,GAAO,IAEjCm3D,GAAkB58F,GAAQ,IAE1Bm/D,GAAkBn/D,IAElB6gG,GAAkB7gG,GAAQ,IAE1BmrG,GAAkBnrG,GAAQ,IAE1Bi+F,GAAkBj+F,IAElBirG,GAAkBjrG,GAAQ,IAGnC0sG,GAAc1sG,EAAQ,gBAE1B,CAMI6qH,CAAqB7qH,EAAQylC,EAC/B,GACF,EAy0GEqlF,CAAQ9qH,EAAQylC,GA7rGJ,SAAUzlC,GAClBgiC,GAAmBhiC,IACrBA,EAAO8pB,GAAG,aAAcvtC,EAAM+pG,GAAetmF,GAEjD,CA0rGE+qH,CAAQ/qH,GA79JI,SAAUA,GACtB,IAAI7S,EAAM6S,EAAO7S,IACbi4C,EAAYpD,GAAmBhiC,GAC/BzqB,EAv2Ye,SAAUyqB,GAC7B,OAAOA,EAAO6hC,SAAS,cAAeF,GAAMxV,UAAUnsB,EAAO4lD,aAAc,eAAgB,SAC7F,CAq2YoBolE,CAAehrH,GAC7BirH,EAAoB,SAAUh9I,EAAGgmD,GACnC,IA/B2B,SAAUhmD,GACvC,GAAIysH,GAAgBzsH,GAAI,CACtB,IAAIgrH,EAAUhrH,EAAEgrH,QAChB,OAAQ0B,GAAc1sH,KAAOopE,GAAGmB,eAAevqE,IAAMA,EAAEsqE,QAAU0gD,GAAW,KAAOA,GAAW,KAAOl6G,EAAWy7G,GAAmBvB,GACrI,CACE,OAAO,CAEX,CAwBQiyB,CAAyBj9I,GAA7B,CAGA,IAAI7G,EAAO44B,EAAOy4B,UACd0yF,GA3BoB,SAAUl9I,GACpC,OAAOysH,GAAgBzsH,MAAQ0sH,GAAc1sH,IAAiB,UAAXA,EAAE7B,MAAkC,MAAd6B,EAAEgrH,QAC7E,CAyB0BmyB,CAAsBn9I,IAxB1B,SAAUkf,EAAK0/B,EAASm/C,GAC5C,GAAInkE,GAAUza,GAAqBy/B,IAAU,GAAQ,CACnD,IAAIw+F,EAA6C,KAApBr/C,EACzB90E,EAAe21B,EAAQ0tB,kBAC3B,OAAKrjD,IAEM/J,EAAIkgC,SAASR,EAAQ0tB,kBAAmB,kBAAmBptD,EAAIkgC,SAASR,EAAQ0tB,kBAAmB,mBAGrG8wE,GAA0Bl+H,EAAI4hC,QAAQ73B,GAAgB80E,IAAoB90E,EAAa/H,SAAS7lB,cAE3G,CACE,OAAO,CAEX,CAU6DgiJ,CAAgBn+H,EAAK/lB,EAAMg+D,IAClB,KAAzCj4C,EAAIg/B,UAAU/kD,EAAMqzH,MAClB0wB,GAAmBl3F,KAC5C9mC,EAAIm/B,UAAUllD,EAAMqzH,GAAiB0wB,EAAkB51I,EAAc,MACrE4X,EAAIm/B,UAAUllD,EAAM,mBAAoB+jJ,EAAkB51I,EAAc,MAjiVlD,SAAUyqB,EAAQiB,GACrCjB,EAAO+Z,KAAK,oBAAqB,CAAE9Y,MAAOA,GACnD,CAgiVMsqH,CAAsBvrH,EAAQmrH,GAC9BnrH,EAAO8pB,GAAGqhG,EAAkB,UAAY,QAASF,GACjDjrH,EAAO+pB,IAAIohG,EAAkB,QAAU,UAAWF,GATpD,CAWF,EACI11I,GACFyqB,EAAO8pB,GAAG,QAAQ,SAAU77C,GAC1Bg9I,EAAkBh9I,GAAG,GACrB+xB,EAAO8pB,GAAG,gCAAiCmhG,GAC3CjrH,EAAO8pB,GAAG,SAAS,SAAU77C,GAC3B,OAAO0xB,GAAMI,iBAAiBC,GAAQ,WACpC,OAAOirH,EAAkBh9I,EAC3B,GACF,GACF,GAEJ,CAg8JEu9I,CAAQxrH,GACR,IAAIyrH,EA7zRQ,SAAUzrH,GACtB,IAAI0rH,EAAa1rH,EACjB,OAPgB,SAAUA,GAC1B,OAAOze,GAAMye,EAAOg8E,QAAS,OAAOj+F,MAAK,SAAU4tI,GACjD,OAAOntI,EAASC,KAAKktI,EAAUhL,MACjC,GACF,CAGSiL,CAAY5rH,GAAQ/iB,MAAK,WAE9B,OADAyuI,EAAWxvC,YAAc9D,GAAiBp4E,GACnCxhB,EAAS1B,MAClB,IAAG,SAAU6jI,GAEX,OADA+K,EAAWxvC,YApDO,WACpB,IAAI2vC,EAAMzvI,EAAS,MACfuV,EAAQvV,EAAS,IACrB,MAAO,CACL45D,YAAa,CACXqiC,aAAc38F,EACdpU,IAAKukJ,EACL/yC,KAAM+yC,EACN7yC,KAAM6yC,EACNx0F,MAAO37C,EACP41E,MAAO51E,EACP09F,QAASx8F,EACT08F,QAAS18F,EACTq5D,SAAU41E,EACVryC,OAAQ99F,EACRi+F,MAAOj+F,GAET2pF,UAAW,CACT/4E,MAAO1P,EACPm9F,SAAU39F,EAAS,IACnBqpF,UAAWrpF,OAAS9Z,GACpB43G,SAAUt9F,EACVutC,QAASx4B,EACT3V,MAAON,EACPpL,OAAQoL,EACR0+F,OAAQ1+F,EACR2+F,cAAej+F,EAAS,CAAEw9B,OAAQl+B,KAEpCskB,OAAQ,CACNuxD,WAAY5/D,EACZqnE,WAAYrnE,EACZ0pF,cAAe3/F,EACf4nF,UAAW5nF,GAEb68C,UAAW,CAAEg5B,WAAY5/D,GACzBkF,IAAK,CAAEilF,SAAU1/F,EAASoC,EAAS1B,SAEvC,CAe6BgvI,GAClBttI,EAASJ,MAAK,WACnB,OAAOuiI,IAAQ/nH,MAAK,SAAUmzH,GAE5B,OADAL,EAAWxvC,YAjIE,SAAU6vC,GAC7B,IAAIC,EAAc,SAAU79E,GAC1B,OAAOlzD,EAASkzD,GAAQA,EAAO,CAAC,CAClC,EACI6H,EAAc+1E,EAAU/1E,YAAaqvB,EAAY0mD,EAAU1mD,UAAWrlE,EAAS+rH,EAAU/rH,OAAQu4B,EAAYwzF,EAAUxzF,UAAW1hC,EAAMk1H,EAAUl1H,IACtJ,MAAO,CACLm/C,YAAa,CACXqiC,aAAcriC,EAAYqiC,aAC1B/wG,IAAK0uE,EAAY1uE,IACjBwxG,KAAM9iC,EAAY8iC,KAClBE,KAAMhjC,EAAYgjC,KAClB3hD,MAAO2e,EAAY3e,MACnBi6B,MAAOtb,EAAYsb,MACnB8nB,QAASpjC,EAAYojC,QACrBE,QAAStjC,EAAYsjC,QACrBrjC,SAAU,SAAUg2E,EAAcC,EAAQ1vI,GACxC,OAAOw5D,EAAYC,SAASz5D,EAC9B,EACAg9F,OAAQ,SAAU0yC,EAAQxmJ,GACxB,OAAOswE,EAAYwjC,OAAO9zG,EAC5B,EACAi0G,MAAO,SAAUsyC,EAAcE,EAAQvyC,EAAWC,GAChD,OAAO7jC,EAAY2jC,MAAMC,EAAWC,EACtC,GAEFxU,UAAW,CACT/4E,MAAO,SAAU3pB,EAAMwrE,EAAMi+E,EAAO5mD,GAClC,OAAOH,EAAU/4E,MAAM3pB,EAAMqpJ,EAAY79E,GAAOq3B,EAClD,EACAuU,SAAU1U,EAAU0U,SACpBtU,UAAWJ,EAAUI,UACrByU,SAAU,SAAUv3G,GAClB,OAAO0iG,EAAU6U,SAASv3G,EAC5B,EACAwnD,QAAS,SAAU71B,GACjB,OAAO+wE,EAAUl7C,QAAQ71B,EAC3B,EACAtY,MAAO,SAAUrZ,EAAMwrE,EAAMi+E,GAC3B,OAAO/mD,EAAUrpF,MAAMrZ,EAAMqpJ,EAAY79E,GAC3C,EACA79D,OAAQ,SAAU3N,EAAMwrE,EAAMi+E,EAAOC,GACnC,OAAOhnD,EAAU/0F,OAAO3N,EAAMqpJ,EAAY79E,GAC5C,EACAisC,OAAQ,SAAUz3G,EAAMwrE,EAAMi+E,GAC5B,OAAO/mD,EAAU+U,OAAOz3G,EAAMqpJ,EAAY79E,GAC5C,EACAksC,cAAe,SAAUiyC,EAAM/xC,EAAS70G,EAAU8/F,EAASr3B,GACzD,OAAOk3B,EAAUgV,cAAcE,EAAS70G,EAAU8/F,EAASr3B,EAC7D,GAEFnuC,OAAQ,CACNuxD,WAAY,SAAUz1E,EAAMywI,GAC1B,OAAOvsH,EAAOuxD,WAAWz1E,EAC3B,EACAk9E,WAAY,SAAU7vC,EAASrtC,GAC7B,OAAOkkB,EAAOg5D,WAAW7vC,EAASrtC,EACpC,EACAu/F,cAAe,SAAUlyD,EAASqjG,GAChC,OAAOxsH,EAAOq7E,cAAclyD,EAC9B,EACAm6C,UAAWtjE,EAAOsjE,WAEpB/qC,UAAW,CACTg5B,WAAY,SAAUg7D,EAASzwI,GAC7B,OAAOy8C,EAAUg5B,WAAWz1E,EAC9B,GAEF+a,IAAK,CACHilF,SAAU,WACR,OAAOt9F,EAASJ,KAAKyY,EAAI41H,cAC3B,GAGN,CAwDiCC,CAAeX,GACjCA,EAAUY,IAAIC,QACvB,GACF,GACF,GACF,CA+yRsBC,CAAQ7sH,GAC5BojH,GAAQpjH,GACRyrH,EAAcxuI,MAAK,WACjB0lI,GAAe3iH,GAAQpH,MAAK,WAC1B,OAAOwtH,GAA6BpmH,EACtC,GACF,IAAG,SAAU8sH,GACX9sH,EAAO+sH,kBAAiB,GACxBpK,GAAe3iH,GAAQpH,MAAK,WAC1Bk0H,IAAWl0H,MAAK,SAAUo0H,GACxBhtH,EAAO+sH,kBAAiB,GACxB3G,GAA6BpmH,EAC/B,IAAG,SAAUxG,GACXwG,EAAOixF,oBAAoB3P,KAAK,CAC9Bl1G,KAAM,QACNuhB,KAAMpU,OAAOigB,KAEf4sH,GAA6BpmH,EAC/B,GACF,GACF,GACF,EAEIitH,GAAQxhG,GAAS+E,IAwCjB08F,GAAe,SAAUltH,EAAQpe,GACnC,IA5BkC/d,EAAIyQ,EAAe64I,EACjDC,EA2BAC,EAAcrtH,EAAO7N,UAAU,kBAC/Bm7H,GA7B8BzpJ,EA6BJm8B,EAAOn8B,GA7BCyQ,EA6BG+4I,EAAazrI,EAAEwR,OA7BH+5H,EA/+iBlC,SAAUntH,GAC7B,OAAOA,EAAO6hC,SAAS,eAAgB,CAAC,EAC1C,CA0gjBkE0rF,CAAevtH,GA5B3EotH,EAAShgI,GAAqB,UAClCiJ,GAAS+2H,EAAQD,GACjB92H,GAAS+2H,EAAQ,CACfvpJ,GAAIA,EAAK,OACT2pJ,YAAa,IACbC,kBAAmB,OACnBn5I,MAAOA,IAETqjD,GAAMy1F,EAAQ,yBACPA,GAmBiFjgI,IACxFmgI,EAAIh1I,OAAS,WACXg1I,EAAIh1I,OAAS,KACb0nB,EAAO+Z,KAAK,OACd,EACA,IAAI2zG,EA9CY,SAAU1tH,EAAQstH,GAClC,GAAIppJ,SAASypJ,SAAW5pJ,OAAO+/C,SAAS8pG,UAAY9jI,GAAI5B,QAAQ3B,OAAQ,CACtE,IAAIsnI,EAAW/6B,GAAK,OACpB9yF,EAAO6tH,GAAY,WACjBtH,GAAgBvmH,EAClB,EACA,IAAI8tH,EAAiB,2DAAkE5pJ,SAASypJ,OAA3E,yCAAoI3tH,EAAOn8B,GAA3I,wDAA+MgqJ,EAAW,cAE/O,OADAZ,GAAM3gG,UAAUghG,EAAK,MAAOQ,IACrB,CACT,CACA,OAAO,CACT,CAmCwBC,CAAY/tH,EAAQstH,GAK1C,OAJAttH,EAAO4mH,qBAAuBhlI,EAAEosI,gBAChChuH,EAAO0mD,cAAgB4mE,EACvBttH,EAAO0mH,WAzBW,SAAU1mH,GAC5B,IAAI0mH,EAz/iBW,SAAU1mH,GACzB,OAAOA,EAAO6hC,SAAS,UAAW,kBACpC,CAu/iBmBosF,CAAWjuH,GAAU,gBAt/iBf,SAAUA,GACjC,OAAOA,EAAO6hC,SAAS,oBAAqB,GAC9C,EAq/iBMioB,CAAmB9pD,KAAYA,EAAOkuH,kBACxCxH,GAAc,eAAiB1mH,EAAO6xF,gBAAgB1nC,SAAW,QAEnEu8D,GAAc,wEACd,IAAIyH,EAx/iBU,SAAUnuH,GACxB,OAAO4hC,GAAe5hC,EAAQ,UAAW,UAC3C,CAs/iBeouH,CAAUpuH,GACnBquH,EAt/iBa,SAAUruH,GAC3B,OAAO4hC,GAAe5hC,EAAQ,aAAc,GAC9C,CAo/iBkBsuH,CAAatuH,GACzBuuH,EAAqBvuH,EAAO7N,UAlyiBV,SAAU6N,GAChC,OAAOA,EAAO6hC,SAAS,mBAAoB,wCAAyC,SACtF,CAgyiB4C2sF,CAAkBxuH,IAK5D,OAJI+hC,GAAyB/hC,KAC3B0mH,GAAc,uDAAyD3kF,GAAyB/hC,GAAU,QAE5G0mH,EAAc,oBAA4ByH,EAAS,6BAA+BE,EAAY,cAAgBruH,EAAOn8B,GAAK,iBAAmB0qJ,EAA/H,sBAEhB,CAWsBE,CAAczuH,GAClCitH,GAAM3lJ,IAAIsa,EAAEosI,gBAAiBV,GACtBI,CACT,EAcIgB,GAAQjjG,GAAS+E,IACjBm+F,GAAa,SAAU3uH,EAAQ4uH,EAAoBrkC,GACrD,IAAIskC,EAAS73F,GAAc58B,IAAImwF,GAC3BxzD,EAAYC,GAAcz0B,KAAKgoF,IAAWvqF,EAAOkuH,gBAAgBh+I,QAAQ,MAAO,IAEpF,GADAq6G,EAASr/F,GAAM/T,KAAKozG,GAChBskC,IAAyD,IAA/C3jI,GAAMO,QAAQmjI,EAAoBrkC,GAAgB,CAI9D,GAHAr/F,GAAMpN,KAAKk5C,GAActB,aAAa60D,IAAS,SAAU10D,GACvD84F,GAAW3uH,EAAQ4uH,EAAoB/4F,EACzC,IACI71B,EAAOg8E,QAAQuO,GACjB,OAEF,IACE,IAAIukC,EAAiB,IAAID,EAAO7uH,EAAQ+2B,EAAW/2B,EAAOgsB,GAC1DhsB,EAAOg8E,QAAQuO,GAAUukC,EACrBA,EAAe7mG,OACjB6mG,EAAe7mG,KAAKjoB,EAAQ+2B,GAC5B63F,EAAmBlkJ,KAAK6/G,GAE5B,CAAE,MAAOt8G,IA7/MS,SAAU+xB,EAAQr9B,EAAM62B,GAC5C,IAAIsC,EAAUs4B,GAAKjiC,UAAU,CAC3B,mCACAxvB,IAEFs0E,GAAUj3C,EAAQ,kBAAmB,CAAElE,QAASA,IAChDy1F,GAAUz1F,EAAStC,GACnB03F,GAAalxF,EAAQlE,EACvB,CAs/MMizH,CAAgB/uH,EAAQuqF,EAAQt8G,EAClC,CACF,CACF,EACI+gJ,GAAmB,SAAUrsJ,GAC/B,OAAOA,EAAKuN,QAAQ,MAAO,GAC7B,EA8CI++I,GAAyB,SAAUn5I,GACrC,MAAO,CACLo5I,gBAAiBp5I,EACjBk4I,gBAAiBl4I,EACjBiqE,IAAK,CAAC,EAEV,EAUIovE,GAAgB,SAAUnvH,GAC5B,IAAI3I,EAAM2I,EAAO4lD,aAEjB,OADA5lD,EAAOovH,WAAa/3H,EAAIxlB,MAAMypE,QAC1BtgE,EAAWkoD,GAASljC,IAnCE,SAAUA,GACpC,OAAOA,EAAO0sF,MAAM2iC,UACtB,CAkCWC,CAAsBtvH,GACpBxkB,EAAW0nD,GAASljC,IAlCP,SAAUA,GAClC,IAAI3I,EAAM2I,EAAO4lD,aAEb1/D,EADQg9C,GAASljC,EACV0sF,CAAM1sF,EAAQ3I,GAQzB,OAPInR,EAAKgpI,gBAAgBjhI,WACvB/H,EAAKgpI,gBAAgBrrJ,GAAKqiB,EAAKgpI,gBAAgBrrJ,IAAMm8B,EAAOn8B,GAAK,WAE/DqiB,EAAK8nI,iBAAmB9nI,EAAK8nI,gBAAgB//H,WAC/C/H,EAAK8nI,gBAAgBnqJ,GAAKqiB,EAAK8nI,gBAAgBnqJ,IAAMm8B,EAAOn8B,GAAK,oBAEnEqiB,EAAKkN,OAASlN,EAAKqpI,aAAerpI,EAAKqpI,aAAel4H,EAAI9lB,aACnD2U,CACT,CAuBWspI,CAAoBxvH,GAVR,SAAUA,GAC/B,IAAIk9G,EAAgBl9G,EAAO4lD,aAC3B,OAAO5lD,EAAOyQ,OAASw+G,GAAuB,MAPnB,SAAU/R,GACrC,IAAI8Q,EAAkBU,GAAM3iI,OAAO,OAEnC,OADA2iI,GAAM19F,YAAYg9F,EAAiB9Q,GAC5B+R,GAAuBjB,EAChC,CAGwDyB,CAAuBvS,EAC/E,CASWwS,CAAiB1vH,EAE5B,EAeIioB,GAAO,SAAUjoB,GACnBA,EAAO+Z,KAAK,iBAjFE,SAAU/Z,GACxB,IAAI2vH,EAAezkI,GAAM/T,KAAKkrD,GAAgBriC,IAC1C4vH,EAAe5vH,EAAO0iH,GAAGluE,SAASgC,SAASk3C,MAC3CmiC,EAAYhtI,GAASA,GAAS,CAAC,EAAG2qG,GAAYpzF,IAAI,WAAWszF,OAAQF,GAAYpzF,IAAIu1H,GAAcjiC,OACvG7sG,GAAOgvI,GAAW,SAAUC,EAASC,GAC9BvuI,GAAMouI,EAAcG,IACvB/vH,EAAO0iH,GAAGluE,SAASw7E,QAAQD,EAAMD,EAErC,GACF,CAyEEG,CAAUjwH,GAxEI,SAAUA,GACxB,IAAI0sF,EAAQxpD,GAASljC,GACrB,GAAIhlB,EAAW0xG,GAAQ,CACrB1sF,EAAOO,SAASmsF,MAAQsiC,GAAiBtiC,GACzC,IAAIwjC,EAAQj5F,GAAa78B,IAAIsyF,GAC7B1sF,EAAO0sF,MAAQ,IAAIwjC,EAAMlwH,EAAQi3B,GAAa10B,KAAKmqF,IAC/C1sF,EAAO0sF,MAAMzkE,MACfjoB,EAAO0sF,MAAMzkE,KAAKjoB,EAAQi3B,GAAa10B,KAAKmqF,IAAU1sF,EAAOkuH,gBAAgBh+I,QAAQ,MAAO,IAAK8vB,EAAOgsB,EAE5G,MACEhsB,EAAO0sF,MAAQ,CAAC,CAEpB,CA6DEyjC,CAAUnwH,GAzFM,SAAUA,GAC1B,IAAI4uH,EAAqB,GACzB1jI,GAAMpN,KAAKwlD,GAAWtjC,GAAQzU,MAAM,SAAS,SAAU5oB,GACrDgsJ,GAAW3uH,EAAQ4uH,EAAoBI,GAAiBrsJ,GAC1D,GACF,CAqFEytJ,CAAYpwH,GACZ,IAAIqwH,EAAalB,GAAcnvH,IAnBR,SAAUA,EAAQ+/C,GACzC,IAAIuwE,EAAc,CAChBrmG,KAAMzrC,EAASC,KAAKshE,EAAI91B,MAAM3sC,MAAM5B,GACpCwuC,KAAM1rC,EAASC,KAAKshE,EAAI71B,MAAM5sC,MAAM5B,GACpC60I,QAAS/xI,EAASC,KAAKshE,EAAIwwE,SAASjzI,MAAM5B,GAC1C80I,WAAYhyI,EAASC,KAAKshE,EAAIywE,YAAYlzI,MAAMV,GAChD6zI,OAAQ,WACDzwH,EAAO2L,KAAKggG,cACfntH,EAASC,KAAKshE,EAAI0wE,QAAQrnJ,IAAIkR,EAElC,GAEF0lB,EAAO0iH,GAAK7/H,GAASA,GAAS,CAAC,EAAGmd,EAAO0iH,IAAK4N,EAChD,CAOEI,CAAmB1wH,EAAQxhB,EAASC,KAAK4xI,EAAWtwE,KAAKziE,MAAM,CAAC,IAChE,IAAIqzI,EAAU,CACZzB,gBAAiBmB,EAAWnB,gBAC5BlB,gBAAiBqC,EAAWrC,iBAI9B,OAFAhuH,EAAOkvH,gBAAkByB,EAAQzB,gBAAkByB,EAAQzB,gBAAkB,KAC7Ep9B,GAA6B9xF,GACzBA,EAAOyQ,OACF81G,GAAgBvmH,GA5Id,SAAUA,EAAQ2wH,GAC7B,IAAIjD,EAAkBR,GAAaltH,EAAQ2wH,GACvCA,EAAQzB,kBACVjC,GAAM7yH,IAAIu2H,EAAQzB,iBAAiBr9I,MAAMypE,QAAUt7C,EAAOovH,WAC1DpvH,EAAO4wH,OAAS3D,GAAMt8F,SAASggG,EAAQzB,kBAEzClvH,EAAO4lD,aAAa/zE,MAAMypE,QAAU,OACpC2xE,GAAM3gG,UAAUtsB,EAAOn8B,GAAI,cAAe,QACrC6pJ,GACHnH,GAAgBvmH,EAEpB,CAmIW6wH,CAAO7wH,EAAQ2wH,EAE1B,EAEIG,GAAQrlG,GAAS+E,IACjBugG,GAAoB,SAAUpuJ,GAChC,MAA0B,MAAnBA,EAAKkK,OAAO,EACrB,EAuCImkJ,GAA0B,SAAUhxH,EAAQr9B,EAAM4xC,GACpD,OAAO/1B,EAASC,KAAK9b,GAAM4G,QAAO,SAAU5G,GAC1C,OAAOA,EAAKF,OAAS,IAAM+qH,GAAY9pE,IAAI/gD,EAC7C,IAAGyG,KAAI,SAAUzG,GACf,MAAO,CACLqqB,IAAKgT,EAAOwlD,cAAcvvB,QAAU,UAAYtzD,EAAO,SAAW4xC,EAAS,MAC3E5xC,KAAM6b,EAASJ,KAAKzb,GAExB,GACF,EAoDI+wD,GAAc,SAAU1zB,EAAQuU,GAClC,IAAI08G,EAAel+F,GAAaA,cA1FlB,SAAUk+F,EAAcjxH,EAAQuU,EAAQ7uC,GACtD,IAAIgnH,EAAQxpD,GAASljC,GACrB,GAAIhlB,EAAW0xG,GAAQ,CACrB,IAAKqkC,GAAkBrkC,KAAWlrG,GAAMy1C,GAAa10B,KAAMmqF,GAAQ,CACjE,IAAIwkC,EAjhjBQ,SAAUlxH,GAC1B,OAAOA,EAAO6hC,SAAS,YACzB,CA+gjBqBsvF,CAAYnxH,GACvBkxH,EACFj6F,GAAar2B,KAAK8rF,EAAO1sF,EAAO6xF,gBAAgBlnC,WAAWumE,IAE3Dj6F,GAAar2B,KAAK8rF,EAAO,UAAYA,EAAQ,SAAWn4E,EAAS,MAErE,CACA08G,EAAax9F,WAAU,WACrBwD,GAAaX,QAAQo2D,EAAOhnH,EAC9B,GACF,MACEA,GAEJ,CA0EE0rJ,CAAUH,EAAcjxH,EAAQuU,GAAQ,YArGvB,SAAU08G,EAAcjxH,GACzC,IAAIqxH,EAAezuF,GAAgB5iC,GAC/BsxH,EAlljBe,SAAUtxH,GAC7B,OAAOA,EAAO6hC,SAAS,eAAgB,GAAI,SAC7C,CAgljBoB0vF,CAAevxH,GACjC,IAAmC,IAA/Bo0B,GAAKgB,QAAQi8F,IAA4C,OAAjBA,EAAuB,CACjE,IAAIG,EAAwB,KAAhBF,EAAqBA,EAActxH,EAAOwlD,cAAcvvB,QAAU,UAAYo7F,EAAe,MACzGJ,EAAa3pJ,IAAIkqJ,EAAO91I,OAAMpZ,GAAW,YA3nNrB,SAAU09B,EAAQhT,EAAKrqB,GAC7CyuH,GAASpxF,EAAQ,oBAAqBqxF,GAAgB,WAAYrkG,EAAKrqB,GACzE,CA0nNM8uJ,CAAkBzxH,EAAQwxH,EAAOH,EACnC,GACF,CACF,EA6FIK,CAAaT,EAAcjxH,GAtDf,SAAUixH,EAAcjxH,EAAQuU,GAC9C,IAAIo9G,EAAkBX,GAAwBhxH,EAAQ,UAAWuU,GAC7Dq9G,EAtBuB,SAAU5xH,GACrC,OAAOxhB,EAASC,KArojBA,SAAUuhB,GAC1B,OAAOA,EAAO6hC,SAAS,YAAa,GAAI,SAC1C,CAmojBuBgwF,CAAY7xH,IAASz2B,QAAO,SAAUyjB,GACzD,OAAOA,EAAIvqB,OAAS,CACtB,IAAG2G,KAAI,SAAU4jB,GACf,MAAO,CACLA,IAAKA,EACLrqB,KAAM6b,EAAS1B,OAEnB,GACF,CAauBg1I,CAAuB9xH,GAAQniB,SAAQ,WAC1D,OAAOmzI,GAAwBhxH,EAAQqiC,GAAgBriC,GAAS,GAClE,IACA7gB,EA7vxBQ,SAAUwB,GAKlB,IAJA,IAAIzB,EAAI,GACJxU,EAAO,SAAUwO,GACnBgG,EAAExU,KAAKwO,EACT,EACS1W,EAAI,EAAGA,EAAIme,EAAIle,OAAQD,IAC9Bme,EAAIne,GAAGsb,KAAKpT,GAEd,OAAOwU,CACT,CAovxBS6yI,CAAI,CACTJ,EACAC,KACE,SAAUI,GACZf,EAAa3pJ,IAAI0qJ,EAAQhlI,IAAKtR,OAAMpZ,GAAW,YAlrN9B,SAAU09B,EAAQhT,EAAKrqB,GAC1CyuH,GAASpxF,EAAQ,iBAAkBqxF,GAAgB,QAASrkG,EAAKrqB,GACnE,CAirNMsvJ,CAAejyH,EAAQgyH,EAAQhlI,IAAKglI,EAAQrvJ,KAAKgb,iBACnD,GACF,GACF,CA0CIkyI,CAAUoB,EAAcjxH,EAAQuU,GAzClB,SAAUvU,EAAQuU,GAClCrpB,GAAMpN,KA3hjBmB,SAAUkiB,GACnC,OAAOA,EAAO6hC,SAAS,mBACzB,CAyhjBaqwF,CAAqBlyH,IAAS,SAAUhT,EAAKrqB,GACtDq0D,GAAcp2B,KAAKj+B,EAAMqqB,EAAKtR,OAAMpZ,GAAW,WAC7CgvH,GAAgBtxF,EAAQhT,EAAKrqB,EAC/B,IACAq9B,EAAOO,SAASy7E,SAAW,IAAMr5G,CACnC,IACAuoB,GAAMpN,KAAKwlD,GAAWtjC,GAAQzU,MAAM,SAAS,SAAUg/F,GAErD,IADAA,EAASr/F,GAAM/T,KAAKozG,MACLvzD,GAAcz0B,KAAKgoF,GAChC,GAAIwmC,GAAkBxmC,GAAS,CAC7BA,EAASA,EAAOhgH,OAAO,EAAGggH,EAAO9nH,QACjC,IAAIizD,EAAesB,GAActB,aAAa60D,GAC9Cr/F,GAAMpN,KAAK43C,GAAc,SAAUy8F,GACjC,IAAIplC,EAAkB,CACpBloG,OAAQ,WACRixC,SAAUq8F,EACV59G,OAAQ,UAAYA,EAAS,OAE3BshB,EAAMmB,GAAcrB,UAAUo3D,EAAiBolC,GACnDn7F,GAAcp2B,KAAKi1B,EAAIC,SAAUD,EAAKn6C,OAAMpZ,GAAW,WACrDgvH,GAAgBtxF,EAAQ61B,EAAIhxC,OAASgxC,EAAIC,SAAWD,EAAIthB,OAAQshB,EAAIC,SACtE,GACF,GACF,KAAO,CACL,IAAIs8F,EAAQ,CACVvtI,OAAQ,WACRixC,SAAUy0D,EACVh2E,OAAQ,UAAYA,EAAS,OAE/ByiB,GAAcp2B,KAAK2pF,EAAQ6nC,EAAO12I,OAAMpZ,GAAW,WACjDgvH,GAAgBtxF,EAAQoyH,EAAMvtI,OAASutI,EAAMt8F,SAAWs8F,EAAM79G,OAAQg2E,EACxE,GACF,CAEJ,GACF,CAMI8nC,CAAYryH,EAAQuU,GACpB08G,EAAax9F,WAAU,WAChBzzB,EAAOC,SACVgoB,GAAKjoB,EAET,GAAGA,GAAQ,WACJA,EAAOC,SACVgoB,GAAKjoB,EAET,GACF,GACF,EAqGIsyH,GAAkB,CACpB,YAAa,OACb,cAAe,QA2BbC,GAAc,SAAU3kC,GAC1B,OAAO,SAAU/gE,EAASx1B,GACxB,OAAO7Y,EAASC,KAAK4Y,GAAKjuB,IAAIgkB,IAAsB7jB,OAAO8lB,IAAatR,MAAK,SAAUjI,GACrF,OA5BqB,SAAU83G,EAAU/gE,EAASx1B,GAetD,OAAO2tE,GAAU53E,GAAqBiK,IAAM,SAAUA,GACpD,OAfgB,SAAUA,GAC1B,OAAOT,GAAOS,EAAKu2F,GAAU/vG,SAAQ,WACnC,MAAkB,SAAdlb,GAAK00B,GACA9V,GAAM+wI,GAAiB1kC,GAAU7vG,MAAK,SAAUy0I,GACrD,OAAOj8H,GAAOc,EAAKm7H,EACrB,IAEOh0I,EAAS1B,MAEpB,GACF,CAKS21I,CAAYp7H,EACrB,IALa,SAAUA,GACrB,OAAO3d,GAAG0T,GAAqBy/B,GAAUx1B,EAC3C,GAIF,CAUaq7H,CAAqB9kC,EAAU/gE,EAAS/2C,EAAQqX,KAAKvP,GANxC,SAAUgwG,EAAUv2F,GAC5C,OAAO7Y,EAASC,KAAKgtC,GAAS+E,IAAInD,SAASh2B,EAAKu2F,GAAU,GAC5D,CAIqE+kC,CAAoB/kC,EAAU93G,EAAQqX,KACvG,IAAG7P,MAAM,GACX,CACF,EACIs1I,GAAcL,GAAY,aAC1BM,GAAgBl3I,GAdM,SAAUm8G,GAClC,OAAOA,EAAW5nH,QAAQ,YAAa,IAAIA,QAAQ,QAAS,IAC9D,GAYiDqiJ,GAAY,gBAEzDO,GAAwB,SAAU9yH,GACpC,OAAOkrC,GAAgBlrC,EAAOy4B,WAAWrvD,KAAI,SAAUq8D,GACrD,IAAI76D,EAAY66D,EAAM76D,YACtB,OAAOsqB,GAAStqB,GAAaA,EAAUU,WAAaV,CACtD,GACF,EAWImoJ,GAAW,SAAU/yH,EAAQgzH,GAC/B,OAJc,SAAUhzH,EAAQizH,GAChC,OARoB,SAAUjzH,GAC9B,OAAOxhB,EAASC,KAAKuhB,EAAOu4B,UAAUC,UAAUz6C,MAAK,SAAUu6C,GAC7D,IAAItsC,EAAOgU,EAAOy4B,UAElB,OADoBH,EAAIjyB,iBAAmBra,GAA4B,IAApBssC,EAAIjG,YAChC7zC,EAAS1B,OAAS0B,EAASC,KAAKuhB,EAAOu4B,UAAUwkB,UAAS,GACnF,GACF,CAESm2E,CAAgBlzH,GAAQniB,QAAQtB,EAAMu2I,GAAuB9yH,IAAS52B,IAAIgkB,IAAsB7jB,OAAO8lB,IAAatR,KAAKk1I,EAClI,CAESE,CAAUnzH,EAAQ/jB,EAASuC,EAASJ,KAAM40I,GACnD,EAEII,GAAqB,SAAUpzH,EAAQt5B,GACzC,GAAI,YAAYO,KAAKP,GAAQ,CAC3B,IAAI2sJ,EAAiBn8I,SAASxQ,EAAO,IACrC,GAAI2sJ,GAAkB,GAAKA,GAAkB,EAAG,CAC9C,IAAI9yC,EAp5jBe,SAAUvgF,GACjC,OAAO9U,GAAM2B,QAAQmT,EAAO6hC,SAAS,yBAA0B,wDACjE,CAk5jBsByxF,CAAmBtzH,GAC/BuzH,EAl5jBe,SAAUvzH,GACjC,OAAO9U,GAAM2B,QAAQmT,EAAO6hC,SAAS,oBAAqB,IAC5D,CAg5jBwB2xF,CAAmBxzH,GACrC,OAAIuzH,EACKA,EAAYF,EAAiB,IAAM3sJ,EAEnC65G,EAAU8yC,EAAiB,IAAM3sJ,CAE5C,CACE,OAAOA,CAEX,CACE,OAAOA,CAEX,EACI+sJ,GAAqB,SAAUC,GACjC,IAAIC,EAAQD,EAAKnoI,MAAM,WACvB,OAAOtM,EAAM00I,GAAO,SAAUD,GAC5B,OAA2B,IAAvBA,EAAKlqJ,QAAQ,MAAiBob,GAAW8uI,EAAM,MAAQ9uI,GAAW8uI,EAAM,KAGnEA,EAFA,IAAOA,EAAO,GAIzB,IAAG52H,KAAK,IACV,EA6DI82H,GAAS1oI,GAAMpN,KACf1U,GAAM8hB,GAAM9hB,IAAKqiB,GAAUP,GAAMO,QACjCooI,GAAiB,WACnB,SAASA,EAAe7zH,GACtB/5B,KAAK6tJ,SAAW,CACd7yH,MAAO,CAAC,EACR5U,KAAM,CAAC,EACP3lB,MAAO,CAAC,GAEVT,KAAK+5B,OAASA,EACd/5B,KAAK8tJ,cAAc/zH,EACrB,CA+YA,OA9YA6zH,EAAe97I,UAAUmlE,YAAc,SAAUg9C,EAASwoB,EAAIh8I,EAAOoV,GACnE,IAAI4jB,EAAMuB,GAAQ,EACd3iB,EAAOrY,KACX,IAAIqY,EAAK0hB,OAAOC,QAAhB,CAn5dU,IAAUD,EAk6dpB,GAZ8B,aAA1Bk6F,EAAQ5wH,gBACL,mEAAmErC,KAAKizH,IAAcp+G,GAASA,EAAKk4I,YAv5dvFh0H,EA05dR1hB,EAAK0hB,OAz5dnBw4B,GAAOx4B,GAAQliB,MAAK,SAAUw6C,GAC5B,OAAOt4B,EAAOu4B,UAAU2U,OAAO5U,EACjC,KAq5dMh6C,EAAK0hB,OAAO7xB,UAKhB2N,EAAOwC,EAAK0hB,OAAO+Z,KAAK,oBAAqB,CAC3CmgF,QAASA,EACTwoB,GAAIA,EACJh8I,MAAOA,KAEAuwC,qBACP,OAAO,EAET,IAAIg9G,EAAgB/5B,EAAQ5wH,cAC5B,GAAIo2B,EAAOphB,EAAKw1I,SAASznI,KAAK4nI,GAO5B,OANAv0H,EAAKu0H,EAAevR,EAAIh8I,GACxB4X,EAAK0hB,OAAO+Z,KAAK,cAAe,CAC9BmgF,QAASA,EACTwoB,GAAIA,EACJh8I,MAAOA,KAEF,EAaT,GAXAktJ,GAAO3tJ,KAAK+5B,OAAOg8E,SAAS,SAAUj5F,GACpC,GAAIA,EAAEm6D,aAAen6D,EAAEm6D,YAAYg9C,EAASwoB,EAAIh8I,GAO9C,OANA4X,EAAK0hB,OAAO+Z,KAAK,cAAe,CAC9BmgF,QAASA,EACTwoB,GAAIA,EACJh8I,MAAOA,IAETu6B,GAAQ,GACD,CAEX,IACIA,EACF,OAAOA,EAET,GAAI3iB,EAAK0hB,OAAO0sF,OAASpuG,EAAK0hB,OAAO0sF,MAAMxvC,aAAe5+D,EAAK0hB,OAAO0sF,MAAMxvC,YAAYg9C,EAASwoB,EAAIh8I,GAMnG,OALA4X,EAAK0hB,OAAO+Z,KAAK,cAAe,CAC9BmgF,QAASA,EACTwoB,GAAIA,EACJh8I,MAAOA,KAEF,EAET,IACEu6B,EAAQ3iB,EAAK0hB,OAAO6zC,SAASqJ,YAAYg9C,EAASwoB,EAAIh8I,EACxD,CAAE,MAAOwyB,GACT,CACA,QAAI+H,IACF3iB,EAAK0hB,OAAO+Z,KAAK,cAAe,CAC9BmgF,QAASA,EACTwoB,GAAIA,EACJh8I,MAAOA,KAEF,EA1DT,CA6DF,EACAmtJ,EAAe97I,UAAUs0H,kBAAoB,SAAUnS,GACrD,IAAIx6F,EACJ,IAAIz5B,KAAK+5B,OAAOyjH,OAAO9yF,aAAc1qD,KAAK+5B,OAAOC,QAAjD,CAIA,GADAi6F,EAAUA,EAAQ5wH,cACdo2B,EAAOz5B,KAAK6tJ,SAAS7yH,MAAMi5F,GAC7B,OAAOx6F,EAAKw6F,GAEd,IACE,OAAOj0H,KAAK+5B,OAAO6zC,SAASw4D,kBAAkBnS,EAChD,CAAE,MAAOhhG,GACT,CACA,OAAO,CATP,CAUF,EACA26H,EAAe97I,UAAUm8I,kBAAoB,SAAUh6B,GACrD,IAAIx6F,EACJ,IAAIz5B,KAAK+5B,OAAOyjH,OAAO9yF,aAAc1qD,KAAK+5B,OAAOC,QAAjD,CAIA,GADAi6F,EAAUA,EAAQ5wH,cACdo2B,EAAOz5B,KAAK6tJ,SAASptJ,MAAMwzH,GAC7B,OAAOx6F,EAAKw6F,GAEd,IACE,OAAOj0H,KAAK+5B,OAAO6zC,SAASqgF,kBAAkBh6B,EAChD,CAAE,MAAOhhG,GACT,CARA,CASF,EACA26H,EAAe97I,UAAUo8I,YAAc,SAAUC,EAAahoJ,QAC/C,IAATA,IACFA,EAAO,QAET,IAAIkS,EAAOrY,KACX2tJ,GAAOQ,GAAa,SAAU1uJ,EAAUw0H,GACtC05B,GAAO15B,EAAQ5wH,cAAciiB,MAAM,MAAM,SAAU2uG,GACjD57G,EAAKw1I,SAAS1nJ,GAAM8tH,GAAWx0H,CACjC,GACF,GACF,EACAmuJ,EAAe97I,UAAU4yI,WAAa,SAAUzwB,EAASx0H,EAAU4nB,GACjE,IAAItnB,EAAQC,KACZi0H,EAAUA,EAAQ5wH,cAClBrD,KAAK6tJ,SAASznI,KAAK6tG,GAAW,SAAUA,EAASwoB,EAAIh8I,EAAOoV,GAC1D,OAAOpW,EAAS4U,KAAKgT,GAAStnB,EAAMg6B,OAAQ0iH,EAAIh8I,EAAOoV,EACzD,CACF,EACA+3I,EAAe97I,UAAU4tI,sBAAwB,SAAUzrB,GAEzD,GADAA,EAAUA,EAAQ5wH,cACdrD,KAAK6tJ,SAASznI,KAAK6tG,GACrB,OAAO,EAET,IACE,OAAOj0H,KAAK+5B,OAAO6zC,SAAS8xE,sBAAsBzrB,EACpD,CAAE,MAAOhhG,GACT,CACA,OAAO,CACT,EACA26H,EAAe97I,UAAUs8I,qBAAuB,SAAUn6B,EAASx0H,EAAU4nB,GAC3E,IAAItnB,EAAQC,KACZi0H,EAAUA,EAAQ5wH,cAClBrD,KAAK6tJ,SAAS7yH,MAAMi5F,GAAW,WAC7B,OAAOx0H,EAAS4U,KAAKgT,GAAStnB,EAAMg6B,OACtC,CACF,EACA6zH,EAAe97I,UAAUu8I,qBAAuB,SAAUp6B,EAASx0H,EAAU4nB,GAC3E,IAAItnB,EAAQC,KACZi0H,EAAUA,EAAQ5wH,cAClBrD,KAAK6tJ,SAASptJ,MAAMwzH,GAAW,WAC7B,OAAOx0H,EAAS4U,KAAKgT,GAAStnB,EAAMg6B,OACtC,CACF,EACA6zH,EAAe97I,UAAUw8I,iBAAmB,SAAUr6B,GAEpD,OADAA,EAAUA,EAAQ5wH,gBACTrD,KAAK6tJ,SAASznI,KAAK6tG,EAC9B,EACA25B,EAAe97I,UAAUy8I,kBAAoB,SAAUt6B,EAASwoB,EAAIh8I,GAOlE,YANWpE,IAAPogJ,IACFA,GAAK,QAEOpgJ,IAAVoE,IACFA,EAAQ,MAEHT,KAAK+5B,OAAO6zC,SAASqJ,YAAYg9C,EAASwoB,EAAIh8I,EACvD,EACAmtJ,EAAe97I,UAAU08I,cAAgB,SAAU9xJ,GACjD,OAAOsD,KAAK+5B,OAAOqlE,UAAU/4E,MAAM3pB,EACrC,EACAkxJ,EAAe97I,UAAUuhH,aAAe,SAAU32H,EAAM+D,GACtDT,KAAK+5B,OAAOqlE,UAAU+U,OAAOz3G,EAAM+D,GACnCT,KAAK+5B,OAAOi8C,aACd,EACA43E,EAAe97I,UAAU28I,eAAiB,SAAUtoJ,GAClDnG,KAAK0uJ,kBAAoB1uJ,KAAK+5B,OAAOu4B,UAAUue,YAAY1qE,EAC7D,EACAynJ,EAAe97I,UAAUk1H,iBAAmB,WAC1ChnI,KAAK+5B,OAAOu4B,UAAUiJ,eAAev7D,KAAK0uJ,kBAC5C,EACAd,EAAe97I,UAAUg8I,cAAgB,SAAU/zH,GACjD,IAAI1hB,EAAOrY,KACXA,KAAKkuJ,YAAY,CACf,uCAAwCz4I,EACxC,kCAAmC,WACjCskB,EAAOg2C,YAAY1uE,KACrB,EACA,SAAY,SAAUstJ,EAAUC,EAAKnuJ,IAx0d/B,SAAUs5B,EAAQ80H,GACxB90H,EAAOC,UAGP60H,EACFluE,GAAe5mD,GAtCD,SAAUA,GAC1B,IAAIu4B,EAAYv4B,EAAOu4B,UACnBnxD,EAAO44B,EAAOy4B,UACdH,EAAMC,EAAUC,SACpBx4B,EAAOyjH,OAAO0B,8BACU7iJ,IAApB09B,EAAO4gC,WAA+C,IAArB5c,GAAShkB,IAC5Cw4B,GAAOx4B,GAAQliB,MAAK,SAAUi3I,GAC5B/0H,EAAOu4B,UAAU2U,OAAO6nF,GACxBz8F,EAAMy8F,CACR,IAEF,IAAIC,EAzEuB,SAAUh1H,EAAQ9S,GAC7C,OAAO8S,EAAO7S,IAAIoiC,UAAUriC,GAAM,SAAUA,GAC1C,MAA+C,SAAxC8S,EAAO7S,IAAIyhC,mBAAmB1hC,EACvC,GACF,CAqE4B+nI,CAAuBj1H,EAAQu4B,EAAU2F,WACnE,GAAIl+B,EAAOgsB,EAAE99C,SAAS9G,EAAM4tJ,GAI1B,OAHAzuE,GAAUyuE,GACV7uE,GAAqBnmD,EAAQs4B,QAC7BsuB,GAAe5mD,GAGZA,EAAOyQ,SACL3mB,GAAIhE,OACPygE,GAAUn/E,GAEZ44B,EAAO8kH,SAAS32I,UAEd2b,GAAIE,OAASgW,EAAOyQ,UACtB81C,GAAUn/E,GACV++E,GAAqBnmD,EAAQs4B,IAE/BsuB,GAAe5mD,EACjB,CAWIsiH,CAAYtiH,GAEhB,CAg0dQ7xB,CAAM6xB,EAAQt5B,EAChB,EACA,iBAAkB,SAAUwzH,GAC1B,IACI/4F,EADAlQ,EAAM+O,EAAO6zC,SAEjB,IACEv1D,EAAKk2I,kBAAkBt6B,EACzB,CAAE,MAAOhhG,GACPiI,GAAS,CACX,CAIA,GAHgB,UAAZ+4F,GAAwBjpG,EAAIikI,oBAAoBh7B,KAClD/4F,GAAS,GAEPA,IAAWlQ,EAAI00H,sBAAsBzrB,GAAU,CACjD,IAAIz8G,EAAMuiB,EAAO7N,UAAU,sHACvBrI,GAAIG,MACNxM,EAAMA,EAAIvN,QAAQ,UAAW,OAE/B8vB,EAAOixF,oBAAoB3P,KAAK,CAC9B3zF,KAAMlQ,EACNrR,KAAM,SAEV,CACF,EACA,OAAU,WACR,GAAI4zB,EAAOu4B,UAAUsI,cAArB,CACE,IAAIxpC,EAAM2I,EAAO7S,IAAIoiC,UAAUvvB,EAAOu4B,UAAUwkB,WAAY,KACxD1lD,GACF2I,EAAO7S,IAAI7c,OAAO+mB,GAAK,EAG3B,MACA2I,EAAOqlE,UAAU/0F,OAAO,OAC1B,EACA,iEAAkE,SAAU4pH,GAC1E,IAAIi7B,EAAQj7B,EAAQhkE,UAAU,GAChB,SAAVi/F,IACFA,EAAQ,WAEVvB,GAAO,4BAA4BroI,MAAM,MAAM,SAAU5oB,GACnDwyJ,IAAUxyJ,GACZq9B,EAAOqlE,UAAU/0F,OAAO,QAAU3N,EAEtC,IACc,SAAVwyJ,GACF72I,EAAKg7G,aAAa,QAAU67B,EAEhC,EACA,wCAAyC,SAAUj7B,GACjD,IAAIk7B,EACJ92I,EAAKk2I,kBAAkBt6B,GACvB,IAAI3nB,EAAUvyE,EAAO7S,IAAIoiC,UAAUvvB,EAAOu4B,UAAU2F,UAAW,SAC3Dq0C,IACF6iD,EAAa7iD,EAAQjnG,WACjB,2BAA2BrE,KAAKmuJ,EAAWjmI,YAC7C7Q,EAAKo2I,iBACL10H,EAAO7S,IAAI5B,MAAM6pI,EAAY7iD,GAC7Bj0F,EAAK2uH,oBAGX,EACA,4DAA6D,SAAU/S,GACrE57G,EAAKg7G,aAAaY,EACpB,EACA,wBAAyB,SAAUA,EAASwoB,EAAIh8I,GAC9C4X,EAAKg7G,aAAaY,EAAS,CAAExzH,MAAOA,GACtC,EACA,SAAY,SAAUwzH,EAASwoB,EAAIh8I,IAxTpB,SAAUs5B,EAAQt5B,GACrC,IAAIgtJ,EAAON,GAAmBpzH,EAAQt5B,GACtCs5B,EAAOqlE,UAAU+U,OAAO,WAAY,CAAE1zG,MAAO+sJ,GAAmBC,KAChE1zH,EAAOi8C,aACT,CAqTQo5E,CAAer1H,EAAQt5B,EACzB,EACA,SAAY,SAAUwzH,EAASwoB,EAAIh8I,IAjTpB,SAAUs5B,EAAQt5B,GACrCs5B,EAAOqlE,UAAU+U,OAAO,WAAY,CAAE1zG,MAAO0sJ,GAAmBpzH,EAAQt5B,KACxEs5B,EAAOi8C,aACT,CA+SQq5E,CAAet1H,EAAQt5B,EACzB,EACA,WAAc,SAAUwzH,EAASwoB,EAAIh8I,IA5RpB,SAAUs5B,EAAQk4F,GACvCl4F,EAAOqlE,UAAU+U,OAAO,aAAc,CAAE1zG,MAAO6S,OAAO2+G,KACtDl4F,EAAOi8C,aACT,CA0RQs5E,CAAiBv1H,EAAQt5B,EAC3B,EACA,KAAQ,SAAUwzH,EAASwoB,EAAI/+F,GAC7BrlC,EAAKg7G,aAAaY,EAAS,CACzBxzH,MAAOi9C,EAAK8Q,KACZgkE,YAAa90E,EAAK6xG,YAEtB,EACA,aAAgB,SAAUt7B,GACxBl6F,EAAOqlE,UAAU/0F,OAAO4pH,EAC1B,EACA,cAAiB,WACf57G,EAAKg7G,aAAa,aACpB,EACA,YAAe,SAAUY,EAASwoB,EAAIh8I,GACpC,OAAO4X,EAAKg7G,aAAa5yH,GAAS,IACpC,EACA,WAAc,WACZ,IAAIk6D,EAAW5gC,EAAOu4B,UAAUue,cAChC92C,EAAOg5D,WAAWh5D,EAAOuxD,cACzBvxD,EAAOu4B,UAAUiJ,eAAeZ,EAClC,EACA,cAAiB,SAAUs5D,EAASwoB,EAAIh8I,GACtC,IAAIwmB,EAAOxmB,GAASs5B,EAAOu4B,UAAU2F,UACjChxC,IAAS8S,EAAOy4B,YAClBn6C,EAAKo2I,iBACL10H,EAAO7S,IAAI7c,OAAO4c,GAAM,GACxB5O,EAAK2uH,mBAET,EACA,mBAAsB,SAAU/S,EAASwoB,EAAIh8I,GAC3C,IAAIklD,EAAU,EACd5rB,EAAO7S,IAAIoiC,UAAUvvB,EAAOu4B,UAAU2F,WAAW,SAAUhxC,GACzD,GAAsB,IAAlBA,EAAKe,UAAkB29B,MAAcllD,EAEvC,OADAs5B,EAAOu4B,UAAUvS,OAAO94B,IACjB,CAEX,GAAG8S,EAAOy4B,UACZ,EACA,cAAiB,SAAUyhE,EAASwoB,EAAIh8I,GACtCs5B,EAAOu4B,UAAUvS,OAAOt/C,EAC1B,EACA,iBAAoB,SAAUwzH,EAASwoB,EAAIh8I,IAlT7B,SAAUs5B,EAAQt5B,GACpC,IAAI42B,EAjBa,SAAU52B,GAC3B,GAAqB,iBAAVA,EAAoB,CAC7B,IAAI+6F,EAAUv2E,GAAMS,OAAO,CACzBm2E,MAAOp7F,EAAMo7F,MACb5nE,KAAM,CAAE4nE,MAAOp7F,EAAMo7F,QACpBp7F,GACH,MAAO,CACLyiD,QAASziD,EAAMyiD,QACfs4C,QAASA,EAEb,CACA,MAAO,CACLt4C,QAASziD,EACT+6F,QAAS,CAAC,EAEd,CAEeg0D,CAAa/uJ,IA3ySR,SAAUs5B,EAAQt5B,EAAO+6F,GACpCwa,GAA2Bj8E,GAAQA,OAAOq7E,cAAc30G,EAAO+6F,EACxE,CA0ySE4Z,CAAcr7E,EAAQ1C,EAAO6rB,QAAS7rB,EAAOmkE,QAC/C,CAgTQi0D,CAAc11H,EAAQt5B,EACxB,EACA,iBAAoB,SAAUwzH,EAASwoB,EAAIh8I,GACzCs5B,EAAOu4B,UAAUygC,WAAW,mBAC5B,IAAI7vC,EAAUnpB,EAAOuxD,aACrBvxD,EAAOg5D,WAAW7vC,EAAQj5C,QAAQ,oBAAoB,WACpD,OAAOxJ,CACT,IACF,EACA,iBAAoB,SAAUwzH,EAASwoB,EAAIh8I,GACzC4gF,GAAOtnD,EAAQt5B,EACjB,EACA,gBAAmB,SAAUwzH,EAASwoB,EAAIh8I,GACxC4X,EAAKg7G,aAAa5yH,EACpB,EACA,cAAiB,SAAUwzH,EAASwoB,EAAIh8I,GACtCs5B,EAAOg5D,WAAWtyF,EACpB,EACA,iBAAkB,SAAUwzH,GAC1B7hG,GAAO2H,EAAQk6F,EACjB,EACA,WAAcx+G,EACd,qBAAwB,WACtBskB,EAAOk9C,YAAY,oBAAoB,EAAO,SAChD,EACA,mBAAsB,WACpBl9C,EAAOs7E,WAAat7E,EAAOs7E,UAC3Bt7E,EAAOsjE,WACT,EACA,kBAAqB,SAAU42B,EAASwoB,EAAIh8I,GAC1Cs5B,EAAOk9C,YAAY,oBAAoB,EAAOx2E,EAAMwJ,QAAQ,mBAAoB8vB,EAAOu4B,UAAUg5B,WAAW,CAAE59E,OAAQ,UACxH,EACA,cAAiB,SAAUumH,EAASwoB,EAAIh8I,GACjB,iBAAVA,IACTA,EAAQ,CAAEu9C,KAAMv9C,IAElB,IAAIgkF,EAAS1qD,EAAO7S,IAAIoiC,UAAUvvB,EAAOu4B,UAAU2F,UAAW,KAC9Dx3D,EAAMu9C,KAAOv9C,EAAMu9C,KAAK/zC,QAAQ,KAAM,OACjCw6E,GAAWhkF,EAAMu9C,MACpBjkB,EAAOqlE,UAAU/0F,OAAO,QAEtB5J,EAAMu9C,MACRjkB,EAAOqlE,UAAUrpF,MAAM,OAAQtV,EAAOgkF,EAE1C,EACA,UAAa,WACX,IAAIirE,EAAc31H,EAAO7S,IAAIoiC,UAAUvvB,EAAOu4B,UAAUwkB,WAAYvnD,IACpE,GAAImgI,EAAa,CACf,IAAIr9F,EAAMt4B,EAAO7S,IAAIshC,YACrB6J,EAAIs9F,mBAAmBD,GACvB31H,EAAOu4B,UAAU2U,OAAO5U,EAC1B,CACF,EACA,eAAkB,WAChBt4B,EAAOg5D,WAAW,GACpB,EACA,gBAAmB,SAAUkhC,EAASwoB,EAAIh8I,GAExC,OADAmvI,GAAS71G,EAAQt5B,IACV,CACT,IAEF,IAAImvJ,EAAc,SAAUlzJ,GAC1B,OAAO,WACL,IAAI41D,EAAYv4B,EAAOu4B,UACnBphC,EAAQohC,EAAUsI,cAAgB,CAAC7gC,EAAO7S,IAAIoiC,UAAUgJ,EAAU2F,UAAWl+B,EAAO7S,IAAI4hC,UAAYwJ,EAAUgxC,oBAC9GxhF,EAAU3e,GAAI+tB,GAAO,SAAUjK,GACjC,QAAS8S,EAAOqlE,UAAUI,UAAUv4E,EAAMvqB,EAC5C,IACA,OAAmC,IAA5B8oB,GAAQ1D,GAAS,EAC1B,CACF,EACAzJ,EAAK61I,YAAY,CACf,YAAe0B,EAAY,aAC3B,cAAiBA,EAAY,eAC7B,aAAgBA,EAAY,cAC5B,YAAeA,EAAY,gBAC3B,4DAA6D,SAAU37B,GACrE,OAAO57G,EAAKm2I,cAAcv6B,EAC5B,EACA,cAAiB,WACf,OAAO57G,EAAKm2I,cAAc,aAC5B,EACA,QAAW,WACT,OAAOhpB,GAAWzrG,EACpB,EACA,wCAAyC,SAAUk6F,GACjD,IAAIhW,EAAOlkF,EAAO7S,IAAIoiC,UAAUvvB,EAAOu4B,UAAU2F,UAAW,SAC5D,OAAOgmD,IAAqB,wBAAZgW,GAAsD,OAAjBhW,EAAKp2G,SAAgC,sBAAZosH,GAAoD,OAAjBhW,EAAKp2G,QACxH,GACC,SACHwQ,EAAK61I,YAAY,CACf2B,KAAM,WACJ91H,EAAOg2C,YAAY8iC,MACrB,EACAi9C,KAAM,WACJ/1H,EAAOg2C,YAAYgjC,MACrB,IAEF16F,EAAKg2I,qBAAqB,YAAY,WACpC,OAxcc,SAAUt0H,GAC5B,OAAO+yH,GAAS/yH,GAAQ,SAAU3I,GAChC,OAAOw7H,GAAc7yH,EAAOy4B,UAAWphC,EAAIlK,IAC7C,IAAG7P,MAAM,GACX,CAoca04I,CAAch2H,EACvB,GAAG/5B,MACHqY,EAAKg2I,qBAAqB,YAAY,WACpC,OAlcc,SAAUt0H,GAC5B,OAAO+yH,GAAS/yH,GAAQ,SAAU3I,GAChC,OAAOu7H,GAAY5yH,EAAOy4B,UAAWphC,EAAIlK,IAC3C,IAAG7P,MAAM,GACX,CA8ba24I,CAAcj2H,EACvB,GAAG/5B,MACHqY,EAAKg2I,qBAAqB,cAAc,WACtC,OA/bgB,SAAUt0H,GAC9B,OAAO+yH,GAAS/yH,GAAQ,SAAU3I,GAChC,IAAIrL,EAAOoB,GAAqB4S,EAAOy4B,WACnCy9F,EAAiBlxD,GAAU3tE,GAAK,SAAUA,GAC5C,OAAOT,GAAOS,EAAK,cACrB,GAAG9a,EAAM7C,GAAIsS,IAMb,OAAOkqI,EAAe34I,YALF,WAClB,IAAI26G,EAAaj4C,WAAWxpD,GAAMY,EAAK,gBACnC2gG,EAAW/3C,WAAWxpD,GAAMY,EAAK,cACrC,OAAO9d,OAAO2+G,EAAaF,EAC7B,GAEF,IAAG16G,MAAM,GACX,CAkba64I,CAAgBn2H,EACzB,GAAG/5B,KACL,EACO4tJ,CACT,CAzZqB,GA2ZjBuC,GAA8B,2BAC9B1sG,GAAc,SAAUryB,EAAKg3B,EAAKptB,GA19mBvB,IAAUnrB,EAAS8hD,EA29mB5BlU,GAAIrsB,EAAKg3B,KAAkB,IAAVptB,GA39mBW22B,EA49mBhBvJ,EA39mBZqJ,GADmB5hD,EA49mBZuhB,GA19mBOvhB,EAAQqX,IAAI9lB,UAClBiJ,OAAOsnD,GApBN,SAAU9hD,EAAS8hD,IArBnB,SAAU9hD,EAAS+zB,EAAMhmC,GACtC,IAAI8f,EAAKnE,EAASi4C,GAAO3hD,EAAS+zB,IAAO,SAAU7oB,GACjD,OAAOA,IAAMnd,CACf,IACI8f,EAAGlhB,OAAS,EACd2zB,GAAMtgB,EAAS+zB,EAAMlmB,EAAGmZ,KAAK,MAE7BtG,GAAS1gB,EAAS+zB,EAGtB,EAYSwsH,CAASvgJ,EAAS,QAAS8hD,EACpC,CAoBI0+F,CAASxgJ,EAAS8hD,GAXL,SAAU9hD,GACzB,IAAIzO,EAAYqwD,GAAS5hD,GAAWA,EAAQqX,IAAI9lB,UAlBtC,SAAUyO,GACpB,OAAO2hD,GAAO3hD,EAAS,QACzB,CAgB8DygJ,CAAMzgJ,GACzC,IAArBzO,EAAU5E,QACZ+zB,GAAS1gB,EAAS,QAEtB,CAQE0gJ,CAAW1gJ,IAs9mBAmrB,GACT02B,GAAMtgC,EAAKg3B,EAEf,EACI41F,GAAwB,SAAUjkH,EAAQ65F,EAAK54F,GACjD,IACEjB,EAAO6zC,SAASqJ,YAAY28C,GAAK,EAAOtgH,OAAO0nB,GACjD,CAAE,MAAO/H,GACT,CACF,EACIu9H,GAAqB,SAAUp/H,EAAK4J,GACtC5J,EAAIlK,IAAIhD,gBAAkB8W,EAAQ,OAAS,OAC7C,EAqBIy1H,GAAiB,SAAU12H,EAAQiB,GACrC,IAAI75B,EAAOgmB,GAAqB4S,EAAOy4B,WACvC/O,GAAYtiD,EAAM,uBAAwB65B,GACtCA,GACFjB,EAAOu4B,UAAUinD,iBAAiBljC,iBAClCt8C,EAAOsiE,oBAAoBk+B,gBAbL,SAAUxgG,GAClCxhB,EAASC,KAAKuhB,EAAOu4B,UAAU2F,WAAWpgD,MAAK,SAAUuZ,GACvDA,EAAI7f,gBAAgB,oBACtB,GACF,CAUIm/I,CAAoB32H,GACpBA,EAAO2nB,UAAW,EAClB8uG,GAAmBrvJ,GAAM,GA3B3B+X,EAAO64C,GA4BwB5wD,EA5BP,8BAA8B,SAAUiwB,GAC9DjB,GAAMiB,EAAK++H,GAA6B,QACxCK,GAAmBp/H,GAAK,EAC1B,MA2BE2I,EAAO2nB,UAAW,EAClB8uG,GAAmBrvJ,GAAM,GAzB3B+X,EAAO64C,GA0BuB5wD,EA1BN,KAAOgvJ,GAA8B,aAAa,SAAU/+H,GAClFb,GAASa,EAAK++H,IACdK,GAAmBp/H,GAAK,EAC1B,IAwBE4sH,GAAsBjkH,EAAQ,gBAAgB,GAC9CikH,GAAsBjkH,EAAQ,4BAA4B,GAC1DikH,GAAsBjkH,EAAQ,wBAAwB,GAtoejC,SAAUA,GACjC,OAAOgkB,GAAShkB,IAVD,SAAUA,GACzB,IAAIpQ,EAAMkB,GAAY1D,GAAqB4S,EAAO4lD,eAClD,OAAOtC,GAAO1zD,GAAKrmB,QAAO,SAAU2kB,GAClC,aArIgB5rB,KADd+E,EAsIiC6mB,EAAKf,IAtItB9lB,aAEXA,EAAU6G,SAAS,kBAAoB7G,EAAU6G,SAAS,0BAA4B7G,EAAU6G,SAAS,uBAoIhEk3E,GAAYplD,EAAQ9R,EAAKf,KAvI5C,IAC3B9lB,CAuIJ,IAAG+V,QACL,CAK6Bw5I,CAAW52H,EACxC,CAqoeQ62H,CAAmB72H,IACrBA,EAAO7xB,QArBc,SAAU6xB,GACnCA,EAAOu4B,UAAU2U,OAAOltC,EAAOu4B,UAAUC,SAC3C,CAqBIs+F,CAAqB92H,GACrBA,EAAOi8C,cAEX,EACI0vD,GAAa,SAAU3rG,GACzB,OAAOA,EAAO2nB,QAChB,EACIovG,GAAkB,SAAU/2H,GAC9BA,EAAO2hE,OAAOwiB,mBAAmB,mBAAmB,SAAUhtF,GACxDw0G,GAAW3rG,IACb7gB,EAAOgY,GAAO,SAAUjK,GACtBA,EAAK2c,KAAKusH,GAA6BlpI,EAAK2c,KAAK,oBACjD3c,EAAK2c,KAAK,kBAAmB,QAC/B,GAEJ,IACA7J,EAAO00C,WAAWyvC,mBAAmBiyC,IAA6B,SAAUj/H,GACtEw0G,GAAW3rG,IACb7gB,EAAOgY,GAAO,SAAUjK,GACtBA,EAAK2c,KAAK,kBAAmB3c,EAAK2c,KAAKusH,IACzC,GAEJ,IACAp2H,EAAO00C,WAAWozC,YAAYsuC,GAChC,EAkDIY,GAAe9rI,GAAME,QAAQ,qXAAqY,KACla6rI,GAAkB,WACpB,SAASA,EAAgB12H,GACvBt6B,KAAKixJ,SAAW,CAAC,EACjBjxJ,KAAKs6B,SAAWA,GAAY,CAAC,EAC7Bt6B,KAAKqnB,MAAQrnB,KAAKs6B,SAASjT,OAASrnB,KACpCA,KAAKkxJ,YAAclxJ,KAAKs6B,SAAS42H,aAAev6I,CAClD,CA+GA,OA9GAq6I,EAAgBG,SAAW,SAAUz0J,GACnC,QAASq0J,GAAar0J,EAAK2G,cAC7B,EACA2tJ,EAAgBl/I,UAAUgiC,KAAO,SAAUp3C,EAAMmZ,GAC/C,IAAIu7I,EAAS10J,EAAK2G,cACditC,EAAQE,GAAY4gH,EAAQv7I,GAAQ,CAAC,EAAG7V,KAAKqnB,OAC7CrnB,KAAKs6B,SAAS+2H,YAChBrxJ,KAAKs6B,SAAS+2H,WAAW/gH,GAE3B,IAAIm7C,EAAWzrF,KAAKixJ,SAASG,GAC7B,GAAI3lE,EACF,IAAK,IAAIlvF,EAAI,EAAGsf,EAAI4vE,EAASjvF,OAAQD,EAAIsf,EAAGtf,IAAK,CAC/C,IAAIkD,EAAWgsF,EAASlvF,GACxB,IAAIkD,EAASu6B,QAAb,CAMA,GAHIv6B,EAAS6xJ,MACXtxJ,KAAK8jD,IAAIstG,EAAQ3xJ,EAASg6B,MAExB6W,EAAMc,gCACR,OAAOd,EAET,IAA8C,IAA1C7wC,EAASg6B,KAAKplB,KAAKrU,KAAKqnB,MAAOipB,GAEjC,OADAA,EAAMnoC,iBACCmoC,CATT,CAWF,CAEF,OAAOA,CACT,EACA0gH,EAAgBl/I,UAAU+xC,GAAK,SAAUnnD,EAAM+C,EAAU8rB,EAASmoF,GAIhE,IAHiB,IAAbj0G,IACFA,EAAWkX,GAETlX,EAAU,CACZ,IAAI8xJ,EAAkB,CACpB93H,KAAMh6B,EACNu6B,SAAS,GAEP05E,GACFzuF,GAAMS,OAAO6rI,EAAiB79C,GAIhC,IAFA,IAAIrlF,EAAQ3xB,EAAK2G,cAAciiB,MAAM,KACjC/oB,EAAI8xB,EAAM7xB,OACPD,KAAK,CACV,IAAIi1J,EAAcnjI,EAAM9xB,GACpBkvF,EAAWzrF,KAAKixJ,SAASO,GACxB/lE,IACHA,EAAW,GACXzrF,KAAKkxJ,YAAYM,GAAa,IAG9B/lE,EADElgE,EACSxO,GAAc,CAACw0I,GAAkB9lE,GAAU,GAE3C1uE,GAAcA,GAAc,GAAI0uE,GAAU,GAAO,CAAC8lE,IAAkB,GAEjFvxJ,KAAKixJ,SAASO,GAAe/lE,CAC/B,CACF,CACA,OAAOzrF,IACT,EACAgxJ,EAAgBl/I,UAAUgyC,IAAM,SAAUpnD,EAAM+C,GAC9C,IAAIM,EAAQC,KACZ,GAAItD,EAGF,IAFA,IAAI2xB,EAAQ3xB,EAAK2G,cAAciiB,MAAM,KACjC/oB,EAAI8xB,EAAM7xB,OACPD,KAAK,CACV,IAAIi1J,EAAcnjI,EAAM9xB,GACpBkvF,EAAWzrF,KAAKixJ,SAASO,GAC7B,IAAKA,EAKH,OAJA52I,GAAO5a,KAAKixJ,UAAU,SAAUh/H,EAAQw/H,GACtC1xJ,EAAMmxJ,YAAYO,GAAa,UACxB1xJ,EAAMkxJ,SAASQ,EACxB,IACOzxJ,KAET,GAAIyrF,EAAU,CACZ,GAAKhsF,EAEE,CACL,IAAIiyJ,EAAmBt4I,EAAUqyE,GAAU,SAAUC,GACnD,OAAOA,EAAQjyD,OAASh6B,CAC1B,IACAgsF,EAAWimE,EAAiBp4I,KAC5BtZ,KAAKixJ,SAASO,GAAe/lE,EAC7BvyE,EAAOw4I,EAAiBr4I,MAAM,SAAUqyE,GACtCA,EAAQ1xD,SAAU,CACpB,GACF,MAVEyxD,EAASjvF,OAAS,EAWfivF,EAASjvF,SACZwD,KAAKkxJ,YAAYx0J,GAAM,UAChBsD,KAAKixJ,SAASO,GAEzB,CACF,MAEA52I,GAAO5a,KAAKixJ,UAAU,SAAUh/H,EAAQv1B,GACtCqD,EAAMmxJ,YAAYx0J,GAAM,EAC1B,IACAsD,KAAKixJ,SAAW,CAAC,EAEnB,OAAOjxJ,IACT,EACAgxJ,EAAgBl/I,UAAUw/I,KAAO,SAAU50J,EAAM+C,EAAU8rB,GACzD,OAAOvrB,KAAK6jD,GAAGnnD,EAAM+C,EAAU8rB,EAAS,CAAE+lI,MAAM,GAClD,EACAN,EAAgBl/I,UAAU2rC,IAAM,SAAU/gD,GAExC,OADAA,EAAOA,EAAK2G,iBACFrD,KAAKixJ,SAASv0J,IAAwC,IAA/BsD,KAAKixJ,SAASv0J,GAAMF,OACvD,EACOw0J,CACT,CAtHsB,GAwHlBW,GAAqB,SAAUnyJ,GAWjC,OAVKA,EAAIoyJ,mBACPpyJ,EAAIoyJ,iBAAmB,IAAIZ,GAAgB,CACzC3pI,MAAO7nB,EACP0xJ,YAAa,SAAUx0J,EAAMs+B,GACvBg2H,GAAgBG,SAASz0J,IAAS8C,EAAIqyJ,mBACxCryJ,EAAIqyJ,kBAAkBn1J,EAAMs+B,EAEhC,KAGGx7B,EAAIoyJ,gBACb,EACIE,GAAa,CACfh+G,KAAM,SAAUp3C,EAAMmZ,EAAMk8I,GAC1B,IAAI15I,EAAOrY,KACX,GAAIqY,EAAK2hB,SAAoB,WAATt9B,GAA8B,WAATA,EACvC,OAAOmZ,EAET,IAAIm8I,EAAiBL,GAAmBt5I,GAAMy7B,KAAKp3C,EAAMmZ,GACzD,IAAe,IAAXk8I,GAAoB15I,EAAKoO,OAE3B,IADA,IAAIskD,EAAW1yD,EAAKoO,SACbskD,IAAainF,EAAe9gH,wBACjC65B,EAASj3B,KAAKp3C,EAAMs1J,GAAgB,GACpCjnF,EAAWA,EAAStkD,SAGxB,OAAOurI,CACT,EACAnuG,GAAI,SAAUnnD,EAAM+C,EAAU8rB,GAC5B,OAAOomI,GAAmB3xJ,MAAM6jD,GAAGnnD,EAAM+C,EAAU8rB,EACrD,EACAu4B,IAAK,SAAUpnD,EAAM+C,GACnB,OAAOkyJ,GAAmB3xJ,MAAM8jD,IAAIpnD,EAAM+C,EAC5C,EACA6xJ,KAAM,SAAU50J,EAAM+C,GACpB,OAAOkyJ,GAAmB3xJ,MAAMsxJ,KAAK50J,EAAM+C,EAC7C,EACAyiH,kBAAmB,SAAUxlH,GAC3B,OAAOi1J,GAAmB3xJ,MAAMy9C,IAAI/gD,EACtC,GAGEu1J,GAAQzsG,GAAS+E,IAEjB2nG,GAAiB,SAAUn4H,EAAQo4H,GACrC,GAAkB,oBAAdA,EACF,OAAOp4H,EAAO6zC,SAEhB,IAAK7zC,EAAOyQ,QAAU,uDAAuDxpC,KAAKmxJ,GAChF,OAAOp4H,EAAO6zC,SAAS3iE,gBAEzB,IAAImnJ,EAAYp1F,GAAajjC,GAC7B,OAAIq4H,GACGr4H,EAAOq4H,YACVr4H,EAAOq4H,UAAYH,GAAMlyG,OAAOqyG,GAAW,IAEtCr4H,EAAOq4H,WAETr4H,EAAOy4B,SAChB,EAIIy2D,GAAY,SAAUlvF,EAAQo4H,EAAWnqJ,IAH3B,SAAU+xB,GAC1B,OAAQA,EAAO4wH,SAAWjlB,GAAW3rG,EACvC,CAEMs4H,CAAYt4H,GAEL2rG,GAAW3rG,IAzNI,SAAUA,EAAQ/xB,GAC5C,GAZiB,SAAUA,GAC3B,MAAkB,UAAXA,EAAE7B,IACX,CAUMmsJ,CAAatqJ,KAAOopE,GAAGmB,eAAevqE,GAAI,CAC5C,IAAIopB,EAAMjK,GAAqBnf,EAAEhL,SAVd,SAAU+8B,EAAQ3I,GAIvC,OAAO6H,GAAU7H,EAAK,KAHT,SAAUA,GACrB,OAAO3d,GAAG2d,EAAKjK,GAAqB4S,EAAOy4B,WAC7C,IACmC16C,MAAK,SAAUpU,GAChD,OAAO4sB,GAAO5sB,EAAG,OACnB,GACF,EAII6uJ,CAAiBx4H,EAAQ3I,GAAKvZ,MAAK,SAAUmmC,GAE3C,GADAh2C,EAAEG,iBACE,KAAKnH,KAAKg9C,GAAO,CACnB,IAAIw0G,EAAWz4H,EAAO7S,IAAI64B,OAAO/B,EAAO,YArj1BvCr/B,GADqBD,EAsj1B6Cs/B,EAAM,KA7j1B3D,SAAUt/B,EAAK+zI,GACnC,OAAO/zI,EAAIuxC,UAO2CrxC,EANxD,CAMmC8zI,CAAgBh0I,GAAsBA,GAqj1Be,MAC5E8zI,EAASh2J,QACXu9B,EAAOu4B,UAAUrlC,eAAeulI,EAAS,IAAI,EAEjD,MACE10J,OAAOu9G,KAAKr9D,EAAM,SAAU,wGA3j1BhB,IAAUt/B,CA6j1B1B,GACF,CACF,CA2MIi0I,CAAsB54H,EAAQ/xB,GAF9B+xB,EAAO+Z,KAAKq+G,EAAWnqJ,EAI3B,EACI4qJ,GAAoB,SAAU74H,EAAQo4H,GACxC,IAAIU,EAIJ,GAHK94H,EAAO+4H,YACV/4H,EAAO+4H,UAAY,CAAC,IAElB/4H,EAAO+4H,UAAUX,KAAcp4H,EAAOC,QAA1C,CAGA,IAAI+4H,EAAeb,GAAen4H,EAAQo4H,GAC1C,GAAIn1F,GAAajjC,GAAS,CAcxB,GAbKilG,KACHA,GAA2B,CAAC,EAC5BjlG,EAAOwlD,cAAc17B,GAAG,gBAAgB,WACjC9pB,EAAOwlD,cAAcM,cACpBm/C,KACFpkH,GAAOokH,IAA0B,SAAU/sG,EAAQv1B,GACjDq9B,EAAO7S,IAAIysB,OAAOu+G,GAAen4H,EAAQr9B,GAC3C,IACAsiI,GAA2B,KAGjC,KAEEA,GAAyBmzB,GAC3B,OAEFU,EAAW,SAAU7qJ,GAInB,IAHA,IAAIhL,EAASgL,EAAEhL,OACXg2J,EAAUj5H,EAAOwlD,cAAcprD,MAC/B53B,EAAIy2J,EAAQx2J,OACTD,KAAK,CACV,IAAI4E,EAAO6xJ,EAAQz2J,GAAGi2D,WAClBrxD,IAASnE,GAAUi1J,GAAM/lG,UAAUlvD,EAAQmE,KAC7C8nH,GAAU+pC,EAAQz2J,GAAI41J,EAAWnqJ,EAErC,CACF,EACAg3H,GAAyBmzB,GAAaU,EACtCZ,GAAMn6I,KAAKi7I,EAAcZ,EAAWU,EACtC,MACEA,EAAW,SAAU7qJ,GACnBihH,GAAUlvF,EAAQo4H,EAAWnqJ,EAC/B,EACAiqJ,GAAMn6I,KAAKi7I,EAAcZ,EAAWU,GACpC94H,EAAO+4H,UAAUX,GAAaU,CArChC,CAuCF,EACII,GAAmBr2I,GAASA,GAAS,CAAC,EAAGk1I,IAAa,CACxD/V,0BAA2B,WACzB,IAAI1jI,EAAOrY,KACXilB,GAAMpN,KAAKQ,EAAK66I,sBAAsB,SAAUx2J,GAC9Ck2J,GAAkBv6I,EAAM3b,EAC1B,GACF,EACAm1J,kBAAmB,SAAUn1J,EAAMs+B,GACjC,IAAI3iB,EAAOrY,KACE,UAATtD,GAA6B,SAATA,IAGpB2b,EAAK2hB,UAGLgB,EACE3iB,EAAK87H,YACPye,GAAkBv6I,EAAM3b,GAEnB2b,EAAK66I,qBAGR76I,EAAK66I,qBAAqBzuJ,KAAK/H,GAF/B2b,EAAK66I,qBAAuB,CAACx2J,GAKxB2b,EAAK87H,cACd97H,EAAK6O,IAAIysB,OAAOu+G,GAAe75I,EAAM3b,GAAOA,EAAM2b,EAAKy6I,UAAUp2J,WAC1D2b,EAAKy6I,UAAUp2J,KAE1B,EACAy2J,sBAAuB,WACrB,IAAI96I,EAAOrY,KACPmB,EAAOkX,EAAKm6C,UACZtrC,EAAM7O,EAAK6O,IACX7O,EAAKy6I,YACPl4I,GAAOvC,EAAKy6I,WAAW,SAAUryJ,EAAO/D,GACtC2b,EAAK6O,IAAIysB,OAAOu+G,GAAe75I,EAAM3b,GAAOA,EAAM+D,EACpD,WACO4X,EAAKy6I,YAETz6I,EAAKmyB,QAAUrpC,GAAQ+lB,IAC1B/lB,EAAKkR,OAAS,KACd6U,EAAIysB,OAAOt7B,EAAKwmI,UAChB33H,EAAIysB,OAAOt7B,EAAKu1D,WAEd1mD,IACFA,EAAIysB,OAAOxyC,GACX+lB,EAAIysB,OAAOt7B,EAAKwsF,gBAEpB,IAGEuuD,GAAe,CACjB,SACA,YAEEC,GAAe,SAAUt5H,EAAQu5H,EAAYC,EAAgB7tH,GAC/D,IAAI8tH,EAAUD,EAAeD,EAAWn/H,OACpCs/H,EAAUF,EAAe7tH,GAC7B,IACE+tH,EAAQC,UACV,CAAE,MAAO1rJ,GAEP,MACF,CACAwrJ,EAAQG,aACJH,EAAQI,iBAAmBH,EAAQG,gBACrCnD,GAAe12H,EAAQ05H,EAAQG,gBAEjCN,EAAWp2H,IAAIwI,GAj7hBI,SAAU3L,EAAQ2L,GAC9B3L,EAAO+Z,KAAK,aAAc,CAAEpO,KAAMA,GAC3C,CAg7hBEmuH,CAAe95H,EAAQ2L,EACzB,EA+DIouH,GAAS7uI,GAAMpN,KAAMk8I,GAAY9uI,GAAM2B,QACvCotI,GAAgB,CAClBC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,IAAK,IACLC,IAAK,IACLC,IAAK,KAEHC,GAAgB5vI,GAAME,QAAQ,8BAC9B2vI,GAAgB,SAAU9qH,GAC5B,IAAIxsC,EACAu3J,EAAW,CAAC,EAChBjB,GAAOC,GAAU/pH,EAAQ3mC,cAAe,MAAM,SAAU5C,GAClDA,KAASo0J,GACXE,EAASt0J,IAAS,EAEd,cAAcO,KAAKP,GACrBs0J,EAAS/hC,QAAU/hH,SAASxQ,EAAO,KAEnCs0J,EAASC,SAAWv0J,EAAMqjC,WAAW,GACrCixH,EAAS/hC,QAAUghC,GAAcvzJ,IAAUA,EAAM4kC,cAAcvB,WAAW,GAGhF,IACA,IAAIlmC,EAAK,CAACm3J,EAAS/hC,SACnB,IAAKx1H,KAAOq3J,GACNE,EAASv3J,GACXI,EAAG6G,KAAKjH,GAERu3J,EAASv3J,IAAO,EAoBpB,OAjBAu3J,EAASn3J,GAAKA,EAAGi5B,KAAK,KAClBk+H,EAASE,SACXF,EAASG,KAAM,EACXrxI,GAAIG,IACN+wI,EAASI,MAAO,EAEhBJ,EAAS/8G,OAAQ,GAGjB+8G,EAASK,OACPvxI,GAAIG,IACN+wI,EAASK,MAAO,GAEhBL,EAASI,MAAO,EAChBJ,EAASK,MAAO,IAGbL,CACT,EACIM,GAAY,WACd,SAASA,EAAUt7H,GACjB/5B,KAAKk+I,UAAY,CAAC,EAClBl+I,KAAKs1J,gBAAkB,GACvBt1J,KAAK+5B,OAASA,EACd,IAAI1hB,EAAOrY,KACX+5B,EAAO8pB,GAAG,0BAA0B,SAAU77C,IACvCqQ,EAAKk9I,YAAYvtJ,KAAMqQ,EAAKm9I,cAAcxtJ,IAAQA,EAAEgpC,uBACvD8iH,GAAOz7I,EAAK6lI,WAAW,SAAU6W,GAC/B,GAAI18I,EAAKo9I,cAAcztJ,EAAG+sJ,GAKxB,OAJA18I,EAAKi9I,gBAAkBP,EAASW,YAAYthJ,MAAM,GACnC,YAAXpM,EAAE7B,MACJkS,EAAKs9I,sBAAsBZ,IAEtB,CAEX,IACI18I,EAAKo9I,cAAcztJ,EAAGqQ,EAAKi9I,gBAAgB,MACT,IAAhCj9I,EAAKi9I,gBAAgB94J,QACR,YAAXwL,EAAE7B,MACJkS,EAAKs9I,sBAAsBt9I,EAAKi9I,gBAAgB,IAGpDj9I,EAAKi9I,gBAAgBt9G,SAG3B,GACF,CAqEA,OApEAq9G,EAAUvjJ,UAAUzQ,IAAM,SAAU2oC,EAAS4rH,EAAMC,EAASxuI,GAC1D,IAAIhP,EAAOrY,KACPy5B,EAAOphB,EAAKy9I,qBAAqBD,GAKrC,OAJA/B,GAAOC,GAAU9uI,GAAM/T,KAAK84B,KAAW,SAAUA,GAC/C,IAAI+qH,EAAW18I,EAAK09I,eAAe/rH,EAAS4rH,EAAMn8H,EAAMpS,GACxDhP,EAAK6lI,UAAU6W,EAASn3J,IAAMm3J,CAChC,KACO,CACT,EACAM,EAAUvjJ,UAAUzH,OAAS,SAAU2/B,GACrC,IAAI+qH,EAAW/0J,KAAK+1J,eAAe/rH,GACnC,QAAIhqC,KAAKk+I,UAAU6W,EAASn3J,aACnBoC,KAAKk+I,UAAU6W,EAASn3J,KACxB,EAGX,EACAy3J,EAAUvjJ,UAAUgkJ,qBAAuB,SAAUD,GACnD,IAAIx9I,EAAOrY,KACP4zH,EAAMiiC,EACV,MAAmB,iBAARjiC,EACF,WACLv7G,EAAK0hB,OAAOk9C,YAAY28C,GAAK,EAAO,KACtC,EACS3uG,GAAMxJ,QAAQm4G,GAChB,WACLv7G,EAAK0hB,OAAOk9C,YAAY28C,EAAI,GAAIA,EAAI,GAAIA,EAAI,GAC9C,EAEOA,CAEX,EACAyhC,EAAUvjJ,UAAUikJ,eAAiB,SAAU/rH,EAAS4rH,EAAMC,EAASxuI,GACrE,IAAI62H,EAAYj5H,GAAM9hB,IAAI4wJ,GAAU/pH,EAAS,KAAM8qH,IAKnD,OAJA5W,EAAUA,EAAU1hJ,OAAS,GAAKyoB,GAAMS,OAAOw4H,EAAUA,EAAU1hJ,OAAS,GAAI,CAC9Ei9B,KAAMo8H,EACNxuI,MAAOA,GAASrnB,KAAK+5B,SAEhB9U,GAAMS,OAAOw4H,EAAU,GAAI,CAChC0X,KAAM51J,KAAK+5B,OAAO7N,UAAU0pI,GAC5BF,YAAaxX,EAAU9pI,MAAM,IAEjC,EACAihJ,EAAUvjJ,UAAUyjJ,YAAc,SAAUvtJ,GAC1C,OAAOA,EAAEsqE,QAAUtqE,EAAEqqE,SAAWrqE,EAAEsqC,OACpC,EACA+iH,EAAUvjJ,UAAU0jJ,cAAgB,SAAUxtJ,GAC5C,MAAkB,YAAXA,EAAE7B,MAAsB6B,EAAEgrH,SAAW,KAAOhrH,EAAEgrH,SAAW,GAClE,EACAqiC,EAAUvjJ,UAAU2jJ,cAAgB,SAAUztJ,EAAG+sJ,GAC/C,QAAKA,GAGDA,EAASI,OAASntJ,EAAEqqE,SAAW0iF,EAASK,OAASptJ,EAAEsqC,SAGnDyiH,EAASG,MAAQltJ,EAAEsqE,QAAUyiF,EAAS/8G,QAAUhwC,EAAEoqE,aAGlDpqE,EAAEgrH,UAAY+hC,EAAS/hC,SAAWhrH,EAAEgtJ,UAAYhtJ,EAAEgtJ,WAAaD,EAASC,YAC1EhtJ,EAAEG,kBACK,EAGX,EACAktJ,EAAUvjJ,UAAU6jJ,sBAAwB,SAAUZ,GACpD,OAAOA,EAASt7H,KAAOs7H,EAASt7H,KAAKplB,KAAK0gJ,EAAS1tI,OAAS,IAC9D,EACOguI,CACT,CAjGgB,GAqKZW,GAAQxwG,GAAS+E,IACjB0rG,GAAWhxI,GAAMS,OAAQwwI,GAASjxI,GAAMpN,KACxCrW,GAAUyjB,GAAMzjB,QAChBsiB,GAAKD,GAAIC,GACTqyI,GAAS,WACX,SAASA,EAAOv4J,EAAI08B,EAAUilD,GAC5B,IAvEE62E,EACAC,EACAC,EACA7uC,EACA8uC,EACAC,EACAC,EACAp1J,EAsCAq1J,EA0BE32J,EAAQC,KACZA,KAAK+1G,QAAU,CAAC,EAChB/1G,KAAK8rH,WAAa,GAClB9rH,KAAK48I,cAAgB,GACrB58I,KAAK22J,UAAY,CAAC,EAClB32J,KAAK42J,YAAa,EAClB52J,KAAKu/E,cAAgBA,EACrBv/E,KAAKioJ,gBAAkB1oE,EAAcs3E,gBACrCZ,GAASj2J,KAAMizJ,IACfjzJ,KAAKs6B,SA78Qe,SAAUP,EAAQn8B,EAAIqqJ,EAAiBjiC,EAAyB1rF,GACtF,IAAIwsF,EApFmB,SAAUxsF,EAAU18B,EAAIqqJ,EAAiBnlI,EAASiX,GACzE,IAAI+8H,EAAe,CACjBl5J,GAAIA,EACJ6oH,MAAO,SACPlB,aAAcJ,GAAe7qF,EAAU,YACvCy7E,QAAS,GACTghD,kBAAmB9O,EACnB+O,yBAAyB,EACzBC,cAAc,EACdC,oBAAoB,EACpBC,cAAc,EACdC,eAAe,EACfC,oBAAoB,EACpBzyC,iBAAiB,EACjB99B,QAAS,kBACTwwE,QAAQ,EACR58C,wBAAyB,oDACzB5Q,kBAAmB,IACnBytD,cAAc,EACd51C,eAAe,EACftH,wBAAwB,EACxBxvB,QAAQ,EACRE,cAAe,oMACfE,aAAc,oMACdC,gBAAiB,QACjBh9C,cAAenU,EAAOwoH,WACtBn0G,oBAAqBrU,GAEvB,OAAOnd,GAASA,GAAS,CAAC,EAAGk6I,GAAeh0I,EAAU4hG,GAAuB,CAAC,EAChF,CAuDwB8yC,CAAmBl9H,EAAU18B,EAAIqqJ,EAAiBnlI,GAASiX,GAC7E09H,EAAgB5wC,GAAgB7jG,IAAWD,GAAUC,GAAS8jG,EAAiBd,EAAyB1rF,GAI5G,OAH2C,IAAvCm9H,EAAcC,sBAlKS,SAAUC,EAAaF,GAClD,IAAI3zC,EAAqBG,GAAsB0zC,GAC3C5zC,EAAoBK,GAAqBqzC,GACzCG,EAAuB7zC,EAAkBvnH,OAAS,EAClDq7J,EAAwB/zC,EAAmBtnH,OAAS,EACpDs7J,EAA8C,WAAxBL,EAAchxC,OACpCmxC,GAAwBC,GAAyBC,KAG9BF,GAAqD7zC,EAAkBltF,KAF3E,QAGKghI,GAAuD/zC,EAAmBjtF,KAH/E,QAMrB,CAsJIkhI,CAAuBz9H,EAAUm9H,GAE5BA,CACT,CAs8QoBO,CAAkBh4J,KAAMpC,EAAIoC,KAAKioJ,gBAAiB1oE,EAAcunC,gBAAiBxsF,GAC7Ft6B,KAAKs6B,SAASgU,SAChBixC,EAAcjxC,OAAStuC,KAAKs6B,SAASgU,QAEvCtuC,KAAKsuC,OAASixC,EAAcjxC,OACxBtuC,KAAKs6B,SAAS29H,UAChB14E,EAAc24E,YAAYl4J,KAAKs6B,SAAS29H,UAE1Cj4J,KAAKwiF,QAAUjD,EAAc44E,QACzBn4J,KAAKs6B,SAAS89H,kBAChBtrG,GAAaA,aAAalwB,mBAAmB58B,KAAKs6B,SAAS89H,iBAC3D5yG,GAAS+E,IAAI3E,iBAAiBhpB,mBAAmB58B,KAAKs6B,SAAS89H,kBAEjEhpG,GAAaoB,aAAexwD,KAAKs6B,SAAS+9H,cAC1CjpG,GAAaY,QAAUuvB,EAAcvvB,QACrChwD,KAAKpC,GAAKA,EACVoC,KAAK2yG,UAAS,GACd3yG,KAAK4rH,gBAAkB,IAAIrpC,GAAIviF,KAAKs6B,SAASy8H,kBAAmB,CAAEt0E,SAAUziF,KAAKwiF,UACjFxiF,KAAKm4J,QAAUn4J,KAAKwiF,QACpBxiF,KAAKwqC,SAAWxqC,KAAKs6B,SAASkQ,OAC9BxqC,KAAKk+I,UAAY,IAAImX,GAAUr1J,MAC/BA,KAAKs4J,eAAiB,IAAI1K,GAAe5tJ,MACrCA,KAAKs6B,SAASi+H,eAChB10I,GAAIY,YAAczkB,KAAKs6B,SAASi+H,aAAatuJ,QAAQ,WAAY,KAEnEjK,KAAKy8I,GAAK,CACRluE,UAzGA8nF,EAAY,CAAC,EACbC,EAAS,CAAC,EACV7uC,EAAQ,CAAC,EACT8uC,EAAe,CAAC,EAChBC,EAAkB,CAAC,EACnBC,EAAW,CAAC,EACZp1J,EAAM,SAAUgb,EAAYlW,GAC9B,OAAO,SAAUzJ,EAAMguG,GACrB,OAAOruF,EAAW3f,EAAK2G,eAAiBuZ,GAASA,GAAS,CAAC,EAAG8tF,GAAO,CAAEvkG,KAAMA,GAC/E,CACF,EAkCIuwJ,EA9BG,CACL8B,UAAWn3J,EAhBT+0J,EAAU,CAAC,EAgBW,UACxBqC,sBAAuBp3J,EAAI+0J,EAAS,sBACpCsC,gBAAiBr3J,EAAI+0J,EAAS,gBAC9BuC,cAAet3J,EAAI+0J,EAAS,cAC5BwC,eAAgBv3J,EAAI+0J,EAAS,eAC7ByC,YAAax3J,EAAIg1J,EAAW,YAC5ByC,kBAAmBz3J,EAAIg1J,EAAW,kBAClC0C,kBAAmB13J,EAAIg1J,EAAW,kBAClC2C,iBAAkB33J,EAAIi1J,EAAQ,iBAC9B2C,eAAgB53J,EAAIk1J,EAAc,eAClC2C,kBAAmB73J,EAAIm1J,EAAiB,kBACxC2C,eAAgB93J,EAAIm1J,EAAiB,eACrC4C,WAAY/3J,EAAIo1J,EAAU,WAC1B1M,QAjBY,SAAUrtJ,EAAMmtJ,GAC5B,OAAOpiC,EAAM/qH,EAAK2G,eAAiBwmJ,CACrC,EAgBEt5E,OAAQ,WACN,MAAO,CACL6lF,QAASA,EACTC,UAAWA,EACX5uC,MAAOA,EACP6uC,OAAQA,EACRC,aAAcA,EACdC,gBAAiBA,EACjBC,SAAUA,EAEd,GAMK,CACLuC,iBAAkBtC,EAAOsC,iBACzBR,UAAW9B,EAAO8B,UAClBW,eAAgBzC,EAAOyC,eACvBF,eAAgBvC,EAAOuC,eACvBC,kBAAmBxC,EAAOwC,kBAC1BnP,QAAS2M,EAAO3M,QAChB4O,cAAejC,EAAOiC,cACtBE,YAAanC,EAAOmC,YACpBC,kBAAmBpC,EAAOoC,kBAC1BM,WAAY1C,EAAO0C,WACnBR,eAAgBlC,EAAOkC,eACvBF,gBAAiBhC,EAAOgC,gBACxBD,sBAAuB/B,EAAO+B,sBAC9BM,kBAAmBrC,EAAOqC,kBAC1BxoF,OAAQmmF,EAAOnmF,SA8Cb3qB,sBAAkBvpD,EAClB2nD,KAAMvuC,EACNwuC,KAAMxuC,EACN+0I,OAAQ/0I,EACR60I,QAAS70I,EACT80I,WAAY5zI,GAEd,IAhTqBojB,EACnBu5H,EACAC,EA+SE8F,GAjTiBt/H,EAgTV/5B,KA/STszJ,EAAavlG,GAAK,UAClBwlG,EAAiBxlG,GAAK,CACxBurG,OAAQ,CACN5F,SAAUj+I,EACVk+I,WAAYl+I,EACZm+I,gBAAgB,GAElBlyG,SAAU,CACRgyG,SAAUj+I,EACVk+I,WAAYl+I,EACZm+I,gBAAgB,KAjZe,SAAU75H,GACzCA,EAAO00C,WACTqiF,GAAgB/2H,GAEhBA,EAAO8pB,GAAG,WAAW,WACnBitG,GAAgB/2H,EAClB,GAEJ,CA4YEw/H,CAA+Bx/H,GAhXO,SAAUA,GAChDA,EAAO8pB,GAAG,aAAa,SAAU77C,GAC3B09H,GAAW3rG,IACb/xB,EAAEG,gBAEN,IACA4xB,EAAO8pB,GAAG,kBAAkB,SAAU77C,GAChC09H,GAAW3rG,IACb/xB,EAAEG,gBAEN,GACF,CAsWEqxJ,CAAkCz/H,GAC3B,CACL2rG,WAAY,WACV,OAAOA,GAAW3rG,EACpB,EACAmD,IAAK,SAAUwI,GACb,OAnDQ,SAAU3L,EAAQw5H,EAAgBD,EAAY5tH,GAC1D,GAAIA,IAAS4tH,EAAWn/H,MAAxB,CAEO,IAAK5Y,GAAMg4I,EAAgB7tH,GAChC,MAAM,IAAIv3B,MAAM,gBAAmBu3B,EAAO,gBAExC3L,EAAOo6G,YACTkf,GAAat5H,EAAQu5H,EAAYC,EAAgB7tH,GAEjD3L,EAAO8pB,GAAG,QAAQ,WAChB,OAAOwvG,GAAat5H,EAAQu5H,EAAYC,EAAgB7tH,EAC1D,GANF,CAQF,CAsCa+zH,CAAQ1/H,EAAQw5H,EAAep/H,MAAOm/H,EAAY5tH,EAC3D,EACAvR,IAAK,WACH,OAAOm/H,EAAWn/H,KACpB,EACAq6C,SAAU,SAAU9oC,EAAMo0C,GACxBy5E,EAAer2H,IA3CF,SAAUq2H,EAAgB7tH,EAAMo0C,GACjD,IAAIx3D,EACJ,GAAIxJ,EAAWs6I,GAAc1tH,GAC3B,MAAM,IAAIv3B,MAAM,gCAAkCu3B,GAEpD,OAAO9oB,GAASA,GAAS,CAAC,EAAG22I,KAAkBjxI,EAAK,CAAC,GAAMojB,GAAQ9oB,GAASA,GAAS,CAAC,EAAGk9D,GAAM,CAC7F65E,WAAY,WACV,IACE75E,EAAI65E,YACN,CAAE,MAAO3rJ,GAET,CACF,IACEsa,GACN,CA6ByBo3I,CAAanG,EAAep/H,MAAOuR,EAAMo0C,GAC9D,IAsRA95E,KAAK0lC,KAAO2zH,EACZr5J,KAAKy5J,QAAUJ,EAAan8H,IAC5BqiD,EAAczrC,KAAK,cAAe,CAAE/Z,OAAQ/5B,OAC5CA,KAAKm8I,aAAa,QAASn8I,MAC3BA,KAAK+lD,EAAIhF,GAAS8D,kBAAiB,WACjC,MAAO,CACL9N,QAASh3C,EAAMyqC,OAASzqC,EAAMyyD,UAAYzyD,EAAM6tE,SAChD/9D,QAAS9P,EAAMyyD,UAEnB,GACF,CAoSA,OAnSA2jG,EAAOrkJ,UAAU6nJ,OAAS,YAn6Cf,SAAU5/H,GACrB,IAAIn8B,EAAKm8B,EAAOn8B,GAChBuwD,GAAKE,QAAQsO,GAAgB5iC,IAC7B,IAAI2Y,EAAe,WACjBm4G,GAAMl3G,OAAO71C,OAAQ,QAAS40C,GAC9B3Y,EAAO4/H,QACT,EACA,GAAKhnH,GAAWpC,MAAMkC,WAItB,GAAK1Y,EAAO4lD,cAGP97D,GAAIK,gBAAT,CAGA,IAAIrU,EAAUsX,GAAqB4S,EAAO4lD,cACtCi6E,EA7xxBQ,SAAU/pJ,GACtB,OAAO6J,EAAM7J,EAAQqX,IAAIuf,YAAY,SAAUhtB,EAAKmqB,GAElD,OADAnqB,EAAImqB,EAAKlnC,MAAQknC,EAAKnjC,MACfgZ,CACT,GAAG,CAAC,EACN,CAwxxBiBogJ,CAAQhqJ,GACvBkqB,EAAO8pB,GAAG,UAAU,WAClB1qC,EAAMtJ,EAAQqX,IAAIuf,YAAY,SAAU7C,GACtC,OAAOrT,GAAS1gB,EAAS+zB,EAAKlnC,KAChC,IACA0zB,GAASvgB,EAAS+pJ,EACpB,IACA7/H,EAAO0iH,GAAG72F,iBA/Bc,SAAU/1C,EAASkqB,GAC3C,OAAO95B,GAAS68B,WAAWjtB,EAAS,CAClCmsB,eAAgBohC,GAAkBrjC,GAClCkC,eAAgBygC,GAAkB3iC,IAEtC,CA0B+B+/H,CAAoBjqJ,EAASkqB,GAnpjB7C,SAAUA,GACvB,OAAOA,EAAO6hC,SAAS,SACzB,CAkpjBOm+F,CAAShgI,GAIZA,EAAOyQ,QAAS,GAHhBzQ,EAAOymH,cAAgBzmH,EAAO4lD,aAAa/zE,MAAMmD,WACjDgrB,EAAO4lD,aAAa/zE,MAAMmD,WAAa,UAIzC,IAAI9J,EAAO80B,EAAO4lD,aAAa16E,MAAQ4lJ,GAAMvhG,UAAU1rD,EAAI,QACvDqH,IACF80B,EAAOigI,YAAc/0J,EAzpjBJ,SAAU80B,GAC7B,OAAOA,EAAO6hC,SAAS,eACzB,CAwpjBQq+F,CAAelgI,KAAY/K,GAAkB+K,EAAO4lD,gBACtDkrE,GAAM9/F,YAAY8/F,GAAM/kI,OAAO,QAAS,CACtC3f,KAAM,SACNzJ,KAAMkB,IACJA,GACJm8B,EAAOkgI,gBAAiB,GAE1BlgI,EAAOmgI,kBAAoB,SAAUlyJ,GACnC+xB,EAAO+Z,KAAK9rC,EAAE7B,KAAM6B,EACtB,EACA6iJ,GAAM/yI,KAAK7S,EAAM,eAAgB80B,EAAOmgI,mBACxCngI,EAAO8pB,GAAG,SAAS,WACjB9pB,EAAOogI,cACT,KApqjBoB,SAAUpgI,GAChC,OAAOA,EAAO6hC,SAAS,eACzB,CAmqjBQw+F,CAAkBrgI,IAAY90B,EAAKo1J,OAAOryI,UAAa/iB,EAAKo1J,OAAO79J,QAAWyI,EAAKq1J,gBACrFr1J,EAAKq1J,cAAgBr1J,EAAKo1J,OAC1Bp1J,EAAKo1J,OAAS,WAGZ,OAFAtgI,EAAOwlD,cAAcg7E,cACrBxgI,EAAO44E,UAAS,GACT1tG,EAAKq1J,cAAcr1J,EAC5B,IAGJ80B,EAAOygI,cAAgB5wC,GAAc7vF,GACrCA,EAAOixF,oBAAsB1C,GAAoBvuF,GA5qjB/B,SAAUA,GAC5B,MAAuC,QAAhCA,EAAO6hC,SAAS,WACzB,CA2qjBM6+F,CAAc1gI,IAChBA,EAAO8pB,GAAG,cAAc,SAAU77C,GAC5BA,EAAE0yJ,OACJ1yJ,EAAEk7C,QAAU2nG,GAAMp8G,OAAOzmC,EAAEk7C,SAE/B,IA/qjB6B,SAAUnpB,GACzC,OAAOA,EAAO6hC,SAAS,0BACzB,CA+qjBM++F,CAA2B5gI,IAC7BA,EAAO8pB,GAAG,UAAU,WACd9pB,EAAOo6G,aACTp6G,EAAO2gI,MAEX,IAnrjByB,SAAU3gI,GACrC,OAAOA,EAAO6hC,SAAS,qBACzB,CAmrjBMg/F,CAAuB7gI,KACzBA,EAAO8gI,cAAgB,YACjB9gI,EAAOo6G,aAAgBp6G,EAAOuiH,WAAcviH,EAAO2wB,YACrD3wB,EAAO2gI,KAAK,CACVhtJ,OAAQ,MACRowF,WAAW,EACXg9D,WAAW,GAGjB,EACA/gI,EAAOwlD,cAAc17B,GAAG,eAAgB9pB,EAAO8gI,gBAEjD9gI,EAAOwlD,cAAcl+E,IAAI04B,GACzB0zB,GAAY1zB,EAAQA,EAAOuU,OAvE3B,OAREu8G,GAAM/yI,KAAKha,OAAQ,QAAS40C,EAgFhC,CA40CIinH,CAAO35J,KACT,EACAm2J,EAAOrkJ,UAAU5J,MAAQ,SAAU2mJ,GACjC7uJ,KAAKi3E,YAAY,YAAY,EAAO43E,EACtC,EACAsH,EAAOrkJ,UAAUisC,SAAW,WAC1B,OAAOA,GAAS/9C,KAClB,EACAm2J,EAAOrkJ,UAAUqqI,aAAe,SAAUz/I,GAExC,IADA,IAAIuW,EAAI,GACClP,EAAK,EAAGA,EAAK+R,UAAUtZ,OAAQuH,IACtCkP,EAAElP,EAAK,GAAK+R,UAAU/R,GAExB,IACoCsjB,EADhChP,EAAOrY,KACPP,EAAW4Y,EAAKiiB,SAAS59B,GAC7B,GAAK+C,EAiBL,OAdI4Y,EAAK0iJ,iBAAmB1zI,EAAQhP,EAAK0iJ,eAAer+J,MACtD+C,EAAW4nB,EAAMoS,KACjBpS,EAAQA,EAAMA,OAEQ,iBAAb5nB,IAET4nB,GADAA,EAAQ5nB,EAASwK,QAAQ,SAAU,KACnBzI,GAAQ6lB,GAAS,EACjC5nB,EAAW+B,GAAQ/B,GACnB4Y,EAAK0iJ,eAAiB1iJ,EAAK0iJ,gBAAkB,CAAC,EAC9C1iJ,EAAK0iJ,eAAer+J,GAAQ,CAC1B+8B,KAAMh6B,EACN4nB,MAAOA,IAGJ5nB,EAASsW,MAAMsR,GAAShP,EAAMpF,EACvC,EACAkjJ,EAAOrkJ,UAAUoa,UAAY,SAAUxE,GACrC,OAAOymC,GAAKjiC,UAAUxE,EACxB,EACAyuI,EAAOrkJ,UAAU8pD,SAAW,SAAUl/D,EAAMypD,EAAYhgD,GACtD,OAngRW,SAAU4zB,EAAQr9B,EAAMypD,EAAYhgD,GACjD,IANwB2W,EAMpBrc,EAAQ/D,KAAQq9B,EAAOO,SAAWP,EAAOO,SAAS59B,GAAQypD,EAC9D,MAAa,SAAThgD,EAvBe,SAAU1F,GAC7B,IAAI2jF,EAAS,CAAC,EAad,MAZqB,iBAAV3jF,EACTyY,EAAOzY,EAAM8C,QAAQ,KAAO,EAAI9C,EAAM6kB,MAAM,6BAA+B7kB,EAAM6kB,MAAM,MAAM,SAAU3e,GACrG,IAAI+T,EAAM/T,EAAI2e,MAAM,KAChB5K,EAAIle,OAAS,EACf4nF,EAAOn/D,GAAM/T,KAAKwJ,EAAI,KAAOuK,GAAM/T,KAAKwJ,EAAI,IAE5C0pE,EAAOn/D,GAAM/T,KAAKwJ,EAAI,KAAOuK,GAAM/T,KAAKwJ,EAAI,GAEhD,IAEA0pE,EAAS3jF,EAEJ2jF,CACT,CASW42E,CAAev6J,GACJ,WAAT0F,EACFmhH,GAAYvyG,EAAYglB,EAAQr9B,GAAM2a,MAAM8uC,GACjC,WAAThgD,EACFmhH,GAAY9xG,EAAUukB,EAAQr9B,GAAM2a,MAAM8uC,GAC/B,YAAThgD,EACFmhH,GAAYnyG,EAAW4kB,EAAQr9B,GAAM2a,MAAM8uC,GAChC,WAAThgD,EACFmhH,GAAYtyG,EAAU+kB,EAAQr9B,GAAM2a,MAAM8uC,GAC/B,UAAThgD,EACFmhH,GAAYryG,EAAW8kB,EAAQr9B,GAAM2a,MAAM8uC,GAChC,aAAThgD,EACFmhH,IApBexqG,EAoBO/H,EAnBxB,SAAUrR,GACf,OAAOuR,EAAUvR,IAAMsU,GAAOtU,EAAGoZ,EACnC,GAiB4Cid,EAAQr9B,GAAM2a,MAAM8uC,GAC5C,aAAThgD,EACFmhH,GAAY/xG,EAAYwkB,EAAQr9B,GAAM2a,MAAM8uC,GAE5C1lD,CAEX,CA8+QWm7D,CAAS57D,KAAMtD,EAAMypD,EAAYhgD,EAC1C,EACAgwJ,EAAOrkJ,UAAUuyG,UAAY,SAAU3nH,EAAM8wH,GAE3C,SADgB10G,EAAWukD,GAAWr9D,MAAMslB,MAAM,QAAS5oB,IAElD8wH,QAAqCnxH,IAA5B00D,GAAc58B,IAAIz3B,GAItC,EACAy5J,EAAOrkJ,UAAUkkE,YAAc,SAAUngE,GACvC7V,KAAK0jJ,sBAAsB1tE,YAAYngE,EACzC,EACAsgJ,EAAOrkJ,UAAU4yI,WAAa,SAAUhoJ,EAAM+C,EAAU4nB,GACtDrnB,KAAKs4J,eAAe5T,WAAWhoJ,EAAM+C,EAAU4nB,EACjD,EACA8uI,EAAOrkJ,UAAUs8I,qBAAuB,SAAU1xJ,EAAM+C,EAAU4nB,GAChErnB,KAAKs4J,eAAelK,qBAAqB1xJ,EAAM+C,EAAU4nB,EAC3D,EACA8uI,EAAOrkJ,UAAUu8I,qBAAuB,SAAU3xJ,EAAM+C,EAAU4nB,GAChErnB,KAAKs4J,eAAejK,qBAAqB3xJ,EAAM+C,EAAU4nB,EAC3D,EACA8uI,EAAOrkJ,UAAUghH,YAAc,SAAU9oF,EAAS4rH,EAAMC,EAASxuI,GAC/DrnB,KAAKk+I,UAAU78I,IAAI2oC,EAAS4rH,EAAMC,EAASxuI,EAC7C,EACA8uI,EAAOrkJ,UAAUmlE,YAAc,SAAU28C,EAAK6oB,EAAIh8I,EAAOoV,GACvD,OAAO7V,KAAKs4J,eAAerhF,YAAY28C,EAAK6oB,EAAIh8I,EAAOoV,EACzD,EACAsgJ,EAAOrkJ,UAAUs0H,kBAAoB,SAAUxS,GAC7C,OAAO5zH,KAAKs4J,eAAelyB,kBAAkBxS,EAC/C,EACAuiC,EAAOrkJ,UAAUm8I,kBAAoB,SAAUr6B,GAC7C,OAAO5zH,KAAKs4J,eAAerK,kBAAkBr6B,EAC/C,EACAuiC,EAAOrkJ,UAAU4tI,sBAAwB,SAAU9rB,GACjD,OAAO5zH,KAAKs4J,eAAe5Y,sBAAsB9rB,EACnD,EACAuiC,EAAOrkJ,UAAUkyC,KAAO,WACtB,IAAI3rC,EAAOrY,KACPqY,EAAKsyI,SACPtyI,EAAKsyI,QAAS,EACVtyI,EAAKmyB,OACPnyB,EAAKm6C,UAAUtuC,gBAAkB,QAEjC8xI,GAAMhyG,KAAK3rC,EAAKwsF,gBAChBmxD,GAAM/xG,KAAK5rC,EAAKza,KAElBya,EAAKsiB,OACLtiB,EAAKy7B,KAAK,QAEd,EACAqiH,EAAOrkJ,UAAUmyC,KAAO,WACtB,IAAI5rC,EAAOrY,KAAMgrB,EAAM3S,EAAKu1D,SACvBv1D,EAAKsyI,SACJ7mI,IAAMkH,IAAQ3S,EAAKmyB,QACrBxf,EAAIisD,YAAY,aAElB5+D,EAAKqiJ,OACDriJ,EAAKmyB,QACPnyB,EAAKm6C,UAAUtuC,gBAAkB,QAC7B7L,IAASA,EAAKknE,cAAcC,gBAC9BnnE,EAAKknE,cAAcC,cAAgB,QAGrCw2E,GAAM/xG,KAAK5rC,EAAKwsF,gBAChBmxD,GAAMpsG,SAASvxC,EAAKza,GAAI,UAAWya,EAAK8wI,aAE1C9wI,EAAKsyI,QAAS,EACdtyI,EAAKy7B,KAAK,QAEd,EACAqiH,EAAOrkJ,UAAU44C,SAAW,WAC1B,QAAS1qD,KAAK2qJ,MAChB,EACAwL,EAAOrkJ,UAAUg1I,iBAAmB,SAAU9rH,EAAO5B,GACnDp5B,KAAK8zC,KAAK,gBAAiB,CACzB9Y,MAAOA,EACP5B,KAAMA,GAEV,EACA+8H,EAAOrkJ,UAAU6oB,KAAO,SAAU9kB,GAChC,IAC6BuR,EADzB/O,EAAOrY,KACPoxB,EAAM/Y,EAAKsnE,aACf,GAAItnE,EAAK2hB,QACP,MAAO,GAET,GAAI5I,EAAK,EACPvb,EAAOA,GAAQ,CAAC,GACX8kB,MAAO,EACZ,IAAIl6B,EAAQuuB,GAAkBoC,GAAOA,EAAI3wB,MAAQ2wB,EAAI9iB,UAOrD,OANA8Y,EAAO/O,EAAK06E,WAAWtyF,EAAOoV,GAC9BA,EAAKhG,QAAUuhB,EACVvb,EAAKioF,WACRzlF,EAAKy7B,KAAK,cAAej+B,GAE3BA,EAAKhG,QAAUuhB,EAAM,KACdhK,CACT,CACF,EACA+uI,EAAOrkJ,UAAU4oJ,KAAO,SAAU7kJ,GAChC,IAC6BuR,EAAMniB,EAD/BoT,EAAOrY,KACPoxB,EAAM/Y,EAAKsnE,aACf,GAAKvuD,GAAQ/Y,EAAK87H,cAAe97H,EAAK2hB,QAiCtC,OA9BAnkB,EAAOA,GAAQ,CAAC,GACX6kJ,MAAO,EACZ7kJ,EAAKhG,QAAUuhB,EACRvb,EAAKqtC,QAAU7qC,EAAKizE,WAAWz1E,GACjCA,EAAKioF,WACRzlF,EAAKy7B,KAAK,cAAej+B,GAEP,QAAhBA,EAAKnI,QACP2K,EAAKy7B,KAAK,iBAAkBj+B,GAE9BuR,EAAOvR,EAAKqtC,QACPl0B,GAAkBoC,GAarBA,EAAI3wB,MAAQ2mB,IAZRvR,EAAKolJ,aAAgB5iJ,EAAKmyB,SAC5BpZ,EAAI9iB,UAAY8Y,IAEdniB,EAAO+wJ,GAAM1sG,UAAUjxC,EAAKza,GAAI,UAClCs4J,GAAOjxJ,EAAKwmB,UAAU,SAAU2F,GAC9B,GAAIA,EAAI10B,OAAS2b,EAAKza,GAEpB,OADAwzB,EAAI3wB,MAAQ2mB,GACL,CAEX,KAKJvR,EAAKhG,QAAUuhB,EAAM,MACE,IAAnBvb,EAAKilJ,WACPziJ,EAAKs6F,UAAS,GAETvrF,CACT,EACA+uI,EAAOrkJ,UAAUihF,WAAa,SAAU7vC,EAASrtC,GAC/C,OAAOk9E,GAAW/yF,KAAMkjD,EAASrtC,EACnC,EACAsgJ,EAAOrkJ,UAAUw5E,WAAa,SAAUz1E,GACtC,OA19Ra,SAAUkkB,EAAQlkB,GAKjC,YAJa,IAATA,IACFA,EAAO,CAAC,GAnsDO,SAAUkkB,EAAQlkB,EAAMnI,GACzC,OAAOsoG,GAA2Bj8E,GAAQA,OAAOuxD,WAAWz1E,EAAMnI,EACpE,CAosDSwtJ,CAAanhI,EAAQlkB,EADfA,EAAKnI,OAASmI,EAAKnI,OALd,OAOpB,CAo9RW49E,CAAWtrF,KAAM6V,EAC1B,EACAsgJ,EAAOrkJ,UAAUsjG,cAAgB,SAAUlyD,EAASrtC,GAC9CA,IACFqtC,EAAU+yG,GAAS,CAAE/yG,QAASA,GAAWrtC,IAE3C7V,KAAKi3E,YAAY,oBAAoB,EAAO/zB,EAC9C,EACAizG,EAAOrkJ,UAAUqoJ,aAAe,SAAUgB,QACjB9+J,IAAnB8+J,EACFpoE,GAAW/yF,KAAMA,KAAKogJ,aAAc,CAAE1yI,OAAQ,QAE9CqlF,GAAW/yF,KAAMm7J,GAEnBn7J,KAAK+vE,YAAYsb,QACjBrrF,KAAK2yG,UAAS,GACd3yG,KAAKg2E,aACP,EACAmgF,EAAOrkJ,UAAUoiH,QAAU,WACzB,OAAQl0H,KAAK42J,UACf,EACAT,EAAOrkJ,UAAU6gG,SAAW,SAAU33E,GACpC,IAAIogI,GAAYp7J,KAAK42J,WACrB52J,KAAK42J,YAAc57H,EACfA,GAASA,IAAUogI,GACrBp7J,KAAK8zC,KAAK,QAEd,EACAqiH,EAAOrkJ,UAAU+yF,aAAe,WAC9B,IAAIxsF,EAAOrY,KAIX,OAHKqY,EAAK1T,YACR0T,EAAK1T,UAAYqxJ,GAAM7hI,IAAI9b,EAAK4wI,iBAAmB5wI,EAAKza,GAAK,YAExDya,EAAK1T,SACd,EACAwxJ,EAAOrkJ,UAAUo3G,wBAA0B,WACzC,OAAOlpH,KAAK2gJ,oBACd,EACAwV,EAAOrkJ,UAAU6tE,WAAa,WAI5B,OAHK3/E,KAAKi2E,YACRj2E,KAAKi2E,UAAY+/E,GAAM7hI,IAAIn0B,KAAKpC,KAE3BoC,KAAKi2E,SACd,EACAkgF,EAAOrkJ,UAAU+sI,OAAS,WACxB,IACIztH,EADA/Y,EAAOrY,KAQX,OANKqY,EAAKmsC,gBACRpzB,EAAM/Y,EAAKooE,iBAETpoE,EAAKmsC,cAAgBpzB,EAAIozB,eAGtBnsC,EAAKmsC,aACd,EACA2xG,EAAOrkJ,UAAU87D,OAAS,WACxB,IACIhhD,EADAvU,EAAOrY,KAQX,OANKqY,EAAKksC,kBACR33B,EAAMvU,EAAKwmI,YAETxmI,EAAKksC,gBAAkB33B,EAAI3uB,UAGxBoa,EAAKksC,eACd,EACA4xG,EAAOrkJ,UAAU0gD,QAAU,WACzB,IAAIxnC,EAAMhrB,KAAK4tE,SACf,OAAO5tE,KAAK0gJ,cAAgB11H,EAAMA,EAAI7pB,KAAO,KAC/C,EACAg1J,EAAOrkJ,UAAUywI,WAAa,SAAUx7H,EAAKrqB,EAAM00B,GACjD,IAAI/Y,EAAOrY,KAAMs6B,EAAWjiB,EAAKiiB,SACjC,OAAIA,EAAS+gI,sBACJhjJ,EAAK8jI,aAAa,wBAAyBp1H,EAAKqK,GAAK,EAAM10B,IAE/D49B,EAAS68H,cAAgB/lI,GAAwB,SAAjBA,EAAIlI,UAAgD,IAAzBnC,EAAIxjB,QAAQ,UAAiC,IAAfwjB,EAAIvqB,OACzFuqB,EAELuT,EAAS88H,cACJ/+I,EAAKuzG,gBAAgBznC,WAAWp9D,GAEzCA,EAAM1O,EAAKuzG,gBAAgBlnC,WAAW39D,EAAKuT,EAAS+8H,mBAEtD,EACAlB,EAAOrkJ,UAAUurF,UAAY,SAAUjsE,IAjlDzB,SAAU2I,EAAQ3I,IAlpShB,SAAU2I,EAAQ3I,GAC3B8kF,GAAwBn8E,GAAQA,OAAOsjE,UAAUjsE,EAC1D,EAipSSkqI,CAAYvhI,EAAQ3I,EAC7B,CAglDIisE,CAAUr9F,KAAMoxB,EAClB,EACA+kI,EAAOrkJ,UAAUzH,OAAS,YAvgSf,SAAU0vB,GACrB,IAAKA,EAAOC,QAAS,CACnB,IAAIqiE,EAAsBtiE,EAAOsiE,oBAAqBw/C,EAAe9hH,EAAO8hH,aACxE16I,EAAO44B,EAAOy4B,UACd3iD,EAAUkqB,EAAO4lD,aACjBx+E,GACF44B,EAAO2gI,KAAK,CAAEO,aAAa,IAE7BlhI,EAAOC,SAAU,EACjBD,EAAOo5H,wBACHp5H,EAAOkgI,gBAAkBpqJ,GAC3B4zG,GAAMp5G,OAAOwF,EAAQka,aApiRV,SAAUgQ,GAClBA,EAAO+Z,KAAK,SACrB,CAoiRIynH,CAAWxhI,GACXA,EAAOwlD,cAAcl1E,OAAO0vB,IACvBA,EAAOyQ,QAAUrpC,GAzCE,SAAU44B,GACpC0pF,GAAM75D,SAAS7vB,EAAOn8B,GAAI,UAAWm8B,EAAOovH,WAC9C,CAwCMqS,CAAsBzhI,GAtiRX,SAAUA,GAClBA,EAAO+Z,KAAK,SACrB,CAsiRI2nH,CAAW1hI,GACX0pF,GAAMp5G,OAAO0vB,EAAO8qE,gBACpB6e,GAAYrnB,GACZqnB,GAAYm4B,GACZ9hH,EAAOka,SACT,CACF,CAg/RI5pC,CAAOrK,KACT,EACAm2J,EAAOrkJ,UAAUmiC,QAAU,SAAUynH,IAj/RzB,SAAU3hI,EAAQ2hI,GAC9B,IAAIppG,EAAYv4B,EAAOu4B,UAAWprC,EAAM6S,EAAO7S,IAC3C6S,EAAOuiH,YAGNof,GAAc3hI,EAAOC,SAIrB0hI,IACH3hI,EAAOwlD,cAAcz7B,IAAI,eAAgB/pB,EAAO8gI,eAC5C9gI,EAAO0sF,OAAS1sF,EAAO0sF,MAAMxyE,SAC/Bla,EAAO0sF,MAAMxyE,UAEfyvE,GAAYpxD,GACZoxD,GAAYx8F,IAlDE,SAAU6S,GAC1B,IAAI90B,EAAO80B,EAAOigI,YACd/0J,IACEA,EAAKq1J,gBACPr1J,EAAKo1J,OAASp1J,EAAKq1J,cACnBr1J,EAAKq1J,cAAgB,MAEvB72C,GAAM9vE,OAAO1uC,EAAM,eAAgB80B,EAAOmgI,mBAE9C,CA2CEyB,CAAY5hI,GA5DW,SAAUA,GACjCA,EAAO4mH,qBAAuB5mH,EAAOigI,YAAcjgI,EAAOp1B,UAAYo1B,EAAOkvH,gBAAkB,KAC/FlvH,EAAO2mH,YAAc3mH,EAAOwqB,gBAAkBxqB,EAAOyqB,cAAgB,KACrEzqB,EAAO0mD,cAAgB1mD,EAAOk8C,UAAY,KACtCl8C,EAAOu4B,YACTv4B,EAAOu4B,UAAYv4B,EAAOu4B,UAAU1lC,IAAMmN,EAAOu4B,UAAUprC,IAAM6S,EAAOu4B,UAAUprC,IAAI8D,IAAM,KAEhG,CAsDE4wI,CAAmB7hI,GACnBA,EAAOuiH,WAAY,GAbjBviH,EAAO1vB,SAcX,CA89RI4pC,CAAQj0C,KAAM07J,EAChB,EACAvF,EAAOrkJ,UAAUkwI,aAAe,SAAUviJ,GACxC,OAAOO,KAAK67I,aAAamG,aAAaviJ,EACxC,EACA02J,EAAOrkJ,UAAU+pJ,eAAiB,WAChC,OAAO77J,KAAK67I,aAAaoG,eAC3B,EACAkU,EAAOrkJ,UAAU0mJ,UAAY,WAC3B,MAAM,IAAIrqJ,MAAM,uKAClB,EACAgoJ,EAAOrkJ,UAAUsnJ,WAAa,WAC5B,MAAM,IAAIjrJ,MAAM,8FAClB,EACAgoJ,EAAOrkJ,UAAU+mJ,YAAc,WAC7B,MAAM,IAAI1qJ,MAAM,gGAClB,EACAgoJ,EAAOrkJ,UAAUonJ,kBAAoB,WACnC,MAAM,IAAI/qJ,MAAM,4GAClB,EACOgoJ,CACT,CA9Va,GAgWT5rG,GAAM/E,GAAS+E,IACf3jC,GAAU3B,GAAM2B,QAASk1I,GAAS72I,GAAMpN,KAAMkkJ,GAAW92I,GAAMS,OAC/Ds2I,GAAkB,EAAGC,IAAoB,EAEzCC,GAAgB,GAChBlJ,GAAU,GAIVmJ,GAAsB,SAAUn0J,GAClC,IAAI7B,EAAO6B,EAAE7B,KACb21J,GAAOM,GAAcjoI,OAAO,SAAU4F,GACpC,OAAQ5zB,GACR,IAAK,SACH4zB,EAAO+Z,KAAK,eAAgB9rC,GAC5B,MACF,IAAK,SACH+xB,EAAO+Z,KAAK,eAAgB9rC,GAGhC,GACF,EACIq0J,GAAqB,SAAUrhI,GAC7BA,IAAUihI,KACRjhI,EACF+lB,GAASjjD,QAAQ+lD,GAAG,gBAAiBs4G,IAErCp7G,GAASjjD,QAAQgmD,IAAI,gBAAiBq4G,IAExCF,GAAoBjhI,EAExB,EACIshI,GAAuB,SAAUC,GACnC,IAAIC,EAAaxJ,UACVkJ,GAAcK,EAAa3+J,IAClC,IAAK,IAAIrB,EAAI,EAAGA,EAAI2/J,GAAc1/J,OAAQD,IACxC,GAAI2/J,GAAc3/J,KAAOggK,EAAc,CACrCL,GAAcxyH,OAAOntC,EAAG,GACxB,KACF,CAWF,OATAy2J,GAAUz5I,EAASy5I,IAAS,SAAUj5H,GACpC,OAAOwiI,IAAiBxiI,CAC1B,IACIqiI,GAAcv8E,eAAiB08E,IACjCH,GAAcv8E,aAAemzE,GAAQx2J,OAAS,EAAIw2J,GAAQ,GAAK,MAE7DoJ,GAAc58E,gBAAkB+8E,IAClCH,GAAc58E,cAAgB,MAEzBg9E,EAAWhgK,SAAWw2J,GAAQx2J,MACvC,EAWIigK,GAAuC,eAAxBx+J,SAASy+J,WACxBN,GAAgBx/I,GAASA,GAAS,CAAC,EAAGk1I,IAAa,CACrDqG,QAAS,KACTnoG,QAAS,KACT82D,gBAAiB,CAAC,EAClB+vC,gBAAiB,KACjBvoH,OAAQ,KACRyX,EAAGhF,GACH47G,aAAc,IACdC,aAAc,OACdC,YAAa,aACb7J,QAASkJ,GACTY,KAAM3uG,GACN0xB,aAAc,KACdL,cAAe,KACfllD,SAAU,CAAC,EACXogH,MAAO,WACL,IACI1qF,EAAS6mG,EADTx+I,EAAOrY,KACmBsuC,EAAS,GACvCuoH,EAAkBt0E,GAAIsB,mBAAmB5lF,SAAS4/C,UAC9C,yBAAyB78C,KAAK61J,KAChCA,EAAkBA,EAAgB5sJ,QAAQ,WAAY,IAAIA,QAAQ,gBAAiB,IAC9E,UAAUjJ,KAAK61J,KAClBA,GAAmB,MAGvB,IApygBoBt3E,EAoygBhB49D,EAAUr/I,OAAOi/J,SAAWj/J,OAAOk/J,eACvC,GAAI7f,EACFntF,EAAUmtF,EAAQpkH,MAAQokH,EAAQntF,QAClC1hB,EAAS6uG,EAAQ7uG,WACZ,CAEL,IADA,IAAIof,EAAUzvD,SAASiiC,qBAAqB,UACnC3jC,EAAI,EAAGA,EAAImxD,EAAQlxD,OAAQD,IAAK,CACvC,IAAIiW,EACJ,GAAY,MADRA,EAAMk7C,EAAQnxD,GAAGiW,KAAO,IAC5B,CAGA,IAAIyqJ,EAAYzqJ,EAAIy9C,UAAUz9C,EAAItM,YAAY,MAC9C,GAAI,8CAA8ClF,KAAKwR,GAAM,EACxB,IAA/ByqJ,EAAU15J,QAAQ,UACpB+qC,EAAS,QAEX0hB,EAAUx9C,EAAIy9C,UAAU,EAAGz9C,EAAItM,YAAY,MAC3C,KACF,CARA,CASF,EACK8pD,GAAW/xD,SAASi/J,iBAEM,KADzB1qJ,EAAMvU,SAASi/J,cAAc1qJ,KACzBjP,QAAQ,UACd+qC,EAAS,QAEX0hB,EAAUx9C,EAAIy9C,UAAU,EAAGz9C,EAAItM,YAAY,MAE/C,CACAmS,EAAK23C,QAAU,IAAIuyB,GAAIs0E,GAAiBnyE,WAAW10B,GACnD33C,EAAKw+I,gBAAkBA,EACvBx+I,EAAK8/I,QAAU,IAAI51E,GAAIlqE,EAAK23C,SAC5B33C,EAAKi2B,OAASA,GAn0gBMixC,EAo0gBZlnE,GAn0gBIwrC,GAAG,YAAavtC,EAAMgpE,GAAkBC,IACtDA,EAAc17B,GAAG,eAAgBvtC,EAAM2pE,GAA0BV,GAm0gBjE,EACA16B,iBAAkB,SAAUiiE,GAC1B,IAAIn3D,EAAUm3D,EAAgBmxC,SAC1BtoG,GACF3vD,KAAKk4J,YAAYvoG,GAEnB,IAAIrhB,EAASw4E,EAAgBx4E,OACzBw4E,EAAgBx4E,SAClBtuC,KAAKsuC,OAASA,GAEhBtuC,KAAK8mH,gBAAkBA,EACvB,IAAIq2C,EAAiBr2C,EAAgBs2C,sBACd/gK,IAAnB8gK,GACFviJ,GAAOuiJ,GAAgB,SAAUE,EAAexsG,GAC9CzB,GAAa2B,cAAcz0B,KAAKu0B,GAAcwsG,CAChD,GAEJ,EACAr7G,KAAM,SAAU1nB,GACd,IACIjD,EADAhf,EAAOrY,KAEPs9J,EAAuBr4I,GAAME,QAAQ,6MAAmN,KAIxPo4I,EAAW,SAAUnsI,GACvB,IAAIxzB,EAAKwzB,EAAIxzB,GAOb,OANKA,IACHA,EAAK0d,GAAM8V,EAAK,QAAQ9tB,QAAO,SAAU5G,GACvC,OAAQ6tD,GAAIp2B,IAAIz3B,EAClB,IAAG4a,WAAWizC,GAAII,UAClBv5B,EAAItsB,aAAa,KAAMlH,IAElBA,CACT,EAQIqjD,EAAW,SAAU7vB,EAAKhrB,GAC5B,OAAOA,EAAUiN,cAAgBg1B,OAASjiC,EAAUpF,KAAKowB,EAAIhrB,WAAamkD,GAAItJ,SAAS7vB,EAAKhrB,EAC9F,EAwDIo3J,EAAiB,SAAUxK,GAC7B37H,EAAS27H,CACX,EACIyK,EAAc,WAChB,IAEIhpF,EAtEAh1E,EAoEAi+J,EAAY,EACZ1K,EAAU,GAEV2K,EAAe,SAAU//J,EAAI08B,EAAU27C,GACzC,IAAIl8C,EAAS,IAAIo8H,GAAOv4J,EAAI08B,EAAUjiB,GACtC26I,EAAQvuJ,KAAKs1B,GACbA,EAAO8pB,GAAG,QAAQ,aACV65G,IAAcjpF,EAAQj4E,QAC1BghK,EAAexK,EAEnB,IACAj5H,EAAOk8C,UAAYl8C,EAAOk8C,WAAaA,EACvCl8C,EAAO4/H,QACT,EACApvG,GAAI5W,OAAO71C,OAAQ,QAAS2/J,IAlFxBh+J,EAAW66B,EAAa,aAIrB76B,EAASsW,MAAMsC,EAAM,IAgF5Bo8D,EAAU1zB,GAASsB,OA3EH,SAAU/nB,GAC1B,IAAIm6C,EAAU,GACd,GAAI5wD,GAAI5B,QAAQ3B,QAAUuD,GAAI5B,QAAQvP,QAAQ6K,MAAQ,GAEpD,OADA+tG,GAAU,kKACH,GACF,GAAImxC,GAET,OADAnxC,GAAU,8GACH,GAET,GAAIhxF,EAASkgH,MAIX,OAHAshB,GAAOxhI,EAASkgH,OAAO,SAAUr0I,GAC/BsuE,EAAUA,EAAQ/uE,OAAO6kD,GAAIxK,OAAO55C,EAAK4hB,UAC3C,IACO0sD,EACF,GAAIn6C,EAASvS,SAClB,OAAOwiC,GAAIxK,OAAOzlB,EAASvS,UACtB,GAAIuS,EAASt9B,OAClB,MAAO,CAACs9B,EAASt9B,QAEnB,OAAQs9B,EAASoL,MACjB,IAAK,QACH,IAAI7pB,EAAIye,EAAS7O,UAAY,GACzB5P,EAAErf,OAAS,GACbs/J,GAAOl1I,GAAQ/K,IAAI,SAAUje,GAC3B,IAAIwzB,EAAMm5B,GAAIp2B,IAAIv2B,GACdwzB,EACFqjD,EAAQhwE,KAAK2sB,GAEb0qI,GAAO79J,SAAS2/J,OAAO,SAAUpqJ,GAC/BsoJ,GAAOtoJ,EAAEiY,UAAU,SAAUzjB,GACvBA,EAAEtL,OAASkB,IACbA,EAAK,cAAgBo+J,KACrBzxG,GAAIlE,UAAUr+C,EAAG,KAAMpK,GACvB62E,EAAQhwE,KAAKuD,GAEjB,GACF,GAEJ,IAEF,MACF,IAAK,YACL,IAAK,qBACH8zJ,GAAOvxG,GAAIxK,OAAO,aAAa,SAAU3uB,GACnCkJ,EAASujI,mBAAqB58G,EAAS7vB,EAAKkJ,EAASujI,oBAGpDvjI,EAASwjI,kBAAmB78G,EAAS7vB,EAAKkJ,EAASwjI,kBACtDrpF,EAAQhwE,KAAK2sB,EAEjB,IAGF,OAAOqjD,CACT,CAqB4BspF,CAAYzjI,IAClCA,EAASkgH,MACXshB,GAAOxhI,EAASkgH,OAAO,SAAUr0I,GAC/B8e,GAAMpN,KAAK48D,GAAS,SAAUrjD,GAC5B,OAAIm5B,GAAIrlC,GAAGkM,EAAKjrB,EAAK4hB,YACnB41I,EAAaJ,EAASnsI,GAAM2qI,GAAS,CAAC,EAAGzhI,EAAUn0B,GAAOirB,IACnD,EAGX,GACF,KAGFnM,GAAMpN,KAAK48D,GAAS,SAAUrjD,GA1MT,IAAU2I,KA2MR1hB,EAAK8b,IAAI/C,EAAIxzB,MA1M1Bm8B,EAAOo6G,eAAiBp6G,EAAO8qE,gBAAkB9qE,EAAOy4B,WAAWntD,aAC/Ei3J,GAAqBviI,GACrBA,EAAOo5H,wBACPp5H,EAAOka,SAAQ,GACfla,EAAOC,SAAU,EACjBD,EAAS,KAsMP,IAIuB,KAHvB06C,EAAUxvD,GAAMM,KAAKkvD,GAAS,SAAUrjD,GACtC,OAAQ/Y,EAAK8b,IAAI/C,EAAIxzB,GACvB,KACYpB,OACVghK,EAAe,IAEf1B,GAAOrnF,GAAS,SAAUrjD,IAxHF,SAAUkJ,EAAUlJ,GAC9C,OAAOkJ,EAASkQ,QAAUpZ,EAAIvpB,QAAQxE,gBAAiBi6J,CACzD,CAuHUU,CAAsB1jI,EAAUlJ,GAGlCusI,EAAaJ,EAASnsI,GAAMkJ,EAAUlJ,GAFtCk6F,GAAU,sEAAuEl6F,EAIrF,IAEJ,EAGA,OAFA/Y,EAAKiiB,SAAWA,EAChBiwB,GAAIzyC,KAAKha,OAAQ,QAAS2/J,GACnB,IAAIvkI,IAAW,SAAU13B,GAC1B61B,EACF71B,EAAQ61B,GAERmmI,EAAiB,SAAUxK,GACzBxxJ,EAAQwxJ,EACV,CAEJ,GACF,EACA7+H,IAAK,SAAUv2B,GACb,OAAyB,IAArBkY,UAAUtZ,OACLw2J,GAAQ5+I,MAAM,GACZW,EAAWnX,GACbic,EAAOm5I,IAAS,SAAUj5H,GAC/B,OAAOA,EAAOn8B,KAAOA,CACvB,IAAGyZ,MAAM,MACA7B,EAAS5X,IACXo1J,GAAQp1J,GAAMo1J,GAAQp1J,GAEtB,IAEX,EACAyD,IAAK,SAAU04B,GACb,IAAI1hB,EAAOrY,KAEX,OADqBk8J,GAAcniI,EAAOn8B,MACnBm8B,IAGK,OAAxB1hB,EAAK8b,IAAI4F,EAAOn8B,MAxSR,WAySWm8B,EAAOn8B,KAC1Bs+J,GAAcniI,EAAOn8B,IAAMm8B,GAE7BmiI,GAAcz3J,KAAKs1B,GACnBi5H,GAAQvuJ,KAAKs1B,IAEfsiI,IAAmB,GACnBhkJ,EAAKwnE,aAAe9lD,EACpB1hB,EAAKy7B,KAAK,YAAa,CAAE/Z,OAAQA,IAC5BklG,KACHA,GAAuB,SAAUj3H,GAC/B,IAAIsoC,EAAQj4B,EAAKy7B,KAAK,gBACtB,GAAIxD,EAAMN,YAGR,OAFAhoC,EAAEG,iBACFH,EAAEgoC,YAAcM,EAAMN,YACfM,EAAMN,WAEjB,EACAlyC,OAAO8J,iBAAiB,eAAgBq3H,MArBjCllG,CAwBX,EACA4jI,aAAc,SAAU//J,EAAI08B,GAC1B,OAAOt6B,KAAKqB,IAAI,IAAI80J,GAAOv4J,EAAI08B,EAAUt6B,MAC3C,EACAqK,OAAQ,SAAU0d,GAChB,IACIxrB,EAAGw9B,EADH1hB,EAAOrY,KAEX,GAAK+nB,EAAL,CAMA,IAAIhT,EAAWgT,GAUf,OADAgS,EAAShS,EACL7S,EAAOmD,EAAK8b,IAAI4F,EAAOn8B,KAClB,MAEL0+J,GAAqBviI,IACvB1hB,EAAKy7B,KAAK,eAAgB,CAAE/Z,OAAQA,IAEf,IAAnBi5H,GAAQx2J,QACVsB,OAAO8R,oBAAoB,eAAgBqvH,IAE7CllG,EAAO1vB,SACPgyJ,GAAmBrJ,GAAQx2J,OAAS,GAC7Bu9B,GApBL+hI,GAAOvxG,GAAIxK,OAAOh4B,IAAW,SAAUqJ,IACrC2I,EAAS1hB,EAAK8b,IAAI/C,EAAIxzB,MAEpBya,EAAKhO,OAAO0vB,EAEhB,GAPF,MAJE,IAAKx9B,EAAIy2J,GAAQx2J,OAAS,EAAGD,GAAK,EAAGA,IACnC8b,EAAKhO,OAAO2oJ,GAAQz2J,GA0B1B,EACA06E,YAAa,SAAU28C,EAAK6oB,EAAIh8I,GAC9B,IAAI4X,EAAOrY,KAAM+5B,EAAS1hB,EAAK8b,IAAI1zB,GACnC,OAAQmzH,GACR,IAAK,eAIH,OAHKv7G,EAAK8b,IAAI1zB,IACZ,IAAI01J,GAAO11J,EAAO4X,EAAKiiB,SAAUjiB,GAAMshJ,UAElC,EACT,IAAK,kBAIH,OAHI5/H,GACFA,EAAO1vB,UAEF,EACT,IAAK,kBACH,OAAK0vB,GAIDA,EAAO2wB,WACT3wB,EAAOiqB,OAEPjqB,EAAOkqB,QAEF,IARL5rC,EAAK4+D,YAAY,gBAAgB,EAAOx2E,IACjC,GASX,QAAI4X,EAAKwnE,cACAxnE,EAAKwnE,aAAa5I,YAAY28C,EAAK6oB,EAAIh8I,EAGlD,EACA85J,YAAa,WACXuB,GAAO9I,IAAS,SAAUj5H,GACxBA,EAAO2gI,MACT,GACF,EACAuD,QAAS,SAAUzvG,EAAMppC,GACvB+oC,GAAK9sD,IAAImtD,EAAMppC,EACjB,EACA8G,UAAW,SAAUxE,GACnB,OAAOymC,GAAKjiC,UAAUxE,EACxB,EACA+3D,UAAW,SAAU1lD,GACnB,IAAI8lD,EAAe7/E,KAAK6/E,aACpB7/E,KAAK6/E,eAAiB9lD,IACpB8lD,GACFA,EAAa/rC,KAAK,aAAc,CAAEJ,cAAe3Z,IAEnDA,EAAO+Z,KAAK,WAAY,CAAEJ,cAAemsC,KAE3C7/E,KAAK6/E,aAAe9lD,CACtB,EACAm+H,YAAa,SAAUvoG,GACrB3vD,KAAKgwD,QAAU,IAAIuyB,GAAIviF,KAAK62J,iBAAiBnyE,WAAW/0B,EAAQ1lD,QAAQ,OAAQ,KAChFjK,KAAKm4J,QAAU,IAAI51E,GAAIviF,KAAKgwD,QAC9B,IAEFosG,GAAc1hB,QAEd,IAgJMwjB,GACAC,GAmCFC,GAAaC,GApLbC,GAAQzwI,KAAK8mC,IAAK4pG,GAAQ1wI,KAAKnkB,IAAK80J,GAAU3wI,KAAKsmC,MACnDsqG,GAAmB,SAAUrqG,EAAMqqE,EAAY1iG,GACjD,IAAI9oB,EAAIwrH,EAAWxrH,EACfU,EAAI8qH,EAAW9qH,EACf2zC,EAAI8M,EAAK9M,EACTC,EAAI6M,EAAK7M,EACTm3G,EAAUjgC,EAAWn3E,EACrBq3G,EAAUlgC,EAAWl3E,EACrBq3G,GAAY7iI,GAAO,IAAIzW,MAAM,IAyBjC,MAxBoB,MAAhBs5I,EAAS,KACXjrJ,GAAKgrJ,GAEa,MAAhBC,EAAS,KACX3rJ,GAAKyrJ,GAEa,MAAhBE,EAAS,KACXjrJ,GAAK6qJ,GAAQG,EAAU,IAEL,MAAhBC,EAAS,KACX3rJ,GAAKurJ,GAAQE,EAAU,IAEL,MAAhBE,EAAS,KACXjrJ,GAAK4zC,GAEa,MAAhBq3G,EAAS,KACX3rJ,GAAKq0C,GAEa,MAAhBs3G,EAAS,KACXjrJ,GAAK6qJ,GAAQj3G,EAAI,IAEC,MAAhBq3G,EAAS,KACX3rJ,GAAKurJ,GAAQl3G,EAAI,IAEZu3G,GAAS5rJ,EAAGU,EAAG2zC,EAAGC,EAC3B,EA+CIs3G,GAAW,SAAU5rJ,EAAGU,EAAG2zC,EAAGC,GAChC,MAAO,CACLt0C,EAAGA,EACHU,EAAGA,EACH2zC,EAAGA,EACHC,EAAGA,EAEP,EAIIu3G,GAAO,CACTC,QAhDY,SAAU3qG,EAAM9M,EAAGC,GAC/B,OAAOs3G,GAASzqG,EAAKnhD,EAAIq0C,EAAG8M,EAAKzgD,EAAI4zC,EAAG6M,EAAK9M,EAAQ,EAAJA,EAAO8M,EAAK7M,EAAQ,EAAJA,EACnE,EA+CEk3G,iBAAkBA,GAClBO,yBA5D6B,SAAU5qG,EAAMqqE,EAAYwgC,EAAeC,GACxE,IAAIr0J,EAAKtO,EACT,IAAKA,EAAI,EAAGA,EAAI2iK,EAAK1iK,OAAQD,IAE3B,IADAsO,EAAM4zJ,GAAiBrqG,EAAMqqE,EAAYygC,EAAK3iK,KACtC0W,GAAKgsJ,EAAchsJ,GAAKpI,EAAIoI,EAAIpI,EAAIy8C,GAAK23G,EAAc33G,EAAI23G,EAAchsJ,GAAKpI,EAAI8I,GAAKsrJ,EAActrJ,GAAK9I,EAAI8I,EAAI9I,EAAI08C,GAAK03G,EAAc13G,EAAI03G,EAActrJ,EACjK,OAAOurJ,EAAK3iK,GAGhB,OAAO,IACT,EAoDE4iK,UAhDc,SAAU/qG,EAAMgrG,GAC9B,IAAIC,EAAKd,GAAMnqG,EAAKnhD,EAAGmsJ,EAASnsJ,GAC5BqsJ,EAAKf,GAAMnqG,EAAKzgD,EAAGyrJ,EAASzrJ,GAC5Bo6F,EAAKuwD,GAAMlqG,EAAKnhD,EAAImhD,EAAK9M,EAAG83G,EAASnsJ,EAAImsJ,EAAS93G,GAClDwmD,EAAKwwD,GAAMlqG,EAAKzgD,EAAIygD,EAAK7M,EAAG63G,EAASzrJ,EAAIyrJ,EAAS73G,GACtD,OAAIwmD,EAAKsxD,EAAK,GAAKvxD,EAAKwxD,EAAK,EACpB,KAEFT,GAASQ,EAAIC,EAAIvxD,EAAKsxD,EAAIvxD,EAAKwxD,EACxC,EAwCEC,MAvCU,SAAUnrG,EAAMorG,EAAWC,GACrC,IAAIJ,EAAKjrG,EAAKnhD,EACVqsJ,EAAKlrG,EAAKzgD,EACVo6F,EAAK35C,EAAKnhD,EAAImhD,EAAK9M,EACnBwmD,EAAK15C,EAAKzgD,EAAIygD,EAAK7M,EACnBm4G,EAAMF,EAAUvsJ,EAAIusJ,EAAUl4G,EAC9Bq4G,EAAMH,EAAU7rJ,EAAI6rJ,EAAUj4G,EAC9Bq4G,EAAcrB,GAAM,EAAGiB,EAAUvsJ,EAAIosJ,GACrCQ,EAActB,GAAM,EAAGiB,EAAU7rJ,EAAI2rJ,GACrCQ,EAAavB,GAAM,EAAGxwD,EAAK2xD,GAC3BK,EAAaxB,GAAM,EAAGzwD,EAAK6xD,GAW/B,OAVAN,GAAMO,EACNN,GAAMO,EACFJ,IACF1xD,GAAM6xD,EACN9xD,GAAM+xD,EACNR,GAAMS,EACNR,GAAMS,GAIDlB,GAASQ,EAAIC,GAFpBvxD,GAAM+xD,GAEuBT,GAD7BvxD,GAAMiyD,GACgCT,EACxC,EAkBEx5I,OAAQ+4I,GACRmB,eAVmB,SAAUxpG,GAC7B,OAAOqoG,GAASroG,EAAW3qD,KAAM2qD,EAAWprD,IAAKorD,EAAWtnD,MAAOsnD,EAAWrpC,OAChF,GAsFI8yI,IAjCE/B,GAAQ,CAAC,EACTC,GAAY,CAAC,EA2BV,CACLxjI,KA3BS,SAAU/8B,EAAImpB,GACvB,IAAIm5I,EAAa,kBAAoBn5I,EAAM,mBACvCo5I,EAAY,kBAAoBp5I,EAAM,0CAA4CnpB,EAAK,4BAC3F,QAAkBvB,IAAd6hK,GAAMtgK,GACR,OAAOsgK,GAAMtgK,GAEb,IAAIwiK,EAAO,IAAIlnI,IAAW,SAAU13B,EAASC,GAC3C,IAAI4+J,EAnDE,SAAUC,EAAWC,EAAUl3C,QAC3B,IAAZA,IACFA,EAAU,KAEZ,IAAIt2F,GAAO,EACPyG,EAAQ,KACRgnI,EAAW,SAAUC,GACvB,OAAO,WAEL,IADA,IAAI5qJ,EAAO,GACF9R,EAAK,EAAGA,EAAK+R,UAAUtZ,OAAQuH,IACtC8R,EAAK9R,GAAM+R,UAAU/R,GAElBgvB,IACHA,GAAO,EACO,OAAVyG,IACF3sB,aAAa2sB,GACbA,EAAQ,MAEVinI,EAAU1qJ,MAAM,KAAMF,GAE1B,CACF,EACIrU,EAAUg/J,EAASF,GACnB7+J,EAAS++J,EAASD,GAYtB,MAAO,CACLnvJ,MAZU,WAEV,IADA,IAAIyE,EAAO,GACF9R,EAAK,EAAGA,EAAK+R,UAAUtZ,OAAQuH,IACtC8R,EAAK9R,GAAM+R,UAAU/R,GAElBgvB,GAAkB,OAAVyG,IACXA,EAAQpwB,YAAW,WACjB,OAAO3H,EAAOsU,MAAM,KAAMF,EAC5B,GAAGwzG,GAEP,EAGE7nH,QAASA,EACTC,OAAQA,EAEZ,CAWqBi/J,CAAQl/J,EAASC,GAC9B08J,GAAUvgK,GAAMyiK,EAAO7+J,QACvBsrD,GAAaA,aAAaM,WAAWrmC,GAAK,WACxC,OAAOs5I,EAAOjvJ,MAAM+uJ,EACtB,IAAG,WACD,OAAOE,EAAO5+J,OAAOy+J,EACvB,GACF,IAEA,OADAhC,GAAMtgK,GAAMwiK,EACLA,CAEX,EAUE/+J,IATQ,SAAUzD,EAAIq2B,QACA53B,IAAlB8hK,GAAUvgK,KACZugK,GAAUvgK,GAAIq2B,UACPkqI,GAAUvgK,IAEnBsgK,GAAMtgK,GAAMs7B,GAAW13B,QAAQyyB,EACjC,IAQEpc,GAAOoN,GAAMpN,KAAM8oJ,GAAW17I,GAAMS,OAEpCk7I,GAAQ,WACZ,EACAA,GAAMl7I,OAAS04I,GAAc,SAAUnhK,GACrC,IACI4jK,EADO7gK,KACO8R,UACd8uJ,EAAQ,WACV,IAAIrkK,EAAGukK,EAAQC,EACX1oJ,EAAOrY,KACX,IAAKq+J,KACChmJ,EAAK2pC,MACP3pC,EAAK2pC,KAAKjsC,MAAMsC,EAAMvC,WAExBgrJ,EAASzoJ,EAAK2oJ,QAGZ,IADAzkK,EAAIukK,EAAOtkK,OACJD,MACLwkK,EAAQD,EAAOvkK,IACLylD,MACR++G,EAAM/+G,KAAKjsC,MAAMsC,EAAMvC,UAKjC,EACImrJ,EAAQ,WACV,OAAOjhK,IACT,EAWAq+J,IAAe,EACf,IAAIvsJ,EAAY,IAnCL9R,KAqFX,OAjDAq+J,IAAe,EACXphK,EAAM+jK,SACRnpJ,GAAK5a,EAAM+jK,QAAQ,SAAUD,GAC3B,IAAK,IAAIl7I,KAAUk7I,EACF,SAAXl7I,IACF5oB,EAAM4oB,GAAUk7I,EAAMl7I,GAG5B,IACIg7I,EAAOG,SACT/jK,EAAM+jK,OAASH,EAAOG,OAAOt7J,OAAOzI,EAAM+jK,UAG1C/jK,EAAMikK,SACRrpJ,GAAK5a,EAAMikK,QAAQ57I,MAAM,MAAM,SAAU5oB,GACvCO,EAAMP,GAAQukK,CAChB,IAEEhkK,EAAMkkK,YACRtpJ,GAAK5a,EAAMkkK,WAAW77I,MAAM,MAAM,SAAU5oB,GAC1C,IAAI0kK,EAAY,IAAM1kK,EACtBO,EAAMP,GAAQ,SAAU+D,GACtB,IAAI4X,EAAOrY,KACX,YAAc3D,IAAVoE,GACF4X,EAAK+oJ,GAAa3gK,EACX4X,GAEFA,EAAK+oJ,EACd,CACF,IAEEnkK,EAAMokK,SACRxpJ,GAAK5a,EAAMokK,SAAS,SAAU5nI,EAAM/8B,GAClCkkK,EAAMlkK,GAAQ+8B,CAChB,IAEEx8B,EAAMqkK,UAAYT,EAAOS,WAC3BrkK,EAAMqkK,SAAWX,GAAS,CAAC,EAAGE,EAAOS,SAAUrkK,EAAMqkK,WAEvD1mJ,GAAO3d,GAAO,SAAUskK,EAAQ7kK,GACR,mBAAX6kK,GAAyBV,EAAOnkK,GACzCoV,EAAUpV,GArDK,SAAUA,EAAM6Z,GACjC,OAAO,WACL,IAAI8B,EAAOrY,KACPsG,EAAM+R,EAAKwoJ,OACfxoJ,EAAKwoJ,OAASA,EAAOnkK,GACrB,IAAI+1B,EAAMlc,EAAGR,MAAMsC,EAAMvC,WAEzB,OADAuC,EAAKwoJ,OAASv6J,EACPmsB,CACT,CACF,CA4CsB+uI,CAAa9kK,EAAM6kK,GAErCzvJ,EAAUpV,GAAQ6kK,CAEtB,IACAX,EAAM9uJ,UAAYA,EAClB8uJ,EAAMvtJ,YAAcutJ,EACpBA,EAAMl7I,OAAS04I,GACRwC,CACT,EAEA,IAsTIa,GAtTA9sG,GAAM9mC,KAAK8mC,IAAKjrD,GAAMmkB,KAAKnkB,IAAKyqD,GAAQtmC,KAAKsmC,MAwJ7CutG,GAAY,CACdnyH,UAXc,SAAU/vC,GACxB,IAAIy0B,EAAO45F,KAAK8zC,UAAUniK,GAC1B,OAAKuV,EAAWkf,GAGTA,EAAKhqB,QAAQ,oBAAoB,SAAUoc,GAChD,IAAIu7I,EAAUv7I,EAAMyd,WAAW,GAAG5rB,SAAS,IAC3C,MAAO,MAAQ,OAAO+3C,UAAU2xG,EAAQplK,QAAUolK,CACpD,IALS3tI,CAMX,EAGE8Z,MAAO,SAAUrmB,GACf,IACE,OAAOmmG,KAAK9/E,MAAMrmB,EACpB,CAAE,MAAOuL,GACT,CACF,GAGE4uI,GAAQ,CACV3tI,UAAW,CAAC,EACZqC,MAAO,EACPilF,KAAM,SAAUlhF,GACd,IAAIjiB,EAAOrY,KAAMknB,EAAMs+B,GAAS+E,IAAKh0B,OAA2Bl6B,IAAnBi+B,EAAS/D,MAAsB+D,EAAS/D,MAAQle,EAAKke,MAC9F34B,EAAK,iBAAmB24B,EAC5Ble,EAAK6b,UAAUqC,GAAS,SAAUq3F,GAChC1mG,EAAI7c,OAAOzM,UACJya,EAAK6b,UAAUqC,GACtB+D,EAAS76B,SAASmuH,EACpB,EACA1mG,EAAI7lB,IAAI6lB,EAAI8D,IAAI7pB,KAAM,SAAU,CAC9BvD,GAAIA,EACJ4U,IAAK8nB,EAASvT,IACd5gB,KAAM,oBAERkS,EAAKke,OACP,GAGEurI,GAAMllJ,GAASA,GAAS,CAAC,EAAGk1I,IAAa,CAC3Ct2C,KAAM,SAAUlhF,GACd,IAAI6yF,EAAK52F,EAAQ,EACbwrI,EAAQ,YACLznI,EAAS/nB,OAA4B,IAAnB46G,EAAIjvH,YAAoBq4B,IAAU,KACnD+D,EAASM,SAAWrE,EAAQ,KAAwB,MAAf42F,EAAI/xF,OAC3Cd,EAASM,QAAQvmB,KAAKimB,EAAS0nI,cAAe,GAAK70C,EAAIW,aAAcX,EAAK7yF,GACjEA,EAAS1E,OAClB0E,EAAS1E,MAAMvhB,KAAKimB,EAAS2nI,YAAa1rI,EAAQ,IAAQ,YAAc,UAAW42F,EAAK7yF,GAE1F6yF,EAAM,MAENzzF,GAAMtwB,WAAW24J,EAAO,GAE5B,EA6BA,GA5BAznI,EAASjT,MAAQiT,EAASjT,OAASrnB,KACnCs6B,EAAS0nI,cAAgB1nI,EAAS0nI,eAAiB1nI,EAASjT,MAC5DiT,EAAS2nI,YAAc3nI,EAAS2nI,aAAe3nI,EAASjT,MACxDiT,EAAS/nB,OAA2B,IAAnB+nB,EAAS/nB,MAC1B+nB,EAASrG,KAAOqG,EAASrG,MAAQ,GACjC6tI,GAAIhuH,KAAK,mBAAoB,CAAExZ,SAAUA,KACzC6yF,EAAM,IAAI/R,gBACF8mD,kBACN/0C,EAAI+0C,iBAAiB5nI,EAAS6nI,cAEhCh1C,EAAI9R,KAAK/gF,EAASn0B,OAASm0B,EAASrG,KAAO,OAAS,OAAQqG,EAASvT,IAAKuT,EAAS/nB,OAC/E+nB,EAAS8nI,cACXj1C,EAAIC,iBAAkB,GAEpB9yF,EAAS6nI,cACXh1C,EAAIk1C,iBAAiB,eAAgB/nI,EAAS6nI,cAE5C7nI,EAASgoI,gBACXr9I,GAAMpN,KAAKyiB,EAASgoI,gBAAgB,SAAUhkH,GAC5C6uE,EAAIk1C,iBAAiB/jH,EAAO9gD,IAAK8gD,EAAO79C,MAC1C,IAEF0sH,EAAIk1C,iBAAiB,mBAAoB,mBACzCl1C,EAAM20C,GAAIhuH,KAAK,aAAc,CAC3Bq5E,IAAKA,EACL7yF,SAAUA,IACT6yF,KACC3R,KAAKlhF,EAASrG,OACbqG,EAAS/nB,MACZ,OAAOwvJ,IAETroI,GAAMtwB,WAAW24J,EAAO,GAC1B,IAGEr8I,GAAST,GAAMS,OACf68I,GAAc,WAChB,SAASA,EAAYjoI,GACnBt6B,KAAKs6B,SAAW5U,GAAO,CAAC,EAAG4U,GAC3Bt6B,KAAKu2B,MAAQ,CACf,CA+BA,OA9BAgsI,EAAYC,QAAU,SAAU7mJ,GAC9B,OAAO,IAAI4mJ,GAAc/mD,KAAK7/F,EAChC,EACA4mJ,EAAYzwJ,UAAU0pG,KAAO,SAAU3lG,GACrC,IAAI4sJ,EAAM5sJ,EAAK+f,MAAO8sI,EAAM7sJ,EAAK+kB,QAC7B+nI,EAAUj9I,GAAO1lB,KAAKs6B,SAAUzkB,GACpC8sJ,EAAQ/nI,QAAU,SAAUn+B,EAAGwW,QAEZ,KADjBxW,EAAIilK,GAAU3zH,MAAMtxC,MAElBA,EAAI,CAAEm5B,MAAO,sBAEXn5B,EAAEm5B,MACJ6sI,EAAIpuJ,KAAKsuJ,EAAQV,aAAeU,EAAQt7I,MAAO5qB,EAAEm5B,MAAO3iB,GAExDyvJ,EAAIruJ,KAAKsuJ,EAAQX,eAAiBW,EAAQt7I,MAAO5qB,EAAE46B,OAEvD,EACAsrI,EAAQ/sI,MAAQ,SAAUgtI,EAAI3vJ,GACxBwvJ,GACFA,EAAIpuJ,KAAKsuJ,EAAQV,aAAeU,EAAQt7I,MAAOu7I,EAAI3vJ,EAEvD,EACA0vJ,EAAQ1uI,KAAOytI,GAAUnyH,UAAU,CACjC3xC,GAAIiY,EAAKjY,IAAM,IAAMoC,KAAKu2B,QAC1B32B,OAAQiW,EAAKjW,OACbirH,OAAQh1G,EAAKg1G,SAEf83C,EAAQR,aAAe,mBACvBL,GAAItmD,KAAKmnD,EACX,EACOJ,CACT,CApCkB,GA8ElB,IACE,IAAIvhK,GAAO,oBACXygK,GAAe3jK,OAAO2jK,cACToB,QAAQ7hK,GAAMA,IAC3BygK,GAAaqB,WAAW9hK,GAC1B,CAAE,MAAOgH,GACPy5J,GA7CO,WACL,IAAIxtI,EAAO,CAAC,EACRv0B,EAAO,GACPqjK,EAAU,CACZC,QAAS,SAAUxlK,GAEjB,OADWy2B,EAAKz2B,IACK,IACvB,EACAqlK,QAAS,SAAUrlK,EAAKiD,GACtBf,EAAK+E,KAAKjH,GACVy2B,EAAKz2B,GAAO8V,OAAO7S,EACrB,EACAjD,IAAK,SAAUyF,GACb,OAAOvD,EAAKuD,EACd,EACA6/J,WAAY,SAAUtlK,GACpBkC,EAAOA,EAAK4D,QAAO,SAAUc,GAC3B,OAAOA,IAAM5G,CACf,WACOy2B,EAAKz2B,EACd,EACA4zD,MAAO,WACL1xD,EAAO,GACPu0B,EAAO,CAAC,CACV,EACAz3B,OAAQ,GASV,OAPAc,OAAOC,eAAewlK,EAAS,SAAU,CACvC5uI,IAAK,WACH,OAAOz0B,EAAKlD,MACd,EACAY,cAAc,EACdD,YAAY,IAEP4lK,CACT,CAnCO,EA8CT,CACA,IAEIE,GAAY,CACdC,KAAM,CAAEpE,KAAMA,IACdqE,KAAM,CACJ7hK,QAAS43B,GACTQ,MAAOA,GACPzU,MAAOA,GACPmsD,GAAIA,GACJmR,IAAKA,GACLq+E,MAAOA,GACP5P,gBAAiBA,GACjBc,WAAYA,GACZ3jG,KAAMA,GACN2zG,IAAKA,GACLj0C,KAAM6zC,GACNa,YAAaA,GACbV,MAAOA,GACPuB,aAlBe3B,GAmBf4B,MAjVQ,SAAU5iK,GACpB,IAAI4X,EAAO,CAAC,EACRY,EAAI,EAAG4Y,EAAI,EAAGluB,EAAI,EAmGlBoqC,EAAQ,SAAUttC,GACpB,IAAIqhB,EA2BJ,MA1BqB,iBAAVrhB,EACL,MAAOA,GACTwY,EAAIxY,EAAMwY,EACV4Y,EAAIpxB,EAAMoxB,EACVluB,EAAIlD,EAAMkD,GACD,MAAOlD,GA5EP,SAAU6iK,EAAKC,EAAYC,GAMxC,GALAF,GAAOryJ,SAASqyJ,EAAK,KAAO,GAAK,IACjCC,EAAatyJ,SAASsyJ,EAAY,IAAM,IACxCC,EAAavyJ,SAASuyJ,EAAY,IAAM,IACxCD,EAAa75J,GAAI,EAAGirD,GAAI4uG,EAAY,IACpCC,EAAa95J,GAAI,EAAGirD,GAAI6uG,EAAY,IACjB,IAAfD,EAAJ,CAIA,IAAIE,EAAOH,EAAM,GACbI,EAASF,EAAaD,EACtBtwJ,EAAIywJ,GAAU,EAAI71I,KAAK6lD,IAAI+vF,EAAO,EAAI,IACtCp9I,EAAQm9I,EAAaE,EACzB,OAAQ71I,KAAKolC,MAAMwwG,IACnB,KAAK,EACHxqJ,EAAIyqJ,EACJ7xI,EAAI5e,EACJtP,EAAI,EACJ,MACF,KAAK,EACHsV,EAAIhG,EACJ4e,EAAI6xI,EACJ//J,EAAI,EACJ,MACF,KAAK,EACHsV,EAAI,EACJ4Y,EAAI6xI,EACJ//J,EAAIsP,EACJ,MACF,KAAK,EACHgG,EAAI,EACJ4Y,EAAI5e,EACJtP,EAAI+/J,EACJ,MACF,KAAK,EACHzqJ,EAAIhG,EACJ4e,EAAI,EACJluB,EAAI+/J,EACJ,MACF,KAAK,EACHzqJ,EAAIyqJ,EACJ7xI,EAAI,EACJluB,EAAIsP,EACJ,MACF,QACEgG,EAAI4Y,EAAIluB,EAAI,EAEdsV,EAAIk7C,GAAM,KAAOl7C,EAAIoN,IACrBwL,EAAIsiC,GAAM,KAAOtiC,EAAIxL,IACrB1iB,EAAIwwD,GAAM,KAAOxwD,EAAI0iB,GAzCrB,MAFEpN,EAAI4Y,EAAIluB,EAAIwwD,GAAM,IAAMqvG,EA4C5B,CA0BMG,CAASljK,EAAM8mD,EAAG9mD,EAAMuJ,EAAGvJ,EAAMsa,IAG/B+G,EAAU,8DAA8DsE,KAAK3lB,KAC/EwY,EAAIhI,SAAS6Q,EAAQ,GAAI,IACzB+P,EAAI5gB,SAAS6Q,EAAQ,GAAI,IACzBne,EAAIsN,SAAS6Q,EAAQ,GAAI,MAChBA,EAAU,oCAAoCsE,KAAK3lB,KAC5DwY,EAAIhI,SAAS6Q,EAAQ,GAAI,IACzB+P,EAAI5gB,SAAS6Q,EAAQ,GAAI,IACzBne,EAAIsN,SAAS6Q,EAAQ,GAAI,MAChBA,EAAU,2BAA2BsE,KAAK3lB,MACnDwY,EAAIhI,SAAS6Q,EAAQ,GAAKA,EAAQ,GAAI,IACtC+P,EAAI5gB,SAAS6Q,EAAQ,GAAKA,EAAQ,GAAI,IACtCne,EAAIsN,SAAS6Q,EAAQ,GAAKA,EAAQ,GAAI,KAG1C7I,EAAIA,EAAI,EAAI,EAAIA,EAAI,IAAM,IAAMA,EAChC4Y,EAAIA,EAAI,EAAI,EAAIA,EAAI,IAAM,IAAMA,EAChCluB,EAAIA,EAAI,EAAI,EAAIA,EAAI,IAAM,IAAMA,EACzB0U,CACT,EAQA,OAPI5X,GACFstC,EAAMttC,GAER4X,EAAKurJ,MA3CO,WACV,MAAO,CACL3qJ,EAAGA,EACH4Y,EAAGA,EACHluB,EAAGA,EAEP,EAsCA0U,EAAKwrJ,MArCO,WACV,OAhGY,SAAU5qJ,EAAG4Y,EAAGluB,GAC5B,IAAOqG,EAAG+Q,EAGVA,EAAI,EAIJ,IAAI+oJ,EAASnvG,GAHb17C,GAAQ,IAGY07C,GAFpB9iC,GAAQ,IACRluB,GAAQ,MAEJogK,EAASr6J,GAAIuP,EAAGvP,GAAImoB,EAAGluB,IAC3B,OAAImgK,IAAWC,EAEN,CACLx8G,EAAG,EACHv9C,EAAG,EACH+Q,EAAO,KAJTA,EAAI+oJ,KAUN95J,GAAK+5J,EAASD,GAAUC,EACxBhpJ,EAAIgpJ,EACG,CACLx8G,EAAG4M,GAJD,KADAl7C,IAAM6qJ,EAAS,EAAIngK,IAAMmgK,EAAS,EAAI,IADlC7qJ,IAAM6qJ,EAASjyI,EAAIluB,EAAIA,IAAMmgK,EAAS7qJ,EAAI4Y,EAAIluB,EAAIsV,IAEvC8qJ,EAASD,KAK1B95J,EAAGmqD,GAAU,IAAJnqD,GACT+Q,EAAGo5C,GAAU,IAAJp5C,IAEb,CAoESipJ,CAAQ/qJ,EAAG4Y,EAAGluB,EACvB,EAoCA0U,EAAKg1B,MApDO,WACV,IAAIC,EAAM,SAAU3mC,GAElB,OADAA,EAAMsK,SAAStK,EAAK,IAAIuR,SAAS,KACtB1b,OAAS,EAAImK,EAAM,IAAMA,CACtC,EACA,MAAO,IAAM2mC,EAAIr0B,GAAKq0B,EAAIzb,GAAKyb,EAAI3pC,EACrC,EA+CA0U,EAAK01B,MAAQA,EACN11B,CACT,EAuMI4rJ,cAvlSgB,SAAUlqI,GAC5B,IAAI6hF,EAAeuQ,KACfy0B,EAAW9xB,GAAe/0F,EAAQ6hF,GACtC,MAAO,CACL0R,OAAQ,SAAUgB,EAAW41C,GAI3B,YAHyB,IAArBA,IACFA,GAAmB,GAEdtjB,EAAStzB,OAAOgB,EAAW41C,EAAmB31C,GAAiBx0F,QAAU19B,EAClF,EAEJ,GA8kSE6qB,IAAK,CACHyrB,WAAYA,GACZmE,OAAQA,GACRiK,SAAUA,GACVojH,WAAY/mI,GACZw2B,WAAYA,GACZpO,SAAUA,GACVsH,aAAcA,GACd0sB,WAAYA,GACZ4qF,WAAY9gD,GACZlpF,iBAAkBA,GAClBq4C,iBAAkBA,GAClB7B,gBAAiBA,GACjByzF,UAAWttD,GACXxmE,MAAOoC,GAAWpC,OAEpBnpB,KAAM,CACJmmB,OAAQA,GACRtJ,SAAUA,GACVtb,KAAMy4D,GACNx7C,OAAQA,GACR6gD,UAAWA,GACXm3B,UAAWA,GACXhzB,OAAQA,GACRw5E,WAAY74E,IAEd1nE,IAAKA,GACLurC,aAAcA,GACdif,UAAWA,GACXkiD,UAAWA,GACXsD,YAAaA,GACb+5B,eAAgBA,GAChBhkC,cAAeA,GACftB,oBAAqBA,GACrB2qC,iBAAkBA,GAClBoC,UAAWA,GACXc,OAAQA,GACR53E,aAAcA,GACd69E,cAAeA,GACf7xG,IAAK/E,GAAS+E,IACduC,aAAcA,GAAaA,aAC3BiE,cAAeA,GACfC,aAAcA,GACdu2D,YAAaA,GACb04C,SAAUA,GACV/uJ,KAAM+T,GAAM/T,KACZuK,QAASwJ,GAAMxJ,QACfyJ,GAAID,GAAMC,GACVjN,QAASgN,GAAMhN,QACfkN,QAASF,GAAME,QACftN,KAAMoN,GAAMpN,KACZ1U,IAAK8hB,GAAM9hB,IACXoiB,KAAMN,GAAMM,KACZC,QAASP,GAAMO,QACfE,OAAQT,GAAMS,OACdI,OAAQb,GAAMa,OACda,KAAM1B,GAAM0B,KACZJ,SAAUtB,GAAMsB,SAChB/kB,QAASyjB,GAAMzjB,QACfolB,QAAS3B,GAAM2B,QACfE,gBAAiB7B,GAAM6B,gBACvBvG,QAASsD,GAAIhE,MACbg+H,SAAUh6H,GAAIL,OACdlD,KAAMuD,GAAIC,GACV85H,QAAS/5H,GAAIE,MACbugJ,MAAOzgJ,GAAIG,KAET+4I,GAAU93I,GAAMS,OAAO02I,GAAe6G,KAUf,SAAUlG,GACnCj/J,OAAOi/J,QAAUA,EACjBj/J,OAAOymK,QAAUxH,CACnB,CACAyH,CAAqBzH,IAZO,SAAUA,GAElC,IACElqJ,EAAOC,QAAUiqJ,CACnB,CAAE,MAAOvnI,GACT,CAEJ,CAMAivI,CAAsB1H,GAE1B,CAn36BA,E,uBCRAlqJ,EAAOC,QAAU4xJ,M,GCCbC,EAA2B,CAAC,EAGhC,SAASC,EAAoBC,GAE5B,IAAIC,EAAeH,EAAyBE,GAC5C,QAAqBxoK,IAAjByoK,EACH,OAAOA,EAAahyJ,QAGrB,IAAID,EAAS8xJ,EAAyBE,GAAY,CAGjD/xJ,QAAS,CAAC,GAOX,OAHAiyJ,EAAoBF,GAAUhyJ,EAAQA,EAAOC,QAAS8xJ,GAG/C/xJ,EAAOC,OACf,CCrBA8xJ,EAAoB3tJ,EAAKpE,IACxB,IAAImyJ,EAASnyJ,GAAUA,EAAOoyJ,WAC7B,IAAOpyJ,EAAiB,QACxB,IAAM,EAEP,OADA+xJ,EAAoB/9I,EAAEm+I,EAAQ,CAAEthK,EAAGshK,IAC5BA,CAAM,ECLdJ,EAAoB/9I,EAAI,CAAC/T,EAASoyJ,KACjC,IAAI,IAAI1nK,KAAO0nK,EACXN,EAAoBjpJ,EAAEupJ,EAAY1nK,KAASonK,EAAoBjpJ,EAAE7I,EAAStV,IAC5EF,OAAOC,eAAeuV,EAAStV,EAAK,CAAEL,YAAY,EAAMg3B,IAAK+wI,EAAW1nK,IAE1E,ECNDonK,EAAoB/yI,EAAI,WACvB,GAA0B,iBAAfD,WAAyB,OAAOA,WAC3C,IACC,OAAO5xB,MAAQ,IAAIipB,SAAS,cAAb,EAChB,CAAE,MAAOjhB,GACR,GAAsB,iBAAXlK,OAAqB,OAAOA,MACxC,CACA,CAPuB,GCAxB8mK,EAAoBjpJ,EAAI,CAACnc,EAAK+iD,IAAUjlD,OAAOwU,UAAUpR,eAAe2T,KAAK7U,EAAK+iD,G,mBCAlF,MAAM,EAA+B4iH,M,aCArC,MAAM,EAA+BC,S,suDCiGrC,QA5Fe,WAEb,SAAAC,EAAYpoK,GAIV,O,4FAJiBmD,CAAA,KAAAilK,GAEjBrlK,KAAKslK,QAAUroK,EAAMqoK,QACrBtlK,KAAKulK,aAAetoK,EAAMsoK,cAAgB,WAAY,EAC/CvlK,IACT,C,QAiFC,O,EAjFAqlK,G,EAAA,EAAA7nK,IAAA,cAAAiD,MAED,SAAY+kK,GACV,MAAO,GAAP9/J,OAAU1F,KAAKslK,QAAO,KAAA5/J,OAAI8/J,EAAQ,KAAA9/J,OAAIm4C,SAASr/B,OACjD,GAEA,CAAAhhB,IAAA,WAAAiD,MAOA,SAAS+kK,EAAU1lK,GACjB,IAAIm0B,EAAM+tB,EAAMpiD,EAAQ2lK,EAAcE,EAAS1+I,EAmB/C,OAlBe,MAAXjnB,IACFA,EAAU,CAAC,GAEbF,EAASE,EAAQF,QAAU,OAC3Bq0B,EAAO45F,KAAK8zC,UAAU7hK,EAAQm0B,OAAS,KACvCsxI,EAAevlK,KAAKulK,aACpBx+I,EAAM/mB,KAAK0lK,YAAYF,GACvBxjH,EAAO,CACLpiD,OAAQA,EACR+lK,QAAS,CACP,eAAgB,mBAChB,eAAgB3lK,KAAK4lK,kBAEvBzkK,KAAiB,SAAXvB,EAAoBq0B,EAAO,KACjCo5F,YAAa,WAGfo4C,EAAU,IAAII,QAAQ9+I,EAAKi7B,GACpB8jH,MAAML,GAAS9yI,MAAK,SAAS4oF,GAClC,OAAKA,EAASwqD,GAGPxqD,EAFEj6G,QAAQG,OAAO85G,EAG1B,IAAG5oF,MAAK,SAAS4oF,GACf,OAAOA,EAASqS,MAClB,IAAE,OAAO,SAASrS,GAEhB,OADAgqD,EAAahqD,GACNA,CACT,GACF,GAAC,CAAA/9G,IAAA,SAAAiD,MAED,SAAOulK,EAASx5J,EAAOq+G,GACrBA,EAASA,GAAU,CAAC,EAEpB,IADA,IAAI9jG,EAAM,kBAAHrhB,OAAqBsgK,GAAUC,EAAA,WAClC,IAAAC,EAAAC,EAAAC,EAAAriK,GAAA,GAAKvG,EAAG0oK,EAAA,GAAEzlK,EAAKylK,EAAA,GAEjB,GAAI/yJ,MAAMsI,QAAQhb,GAGb,OAFHA,EAAM4lK,SAAS,SAACpqJ,GACd8K,GAAO,IAAJrhB,OAAQlI,EAAG,KAAAkI,OAAIuW,EACpB,IAAG,EAIM,QAAPze,GAEkB,QADpBiD,EAAQA,EAAM+L,OAAS,MACb85J,QACRv/I,GAAO,UAAJrhB,OAAcjF,EAAM6lK,QAGvB7lK,IACFsmB,GAAO,IAAJrhB,OAAQlI,EAAG,KAAAkI,OAAIjF,GAEtB,EAlBAsD,EAAA,EAAAqiK,EAAwB9oK,OAAOipK,QAAQ/5J,GAAMzI,EAAAqiK,EAAA5pK,OAAAuH,IAAAkiK,IAmB7C,QAAAO,EAAA,EAAAC,EAAwBnpK,OAAOipK,QAAQ17C,GAAO27C,EAAAC,EAAAjqK,OAAAgqK,IAAE,CAA5C,IAAAE,EAAAP,EAAAM,EAAAD,GAAA,GAAKhpK,EAAGkpK,EAAA,GAAEjmK,EAAKimK,EAAA,GACjB3/I,GAAO,IAAJrhB,OAAQlI,EAAG,KAAAkI,OAAIjF,EACpB,CAEA,OAAOT,KAAK2mK,SAAS5/I,EAAK,CAACnnB,OAAQ,OACrC,GAEA,CAAApC,IAAA,iBAAAiD,MAIA,WACE,OAAOxC,SAASkP,cAAc,mBAAmBy5J,QAAQ5mH,KAC3D,M,oEAACqlH,CAAA,CAxFY,G,giCCyLf,QAvLiB,SAAAwB,I,qRAAAC,CAAAC,EAAAF,GAAA,I,QAAAhG,G,EAAAkG,E,6jBAEf,SAAAA,EAAY9pK,GAAO,IAAA8C,EAgBsC,O,4FAhBtCK,CAAA,KAAA2mK,IACjBhnK,EAAA8gK,EAAAxsJ,KAAA,KAAMpX,IAED+9B,MAAQ,CAAC,EAIdj7B,EAAKinK,gBAAkB7B,IAAAA,YAGvBplK,EAAKknK,SAAWlnK,EAAKknK,SAASnvJ,KAAIovJ,EAAAnnK,IAClCA,EAAKonK,QAAUpnK,EAAKonK,QAAQrvJ,KAAIovJ,EAAAnnK,IAChCA,EAAKqnK,UAAYrnK,EAAKqnK,UAAUtvJ,KAAIovJ,EAAAnnK,IACpCA,EAAKsnK,WAAatnK,EAAKsnK,WAAWvvJ,KAAIovJ,EAAAnnK,IACtCA,EAAKunK,YAAcvnK,EAAKunK,YAAYxvJ,KAAIovJ,EAAAnnK,IACxCA,EAAKwnK,eAAiBxnK,EAAKwnK,eAAezvJ,KAAIovJ,EAAAnnK,IAC9CA,EAAKynK,gBAAkBznK,EAAKynK,gBAAgB1vJ,KAAIovJ,EAAAnnK,IAAOA,CACzD,CAiKC,O,EA/JDgnK,G,EAAA,EAAAvpK,IAAA,mBAAAiD,MAGA,WACE,OAAOT,KAAKgnK,gBAAgB9mJ,QAAQzf,KACtC,GAEA,CAAAjD,IAAA,WAAAiD,MAGA,SAAS6vC,GAEP,GAAItwC,KAAK/C,MAAMgqK,SAAU,CACvB,IAAIxmK,EAAQT,KAAKynK,oBAAsB,KACvCznK,KAAK/C,MAAMgqK,SAASxmK,EACtB,CACF,GAEA,CAAAjD,IAAA,UAAAiD,MAGA,SAAQ6vC,GAEN,IAAI7vC,EAAQT,KAAKynK,mBACW,OAAxBn3H,EAAMoD,eAA2BjzC,GAIjCT,KAAK/C,MAAMkqK,UACbnnK,KAAK/C,MAAMkqK,QAAQ1mK,GAEnBT,KAAKgnK,gBAAgB9mJ,QAAQzf,MAAQ,GAEzC,GAEA,CAAAjD,IAAA,YAAAiD,MAGA,SAAU6vC,GACRA,EAAMnoC,iBACN,IAAI1H,EAAQT,KAAKynK,mBAEbznK,KAAK/C,MAAMyqK,WACb1nK,KAAK/C,MAAMyqK,UAAUjnK,EAEzB,GAEA,CAAAjD,IAAA,aAAAiD,MAIA,SAAW6vC,GAEU,GAAfA,EAAMq3H,OACuB,IAA3B3nK,KAAKynK,oBACPznK,KAAK/C,MAAM2qK,WAKI,IAAft3H,EAAMq3H,OACJ3nK,KAAK/C,MAAM4qK,cACb7nK,KAAK/C,MAAM4qK,aAAa,QAIT,IAAfv3H,EAAMq3H,OACJ3nK,KAAK/C,MAAM4qK,cACb7nK,KAAK/C,MAAM4qK,aAAa,MAKT,IAAfv3H,EAAMq3H,OACJ3nK,KAAK/C,MAAM4qK,cACb7nK,KAAK/C,MAAM4qK,aAAa,QAKT,IAAfv3H,EAAMq3H,OACJ3nK,KAAK/C,MAAM4qK,cACb7nK,KAAK/C,MAAM4qK,aAAa,QAG9B,GAEA,CAAArqK,IAAA,cAAAiD,MAIA,SAAY6vC,GACV,GAAmB,IAAfA,EAAMq3H,QAGRr3H,EAAMnoC,iBACFnI,KAAK/C,MAAM6qK,UAAU,CACvB,IAAIrnK,EAAQT,KAAKynK,mBACjBznK,KAAK/C,MAAM6qK,SAASrnK,GAEpBT,KAAKgnK,gBAAgB9mJ,QAAQzf,MAAQ,EACvC,CAGJ,GAAC,CAAAjD,IAAA,iBAAAiD,MAED,SAAe6vC,GAEb,GADAA,EAAMnoC,iBACFnI,KAAK/C,MAAM2qK,SAAU,CACvB,IAAInnK,EAAQT,KAAKynK,mBACjBznK,KAAK/C,MAAM2qK,SAASnnK,GAEpBT,KAAKgnK,gBAAgB9mJ,QAAQzf,MAAQ,EACvC,CACF,GAAC,CAAAjD,IAAA,kBAAAiD,MAED,SAAgB6vC,GAEd,GADAA,EAAMnoC,iBACFnI,KAAK/C,MAAMyqK,UAAW,CACxB,IAAIjnK,EAAQT,KAAKynK,mBACjBznK,KAAK/C,MAAMyqK,UAAUjnK,EACvB,CACF,GAAC,CAAAjD,IAAA,SAAAiD,MAED,WACE,OACE0kK,IAAAA,cAAA,OAAK/+J,UAAWpG,KAAK/C,MAAMmJ,WACzB++J,IAAAA,cAAA,OAAK/+J,UAAU,2BACb++J,IAAAA,cAAA,SAAOh/J,KAAK,OACL4hK,aAAa,MACbrrK,KAAMsD,KAAK/C,MAAMP,KACjB0J,UAAWpG,KAAK/C,MAAMmJ,UACtB4hK,IAAKhoK,KAAKgnK,gBACVz+J,SAAUvI,KAAK/C,MAAMsL,SACrB0/J,UAAWjoK,KAAKqnK,WAChBa,WAAYloK,KAAKsnK,YACjBa,SAAUnoK,KAAKonK,UACfgB,QAASpoK,KAAKinK,SACdoB,OAAQroK,KAAKmnK,QACb73J,YAAatP,KAAK/C,MAAMqS,cAE/B61J,IAAAA,cAAA,OAAK/+J,UAAU,sBACb++J,IAAAA,cAAA,UAAQ/+J,UAAU,mCACVwF,MAAO,CAAC08J,OAAQ,GAChB//J,SAAUvI,KAAK/C,MAAMsL,SACrBggK,QAASvoK,KAAKunK,gBACpBpC,IAAAA,cAAA,KAAG/+J,UAAU,kBAEf++J,IAAAA,cAAA,UAAQ/+J,UAAU,iCACVwF,MAAO,CAAC08J,OAAQ,GAChB//J,SAAUvI,KAAK/C,MAAMsL,SACrBggK,QAASvoK,KAAKwnK,kBAClBxnK,KAAK/C,MAAMkwD,SAAWg4G,IAAAA,cAAA,KAAG/+J,UAAU,kBACpCpG,KAAK/C,MAAMkwD,SAAWg4G,IAAAA,cAAA,QAAM/+J,UAAU,mCAAmCX,KAAK,SAAS,cAAY,YAMhH,M,oEAACshK,CAAA,CApLc,CAAS5B,IAAAA,W,sBC4G1B,QAvGW,WACT,IAAI9sJ,EAAOrY,KACXqY,EAAKs3C,QAAU5J,IAAE,QAAQniB,KAAK,uBAC9BvrB,EAAKmwJ,gBAAkBziH,IAAE,QAAQniB,KAAK,SAAW,KAG7CvrB,EAAKmwJ,gBAAgBljJ,MAAM,KAAK9oB,OAAS,IAC3C6b,EAAKmwJ,gBAAkBnwJ,EAAKmwJ,gBAAgBljJ,MAAM,KAAK,GAAK,IAAMjN,EAAKmwJ,gBAAgBljJ,MAAM,KAAK,GAAG+f,eAGvGhtB,EAAK0qJ,QAAU,KACf1qJ,EAAKowJ,SAAW,CAAC,EACjBpwJ,EAAKqwJ,IAAM,MAGN/sI,KAAKC,MACRD,KAAKC,IAAM,WACT,OAAO,IAAID,MAAOgtI,SACpB,GAGF,IACM,iBAAkB7qK,QAAkC,OAAxBA,OAAO2jK,cAAyB,SAAU3jK,QAA0B,OAAhBA,OAAO+vH,OACzFx1G,EAAK0qJ,QAAUjlK,OAAO2jK,aAE1B,CAAE,MAAOz5J,GAAI,CAEbqQ,EAAKuwJ,UAAY,SAASC,GACxB,IAAK,IAAIrrK,KAAOqrK,EACdxwJ,EAAK7a,GAAOqrK,EAAOrrK,EAEvB,EAEA6a,EAAKywJ,YAAc,SAAUphB,EAAQj3F,EAAUu1G,GACzCte,KAAUrvI,EAAKowJ,WAGjBpwJ,EAAKowJ,SAAS/gB,GAAU,CAAC,GAFzBrvI,EAAKowJ,SAAS/gB,GAAQj3F,GAAYu1G,CAKtC,EAEA3tJ,EAAK0wJ,cAAgB,SAAUrhB,EAAQj3F,EAAUu1G,GAC/C,IAAIxoK,EAAMkqJ,EAAS,IAAMj3F,EACJ,OAAjBp4C,EAAK0qJ,SAAgC,OAAZiD,IAC3B3tJ,EAAK0qJ,QAAQF,QAAQrlK,EAAKqwH,KAAK8zC,UAAUqE,IACzC3tJ,EAAK0qJ,QAAQF,QAAQrlK,EAAM,WAAYm+B,KAAKC,OAEhD,EAEAvjB,EAAK2wJ,OAAS,SAASthB,EAAQj3F,GAC7B,OAAOp4C,EAAKs3C,QAAU,WAAa+3F,EAAS,aAAej3F,CAC7D,EAEAp4C,EAAK4wJ,YAAc,SAAUvhB,EAAQj3F,GAInC,QAHiBp0D,IAAbo0D,IACFA,EAAWp4C,EAAKmwJ,iBAEG,OAAjBnwJ,EAAK0qJ,QAAkB,CACzB,IAAIvlK,EAAMkqJ,EAAS,IAAMj3F,EACzB,GAAIjzD,KAAO6a,EAAK0qJ,SACTpnI,KAAKC,MAAQ3qB,SAASoH,EAAK0qJ,QAAQC,QAAQxlK,EAAM,YAAa,IAAO6a,EAAKqwJ,IAAK,CAClF,IAAI1C,EAAUn4C,KAAK9/E,MAAM11B,EAAK0qJ,QAAQC,QAAQxlK,IAE9C,YADA6a,EAAKywJ,YAAYphB,EAAQj3F,EAAUu1G,EAErC,CAEJ,CACK3tJ,EAAKs3C,SAGV5J,IAAAA,QAAU1tC,EAAK2wJ,OAAOthB,EAAQj3F,IAAW,SAAUu1G,GACjC,OAAZA,IAGJ3tJ,EAAKywJ,YAAYphB,EAAQj3F,EAAUu1G,GACnC3tJ,EAAK0wJ,cAAcrhB,EAAQj3F,EAAUu1G,GACvC,GACF,EAEA3tJ,EAAK6wJ,eAAiB,SAAUxhB,EAAQj3F,GAEtC,OADAA,EAAWA,GAAYp4C,EAAKmwJ,gBACrB,SAAoBW,EAAOC,GAChC,IAAIC,EAOEC,EAAQC,EADd,GAJEF,EADG3hB,KAAUrvI,EAAKowJ,UAAch4G,KAAYp4C,EAAKowJ,SAAS/gB,IAAayhB,KAAS9wJ,EAAKowJ,SAAS/gB,GAAQj3F,GAC7Fp4C,EAAKowJ,SAAS/gB,GAAQj3F,GAAU04G,GAEhCA,EAEPC,EAEF,IAAKG,KAAWH,EACVA,EAAS1oK,eAAe6oK,KAC1BD,EAAS,IAAIjhI,OAAO,SAAWkhI,EAAU,MAAO,KAChDF,EAASA,EAAOp/J,QAAQq/J,EAAQF,EAASG,KAI/C,OAAOF,CACT,CACF,CACF,EC9GA,IAAIn2J,EAAI,KACGs2J,EAAK,SAACL,EAAOC,GACtB,GAAU,OAANl2J,EAAY,CACd,IAAI4pJ,EAAO,IAAI2M,EAEf3M,EAAKmM,YAAY,gBACjB/1J,EAAI4pJ,EAAKoM,eAAe,eAC1B,CACA,OAAOh2J,EAAEi2J,EAAOC,EAClB,E,uiECkdA,QAtdmB,SAAAvC,I,qRAAAC,CAAA4C,EAAA7C,GAAA,I,QAAAhG,G,EAAA6I,E,6jBAEjB,SAAAA,EAAYzsK,GAAO,IAAA8C,EASkC,O,4FATlCK,CAAA,KAAAspK,IACjB3pK,EAAA8gK,EAAAxsJ,KAAA,KAAMpX,IAGD0sK,UAAY5pK,EAAK4pK,UAAU7xJ,KAAIovJ,EAAAnnK,IACpCA,EAAK6pK,QAAU7pK,EAAK6pK,QAAQ9xJ,KAAIovJ,EAAAnnK,IAChCA,EAAK8pK,aAAe9pK,EAAK8pK,aAAa/xJ,KAAIovJ,EAAAnnK,IAC1CA,EAAK+pK,aAAe/pK,EAAK+pK,aAAahyJ,KAAIovJ,EAAAnnK,IAC1CA,EAAKgqK,SAAWhqK,EAAKgqK,SAASjyJ,KAAIovJ,EAAAnnK,IAClCA,EAAKiqK,cAAgBjqK,EAAKiqK,cAAclyJ,KAAIovJ,EAAAnnK,IAAOA,CACrD,CAucC,O,EArcD2pK,G,EAAA,EAAAlsK,IAAA,gBAAAiD,MAGA,WACE,OAAOT,KAAK/C,MAAMgtK,WAAa,KACjC,GAEA,CAAAzsK,IAAA,cAAAiD,MAKA,WACE,OAAOT,KAAK/C,MAAMitK,SAAW,EAC/B,GAEA,CAAA1sK,IAAA,mBAAAiD,MAKA,WAEE,OADcT,KAAKmqK,cACJhnK,KAAI,SAACinK,GAClB,OAAOA,EAAO1tK,IAChB,GACF,GAEA,CAAAc,IAAA,oBAAAiD,MAKA,WAEE,OADcT,KAAKmqK,cACJhnK,KAAI,SAACinK,GAClB,OAAOA,EAAOhiK,KAChB,GACF,GAEA,CAAA5K,IAAA,cAAAiD,MAKA,WACE,OAAOT,KAAK/C,MAAM+5C,SAAW,EAC/B,GAEA,CAAAx5C,IAAA,cAAAiD,MAKA,WACE,IAAIu2C,EAAUh3C,KAAKqqK,cACfC,EAAatqK,KAAK/C,MAAMqtK,WACxBC,EAAmBvqK,KAAK/C,MAAMstK,iBAGlC,SAAID,EAAW9tK,OAAS,GAAK+tK,IAGtBvzH,EAAQx6C,OAAS,CAC1B,GAEA,CAAAgB,IAAA,YAAAiD,MAKA,WACE,MAAO,CACL+pK,SAAUxqK,KAAK/C,MAAMiS,OAAS,QAC9Bk6F,gBAAiB,QACjBk/D,OAAQ,OAEZ,GAEA,CAAA9qK,IAAA,mBAAAiD,MAKA,SAAiB42B,GAEf,OAAOA,EADSr3B,KAAKyqK,gBAEvB,GAEA,CAAAjtK,IAAA,oBAAAiD,MAKA,SAAkBA,GAChB,OAAOT,KAAK/C,MAAMuxB,OAAOjrB,QAAQ9C,IAAU,CAC7C,GAEA,CAAAjD,IAAA,uBAAAiD,MAKA,WACE,IACqCiqK,EADjCR,EAAU,GAAGS,EAAAC,EACE5qK,KAAKmqK,eAAa,IAArC,IAAAQ,EAAA3gK,MAAA0gK,EAAAC,EAAA1zJ,KAAA8b,MAAuC,KAA9Bq3I,EAAMM,EAAAjqK,MACT2H,EAAQgiK,EAAOhiK,OAASgiK,EAAO/7J,MAC/Ba,EAAQk7J,EAAOl7J,OAAS,OACxBggJ,EAAQkb,EAAOlb,OAAS,OAC5Bgb,EAAQzlK,KACN0gK,IAAAA,cAAA,MAAI/+J,UAAU,eAAe8I,MAAOA,EAAOggJ,MAAOA,GAC/Csa,EAAGphK,IAGV,CACA,OAAAmrB,GAAAo3I,EAAA3iK,EAAAurB,EAAA,SAAAo3I,EAAAn3J,GAAA,CAIA,OAHA02J,EAAQzlK,KACN0gK,IAAAA,cAAA,MAAI/+J,UAAU,eAAe8I,MAAM,OAE9Bg7J,CACT,GAEA,CAAA1sK,IAAA,aAAAiD,MAKA,WAAa,IAAAK,EAAA,KACP60F,EAAO,GACP3+C,EAAUh3C,KAAKqqK,cACfC,EAAatqK,KAAK/C,MAAMqtK,WACxBC,EAAmBvqK,KAAK/C,MAAMstK,iBAqBlC,GAlBAvzH,EAAQqvH,SAAQ,SAAChvI,EAAQp0B,GACvB,IAAIxC,EAAQK,EAAK+pK,iBAAiBxzI,GAC9ByzI,EAASrqK,EAAQ,UAAY,cAC7B4N,EAAQ5N,EAAQ,GAAK+oK,EAAG,eAC5B7zE,EAAKlxF,KACH0gK,IAAAA,cAAA,MAAI1kK,MAAOA,EACPwC,MAAOA,EACPoL,MAAOA,EACPzC,MAAO,CAACk/J,OAAOA,GACf1kK,UAAWtF,EAAK7D,MAAM8tK,SAAW9nK,EAAQ,eAAgB,GACzD+nK,YAAalqK,EAAKkpK,cAClBzB,QAASznK,EAAK6oK,WACf7oK,EAAKmqK,cAAc5zI,IAG1B,IAGIkzI,GAAoBD,EAAW9tK,OAAS,EAAG,CAC7C,IAAIyG,EAAQ+zC,EAAQx6C,OAAS,EAC7Bm5F,EAAKlxF,KACH0gK,IAAAA,cAAA,MAAI1kK,MAAO6pK,EACPrnK,MAAOA,EACPoL,MAAOi8J,EACP1+J,MAAO,CAACk/J,OAAQ,WAChB1kK,UAAWpG,KAAK/C,MAAM8tK,SAAW9nK,EAAQ,eAAgB,GACzD+nK,YAAahrK,KAAKgqK,cAClBzB,QAASvoK,KAAK2pK,WAChBxE,IAAAA,cAAA,MAAI/+J,UAAU,6BAA6BynG,QAAS7tG,KAAK/C,MAAMitK,QAAQ1tK,QACpEgtK,EAAG,UAAU,KAAErE,IAAAA,cAAA,QAAM/+J,UAAU,aAAakkK,KAIrD,CACA,OAAO30E,CACT,GAEA,CAAAn4F,IAAA,gBAAAiD,MAKA,SAAc42B,GACZ,IAEwC6zI,EAFpChB,EAAU,GACVI,EAAatqK,KAAK/C,MAAMqtK,YAAc,GAAGa,EAAAP,EAC5B5qK,KAAKorK,oBAAkB,IAAxC,IAAAD,EAAAnhK,MAAAkhK,EAAAC,EAAAl0J,KAAA8b,MAA0C,KACpCtyB,EAAQ42B,EADD6zI,EAAAzqK,OAEP4qK,EAAcrrK,KAAKsrK,UAAU7qK,EAAO6pK,GACxCJ,EAAQzlK,KACN0gK,IAAAA,cAAA,MAAIoG,wBAAyB,CAACC,OAAQH,KAE1C,CAAC,OAAA93I,GAAA43I,EAAAnjK,EAAAurB,EAAA,SAAA43I,EAAA33J,GAAA,CACD,IAAI/S,EAAQT,KAAK6qK,iBAAiBxzI,GAC9Bo0I,EAAOzrK,KAAK/C,MAAMuxB,OAAOjrB,QAAQ9C,IAAU,EAI/C,OAHAypK,EAAQzlK,KACN0gK,IAAAA,cAAA,UAAKsG,GAAQtG,IAAAA,cAAA,KAAG/+J,UAAU,+BAErB8jK,CACT,GAEA,CAAA1sK,IAAA,YAAAiD,MAKA,SAAUinB,EAAM4iJ,GACd,GAAyB,GAArBA,EAAW9tK,OAAa,OAAOkrB,EACnC,IACE,IAAIgkJ,EAAK,IAAIrjI,OAAOiiI,EAAY,MAChC5iJ,EAAOA,EAAKikJ,WAAWD,GAAI,SAACx0H,GAC1B,MAAO,4CAA4CA,EAAE,SACvD,GACF,CAAE,MAAOthB,GACP,CAEF,OAAOlO,CACT,GAEA,CAAAlqB,IAAA,cAAAiD,MAKA,WAaE,IAZA,IAAImrK,EAAQ,GAERn+C,EAAQztH,KAAK/C,MAAM2uK,MACnB1rJ,EAAUlgB,KAAK/C,MAAM4uK,KACrBh3B,EAAU70I,KAAK/C,MAAM43I,QAErBi3B,EAAa5rJ,EAAU20H,EAAU,EAAI30H,EAAU20H,EAAU,EACzDk3B,EAAY7rJ,EAAU20H,EAAUpnB,EAAQvtG,EAAU20H,EAAUpnB,EAE5Du+C,EAA6B,IAAfF,EACdG,EAAaF,EAAYt+C,EAEpBo+C,EAAKC,EAAYD,GAAQE,EAAWF,IAAQ,CACnD,IAAIzjH,EAAM,CAAC,aACPloC,IAAY2rJ,GAAMzjH,EAAI3jD,KAAK,UAG3BonK,GAAQC,GAAcE,IAExBJ,EAAMnnK,KACJ0gK,IAAAA,cAAA,UACEA,IAAAA,cAAA,UAAQ/+J,UAAU,YAAYylK,KAAM,EAAGtD,QAASvoK,KAAK4pK,SAAS,OAIlEgC,EAAMnnK,KACJ0gK,IAAAA,cAAA,UACEA,IAAAA,cAAA,OAAK/+J,UAAU,aAAY,SAG/B4lK,GAAc,GAGhBJ,EAAMnnK,KACJ0gK,IAAAA,cAAA,MAAI/+J,UAAWgiD,EAAIvxB,KAAK,MACtBsuI,IAAAA,cAAA,UAAQ/+J,UAAU,YAAYylK,KAAMA,EAAMtD,QAASvoK,KAAK4pK,SACrDiC,KAMHA,IAASE,GAAaE,IAExBL,EAAMnnK,KACJ0gK,IAAAA,cAAA,UACEA,IAAAA,cAAA,OAAK/+J,UAAU,aAAY,SAI/BwlK,EAAMnnK,KACJ0gK,IAAAA,cAAA,UACEA,IAAAA,cAAA,UAAQ/+J,UAAU,YAAYylK,KAAMp+C,EAAO86C,QAASvoK,KAAK4pK,SACtDn8C,KAIPw+C,GAAa,EAGjB,CACA,OAAOL,CACT,GAEA,CAAApuK,IAAA,oBAAAiD,MAKA,WACE,IAAI2nD,EAAM,CAAC,aAEX,OADKpoD,KAAK/C,MAAMivK,UAAU9jH,EAAI3jD,KAAK,YAEjC0gK,IAAAA,cAAA,MAAI/+J,UAAWgiD,EAAIvxB,KAAK,MACtBsuI,IAAAA,cAAA,UAAQ/+J,UAAU,YAAYmiK,QAASvoK,KAAK8pK,cAAc,QAKhE,GAEA,CAAAtsK,IAAA,oBAAAiD,MAKA,WACE,IAAI2nD,EAAM,CAAC,aAEX,OADKpoD,KAAK/C,MAAMkvK,UAAU/jH,EAAI3jD,KAAK,YAEjC0gK,IAAAA,cAAA,MAAI/+J,UAAWgiD,EAAIvxB,KAAK,MACtBsuI,IAAAA,cAAA,UAAQ/+J,UAAU,YAAYmiK,QAASvoK,KAAK6pK,cAAc,YAKhE,GAEA,CAAArsK,IAAA,qBAAAiD,MAKA,WACE,OACE0kK,IAAAA,cAAA,UAAQ/+J,UAAU,sBAAsBmiK,QAASvoK,KAAK+pK,UACpD5E,IAAAA,cAAA,KAAG/+J,UAAU,wBAGnB,GAEA,CAAA5I,IAAA,YAAAiD,MAGA,SAAU6vC,GACRA,EAAMnoC,iBACN,IACI1H,EADS6vC,EAAMkD,cACA31C,aAAa,SAClB,OAAV4C,GAKAT,KAAK/C,MAAM0sK,WACb3pK,KAAK/C,MAAM0sK,UAAUlpK,EAEzB,GAEA,CAAAjD,IAAA,UAAAiD,MAGA,SAAQ6vC,GACNA,EAAMnoC,iBACN,IACI0jK,EADSv7H,EAAMkD,cACD31C,aAAa,QAE3BguK,GAAQ7rK,KAAK/C,MAAM4uK,MAGnB7rK,KAAK/C,MAAM2sK,SACb5pK,KAAK/C,MAAM2sK,QAAQiC,EAEvB,GAEA,CAAAruK,IAAA,eAAAiD,MAGA,SAAa6vC,GACXA,EAAMnoC,iBAEN,IAAI0jK,EAAO7rK,KAAK/C,MAAM4uK,KAClBA,EAAO,GAIP7rK,KAAK/C,MAAM2sK,SACb5pK,KAAK/C,MAAM2sK,QAAQiC,EAAO,EAE9B,GAEA,CAAAruK,IAAA,eAAAiD,MAGA,SAAa6vC,GACXA,EAAMnoC,iBAEN,IAAI0jK,EAAO7rK,KAAK/C,MAAM4uK,KAClBA,EAAO,EAAI7rK,KAAK/C,MAAM2uK,OAItB5rK,KAAK/C,MAAM2sK,SACb5pK,KAAK/C,MAAM2sK,QAAQiC,EAAO,EAE9B,GAEA,CAAAruK,IAAA,WAAAiD,MAGA,SAAS6vC,GACPA,EAAMnoC,iBAEFnI,KAAK/C,MAAM2qK,UACb5nK,KAAK/C,MAAM2qK,UAEf,GAEA,CAAApqK,IAAA,gBAAAiD,MAGA,SAAc6vC,GACZA,EAAMnoC,iBAEN,IACIlF,EADSqtC,EAAMkD,cACA31C,aAAa,SAClB,OAAVoF,GAAkBjD,KAAK/C,MAAM+sK,eAC/BhqK,KAAK/C,MAAM+sK,cAAc/mK,EAE7B,GAEA,CAAAzF,IAAA,SAAAiD,MAGA,WACE,OAAKT,KAAKosK,cAIRjH,IAAAA,cAAA,OAAK/+J,UAAWpG,KAAK/C,MAAMmJ,UACtBwF,MAAO5L,KAAKqsK,aACflH,IAAAA,cAAA,OAAKv5J,MAAO,CAACy4D,SAAU,WAAYj5D,IAAK,EAAGgiB,MAAO,IAC/CptB,KAAK/C,MAAMkwD,SAAWg4G,IAAAA,cAAA,QAAM/+J,UAAU,6CAA6CX,KAAK,SAAS,cAAY,SAC7GzF,KAAKssK,sBAERnH,IAAAA,cAAA,SAAO/+J,UAAU,oEACf++J,IAAAA,cAAA,aACEA,IAAAA,cAAA,UACGnlK,KAAKusK,yBAGVpH,IAAAA,cAAA,aACGnlK,KAAKwsK,eAGTxsK,KAAK/C,MAAM2uK,MAAQ,GACnBzG,IAAAA,cAAA,WACEA,IAAAA,cAAA,MAAI/+J,UAAU,mDACXpG,KAAKysK,oBACLzsK,KAAK0sK,cACL1sK,KAAK2sK,uBAxBN,IA8BX,M,oEAACjD,CAAA,CAndgB,CAASvE,IAAAA,W,q7CCiI5B,QArIoB,SAAA0B,I,qRAAAC,CAAA8F,EAAA/F,GAAA,I,QAAAhG,G,EAAA+L,E,6jBAElB,SAAAA,EAAY3vK,GAAO,IAAA8C,EAI8B,O,4FAJ9BK,CAAA,KAAAwsK,IACjB7sK,EAAA8gK,EAAAxsJ,KAAA,KAAMpX,IAEDmqK,UAAYrnK,EAAKqnK,UAAUtvJ,KAAIovJ,EAAAnnK,IACpCA,EAAK8sK,YAAc9sK,EAAK8sK,YAAY/0J,KAAIovJ,EAAAnnK,IAAOA,CACjD,CA2HC,O,EA3HA6sK,G,EAAA,EAAApvK,IAAA,oBAAAiD,MAED,WACET,KAAK8sK,mBACP,GAAC,CAAAtvK,IAAA,qBAAAiD,MAED,WACET,KAAK8sK,mBACP,GAAC,CAAAtvK,IAAA,sBAAAiD,MAED,WACE,OAAOT,KAAK/C,MAAMuxB,QAAU,EAC9B,GAAC,CAAAhxB,IAAA,oBAAAiD,MAED,WACEslD,EAAE,8BAA8BgnH,aAAa,CAC3CC,aAAc,6BACdC,WAAYzD,GAAG,OACf0D,WAAY,0BACZC,eAAgB,2BAChBC,eAAgB5D,GAAG,MACnB6D,eAAgB,4BAChBC,mBAAoB,qBACpB3oK,UAAW,OACX2sD,WAAW,GAEf,GAEA,CAAA9zD,IAAA,cAAAiD,MAMA,SAAYm/I,EAAU7oG,GACpB,QAAAhzC,EAAA,EAAAqiK,EAAwB9oK,OAAOipK,QAAQxvH,GAAQhzC,EAAAqiK,EAAA5pK,OAAAuH,IAAE,CAA7C,IAAAmiK,G,EAAAE,EAAAriK,G,EAAA,E,unBAAKvG,EAAG0oK,EAAA,GAAEzlK,EAAKylK,EAAA,GACjBtmB,EAAWA,EAAS31I,QAAQ,IAAIo+B,OAAO,SAAW7qC,EAAM,MAAO,KAAMiD,EACvE,C,QACA,OAAOm/I,CACT,GAAC,CAAApiJ,IAAA,0BAAAiD,MAED,SAAwBA,GACtB,IAAIm/I,EAAW5/I,KAAK/C,MAAMswK,iBAC1B,IAAK3tB,EAAU,OAAOn/I,EACtB,IAAIs2C,EAAU/2C,KAAK/C,MAAMuwK,QAAQ/sK,GAE7BgtK,EAAa,iCAAH/nK,OAAoCjF,EAAK,0BAAAiF,OAAyBjF,EAAK,WACrF,OAAKs2C,EACkB,WAAnB22H,EAAO32H,IAAwD,IAAhCz5C,OAAOoC,KAAKq3C,GAASv6C,OAAqBixK,EACtEztK,KAAK2tK,YAAY/tB,EAAU7oG,GAFb02H,CAGvB,GAAC,CAAAjwK,IAAA,uBAAAiD,MAED,WACE,IAIiCiqK,EAJ7BtlJ,EAAQ,GACRwoJ,EAAkB5tK,KAAK6tK,sBACvBnsH,EAAW1hD,KAAK/C,MAAMykD,SAASipH,E,+lBAAAC,CAEjBgD,GAAe,IAAjC,IAAAjD,EAAA3gK,MAAA0gK,EAAAC,EAAA1zJ,KAAA8b,MAAmC,KAA1BtyB,EAAKiqK,EAAAjqK,MAERqtK,GADU9tK,KAAK/C,MAAMuwK,QAAQ/sK,IAAU,CAAC,GACjBqtK,cAAgB,UAC3C1oJ,EAAM3gB,KACJ0gK,IAAAA,cAAA,MAAI1kK,MAAOA,EAAO2F,UAAU,kBAC1B++J,IAAAA,cAAA,OAAK/+J,UAAU,6EACb++J,IAAAA,cAAA,QAAM/+J,UAAW,SAAW0nK,EACtBvC,wBAAyB,CAACC,OAAQxrK,KAAK+tK,wBAAwBttK,OACnEihD,GACFyjH,IAAAA,cAAA,UAAQ1kK,MAAOA,EACP,cAAY,eACZ,aAAY+oK,GAAG,qBACfpjK,UAAU,sBACVmiK,QAASvoK,KAAK6sK,aACpB1H,IAAAA,cAAA,KAAG/+J,UAAU,2BAMvB,CAAC,OAAAmtB,GAAAo3I,EAAA3iK,EAAAurB,EAAA,SAAAo3I,EAAAn3J,GAAA,CACD,OAAO4R,CACT,GAEA,CAAA5nB,IAAA,YAAAiD,MAIA,SAAU6vC,GACRA,EAAMnoC,iBACN,IAEIqmB,EAFS8hB,EAAMkD,cACA/yC,MACA6kB,MAAM,MAEzBkJ,EAASA,EAAOlrB,QAAO,SAAA2P,GAAC,OAAIA,CAAC,IAEzBjT,KAAK/C,MAAM+wK,YACbhuK,KAAK/C,MAAM+wK,WAAWx/I,EAE1B,GAAC,CAAAhxB,IAAA,cAAAiD,MAED,SAAY6vC,GACVA,EAAMnoC,iBACN,IACI1H,EADS6vC,EAAMkD,cACA31C,aAAa,SAE5BmC,KAAK/C,MAAM4vK,aACb7sK,KAAK/C,MAAM4vK,YAAYpsK,EAE3B,GAAC,CAAAjD,IAAA,SAAAiD,MAED,WACE,OACE0kK,IAAAA,cAAA,OAAK/+J,UAAU,qCACb++J,IAAAA,cAAA,MAAI/+J,UAAU,6BACXpG,KAAKiuK,wBAGR9I,IAAAA,cAAA,YACE/+J,UAAU,iCACV+hK,SAAUnoK,KAAKonK,UACf1qK,KAAMsD,KAAK/C,MAAMP,KACjB+D,MAAOT,KAAK/C,MAAMuxB,OAAOqI,KAAK,QAItC,M,oEAAC+1I,CAAA,CAlIiB,CAASzH,IAAAA,W,wtECC+B,IAGtD+I,EAA2B,SAAArH,I,qRAAAC,CAAAoH,EAAArH,GAAA,I,QAAAhG,G,EAAAqN,E,+YAE/B,SAAAA,EAAYjxK,GAAO,IAAA8C,G,4FAAAK,CAAA,KAAA8tK,IACjBnuK,EAAA8gK,EAAAxsJ,KAAA,KAAMpX,IAGD+9B,MAAQ,CACXivI,UAAW,MACXkE,kBAAmB,MACnBX,QAAS,CAAC,EACVx2H,QAAS,GACTkzH,QAAS,GACTI,WAAY,GACZn9G,SAAS,EACT52B,MAAO,EACPs1I,KAAM,EACND,MAAO,EACPM,SAAU,KACVC,SAAU,KACViC,QAAS,EACTrD,QAAS,EACTl2B,QAAS,EACT2rB,UAAU,EACV6N,oBAAqB,SAIvBtuK,EAAKuuK,QAAUrxK,EAAMqxK,QA8BrB,IA1BA,IA0BAvqK,EAAA,EAAAwqK,EA1BkB,CAChB,KACA,OACA,SACA,UACA,UACA,UACA,QACA,eACA,kBACA,QACA,YACA,oBACA,mBACA,UACA,mBACA,eACA,6BACA,WACA,WACA,UACA,WACA,uBAIuBxqK,EAAAwqK,EAAA/xK,OAAAuH,IAAE,CAAtB,IAAIvG,EAAG+wK,EAAAxqK,GACNtD,EAAQV,EAAKuuK,QAAQ1H,QAAQppK,QACnBnB,IAAVoE,IAGJV,EAAKi7B,MAAMx9B,GAAOuC,EAAKyuK,WAAW/tK,GACpC,CAuBA,OApBAV,EAAK+5E,IAAM,IAAIurF,EAAU,CACvBC,QAASvlK,EAAKi7B,MAAMsqI,UAItBvlK,EAAKye,OAASze,EAAKw5B,SAASx5B,EAAKye,QAAQ1G,KAAIovJ,EAAAnnK,IAC7CA,EAAK0uK,UAAY1uK,EAAK0uK,UAAU32J,KAAIovJ,EAAAnnK,IACpCA,EAAK2uK,cAAgB3uK,EAAK2uK,cAAc52J,KAAIovJ,EAAAnnK,IAC5CA,EAAKggD,OAAShgD,EAAKggD,OAAOjoC,KAAIovJ,EAAAnnK,IAC9BA,EAAK4uK,eAAiB5uK,EAAK4uK,eAAe72J,KAAIovJ,EAAAnnK,IAC9CA,EAAK6uK,SAAW7uK,EAAK6uK,SAAS92J,KAAIovJ,EAAAnnK,IAClCA,EAAKiuK,WAAajuK,EAAKiuK,WAAWl2J,KAAIovJ,EAAAnnK,IACtCA,EAAK8uK,iBAAmB9uK,EAAK8uK,iBAAiB/2J,KAAIovJ,EAAAnnK,IAClDA,EAAKsnK,WAAatnK,EAAKsnK,WAAWvvJ,KAAIovJ,EAAAnnK,IACtCA,EAAK+uK,SAAW/uK,EAAK+uK,SAASh3J,KAAIovJ,EAAAnnK,IAClCA,EAAKgvK,UAAYhvK,EAAKgvK,UAAUj3J,KAAIovJ,EAAAnnK,IACpCA,EAAKivK,SAAWjvK,EAAKivK,SAASl3J,KAAIovJ,EAAAnnK,IAClCA,EAAKkvK,QAAUlvK,EAAKkvK,QAAQn3J,KAAIovJ,EAAAnnK,IAChCA,EAAKmvK,sBAAwBnvK,EAAKmvK,sBAAsBp3J,KAAIovJ,EAAAnnK,IAE5DovK,EAAApvK,EAAAmnK,EAAAnnK,GACF,CAurBC,O,EAvrBAmuK,E,EAAA,EAAA1wK,IAAA,oBAAAiD,MAED,WAEExC,SAAS2J,iBAAiB,UAAW5H,KAAKqnK,YAAY,GACtDppK,SAAS2J,iBAAiB,QAAS5H,KAAK8uK,UAAU,GAClD9uK,KAAKsuK,QAAQ1mK,iBAAiB,QAAS5H,KAAKgvK,UAAU,GACtDhvK,KAAKsuK,QAAQ1mK,iBAAiB,OAAQ5H,KAAKivK,SAAS,GACpDhxK,SAAS2J,iBAAiB,SAAU5H,KAAKkvK,uBAAuB,EAClE,GAAC,CAAA1xK,IAAA,qBAAAiD,MAED,WACET,KAAKkvK,uBACP,GAAC,CAAA1xK,IAAA,uBAAAiD,MAED,WAEExC,SAAS2R,oBAAoB,UAAW5P,KAAKqnK,YAAY,GACzDppK,SAAS2R,oBAAoB,QAAS5P,KAAK8uK,UAAU,GACrD9uK,KAAKsuK,QAAQ1+J,oBAAoB,QAAS5P,KAAKgvK,UAAU,GACzDhvK,KAAKsuK,QAAQ1+J,oBAAoB,OAAQ5P,KAAKivK,SAAS,GACvDhxK,SAAS2R,oBAAoB,SAAU5P,KAAKkvK,uBAAuB,EACrE,GAEA,CAAA1xK,IAAA,WAAAiD,MAGA,SAASg5B,GACP,IAAID,EACJ,OAAO,WAAmB,QAAA41I,EAAAt5J,UAAAtZ,OAANqZ,EAAI,IAAA1C,MAAAi8J,GAAAC,EAAA,EAAAA,EAAAD,EAAAC,IAAJx5J,EAAIw5J,GAAAv5J,UAAAu5J,GACtB,IAAMt4H,EAAU/2C,KACZw5B,GAAO3sB,aAAa2sB,GACxBA,EAAQpwB,YAAW,WACjBowB,EAAQ,KACRC,EAAK1jB,MAAMghC,EAASlhC,EACtB,GAAG,IACL,CACF,GAAC,CAAArY,IAAA,wBAAAiD,MAKD,WACE,IAAI6uK,EAAStvK,KAAK/C,MAAMqxK,QAEpBjuE,EAAQivE,EAAOniK,cAAc,yCAC7BnH,EAAWspK,EAAOniK,cAAc,wCAEpC,GAAKkzF,GAAUr6F,EAAf,CAIA,IAAIupK,EAAalvE,EAAMv1F,wBACnB0kK,EAAgBxpK,EAAS8E,wBACzB2kK,EAAYxxK,SAASkD,KAAK2J,wBAM1B4kK,EAAcD,EAAUtiJ,OACxBwiJ,EAAaF,EAAUvgK,MAEvB0gK,EAAkBJ,EAAcriJ,OAChC0iJ,EAAiBL,EAActgK,MAG/B8vF,EAAY,CACd8wE,EAAG,cAAFpqK,OAAgB+pK,EAAUx8J,EAAC,OAC5B88J,EAAG,cAAFrqK,OAAgB+pK,EAAU97J,EAAC,QAI1B47J,EAAW1jK,KAAOgkK,EAAiBF,IAErC3wE,EAAa,EAAI,cAAHt5F,OAAkB+pK,EAAUx8J,EAAI48J,EAAiBN,EAAWrgK,MAAK,QAK7EqgK,EAAWliJ,OAASuiJ,EAAkBF,IAExC1wE,EAAa,EAAI,cAAHt5F,OAAiB+pK,EAAU97J,EAAIi8J,EAAkBL,EAAWpiJ,OAAS,GAAE,QAGvFnnB,EAAS4F,MAAMozF,UAAY,GAAHt5F,OAAMs5F,EAAa,EAAC,KAAAt5F,OAAIs5F,EAAa,EAnC7D,CAoCF,GAEA,CAAAxhG,IAAA,uBAAAiD,MAMA,SAAqBuvK,EAAYC,GAC/B,IAAI3/H,EAAQ,IAAI4/H,YAAYF,EAAY,CAAC1rB,OAAQ2rB,EAAYE,SAAS,IAElE9vE,EAAQpiG,SAASkP,cAAc,kBAADzH,OAAmB1F,KAAKg7B,MAAMt+B,KAAI,MAAMsD,KAAK/C,MAAMqxK,SACjFjuE,GAEFA,EAAMj2F,cAAckmC,EAExB,GAEA,CAAA9yC,IAAA,aAAAiD,MAKA,SAAWA,GACT,IACE,OAAOotH,KAAK9/E,MAAMttC,EACpB,CAAE,MAAOm1B,GAET,CACF,GAEA,CAAAp4B,IAAA,cAAAiD,MAKA,WACE,QAAIT,KAAKg7B,MAAMzyB,YAGXvI,KAAKg7B,MAAM0mB,WAGV1hD,KAAKg7B,MAAMo1I,cAAgBpwK,KAAKg7B,MAAMxM,OAAOhyB,OAAS,CAI7D,GAGA,CAAAgB,IAAA,oBAAAiD,MAKA,WACE,QAAIT,KAAKg7B,MAAMzyB,UAGXvI,KAAKg7B,MAAM0mB,WAGV1hD,KAAKg7B,MAAMo1I,cAAgBpwK,KAAKg7B,MAAMxM,OAAOhyB,OAAS,EAI7D,GAEA,CAAAgB,IAAA,aAAAiD,MASA,SAAWX,GACTA,EAAUA,GAAW,CAAC,EAEtB,IAAI0M,EAAQlP,OAAOuf,OAAO,CACxBwzJ,MAAOrwK,KAAKg7B,MAAMq1I,MAClB7P,SAAUxgK,KAAKg7B,MAAMwlI,SAErB8P,aAActwK,KAAKorK,mBACnBmF,WAAYvwK,KAAKg7B,MAAMt+B,MACtBoD,EAASE,KAAKg7B,MAAMxuB,OAInBgkK,EAAexwK,KAAKg7B,MAAMw1I,cAAgB,KAC1CC,EAAczwK,KAAKg7B,MAAMsvI,WAgB7B,OAdImG,GAAezwK,KAAKg7B,MAAM01I,kBAAoBD,EAAYE,SAAS,OACrEF,GAAe,KAIbD,IACFhkK,EAAMgkK,GAAgBC,GAMhBnzK,OAAOuf,OAAOrQ,EAAOxM,KAAK4wK,mBAGpC,GAEA,CAAApzK,IAAA,mBAAAiD,MAOA,WACE,IAAI+L,EAAQxM,KAAKsuK,QAAQ1H,QAAQiK,aACjC,OAAa,MAATrkK,EACK,CAAC,EAEHqhH,KAAK9/E,MAAMvhC,EACpB,GAEA,CAAAhP,IAAA,cAAAiD,MAKA,WACE,IAAIypK,EAAUlqK,KAAKg7B,MAAMkvI,SAAW,GAOpC,MANiC,kBAA7B,CAAC,EAAEhyJ,SAAS7D,KAAK61J,KACnBA,EAAU,CACR,CAACxtK,KAAM,QAAS0L,MAAO,SACvB,CAAC1L,KAAM,cAAe0L,MAAO,iBAG1B8hK,CACT,GAEA,CAAA1sK,IAAA,mBAAAiD,MAQA,WACE,IAAI4tB,EAAQ,IAAIy9D,IAGhB,OAFc9rF,KAAKmqK,cACX9D,SAAQ,SAAC+D,GAAM,OAAK/7I,EAAMhtB,IAAI+oK,EAAO1tK,KAAK,IAC3CyW,MAAMqF,KAAK6V,EACpB,GAEA,CAAA7wB,IAAA,gBAAAiD,MAMA,SAAcqwK,GACZA,EAAaA,GAAc,CAAC,EAE5B,IAAIz4J,EAAOrY,KACPwM,EAAQxM,KAAK+wK,aACjB/wK,KAAKgxK,gBAAe,GACpB,IAAIjvK,EAAU/B,KAAK85E,IAAIt7D,OAAOxe,KAAKg7B,MAAMgrI,QAASx5J,EAAOskK,GAMzD,OALA/uK,EAAQ4wB,MAAK,SAASsB,GAEpB5b,EAAK44J,iBAAiBh9I,GACtB5b,EAAK24J,gBAAe,EACtB,IACOjvK,CACT,GAEA,CAAAvE,IAAA,SAAAiD,MAMA,SAAO6pK,GACL,GAAKA,KAActqK,KAAKg7B,MAAMgc,QAAQx6C,OAAS,GAO/C,OADAwD,KAAKg7B,MAAMsvI,WAAaA,GAAc,GAC/BtqK,KAAKkxK,gBANVlxK,KAAKg7B,MAAMsvI,WAAa,EAO5B,GAEA,CAAA9sK,IAAA,YAAAiD,MAMA,SAAUorK,GACRA,EAAO56J,SAAS46J,GAChB,IAAIwE,EAAQp/J,SAASjR,KAAKg7B,MAAMq1I,OAG5BjC,EAAUvC,EAAOwE,EAAQA,EAC7B,OAAOrwK,KAAKkxK,cAAc,CAAC9C,QAASA,GACtC,GAEA,CAAA5wK,IAAA,SAAAiD,MAMA,SAAOA,GAAO,IAAAK,EAAA,KACZ,GAAc,OAAVL,EAAJ,CAMA,IAAI+tB,EAAS,GAAG9oB,OAAO1F,KAAKg7B,MAAMxM,SAEJ,GAA1BA,EAAOjrB,QAAQ9C,IACjB+tB,EAAO/pB,KAAKhE,GAOd,IAAI+sK,EAAU,CAAC,EAaf,OAZAh/I,EAAO63I,SAAQ,SAAC5lK,GACd+sK,EAAQ/sK,GAASK,EAAKk6B,MAAMwyI,QAAQ/sK,EACtC,IACAT,KAAKsuK,QAAQxpK,aAAa,eAAgB+oH,KAAK8zC,UAAU6L,IAEzDxtK,KAAKmxK,SAAS,CAAC3iJ,OAAQA,IAAS,WAE9B1tB,EAAKswK,qBAAqB,SAAU,CAAC3wK,MAAOA,GAC9C,KACI+tB,EAAOhyB,OAAS,IAAMwD,KAAKg7B,MAAMo1I,cAAgBpwK,KAAKg7B,MAAMq2I,6BAC9DrxK,KAAK0uK,gBAEAlgJ,CA1BP,CA2BF,GAEA,CAAAhxB,IAAA,YAAAiD,MAIA,SAAU6wK,GACRtxK,KAAKmxK,SAAS,CACZpG,QAASuG,GAEb,GAEA,CAAA9zK,IAAA,iBAAAiD,MAIA,SAAe8wK,GAEb,IAAIxG,EAAU/qK,KAAKg7B,MAAM+vI,QACrB1zI,EAASr3B,KAAKg7B,MAAMgc,QAAQw6H,GAAGzG,GACnC,GAAI1zI,EAAQ,CACV,IAAI52B,EAAQ42B,EAAOr3B,KAAKg7B,MAAMivI,YACW,GAArCjqK,KAAKg7B,MAAMxM,OAAOjrB,QAAQ9C,GAC5BT,KAAK+/C,OAAOt/C,GAEZT,KAAK4uK,SAASnuK,EAElB,CACF,GAEA,CAAAjD,IAAA,WAAAiD,MAMA,SAASA,GAEP,IAAI+tB,EAAS,GAAG9oB,OAAO1F,KAAKg7B,MAAMxM,QAC9B3jB,EAAM2jB,EAAOjrB,QAAQ9C,GAOzB,OANIoK,GAAO,IACT2jB,EAAOkb,OAAO7+B,EAAK,GAEnB7K,KAAKoxK,qBAAqB,WAAY,CAAC3wK,MAAOA,KAEhDT,KAAKmxK,SAAS,CAAC3iJ,OAAQA,IAChBA,CACT,GAEA,CAAAhxB,IAAA,aAAAiD,MAKA,SAAW+tB,GAAQ,IAAA/mB,EAAA,KAEbgqK,EAAiBzxK,KAAKg7B,MAAMxM,OAEhC,GAAKijJ,GAAmBjjJ,EAAxB,CAQA,IAAIg/I,EAAUxtK,KAAKwuK,WAAWxuK,KAAKsuK,QAAQ1H,QAAQ4G,SACpC,MAAXA,IACFxtK,KAAKg7B,MAAe,QAAIwyI,GAG1B,IAE0B9C,EAFtBgH,EAAU,GAAE/G,EAAAC,EAEIp8I,GAAM,IAA1B,IAAAm8I,EAAA3gK,MAAA0gK,EAAAC,EAAA1zJ,KAAA8b,MAA4B,KAAjBtyB,EAAKiqK,EAAAjqK,MAEmB,MAA7BT,KAAKg7B,MAAMwyI,QAAQ/sK,IACrBixK,EAAQjtK,KAAKhE,GAGXgxK,EAAeluK,QAAQ9C,IAAU,IAIC,GAAlCgxK,EAAeluK,QAAQ9C,IAEzBT,KAAKoxK,qBAAqB,SAAU,CAAC3wK,MAAOA,GAEhD,CAAC,OAAA8yB,GAAAo3I,EAAA3iK,EAAAurB,EAAA,SAAAo3I,EAAAn3J,GAAA,KAEiC03J,EAFjCC,EAAAP,EAEmB6G,GAAc,IAAlC,IAAAtG,EAAAnhK,MAAAkhK,EAAAC,EAAAl0J,KAAA8b,MAAoC,KAAzBtyB,EAAKyqK,EAAAzqK,OACgB,GAA1B+tB,EAAOjrB,QAAQ9C,IAEjBT,KAAKoxK,qBAAqB,WAAY,CAAC3wK,MAAOA,GAElD,CAEA,OAAA8yB,GAAA43I,EAAAnjK,EAAAurB,EAAA,SAAA43I,EAAA33J,GAAA,CACIk+J,EAAQl1K,OAAS,EACnBwD,KAAK2xK,aAAaD,GAAS/+I,MAAK,WAC9BlrB,EAAK0pK,SAAS,CAAC3iJ,OAAQA,GACzB,IAGAxuB,KAAKmxK,SAAS,CAAC3iJ,OAAQA,GA1CzB,CA4CF,GAEA,CAAAhxB,IAAA,mBAAAiD,MAKA,SAAiBkzD,GACf,IAAIk4G,EAAO7rK,KAAKg7B,MAAM6wI,KAClBD,EAAQ5rK,KAAKg7B,MAAM4wI,MACnB50H,EAAUh3C,KAAKg7B,MAAMgc,QACrB+zH,EAAU/qK,KAAKg7B,MAAM+vI,QACrBT,EAAatqK,KAAKg7B,MAAMsvI,WAIX,MAAb32G,EACEo3G,EAAU,EACZ/qK,KAAKmxK,SAAS,CAACpG,QAASA,EAAU,KAElC/qK,KAAKmxK,SAAS,CAACpG,QAAS,IACpBc,EAAO,GACT7rK,KAAKyuK,UAAU5C,EAAO,IAKN,QAAbl4G,GAC0B,GAA7B3zD,KAAKg7B,MAAMgc,QAAQx6C,QACrBwD,KAAKwe,OAAO8rJ,GAEVS,EAAU/zH,EAAQx6C,OAAS,EAC7BwD,KAAKmxK,SAAS,CAACpG,QAASA,EAAU,KAElC/qK,KAAKmxK,SAAS,CAACpG,QAAS,IACpBc,EAAOD,GACT5rK,KAAKyuK,UAAU5C,EAAO,KAKN,QAAbl4G,GACP3zD,KAAKmxK,SAAS,CAACpG,QAAS,IACpBc,EAAO,GACT7rK,KAAKyuK,UAAU5C,EAAO,IAIJ,SAAbl4G,IACP3zD,KAAKmxK,SAAS,CAACpG,QAAS,IACpBc,EAAOD,GACT5rK,KAAKyuK,UAAU5C,EAAO,GAG5B,GAEA,CAAAruK,IAAA,iBAAAiD,MAMA,SAAe0zG,GAOb,OANc,MAAVA,IACFA,GAAS,GAEXn0G,KAAKmxK,SAAS,CACZhkH,QAASgnD,IAEJA,CACT,GAEA,CAAA32G,IAAA,mBAAAiD,MAKA,SAAiBwzB,GAEf,IAOsB29I,EAPlBxsJ,GADJ6O,EAAOA,GAAQ,CAAC,GACC7O,OAAS,GAMtBooJ,EAAUlwK,OAAOuf,OAAO7c,KAAKg7B,MAAMwyI,QAAS,CAAC,GAAEqE,EAAAjH,EAClCxlJ,GAAK,IAAtB,IAAAysJ,EAAA7nK,MAAA4nK,EAAAC,EAAA56J,KAAA8b,MAAwB,KAAf9W,EAAI21J,EAAAnxK,MAEX+sK,EADYvxJ,EAAKjc,KAAKg7B,MAAMivI,YACXhuJ,CACnB,CAAC,OAAAsX,GAAAs+I,EAAA7pK,EAAAurB,EAAA,SAAAs+I,EAAAr+J,GAAA,CAEDxT,KAAKmxK,SAAS,CACZ3D,QAASA,EACTx2H,QAAS5xB,EACTmR,MAAOtC,EAAKsC,OAAS,EACrBs1I,KAAM53I,EAAK43I,MAAQ,EACnBD,MAAO33I,EAAK23I,OAAS,EACrBM,SAAUj4I,EAAKlnB,MAAQ,KACvBo/J,SAAUl4I,EAAKo7C,UAAY,MAE/B,GAEA,CAAA7xE,IAAA,QAAAiD,MAGA,WACET,KAAK0uK,gBACL1uK,KAAKmxK,SAAS,CACZ3iJ,OAAQ,GACR2+B,SAAS,GAEb,GAEA,CAAA3vD,IAAA,eAAAiD,MAKA,SAAa+tB,GAAQ,IAAA1mB,EAAA,KACnB0mB,EAASA,GAAUxuB,KAAKg7B,MAAMxM,OAE9B,IAAIg/I,EAAUlwK,OAAOuf,OAAO7c,KAAKg7B,MAAMwyI,QAAS,CAAC,GAE7CsE,EAAUtjJ,EAAOlrB,QAAO,SAAC7C,GAAK,QAAOA,KAAS+sK,EAAQ,IAE1D,GAAsB,GAAlBsE,EAAQt1K,OAAZ,CAEA,IAAIyG,EAAQjD,KAAKg7B,MAAMmzI,mBAAqB,MACxC4D,EAAc,CAChBvR,SAAUxgK,KAAKg7B,MAAMwlI,SAErB8P,aAActwK,KAAKorK,mBACnBmF,WAAYvwK,KAAKg7B,MAAMt+B,MAGzBq1K,EAAY9uK,GAAS6uK,EACrB,IAAI/vK,EAAU/B,KAAK85E,IAAIt7D,OAAOxe,KAAKg7B,MAAMgrI,QAAS+L,GAWlD,OAVA/xK,KAAKgxK,gBAAe,GACpBjvK,EAAQ4wB,MAAK,SAACsB,GACZ,IACsB+9I,EADOC,EAAArH,EAAjB32I,EAAK7O,OAAS,IACJ,IAAtB,IAAA6sJ,EAAAjoK,MAAAgoK,EAAAC,EAAAh7J,KAAA8b,MAAwB,KAAf9W,EAAI+1J,EAAAvxK,MACPA,EAAQwb,EAAKnU,EAAKkzB,MAAMivI,WAC5BuD,EAAQ/sK,GAASwb,CACnB,CAAC,OAAAsX,GAAA0+I,EAAAjqK,EAAAurB,EAAA,SAAA0+I,EAAAz+J,GAAA,CACD1L,EAAKkpK,gBAAe,GACpBlpK,EAAKqpK,SAAS,CAAC3D,QAASA,GAC1B,IACOzrK,CAtBwB,CAuBjC,GAEA,CAAAvE,IAAA,gBAAAiD,MAGA,WACET,KAAKmxK,SAAS,CACZn6H,QAAS,GACTzgB,MAAO,EACPs1I,KAAM,EACND,MAAO,EACPM,SAAU,KACVC,SAAU,KACViC,QAAS,EACTrD,QAAS,EACTT,WAAY,IAEhB,GAEA,CAAA9sK,IAAA,aAAAiD,MAGA,SAAW6vC,GAEY,KAAlBA,EAAM0iF,SACPhzH,KAAK0uK,eAET,GAEA,CAAAlxK,IAAA,WAAAiD,MAGA,SAAS6vC,GAEP,IAAIg/H,EAAStvK,KAAK/C,MAAMqxK,QACpBtxK,EAASszC,EAAMtzC,OACdsyK,EAAOrnK,SAASjL,IACnBgD,KAAK0uK,eAET,GAEA,CAAAlxK,IAAA,WAAAiD,MAGA,SAAS6vC,GACPtwC,KAAKkyK,OACP,GAEA,CAAA10K,IAAA,UAAAiD,MAGA,SAAQ6vC,GACN,IAAI9hB,EAAS8hB,EAAMg0G,OAAO91H,QAAU,GACU,mBAA/B,CAAC,EAAEtW,SAAS7D,KAAMma,KAE/BA,EAASA,EAAOlJ,MAAM,OAExBtlB,KAAK2xK,aAAanjJ,EACpB,GAAC,CAAAhxB,IAAA,SAAAiD,MAED,WACE,OACI0kK,IAAAA,cAAA,OAAKvnK,GAAIoC,KAAKg7B,MAAMp9B,GAAIwI,UAAWpG,KAAK/C,MAAMk1K,YAC5ChN,IAAAA,cAACyH,EAAc,CACbxmK,UAAU,oCACVooB,OAAQxuB,KAAKg7B,MAAMxM,OACnBg/I,QAASxtK,KAAKg7B,MAAMwyI,QACpBD,iBAAkBvtK,KAAKg7B,MAAMuyI,iBAC7B7wK,KAAMsD,KAAKg7B,MAAMt+B,KACjBmwK,YAAa7sK,KAAK4uK,SAClBZ,WAAYhuK,KAAKguK,WACjBtsH,SAAU1hD,KAAKg7B,MAAM0mB,WAEtB1hD,KAAKoyK,qBACNjN,IAAAA,cAAC4B,EAAW,CACV3gK,UAAU,iCACV1J,KAAK,sBACLywD,QAASntD,KAAKg7B,MAAMmyB,QACpB5kD,SAAUvI,KAAKqyK,cACf3K,UAAW1nK,KAAKwe,OAChBopJ,SAAU5nK,KAAK0uK,cACfzH,SAAUjnK,KAAKwe,OACfqpJ,aAAc7nK,KAAK6uK,iBACnB/G,SAAU9nK,KAAK2uK,eACfxH,QAASnnK,KAAK2uK,iBAEhBxJ,IAAAA,cAACuE,EAAa,CACZtjK,UAAU,gHACV8jK,QAASlqK,KAAKmqK,cACd37I,OAAQxuB,KAAKg7B,MAAMxM,OACnBy7I,UAAWjqK,KAAKg7B,MAAMivI,UACtBK,WAAYtqK,KAAKg7B,MAAMsvI,WACvBp7J,MAAOlP,KAAKg7B,MAAMqzI,oBAClBr3H,QAASh3C,KAAKg7B,MAAMgc,QACpBuzH,iBAAkBvqK,KAAKg7B,MAAMuvI,iBAC7Bp9G,QAASntD,KAAKg7B,MAAMmyB,QACpB49G,QAAS/qK,KAAKg7B,MAAM+vI,QACpBx0I,MAAOv2B,KAAKg7B,MAAMzE,MAClBs1I,KAAM7rK,KAAKg7B,MAAM6wI,KACjBD,MAAO5rK,KAAKg7B,MAAM4wI,MAClB/2B,QAAS70I,KAAKg7B,MAAM65G,QACpBq3B,SAAUlsK,KAAKg7B,MAAMkxI,SACrBC,SAAUnsK,KAAKg7B,MAAMmxI,SACrBxC,UAAW3pK,KAAK+/C,OAChB6pH,QAAS5pK,KAAKyuK,UACd7G,SAAU5nK,KAAK0uK,cACf1E,cAAehqK,KAAK+uK,YAI9B,I,uEAACb,CAAA,CA9wB8B,CAAS/I,IAAAA,WAixB1C,U,mqBC/sBA,SA1EsB,WAEpB,SAAAmN,EAAYr1K,GAIV,O,4FAJiBmD,CAAA,KAAAkyK,GAEjBtyK,KAAKuyK,WAAat1K,EAAMs1K,WACxBvyK,KAAKulK,aAAetoK,EAAMsoK,cAAgB,SAAShqD,GAAW,EACvDv7G,IACT,C,QA+DC,O,EA/DAsyK,G,EAAA,EAAA90K,IAAA,UAAAiD,MAED,SAAQ+kK,GACN,MAAO,GAAP9/J,OAAU1F,KAAKuyK,WAAU,KAAA7sK,OAAI8/J,EAC/B,GAEA,CAAAhoK,IAAA,WAAAiD,MAOA,SAAS+kK,EAAU1lK,GACjB,IAAIm0B,EAAM+tB,EAAMpiD,EAAQ2lK,EAAcE,EAAS1+I,EAmB/C,OAlBe,MAAXjnB,IACFA,EAAU,CAAC,GAEbF,EAASE,EAAQF,QAAU,OAC3Bq0B,EAAO45F,KAAK8zC,UAAU7hK,EAAQm0B,OAAS,KACvCsxI,EAAevlK,KAAKulK,aACpBx+I,EAAM/mB,KAAKwyK,QAAQhN,GACnBxjH,EAAO,CACLpiD,OAAQA,EACR+lK,QAAS,CACP,eAAgB,mBAChB,eAAgB3lK,KAAK4lK,kBAEvBzkK,KAAiB,SAAXvB,EAAoBq0B,EAAO,KACjCo5F,YAAa,WAGfo4C,EAAU,IAAII,QAAQ9+I,EAAKi7B,GACpB8jH,MAAML,GAAS9yI,MAAK,SAAS4oF,GAClC,OAAKA,EAASwqD,GAGPxqD,EAFEj6G,QAAQG,OAAO85G,EAG1B,IAAG5oF,MAAK,SAAS4oF,GACf,OAAOA,EAASqS,MAClB,IAAE,OAAO,SAASrS,GAEhB,OADAgqD,EAAahqD,GACNA,CACT,GACF,GAAC,CAAA/9G,IAAA,qBAAAiD,MAED,SAAmBgmB,GACjB,IAEI3mB,EAAU,CACZF,OAAQ,OACRq0B,KAAM,CACJ,OAAUxN,IAGd,OAAOzmB,KAAK2mK,SARF,mBAQgB7mK,EAC5B,GAEA,CAAAtC,IAAA,iBAAAiD,MAGA,WACE,OAAOxC,SAASkP,cAAc,mBAAmBy5J,QAAQ5mH,KAC3D,M,oEAACsyH,CAAA,CAtEmB,G,6hCCuCtB,SAnCsB,SAAAzL,I,sRAAAC,CAAA2L,EAAA5L,GAAA,I,QAAAhG,G,EAAA4R,E,wrBAEpB,SAAAA,EAAYx1K,GAAO,O,4FAAAmD,CAAA,KAAAqyK,GAAA5R,EAAAxsJ,KAAA,KACXpX,EACR,CA4BC,O,EA5BAw1K,G,EAAA,EAAAj1K,IAAA,iBAAAiD,MAED,WACE,IAAIX,EAAU,GACV4yK,EAAY1yK,KAAK/C,MAAMy1K,UAI3B,GAHA5yK,EAAQ2E,KACN0gK,IAAAA,cAAA,UAAQ1kK,MAAM,MAEZ0S,MAAMsI,QAAQi3J,GAAY,KACEhI,EADFC,E,65BAAAC,CACP8H,GAAS,IAA9B,IAAA/H,EAAA3gK,MAAA0gK,EAAAC,EAAA1zJ,KAAA8b,MAAgC,KAAvB8qB,EAAQ6sH,EAAAjqK,MACfX,EAAQ2E,KACN0gK,IAAAA,cAAA,UAAQ1kK,MAAOo9C,GAAWA,GAE9B,CAAC,OAAAtqB,GAAAo3I,EAAA3iK,EAAAurB,EAAA,SAAAo3I,EAAAn3J,GAAA,CACH,CACA,OAAO1T,CACT,GAAC,CAAAtC,IAAA,SAAAiD,MAED,WACE,OACE0kK,IAAAA,cAAA,UACEvnK,GAAIoC,KAAK/C,MAAMW,GACflB,KAAMsD,KAAK/C,MAAMP,KACjB+D,MAAOT,KAAK/C,MAAMwD,MAClB0nK,SAAUnoK,KAAK/C,MAAMkrK,UACpBnoK,KAAK2yK,iBAGZ,M,qEAACF,CAAA,CAhCmB,CAAStN,IAAAA,W,k7BCiE/B,SAhEkB,SAAA0B,I,sRAAAC,CAAA8L,EAAA/L,GAAA,I,QAAAhG,G,EAAA+R,E,wrBAEhB,SAAAA,EAAY31K,GAAO,O,4FAAAmD,CAAA,KAAAwyK,GAAA/R,EAAAxsJ,KAAA,KACXpX,EACR,CAyDC,O,EAzDA21K,G,EAAA,EAAAp1K,IAAA,uBAAAiD,MAED,WACE,OAAO0S,MAAMsI,QAAQzb,KAAK/C,MAAMy1K,UAClC,GAAC,CAAAl1K,IAAA,aAAAiD,MAED,WACE,IAAIoyK,GAAU,EAId,OAHI7yK,KAAK8yK,yBACPD,EAAU7yK,KAAK/C,MAAMy1K,UAAUl2K,OAAS,GAEnCq2K,CACT,GAAC,CAAAr1K,IAAA,iBAAAiD,MAED,WACE,OAAIT,KAAK8yK,uBAEL3N,IAAAA,cAACsN,GAAgB,CACf70K,GAAIoC,KAAK/C,MAAMW,GACflB,KAAMsD,KAAK/C,MAAMP,KACjB+D,MAAOT,KAAK/C,MAAMwD,MAClBiyK,UAAW1yK,KAAK/C,MAAMy1K,UACtBvK,SAAUnoK,KAAK/C,MAAMkrK,WAIvBhD,IAAAA,cAAA,SAAOh/J,KAAK,OACVvI,GAAIoC,KAAK/C,MAAMW,GACflB,KAAMsD,KAAK/C,MAAMP,KACjB+D,MAAOT,KAAK/C,MAAMwD,MAClB0nK,SAAUnoK,KAAK/C,MAAMkrK,UAG7B,GAAC,CAAA3qK,IAAA,SAAAiD,MAED,WACE,OAAKT,KAAK+yK,aASR5N,IAAAA,cAAA,OAAK1jH,MAAM,4BACT0jH,IAAAA,cAAA,OAAK1jH,MAAM,kCACT0jH,IAAAA,cAAA,OAAK1jH,MAAM,uBACT0jH,IAAAA,cAAA,SAAO1jH,MAAM,mBACXD,IAAKxhD,KAAK/C,MAAMW,IACfoC,KAAK/C,MAAMmL,QAGfpI,KAAKgzK,mBAfR7N,IAAAA,cAAA,SAAOh/J,KAAK,SACVvI,GAAIoC,KAAK/C,MAAMW,GACflB,KAAMsD,KAAK/C,MAAMP,KACjB+D,MAAOT,KAAK/C,MAAMwD,OAgB1B,M,qEAACmyK,CAAA,CA7De,CAASzN,IAAAA,W,8iCCsM3B,SArMa,SAAA0B,I,sRAAAC,CAAAmM,EAAApM,GAAA,I,QAAAhG,G,EAAAoS,E,ikBAEX,SAAAA,EAAYh2K,GAAO,IAAA8C,EAkB0C,O,4FAlB1CK,CAAA,KAAA6yK,IACjBlzK,EAAA8gK,EAAAxsJ,KAAA,KAAMpX,IACD+9B,MAAQ,CACX53B,QAASnG,EAAMmG,QACf8vK,aAAcj2K,EAAMi2K,aACpBC,aAAcl2K,EAAMk2K,aACpBC,KAAMn2K,EAAMm2K,KACZC,IAAKp2K,EAAMo2K,IACXC,QAASr2K,EAAMq2K,QACfC,aAAct2K,EAAMs2K,cAItBxzK,EAAKyzK,kBAAoBzzK,EAAKyzK,kBAAkB17J,KAAIovJ,GAAAnnK,IACpDA,EAAK0zK,uBAAyB1zK,EAAK0zK,uBAAuB37J,KAAIovJ,GAAAnnK,IAC9DA,EAAK2zK,uBAAyB3zK,EAAK2zK,uBAAuB57J,KAAIovJ,GAAAnnK,IAC9DA,EAAK4zK,eAAiB5zK,EAAK4zK,eAAe77J,KAAIovJ,GAAAnnK,IAC9CA,EAAK6zK,cAAgB7zK,EAAK6zK,cAAc97J,KAAIovJ,GAAAnnK,IAC5CA,EAAK8zK,kBAAoB9zK,EAAK8zK,kBAAkB/7J,KAAIovJ,GAAAnnK,IAAOA,CAC7D,CA4KC,O,EA5KAkzK,G,EAAA,EAAAz1K,IAAA,cAAAiD,MAED,SAAYA,GAIV,OAHK0S,MAAMsI,QAAQhb,KACjBA,EAAQ,IAEHA,CACT,GAEA,CAAAjD,IAAA,oBAAAiD,MAIA,WACE,IAAI2C,EAAUpD,KAAKg7B,MAAM53B,QACzB,OAAOpD,KAAK8zK,YAAY9zK,KAAK/C,MAAM82K,cAAc3wK,GACnD,GAEA,CAAA5F,IAAA,oBAAAiD,MAIA,WACE,IAAIyyK,EAAelzK,KAAKg7B,MAAMk4I,aAC9B,OAAOlzK,KAAK8zK,YAAY9zK,KAAK/C,MAAM+2K,cAAcd,GACnD,GAAC,CAAA11K,IAAA,YAAAiD,MAED,SAAUjD,GACR,IAAI4F,EAAUpD,KAAKg7B,MAAM53B,QACrBgF,EAAQpI,KAAK/C,MAAMg3K,OAAO7wK,GAM9B,OALa,MAATgF,GAAiBA,EAAMiL,aAAe/V,QAAUE,KAAO4K,EACjDA,EAAM5K,GAENwC,KAAK/C,MAAMg3K,OAAOz2K,EAG9B,GAEA,CAAAA,IAAA,oBAAAiD,MAIA,SAAkB6vC,GAChB,IAAI7vC,EAAQ6vC,EAAMkD,cAAc/yC,MAE5BT,KAAK/C,MAAMu2K,mBACbxzK,KAAK/C,MAAMu2K,kBAAkB/yK,GAE/BT,KAAKmxK,SAAS,CACZ/tK,QAAS3C,EACTyyK,aAAc,GACdC,aAAc,IAElB,GAEA,CAAA31K,IAAA,yBAAAiD,MAIA,SAAuB6vC,GACrB,IAAI7vC,EAAQ6vC,EAAMkD,cAAc/yC,MAEhC,GAAIT,KAAK/C,MAAMw2K,uBAAwB,CACrC,IAAIrwK,EAAUpD,KAAKg7B,MAAM53B,QACzBpD,KAAK/C,MAAMw2K,uBAAuBrwK,EAAS3C,EAC7C,CACAT,KAAKmxK,SAAS,CACZ+B,aAAczyK,EACd0yK,aAAc,IAElB,GAEA,CAAA31K,IAAA,yBAAAiD,MAGA,SAAuB6vC,GACrB,IAAI7vC,EAAQ6vC,EAAMkD,cAAc/yC,MAE5BT,KAAK/C,MAAMy2K,wBACb1zK,KAAK/C,MAAMy2K,uBAAuBjzK,GAEpCT,KAAKmxK,SAAS,CAACgC,aAAc1yK,GAC/B,GAEA,CAAAjD,IAAA,oBAAAiD,MAEA,SAAkB6vC,GAChB,IAAI7vC,EAAQ6vC,EAAMkD,cAAc/yC,MAChCT,KAAKmxK,SAAS,CAACmC,QAAS7yK,GAC1B,GAEA,CAAAjD,IAAA,gBAAAiD,MAEA,SAAc6vC,GACZ,IAAI7vC,EAAQ6vC,EAAMkD,cAAc/yC,MAChCT,KAAKmxK,SAAS,CAACkC,IAAK5yK,GACtB,GAEA,CAAAjD,IAAA,iBAAAiD,MAEA,SAAe6vC,GACb,IAAI7vC,EAAQ6vC,EAAMkD,cAAc/yC,MAChCT,KAAKmxK,SAAS,CAACiC,KAAM3yK,GACvB,GAAC,CAAAjD,IAAA,eAAAiD,MAED,SAAayzK,GACX,IAAIt2K,EAAKoC,KAAK/C,MAAMW,GAChBqF,EAAQjD,KAAK/C,MAAMgG,MACvB,MAAO,GAAPyC,OAAU9H,EAAE,KAAA8H,OAAIzC,EAAK,KAAAyC,OAAIwuK,EAC3B,GAAC,CAAA12K,IAAA,iBAAAiD,MAED,SAAeyzK,GACb,IAAIx3K,EAAOsD,KAAK/C,MAAMP,KAClBuG,EAAQjD,KAAK/C,MAAMgG,MACvB,MAAO,GAAPyC,OAAUhJ,EAAI,KAAAgJ,OAAIzC,EAAK,KAAAyC,OAAIwuK,EAC7B,GAAC,CAAA12K,IAAA,SAAAiD,MAED,WACE,OACE0kK,IAAAA,cAAA,WACIA,IAAAA,cAACyN,GAAY,CACXh1K,GAAIoC,KAAKm0K,aAAa,WACtBz3K,KAAMsD,KAAKo0K,eAAe,WAC1BhsK,MAAOpI,KAAK/C,MAAMg3K,OAAO7wK,QACzB3C,MAAOT,KAAKg7B,MAAM53B,QAClBsvK,UAAW1yK,KAAK/C,MAAM0F,UACtBwlK,SAAUnoK,KAAKwzK,oBAEjBrO,IAAAA,cAACyN,GAAY,CACXh1K,GAAIoC,KAAKm0K,aAAa,gBACtBz3K,KAAMsD,KAAKo0K,eAAe,gBAC1BhsK,MAAOpI,KAAKq0K,UAAU,gBACtB5zK,MAAOT,KAAKg7B,MAAMk4I,aAClBR,UAAW1yK,KAAKs0K,oBAChBnM,SAAUnoK,KAAKyzK,yBAEjBtO,IAAAA,cAACyN,GAAY,CACXh1K,GAAIoC,KAAKm0K,aAAa,gBACtBz3K,KAAMsD,KAAKo0K,eAAe,gBAC1BhsK,MAAOpI,KAAKq0K,UAAU,gBACtB5zK,MAAOT,KAAKg7B,MAAMm4I,aAClBT,UAAW1yK,KAAKu0K,oBAChBpM,SAAUnoK,KAAK0zK,yBAEjBvO,IAAAA,cAACyN,GAAY,CACXh1K,GAAIoC,KAAKm0K,aAAa,QACtBz3K,KAAMsD,KAAKo0K,eAAe,QAC1BhsK,MAAOpI,KAAK/C,MAAMg3K,OAAOb,KACzB3yK,MAAOT,KAAKg7B,MAAMo4I,KAClBjL,SAAUnoK,KAAK2zK,iBAEjBxO,IAAAA,cAACyN,GAAY,CACXh1K,GAAIoC,KAAKm0K,aAAa,OACtBz3K,KAAMsD,KAAKo0K,eAAe,OAC1BhsK,MAAOpI,KAAK/C,MAAMg3K,OAAOZ,IACzB5yK,MAAOT,KAAKg7B,MAAMq4I,IAClBlL,SAAUnoK,KAAK4zK,gBAEjBzO,IAAAA,cAACyN,GAAY,CACXh1K,GAAIoC,KAAKm0K,aAAa,WACtBz3K,KAAMsD,KAAKo0K,eAAe,WAC1BhsK,MAAOpI,KAAK/C,MAAMg3K,OAAOX,QACzB7yK,MAAOT,KAAKg7B,MAAMs4I,QAClBnL,SAAUnoK,KAAK6zK,oBAEjB1O,IAAAA,cAAA,SAAOh/J,KAAK,SACVvI,GAAIoC,KAAKm0K,aAAa,QACtBz3K,KAAMsD,KAAKo0K,eAAe,QAC1B3zK,MAAOT,KAAKg7B,MAAMu4I,eAI5B,M,qEAACN,CAAA,CAjMU,CAAS9N,IAAAA,W,k0ECoKtB,SAnK6B,SAAA0B,I,sRAAAC,CAAA0N,EAAA3N,GAAA,I,QAAAhG,G,EAAA2T,E,kZAE3B,SAAAA,EAAYv3K,GAAO,IAAA8C,G,4FAAAK,CAAA,KAAAo0K,GACjBz0K,EAAA8gK,EAAAxsJ,KAAA,KAAMpX,GAGN,IAAI2H,EAAK3H,EAAMqxK,QAEfvuK,EAAKi7B,MAAQ,CAAC,EAgBd,IAZA,IAYAj3B,EAAA,EAAAwqK,EAZkB,CAChB,KACA,OACA,QACA,aACA,SACA,YACA,gBACA,iBAIuBxqK,EAAAwqK,EAAA/xK,OAAAuH,IAAE,CAAtB,IAAIvG,EAAG+wK,EAAAxqK,GACNtD,EAAQmE,EAAGgiK,QAAQppK,GACvBuC,EAAKi7B,MAAMx9B,GAAOuC,EAAKyuK,WAAW/tK,EACpC,CAWA,OARAV,EAAK+5E,IAAM,IAAIw4F,GAAiB,CAC9BC,WAAYxyK,EAAKi7B,MAAMu3I,aAIzBxyK,EAAKyzK,kBAAoBzzK,EAAKyzK,kBAAkB17J,KAAIovJ,GAAAnnK,IACpDA,EAAK0zK,uBAAyB1zK,EAAK0zK,uBAAuB37J,KAAIovJ,GAAAnnK,IAE9DovK,GAAApvK,EAAAmnK,GAAAnnK,GACF,CAyHC,O,EAzHAy0K,G,EAAA,EAAAh3K,IAAA,aAAAiD,MAED,SAAWA,GACT,IACE,OAAOotH,KAAK9/E,MAAMttC,EACpB,CAAE,MAAOm1B,GAET,CACF,GAEA,CAAAp4B,IAAA,oBAAAiD,MAMA,SAAkB2C,GAEhB,IAAIiV,EAAOrY,KACP+B,EAAU/B,KAAK85E,IAAI26F,mBAAmBrxK,GAqB1C,OApBArB,EAAQ4wB,MAAK,SAASsB,GAGpB,IAAIggJ,EAAMS,GAAA,GAAOr8J,EAAK2iB,MAAMi5I,QACxBhgJ,EAAKz3B,OAAS,IAChBy3K,EAAO7wK,GAAuB,aAAI6wB,EAAK,GAAG9tB,MAI5C,IAAIwuK,EAAYD,GAAA,GAAOr8J,EAAK2iB,MAAM+4I,eAGlCY,EAAavxK,GAAW6wB,EAAK9wB,KAAI,SAAC8P,GAAC,OAAKA,EAAEvW,IAAI,IAAEkG,OAGhDyV,EAAK84J,SAAS,CACZ4C,cAAeY,EACfV,OAAQA,GAEZ,IACOlyK,CACT,GAEA,CAAAvE,IAAA,yBAAAiD,MAMA,SAAuB2C,EAASwxK,GAE9B,IAAIv8J,EAAOrY,KACP+B,EAAU/B,KAAK85E,IAAI26F,mBAAmBG,GAqB1C,OApBA7yK,EAAQ4wB,MAAK,SAASsB,GAGpB,IAAIggJ,EAAMS,GAAA,GAAOr8J,EAAK2iB,MAAMi5I,QACxBhgJ,EAAKz3B,OAAS,IAChBy3K,EAAO7wK,GAAuB,aAAI6wB,EAAK,GAAG9tB,MAI5C,IAAIwuK,EAAYD,GAAA,GAAOr8J,EAAK2iB,MAAMg5I,eAGlCW,EAAaC,GAAe3gJ,EAAK9wB,KAAI,SAAC8P,GAAC,OAAKA,EAAEvW,IAAI,IAAEkG,OAGpDyV,EAAK84J,SAAS,CACZ6C,cAAeW,EACfV,OAAQA,GAEZ,IACOlyK,CACT,GAAC,CAAAvE,IAAA,eAAAiD,MAED,WACE,IAE2CiqK,E,IAFvCmK,EAAa,GACbzvJ,EAAQplB,KAAKg7B,MAAM5V,MAAMulJ,E,gmBAAAC,CACDxlJ,EAAMmhJ,WAAS,IAA3C,IAAAoE,EAAA3gK,MAAA0gK,EAAAC,EAAA1zJ,KAAA8b,MAA6C,KAAA+hJ,G,EAAApK,EAAAjqK,M,EAAA,E,wnBAAjCwC,EAAK6xK,EAAA,GAAE74J,EAAI64J,EAAA,GACjBC,EAAgB,GAChB3vJ,EAAM5oB,OAAS,IAEjBu4K,EACE5P,IAAAA,cAAA,cAASnlK,KAAKg7B,MAAMi5I,OAAOh4J,EAAK9V,QAIpC0uK,EAAWpwK,KACT0gK,IAAAA,cAAA,OAAK1jH,MAAM,aACRszH,EACD5P,IAAAA,cAAC8N,GAAO,CACNr1K,GAAIoC,KAAKg7B,MAAMp9B,GACflB,KAAMsD,KAAKg7B,MAAMt+B,KACjBuG,MAAOA,EACPswK,aAAct3J,EAAK9V,KACnB/C,QAAS6Y,EAAK7Y,QACd8vK,aAAcj3J,EAAKi3J,aACnBC,aAAcl3J,EAAKk3J,aACnBC,KAAMn3J,EAAKm3J,KACXC,IAAKp3J,EAAKo3J,IACVC,QAASr3J,EAAKq3J,QACdW,OAAQj0K,KAAKg7B,MAAMi5I,OACnBtxK,UAAW3C,KAAKg7B,MAAMr4B,UACtBoxK,cAAe/zK,KAAKg7B,MAAM+4I,cAC1BC,cAAeh0K,KAAKg7B,MAAMg5I,cAC1BR,kBAAmBxzK,KAAKwzK,kBACxBC,uBAAwBzzK,KAAKyzK,0BAIrC,CAAC,OAAAlgJ,GAAAo3I,EAAA3iK,EAAAurB,EAAA,SAAAo3I,EAAAn3J,GAAA,CACD,OAAOqhK,CACT,GAAC,CAAAr3K,IAAA,SAAAiD,MAED,WACE,OACI0kK,IAAAA,cAAA,OAAK/+J,UAAU,iBACZpG,KAAKg1K,eAGd,M,qEAACR,CAAA,CAhK0B,CAASrP,IAAAA,WCM/B,ICHD8P,GAAU,CAEd,CACEltJ,SAAU,oCACVmtJ,SAAU,SAACtwK,GAAE,ODDwB,SAACA,GACxCwgK,IAAAA,OAAgBD,IAAAA,cAAC+I,EAA2B,CAACiE,WAAW,mBAAmB7D,QAAS1pK,IAAOA,EAC7F,CCDsBuwK,CAA0BvwK,EAAG,GAGjD,CACEmjB,SAAU,qCACVmtJ,SAAU,SAACtwK,GAAE,ODDyB,SAACA,GACzCwgK,IAAAA,OAAgBD,IAAAA,cAAC+I,EAA2B,CAACiE,WAAW,oBAAoB7D,QAAS1pK,IAAOA,EAC9F,CCDsBwwK,CAA2BxwK,EAAG,GAGlD,CACEmjB,SAAU,gCACVmtJ,SAAU,SAACtwK,GAAE,ODDoB,SAACA,GACpCwgK,IAAAA,OAAgBD,IAAAA,cAACqP,GAAuB,CAACrC,WAAW,UAAU7D,QAAS1pK,IAAOA,EAChF,CCDsBywK,CAAsBzwK,EAAG,GAG7C,CACEmjB,SAAU,8BACVmtJ,SAAU,SAACtwK,GAAE,ODWkB,SAACA,GAClC,IAAIhH,EAAKgH,EAAGgiK,QAAQ0O,eAChBC,EAAkB3wK,EAAGgiK,QAAQ2O,gBAC7BC,EAAsB3nD,KAAK9/E,MAAMnpC,EAAGgiK,QAAQ4O,qBAC5CC,EAAc,CAAC,iBAAkB,uBAAwB,YAAa,WAAY,kBAClF9iK,EAAMI,IAAanO,EAAI,CACzB9F,eAAgBy2K,EAChBp2K,mBAAoBq2K,EAEpB/2K,kBAAmBR,SAASkD,KAE5B9B,YAAa,yEAGJhD,IAAPuB,GACFgH,EAAGgD,iBAAiB,QAAQ,WAE1B,IAAIkgF,EAAQn1E,EAAIf,gBACZnI,EAASkJ,EAAIhL,YACb04F,EAAQz7F,EAAGs/C,QAAQ,UACvB,GAAI4jC,EACFuY,EAAMj/F,UAAUiJ,OAAO,SACvBg2F,EAAMhyF,MAAQ,OACT,CACLgyF,EAAMj/F,UAAUC,IAAI,SACpB,IAAIq0K,EAAa/iK,EAAIhB,qBACjBgkK,EAAYF,EAAYC,GAC5Br1E,EAAMhyF,MAAQsnK,CAChB,CAEA,IAAIj5K,EAAOkI,EAAGgiK,QAAQlqK,KACTuB,SAASkP,cAAc,eAAiBzQ,EAAO,MACrD+D,MAAQgJ,CACjB,GAEJ,CC9CsBmsK,CAAoBhxK,EAAG,GAG3C,CACEmjB,SAAU,uIACVmtJ,SAAU,SAACtwK,GAAE,ODNoB,SAACA,GACpCm4J,IAAAA,KAAa,CACX5vI,OAAQ,IACR0oJ,mBAAmB,EACnB74K,OAAQ4H,EACRmxG,QAAS,CAAC,QAAS,OAAQ,aAAc,QAAS,QAElD+/D,YAAc,0DAElB,CCHsBC,CAAsBnxK,EAAG,IAMzCoxK,GAAqB,SAACtvH,GAC1BuuH,GAAQ5O,SAAQ,SAAC4P,GACf,IACIxqJ,GADOi7B,aAAwB/9B,KAAQ+9B,EAAezoD,UACtC45C,iBAAiBo+H,EAAIluJ,UACrCmtJ,EAAWe,EAAIf,SACnBzpJ,EAAS46I,SAAQ,SAACx2J,GAChB,IAAIqlK,EAGF,MAAM,IAAI/mK,MAAM,4BAFhB+mK,EAASrlK,EAIb,GACF,GACF,EAGA5R,SAAS2J,iBAAiB,oBAAoB,WAI5CouK,KAGA/3K,SAASkD,KAAKyG,iBAAiB,sBAAsB,SAAC0oC,GAGpD0lI,GAAmB1lI,EAAMg0G,OAAOh5C,IAClC,GAEF,G","sources":["webpack:///../node_modules/intl-tel-input/build/js/intlTelInput.js","webpack:///../node_modules/intl-tel-input/index.js","webpack:///../node_modules/tinymce/tinymce.js","webpack:///external var \"jQuery\"","webpack:///webpack/bootstrap","webpack:///webpack/runtime/compat get default export","webpack:///webpack/runtime/define property getters","webpack:///webpack/runtime/global","webpack:///webpack/runtime/hasOwnProperty shorthand","webpack:///external var \"React\"","webpack:///external var \"ReactDOM\"","webpack:///./api/search.js","webpack:///./widgets/components/SearchField.js","webpack:///./components/i18n.js","webpack:///./i18n-wrapper.js","webpack:///./widgets/components/SearchResults.js","webpack:///./widgets/components/SelectedValues.js","webpack:///./widgets/queryselect/widget.js","webpack:///./widgets/addresswidget/api.js","webpack:///./widgets/addresswidget/components/LocationSelector.js","webpack:///./widgets/addresswidget/components/AddressField.js","webpack:///./widgets/addresswidget/components/Address.js","webpack:///./widgets/addresswidget/widget.js","webpack:///./widgets/renderer.js","webpack:///./senaite.core.widgets.js"],"sourcesContent":["/*\n * International Telephone Input v17.0.21\n * https://github.com/jackocnr/intl-tel-input.git\n * Licensed under the MIT license\n */\n\n// wrap in UMD\n(function(factory) {\n    if (typeof module === \"object\" && module.exports) module.exports = factory(); else window.intlTelInput = factory();\n})(function(undefined) {\n    \"use strict\";\n    return function() {\n        // Array of country objects for the flag dropdown.\n        // Here is the criteria for the plugin to support a given country/territory\n        // - It has an iso2 code: https://en.wikipedia.org/wiki/ISO_3166-1_alpha-2\n        // - It has it's own country calling code (it is not a sub-region of another country): https://en.wikipedia.org/wiki/List_of_country_calling_codes\n        // - It has a flag in the region-flags project: https://github.com/behdad/region-flags/tree/gh-pages/png\n        // - It is supported by libphonenumber (it must be listed on this page): https://github.com/googlei18n/libphonenumber/blob/master/resources/ShortNumberMetadata.xml\n        // Each country array has the following information:\n        // [\n        //    Country name,\n        //    iso2 code,\n        //    International dial code,\n        //    Order (if >1 country with same dial code),\n        //    Area codes\n        // ]\n        var allCountries = [ [ \"Afghanistan (‫افغانستان‬‎)\", \"af\", \"93\" ], [ \"Albania (Shqipëri)\", \"al\", \"355\" ], [ \"Algeria (‫الجزائر‬‎)\", \"dz\", \"213\" ], [ \"American Samoa\", \"as\", \"1\", 5, [ \"684\" ] ], [ \"Andorra\", \"ad\", \"376\" ], [ \"Angola\", \"ao\", \"244\" ], [ \"Anguilla\", \"ai\", \"1\", 6, [ \"264\" ] ], [ \"Antigua and Barbuda\", \"ag\", \"1\", 7, [ \"268\" ] ], [ \"Argentina\", \"ar\", \"54\" ], [ \"Armenia (Հայաստան)\", \"am\", \"374\" ], [ \"Aruba\", \"aw\", \"297\" ], [ \"Ascension Island\", \"ac\", \"247\" ], [ \"Australia\", \"au\", \"61\", 0 ], [ \"Austria (Österreich)\", \"at\", \"43\" ], [ \"Azerbaijan (Azərbaycan)\", \"az\", \"994\" ], [ \"Bahamas\", \"bs\", \"1\", 8, [ \"242\" ] ], [ \"Bahrain (‫البحرين‬‎)\", \"bh\", \"973\" ], [ \"Bangladesh (বাংলাদেশ)\", \"bd\", \"880\" ], [ \"Barbados\", \"bb\", \"1\", 9, [ \"246\" ] ], [ \"Belarus (Беларусь)\", \"by\", \"375\" ], [ \"Belgium (België)\", \"be\", \"32\" ], [ \"Belize\", \"bz\", \"501\" ], [ \"Benin (Bénin)\", \"bj\", \"229\" ], [ \"Bermuda\", \"bm\", \"1\", 10, [ \"441\" ] ], [ \"Bhutan (འབྲུག)\", \"bt\", \"975\" ], [ \"Bolivia\", \"bo\", \"591\" ], [ \"Bosnia and Herzegovina (Босна и Херцеговина)\", \"ba\", \"387\" ], [ \"Botswana\", \"bw\", \"267\" ], [ \"Brazil (Brasil)\", \"br\", \"55\" ], [ \"British Indian Ocean Territory\", \"io\", \"246\" ], [ \"British Virgin Islands\", \"vg\", \"1\", 11, [ \"284\" ] ], [ \"Brunei\", \"bn\", \"673\" ], [ \"Bulgaria (България)\", \"bg\", \"359\" ], [ \"Burkina Faso\", \"bf\", \"226\" ], [ \"Burundi (Uburundi)\", \"bi\", \"257\" ], [ \"Cambodia (កម្ពុជា)\", \"kh\", \"855\" ], [ \"Cameroon (Cameroun)\", \"cm\", \"237\" ], [ \"Canada\", \"ca\", \"1\", 1, [ \"204\", \"226\", \"236\", \"249\", \"250\", \"289\", \"306\", \"343\", \"365\", \"387\", \"403\", \"416\", \"418\", \"431\", \"437\", \"438\", \"450\", \"506\", \"514\", \"519\", \"548\", \"579\", \"581\", \"587\", \"604\", \"613\", \"639\", \"647\", \"672\", \"705\", \"709\", \"742\", \"778\", \"780\", \"782\", \"807\", \"819\", \"825\", \"867\", \"873\", \"902\", \"905\" ] ], [ \"Cape Verde (Kabu Verdi)\", \"cv\", \"238\" ], [ \"Caribbean Netherlands\", \"bq\", \"599\", 1, [ \"3\", \"4\", \"7\" ] ], [ \"Cayman Islands\", \"ky\", \"1\", 12, [ \"345\" ] ], [ \"Central African Republic (République centrafricaine)\", \"cf\", \"236\" ], [ \"Chad (Tchad)\", \"td\", \"235\" ], [ \"Chile\", \"cl\", \"56\" ], [ \"China (中国)\", \"cn\", \"86\" ], [ \"Christmas Island\", \"cx\", \"61\", 2, [ \"89164\" ] ], [ \"Cocos (Keeling) Islands\", \"cc\", \"61\", 1, [ \"89162\" ] ], [ \"Colombia\", \"co\", \"57\" ], [ \"Comoros (‫جزر القمر‬‎)\", \"km\", \"269\" ], [ \"Congo (DRC) (Jamhuri ya Kidemokrasia ya Kongo)\", \"cd\", \"243\" ], [ \"Congo (Republic) (Congo-Brazzaville)\", \"cg\", \"242\" ], [ \"Cook Islands\", \"ck\", \"682\" ], [ \"Costa Rica\", \"cr\", \"506\" ], [ \"Côte d’Ivoire\", \"ci\", \"225\" ], [ \"Croatia (Hrvatska)\", \"hr\", \"385\" ], [ \"Cuba\", \"cu\", \"53\" ], [ \"Curaçao\", \"cw\", \"599\", 0 ], [ \"Cyprus (Κύπρος)\", \"cy\", \"357\" ], [ \"Czech Republic (Česká republika)\", \"cz\", \"420\" ], [ \"Denmark (Danmark)\", \"dk\", \"45\" ], [ \"Djibouti\", \"dj\", \"253\" ], [ \"Dominica\", \"dm\", \"1\", 13, [ \"767\" ] ], [ \"Dominican Republic (República Dominicana)\", \"do\", \"1\", 2, [ \"809\", \"829\", \"849\" ] ], [ \"Ecuador\", \"ec\", \"593\" ], [ \"Egypt (‫مصر‬‎)\", \"eg\", \"20\" ], [ \"El Salvador\", \"sv\", \"503\" ], [ \"Equatorial Guinea (Guinea Ecuatorial)\", \"gq\", \"240\" ], [ \"Eritrea\", \"er\", \"291\" ], [ \"Estonia (Eesti)\", \"ee\", \"372\" ], [ \"Eswatini\", \"sz\", \"268\" ], [ \"Ethiopia\", \"et\", \"251\" ], [ \"Falkland Islands (Islas Malvinas)\", \"fk\", \"500\" ], [ \"Faroe Islands (Føroyar)\", \"fo\", \"298\" ], [ \"Fiji\", \"fj\", \"679\" ], [ \"Finland (Suomi)\", \"fi\", \"358\", 0 ], [ \"France\", \"fr\", \"33\" ], [ \"French Guiana (Guyane française)\", \"gf\", \"594\" ], [ \"French Polynesia (Polynésie française)\", \"pf\", \"689\" ], [ \"Gabon\", \"ga\", \"241\" ], [ \"Gambia\", \"gm\", \"220\" ], [ \"Georgia (საქართველო)\", \"ge\", \"995\" ], [ \"Germany (Deutschland)\", \"de\", \"49\" ], [ \"Ghana (Gaana)\", \"gh\", \"233\" ], [ \"Gibraltar\", \"gi\", \"350\" ], [ \"Greece (Ελλάδα)\", \"gr\", \"30\" ], [ \"Greenland (Kalaallit Nunaat)\", \"gl\", \"299\" ], [ \"Grenada\", \"gd\", \"1\", 14, [ \"473\" ] ], [ \"Guadeloupe\", \"gp\", \"590\", 0 ], [ \"Guam\", \"gu\", \"1\", 15, [ \"671\" ] ], [ \"Guatemala\", \"gt\", \"502\" ], [ \"Guernsey\", \"gg\", \"44\", 1, [ \"1481\", \"7781\", \"7839\", \"7911\" ] ], [ \"Guinea (Guinée)\", \"gn\", \"224\" ], [ \"Guinea-Bissau (Guiné Bissau)\", \"gw\", \"245\" ], [ \"Guyana\", \"gy\", \"592\" ], [ \"Haiti\", \"ht\", \"509\" ], [ \"Honduras\", \"hn\", \"504\" ], [ \"Hong Kong (香港)\", \"hk\", \"852\" ], [ \"Hungary (Magyarország)\", \"hu\", \"36\" ], [ \"Iceland (Ísland)\", \"is\", \"354\" ], [ \"India (भारत)\", \"in\", \"91\" ], [ \"Indonesia\", \"id\", \"62\" ], [ \"Iran (‫ایران‬‎)\", \"ir\", \"98\" ], [ \"Iraq (‫العراق‬‎)\", \"iq\", \"964\" ], [ \"Ireland\", \"ie\", \"353\" ], [ \"Isle of Man\", \"im\", \"44\", 2, [ \"1624\", \"74576\", \"7524\", \"7924\", \"7624\" ] ], [ \"Israel (‫ישראל‬‎)\", \"il\", \"972\" ], [ \"Italy (Italia)\", \"it\", \"39\", 0 ], [ \"Jamaica\", \"jm\", \"1\", 4, [ \"876\", \"658\" ] ], [ \"Japan (日本)\", \"jp\", \"81\" ], [ \"Jersey\", \"je\", \"44\", 3, [ \"1534\", \"7509\", \"7700\", \"7797\", \"7829\", \"7937\" ] ], [ \"Jordan (‫الأردن‬‎)\", \"jo\", \"962\" ], [ \"Kazakhstan (Казахстан)\", \"kz\", \"7\", 1, [ \"33\", \"7\" ] ], [ \"Kenya\", \"ke\", \"254\" ], [ \"Kiribati\", \"ki\", \"686\" ], [ \"Kosovo\", \"xk\", \"383\" ], [ \"Kuwait (‫الكويت‬‎)\", \"kw\", \"965\" ], [ \"Kyrgyzstan (Кыргызстан)\", \"kg\", \"996\" ], [ \"Laos (ລາວ)\", \"la\", \"856\" ], [ \"Latvia (Latvija)\", \"lv\", \"371\" ], [ \"Lebanon (‫لبنان‬‎)\", \"lb\", \"961\" ], [ \"Lesotho\", \"ls\", \"266\" ], [ \"Liberia\", \"lr\", \"231\" ], [ \"Libya (‫ليبيا‬‎)\", \"ly\", \"218\" ], [ \"Liechtenstein\", \"li\", \"423\" ], [ \"Lithuania (Lietuva)\", \"lt\", \"370\" ], [ \"Luxembourg\", \"lu\", \"352\" ], [ \"Macau (澳門)\", \"mo\", \"853\" ], [ \"Madagascar (Madagasikara)\", \"mg\", \"261\" ], [ \"Malawi\", \"mw\", \"265\" ], [ \"Malaysia\", \"my\", \"60\" ], [ \"Maldives\", \"mv\", \"960\" ], [ \"Mali\", \"ml\", \"223\" ], [ \"Malta\", \"mt\", \"356\" ], [ \"Marshall Islands\", \"mh\", \"692\" ], [ \"Martinique\", \"mq\", \"596\" ], [ \"Mauritania (‫موريتانيا‬‎)\", \"mr\", \"222\" ], [ \"Mauritius (Moris)\", \"mu\", \"230\" ], [ \"Mayotte\", \"yt\", \"262\", 1, [ \"269\", \"639\" ] ], [ \"Mexico (México)\", \"mx\", \"52\" ], [ \"Micronesia\", \"fm\", \"691\" ], [ \"Moldova (Republica Moldova)\", \"md\", \"373\" ], [ \"Monaco\", \"mc\", \"377\" ], [ \"Mongolia (Монгол)\", \"mn\", \"976\" ], [ \"Montenegro (Crna Gora)\", \"me\", \"382\" ], [ \"Montserrat\", \"ms\", \"1\", 16, [ \"664\" ] ], [ \"Morocco (‫المغرب‬‎)\", \"ma\", \"212\", 0 ], [ \"Mozambique (Moçambique)\", \"mz\", \"258\" ], [ \"Myanmar (Burma) (မြန်မာ)\", \"mm\", \"95\" ], [ \"Namibia (Namibië)\", \"na\", \"264\" ], [ \"Nauru\", \"nr\", \"674\" ], [ \"Nepal (नेपाल)\", \"np\", \"977\" ], [ \"Netherlands (Nederland)\", \"nl\", \"31\" ], [ \"New Caledonia (Nouvelle-Calédonie)\", \"nc\", \"687\" ], [ \"New Zealand\", \"nz\", \"64\" ], [ \"Nicaragua\", \"ni\", \"505\" ], [ \"Niger (Nijar)\", \"ne\", \"227\" ], [ \"Nigeria\", \"ng\", \"234\" ], [ \"Niue\", \"nu\", \"683\" ], [ \"Norfolk Island\", \"nf\", \"672\" ], [ \"North Korea (조선 민주주의 인민 공화국)\", \"kp\", \"850\" ], [ \"North Macedonia (Северна Македонија)\", \"mk\", \"389\" ], [ \"Northern Mariana Islands\", \"mp\", \"1\", 17, [ \"670\" ] ], [ \"Norway (Norge)\", \"no\", \"47\", 0 ], [ \"Oman (‫عُمان‬‎)\", \"om\", \"968\" ], [ \"Pakistan (‫پاکستان‬‎)\", \"pk\", \"92\" ], [ \"Palau\", \"pw\", \"680\" ], [ \"Palestine (‫فلسطين‬‎)\", \"ps\", \"970\" ], [ \"Panama (Panamá)\", \"pa\", \"507\" ], [ \"Papua New Guinea\", \"pg\", \"675\" ], [ \"Paraguay\", \"py\", \"595\" ], [ \"Peru (Perú)\", \"pe\", \"51\" ], [ \"Philippines\", \"ph\", \"63\" ], [ \"Poland (Polska)\", \"pl\", \"48\" ], [ \"Portugal\", \"pt\", \"351\" ], [ \"Puerto Rico\", \"pr\", \"1\", 3, [ \"787\", \"939\" ] ], [ \"Qatar (‫قطر‬‎)\", \"qa\", \"974\" ], [ \"Réunion (La Réunion)\", \"re\", \"262\", 0 ], [ \"Romania (România)\", \"ro\", \"40\" ], [ \"Russia (Россия)\", \"ru\", \"7\", 0 ], [ \"Rwanda\", \"rw\", \"250\" ], [ \"Saint Barthélemy\", \"bl\", \"590\", 1 ], [ \"Saint Helena\", \"sh\", \"290\" ], [ \"Saint Kitts and Nevis\", \"kn\", \"1\", 18, [ \"869\" ] ], [ \"Saint Lucia\", \"lc\", \"1\", 19, [ \"758\" ] ], [ \"Saint Martin (Saint-Martin (partie française))\", \"mf\", \"590\", 2 ], [ \"Saint Pierre and Miquelon (Saint-Pierre-et-Miquelon)\", \"pm\", \"508\" ], [ \"Saint Vincent and the Grenadines\", \"vc\", \"1\", 20, [ \"784\" ] ], [ \"Samoa\", \"ws\", \"685\" ], [ \"San Marino\", \"sm\", \"378\" ], [ \"São Tomé and Príncipe (São Tomé e Príncipe)\", \"st\", \"239\" ], [ \"Saudi Arabia (‫المملكة العربية السعودية‬‎)\", \"sa\", \"966\" ], [ \"Senegal (Sénégal)\", \"sn\", \"221\" ], [ \"Serbia (Србија)\", \"rs\", \"381\" ], [ \"Seychelles\", \"sc\", \"248\" ], [ \"Sierra Leone\", \"sl\", \"232\" ], [ \"Singapore\", \"sg\", \"65\" ], [ \"Sint Maarten\", \"sx\", \"1\", 21, [ \"721\" ] ], [ \"Slovakia (Slovensko)\", \"sk\", \"421\" ], [ \"Slovenia (Slovenija)\", \"si\", \"386\" ], [ \"Solomon Islands\", \"sb\", \"677\" ], [ \"Somalia (Soomaaliya)\", \"so\", \"252\" ], [ \"South Africa\", \"za\", \"27\" ], [ \"South Korea (대한민국)\", \"kr\", \"82\" ], [ \"South Sudan (‫جنوب السودان‬‎)\", \"ss\", \"211\" ], [ \"Spain (España)\", \"es\", \"34\" ], [ \"Sri Lanka (ශ්‍රී ලංකාව)\", \"lk\", \"94\" ], [ \"Sudan (‫السودان‬‎)\", \"sd\", \"249\" ], [ \"Suriname\", \"sr\", \"597\" ], [ \"Svalbard and Jan Mayen\", \"sj\", \"47\", 1, [ \"79\" ] ], [ \"Sweden (Sverige)\", \"se\", \"46\" ], [ \"Switzerland (Schweiz)\", \"ch\", \"41\" ], [ \"Syria (‫سوريا‬‎)\", \"sy\", \"963\" ], [ \"Taiwan (台灣)\", \"tw\", \"886\" ], [ \"Tajikistan\", \"tj\", \"992\" ], [ \"Tanzania\", \"tz\", \"255\" ], [ \"Thailand (ไทย)\", \"th\", \"66\" ], [ \"Timor-Leste\", \"tl\", \"670\" ], [ \"Togo\", \"tg\", \"228\" ], [ \"Tokelau\", \"tk\", \"690\" ], [ \"Tonga\", \"to\", \"676\" ], [ \"Trinidad and Tobago\", \"tt\", \"1\", 22, [ \"868\" ] ], [ \"Tunisia (‫تونس‬‎)\", \"tn\", \"216\" ], [ \"Turkey (Türkiye)\", \"tr\", \"90\" ], [ \"Turkmenistan\", \"tm\", \"993\" ], [ \"Turks and Caicos Islands\", \"tc\", \"1\", 23, [ \"649\" ] ], [ \"Tuvalu\", \"tv\", \"688\" ], [ \"U.S. Virgin Islands\", \"vi\", \"1\", 24, [ \"340\" ] ], [ \"Uganda\", \"ug\", \"256\" ], [ \"Ukraine (Україна)\", \"ua\", \"380\" ], [ \"United Arab Emirates (‫الإمارات العربية المتحدة‬‎)\", \"ae\", \"971\" ], [ \"United Kingdom\", \"gb\", \"44\", 0 ], [ \"United States\", \"us\", \"1\", 0 ], [ \"Uruguay\", \"uy\", \"598\" ], [ \"Uzbekistan (Oʻzbekiston)\", \"uz\", \"998\" ], [ \"Vanuatu\", \"vu\", \"678\" ], [ \"Vatican City (Città del Vaticano)\", \"va\", \"39\", 1, [ \"06698\" ] ], [ \"Venezuela\", \"ve\", \"58\" ], [ \"Vietnam (Việt Nam)\", \"vn\", \"84\" ], [ \"Wallis and Futuna (Wallis-et-Futuna)\", \"wf\", \"681\" ], [ \"Western Sahara (‫الصحراء الغربية‬‎)\", \"eh\", \"212\", 1, [ \"5288\", \"5289\" ] ], [ \"Yemen (‫اليمن‬‎)\", \"ye\", \"967\" ], [ \"Zambia\", \"zm\", \"260\" ], [ \"Zimbabwe\", \"zw\", \"263\" ], [ \"Åland Islands\", \"ax\", \"358\", 1, [ \"18\" ] ] ];\n        // loop over all of the countries above, restructuring the data to be objects with named keys\n        for (var i = 0; i < allCountries.length; i++) {\n            var c = allCountries[i];\n            allCountries[i] = {\n                name: c[0],\n                iso2: c[1],\n                dialCode: c[2],\n                priority: c[3] || 0,\n                areaCodes: c[4] || null\n            };\n        }\n        \"use strict\";\n        function _classCallCheck(instance, Constructor) {\n            if (!(instance instanceof Constructor)) {\n                throw new TypeError(\"Cannot call a class as a function\");\n            }\n        }\n        function _defineProperties(target, props) {\n            for (var i = 0; i < props.length; i++) {\n                var descriptor = props[i];\n                descriptor.enumerable = descriptor.enumerable || false;\n                descriptor.configurable = true;\n                if (\"value\" in descriptor) descriptor.writable = true;\n                Object.defineProperty(target, descriptor.key, descriptor);\n            }\n        }\n        function _createClass(Constructor, protoProps, staticProps) {\n            if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n            if (staticProps) _defineProperties(Constructor, staticProps);\n            return Constructor;\n        }\n        var intlTelInputGlobals = {\n            getInstance: function getInstance(input) {\n                var id = input.getAttribute(\"data-intl-tel-input-id\");\n                return window.intlTelInputGlobals.instances[id];\n            },\n            instances: {},\n            // using a global like this allows us to mock it in the tests\n            documentReady: function documentReady() {\n                return document.readyState === \"complete\";\n            }\n        };\n        if (typeof window === \"object\") window.intlTelInputGlobals = intlTelInputGlobals;\n        // these vars persist through all instances of the plugin\n        var id = 0;\n        var defaults = {\n            // whether or not to allow the dropdown\n            allowDropdown: true,\n            // if there is just a dial code in the input: remove it on blur\n            autoHideDialCode: true,\n            // add a placeholder in the input with an example number for the selected country\n            autoPlaceholder: \"polite\",\n            // modify the parentClass\n            customContainer: \"\",\n            // modify the auto placeholder\n            customPlaceholder: null,\n            // append menu to specified element\n            dropdownContainer: null,\n            // don't display these countries\n            excludeCountries: [],\n            // format the input value during initialisation and on setNumber\n            formatOnDisplay: true,\n            // geoIp lookup function\n            geoIpLookup: null,\n            // inject a hidden input with this name, and on submit, populate it with the result of getNumber\n            hiddenInput: \"\",\n            // initial country\n            initialCountry: \"\",\n            // localized country names e.g. { 'de': 'Deutschland' }\n            localizedCountries: null,\n            // don't insert international dial codes\n            nationalMode: true,\n            // display only these countries\n            onlyCountries: [],\n            // number type to use for placeholders\n            placeholderNumberType: \"MOBILE\",\n            // the countries at the top of the list. defaults to united states and united kingdom\n            preferredCountries: [ \"us\", \"gb\" ],\n            // display the country dial code next to the selected flag so it's not part of the typed number\n            separateDialCode: false,\n            // specify the path to the libphonenumber script to enable validation/formatting\n            utilsScript: \"\"\n        };\n        // https://en.wikipedia.org/wiki/List_of_North_American_Numbering_Plan_area_codes#Non-geographic_area_codes\n        var regionlessNanpNumbers = [ \"800\", \"822\", \"833\", \"844\", \"855\", \"866\", \"877\", \"880\", \"881\", \"882\", \"883\", \"884\", \"885\", \"886\", \"887\", \"888\", \"889\" ];\n        // utility function to iterate over an object. can't use Object.entries or native forEach because\n        // of IE11\n        var forEachProp = function forEachProp(obj, callback) {\n            var keys = Object.keys(obj);\n            for (var i = 0; i < keys.length; i++) {\n                callback(keys[i], obj[keys[i]]);\n            }\n        };\n        // run a method on each instance of the plugin\n        var forEachInstance = function forEachInstance(method) {\n            forEachProp(window.intlTelInputGlobals.instances, function(key) {\n                window.intlTelInputGlobals.instances[key][method]();\n            });\n        };\n        // this is our plugin class that we will create an instance of\n        // eslint-disable-next-line no-unused-vars\n        var Iti = /*#__PURE__*/\n        function() {\n            function Iti(input, options) {\n                var _this = this;\n                _classCallCheck(this, Iti);\n                this.id = id++;\n                this.telInput = input;\n                this.activeItem = null;\n                this.highlightedItem = null;\n                // process specified options / defaults\n                // alternative to Object.assign, which isn't supported by IE11\n                var customOptions = options || {};\n                this.options = {};\n                forEachProp(defaults, function(key, value) {\n                    _this.options[key] = customOptions.hasOwnProperty(key) ? customOptions[key] : value;\n                });\n                this.hadInitialPlaceholder = Boolean(input.getAttribute(\"placeholder\"));\n            }\n            _createClass(Iti, [ {\n                key: \"_init\",\n                value: function _init() {\n                    var _this2 = this;\n                    // if in nationalMode, disable options relating to dial codes\n                    if (this.options.nationalMode) this.options.autoHideDialCode = false;\n                    // if separateDialCode then doesn't make sense to A) insert dial code into input\n                    // (autoHideDialCode), and B) display national numbers (because we're displaying the country\n                    // dial code next to them)\n                    if (this.options.separateDialCode) {\n                        this.options.autoHideDialCode = this.options.nationalMode = false;\n                    }\n                    // we cannot just test screen size as some smartphones/website meta tags will report desktop\n                    // resolutions\n                    // Note: for some reason jasmine breaks if you put this in the main Plugin function with the\n                    // rest of these declarations\n                    // Note: to target Android Mobiles (and not Tablets), we must find 'Android' and 'Mobile'\n                    this.isMobile = /Android.+Mobile|webOS|iPhone|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);\n                    if (this.isMobile) {\n                        // trigger the mobile dropdown css\n                        document.body.classList.add(\"iti-mobile\");\n                        // on mobile, we want a full screen dropdown, so we must append it to the body\n                        if (!this.options.dropdownContainer) this.options.dropdownContainer = document.body;\n                    }\n                    // these promises get resolved when their individual requests complete\n                    // this way the dev can do something like iti.promise.then(...) to know when all requests are\n                    // complete\n                    if (typeof Promise !== \"undefined\") {\n                        var autoCountryPromise = new Promise(function(resolve, reject) {\n                            _this2.resolveAutoCountryPromise = resolve;\n                            _this2.rejectAutoCountryPromise = reject;\n                        });\n                        var utilsScriptPromise = new Promise(function(resolve, reject) {\n                            _this2.resolveUtilsScriptPromise = resolve;\n                            _this2.rejectUtilsScriptPromise = reject;\n                        });\n                        this.promise = Promise.all([ autoCountryPromise, utilsScriptPromise ]);\n                    } else {\n                        // prevent errors when Promise doesn't exist\n                        this.resolveAutoCountryPromise = this.rejectAutoCountryPromise = function() {};\n                        this.resolveUtilsScriptPromise = this.rejectUtilsScriptPromise = function() {};\n                    }\n                    // in various situations there could be no country selected initially, but we need to be able\n                    // to assume this variable exists\n                    this.selectedCountryData = {};\n                    // process all the data: onlyCountries, excludeCountries, preferredCountries etc\n                    this._processCountryData();\n                    // generate the markup\n                    this._generateMarkup();\n                    // set the initial state of the input value and the selected flag\n                    this._setInitialState();\n                    // start all of the event listeners: autoHideDialCode, input keydown, selectedFlag click\n                    this._initListeners();\n                    // utils script, and auto country\n                    this._initRequests();\n                }\n            }, {\n                key: \"_processCountryData\",\n                value: function _processCountryData() {\n                    // process onlyCountries or excludeCountries array if present\n                    this._processAllCountries();\n                    // process the countryCodes map\n                    this._processCountryCodes();\n                    // process the preferredCountries\n                    this._processPreferredCountries();\n                    // translate countries according to localizedCountries option\n                    if (this.options.localizedCountries) this._translateCountriesByLocale();\n                    // sort countries by name\n                    if (this.options.onlyCountries.length || this.options.localizedCountries) {\n                        this.countries.sort(this._countryNameSort);\n                    }\n                }\n            }, {\n                key: \"_addCountryCode\",\n                value: function _addCountryCode(iso2, countryCode, priority) {\n                    if (countryCode.length > this.countryCodeMaxLen) {\n                        this.countryCodeMaxLen = countryCode.length;\n                    }\n                    if (!this.countryCodes.hasOwnProperty(countryCode)) {\n                        this.countryCodes[countryCode] = [];\n                    }\n                    // bail if we already have this country for this countryCode\n                    for (var i = 0; i < this.countryCodes[countryCode].length; i++) {\n                        if (this.countryCodes[countryCode][i] === iso2) return;\n                    }\n                    // check for undefined as 0 is falsy\n                    var index = priority !== undefined ? priority : this.countryCodes[countryCode].length;\n                    this.countryCodes[countryCode][index] = iso2;\n                }\n            }, {\n                key: \"_processAllCountries\",\n                value: function _processAllCountries() {\n                    if (this.options.onlyCountries.length) {\n                        var lowerCaseOnlyCountries = this.options.onlyCountries.map(function(country) {\n                            return country.toLowerCase();\n                        });\n                        this.countries = allCountries.filter(function(country) {\n                            return lowerCaseOnlyCountries.indexOf(country.iso2) > -1;\n                        });\n                    } else if (this.options.excludeCountries.length) {\n                        var lowerCaseExcludeCountries = this.options.excludeCountries.map(function(country) {\n                            return country.toLowerCase();\n                        });\n                        this.countries = allCountries.filter(function(country) {\n                            return lowerCaseExcludeCountries.indexOf(country.iso2) === -1;\n                        });\n                    } else {\n                        this.countries = allCountries;\n                    }\n                }\n            }, {\n                key: \"_translateCountriesByLocale\",\n                value: function _translateCountriesByLocale() {\n                    for (var i = 0; i < this.countries.length; i++) {\n                        var iso = this.countries[i].iso2.toLowerCase();\n                        if (this.options.localizedCountries.hasOwnProperty(iso)) {\n                            this.countries[i].name = this.options.localizedCountries[iso];\n                        }\n                    }\n                }\n            }, {\n                key: \"_countryNameSort\",\n                value: function _countryNameSort(a, b) {\n                    return a.name.localeCompare(b.name);\n                }\n            }, {\n                key: \"_processCountryCodes\",\n                value: function _processCountryCodes() {\n                    this.countryCodeMaxLen = 0;\n                    // here we store just dial codes\n                    this.dialCodes = {};\n                    // here we store \"country codes\" (both dial codes and their area codes)\n                    this.countryCodes = {};\n                    // first: add dial codes\n                    for (var i = 0; i < this.countries.length; i++) {\n                        var c = this.countries[i];\n                        if (!this.dialCodes[c.dialCode]) this.dialCodes[c.dialCode] = true;\n                        this._addCountryCode(c.iso2, c.dialCode, c.priority);\n                    }\n                    // next: add area codes\n                    // this is a second loop over countries, to make sure we have all of the \"root\" countries\n                    // already in the map, so that we can access them, as each time we add an area code substring\n                    // to the map, we also need to include the \"root\" country's code, as that also matches\n                    for (var _i = 0; _i < this.countries.length; _i++) {\n                        var _c = this.countries[_i];\n                        // area codes\n                        if (_c.areaCodes) {\n                            var rootCountryCode = this.countryCodes[_c.dialCode][0];\n                            // for each area code\n                            for (var j = 0; j < _c.areaCodes.length; j++) {\n                                var areaCode = _c.areaCodes[j];\n                                // for each digit in the area code to add all partial matches as well\n                                for (var k = 1; k < areaCode.length; k++) {\n                                    var partialDialCode = _c.dialCode + areaCode.substr(0, k);\n                                    // start with the root country, as that also matches this dial code\n                                    this._addCountryCode(rootCountryCode, partialDialCode);\n                                    this._addCountryCode(_c.iso2, partialDialCode);\n                                }\n                                // add the full area code\n                                this._addCountryCode(_c.iso2, _c.dialCode + areaCode);\n                            }\n                        }\n                    }\n                }\n            }, {\n                key: \"_processPreferredCountries\",\n                value: function _processPreferredCountries() {\n                    this.preferredCountries = [];\n                    for (var i = 0; i < this.options.preferredCountries.length; i++) {\n                        var countryCode = this.options.preferredCountries[i].toLowerCase();\n                        var countryData = this._getCountryData(countryCode, false, true);\n                        if (countryData) this.preferredCountries.push(countryData);\n                    }\n                }\n            }, {\n                key: \"_createEl\",\n                value: function _createEl(name, attrs, container) {\n                    var el = document.createElement(name);\n                    if (attrs) forEachProp(attrs, function(key, value) {\n                        return el.setAttribute(key, value);\n                    });\n                    if (container) container.appendChild(el);\n                    return el;\n                }\n            }, {\n                key: \"_generateMarkup\",\n                value: function _generateMarkup() {\n                    // if autocomplete does not exist on the element and its form, then\n                    // prevent autocomplete as there's no safe, cross-browser event we can react to, so it can\n                    // easily put the plugin in an inconsistent state e.g. the wrong flag selected for the\n                    // autocompleted number, which on submit could mean wrong number is saved (esp in nationalMode)\n                    if (!this.telInput.hasAttribute(\"autocomplete\") && !(this.telInput.form && this.telInput.form.hasAttribute(\"autocomplete\"))) {\n                        this.telInput.setAttribute(\"autocomplete\", \"off\");\n                    }\n                    // containers (mostly for positioning)\n                    var parentClass = \"iti\";\n                    if (this.options.allowDropdown) parentClass += \" iti--allow-dropdown\";\n                    if (this.options.separateDialCode) parentClass += \" iti--separate-dial-code\";\n                    if (this.options.customContainer) {\n                        parentClass += \" \";\n                        parentClass += this.options.customContainer;\n                    }\n                    var wrapper = this._createEl(\"div\", {\n                        \"class\": parentClass\n                    });\n                    this.telInput.parentNode.insertBefore(wrapper, this.telInput);\n                    this.flagsContainer = this._createEl(\"div\", {\n                        \"class\": \"iti__flag-container\"\n                    }, wrapper);\n                    wrapper.appendChild(this.telInput);\n                    // selected flag (displayed to left of input)\n                    this.selectedFlag = this._createEl(\"div\", {\n                        \"class\": \"iti__selected-flag\",\n                        role: \"combobox\",\n                        \"aria-controls\": \"iti-\".concat(this.id, \"__country-listbox\"),\n                        \"aria-owns\": \"iti-\".concat(this.id, \"__country-listbox\"),\n                        \"aria-expanded\": \"false\"\n                    }, this.flagsContainer);\n                    this.selectedFlagInner = this._createEl(\"div\", {\n                        \"class\": \"iti__flag\"\n                    }, this.selectedFlag);\n                    if (this.options.separateDialCode) {\n                        this.selectedDialCode = this._createEl(\"div\", {\n                            \"class\": \"iti__selected-dial-code\"\n                        }, this.selectedFlag);\n                    }\n                    if (this.options.allowDropdown) {\n                        // make element focusable and tab navigable\n                        this.selectedFlag.setAttribute(\"tabindex\", \"0\");\n                        this.dropdownArrow = this._createEl(\"div\", {\n                            \"class\": \"iti__arrow\"\n                        }, this.selectedFlag);\n                        // country dropdown: preferred countries, then divider, then all countries\n                        this.countryList = this._createEl(\"ul\", {\n                            \"class\": \"iti__country-list iti__hide\",\n                            id: \"iti-\".concat(this.id, \"__country-listbox\"),\n                            role: \"listbox\",\n                            \"aria-label\": \"List of countries\"\n                        });\n                        if (this.preferredCountries.length) {\n                            this._appendListItems(this.preferredCountries, \"iti__preferred\", true);\n                            this._createEl(\"li\", {\n                                \"class\": \"iti__divider\",\n                                role: \"separator\",\n                                \"aria-disabled\": \"true\"\n                            }, this.countryList);\n                        }\n                        this._appendListItems(this.countries, \"iti__standard\");\n                        // create dropdownContainer markup\n                        if (this.options.dropdownContainer) {\n                            this.dropdown = this._createEl(\"div\", {\n                                \"class\": \"iti iti--container\"\n                            });\n                            this.dropdown.appendChild(this.countryList);\n                        } else {\n                            this.flagsContainer.appendChild(this.countryList);\n                        }\n                    }\n                    if (this.options.hiddenInput) {\n                        var hiddenInputName = this.options.hiddenInput;\n                        var name = this.telInput.getAttribute(\"name\");\n                        if (name) {\n                            var i = name.lastIndexOf(\"[\");\n                            // if input name contains square brackets, then give the hidden input the same name,\n                            // replacing the contents of the last set of brackets with the given hiddenInput name\n                            if (i !== -1) hiddenInputName = \"\".concat(name.substr(0, i), \"[\").concat(hiddenInputName, \"]\");\n                        }\n                        this.hiddenInput = this._createEl(\"input\", {\n                            type: \"hidden\",\n                            name: hiddenInputName\n                        });\n                        wrapper.appendChild(this.hiddenInput);\n                    }\n                }\n            }, {\n                key: \"_appendListItems\",\n                value: function _appendListItems(countries, className, preferred) {\n                    // we create so many DOM elements, it is faster to build a temp string\n                    // and then add everything to the DOM in one go at the end\n                    var tmp = \"\";\n                    // for each country\n                    for (var i = 0; i < countries.length; i++) {\n                        var c = countries[i];\n                        var idSuffix = preferred ? \"-preferred\" : \"\";\n                        // open the list item\n                        tmp += \"<li class='iti__country \".concat(className, \"' tabIndex='-1' id='iti-\").concat(this.id, \"__item-\").concat(c.iso2).concat(idSuffix, \"' role='option' data-dial-code='\").concat(c.dialCode, \"' data-country-code='\").concat(c.iso2, \"' aria-selected='false'>\");\n                        // add the flag\n                        tmp += \"<div class='iti__flag-box'><div class='iti__flag iti__\".concat(c.iso2, \"'></div></div>\");\n                        // and the country name and dial code\n                        tmp += \"<span class='iti__country-name'>\".concat(c.name, \"</span>\");\n                        tmp += \"<span class='iti__dial-code'>+\".concat(c.dialCode, \"</span>\");\n                        // close the list item\n                        tmp += \"</li>\";\n                    }\n                    this.countryList.insertAdjacentHTML(\"beforeend\", tmp);\n                }\n            }, {\n                key: \"_setInitialState\",\n                value: function _setInitialState() {\n                    // fix firefox bug: when first load page (with input with value set to number with intl dial\n                    // code) and initialising plugin removes the dial code from the input, then refresh page,\n                    // and we try to init plugin again but this time on number without dial code so get grey flag\n                    var attributeValue = this.telInput.getAttribute(\"value\");\n                    var inputValue = this.telInput.value;\n                    var useAttribute = attributeValue && attributeValue.charAt(0) === \"+\" && (!inputValue || inputValue.charAt(0) !== \"+\");\n                    var val = useAttribute ? attributeValue : inputValue;\n                    var dialCode = this._getDialCode(val);\n                    var isRegionlessNanp = this._isRegionlessNanp(val);\n                    var _this$options = this.options, initialCountry = _this$options.initialCountry, nationalMode = _this$options.nationalMode, autoHideDialCode = _this$options.autoHideDialCode, separateDialCode = _this$options.separateDialCode;\n                    // if we already have a dial code, and it's not a regionlessNanp, we can go ahead and set the\n                    // flag, else fall back to the default country\n                    if (dialCode && !isRegionlessNanp) {\n                        this._updateFlagFromNumber(val);\n                    } else if (initialCountry !== \"auto\") {\n                        // see if we should select a flag\n                        if (initialCountry) {\n                            this._setFlag(initialCountry.toLowerCase());\n                        } else {\n                            if (dialCode && isRegionlessNanp) {\n                                // has intl dial code, is regionless nanp, and no initialCountry, so default to US\n                                this._setFlag(\"us\");\n                            } else {\n                                // no dial code and no initialCountry, so default to first in list\n                                this.defaultCountry = this.preferredCountries.length ? this.preferredCountries[0].iso2 : this.countries[0].iso2;\n                                if (!val) {\n                                    this._setFlag(this.defaultCountry);\n                                }\n                            }\n                        }\n                        // if empty and no nationalMode and no autoHideDialCode then insert the default dial code\n                        if (!val && !nationalMode && !autoHideDialCode && !separateDialCode) {\n                            this.telInput.value = \"+\".concat(this.selectedCountryData.dialCode);\n                        }\n                    }\n                    // NOTE: if initialCountry is set to auto, that will be handled separately\n                    // format - note this wont be run after _updateDialCode as that's only called if no val\n                    if (val) this._updateValFromNumber(val);\n                }\n            }, {\n                key: \"_initListeners\",\n                value: function _initListeners() {\n                    this._initKeyListeners();\n                    if (this.options.autoHideDialCode) this._initBlurListeners();\n                    if (this.options.allowDropdown) this._initDropdownListeners();\n                    if (this.hiddenInput) this._initHiddenInputListener();\n                }\n            }, {\n                key: \"_initHiddenInputListener\",\n                value: function _initHiddenInputListener() {\n                    var _this3 = this;\n                    this._handleHiddenInputSubmit = function() {\n                        _this3.hiddenInput.value = _this3.getNumber();\n                    };\n                    if (this.telInput.form) this.telInput.form.addEventListener(\"submit\", this._handleHiddenInputSubmit);\n                }\n            }, {\n                key: \"_getClosestLabel\",\n                value: function _getClosestLabel() {\n                    var el = this.telInput;\n                    while (el && el.tagName !== \"LABEL\") {\n                        el = el.parentNode;\n                    }\n                    return el;\n                }\n            }, {\n                key: \"_initDropdownListeners\",\n                value: function _initDropdownListeners() {\n                    var _this4 = this;\n                    // hack for input nested inside label (which is valid markup): clicking the selected-flag to\n                    // open the dropdown would then automatically trigger a 2nd click on the input which would\n                    // close it again\n                    this._handleLabelClick = function(e) {\n                        // if the dropdown is closed, then focus the input, else ignore the click\n                        if (_this4.countryList.classList.contains(\"iti__hide\")) _this4.telInput.focus(); else e.preventDefault();\n                    };\n                    var label = this._getClosestLabel();\n                    if (label) label.addEventListener(\"click\", this._handleLabelClick);\n                    // toggle country dropdown on click\n                    this._handleClickSelectedFlag = function() {\n                        // only intercept this event if we're opening the dropdown\n                        // else let it bubble up to the top (\"click-off-to-close\" listener)\n                        // we cannot just stopPropagation as it may be needed to close another instance\n                        if (_this4.countryList.classList.contains(\"iti__hide\") && !_this4.telInput.disabled && !_this4.telInput.readOnly) {\n                            _this4._showDropdown();\n                        }\n                    };\n                    this.selectedFlag.addEventListener(\"click\", this._handleClickSelectedFlag);\n                    // open dropdown list if currently focused\n                    this._handleFlagsContainerKeydown = function(e) {\n                        var isDropdownHidden = _this4.countryList.classList.contains(\"iti__hide\");\n                        if (isDropdownHidden && [ \"ArrowUp\", \"Up\", \"ArrowDown\", \"Down\", \" \", \"Enter\" ].indexOf(e.key) !== -1) {\n                            // prevent form from being submitted if \"ENTER\" was pressed\n                            e.preventDefault();\n                            // prevent event from being handled again by document\n                            e.stopPropagation();\n                            _this4._showDropdown();\n                        }\n                        // allow navigation from dropdown to input on TAB\n                        if (e.key === \"Tab\") _this4._closeDropdown();\n                    };\n                    this.flagsContainer.addEventListener(\"keydown\", this._handleFlagsContainerKeydown);\n                }\n            }, {\n                key: \"_initRequests\",\n                value: function _initRequests() {\n                    var _this5 = this;\n                    // if the user has specified the path to the utils script, fetch it on window.load, else resolve\n                    if (this.options.utilsScript && !window.intlTelInputUtils) {\n                        // if the plugin is being initialised after the window.load event has already been fired\n                        if (window.intlTelInputGlobals.documentReady()) {\n                            window.intlTelInputGlobals.loadUtils(this.options.utilsScript);\n                        } else {\n                            // wait until the load event so we don't block any other requests e.g. the flags image\n                            window.addEventListener(\"load\", function() {\n                                window.intlTelInputGlobals.loadUtils(_this5.options.utilsScript);\n                            });\n                        }\n                    } else this.resolveUtilsScriptPromise();\n                    if (this.options.initialCountry === \"auto\") this._loadAutoCountry(); else this.resolveAutoCountryPromise();\n                }\n            }, {\n                key: \"_loadAutoCountry\",\n                value: function _loadAutoCountry() {\n                    // 3 options:\n                    // 1) already loaded (we're done)\n                    // 2) not already started loading (start)\n                    // 3) already started loading (do nothing - just wait for loading callback to fire)\n                    if (window.intlTelInputGlobals.autoCountry) {\n                        this.handleAutoCountry();\n                    } else if (!window.intlTelInputGlobals.startedLoadingAutoCountry) {\n                        // don't do this twice!\n                        window.intlTelInputGlobals.startedLoadingAutoCountry = true;\n                        if (typeof this.options.geoIpLookup === \"function\") {\n                            this.options.geoIpLookup(function(countryCode) {\n                                window.intlTelInputGlobals.autoCountry = countryCode.toLowerCase();\n                                // tell all instances the auto country is ready\n                                // TODO: this should just be the current instances\n                                // UPDATE: use setTimeout in case their geoIpLookup function calls this callback straight\n                                // away (e.g. if they have already done the geo ip lookup somewhere else). Using\n                                // setTimeout means that the current thread of execution will finish before executing\n                                // this, which allows the plugin to finish initialising.\n                                setTimeout(function() {\n                                    return forEachInstance(\"handleAutoCountry\");\n                                });\n                            }, function() {\n                                return forEachInstance(\"rejectAutoCountryPromise\");\n                            });\n                        }\n                    }\n                }\n            }, {\n                key: \"_initKeyListeners\",\n                value: function _initKeyListeners() {\n                    var _this6 = this;\n                    // update flag on keyup\n                    this._handleKeyupEvent = function() {\n                        if (_this6._updateFlagFromNumber(_this6.telInput.value)) {\n                            _this6._triggerCountryChange();\n                        }\n                    };\n                    this.telInput.addEventListener(\"keyup\", this._handleKeyupEvent);\n                    // update flag on cut/paste events (now supported in all major browsers)\n                    this._handleClipboardEvent = function() {\n                        // hack because \"paste\" event is fired before input is updated\n                        setTimeout(_this6._handleKeyupEvent);\n                    };\n                    this.telInput.addEventListener(\"cut\", this._handleClipboardEvent);\n                    this.telInput.addEventListener(\"paste\", this._handleClipboardEvent);\n                }\n            }, {\n                key: \"_cap\",\n                value: function _cap(number) {\n                    var max = this.telInput.getAttribute(\"maxlength\");\n                    return max && number.length > max ? number.substr(0, max) : number;\n                }\n            }, {\n                key: \"_initBlurListeners\",\n                value: function _initBlurListeners() {\n                    var _this7 = this;\n                    // on blur or form submit: if just a dial code then remove it\n                    this._handleSubmitOrBlurEvent = function() {\n                        _this7._removeEmptyDialCode();\n                    };\n                    if (this.telInput.form) this.telInput.form.addEventListener(\"submit\", this._handleSubmitOrBlurEvent);\n                    this.telInput.addEventListener(\"blur\", this._handleSubmitOrBlurEvent);\n                }\n            }, {\n                key: \"_removeEmptyDialCode\",\n                value: function _removeEmptyDialCode() {\n                    if (this.telInput.value.charAt(0) === \"+\") {\n                        var numeric = this._getNumeric(this.telInput.value);\n                        // if just a plus, or if just a dial code\n                        if (!numeric || this.selectedCountryData.dialCode === numeric) {\n                            this.telInput.value = \"\";\n                        }\n                    }\n                }\n            }, {\n                key: \"_getNumeric\",\n                value: function _getNumeric(s) {\n                    return s.replace(/\\D/g, \"\");\n                }\n            }, {\n                key: \"_trigger\",\n                value: function _trigger(name) {\n                    // have to use old school document.createEvent as IE11 doesn't support `new Event()` syntax\n                    var e = document.createEvent(\"Event\");\n                    e.initEvent(name, true, true);\n                    // can bubble, and is cancellable\n                    this.telInput.dispatchEvent(e);\n                }\n            }, {\n                key: \"_showDropdown\",\n                value: function _showDropdown() {\n                    this.countryList.classList.remove(\"iti__hide\");\n                    this.selectedFlag.setAttribute(\"aria-expanded\", \"true\");\n                    this._setDropdownPosition();\n                    // update highlighting and scroll to active list item\n                    if (this.activeItem) {\n                        this._highlightListItem(this.activeItem, false);\n                        this._scrollTo(this.activeItem, true);\n                    }\n                    // bind all the dropdown-related listeners: mouseover, click, click-off, keydown\n                    this._bindDropdownListeners();\n                    // update the arrow\n                    this.dropdownArrow.classList.add(\"iti__arrow--up\");\n                    this._trigger(\"open:countrydropdown\");\n                }\n            }, {\n                key: \"_toggleClass\",\n                value: function _toggleClass(el, className, shouldHaveClass) {\n                    if (shouldHaveClass && !el.classList.contains(className)) el.classList.add(className); else if (!shouldHaveClass && el.classList.contains(className)) el.classList.remove(className);\n                }\n            }, {\n                key: \"_setDropdownPosition\",\n                value: function _setDropdownPosition() {\n                    var _this8 = this;\n                    if (this.options.dropdownContainer) {\n                        this.options.dropdownContainer.appendChild(this.dropdown);\n                    }\n                    if (!this.isMobile) {\n                        var pos = this.telInput.getBoundingClientRect();\n                        // windowTop from https://stackoverflow.com/a/14384091/217866\n                        var windowTop = window.pageYOffset || document.documentElement.scrollTop;\n                        var inputTop = pos.top + windowTop;\n                        var dropdownHeight = this.countryList.offsetHeight;\n                        // dropdownFitsBelow = (dropdownBottom < windowBottom)\n                        var dropdownFitsBelow = inputTop + this.telInput.offsetHeight + dropdownHeight < windowTop + window.innerHeight;\n                        var dropdownFitsAbove = inputTop - dropdownHeight > windowTop;\n                        // by default, the dropdown will be below the input. If we want to position it above the\n                        // input, we add the dropup class.\n                        this._toggleClass(this.countryList, \"iti__country-list--dropup\", !dropdownFitsBelow && dropdownFitsAbove);\n                        // if dropdownContainer is enabled, calculate postion\n                        if (this.options.dropdownContainer) {\n                            // by default the dropdown will be directly over the input because it's not in the flow.\n                            // If we want to position it below, we need to add some extra top value.\n                            var extraTop = !dropdownFitsBelow && dropdownFitsAbove ? 0 : this.telInput.offsetHeight;\n                            // calculate placement\n                            this.dropdown.style.top = \"\".concat(inputTop + extraTop, \"px\");\n                            this.dropdown.style.left = \"\".concat(pos.left + document.body.scrollLeft, \"px\");\n                            // close menu on window scroll\n                            this._handleWindowScroll = function() {\n                                return _this8._closeDropdown();\n                            };\n                            window.addEventListener(\"scroll\", this._handleWindowScroll);\n                        }\n                    }\n                }\n            }, {\n                key: \"_getClosestListItem\",\n                value: function _getClosestListItem(target) {\n                    var el = target;\n                    while (el && el !== this.countryList && !el.classList.contains(\"iti__country\")) {\n                        el = el.parentNode;\n                    }\n                    // if we reached the countryList element, then return null\n                    return el === this.countryList ? null : el;\n                }\n            }, {\n                key: \"_bindDropdownListeners\",\n                value: function _bindDropdownListeners() {\n                    var _this9 = this;\n                    // when mouse over a list item, just highlight that one\n                    // we add the class \"highlight\", so if they hit \"enter\" we know which one to select\n                    this._handleMouseoverCountryList = function(e) {\n                        // handle event delegation, as we're listening for this event on the countryList\n                        var listItem = _this9._getClosestListItem(e.target);\n                        if (listItem) _this9._highlightListItem(listItem, false);\n                    };\n                    this.countryList.addEventListener(\"mouseover\", this._handleMouseoverCountryList);\n                    // listen for country selection\n                    this._handleClickCountryList = function(e) {\n                        var listItem = _this9._getClosestListItem(e.target);\n                        if (listItem) _this9._selectListItem(listItem);\n                    };\n                    this.countryList.addEventListener(\"click\", this._handleClickCountryList);\n                    // click off to close\n                    // (except when this initial opening click is bubbling up)\n                    // we cannot just stopPropagation as it may be needed to close another instance\n                    var isOpening = true;\n                    this._handleClickOffToClose = function() {\n                        if (!isOpening) _this9._closeDropdown();\n                        isOpening = false;\n                    };\n                    document.documentElement.addEventListener(\"click\", this._handleClickOffToClose);\n                    // listen for up/down scrolling, enter to select, or letters to jump to country name.\n                    // use keydown as keypress doesn't fire for non-char keys and we want to catch if they\n                    // just hit down and hold it to scroll down (no keyup event).\n                    // listen on the document because that's where key events are triggered if no input has focus\n                    var query = \"\";\n                    var queryTimer = null;\n                    this._handleKeydownOnDropdown = function(e) {\n                        // prevent down key from scrolling the whole page,\n                        // and enter key from submitting a form etc\n                        e.preventDefault();\n                        // up and down to navigate\n                        if (e.key === \"ArrowUp\" || e.key === \"Up\" || e.key === \"ArrowDown\" || e.key === \"Down\") _this9._handleUpDownKey(e.key); else if (e.key === \"Enter\") _this9._handleEnterKey(); else if (e.key === \"Escape\") _this9._closeDropdown(); else if (/^[a-zA-ZÀ-ÿа-яА-Я ]$/.test(e.key)) {\n                            // jump to countries that start with the query string\n                            if (queryTimer) clearTimeout(queryTimer);\n                            query += e.key.toLowerCase();\n                            _this9._searchForCountry(query);\n                            // if the timer hits 1 second, reset the query\n                            queryTimer = setTimeout(function() {\n                                query = \"\";\n                            }, 1e3);\n                        }\n                    };\n                    document.addEventListener(\"keydown\", this._handleKeydownOnDropdown);\n                }\n            }, {\n                key: \"_handleUpDownKey\",\n                value: function _handleUpDownKey(key) {\n                    var next = key === \"ArrowUp\" || key === \"Up\" ? this.highlightedItem.previousElementSibling : this.highlightedItem.nextElementSibling;\n                    if (next) {\n                        // skip the divider\n                        if (next.classList.contains(\"iti__divider\")) {\n                            next = key === \"ArrowUp\" || key === \"Up\" ? next.previousElementSibling : next.nextElementSibling;\n                        }\n                        this._highlightListItem(next, true);\n                    }\n                }\n            }, {\n                key: \"_handleEnterKey\",\n                value: function _handleEnterKey() {\n                    if (this.highlightedItem) this._selectListItem(this.highlightedItem);\n                }\n            }, {\n                key: \"_searchForCountry\",\n                value: function _searchForCountry(query) {\n                    for (var i = 0; i < this.countries.length; i++) {\n                        if (this._startsWith(this.countries[i].name, query)) {\n                            var listItem = this.countryList.querySelector(\"#iti-\".concat(this.id, \"__item-\").concat(this.countries[i].iso2));\n                            // update highlighting and scroll\n                            this._highlightListItem(listItem, false);\n                            this._scrollTo(listItem, true);\n                            break;\n                        }\n                    }\n                }\n            }, {\n                key: \"_startsWith\",\n                value: function _startsWith(a, b) {\n                    return a.substr(0, b.length).toLowerCase() === b;\n                }\n            }, {\n                key: \"_updateValFromNumber\",\n                value: function _updateValFromNumber(originalNumber) {\n                    var number = originalNumber;\n                    if (this.options.formatOnDisplay && window.intlTelInputUtils && this.selectedCountryData) {\n                        var useNational = !this.options.separateDialCode && (this.options.nationalMode || number.charAt(0) !== \"+\");\n                        var _intlTelInputUtils$nu = intlTelInputUtils.numberFormat, NATIONAL = _intlTelInputUtils$nu.NATIONAL, INTERNATIONAL = _intlTelInputUtils$nu.INTERNATIONAL;\n                        var format = useNational ? NATIONAL : INTERNATIONAL;\n                        number = intlTelInputUtils.formatNumber(number, this.selectedCountryData.iso2, format);\n                    }\n                    number = this._beforeSetNumber(number);\n                    this.telInput.value = number;\n                }\n            }, {\n                key: \"_updateFlagFromNumber\",\n                value: function _updateFlagFromNumber(originalNumber) {\n                    // if we're in nationalMode and we already have US/Canada selected, make sure the number starts\n                    // with a +1 so _getDialCode will be able to extract the area code\n                    // update: if we dont yet have selectedCountryData, but we're here (trying to update the flag\n                    // from the number), that means we're initialising the plugin with a number that already has a\n                    // dial code, so fine to ignore this bit\n                    var number = originalNumber;\n                    var selectedDialCode = this.selectedCountryData.dialCode;\n                    var isNanp = selectedDialCode === \"1\";\n                    if (number && this.options.nationalMode && isNanp && number.charAt(0) !== \"+\") {\n                        if (number.charAt(0) !== \"1\") number = \"1\".concat(number);\n                        number = \"+\".concat(number);\n                    }\n                    // update flag if user types area code for another country\n                    if (this.options.separateDialCode && selectedDialCode && number.charAt(0) !== \"+\") {\n                        number = \"+\".concat(selectedDialCode).concat(number);\n                    }\n                    // try and extract valid dial code from input\n                    var dialCode = this._getDialCode(number, true);\n                    var numeric = this._getNumeric(number);\n                    var countryCode = null;\n                    if (dialCode) {\n                        var countryCodes = this.countryCodes[this._getNumeric(dialCode)];\n                        // check if the right country is already selected. this should be false if the number is\n                        // longer than the matched dial code because in this case we need to make sure that if\n                        // there are multiple country matches, that the first one is selected (note: we could\n                        // just check that here, but it requires the same loop that we already have later)\n                        var alreadySelected = countryCodes.indexOf(this.selectedCountryData.iso2) !== -1 && numeric.length <= dialCode.length - 1;\n                        var isRegionlessNanpNumber = selectedDialCode === \"1\" && this._isRegionlessNanp(numeric);\n                        // only update the flag if:\n                        // A) NOT (we currently have a NANP flag selected, and the number is a regionlessNanp)\n                        // AND\n                        // B) the right country is not already selected\n                        if (!isRegionlessNanpNumber && !alreadySelected) {\n                            // if using onlyCountries option, countryCodes[0] may be empty, so we must find the first\n                            // non-empty index\n                            for (var j = 0; j < countryCodes.length; j++) {\n                                if (countryCodes[j]) {\n                                    countryCode = countryCodes[j];\n                                    break;\n                                }\n                            }\n                        }\n                    } else if (number.charAt(0) === \"+\" && numeric.length) {\n                        // invalid dial code, so empty\n                        // Note: use getNumeric here because the number has not been formatted yet, so could contain\n                        // bad chars\n                        countryCode = \"\";\n                    } else if (!number || number === \"+\") {\n                        // empty, or just a plus, so default\n                        countryCode = this.defaultCountry;\n                    }\n                    if (countryCode !== null) {\n                        return this._setFlag(countryCode);\n                    }\n                    return false;\n                }\n            }, {\n                key: \"_isRegionlessNanp\",\n                value: function _isRegionlessNanp(number) {\n                    var numeric = this._getNumeric(number);\n                    if (numeric.charAt(0) === \"1\") {\n                        var areaCode = numeric.substr(1, 3);\n                        return regionlessNanpNumbers.indexOf(areaCode) !== -1;\n                    }\n                    return false;\n                }\n            }, {\n                key: \"_highlightListItem\",\n                value: function _highlightListItem(listItem, shouldFocus) {\n                    var prevItem = this.highlightedItem;\n                    if (prevItem) prevItem.classList.remove(\"iti__highlight\");\n                    this.highlightedItem = listItem;\n                    this.highlightedItem.classList.add(\"iti__highlight\");\n                    if (shouldFocus) this.highlightedItem.focus();\n                }\n            }, {\n                key: \"_getCountryData\",\n                value: function _getCountryData(countryCode, ignoreOnlyCountriesOption, allowFail) {\n                    var countryList = ignoreOnlyCountriesOption ? allCountries : this.countries;\n                    for (var i = 0; i < countryList.length; i++) {\n                        if (countryList[i].iso2 === countryCode) {\n                            return countryList[i];\n                        }\n                    }\n                    if (allowFail) {\n                        return null;\n                    }\n                    throw new Error(\"No country data for '\".concat(countryCode, \"'\"));\n                }\n            }, {\n                key: \"_setFlag\",\n                value: function _setFlag(countryCode) {\n                    var prevCountry = this.selectedCountryData.iso2 ? this.selectedCountryData : {};\n                    // do this first as it will throw an error and stop if countryCode is invalid\n                    this.selectedCountryData = countryCode ? this._getCountryData(countryCode, false, false) : {};\n                    // update the defaultCountry - we only need the iso2 from now on, so just store that\n                    if (this.selectedCountryData.iso2) {\n                        this.defaultCountry = this.selectedCountryData.iso2;\n                    }\n                    this.selectedFlagInner.setAttribute(\"class\", \"iti__flag iti__\".concat(countryCode));\n                    // update the selected country's title attribute\n                    var title = countryCode ? \"\".concat(this.selectedCountryData.name, \": +\").concat(this.selectedCountryData.dialCode) : \"Unknown\";\n                    this.selectedFlag.setAttribute(\"title\", title);\n                    if (this.options.separateDialCode) {\n                        var dialCode = this.selectedCountryData.dialCode ? \"+\".concat(this.selectedCountryData.dialCode) : \"\";\n                        this.selectedDialCode.innerHTML = dialCode;\n                        // offsetWidth is zero if input is in a hidden container during initialisation\n                        var selectedFlagWidth = this.selectedFlag.offsetWidth || this._getHiddenSelectedFlagWidth();\n                        // add 6px of padding after the grey selected-dial-code box, as this is what we use in the css\n                        this.telInput.style.paddingLeft = \"\".concat(selectedFlagWidth + 6, \"px\");\n                    }\n                    // and the input's placeholder\n                    this._updatePlaceholder();\n                    // update the active list item\n                    if (this.options.allowDropdown) {\n                        var prevItem = this.activeItem;\n                        if (prevItem) {\n                            prevItem.classList.remove(\"iti__active\");\n                            prevItem.setAttribute(\"aria-selected\", \"false\");\n                        }\n                        if (countryCode) {\n                            // check if there is a preferred item first, else fall back to standard\n                            var nextItem = this.countryList.querySelector(\"#iti-\".concat(this.id, \"__item-\").concat(countryCode, \"-preferred\")) || this.countryList.querySelector(\"#iti-\".concat(this.id, \"__item-\").concat(countryCode));\n                            nextItem.setAttribute(\"aria-selected\", \"true\");\n                            nextItem.classList.add(\"iti__active\");\n                            this.activeItem = nextItem;\n                            this.selectedFlag.setAttribute(\"aria-activedescendant\", nextItem.getAttribute(\"id\"));\n                        }\n                    }\n                    // return if the flag has changed or not\n                    return prevCountry.iso2 !== countryCode;\n                }\n            }, {\n                key: \"_getHiddenSelectedFlagWidth\",\n                value: function _getHiddenSelectedFlagWidth() {\n                    // to get the right styling to apply, all we need is a shallow clone of the container,\n                    // and then to inject a deep clone of the selectedFlag element\n                    var containerClone = this.telInput.parentNode.cloneNode();\n                    containerClone.style.visibility = \"hidden\";\n                    document.body.appendChild(containerClone);\n                    var flagsContainerClone = this.flagsContainer.cloneNode();\n                    containerClone.appendChild(flagsContainerClone);\n                    var selectedFlagClone = this.selectedFlag.cloneNode(true);\n                    flagsContainerClone.appendChild(selectedFlagClone);\n                    var width = selectedFlagClone.offsetWidth;\n                    containerClone.parentNode.removeChild(containerClone);\n                    return width;\n                }\n            }, {\n                key: \"_updatePlaceholder\",\n                value: function _updatePlaceholder() {\n                    var shouldSetPlaceholder = this.options.autoPlaceholder === \"aggressive\" || !this.hadInitialPlaceholder && this.options.autoPlaceholder === \"polite\";\n                    if (window.intlTelInputUtils && shouldSetPlaceholder) {\n                        var numberType = intlTelInputUtils.numberType[this.options.placeholderNumberType];\n                        var placeholder = this.selectedCountryData.iso2 ? intlTelInputUtils.getExampleNumber(this.selectedCountryData.iso2, this.options.nationalMode, numberType) : \"\";\n                        placeholder = this._beforeSetNumber(placeholder);\n                        if (typeof this.options.customPlaceholder === \"function\") {\n                            placeholder = this.options.customPlaceholder(placeholder, this.selectedCountryData);\n                        }\n                        this.telInput.setAttribute(\"placeholder\", placeholder);\n                    }\n                }\n            }, {\n                key: \"_selectListItem\",\n                value: function _selectListItem(listItem) {\n                    // update selected flag and active list item\n                    var flagChanged = this._setFlag(listItem.getAttribute(\"data-country-code\"));\n                    this._closeDropdown();\n                    this._updateDialCode(listItem.getAttribute(\"data-dial-code\"), true);\n                    // focus the input\n                    this.telInput.focus();\n                    // put cursor at end - this fix is required for FF and IE11 (with nationalMode=false i.e. auto\n                    // inserting dial code), who try to put the cursor at the beginning the first time\n                    var len = this.telInput.value.length;\n                    this.telInput.setSelectionRange(len, len);\n                    if (flagChanged) {\n                        this._triggerCountryChange();\n                    }\n                }\n            }, {\n                key: \"_closeDropdown\",\n                value: function _closeDropdown() {\n                    this.countryList.classList.add(\"iti__hide\");\n                    this.selectedFlag.setAttribute(\"aria-expanded\", \"false\");\n                    // update the arrow\n                    this.dropdownArrow.classList.remove(\"iti__arrow--up\");\n                    // unbind key events\n                    document.removeEventListener(\"keydown\", this._handleKeydownOnDropdown);\n                    document.documentElement.removeEventListener(\"click\", this._handleClickOffToClose);\n                    this.countryList.removeEventListener(\"mouseover\", this._handleMouseoverCountryList);\n                    this.countryList.removeEventListener(\"click\", this._handleClickCountryList);\n                    // remove menu from container\n                    if (this.options.dropdownContainer) {\n                        if (!this.isMobile) window.removeEventListener(\"scroll\", this._handleWindowScroll);\n                        if (this.dropdown.parentNode) this.dropdown.parentNode.removeChild(this.dropdown);\n                    }\n                    this._trigger(\"close:countrydropdown\");\n                }\n            }, {\n                key: \"_scrollTo\",\n                value: function _scrollTo(element, middle) {\n                    var container = this.countryList;\n                    // windowTop from https://stackoverflow.com/a/14384091/217866\n                    var windowTop = window.pageYOffset || document.documentElement.scrollTop;\n                    var containerHeight = container.offsetHeight;\n                    var containerTop = container.getBoundingClientRect().top + windowTop;\n                    var containerBottom = containerTop + containerHeight;\n                    var elementHeight = element.offsetHeight;\n                    var elementTop = element.getBoundingClientRect().top + windowTop;\n                    var elementBottom = elementTop + elementHeight;\n                    var newScrollTop = elementTop - containerTop + container.scrollTop;\n                    var middleOffset = containerHeight / 2 - elementHeight / 2;\n                    if (elementTop < containerTop) {\n                        // scroll up\n                        if (middle) newScrollTop -= middleOffset;\n                        container.scrollTop = newScrollTop;\n                    } else if (elementBottom > containerBottom) {\n                        // scroll down\n                        if (middle) newScrollTop += middleOffset;\n                        var heightDifference = containerHeight - elementHeight;\n                        container.scrollTop = newScrollTop - heightDifference;\n                    }\n                }\n            }, {\n                key: \"_updateDialCode\",\n                value: function _updateDialCode(newDialCodeBare, hasSelectedListItem) {\n                    var inputVal = this.telInput.value;\n                    // save having to pass this every time\n                    var newDialCode = \"+\".concat(newDialCodeBare);\n                    var newNumber;\n                    if (inputVal.charAt(0) === \"+\") {\n                        // there's a plus so we're dealing with a replacement (doesn't matter if nationalMode or not)\n                        var prevDialCode = this._getDialCode(inputVal);\n                        if (prevDialCode) {\n                            // current number contains a valid dial code, so replace it\n                            newNumber = inputVal.replace(prevDialCode, newDialCode);\n                        } else {\n                            // current number contains an invalid dial code, so ditch it\n                            // (no way to determine where the invalid dial code ends and the rest of the number begins)\n                            newNumber = newDialCode;\n                        }\n                    } else if (this.options.nationalMode || this.options.separateDialCode) {\n                        // don't do anything\n                        return;\n                    } else {\n                        // nationalMode is disabled\n                        if (inputVal) {\n                            // there is an existing value with no dial code: prefix the new dial code\n                            newNumber = newDialCode + inputVal;\n                        } else if (hasSelectedListItem || !this.options.autoHideDialCode) {\n                            // no existing value and either they've just selected a list item, or autoHideDialCode is\n                            // disabled: insert new dial code\n                            newNumber = newDialCode;\n                        } else {\n                            return;\n                        }\n                    }\n                    this.telInput.value = newNumber;\n                }\n            }, {\n                key: \"_getDialCode\",\n                value: function _getDialCode(number, includeAreaCode) {\n                    var dialCode = \"\";\n                    // only interested in international numbers (starting with a plus)\n                    if (number.charAt(0) === \"+\") {\n                        var numericChars = \"\";\n                        // iterate over chars\n                        for (var i = 0; i < number.length; i++) {\n                            var c = number.charAt(i);\n                            // if char is number (https://stackoverflow.com/a/8935649/217866)\n                            if (!isNaN(parseInt(c, 10))) {\n                                numericChars += c;\n                                // if current numericChars make a valid dial code\n                                if (includeAreaCode) {\n                                    if (this.countryCodes[numericChars]) {\n                                        // store the actual raw string (useful for matching later)\n                                        dialCode = number.substr(0, i + 1);\n                                    }\n                                } else {\n                                    if (this.dialCodes[numericChars]) {\n                                        dialCode = number.substr(0, i + 1);\n                                        // if we're just looking for a dial code, we can break as soon as we find one\n                                        break;\n                                    }\n                                }\n                                // stop searching as soon as we can - in this case when we hit max len\n                                if (numericChars.length === this.countryCodeMaxLen) {\n                                    break;\n                                }\n                            }\n                        }\n                    }\n                    return dialCode;\n                }\n            }, {\n                key: \"_getFullNumber\",\n                value: function _getFullNumber() {\n                    var val = this.telInput.value.trim();\n                    var dialCode = this.selectedCountryData.dialCode;\n                    var prefix;\n                    var numericVal = this._getNumeric(val);\n                    if (this.options.separateDialCode && val.charAt(0) !== \"+\" && dialCode && numericVal) {\n                        // when using separateDialCode, it is visible so is effectively part of the typed number\n                        prefix = \"+\".concat(dialCode);\n                    } else {\n                        prefix = \"\";\n                    }\n                    return prefix + val;\n                }\n            }, {\n                key: \"_beforeSetNumber\",\n                value: function _beforeSetNumber(originalNumber) {\n                    var number = originalNumber;\n                    if (this.options.separateDialCode) {\n                        var dialCode = this._getDialCode(number);\n                        // if there is a valid dial code\n                        if (dialCode) {\n                            // in case _getDialCode returned an area code as well\n                            dialCode = \"+\".concat(this.selectedCountryData.dialCode);\n                            // a lot of numbers will have a space separating the dial code and the main number, and\n                            // some NANP numbers will have a hyphen e.g. +1 684-733-1234 - in both cases we want to get\n                            // rid of it\n                            // NOTE: don't just trim all non-numerics as may want to preserve an open parenthesis etc\n                            var start = number[dialCode.length] === \" \" || number[dialCode.length] === \"-\" ? dialCode.length + 1 : dialCode.length;\n                            number = number.substr(start);\n                        }\n                    }\n                    return this._cap(number);\n                }\n            }, {\n                key: \"_triggerCountryChange\",\n                value: function _triggerCountryChange() {\n                    this._trigger(\"countrychange\");\n                }\n            }, {\n                key: \"handleAutoCountry\",\n                value: function handleAutoCountry() {\n                    if (this.options.initialCountry === \"auto\") {\n                        // we must set this even if there is an initial val in the input: in case the initial val is\n                        // invalid and they delete it - they should see their auto country\n                        this.defaultCountry = window.intlTelInputGlobals.autoCountry;\n                        // if there's no initial value in the input, then update the flag\n                        if (!this.telInput.value) {\n                            this.setCountry(this.defaultCountry);\n                        }\n                        this.resolveAutoCountryPromise();\n                    }\n                }\n            }, {\n                key: \"handleUtils\",\n                value: function handleUtils() {\n                    // if the request was successful\n                    if (window.intlTelInputUtils) {\n                        // if there's an initial value in the input, then format it\n                        if (this.telInput.value) {\n                            this._updateValFromNumber(this.telInput.value);\n                        }\n                        this._updatePlaceholder();\n                    }\n                    this.resolveUtilsScriptPromise();\n                }\n            }, {\n                key: \"destroy\",\n                value: function destroy() {\n                    var form = this.telInput.form;\n                    if (this.options.allowDropdown) {\n                        // make sure the dropdown is closed (and unbind listeners)\n                        this._closeDropdown();\n                        this.selectedFlag.removeEventListener(\"click\", this._handleClickSelectedFlag);\n                        this.flagsContainer.removeEventListener(\"keydown\", this._handleFlagsContainerKeydown);\n                        // label click hack\n                        var label = this._getClosestLabel();\n                        if (label) label.removeEventListener(\"click\", this._handleLabelClick);\n                    }\n                    // unbind hiddenInput listeners\n                    if (this.hiddenInput && form) form.removeEventListener(\"submit\", this._handleHiddenInputSubmit);\n                    // unbind autoHideDialCode listeners\n                    if (this.options.autoHideDialCode) {\n                        if (form) form.removeEventListener(\"submit\", this._handleSubmitOrBlurEvent);\n                        this.telInput.removeEventListener(\"blur\", this._handleSubmitOrBlurEvent);\n                    }\n                    // unbind key events, and cut/paste events\n                    this.telInput.removeEventListener(\"keyup\", this._handleKeyupEvent);\n                    this.telInput.removeEventListener(\"cut\", this._handleClipboardEvent);\n                    this.telInput.removeEventListener(\"paste\", this._handleClipboardEvent);\n                    // remove attribute of id instance: data-intl-tel-input-id\n                    this.telInput.removeAttribute(\"data-intl-tel-input-id\");\n                    // remove markup (but leave the original input)\n                    var wrapper = this.telInput.parentNode;\n                    wrapper.parentNode.insertBefore(this.telInput, wrapper);\n                    wrapper.parentNode.removeChild(wrapper);\n                    delete window.intlTelInputGlobals.instances[this.id];\n                }\n            }, {\n                key: \"getExtension\",\n                value: function getExtension() {\n                    if (window.intlTelInputUtils) {\n                        return intlTelInputUtils.getExtension(this._getFullNumber(), this.selectedCountryData.iso2);\n                    }\n                    return \"\";\n                }\n            }, {\n                key: \"getNumber\",\n                value: function getNumber(format) {\n                    if (window.intlTelInputUtils) {\n                        var iso2 = this.selectedCountryData.iso2;\n                        return intlTelInputUtils.formatNumber(this._getFullNumber(), iso2, format);\n                    }\n                    return \"\";\n                }\n            }, {\n                key: \"getNumberType\",\n                value: function getNumberType() {\n                    if (window.intlTelInputUtils) {\n                        return intlTelInputUtils.getNumberType(this._getFullNumber(), this.selectedCountryData.iso2);\n                    }\n                    return -99;\n                }\n            }, {\n                key: \"getSelectedCountryData\",\n                value: function getSelectedCountryData() {\n                    return this.selectedCountryData;\n                }\n            }, {\n                key: \"getValidationError\",\n                value: function getValidationError() {\n                    if (window.intlTelInputUtils) {\n                        var iso2 = this.selectedCountryData.iso2;\n                        return intlTelInputUtils.getValidationError(this._getFullNumber(), iso2);\n                    }\n                    return -99;\n                }\n            }, {\n                key: \"isValidNumber\",\n                value: function isValidNumber() {\n                    var val = this._getFullNumber().trim();\n                    var countryCode = this.options.nationalMode ? this.selectedCountryData.iso2 : \"\";\n                    return window.intlTelInputUtils ? intlTelInputUtils.isValidNumber(val, countryCode) : null;\n                }\n            }, {\n                key: \"setCountry\",\n                value: function setCountry(originalCountryCode) {\n                    var countryCode = originalCountryCode.toLowerCase();\n                    // check if already selected\n                    if (!this.selectedFlagInner.classList.contains(\"iti__\".concat(countryCode))) {\n                        this._setFlag(countryCode);\n                        this._updateDialCode(this.selectedCountryData.dialCode, false);\n                        this._triggerCountryChange();\n                    }\n                }\n            }, {\n                key: \"setNumber\",\n                value: function setNumber(number) {\n                    // we must update the flag first, which updates this.selectedCountryData, which is used for\n                    // formatting the number before displaying it\n                    var flagChanged = this._updateFlagFromNumber(number);\n                    this._updateValFromNumber(number);\n                    if (flagChanged) {\n                        this._triggerCountryChange();\n                    }\n                }\n            }, {\n                key: \"setPlaceholderNumberType\",\n                value: function setPlaceholderNumberType(type) {\n                    this.options.placeholderNumberType = type;\n                    this._updatePlaceholder();\n                }\n            } ]);\n            return Iti;\n        }();\n        /********************\n *  STATIC METHODS\n ********************/\n        // get the country data object\n        intlTelInputGlobals.getCountryData = function() {\n            return allCountries;\n        };\n        // inject a <script> element to load utils.js\n        var injectScript = function injectScript(path, handleSuccess, handleFailure) {\n            // inject a new script element into the page\n            var script = document.createElement(\"script\");\n            script.onload = function() {\n                forEachInstance(\"handleUtils\");\n                if (handleSuccess) handleSuccess();\n            };\n            script.onerror = function() {\n                forEachInstance(\"rejectUtilsScriptPromise\");\n                if (handleFailure) handleFailure();\n            };\n            script.className = \"iti-load-utils\";\n            script.async = true;\n            script.src = path;\n            document.body.appendChild(script);\n        };\n        // load the utils script\n        intlTelInputGlobals.loadUtils = function(path) {\n            // 2 options:\n            // 1) not already started loading (start)\n            // 2) already started loading (do nothing - just wait for the onload callback to fire, which will\n            // trigger handleUtils on all instances, invoking their resolveUtilsScriptPromise functions)\n            if (!window.intlTelInputUtils && !window.intlTelInputGlobals.startedLoadingUtilsScript) {\n                // only do this once\n                window.intlTelInputGlobals.startedLoadingUtilsScript = true;\n                // if we have promises, then return a promise\n                if (typeof Promise !== \"undefined\") {\n                    return new Promise(function(resolve, reject) {\n                        return injectScript(path, resolve, reject);\n                    });\n                }\n                injectScript(path);\n            }\n            return null;\n        };\n        // default options\n        intlTelInputGlobals.defaults = defaults;\n        // version\n        intlTelInputGlobals.version = \"17.0.21\";\n        // convenience wrapper\n        return function(input, options) {\n            var iti = new Iti(input, options);\n            iti._init();\n            input.setAttribute(\"data-intl-tel-input-id\", iti.id);\n            window.intlTelInputGlobals.instances[iti.id] = iti;\n            return iti;\n        };\n    }();\n});","/**\n * Exposing intl-tel-input as a component\n */\nmodule.exports = require(\"./build/js/intlTelInput\");\n","/**\n * Copyright (c) Tiny Technologies, Inc. All rights reserved.\n * Licensed under the LGPL or a commercial license.\n * For LGPL see License.txt in the project root for license information.\n * For commercial licenses see https://www.tiny.cloud/\n *\n * Version: 5.10.7 (2022-12-06)\n */\n(function () {\n    'use strict';\n\n    var typeOf$1 = function (x) {\n      if (x === null) {\n        return 'null';\n      }\n      if (x === undefined) {\n        return 'undefined';\n      }\n      var t = typeof x;\n      if (t === 'object' && (Array.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'Array')) {\n        return 'array';\n      }\n      if (t === 'object' && (String.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'String')) {\n        return 'string';\n      }\n      return t;\n    };\n    var isEquatableType = function (x) {\n      return [\n        'undefined',\n        'boolean',\n        'number',\n        'string',\n        'function',\n        'xml',\n        'null'\n      ].indexOf(x) !== -1;\n    };\n\n    var sort$1 = function (xs, compareFn) {\n      var clone = Array.prototype.slice.call(xs);\n      return clone.sort(compareFn);\n    };\n\n    var contramap = function (eqa, f) {\n      return eq$2(function (x, y) {\n        return eqa.eq(f(x), f(y));\n      });\n    };\n    var eq$2 = function (f) {\n      return { eq: f };\n    };\n    var tripleEq = eq$2(function (x, y) {\n      return x === y;\n    });\n    var eqString = tripleEq;\n    var eqArray = function (eqa) {\n      return eq$2(function (x, y) {\n        if (x.length !== y.length) {\n          return false;\n        }\n        var len = x.length;\n        for (var i = 0; i < len; i++) {\n          if (!eqa.eq(x[i], y[i])) {\n            return false;\n          }\n        }\n        return true;\n      });\n    };\n    var eqSortedArray = function (eqa, compareFn) {\n      return contramap(eqArray(eqa), function (xs) {\n        return sort$1(xs, compareFn);\n      });\n    };\n    var eqRecord = function (eqa) {\n      return eq$2(function (x, y) {\n        var kx = Object.keys(x);\n        var ky = Object.keys(y);\n        if (!eqSortedArray(eqString).eq(kx, ky)) {\n          return false;\n        }\n        var len = kx.length;\n        for (var i = 0; i < len; i++) {\n          var q = kx[i];\n          if (!eqa.eq(x[q], y[q])) {\n            return false;\n          }\n        }\n        return true;\n      });\n    };\n    var eqAny = eq$2(function (x, y) {\n      if (x === y) {\n        return true;\n      }\n      var tx = typeOf$1(x);\n      var ty = typeOf$1(y);\n      if (tx !== ty) {\n        return false;\n      }\n      if (isEquatableType(tx)) {\n        return x === y;\n      } else if (tx === 'array') {\n        return eqArray(eqAny).eq(x, y);\n      } else if (tx === 'object') {\n        return eqRecord(eqAny).eq(x, y);\n      }\n      return false;\n    });\n\n    var typeOf = function (x) {\n      var t = typeof x;\n      if (x === null) {\n        return 'null';\n      } else if (t === 'object' && (Array.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'Array')) {\n        return 'array';\n      } else if (t === 'object' && (String.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'String')) {\n        return 'string';\n      } else {\n        return t;\n      }\n    };\n    var isType$1 = function (type) {\n      return function (value) {\n        return typeOf(value) === type;\n      };\n    };\n    var isSimpleType = function (type) {\n      return function (value) {\n        return typeof value === type;\n      };\n    };\n    var eq$1 = function (t) {\n      return function (a) {\n        return t === a;\n      };\n    };\n    var isString$1 = isType$1('string');\n    var isObject = isType$1('object');\n    var isArray$1 = isType$1('array');\n    var isNull = eq$1(null);\n    var isBoolean = isSimpleType('boolean');\n    var isUndefined = eq$1(undefined);\n    var isNullable = function (a) {\n      return a === null || a === undefined;\n    };\n    var isNonNullable = function (a) {\n      return !isNullable(a);\n    };\n    var isFunction = isSimpleType('function');\n    var isNumber = isSimpleType('number');\n\n    var noop = function () {\n    };\n    var compose = function (fa, fb) {\n      return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        return fa(fb.apply(null, args));\n      };\n    };\n    var compose1 = function (fbc, fab) {\n      return function (a) {\n        return fbc(fab(a));\n      };\n    };\n    var constant = function (value) {\n      return function () {\n        return value;\n      };\n    };\n    var identity = function (x) {\n      return x;\n    };\n    var tripleEquals = function (a, b) {\n      return a === b;\n    };\n    function curry(fn) {\n      var initialArgs = [];\n      for (var _i = 1; _i < arguments.length; _i++) {\n        initialArgs[_i - 1] = arguments[_i];\n      }\n      return function () {\n        var restArgs = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          restArgs[_i] = arguments[_i];\n        }\n        var all = initialArgs.concat(restArgs);\n        return fn.apply(null, all);\n      };\n    }\n    var not = function (f) {\n      return function (t) {\n        return !f(t);\n      };\n    };\n    var die = function (msg) {\n      return function () {\n        throw new Error(msg);\n      };\n    };\n    var apply = function (f) {\n      return f();\n    };\n    var call = function (f) {\n      f();\n    };\n    var never = constant(false);\n    var always = constant(true);\n\n    var none = function () {\n      return NONE;\n    };\n    var NONE = function () {\n      var call = function (thunk) {\n        return thunk();\n      };\n      var id = identity;\n      var me = {\n        fold: function (n, _s) {\n          return n();\n        },\n        isSome: never,\n        isNone: always,\n        getOr: id,\n        getOrThunk: call,\n        getOrDie: function (msg) {\n          throw new Error(msg || 'error: getOrDie called on none.');\n        },\n        getOrNull: constant(null),\n        getOrUndefined: constant(undefined),\n        or: id,\n        orThunk: call,\n        map: none,\n        each: noop,\n        bind: none,\n        exists: never,\n        forall: always,\n        filter: function () {\n          return none();\n        },\n        toArray: function () {\n          return [];\n        },\n        toString: constant('none()')\n      };\n      return me;\n    }();\n    var some = function (a) {\n      var constant_a = constant(a);\n      var self = function () {\n        return me;\n      };\n      var bind = function (f) {\n        return f(a);\n      };\n      var me = {\n        fold: function (n, s) {\n          return s(a);\n        },\n        isSome: always,\n        isNone: never,\n        getOr: constant_a,\n        getOrThunk: constant_a,\n        getOrDie: constant_a,\n        getOrNull: constant_a,\n        getOrUndefined: constant_a,\n        or: self,\n        orThunk: self,\n        map: function (f) {\n          return some(f(a));\n        },\n        each: function (f) {\n          f(a);\n        },\n        bind: bind,\n        exists: bind,\n        forall: bind,\n        filter: function (f) {\n          return f(a) ? me : NONE;\n        },\n        toArray: function () {\n          return [a];\n        },\n        toString: function () {\n          return 'some(' + a + ')';\n        }\n      };\n      return me;\n    };\n    var from$1 = function (value) {\n      return value === null || value === undefined ? NONE : some(value);\n    };\n    var Optional = {\n      some: some,\n      none: none,\n      from: from$1\n    };\n\n    var nativeSlice = Array.prototype.slice;\n    var nativeIndexOf = Array.prototype.indexOf;\n    var nativePush = Array.prototype.push;\n    var rawIndexOf = function (ts, t) {\n      return nativeIndexOf.call(ts, t);\n    };\n    var indexOf$2 = function (xs, x) {\n      var r = rawIndexOf(xs, x);\n      return r === -1 ? Optional.none() : Optional.some(r);\n    };\n    var contains$3 = function (xs, x) {\n      return rawIndexOf(xs, x) > -1;\n    };\n    var exists = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          return true;\n        }\n      }\n      return false;\n    };\n    var map$3 = function (xs, f) {\n      var len = xs.length;\n      var r = new Array(len);\n      for (var i = 0; i < len; i++) {\n        var x = xs[i];\n        r[i] = f(x, i);\n      }\n      return r;\n    };\n    var each$k = function (xs, f) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        f(x, i);\n      }\n    };\n    var eachr = function (xs, f) {\n      for (var i = xs.length - 1; i >= 0; i--) {\n        var x = xs[i];\n        f(x, i);\n      }\n    };\n    var partition = function (xs, pred) {\n      var pass = [];\n      var fail = [];\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        var arr = pred(x, i) ? pass : fail;\n        arr.push(x);\n      }\n      return {\n        pass: pass,\n        fail: fail\n      };\n    };\n    var filter$4 = function (xs, pred) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          r.push(x);\n        }\n      }\n      return r;\n    };\n    var foldr = function (xs, f, acc) {\n      eachr(xs, function (x, i) {\n        acc = f(acc, x, i);\n      });\n      return acc;\n    };\n    var foldl = function (xs, f, acc) {\n      each$k(xs, function (x, i) {\n        acc = f(acc, x, i);\n      });\n      return acc;\n    };\n    var findUntil$1 = function (xs, pred, until) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          return Optional.some(x);\n        } else if (until(x, i)) {\n          break;\n        }\n      }\n      return Optional.none();\n    };\n    var find$3 = function (xs, pred) {\n      return findUntil$1(xs, pred, never);\n    };\n    var findIndex$2 = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          return Optional.some(i);\n        }\n      }\n      return Optional.none();\n    };\n    var flatten = function (xs) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; ++i) {\n        if (!isArray$1(xs[i])) {\n          throw new Error('Arr.flatten item ' + i + ' was not an array, input: ' + xs);\n        }\n        nativePush.apply(r, xs[i]);\n      }\n      return r;\n    };\n    var bind = function (xs, f) {\n      return flatten(map$3(xs, f));\n    };\n    var forall = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; ++i) {\n        var x = xs[i];\n        if (pred(x, i) !== true) {\n          return false;\n        }\n      }\n      return true;\n    };\n    var reverse = function (xs) {\n      var r = nativeSlice.call(xs, 0);\n      r.reverse();\n      return r;\n    };\n    var difference = function (a1, a2) {\n      return filter$4(a1, function (x) {\n        return !contains$3(a2, x);\n      });\n    };\n    var mapToObject = function (xs, f) {\n      var r = {};\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        r[String(x)] = f(x, i);\n      }\n      return r;\n    };\n    var sort = function (xs, comparator) {\n      var copy = nativeSlice.call(xs, 0);\n      copy.sort(comparator);\n      return copy;\n    };\n    var get$a = function (xs, i) {\n      return i >= 0 && i < xs.length ? Optional.some(xs[i]) : Optional.none();\n    };\n    var head = function (xs) {\n      return get$a(xs, 0);\n    };\n    var last$2 = function (xs) {\n      return get$a(xs, xs.length - 1);\n    };\n    var from = isFunction(Array.from) ? Array.from : function (x) {\n      return nativeSlice.call(x);\n    };\n    var findMap = function (arr, f) {\n      for (var i = 0; i < arr.length; i++) {\n        var r = f(arr[i], i);\n        if (r.isSome()) {\n          return r;\n        }\n      }\n      return Optional.none();\n    };\n\n    var keys = Object.keys;\n    var hasOwnProperty$1 = Object.hasOwnProperty;\n    var each$j = function (obj, f) {\n      var props = keys(obj);\n      for (var k = 0, len = props.length; k < len; k++) {\n        var i = props[k];\n        var x = obj[i];\n        f(x, i);\n      }\n    };\n    var map$2 = function (obj, f) {\n      return tupleMap(obj, function (x, i) {\n        return {\n          k: i,\n          v: f(x, i)\n        };\n      });\n    };\n    var tupleMap = function (obj, f) {\n      var r = {};\n      each$j(obj, function (x, i) {\n        var tuple = f(x, i);\n        r[tuple.k] = tuple.v;\n      });\n      return r;\n    };\n    var objAcc = function (r) {\n      return function (x, i) {\n        r[i] = x;\n      };\n    };\n    var internalFilter = function (obj, pred, onTrue, onFalse) {\n      var r = {};\n      each$j(obj, function (x, i) {\n        (pred(x, i) ? onTrue : onFalse)(x, i);\n      });\n      return r;\n    };\n    var bifilter = function (obj, pred) {\n      var t = {};\n      var f = {};\n      internalFilter(obj, pred, objAcc(t), objAcc(f));\n      return {\n        t: t,\n        f: f\n      };\n    };\n    var filter$3 = function (obj, pred) {\n      var t = {};\n      internalFilter(obj, pred, objAcc(t), noop);\n      return t;\n    };\n    var mapToArray = function (obj, f) {\n      var r = [];\n      each$j(obj, function (value, name) {\n        r.push(f(value, name));\n      });\n      return r;\n    };\n    var values = function (obj) {\n      return mapToArray(obj, identity);\n    };\n    var get$9 = function (obj, key) {\n      return has$2(obj, key) ? Optional.from(obj[key]) : Optional.none();\n    };\n    var has$2 = function (obj, key) {\n      return hasOwnProperty$1.call(obj, key);\n    };\n    var hasNonNullableKey = function (obj, key) {\n      return has$2(obj, key) && obj[key] !== undefined && obj[key] !== null;\n    };\n    var equal$1 = function (a1, a2, eq) {\n      if (eq === void 0) {\n        eq = eqAny;\n      }\n      return eqRecord(eq).eq(a1, a2);\n    };\n\n    var isArray = Array.isArray;\n    var toArray$1 = function (obj) {\n      if (!isArray(obj)) {\n        var array = [];\n        for (var i = 0, l = obj.length; i < l; i++) {\n          array[i] = obj[i];\n        }\n        return array;\n      } else {\n        return obj;\n      }\n    };\n    var each$i = function (o, cb, s) {\n      var n, l;\n      if (!o) {\n        return false;\n      }\n      s = s || o;\n      if (o.length !== undefined) {\n        for (n = 0, l = o.length; n < l; n++) {\n          if (cb.call(s, o[n], n, o) === false) {\n            return false;\n          }\n        }\n      } else {\n        for (n in o) {\n          if (has$2(o, n)) {\n            if (cb.call(s, o[n], n, o) === false) {\n              return false;\n            }\n          }\n        }\n      }\n      return true;\n    };\n    var map$1 = function (array, callback) {\n      var out = [];\n      each$i(array, function (item, index) {\n        out.push(callback(item, index, array));\n      });\n      return out;\n    };\n    var filter$2 = function (a, f) {\n      var o = [];\n      each$i(a, function (v, index) {\n        if (!f || f(v, index, a)) {\n          o.push(v);\n        }\n      });\n      return o;\n    };\n    var indexOf$1 = function (a, v) {\n      if (a) {\n        for (var i = 0, l = a.length; i < l; i++) {\n          if (a[i] === v) {\n            return i;\n          }\n        }\n      }\n      return -1;\n    };\n    var reduce = function (collection, iteratee, accumulator, thisArg) {\n      var acc = isUndefined(accumulator) ? collection[0] : accumulator;\n      for (var i = 0; i < collection.length; i++) {\n        acc = iteratee.call(thisArg, acc, collection[i], i);\n      }\n      return acc;\n    };\n    var findIndex$1 = function (array, predicate, thisArg) {\n      var i, l;\n      for (i = 0, l = array.length; i < l; i++) {\n        if (predicate.call(thisArg, array[i], i, array)) {\n          return i;\n        }\n      }\n      return -1;\n    };\n    var last$1 = function (collection) {\n      return collection[collection.length - 1];\n    };\n\n    var __assign = function () {\n      __assign = Object.assign || function __assign(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n          s = arguments[i];\n          for (var p in s)\n            if (Object.prototype.hasOwnProperty.call(s, p))\n              t[p] = s[p];\n        }\n        return t;\n      };\n      return __assign.apply(this, arguments);\n    };\n    function __rest(s, e) {\n      var t = {};\n      for (var p in s)\n        if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n          t[p] = s[p];\n      if (s != null && typeof Object.getOwnPropertySymbols === 'function')\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n          if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n            t[p[i]] = s[p[i]];\n        }\n      return t;\n    }\n    function __spreadArray(to, from, pack) {\n      if (pack || arguments.length === 2)\n        for (var i = 0, l = from.length, ar; i < l; i++) {\n          if (ar || !(i in from)) {\n            if (!ar)\n              ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n          }\n        }\n      return to.concat(ar || Array.prototype.slice.call(from));\n    }\n\n    var cached = function (f) {\n      var called = false;\n      var r;\n      return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        if (!called) {\n          called = true;\n          r = f.apply(null, args);\n        }\n        return r;\n      };\n    };\n\n    var DeviceType = function (os, browser, userAgent, mediaMatch) {\n      var isiPad = os.isiOS() && /ipad/i.test(userAgent) === true;\n      var isiPhone = os.isiOS() && !isiPad;\n      var isMobile = os.isiOS() || os.isAndroid();\n      var isTouch = isMobile || mediaMatch('(pointer:coarse)');\n      var isTablet = isiPad || !isiPhone && isMobile && mediaMatch('(min-device-width:768px)');\n      var isPhone = isiPhone || isMobile && !isTablet;\n      var iOSwebview = browser.isSafari() && os.isiOS() && /safari/i.test(userAgent) === false;\n      var isDesktop = !isPhone && !isTablet && !iOSwebview;\n      return {\n        isiPad: constant(isiPad),\n        isiPhone: constant(isiPhone),\n        isTablet: constant(isTablet),\n        isPhone: constant(isPhone),\n        isTouch: constant(isTouch),\n        isAndroid: os.isAndroid,\n        isiOS: os.isiOS,\n        isWebView: constant(iOSwebview),\n        isDesktop: constant(isDesktop)\n      };\n    };\n\n    var firstMatch = function (regexes, s) {\n      for (var i = 0; i < regexes.length; i++) {\n        var x = regexes[i];\n        if (x.test(s)) {\n          return x;\n        }\n      }\n      return undefined;\n    };\n    var find$2 = function (regexes, agent) {\n      var r = firstMatch(regexes, agent);\n      if (!r) {\n        return {\n          major: 0,\n          minor: 0\n        };\n      }\n      var group = function (i) {\n        return Number(agent.replace(r, '$' + i));\n      };\n      return nu$4(group(1), group(2));\n    };\n    var detect$3 = function (versionRegexes, agent) {\n      var cleanedAgent = String(agent).toLowerCase();\n      if (versionRegexes.length === 0) {\n        return unknown$2();\n      }\n      return find$2(versionRegexes, cleanedAgent);\n    };\n    var unknown$2 = function () {\n      return nu$4(0, 0);\n    };\n    var nu$4 = function (major, minor) {\n      return {\n        major: major,\n        minor: minor\n      };\n    };\n    var Version = {\n      nu: nu$4,\n      detect: detect$3,\n      unknown: unknown$2\n    };\n\n    var detectBrowser$1 = function (browsers, userAgentData) {\n      return findMap(userAgentData.brands, function (uaBrand) {\n        var lcBrand = uaBrand.brand.toLowerCase();\n        return find$3(browsers, function (browser) {\n          var _a;\n          return lcBrand === ((_a = browser.brand) === null || _a === void 0 ? void 0 : _a.toLowerCase());\n        }).map(function (info) {\n          return {\n            current: info.name,\n            version: Version.nu(parseInt(uaBrand.version, 10), 0)\n          };\n        });\n      });\n    };\n\n    var detect$2 = function (candidates, userAgent) {\n      var agent = String(userAgent).toLowerCase();\n      return find$3(candidates, function (candidate) {\n        return candidate.search(agent);\n      });\n    };\n    var detectBrowser = function (browsers, userAgent) {\n      return detect$2(browsers, userAgent).map(function (browser) {\n        var version = Version.detect(browser.versionRegexes, userAgent);\n        return {\n          current: browser.name,\n          version: version\n        };\n      });\n    };\n    var detectOs = function (oses, userAgent) {\n      return detect$2(oses, userAgent).map(function (os) {\n        var version = Version.detect(os.versionRegexes, userAgent);\n        return {\n          current: os.name,\n          version: version\n        };\n      });\n    };\n\n    var removeFromStart = function (str, numChars) {\n      return str.substring(numChars);\n    };\n\n    var checkRange = function (str, substr, start) {\n      return substr === '' || str.length >= substr.length && str.substr(start, start + substr.length) === substr;\n    };\n    var removeLeading = function (str, prefix) {\n      return startsWith(str, prefix) ? removeFromStart(str, prefix.length) : str;\n    };\n    var contains$2 = function (str, substr) {\n      return str.indexOf(substr) !== -1;\n    };\n    var startsWith = function (str, prefix) {\n      return checkRange(str, prefix, 0);\n    };\n    var blank = function (r) {\n      return function (s) {\n        return s.replace(r, '');\n      };\n    };\n    var trim$4 = blank(/^\\s+|\\s+$/g);\n    var lTrim = blank(/^\\s+/g);\n    var rTrim = blank(/\\s+$/g);\n    var isNotEmpty = function (s) {\n      return s.length > 0;\n    };\n    var isEmpty$3 = function (s) {\n      return !isNotEmpty(s);\n    };\n\n    var normalVersionRegex = /.*?version\\/\\ ?([0-9]+)\\.([0-9]+).*/;\n    var checkContains = function (target) {\n      return function (uastring) {\n        return contains$2(uastring, target);\n      };\n    };\n    var browsers = [\n      {\n        name: 'Edge',\n        versionRegexes: [/.*?edge\\/ ?([0-9]+)\\.([0-9]+)$/],\n        search: function (uastring) {\n          return contains$2(uastring, 'edge/') && contains$2(uastring, 'chrome') && contains$2(uastring, 'safari') && contains$2(uastring, 'applewebkit');\n        }\n      },\n      {\n        name: 'Chrome',\n        brand: 'Chromium',\n        versionRegexes: [\n          /.*?chrome\\/([0-9]+)\\.([0-9]+).*/,\n          normalVersionRegex\n        ],\n        search: function (uastring) {\n          return contains$2(uastring, 'chrome') && !contains$2(uastring, 'chromeframe');\n        }\n      },\n      {\n        name: 'IE',\n        versionRegexes: [\n          /.*?msie\\ ?([0-9]+)\\.([0-9]+).*/,\n          /.*?rv:([0-9]+)\\.([0-9]+).*/\n        ],\n        search: function (uastring) {\n          return contains$2(uastring, 'msie') || contains$2(uastring, 'trident');\n        }\n      },\n      {\n        name: 'Opera',\n        versionRegexes: [\n          normalVersionRegex,\n          /.*?opera\\/([0-9]+)\\.([0-9]+).*/\n        ],\n        search: checkContains('opera')\n      },\n      {\n        name: 'Firefox',\n        versionRegexes: [/.*?firefox\\/\\ ?([0-9]+)\\.([0-9]+).*/],\n        search: checkContains('firefox')\n      },\n      {\n        name: 'Safari',\n        versionRegexes: [\n          normalVersionRegex,\n          /.*?cpu os ([0-9]+)_([0-9]+).*/\n        ],\n        search: function (uastring) {\n          return (contains$2(uastring, 'safari') || contains$2(uastring, 'mobile/')) && contains$2(uastring, 'applewebkit');\n        }\n      }\n    ];\n    var oses = [\n      {\n        name: 'Windows',\n        search: checkContains('win'),\n        versionRegexes: [/.*?windows\\ nt\\ ?([0-9]+)\\.([0-9]+).*/]\n      },\n      {\n        name: 'iOS',\n        search: function (uastring) {\n          return contains$2(uastring, 'iphone') || contains$2(uastring, 'ipad');\n        },\n        versionRegexes: [\n          /.*?version\\/\\ ?([0-9]+)\\.([0-9]+).*/,\n          /.*cpu os ([0-9]+)_([0-9]+).*/,\n          /.*cpu iphone os ([0-9]+)_([0-9]+).*/\n        ]\n      },\n      {\n        name: 'Android',\n        search: checkContains('android'),\n        versionRegexes: [/.*?android\\ ?([0-9]+)\\.([0-9]+).*/]\n      },\n      {\n        name: 'OSX',\n        search: checkContains('mac os x'),\n        versionRegexes: [/.*?mac\\ os\\ x\\ ?([0-9]+)_([0-9]+).*/]\n      },\n      {\n        name: 'Linux',\n        search: checkContains('linux'),\n        versionRegexes: []\n      },\n      {\n        name: 'Solaris',\n        search: checkContains('sunos'),\n        versionRegexes: []\n      },\n      {\n        name: 'FreeBSD',\n        search: checkContains('freebsd'),\n        versionRegexes: []\n      },\n      {\n        name: 'ChromeOS',\n        search: checkContains('cros'),\n        versionRegexes: [/.*?chrome\\/([0-9]+)\\.([0-9]+).*/]\n      }\n    ];\n    var PlatformInfo = {\n      browsers: constant(browsers),\n      oses: constant(oses)\n    };\n\n    var edge = 'Edge';\n    var chrome = 'Chrome';\n    var ie$1 = 'IE';\n    var opera = 'Opera';\n    var firefox = 'Firefox';\n    var safari = 'Safari';\n    var unknown$1 = function () {\n      return nu$3({\n        current: undefined,\n        version: Version.unknown()\n      });\n    };\n    var nu$3 = function (info) {\n      var current = info.current;\n      var version = info.version;\n      var isBrowser = function (name) {\n        return function () {\n          return current === name;\n        };\n      };\n      return {\n        current: current,\n        version: version,\n        isEdge: isBrowser(edge),\n        isChrome: isBrowser(chrome),\n        isIE: isBrowser(ie$1),\n        isOpera: isBrowser(opera),\n        isFirefox: isBrowser(firefox),\n        isSafari: isBrowser(safari)\n      };\n    };\n    var Browser = {\n      unknown: unknown$1,\n      nu: nu$3,\n      edge: constant(edge),\n      chrome: constant(chrome),\n      ie: constant(ie$1),\n      opera: constant(opera),\n      firefox: constant(firefox),\n      safari: constant(safari)\n    };\n\n    var windows = 'Windows';\n    var ios = 'iOS';\n    var android = 'Android';\n    var linux = 'Linux';\n    var osx = 'OSX';\n    var solaris = 'Solaris';\n    var freebsd = 'FreeBSD';\n    var chromeos = 'ChromeOS';\n    var unknown = function () {\n      return nu$2({\n        current: undefined,\n        version: Version.unknown()\n      });\n    };\n    var nu$2 = function (info) {\n      var current = info.current;\n      var version = info.version;\n      var isOS = function (name) {\n        return function () {\n          return current === name;\n        };\n      };\n      return {\n        current: current,\n        version: version,\n        isWindows: isOS(windows),\n        isiOS: isOS(ios),\n        isAndroid: isOS(android),\n        isOSX: isOS(osx),\n        isLinux: isOS(linux),\n        isSolaris: isOS(solaris),\n        isFreeBSD: isOS(freebsd),\n        isChromeOS: isOS(chromeos)\n      };\n    };\n    var OperatingSystem = {\n      unknown: unknown,\n      nu: nu$2,\n      windows: constant(windows),\n      ios: constant(ios),\n      android: constant(android),\n      linux: constant(linux),\n      osx: constant(osx),\n      solaris: constant(solaris),\n      freebsd: constant(freebsd),\n      chromeos: constant(chromeos)\n    };\n\n    var detect$1 = function (userAgent, userAgentDataOpt, mediaMatch) {\n      var browsers = PlatformInfo.browsers();\n      var oses = PlatformInfo.oses();\n      var browser = userAgentDataOpt.bind(function (userAgentData) {\n        return detectBrowser$1(browsers, userAgentData);\n      }).orThunk(function () {\n        return detectBrowser(browsers, userAgent);\n      }).fold(Browser.unknown, Browser.nu);\n      var os = detectOs(oses, userAgent).fold(OperatingSystem.unknown, OperatingSystem.nu);\n      var deviceType = DeviceType(os, browser, userAgent, mediaMatch);\n      return {\n        browser: browser,\n        os: os,\n        deviceType: deviceType\n      };\n    };\n    var PlatformDetection = { detect: detect$1 };\n\n    var mediaMatch = function (query) {\n      return window.matchMedia(query).matches;\n    };\n    var platform$2 = cached(function () {\n      return PlatformDetection.detect(navigator.userAgent, Optional.from(navigator.userAgentData), mediaMatch);\n    });\n    var detect = function () {\n      return platform$2();\n    };\n\n    var userAgent = navigator.userAgent;\n    var platform$1 = detect();\n    var browser$4 = platform$1.browser;\n    var os = platform$1.os;\n    var deviceType = platform$1.deviceType;\n    var webkit = /WebKit/.test(userAgent) && !browser$4.isEdge();\n    var fileApi = 'FormData' in window && 'FileReader' in window && 'URL' in window && !!URL.createObjectURL;\n    var windowsPhone = userAgent.indexOf('Windows Phone') !== -1;\n    var Env = {\n      opera: browser$4.isOpera(),\n      webkit: webkit,\n      ie: browser$4.isIE() || browser$4.isEdge() ? browser$4.version.major : false,\n      gecko: browser$4.isFirefox(),\n      mac: os.isOSX() || os.isiOS(),\n      iOS: deviceType.isiPad() || deviceType.isiPhone(),\n      android: os.isAndroid(),\n      contentEditable: true,\n      transparentSrc: 'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7',\n      caretAfter: true,\n      range: window.getSelection && 'Range' in window,\n      documentMode: browser$4.isIE() ? document.documentMode || 7 : 10,\n      fileApi: fileApi,\n      ceFalse: true,\n      cacheSuffix: null,\n      container: null,\n      experimentalShadowDom: false,\n      canHaveCSP: !browser$4.isIE(),\n      desktop: deviceType.isDesktop(),\n      windowsPhone: windowsPhone,\n      browser: {\n        current: browser$4.current,\n        version: browser$4.version,\n        isChrome: browser$4.isChrome,\n        isEdge: browser$4.isEdge,\n        isFirefox: browser$4.isFirefox,\n        isIE: browser$4.isIE,\n        isOpera: browser$4.isOpera,\n        isSafari: browser$4.isSafari\n      },\n      os: {\n        current: os.current,\n        version: os.version,\n        isAndroid: os.isAndroid,\n        isChromeOS: os.isChromeOS,\n        isFreeBSD: os.isFreeBSD,\n        isiOS: os.isiOS,\n        isLinux: os.isLinux,\n        isOSX: os.isOSX,\n        isSolaris: os.isSolaris,\n        isWindows: os.isWindows\n      },\n      deviceType: {\n        isDesktop: deviceType.isDesktop,\n        isiPad: deviceType.isiPad,\n        isiPhone: deviceType.isiPhone,\n        isPhone: deviceType.isPhone,\n        isTablet: deviceType.isTablet,\n        isTouch: deviceType.isTouch,\n        isWebView: deviceType.isWebView\n      }\n    };\n\n    var whiteSpaceRegExp$2 = /^\\s*|\\s*$/g;\n    var trim$3 = function (str) {\n      return str === null || str === undefined ? '' : ('' + str).replace(whiteSpaceRegExp$2, '');\n    };\n    var is$3 = function (obj, type) {\n      if (!type) {\n        return obj !== undefined;\n      }\n      if (type === 'array' && isArray(obj)) {\n        return true;\n      }\n      return typeof obj === type;\n    };\n    var makeMap$4 = function (items, delim, map) {\n      var i;\n      items = items || [];\n      delim = delim || ',';\n      if (typeof items === 'string') {\n        items = items.split(delim);\n      }\n      map = map || {};\n      i = items.length;\n      while (i--) {\n        map[items[i]] = {};\n      }\n      return map;\n    };\n    var hasOwnProperty = has$2;\n    var create$9 = function (s, p, root) {\n      var self = this;\n      var sp, scn, c, de = 0;\n      s = /^((static) )?([\\w.]+)(:([\\w.]+))?/.exec(s);\n      var cn = s[3].match(/(^|\\.)(\\w+)$/i)[2];\n      var ns = self.createNS(s[3].replace(/\\.\\w+$/, ''), root);\n      if (ns[cn]) {\n        return;\n      }\n      if (s[2] === 'static') {\n        ns[cn] = p;\n        if (this.onCreate) {\n          this.onCreate(s[2], s[3], ns[cn]);\n        }\n        return;\n      }\n      if (!p[cn]) {\n        p[cn] = function () {\n        };\n        de = 1;\n      }\n      ns[cn] = p[cn];\n      self.extend(ns[cn].prototype, p);\n      if (s[5]) {\n        sp = self.resolve(s[5]).prototype;\n        scn = s[5].match(/\\.(\\w+)$/i)[1];\n        c = ns[cn];\n        if (de) {\n          ns[cn] = function () {\n            return sp[scn].apply(this, arguments);\n          };\n        } else {\n          ns[cn] = function () {\n            this.parent = sp[scn];\n            return c.apply(this, arguments);\n          };\n        }\n        ns[cn].prototype[cn] = ns[cn];\n        self.each(sp, function (f, n) {\n          ns[cn].prototype[n] = sp[n];\n        });\n        self.each(p, function (f, n) {\n          if (sp[n]) {\n            ns[cn].prototype[n] = function () {\n              this.parent = sp[n];\n              return f.apply(this, arguments);\n            };\n          } else {\n            if (n !== cn) {\n              ns[cn].prototype[n] = f;\n            }\n          }\n        });\n      }\n      self.each(p.static, function (f, n) {\n        ns[cn][n] = f;\n      });\n    };\n    var extend$6 = function (obj) {\n      var exts = [];\n      for (var _i = 1; _i < arguments.length; _i++) {\n        exts[_i - 1] = arguments[_i];\n      }\n      for (var i = 0; i < exts.length; i++) {\n        var ext = exts[i];\n        for (var name_1 in ext) {\n          if (has$2(ext, name_1)) {\n            var value = ext[name_1];\n            if (value !== undefined) {\n              obj[name_1] = value;\n            }\n          }\n        }\n      }\n      return obj;\n    };\n    var walk$3 = function (o, f, n, s) {\n      s = s || this;\n      if (o) {\n        if (n) {\n          o = o[n];\n        }\n        each$i(o, function (o, i) {\n          if (f.call(s, o, i, n) === false) {\n            return false;\n          }\n          walk$3(o, f, n, s);\n        });\n      }\n    };\n    var createNS = function (n, o) {\n      var i, v;\n      o = o || window;\n      n = n.split('.');\n      for (i = 0; i < n.length; i++) {\n        v = n[i];\n        if (!o[v]) {\n          o[v] = {};\n        }\n        o = o[v];\n      }\n      return o;\n    };\n    var resolve$3 = function (n, o) {\n      var i, l;\n      o = o || window;\n      n = n.split('.');\n      for (i = 0, l = n.length; i < l; i++) {\n        o = o[n[i]];\n        if (!o) {\n          break;\n        }\n      }\n      return o;\n    };\n    var explode$4 = function (s, d) {\n      if (!s || is$3(s, 'array')) {\n        return s;\n      }\n      return map$1(s.split(d || ','), trim$3);\n    };\n    var _addCacheSuffix = function (url) {\n      var cacheSuffix = Env.cacheSuffix;\n      if (cacheSuffix) {\n        url += (url.indexOf('?') === -1 ? '?' : '&') + cacheSuffix;\n      }\n      return url;\n    };\n    var Tools = {\n      trim: trim$3,\n      isArray: isArray,\n      is: is$3,\n      toArray: toArray$1,\n      makeMap: makeMap$4,\n      each: each$i,\n      map: map$1,\n      grep: filter$2,\n      inArray: indexOf$1,\n      hasOwn: hasOwnProperty,\n      extend: extend$6,\n      create: create$9,\n      walk: walk$3,\n      createNS: createNS,\n      resolve: resolve$3,\n      explode: explode$4,\n      _addCacheSuffix: _addCacheSuffix\n    };\n\n    var fromHtml$1 = function (html, scope) {\n      var doc = scope || document;\n      var div = doc.createElement('div');\n      div.innerHTML = html;\n      if (!div.hasChildNodes() || div.childNodes.length > 1) {\n        console.error('HTML does not have a single root node', html);\n        throw new Error('HTML must have a single root node');\n      }\n      return fromDom$2(div.childNodes[0]);\n    };\n    var fromTag = function (tag, scope) {\n      var doc = scope || document;\n      var node = doc.createElement(tag);\n      return fromDom$2(node);\n    };\n    var fromText = function (text, scope) {\n      var doc = scope || document;\n      var node = doc.createTextNode(text);\n      return fromDom$2(node);\n    };\n    var fromDom$2 = function (node) {\n      if (node === null || node === undefined) {\n        throw new Error('Node cannot be null or undefined');\n      }\n      return { dom: node };\n    };\n    var fromPoint$1 = function (docElm, x, y) {\n      return Optional.from(docElm.dom.elementFromPoint(x, y)).map(fromDom$2);\n    };\n    var SugarElement = {\n      fromHtml: fromHtml$1,\n      fromTag: fromTag,\n      fromText: fromText,\n      fromDom: fromDom$2,\n      fromPoint: fromPoint$1\n    };\n\n    var toArray = function (target, f) {\n      var r = [];\n      var recurse = function (e) {\n        r.push(e);\n        return f(e);\n      };\n      var cur = f(target);\n      do {\n        cur = cur.bind(recurse);\n      } while (cur.isSome());\n      return r;\n    };\n\n    var compareDocumentPosition = function (a, b, match) {\n      return (a.compareDocumentPosition(b) & match) !== 0;\n    };\n    var documentPositionContainedBy = function (a, b) {\n      return compareDocumentPosition(a, b, Node.DOCUMENT_POSITION_CONTAINED_BY);\n    };\n\n    var COMMENT = 8;\n    var DOCUMENT = 9;\n    var DOCUMENT_FRAGMENT = 11;\n    var ELEMENT = 1;\n    var TEXT = 3;\n\n    var is$2 = function (element, selector) {\n      var dom = element.dom;\n      if (dom.nodeType !== ELEMENT) {\n        return false;\n      } else {\n        var elem = dom;\n        if (elem.matches !== undefined) {\n          return elem.matches(selector);\n        } else if (elem.msMatchesSelector !== undefined) {\n          return elem.msMatchesSelector(selector);\n        } else if (elem.webkitMatchesSelector !== undefined) {\n          return elem.webkitMatchesSelector(selector);\n        } else if (elem.mozMatchesSelector !== undefined) {\n          return elem.mozMatchesSelector(selector);\n        } else {\n          throw new Error('Browser lacks native selectors');\n        }\n      }\n    };\n    var bypassSelector = function (dom) {\n      return dom.nodeType !== ELEMENT && dom.nodeType !== DOCUMENT && dom.nodeType !== DOCUMENT_FRAGMENT || dom.childElementCount === 0;\n    };\n    var all = function (selector, scope) {\n      var base = scope === undefined ? document : scope.dom;\n      return bypassSelector(base) ? [] : map$3(base.querySelectorAll(selector), SugarElement.fromDom);\n    };\n    var one = function (selector, scope) {\n      var base = scope === undefined ? document : scope.dom;\n      return bypassSelector(base) ? Optional.none() : Optional.from(base.querySelector(selector)).map(SugarElement.fromDom);\n    };\n\n    var eq = function (e1, e2) {\n      return e1.dom === e2.dom;\n    };\n    var regularContains = function (e1, e2) {\n      var d1 = e1.dom;\n      var d2 = e2.dom;\n      return d1 === d2 ? false : d1.contains(d2);\n    };\n    var ieContains = function (e1, e2) {\n      return documentPositionContainedBy(e1.dom, e2.dom);\n    };\n    var contains$1 = function (e1, e2) {\n      return detect().browser.isIE() ? ieContains(e1, e2) : regularContains(e1, e2);\n    };\n\n    typeof window !== 'undefined' ? window : Function('return this;')();\n\n    var name = function (element) {\n      var r = element.dom.nodeName;\n      return r.toLowerCase();\n    };\n    var type = function (element) {\n      return element.dom.nodeType;\n    };\n    var isType = function (t) {\n      return function (element) {\n        return type(element) === t;\n      };\n    };\n    var isComment$1 = function (element) {\n      return type(element) === COMMENT || name(element) === '#comment';\n    };\n    var isElement$6 = isType(ELEMENT);\n    var isText$8 = isType(TEXT);\n    var isDocument$2 = isType(DOCUMENT);\n    var isDocumentFragment$1 = isType(DOCUMENT_FRAGMENT);\n    var isTag = function (tag) {\n      return function (e) {\n        return isElement$6(e) && name(e) === tag;\n      };\n    };\n\n    var owner$1 = function (element) {\n      return SugarElement.fromDom(element.dom.ownerDocument);\n    };\n    var documentOrOwner = function (dos) {\n      return isDocument$2(dos) ? dos : owner$1(dos);\n    };\n    var documentElement = function (element) {\n      return SugarElement.fromDom(documentOrOwner(element).dom.documentElement);\n    };\n    var defaultView = function (element) {\n      return SugarElement.fromDom(documentOrOwner(element).dom.defaultView);\n    };\n    var parent = function (element) {\n      return Optional.from(element.dom.parentNode).map(SugarElement.fromDom);\n    };\n    var parents$1 = function (element, isRoot) {\n      var stop = isFunction(isRoot) ? isRoot : never;\n      var dom = element.dom;\n      var ret = [];\n      while (dom.parentNode !== null && dom.parentNode !== undefined) {\n        var rawParent = dom.parentNode;\n        var p = SugarElement.fromDom(rawParent);\n        ret.push(p);\n        if (stop(p) === true) {\n          break;\n        } else {\n          dom = rawParent;\n        }\n      }\n      return ret;\n    };\n    var siblings = function (element) {\n      var filterSelf = function (elements) {\n        return filter$4(elements, function (x) {\n          return !eq(element, x);\n        });\n      };\n      return parent(element).map(children).map(filterSelf).getOr([]);\n    };\n    var prevSibling = function (element) {\n      return Optional.from(element.dom.previousSibling).map(SugarElement.fromDom);\n    };\n    var nextSibling = function (element) {\n      return Optional.from(element.dom.nextSibling).map(SugarElement.fromDom);\n    };\n    var prevSiblings = function (element) {\n      return reverse(toArray(element, prevSibling));\n    };\n    var nextSiblings = function (element) {\n      return toArray(element, nextSibling);\n    };\n    var children = function (element) {\n      return map$3(element.dom.childNodes, SugarElement.fromDom);\n    };\n    var child$1 = function (element, index) {\n      var cs = element.dom.childNodes;\n      return Optional.from(cs[index]).map(SugarElement.fromDom);\n    };\n    var firstChild = function (element) {\n      return child$1(element, 0);\n    };\n    var lastChild = function (element) {\n      return child$1(element, element.dom.childNodes.length - 1);\n    };\n    var childNodesCount = function (element) {\n      return element.dom.childNodes.length;\n    };\n\n    var getHead = function (doc) {\n      var b = doc.dom.head;\n      if (b === null || b === undefined) {\n        throw new Error('Head is not available yet');\n      }\n      return SugarElement.fromDom(b);\n    };\n\n    var isShadowRoot = function (dos) {\n      return isDocumentFragment$1(dos) && isNonNullable(dos.dom.host);\n    };\n    var supported = isFunction(Element.prototype.attachShadow) && isFunction(Node.prototype.getRootNode);\n    var isSupported$1 = constant(supported);\n    var getRootNode = supported ? function (e) {\n      return SugarElement.fromDom(e.dom.getRootNode());\n    } : documentOrOwner;\n    var getStyleContainer = function (dos) {\n      return isShadowRoot(dos) ? dos : getHead(documentOrOwner(dos));\n    };\n    var getShadowRoot = function (e) {\n      var r = getRootNode(e);\n      return isShadowRoot(r) ? Optional.some(r) : Optional.none();\n    };\n    var getShadowHost = function (e) {\n      return SugarElement.fromDom(e.dom.host);\n    };\n    var getOriginalEventTarget = function (event) {\n      if (isSupported$1() && isNonNullable(event.target)) {\n        var el = SugarElement.fromDom(event.target);\n        if (isElement$6(el) && isOpenShadowHost(el)) {\n          if (event.composed && event.composedPath) {\n            var composedPath = event.composedPath();\n            if (composedPath) {\n              return head(composedPath);\n            }\n          }\n        }\n      }\n      return Optional.from(event.target);\n    };\n    var isOpenShadowHost = function (element) {\n      return isNonNullable(element.dom.shadowRoot);\n    };\n\n    var before$4 = function (marker, element) {\n      var parent$1 = parent(marker);\n      parent$1.each(function (v) {\n        v.dom.insertBefore(element.dom, marker.dom);\n      });\n    };\n    var after$3 = function (marker, element) {\n      var sibling = nextSibling(marker);\n      sibling.fold(function () {\n        var parent$1 = parent(marker);\n        parent$1.each(function (v) {\n          append$1(v, element);\n        });\n      }, function (v) {\n        before$4(v, element);\n      });\n    };\n    var prepend = function (parent, element) {\n      var firstChild$1 = firstChild(parent);\n      firstChild$1.fold(function () {\n        append$1(parent, element);\n      }, function (v) {\n        parent.dom.insertBefore(element.dom, v.dom);\n      });\n    };\n    var append$1 = function (parent, element) {\n      parent.dom.appendChild(element.dom);\n    };\n    var wrap$3 = function (element, wrapper) {\n      before$4(element, wrapper);\n      append$1(wrapper, element);\n    };\n\n    var before$3 = function (marker, elements) {\n      each$k(elements, function (x) {\n        before$4(marker, x);\n      });\n    };\n    var append = function (parent, elements) {\n      each$k(elements, function (x) {\n        append$1(parent, x);\n      });\n    };\n\n    var empty = function (element) {\n      element.dom.textContent = '';\n      each$k(children(element), function (rogue) {\n        remove$7(rogue);\n      });\n    };\n    var remove$7 = function (element) {\n      var dom = element.dom;\n      if (dom.parentNode !== null) {\n        dom.parentNode.removeChild(dom);\n      }\n    };\n    var unwrap = function (wrapper) {\n      var children$1 = children(wrapper);\n      if (children$1.length > 0) {\n        before$3(wrapper, children$1);\n      }\n      remove$7(wrapper);\n    };\n\n    var inBody = function (element) {\n      var dom = isText$8(element) ? element.dom.parentNode : element.dom;\n      if (dom === undefined || dom === null || dom.ownerDocument === null) {\n        return false;\n      }\n      var doc = dom.ownerDocument;\n      return getShadowRoot(SugarElement.fromDom(dom)).fold(function () {\n        return doc.body.contains(dom);\n      }, compose1(inBody, getShadowHost));\n    };\n\n    var r = function (left, top) {\n      var translate = function (x, y) {\n        return r(left + x, top + y);\n      };\n      return {\n        left: left,\n        top: top,\n        translate: translate\n      };\n    };\n    var SugarPosition = r;\n\n    var boxPosition = function (dom) {\n      var box = dom.getBoundingClientRect();\n      return SugarPosition(box.left, box.top);\n    };\n    var firstDefinedOrZero = function (a, b) {\n      if (a !== undefined) {\n        return a;\n      } else {\n        return b !== undefined ? b : 0;\n      }\n    };\n    var absolute = function (element) {\n      var doc = element.dom.ownerDocument;\n      var body = doc.body;\n      var win = doc.defaultView;\n      var html = doc.documentElement;\n      if (body === element.dom) {\n        return SugarPosition(body.offsetLeft, body.offsetTop);\n      }\n      var scrollTop = firstDefinedOrZero(win === null || win === void 0 ? void 0 : win.pageYOffset, html.scrollTop);\n      var scrollLeft = firstDefinedOrZero(win === null || win === void 0 ? void 0 : win.pageXOffset, html.scrollLeft);\n      var clientTop = firstDefinedOrZero(html.clientTop, body.clientTop);\n      var clientLeft = firstDefinedOrZero(html.clientLeft, body.clientLeft);\n      return viewport(element).translate(scrollLeft - clientLeft, scrollTop - clientTop);\n    };\n    var viewport = function (element) {\n      var dom = element.dom;\n      var doc = dom.ownerDocument;\n      var body = doc.body;\n      if (body === dom) {\n        return SugarPosition(body.offsetLeft, body.offsetTop);\n      }\n      if (!inBody(element)) {\n        return SugarPosition(0, 0);\n      }\n      return boxPosition(dom);\n    };\n\n    var get$8 = function (_DOC) {\n      var doc = _DOC !== undefined ? _DOC.dom : document;\n      var x = doc.body.scrollLeft || doc.documentElement.scrollLeft;\n      var y = doc.body.scrollTop || doc.documentElement.scrollTop;\n      return SugarPosition(x, y);\n    };\n    var to = function (x, y, _DOC) {\n      var doc = _DOC !== undefined ? _DOC.dom : document;\n      var win = doc.defaultView;\n      if (win) {\n        win.scrollTo(x, y);\n      }\n    };\n    var intoView = function (element, alignToTop) {\n      var isSafari = detect().browser.isSafari();\n      if (isSafari && isFunction(element.dom.scrollIntoViewIfNeeded)) {\n        element.dom.scrollIntoViewIfNeeded(false);\n      } else {\n        element.dom.scrollIntoView(alignToTop);\n      }\n    };\n\n    var get$7 = function (_win) {\n      var win = _win === undefined ? window : _win;\n      if (detect().browser.isFirefox()) {\n        return Optional.none();\n      } else {\n        return Optional.from(win['visualViewport']);\n      }\n    };\n    var bounds = function (x, y, width, height) {\n      return {\n        x: x,\n        y: y,\n        width: width,\n        height: height,\n        right: x + width,\n        bottom: y + height\n      };\n    };\n    var getBounds = function (_win) {\n      var win = _win === undefined ? window : _win;\n      var doc = win.document;\n      var scroll = get$8(SugarElement.fromDom(doc));\n      return get$7(win).fold(function () {\n        var html = win.document.documentElement;\n        var width = html.clientWidth;\n        var height = html.clientHeight;\n        return bounds(scroll.left, scroll.top, width, height);\n      }, function (visualViewport) {\n        return bounds(Math.max(visualViewport.pageLeft, scroll.left), Math.max(visualViewport.pageTop, scroll.top), visualViewport.width, visualViewport.height);\n      });\n    };\n\n    var isNodeType = function (type) {\n      return function (node) {\n        return !!node && node.nodeType === type;\n      };\n    };\n    var isRestrictedNode = function (node) {\n      return !!node && !Object.getPrototypeOf(node);\n    };\n    var isElement$5 = isNodeType(1);\n    var matchNodeNames = function (names) {\n      var lowercasedNames = names.map(function (s) {\n        return s.toLowerCase();\n      });\n      return function (node) {\n        if (node && node.nodeName) {\n          var nodeName = node.nodeName.toLowerCase();\n          return contains$3(lowercasedNames, nodeName);\n        }\n        return false;\n      };\n    };\n    var matchStyleValues = function (name, values) {\n      var items = values.toLowerCase().split(' ');\n      return function (node) {\n        if (isElement$5(node)) {\n          for (var i = 0; i < items.length; i++) {\n            var computed = node.ownerDocument.defaultView.getComputedStyle(node, null);\n            var cssValue = computed ? computed.getPropertyValue(name) : null;\n            if (cssValue === items[i]) {\n              return true;\n            }\n          }\n        }\n        return false;\n      };\n    };\n    var hasAttribute = function (attrName) {\n      return function (node) {\n        return isElement$5(node) && node.hasAttribute(attrName);\n      };\n    };\n    var hasAttributeValue = function (attrName, attrValue) {\n      return function (node) {\n        return isElement$5(node) && node.getAttribute(attrName) === attrValue;\n      };\n    };\n    var isBogus$2 = function (node) {\n      return isElement$5(node) && node.hasAttribute('data-mce-bogus');\n    };\n    var isBogusAll$1 = function (node) {\n      return isElement$5(node) && node.getAttribute('data-mce-bogus') === 'all';\n    };\n    var isTable$3 = function (node) {\n      return isElement$5(node) && node.tagName === 'TABLE';\n    };\n    var hasContentEditableState = function (value) {\n      return function (node) {\n        if (isElement$5(node)) {\n          if (node.contentEditable === value) {\n            return true;\n          }\n          if (node.getAttribute('data-mce-contenteditable') === value) {\n            return true;\n          }\n        }\n        return false;\n      };\n    };\n    var isTextareaOrInput = matchNodeNames([\n      'textarea',\n      'input'\n    ]);\n    var isText$7 = isNodeType(3);\n    var isComment = isNodeType(8);\n    var isDocument$1 = isNodeType(9);\n    var isDocumentFragment = isNodeType(11);\n    var isBr$5 = matchNodeNames(['br']);\n    var isImg = matchNodeNames(['img']);\n    var isContentEditableTrue$4 = hasContentEditableState('true');\n    var isContentEditableFalse$b = hasContentEditableState('false');\n    var isTableCell$5 = matchNodeNames([\n      'td',\n      'th'\n    ]);\n    var isMedia$2 = matchNodeNames([\n      'video',\n      'audio',\n      'object',\n      'embed'\n    ]);\n\n    var is$1 = function (lhs, rhs, comparator) {\n      if (comparator === void 0) {\n        comparator = tripleEquals;\n      }\n      return lhs.exists(function (left) {\n        return comparator(left, rhs);\n      });\n    };\n    var cat = function (arr) {\n      var r = [];\n      var push = function (x) {\n        r.push(x);\n      };\n      for (var i = 0; i < arr.length; i++) {\n        arr[i].each(push);\n      }\n      return r;\n    };\n    var lift2 = function (oa, ob, f) {\n      return oa.isSome() && ob.isSome() ? Optional.some(f(oa.getOrDie(), ob.getOrDie())) : Optional.none();\n    };\n    var lift3 = function (oa, ob, oc, f) {\n      return oa.isSome() && ob.isSome() && oc.isSome() ? Optional.some(f(oa.getOrDie(), ob.getOrDie(), oc.getOrDie())) : Optional.none();\n    };\n    var someIf = function (b, a) {\n      return b ? Optional.some(a) : Optional.none();\n    };\n\n    var isSupported = function (dom) {\n      return dom.style !== undefined && isFunction(dom.style.getPropertyValue);\n    };\n\n    var rawSet = function (dom, key, value) {\n      if (isString$1(value) || isBoolean(value) || isNumber(value)) {\n        dom.setAttribute(key, value + '');\n      } else {\n        console.error('Invalid call to Attribute.set. Key ', key, ':: Value ', value, ':: Element ', dom);\n        throw new Error('Attribute value was not simple');\n      }\n    };\n    var set$1 = function (element, key, value) {\n      rawSet(element.dom, key, value);\n    };\n    var setAll$1 = function (element, attrs) {\n      var dom = element.dom;\n      each$j(attrs, function (v, k) {\n        rawSet(dom, k, v);\n      });\n    };\n    var get$6 = function (element, key) {\n      var v = element.dom.getAttribute(key);\n      return v === null ? undefined : v;\n    };\n    var getOpt = function (element, key) {\n      return Optional.from(get$6(element, key));\n    };\n    var has$1 = function (element, key) {\n      var dom = element.dom;\n      return dom && dom.hasAttribute ? dom.hasAttribute(key) : false;\n    };\n    var remove$6 = function (element, key) {\n      element.dom.removeAttribute(key);\n    };\n    var clone$3 = function (element) {\n      return foldl(element.dom.attributes, function (acc, attr) {\n        acc[attr.name] = attr.value;\n        return acc;\n      }, {});\n    };\n\n    var internalSet = function (dom, property, value) {\n      if (!isString$1(value)) {\n        console.error('Invalid call to CSS.set. Property ', property, ':: Value ', value, ':: Element ', dom);\n        throw new Error('CSS value must be a string: ' + value);\n      }\n      if (isSupported(dom)) {\n        dom.style.setProperty(property, value);\n      }\n    };\n    var setAll = function (element, css) {\n      var dom = element.dom;\n      each$j(css, function (v, k) {\n        internalSet(dom, k, v);\n      });\n    };\n    var get$5 = function (element, property) {\n      var dom = element.dom;\n      var styles = window.getComputedStyle(dom);\n      var r = styles.getPropertyValue(property);\n      return r === '' && !inBody(element) ? getUnsafeProperty(dom, property) : r;\n    };\n    var getUnsafeProperty = function (dom, property) {\n      return isSupported(dom) ? dom.style.getPropertyValue(property) : '';\n    };\n    var getRaw = function (element, property) {\n      var dom = element.dom;\n      var raw = getUnsafeProperty(dom, property);\n      return Optional.from(raw).filter(function (r) {\n        return r.length > 0;\n      });\n    };\n    var getAllRaw = function (element) {\n      var css = {};\n      var dom = element.dom;\n      if (isSupported(dom)) {\n        for (var i = 0; i < dom.style.length; i++) {\n          var ruleName = dom.style.item(i);\n          css[ruleName] = dom.style[ruleName];\n        }\n      }\n      return css;\n    };\n    var reflow = function (e) {\n      return e.dom.offsetWidth;\n    };\n\n    var browser$3 = detect().browser;\n    var firstElement = function (nodes) {\n      return find$3(nodes, isElement$6);\n    };\n    var getTableCaptionDeltaY = function (elm) {\n      if (browser$3.isFirefox() && name(elm) === 'table') {\n        return firstElement(children(elm)).filter(function (elm) {\n          return name(elm) === 'caption';\n        }).bind(function (caption) {\n          return firstElement(nextSiblings(caption)).map(function (body) {\n            var bodyTop = body.dom.offsetTop;\n            var captionTop = caption.dom.offsetTop;\n            var captionHeight = caption.dom.offsetHeight;\n            return bodyTop <= captionTop ? -captionHeight : 0;\n          });\n        }).getOr(0);\n      } else {\n        return 0;\n      }\n    };\n    var hasChild = function (elm, child) {\n      return elm.children && contains$3(elm.children, child);\n    };\n    var getPos = function (body, elm, rootElm) {\n      var x = 0, y = 0;\n      var doc = body.ownerDocument;\n      rootElm = rootElm ? rootElm : body;\n      if (elm) {\n        if (rootElm === body && elm.getBoundingClientRect && get$5(SugarElement.fromDom(body), 'position') === 'static') {\n          var pos = elm.getBoundingClientRect();\n          x = pos.left + (doc.documentElement.scrollLeft || body.scrollLeft) - doc.documentElement.clientLeft;\n          y = pos.top + (doc.documentElement.scrollTop || body.scrollTop) - doc.documentElement.clientTop;\n          return {\n            x: x,\n            y: y\n          };\n        }\n        var offsetParent = elm;\n        while (offsetParent && offsetParent !== rootElm && offsetParent.nodeType && !hasChild(offsetParent, rootElm)) {\n          var castOffsetParent = offsetParent;\n          x += castOffsetParent.offsetLeft || 0;\n          y += castOffsetParent.offsetTop || 0;\n          offsetParent = castOffsetParent.offsetParent;\n        }\n        offsetParent = elm.parentNode;\n        while (offsetParent && offsetParent !== rootElm && offsetParent.nodeType && !hasChild(offsetParent, rootElm)) {\n          x -= offsetParent.scrollLeft || 0;\n          y -= offsetParent.scrollTop || 0;\n          offsetParent = offsetParent.parentNode;\n        }\n        y += getTableCaptionDeltaY(SugarElement.fromDom(elm));\n      }\n      return {\n        x: x,\n        y: y\n      };\n    };\n\n    var exports$1 = {}, module$1 = { exports: exports$1 };\n    (function (define, exports, module, require) {\n      (function (global, factory) {\n        typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() : typeof define === 'function' && define.amd ? define(factory) : (global = typeof globalThis !== 'undefined' ? globalThis : global || self, global.EphoxContactWrapper = factory());\n      }(this, function () {\n        var commonjsGlobal = typeof globalThis !== 'undefined' ? globalThis : typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};\n        var promise = { exports: {} };\n        (function (module) {\n          (function (root) {\n            var setTimeoutFunc = setTimeout;\n            function noop() {\n            }\n            function bind(fn, thisArg) {\n              return function () {\n                fn.apply(thisArg, arguments);\n              };\n            }\n            function Promise(fn) {\n              if (typeof this !== 'object')\n                throw new TypeError('Promises must be constructed via new');\n              if (typeof fn !== 'function')\n                throw new TypeError('not a function');\n              this._state = 0;\n              this._handled = false;\n              this._value = undefined;\n              this._deferreds = [];\n              doResolve(fn, this);\n            }\n            function handle(self, deferred) {\n              while (self._state === 3) {\n                self = self._value;\n              }\n              if (self._state === 0) {\n                self._deferreds.push(deferred);\n                return;\n              }\n              self._handled = true;\n              Promise._immediateFn(function () {\n                var cb = self._state === 1 ? deferred.onFulfilled : deferred.onRejected;\n                if (cb === null) {\n                  (self._state === 1 ? resolve : reject)(deferred.promise, self._value);\n                  return;\n                }\n                var ret;\n                try {\n                  ret = cb(self._value);\n                } catch (e) {\n                  reject(deferred.promise, e);\n                  return;\n                }\n                resolve(deferred.promise, ret);\n              });\n            }\n            function resolve(self, newValue) {\n              try {\n                if (newValue === self)\n                  throw new TypeError('A promise cannot be resolved with itself.');\n                if (newValue && (typeof newValue === 'object' || typeof newValue === 'function')) {\n                  var then = newValue.then;\n                  if (newValue instanceof Promise) {\n                    self._state = 3;\n                    self._value = newValue;\n                    finale(self);\n                    return;\n                  } else if (typeof then === 'function') {\n                    doResolve(bind(then, newValue), self);\n                    return;\n                  }\n                }\n                self._state = 1;\n                self._value = newValue;\n                finale(self);\n              } catch (e) {\n                reject(self, e);\n              }\n            }\n            function reject(self, newValue) {\n              self._state = 2;\n              self._value = newValue;\n              finale(self);\n            }\n            function finale(self) {\n              if (self._state === 2 && self._deferreds.length === 0) {\n                Promise._immediateFn(function () {\n                  if (!self._handled) {\n                    Promise._unhandledRejectionFn(self._value);\n                  }\n                });\n              }\n              for (var i = 0, len = self._deferreds.length; i < len; i++) {\n                handle(self, self._deferreds[i]);\n              }\n              self._deferreds = null;\n            }\n            function Handler(onFulfilled, onRejected, promise) {\n              this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\n              this.onRejected = typeof onRejected === 'function' ? onRejected : null;\n              this.promise = promise;\n            }\n            function doResolve(fn, self) {\n              var done = false;\n              try {\n                fn(function (value) {\n                  if (done)\n                    return;\n                  done = true;\n                  resolve(self, value);\n                }, function (reason) {\n                  if (done)\n                    return;\n                  done = true;\n                  reject(self, reason);\n                });\n              } catch (ex) {\n                if (done)\n                  return;\n                done = true;\n                reject(self, ex);\n              }\n            }\n            Promise.prototype['catch'] = function (onRejected) {\n              return this.then(null, onRejected);\n            };\n            Promise.prototype.then = function (onFulfilled, onRejected) {\n              var prom = new this.constructor(noop);\n              handle(this, new Handler(onFulfilled, onRejected, prom));\n              return prom;\n            };\n            Promise.all = function (arr) {\n              var args = Array.prototype.slice.call(arr);\n              return new Promise(function (resolve, reject) {\n                if (args.length === 0)\n                  return resolve([]);\n                var remaining = args.length;\n                function res(i, val) {\n                  try {\n                    if (val && (typeof val === 'object' || typeof val === 'function')) {\n                      var then = val.then;\n                      if (typeof then === 'function') {\n                        then.call(val, function (val) {\n                          res(i, val);\n                        }, reject);\n                        return;\n                      }\n                    }\n                    args[i] = val;\n                    if (--remaining === 0) {\n                      resolve(args);\n                    }\n                  } catch (ex) {\n                    reject(ex);\n                  }\n                }\n                for (var i = 0; i < args.length; i++) {\n                  res(i, args[i]);\n                }\n              });\n            };\n            Promise.resolve = function (value) {\n              if (value && typeof value === 'object' && value.constructor === Promise) {\n                return value;\n              }\n              return new Promise(function (resolve) {\n                resolve(value);\n              });\n            };\n            Promise.reject = function (value) {\n              return new Promise(function (resolve, reject) {\n                reject(value);\n              });\n            };\n            Promise.race = function (values) {\n              return new Promise(function (resolve, reject) {\n                for (var i = 0, len = values.length; i < len; i++) {\n                  values[i].then(resolve, reject);\n                }\n              });\n            };\n            Promise._immediateFn = typeof setImmediate === 'function' ? function (fn) {\n              setImmediate(fn);\n            } : function (fn) {\n              setTimeoutFunc(fn, 0);\n            };\n            Promise._unhandledRejectionFn = function _unhandledRejectionFn(err) {\n              if (typeof console !== 'undefined' && console) {\n                console.warn('Possible Unhandled Promise Rejection:', err);\n              }\n            };\n            Promise._setImmediateFn = function _setImmediateFn(fn) {\n              Promise._immediateFn = fn;\n            };\n            Promise._setUnhandledRejectionFn = function _setUnhandledRejectionFn(fn) {\n              Promise._unhandledRejectionFn = fn;\n            };\n            if (module.exports) {\n              module.exports = Promise;\n            } else if (!root.Promise) {\n              root.Promise = Promise;\n            }\n          }(commonjsGlobal));\n        }(promise));\n        var promisePolyfill = promise.exports;\n        var Global = function () {\n          if (typeof window !== 'undefined') {\n            return window;\n          } else {\n            return Function('return this;')();\n          }\n        }();\n        var promisePolyfill_1 = { boltExport: Global.Promise || promisePolyfill };\n        return promisePolyfill_1;\n      }));\n    }(undefined, exports$1, module$1));\n    var Promise$1 = module$1.exports.boltExport;\n\n    var nu$1 = function (baseFn) {\n      var data = Optional.none();\n      var callbacks = [];\n      var map = function (f) {\n        return nu$1(function (nCallback) {\n          get(function (data) {\n            nCallback(f(data));\n          });\n        });\n      };\n      var get = function (nCallback) {\n        if (isReady()) {\n          call(nCallback);\n        } else {\n          callbacks.push(nCallback);\n        }\n      };\n      var set = function (x) {\n        if (!isReady()) {\n          data = Optional.some(x);\n          run(callbacks);\n          callbacks = [];\n        }\n      };\n      var isReady = function () {\n        return data.isSome();\n      };\n      var run = function (cbs) {\n        each$k(cbs, call);\n      };\n      var call = function (cb) {\n        data.each(function (x) {\n          setTimeout(function () {\n            cb(x);\n          }, 0);\n        });\n      };\n      baseFn(set);\n      return {\n        get: get,\n        map: map,\n        isReady: isReady\n      };\n    };\n    var pure$1 = function (a) {\n      return nu$1(function (callback) {\n        callback(a);\n      });\n    };\n    var LazyValue = {\n      nu: nu$1,\n      pure: pure$1\n    };\n\n    var errorReporter = function (err) {\n      setTimeout(function () {\n        throw err;\n      }, 0);\n    };\n    var make = function (run) {\n      var get = function (callback) {\n        run().then(callback, errorReporter);\n      };\n      var map = function (fab) {\n        return make(function () {\n          return run().then(fab);\n        });\n      };\n      var bind = function (aFutureB) {\n        return make(function () {\n          return run().then(function (v) {\n            return aFutureB(v).toPromise();\n          });\n        });\n      };\n      var anonBind = function (futureB) {\n        return make(function () {\n          return run().then(function () {\n            return futureB.toPromise();\n          });\n        });\n      };\n      var toLazy = function () {\n        return LazyValue.nu(get);\n      };\n      var toCached = function () {\n        var cache = null;\n        return make(function () {\n          if (cache === null) {\n            cache = run();\n          }\n          return cache;\n        });\n      };\n      var toPromise = run;\n      return {\n        map: map,\n        bind: bind,\n        anonBind: anonBind,\n        toLazy: toLazy,\n        toCached: toCached,\n        toPromise: toPromise,\n        get: get\n      };\n    };\n    var nu = function (baseFn) {\n      return make(function () {\n        return new Promise$1(baseFn);\n      });\n    };\n    var pure = function (a) {\n      return make(function () {\n        return Promise$1.resolve(a);\n      });\n    };\n    var Future = {\n      nu: nu,\n      pure: pure\n    };\n\n    var par$1 = function (asyncValues, nu) {\n      return nu(function (callback) {\n        var r = [];\n        var count = 0;\n        var cb = function (i) {\n          return function (value) {\n            r[i] = value;\n            count++;\n            if (count >= asyncValues.length) {\n              callback(r);\n            }\n          };\n        };\n        if (asyncValues.length === 0) {\n          callback([]);\n        } else {\n          each$k(asyncValues, function (asyncValue, i) {\n            asyncValue.get(cb(i));\n          });\n        }\n      });\n    };\n\n    var par = function (futures) {\n      return par$1(futures, Future.nu);\n    };\n\n    var value$1 = function (o) {\n      var or = function (_opt) {\n        return value$1(o);\n      };\n      var orThunk = function (_f) {\n        return value$1(o);\n      };\n      var map = function (f) {\n        return value$1(f(o));\n      };\n      var mapError = function (_f) {\n        return value$1(o);\n      };\n      var each = function (f) {\n        f(o);\n      };\n      var bind = function (f) {\n        return f(o);\n      };\n      var fold = function (_, onValue) {\n        return onValue(o);\n      };\n      var exists = function (f) {\n        return f(o);\n      };\n      var forall = function (f) {\n        return f(o);\n      };\n      var toOptional = function () {\n        return Optional.some(o);\n      };\n      return {\n        isValue: always,\n        isError: never,\n        getOr: constant(o),\n        getOrThunk: constant(o),\n        getOrDie: constant(o),\n        or: or,\n        orThunk: orThunk,\n        fold: fold,\n        map: map,\n        mapError: mapError,\n        each: each,\n        bind: bind,\n        exists: exists,\n        forall: forall,\n        toOptional: toOptional\n      };\n    };\n    var error = function (message) {\n      var getOrThunk = function (f) {\n        return f();\n      };\n      var getOrDie = function () {\n        return die(String(message))();\n      };\n      var or = identity;\n      var orThunk = function (f) {\n        return f();\n      };\n      var map = function (_f) {\n        return error(message);\n      };\n      var mapError = function (f) {\n        return error(f(message));\n      };\n      var bind = function (_f) {\n        return error(message);\n      };\n      var fold = function (onError, _) {\n        return onError(message);\n      };\n      return {\n        isValue: never,\n        isError: always,\n        getOr: identity,\n        getOrThunk: getOrThunk,\n        getOrDie: getOrDie,\n        or: or,\n        orThunk: orThunk,\n        fold: fold,\n        map: map,\n        mapError: mapError,\n        each: noop,\n        bind: bind,\n        exists: never,\n        forall: always,\n        toOptional: Optional.none\n      };\n    };\n    var fromOption = function (opt, err) {\n      return opt.fold(function () {\n        return error(err);\n      }, value$1);\n    };\n    var Result = {\n      value: value$1,\n      error: error,\n      fromOption: fromOption\n    };\n\n    var generate$1 = function (cases) {\n      if (!isArray$1(cases)) {\n        throw new Error('cases must be an array');\n      }\n      if (cases.length === 0) {\n        throw new Error('there must be at least one case');\n      }\n      var constructors = [];\n      var adt = {};\n      each$k(cases, function (acase, count) {\n        var keys$1 = keys(acase);\n        if (keys$1.length !== 1) {\n          throw new Error('one and only one name per case');\n        }\n        var key = keys$1[0];\n        var value = acase[key];\n        if (adt[key] !== undefined) {\n          throw new Error('duplicate key detected:' + key);\n        } else if (key === 'cata') {\n          throw new Error('cannot have a case named cata (sorry)');\n        } else if (!isArray$1(value)) {\n          throw new Error('case arguments must be an array');\n        }\n        constructors.push(key);\n        adt[key] = function () {\n          var args = [];\n          for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n          }\n          var argLength = args.length;\n          if (argLength !== value.length) {\n            throw new Error('Wrong number of arguments to case ' + key + '. Expected ' + value.length + ' (' + value + '), got ' + argLength);\n          }\n          var match = function (branches) {\n            var branchKeys = keys(branches);\n            if (constructors.length !== branchKeys.length) {\n              throw new Error('Wrong number of arguments to match. Expected: ' + constructors.join(',') + '\\nActual: ' + branchKeys.join(','));\n            }\n            var allReqd = forall(constructors, function (reqKey) {\n              return contains$3(branchKeys, reqKey);\n            });\n            if (!allReqd) {\n              throw new Error('Not all branches were specified when using match. Specified: ' + branchKeys.join(', ') + '\\nRequired: ' + constructors.join(', '));\n            }\n            return branches[key].apply(null, args);\n          };\n          return {\n            fold: function () {\n              var foldArgs = [];\n              for (var _i = 0; _i < arguments.length; _i++) {\n                foldArgs[_i] = arguments[_i];\n              }\n              if (foldArgs.length !== cases.length) {\n                throw new Error('Wrong number of arguments to fold. Expected ' + cases.length + ', got ' + foldArgs.length);\n              }\n              var target = foldArgs[count];\n              return target.apply(null, args);\n            },\n            match: match,\n            log: function (label) {\n              console.log(label, {\n                constructors: constructors,\n                constructor: key,\n                params: args\n              });\n            }\n          };\n        };\n      });\n      return adt;\n    };\n    var Adt = { generate: generate$1 };\n\n    Adt.generate([\n      {\n        bothErrors: [\n          'error1',\n          'error2'\n        ]\n      },\n      {\n        firstError: [\n          'error1',\n          'value2'\n        ]\n      },\n      {\n        secondError: [\n          'value1',\n          'error2'\n        ]\n      },\n      {\n        bothValues: [\n          'value1',\n          'value2'\n        ]\n      }\n    ]);\n    var unite = function (result) {\n      return result.fold(identity, identity);\n    };\n\n    function ClosestOrAncestor (is, ancestor, scope, a, isRoot) {\n      if (is(scope, a)) {\n        return Optional.some(scope);\n      } else if (isFunction(isRoot) && isRoot(scope)) {\n        return Optional.none();\n      } else {\n        return ancestor(scope, a, isRoot);\n      }\n    }\n\n    var ancestor$3 = function (scope, predicate, isRoot) {\n      var element = scope.dom;\n      var stop = isFunction(isRoot) ? isRoot : never;\n      while (element.parentNode) {\n        element = element.parentNode;\n        var el = SugarElement.fromDom(element);\n        if (predicate(el)) {\n          return Optional.some(el);\n        } else if (stop(el)) {\n          break;\n        }\n      }\n      return Optional.none();\n    };\n    var closest$3 = function (scope, predicate, isRoot) {\n      var is = function (s, test) {\n        return test(s);\n      };\n      return ClosestOrAncestor(is, ancestor$3, scope, predicate, isRoot);\n    };\n    var sibling$2 = function (scope, predicate) {\n      var element = scope.dom;\n      if (!element.parentNode) {\n        return Optional.none();\n      }\n      return child(SugarElement.fromDom(element.parentNode), function (x) {\n        return !eq(scope, x) && predicate(x);\n      });\n    };\n    var child = function (scope, predicate) {\n      var pred = function (node) {\n        return predicate(SugarElement.fromDom(node));\n      };\n      var result = find$3(scope.dom.childNodes, pred);\n      return result.map(SugarElement.fromDom);\n    };\n\n    var ancestor$2 = function (scope, selector, isRoot) {\n      return ancestor$3(scope, function (e) {\n        return is$2(e, selector);\n      }, isRoot);\n    };\n    var descendant = function (scope, selector) {\n      return one(selector, scope);\n    };\n    var closest$2 = function (scope, selector, isRoot) {\n      var is = function (element, selector) {\n        return is$2(element, selector);\n      };\n      return ClosestOrAncestor(is, ancestor$2, scope, selector, isRoot);\n    };\n\n    var promiseObj = window.Promise ? window.Promise : Promise$1;\n\n    var requestAnimationFramePromise;\n    var requestAnimationFrame = function (callback, element) {\n      var requestAnimationFrameFunc = window.requestAnimationFrame;\n      var vendors = [\n        'ms',\n        'moz',\n        'webkit'\n      ];\n      var featurefill = function (cb) {\n        window.setTimeout(cb, 0);\n      };\n      for (var i = 0; i < vendors.length && !requestAnimationFrameFunc; i++) {\n        requestAnimationFrameFunc = window[vendors[i] + 'RequestAnimationFrame'];\n      }\n      if (!requestAnimationFrameFunc) {\n        requestAnimationFrameFunc = featurefill;\n      }\n      requestAnimationFrameFunc(callback, element);\n    };\n    var wrappedSetTimeout = function (callback, time) {\n      if (typeof time !== 'number') {\n        time = 0;\n      }\n      return setTimeout(callback, time);\n    };\n    var wrappedSetInterval = function (callback, time) {\n      if (typeof time !== 'number') {\n        time = 1;\n      }\n      return setInterval(callback, time);\n    };\n    var wrappedClearTimeout = function (id) {\n      return clearTimeout(id);\n    };\n    var wrappedClearInterval = function (id) {\n      return clearInterval(id);\n    };\n    var debounce = function (callback, time) {\n      var timer;\n      var func = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        clearTimeout(timer);\n        timer = wrappedSetTimeout(function () {\n          callback.apply(this, args);\n        }, time);\n      };\n      func.stop = function () {\n        clearTimeout(timer);\n      };\n      return func;\n    };\n    var Delay = {\n      requestAnimationFrame: function (callback, element) {\n        if (requestAnimationFramePromise) {\n          requestAnimationFramePromise.then(callback);\n          return;\n        }\n        requestAnimationFramePromise = new promiseObj(function (resolve) {\n          if (!element) {\n            element = document.body;\n          }\n          requestAnimationFrame(resolve, element);\n        }).then(callback);\n      },\n      setTimeout: wrappedSetTimeout,\n      setInterval: wrappedSetInterval,\n      setEditorTimeout: function (editor, callback, time) {\n        return wrappedSetTimeout(function () {\n          if (!editor.removed) {\n            callback();\n          }\n        }, time);\n      },\n      setEditorInterval: function (editor, callback, time) {\n        var timer = wrappedSetInterval(function () {\n          if (!editor.removed) {\n            callback();\n          } else {\n            clearInterval(timer);\n          }\n        }, time);\n        return timer;\n      },\n      debounce: debounce,\n      throttle: debounce,\n      clearInterval: wrappedClearInterval,\n      clearTimeout: wrappedClearTimeout\n    };\n\n    var StyleSheetLoader = function (documentOrShadowRoot, settings) {\n      if (settings === void 0) {\n        settings = {};\n      }\n      var idCount = 0;\n      var loadedStates = {};\n      var edos = SugarElement.fromDom(documentOrShadowRoot);\n      var doc = documentOrOwner(edos);\n      var maxLoadTime = settings.maxLoadTime || 5000;\n      var _setReferrerPolicy = function (referrerPolicy) {\n        settings.referrerPolicy = referrerPolicy;\n      };\n      var addStyle = function (element) {\n        append$1(getStyleContainer(edos), element);\n      };\n      var removeStyle = function (id) {\n        var styleContainer = getStyleContainer(edos);\n        descendant(styleContainer, '#' + id).each(remove$7);\n      };\n      var getOrCreateState = function (url) {\n        return get$9(loadedStates, url).getOrThunk(function () {\n          return {\n            id: 'mce-u' + idCount++,\n            passed: [],\n            failed: [],\n            count: 0\n          };\n        });\n      };\n      var load = function (url, success, failure) {\n        var link;\n        var urlWithSuffix = Tools._addCacheSuffix(url);\n        var state = getOrCreateState(urlWithSuffix);\n        loadedStates[urlWithSuffix] = state;\n        state.count++;\n        var resolve = function (callbacks, status) {\n          var i = callbacks.length;\n          while (i--) {\n            callbacks[i]();\n          }\n          state.status = status;\n          state.passed = [];\n          state.failed = [];\n          if (link) {\n            link.onload = null;\n            link.onerror = null;\n            link = null;\n          }\n        };\n        var passed = function () {\n          return resolve(state.passed, 2);\n        };\n        var failed = function () {\n          return resolve(state.failed, 3);\n        };\n        var wait = function (testCallback, waitCallback) {\n          if (!testCallback()) {\n            if (Date.now() - startTime < maxLoadTime) {\n              Delay.setTimeout(waitCallback);\n            } else {\n              failed();\n            }\n          }\n        };\n        var waitForWebKitLinkLoaded = function () {\n          wait(function () {\n            var styleSheets = documentOrShadowRoot.styleSheets;\n            var i = styleSheets.length;\n            while (i--) {\n              var styleSheet = styleSheets[i];\n              var owner = styleSheet.ownerNode;\n              if (owner && owner.id === link.id) {\n                passed();\n                return true;\n              }\n            }\n            return false;\n          }, waitForWebKitLinkLoaded);\n        };\n        if (success) {\n          state.passed.push(success);\n        }\n        if (failure) {\n          state.failed.push(failure);\n        }\n        if (state.status === 1) {\n          return;\n        }\n        if (state.status === 2) {\n          passed();\n          return;\n        }\n        if (state.status === 3) {\n          failed();\n          return;\n        }\n        state.status = 1;\n        var linkElem = SugarElement.fromTag('link', doc.dom);\n        setAll$1(linkElem, {\n          rel: 'stylesheet',\n          type: 'text/css',\n          id: state.id\n        });\n        var startTime = Date.now();\n        if (settings.contentCssCors) {\n          set$1(linkElem, 'crossOrigin', 'anonymous');\n        }\n        if (settings.referrerPolicy) {\n          set$1(linkElem, 'referrerpolicy', settings.referrerPolicy);\n        }\n        link = linkElem.dom;\n        link.onload = waitForWebKitLinkLoaded;\n        link.onerror = failed;\n        addStyle(linkElem);\n        set$1(linkElem, 'href', urlWithSuffix);\n      };\n      var loadF = function (url) {\n        return Future.nu(function (resolve) {\n          load(url, compose(resolve, constant(Result.value(url))), compose(resolve, constant(Result.error(url))));\n        });\n      };\n      var loadAll = function (urls, success, failure) {\n        par(map$3(urls, loadF)).get(function (result) {\n          var parts = partition(result, function (r) {\n            return r.isValue();\n          });\n          if (parts.fail.length > 0) {\n            failure(parts.fail.map(unite));\n          } else {\n            success(parts.pass.map(unite));\n          }\n        });\n      };\n      var unload = function (url) {\n        var urlWithSuffix = Tools._addCacheSuffix(url);\n        get$9(loadedStates, urlWithSuffix).each(function (state) {\n          var count = --state.count;\n          if (count === 0) {\n            delete loadedStates[urlWithSuffix];\n            removeStyle(state.id);\n          }\n        });\n      };\n      var unloadAll = function (urls) {\n        each$k(urls, function (url) {\n          unload(url);\n        });\n      };\n      return {\n        load: load,\n        loadAll: loadAll,\n        unload: unload,\n        unloadAll: unloadAll,\n        _setReferrerPolicy: _setReferrerPolicy\n      };\n    };\n\n    var create$8 = function () {\n      var map = new WeakMap();\n      var forElement = function (referenceElement, settings) {\n        var root = getRootNode(referenceElement);\n        var rootDom = root.dom;\n        return Optional.from(map.get(rootDom)).getOrThunk(function () {\n          var sl = StyleSheetLoader(rootDom, settings);\n          map.set(rootDom, sl);\n          return sl;\n        });\n      };\n      return { forElement: forElement };\n    };\n    var instance = create$8();\n\n    var DomTreeWalker = function () {\n      function DomTreeWalker(startNode, rootNode) {\n        this.node = startNode;\n        this.rootNode = rootNode;\n        this.current = this.current.bind(this);\n        this.next = this.next.bind(this);\n        this.prev = this.prev.bind(this);\n        this.prev2 = this.prev2.bind(this);\n      }\n      DomTreeWalker.prototype.current = function () {\n        return this.node;\n      };\n      DomTreeWalker.prototype.next = function (shallow) {\n        this.node = this.findSibling(this.node, 'firstChild', 'nextSibling', shallow);\n        return this.node;\n      };\n      DomTreeWalker.prototype.prev = function (shallow) {\n        this.node = this.findSibling(this.node, 'lastChild', 'previousSibling', shallow);\n        return this.node;\n      };\n      DomTreeWalker.prototype.prev2 = function (shallow) {\n        this.node = this.findPreviousNode(this.node, 'lastChild', 'previousSibling', shallow);\n        return this.node;\n      };\n      DomTreeWalker.prototype.findSibling = function (node, startName, siblingName, shallow) {\n        var sibling, parent;\n        if (node) {\n          if (!shallow && node[startName]) {\n            return node[startName];\n          }\n          if (node !== this.rootNode) {\n            sibling = node[siblingName];\n            if (sibling) {\n              return sibling;\n            }\n            for (parent = node.parentNode; parent && parent !== this.rootNode; parent = parent.parentNode) {\n              sibling = parent[siblingName];\n              if (sibling) {\n                return sibling;\n              }\n            }\n          }\n        }\n      };\n      DomTreeWalker.prototype.findPreviousNode = function (node, startName, siblingName, shallow) {\n        var sibling, parent, child;\n        if (node) {\n          sibling = node[siblingName];\n          if (this.rootNode && sibling === this.rootNode) {\n            return;\n          }\n          if (sibling) {\n            if (!shallow) {\n              for (child = sibling[startName]; child; child = child[startName]) {\n                if (!child[startName]) {\n                  return child;\n                }\n              }\n            }\n            return sibling;\n          }\n          parent = node.parentNode;\n          if (parent && parent !== this.rootNode) {\n            return parent;\n          }\n        }\n      };\n      return DomTreeWalker;\n    }();\n\n    var blocks = [\n      'article',\n      'aside',\n      'details',\n      'div',\n      'dt',\n      'figcaption',\n      'footer',\n      'form',\n      'fieldset',\n      'header',\n      'hgroup',\n      'html',\n      'main',\n      'nav',\n      'section',\n      'summary',\n      'body',\n      'p',\n      'dl',\n      'multicol',\n      'dd',\n      'figure',\n      'address',\n      'center',\n      'blockquote',\n      'h1',\n      'h2',\n      'h3',\n      'h4',\n      'h5',\n      'h6',\n      'listing',\n      'xmp',\n      'pre',\n      'plaintext',\n      'menu',\n      'dir',\n      'ul',\n      'ol',\n      'li',\n      'hr',\n      'table',\n      'tbody',\n      'thead',\n      'tfoot',\n      'th',\n      'tr',\n      'td',\n      'caption'\n    ];\n    var tableCells = [\n      'td',\n      'th'\n    ];\n    var tableSections = [\n      'thead',\n      'tbody',\n      'tfoot'\n    ];\n    var textBlocks = [\n      'h1',\n      'h2',\n      'h3',\n      'h4',\n      'h5',\n      'h6',\n      'p',\n      'div',\n      'address',\n      'pre',\n      'form',\n      'blockquote',\n      'center',\n      'dir',\n      'fieldset',\n      'header',\n      'footer',\n      'article',\n      'section',\n      'hgroup',\n      'aside',\n      'nav',\n      'figure'\n    ];\n    var headings = [\n      'h1',\n      'h2',\n      'h3',\n      'h4',\n      'h5',\n      'h6'\n    ];\n    var listItems$1 = [\n      'li',\n      'dd',\n      'dt'\n    ];\n    var lists = [\n      'ul',\n      'ol',\n      'dl'\n    ];\n    var wsElements = [\n      'pre',\n      'script',\n      'textarea',\n      'style'\n    ];\n    var lazyLookup = function (items) {\n      var lookup;\n      return function (node) {\n        lookup = lookup ? lookup : mapToObject(items, always);\n        return has$2(lookup, name(node));\n      };\n    };\n    var isHeading = lazyLookup(headings);\n    var isBlock$2 = lazyLookup(blocks);\n    var isTable$2 = function (node) {\n      return name(node) === 'table';\n    };\n    var isInline$1 = function (node) {\n      return isElement$6(node) && !isBlock$2(node);\n    };\n    var isBr$4 = function (node) {\n      return isElement$6(node) && name(node) === 'br';\n    };\n    var isTextBlock$2 = lazyLookup(textBlocks);\n    var isList = lazyLookup(lists);\n    var isListItem = lazyLookup(listItems$1);\n    var isTableSection = lazyLookup(tableSections);\n    var isTableCell$4 = lazyLookup(tableCells);\n    var isWsPreserveElement = lazyLookup(wsElements);\n\n    var ancestor$1 = function (scope, selector, isRoot) {\n      return ancestor$2(scope, selector, isRoot).isSome();\n    };\n\n    var zeroWidth = '\\uFEFF';\n    var nbsp = '\\xA0';\n    var isZwsp$1 = function (char) {\n      return char === zeroWidth;\n    };\n    var removeZwsp = function (s) {\n      return s.replace(/\\uFEFF/g, '');\n    };\n\n    var ZWSP$1 = zeroWidth;\n    var isZwsp = isZwsp$1;\n    var trim$2 = removeZwsp;\n\n    var isElement$4 = isElement$5;\n    var isText$6 = isText$7;\n    var isCaretContainerBlock$1 = function (node) {\n      if (isText$6(node)) {\n        node = node.parentNode;\n      }\n      return isElement$4(node) && node.hasAttribute('data-mce-caret');\n    };\n    var isCaretContainerInline = function (node) {\n      return isText$6(node) && isZwsp(node.data);\n    };\n    var isCaretContainer$2 = function (node) {\n      return isCaretContainerBlock$1(node) || isCaretContainerInline(node);\n    };\n    var hasContent = function (node) {\n      return node.firstChild !== node.lastChild || !isBr$5(node.firstChild);\n    };\n    var insertInline$1 = function (node, before) {\n      var doc = node.ownerDocument;\n      var textNode = doc.createTextNode(ZWSP$1);\n      var parentNode = node.parentNode;\n      if (!before) {\n        var sibling = node.nextSibling;\n        if (isText$6(sibling)) {\n          if (isCaretContainer$2(sibling)) {\n            return sibling;\n          }\n          if (startsWithCaretContainer$1(sibling)) {\n            sibling.splitText(1);\n            return sibling;\n          }\n        }\n        if (node.nextSibling) {\n          parentNode.insertBefore(textNode, node.nextSibling);\n        } else {\n          parentNode.appendChild(textNode);\n        }\n      } else {\n        var sibling = node.previousSibling;\n        if (isText$6(sibling)) {\n          if (isCaretContainer$2(sibling)) {\n            return sibling;\n          }\n          if (endsWithCaretContainer$1(sibling)) {\n            return sibling.splitText(sibling.data.length - 1);\n          }\n        }\n        parentNode.insertBefore(textNode, node);\n      }\n      return textNode;\n    };\n    var isBeforeInline = function (pos) {\n      var container = pos.container();\n      if (!isText$7(container)) {\n        return false;\n      }\n      return container.data.charAt(pos.offset()) === ZWSP$1 || pos.isAtStart() && isCaretContainerInline(container.previousSibling);\n    };\n    var isAfterInline = function (pos) {\n      var container = pos.container();\n      if (!isText$7(container)) {\n        return false;\n      }\n      return container.data.charAt(pos.offset() - 1) === ZWSP$1 || pos.isAtEnd() && isCaretContainerInline(container.nextSibling);\n    };\n    var createBogusBr = function () {\n      var br = document.createElement('br');\n      br.setAttribute('data-mce-bogus', '1');\n      return br;\n    };\n    var insertBlock$1 = function (blockName, node, before) {\n      var doc = node.ownerDocument;\n      var blockNode = doc.createElement(blockName);\n      blockNode.setAttribute('data-mce-caret', before ? 'before' : 'after');\n      blockNode.setAttribute('data-mce-bogus', 'all');\n      blockNode.appendChild(createBogusBr());\n      var parentNode = node.parentNode;\n      if (!before) {\n        if (node.nextSibling) {\n          parentNode.insertBefore(blockNode, node.nextSibling);\n        } else {\n          parentNode.appendChild(blockNode);\n        }\n      } else {\n        parentNode.insertBefore(blockNode, node);\n      }\n      return blockNode;\n    };\n    var startsWithCaretContainer$1 = function (node) {\n      return isText$6(node) && node.data[0] === ZWSP$1;\n    };\n    var endsWithCaretContainer$1 = function (node) {\n      return isText$6(node) && node.data[node.data.length - 1] === ZWSP$1;\n    };\n    var trimBogusBr = function (elm) {\n      var brs = elm.getElementsByTagName('br');\n      var lastBr = brs[brs.length - 1];\n      if (isBogus$2(lastBr)) {\n        lastBr.parentNode.removeChild(lastBr);\n      }\n    };\n    var showCaretContainerBlock = function (caretContainer) {\n      if (caretContainer && caretContainer.hasAttribute('data-mce-caret')) {\n        trimBogusBr(caretContainer);\n        caretContainer.removeAttribute('data-mce-caret');\n        caretContainer.removeAttribute('data-mce-bogus');\n        caretContainer.removeAttribute('style');\n        caretContainer.removeAttribute('_moz_abspos');\n        return caretContainer;\n      }\n      return null;\n    };\n    var isRangeInCaretContainerBlock = function (range) {\n      return isCaretContainerBlock$1(range.startContainer);\n    };\n\n    var isContentEditableTrue$3 = isContentEditableTrue$4;\n    var isContentEditableFalse$a = isContentEditableFalse$b;\n    var isBr$3 = isBr$5;\n    var isText$5 = isText$7;\n    var isInvalidTextElement = matchNodeNames([\n      'script',\n      'style',\n      'textarea'\n    ]);\n    var isAtomicInline = matchNodeNames([\n      'img',\n      'input',\n      'textarea',\n      'hr',\n      'iframe',\n      'video',\n      'audio',\n      'object',\n      'embed'\n    ]);\n    var isTable$1 = matchNodeNames(['table']);\n    var isCaretContainer$1 = isCaretContainer$2;\n    var isCaretCandidate$3 = function (node) {\n      if (isCaretContainer$1(node)) {\n        return false;\n      }\n      if (isText$5(node)) {\n        return !isInvalidTextElement(node.parentNode);\n      }\n      return isAtomicInline(node) || isBr$3(node) || isTable$1(node) || isNonUiContentEditableFalse(node);\n    };\n    var isUnselectable = function (node) {\n      return isElement$5(node) && node.getAttribute('unselectable') === 'true';\n    };\n    var isNonUiContentEditableFalse = function (node) {\n      return isUnselectable(node) === false && isContentEditableFalse$a(node);\n    };\n    var isInEditable = function (node, root) {\n      for (node = node.parentNode; node && node !== root; node = node.parentNode) {\n        if (isNonUiContentEditableFalse(node)) {\n          return false;\n        }\n        if (isContentEditableTrue$3(node)) {\n          return true;\n        }\n      }\n      return true;\n    };\n    var isAtomicContentEditableFalse = function (node) {\n      if (!isNonUiContentEditableFalse(node)) {\n        return false;\n      }\n      return foldl(from(node.getElementsByTagName('*')), function (result, elm) {\n        return result || isContentEditableTrue$3(elm);\n      }, false) !== true;\n    };\n    var isAtomic$1 = function (node) {\n      return isAtomicInline(node) || isAtomicContentEditableFalse(node);\n    };\n    var isEditableCaretCandidate$1 = function (node, root) {\n      return isCaretCandidate$3(node) && isInEditable(node, root);\n    };\n\n    var whiteSpaceRegExp$1 = /^[ \\t\\r\\n]*$/;\n    var isWhitespaceText = function (text) {\n      return whiteSpaceRegExp$1.test(text);\n    };\n\n    var hasWhitespacePreserveParent = function (node, rootNode) {\n      var rootElement = SugarElement.fromDom(rootNode);\n      var startNode = SugarElement.fromDom(node);\n      return ancestor$1(startNode, 'pre,code', curry(eq, rootElement));\n    };\n    var isWhitespace = function (node, rootNode) {\n      return isText$7(node) && isWhitespaceText(node.data) && hasWhitespacePreserveParent(node, rootNode) === false;\n    };\n    var isNamedAnchor = function (node) {\n      return isElement$5(node) && node.nodeName === 'A' && !node.hasAttribute('href') && (node.hasAttribute('name') || node.hasAttribute('id'));\n    };\n    var isContent$1 = function (node, rootNode) {\n      return isCaretCandidate$3(node) && isWhitespace(node, rootNode) === false || isNamedAnchor(node) || isBookmark(node);\n    };\n    var isBookmark = hasAttribute('data-mce-bookmark');\n    var isBogus$1 = hasAttribute('data-mce-bogus');\n    var isBogusAll = hasAttributeValue('data-mce-bogus', 'all');\n    var isEmptyNode = function (targetNode, skipBogus) {\n      var brCount = 0;\n      if (isContent$1(targetNode, targetNode)) {\n        return false;\n      } else {\n        var node = targetNode.firstChild;\n        if (!node) {\n          return true;\n        }\n        var walker = new DomTreeWalker(node, targetNode);\n        do {\n          if (skipBogus) {\n            if (isBogusAll(node)) {\n              node = walker.next(true);\n              continue;\n            }\n            if (isBogus$1(node)) {\n              node = walker.next();\n              continue;\n            }\n          }\n          if (isBr$5(node)) {\n            brCount++;\n            node = walker.next();\n            continue;\n          }\n          if (isContent$1(node, targetNode)) {\n            return false;\n          }\n          node = walker.next();\n        } while (node);\n        return brCount <= 1;\n      }\n    };\n    var isEmpty$2 = function (elm, skipBogus) {\n      if (skipBogus === void 0) {\n        skipBogus = true;\n      }\n      return isEmptyNode(elm.dom, skipBogus);\n    };\n\n    var isSpan = function (node) {\n      return node.nodeName.toLowerCase() === 'span';\n    };\n    var isInlineContent = function (node, root) {\n      return isNonNullable(node) && (isContent$1(node, root) || isInline$1(SugarElement.fromDom(node)));\n    };\n    var surroundedByInlineContent = function (node, root) {\n      var prev = new DomTreeWalker(node, root).prev(false);\n      var next = new DomTreeWalker(node, root).next(false);\n      var prevIsInline = isUndefined(prev) || isInlineContent(prev, root);\n      var nextIsInline = isUndefined(next) || isInlineContent(next, root);\n      return prevIsInline && nextIsInline;\n    };\n    var isBookmarkNode$2 = function (node) {\n      return isSpan(node) && node.getAttribute('data-mce-type') === 'bookmark';\n    };\n    var isKeepTextNode = function (node, root) {\n      return isText$7(node) && node.data.length > 0 && surroundedByInlineContent(node, root);\n    };\n    var isKeepElement = function (node) {\n      return isElement$5(node) ? node.childNodes.length > 0 : false;\n    };\n    var isDocument = function (node) {\n      return isDocumentFragment(node) || isDocument$1(node);\n    };\n    var trimNode = function (dom, node, root) {\n      var rootNode = root || node;\n      if (isElement$5(node) && isBookmarkNode$2(node)) {\n        return node;\n      }\n      var children = node.childNodes;\n      for (var i = children.length - 1; i >= 0; i--) {\n        trimNode(dom, children[i], rootNode);\n      }\n      if (isElement$5(node)) {\n        var currentChildren = node.childNodes;\n        if (currentChildren.length === 1 && isBookmarkNode$2(currentChildren[0])) {\n          node.parentNode.insertBefore(currentChildren[0], node);\n        }\n      }\n      if (!isDocument(node) && !isContent$1(node, rootNode) && !isKeepElement(node) && !isKeepTextNode(node, rootNode)) {\n        dom.remove(node);\n      }\n      return node;\n    };\n\n    var makeMap$3 = Tools.makeMap;\n    var attrsCharsRegExp = /[&<>\\\"\\u0060\\u007E-\\uD7FF\\uE000-\\uFFEF]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/g;\n    var textCharsRegExp = /[<>&\\u007E-\\uD7FF\\uE000-\\uFFEF]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/g;\n    var rawCharsRegExp = /[<>&\\\"\\']/g;\n    var entityRegExp = /&#([a-z0-9]+);?|&([a-z0-9]+);/gi;\n    var asciiMap = {\n      128: '\\u20AC',\n      130: '\\u201A',\n      131: '\\u0192',\n      132: '\\u201E',\n      133: '\\u2026',\n      134: '\\u2020',\n      135: '\\u2021',\n      136: '\\u02c6',\n      137: '\\u2030',\n      138: '\\u0160',\n      139: '\\u2039',\n      140: '\\u0152',\n      142: '\\u017d',\n      145: '\\u2018',\n      146: '\\u2019',\n      147: '\\u201C',\n      148: '\\u201D',\n      149: '\\u2022',\n      150: '\\u2013',\n      151: '\\u2014',\n      152: '\\u02DC',\n      153: '\\u2122',\n      154: '\\u0161',\n      155: '\\u203A',\n      156: '\\u0153',\n      158: '\\u017e',\n      159: '\\u0178'\n    };\n    var baseEntities = {\n      '\"': '&quot;',\n      '\\'': '&#39;',\n      '<': '&lt;',\n      '>': '&gt;',\n      '&': '&amp;',\n      '`': '&#96;'\n    };\n    var reverseEntities = {\n      '&lt;': '<',\n      '&gt;': '>',\n      '&amp;': '&',\n      '&quot;': '\"',\n      '&apos;': '\\''\n    };\n    var nativeDecode = function (text) {\n      var elm = SugarElement.fromTag('div').dom;\n      elm.innerHTML = text;\n      return elm.textContent || elm.innerText || text;\n    };\n    var buildEntitiesLookup = function (items, radix) {\n      var i, chr, entity;\n      var lookup = {};\n      if (items) {\n        items = items.split(',');\n        radix = radix || 10;\n        for (i = 0; i < items.length; i += 2) {\n          chr = String.fromCharCode(parseInt(items[i], radix));\n          if (!baseEntities[chr]) {\n            entity = '&' + items[i + 1] + ';';\n            lookup[chr] = entity;\n            lookup[entity] = chr;\n          }\n        }\n        return lookup;\n      }\n    };\n    var namedEntities = buildEntitiesLookup('50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,' + '5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,' + '5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,' + '5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,' + '68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,' + '6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,' + '6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,' + '75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,' + '7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,' + '7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,' + 'sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,' + 'st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,' + 't9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,' + 'tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,' + 'u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,' + '81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,' + '8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,' + '8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,' + '8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,' + '8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,' + 'nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,' + 'rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,' + 'Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,' + '80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,' + '811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro', 32);\n    var encodeRaw = function (text, attr) {\n      return text.replace(attr ? attrsCharsRegExp : textCharsRegExp, function (chr) {\n        return baseEntities[chr] || chr;\n      });\n    };\n    var encodeAllRaw = function (text) {\n      return ('' + text).replace(rawCharsRegExp, function (chr) {\n        return baseEntities[chr] || chr;\n      });\n    };\n    var encodeNumeric = function (text, attr) {\n      return text.replace(attr ? attrsCharsRegExp : textCharsRegExp, function (chr) {\n        if (chr.length > 1) {\n          return '&#' + ((chr.charCodeAt(0) - 55296) * 1024 + (chr.charCodeAt(1) - 56320) + 65536) + ';';\n        }\n        return baseEntities[chr] || '&#' + chr.charCodeAt(0) + ';';\n      });\n    };\n    var encodeNamed = function (text, attr, entities) {\n      entities = entities || namedEntities;\n      return text.replace(attr ? attrsCharsRegExp : textCharsRegExp, function (chr) {\n        return baseEntities[chr] || entities[chr] || chr;\n      });\n    };\n    var getEncodeFunc = function (name, entities) {\n      var entitiesMap = buildEntitiesLookup(entities) || namedEntities;\n      var encodeNamedAndNumeric = function (text, attr) {\n        return text.replace(attr ? attrsCharsRegExp : textCharsRegExp, function (chr) {\n          if (baseEntities[chr] !== undefined) {\n            return baseEntities[chr];\n          }\n          if (entitiesMap[chr] !== undefined) {\n            return entitiesMap[chr];\n          }\n          if (chr.length > 1) {\n            return '&#' + ((chr.charCodeAt(0) - 55296) * 1024 + (chr.charCodeAt(1) - 56320) + 65536) + ';';\n          }\n          return '&#' + chr.charCodeAt(0) + ';';\n        });\n      };\n      var encodeCustomNamed = function (text, attr) {\n        return encodeNamed(text, attr, entitiesMap);\n      };\n      var nameMap = makeMap$3(name.replace(/\\+/g, ','));\n      if (nameMap.named && nameMap.numeric) {\n        return encodeNamedAndNumeric;\n      }\n      if (nameMap.named) {\n        if (entities) {\n          return encodeCustomNamed;\n        }\n        return encodeNamed;\n      }\n      if (nameMap.numeric) {\n        return encodeNumeric;\n      }\n      return encodeRaw;\n    };\n    var decode = function (text) {\n      return text.replace(entityRegExp, function (all, numeric) {\n        if (numeric) {\n          if (numeric.charAt(0).toLowerCase() === 'x') {\n            numeric = parseInt(numeric.substr(1), 16);\n          } else {\n            numeric = parseInt(numeric, 10);\n          }\n          if (numeric > 65535) {\n            numeric -= 65536;\n            return String.fromCharCode(55296 + (numeric >> 10), 56320 + (numeric & 1023));\n          }\n          return asciiMap[numeric] || String.fromCharCode(numeric);\n        }\n        return reverseEntities[all] || namedEntities[all] || nativeDecode(all);\n      });\n    };\n    var Entities = {\n      encodeRaw: encodeRaw,\n      encodeAllRaw: encodeAllRaw,\n      encodeNumeric: encodeNumeric,\n      encodeNamed: encodeNamed,\n      getEncodeFunc: getEncodeFunc,\n      decode: decode\n    };\n\n    var mapCache = {}, dummyObj = {};\n    var makeMap$2 = Tools.makeMap, each$h = Tools.each, extend$5 = Tools.extend, explode$3 = Tools.explode, inArray$2 = Tools.inArray;\n    var split$1 = function (items, delim) {\n      items = Tools.trim(items);\n      return items ? items.split(delim || ' ') : [];\n    };\n    var createMap = function (defaultValue, extendWith) {\n      var value = makeMap$2(defaultValue, ' ', makeMap$2(defaultValue.toUpperCase(), ' '));\n      return extend$5(value, extendWith);\n    };\n    var getTextRootBlockElements = function (schema) {\n      return createMap('td th li dt dd figcaption caption details summary', schema.getTextBlockElements());\n    };\n    var compileSchema = function (type) {\n      var schema = {};\n      var globalAttributes, blockContent;\n      var phrasingContent, flowContent, html4BlockContent, html4PhrasingContent;\n      var add = function (name, attributes, children) {\n        var ni, attributesOrder, element;\n        var arrayToMap = function (array, obj) {\n          var map = {};\n          var i, l;\n          for (i = 0, l = array.length; i < l; i++) {\n            map[array[i]] = obj || {};\n          }\n          return map;\n        };\n        children = children || [];\n        attributes = attributes || '';\n        if (typeof children === 'string') {\n          children = split$1(children);\n        }\n        var names = split$1(name);\n        ni = names.length;\n        while (ni--) {\n          attributesOrder = split$1([\n            globalAttributes,\n            attributes\n          ].join(' '));\n          element = {\n            attributes: arrayToMap(attributesOrder),\n            attributesOrder: attributesOrder,\n            children: arrayToMap(children, dummyObj)\n          };\n          schema[names[ni]] = element;\n        }\n      };\n      var addAttrs = function (name, attributes) {\n        var ni, schemaItem, i, l;\n        var names = split$1(name);\n        ni = names.length;\n        var attrs = split$1(attributes);\n        while (ni--) {\n          schemaItem = schema[names[ni]];\n          for (i = 0, l = attrs.length; i < l; i++) {\n            schemaItem.attributes[attrs[i]] = {};\n            schemaItem.attributesOrder.push(attrs[i]);\n          }\n        }\n      };\n      if (mapCache[type]) {\n        return mapCache[type];\n      }\n      globalAttributes = 'id accesskey class dir lang style tabindex title role';\n      blockContent = 'address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul';\n      phrasingContent = 'a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd ' + 'label map noscript object q s samp script select small span strong sub sup ' + 'textarea u var #text #comment';\n      if (type !== 'html4') {\n        globalAttributes += ' contenteditable contextmenu draggable dropzone ' + 'hidden spellcheck translate';\n        blockContent += ' article aside details dialog figure main header footer hgroup section nav';\n        phrasingContent += ' audio canvas command datalist mark meter output picture ' + 'progress time wbr video ruby bdi keygen';\n      }\n      if (type !== 'html5-strict') {\n        globalAttributes += ' xml:lang';\n        html4PhrasingContent = 'acronym applet basefont big font strike tt';\n        phrasingContent = [\n          phrasingContent,\n          html4PhrasingContent\n        ].join(' ');\n        each$h(split$1(html4PhrasingContent), function (name) {\n          add(name, '', phrasingContent);\n        });\n        html4BlockContent = 'center dir isindex noframes';\n        blockContent = [\n          blockContent,\n          html4BlockContent\n        ].join(' ');\n        flowContent = [\n          blockContent,\n          phrasingContent\n        ].join(' ');\n        each$h(split$1(html4BlockContent), function (name) {\n          add(name, '', flowContent);\n        });\n      }\n      flowContent = flowContent || [\n        blockContent,\n        phrasingContent\n      ].join(' ');\n      add('html', 'manifest', 'head body');\n      add('head', '', 'base command link meta noscript script style title');\n      add('title hr noscript br');\n      add('base', 'href target');\n      add('link', 'href rel media hreflang type sizes hreflang');\n      add('meta', 'name http-equiv content charset');\n      add('style', 'media type scoped');\n      add('script', 'src async defer type charset');\n      add('body', 'onafterprint onbeforeprint onbeforeunload onblur onerror onfocus ' + 'onhashchange onload onmessage onoffline ononline onpagehide onpageshow ' + 'onpopstate onresize onscroll onstorage onunload', flowContent);\n      add('address dt dd div caption', '', flowContent);\n      add('h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn', '', phrasingContent);\n      add('blockquote', 'cite', flowContent);\n      add('ol', 'reversed start type', 'li');\n      add('ul', '', 'li');\n      add('li', 'value', flowContent);\n      add('dl', '', 'dt dd');\n      add('a', 'href target rel media hreflang type', phrasingContent);\n      add('q', 'cite', phrasingContent);\n      add('ins del', 'cite datetime', flowContent);\n      add('img', 'src sizes srcset alt usemap ismap width height');\n      add('iframe', 'src name width height', flowContent);\n      add('embed', 'src type width height');\n      add('object', 'data type typemustmatch name usemap form width height', [\n        flowContent,\n        'param'\n      ].join(' '));\n      add('param', 'name value');\n      add('map', 'name', [\n        flowContent,\n        'area'\n      ].join(' '));\n      add('area', 'alt coords shape href target rel media hreflang type');\n      add('table', 'border', 'caption colgroup thead tfoot tbody tr' + (type === 'html4' ? ' col' : ''));\n      add('colgroup', 'span', 'col');\n      add('col', 'span');\n      add('tbody thead tfoot', '', 'tr');\n      add('tr', '', 'td th');\n      add('td', 'colspan rowspan headers', flowContent);\n      add('th', 'colspan rowspan headers scope abbr', flowContent);\n      add('form', 'accept-charset action autocomplete enctype method name novalidate target', flowContent);\n      add('fieldset', 'disabled form name', [\n        flowContent,\n        'legend'\n      ].join(' '));\n      add('label', 'form for', phrasingContent);\n      add('input', 'accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate ' + 'formtarget height list max maxlength min multiple name pattern readonly required size src step type value width');\n      add('button', 'disabled form formaction formenctype formmethod formnovalidate formtarget name type value', type === 'html4' ? flowContent : phrasingContent);\n      add('select', 'disabled form multiple name required size', 'option optgroup');\n      add('optgroup', 'disabled label', 'option');\n      add('option', 'disabled label selected value');\n      add('textarea', 'cols dirname disabled form maxlength name readonly required rows wrap');\n      add('menu', 'type label', [\n        flowContent,\n        'li'\n      ].join(' '));\n      add('noscript', '', flowContent);\n      if (type !== 'html4') {\n        add('wbr');\n        add('ruby', '', [\n          phrasingContent,\n          'rt rp'\n        ].join(' '));\n        add('figcaption', '', flowContent);\n        add('mark rt rp summary bdi', '', phrasingContent);\n        add('canvas', 'width height', flowContent);\n        add('video', 'src crossorigin poster preload autoplay mediagroup loop ' + 'muted controls width height buffered', [\n          flowContent,\n          'track source'\n        ].join(' '));\n        add('audio', 'src crossorigin preload autoplay mediagroup loop muted controls ' + 'buffered volume', [\n          flowContent,\n          'track source'\n        ].join(' '));\n        add('picture', '', 'img source');\n        add('source', 'src srcset type media sizes');\n        add('track', 'kind src srclang label default');\n        add('datalist', '', [\n          phrasingContent,\n          'option'\n        ].join(' '));\n        add('article section nav aside main header footer', '', flowContent);\n        add('hgroup', '', 'h1 h2 h3 h4 h5 h6');\n        add('figure', '', [\n          flowContent,\n          'figcaption'\n        ].join(' '));\n        add('time', 'datetime', phrasingContent);\n        add('dialog', 'open', flowContent);\n        add('command', 'type label icon disabled checked radiogroup command');\n        add('output', 'for form name', phrasingContent);\n        add('progress', 'value max', phrasingContent);\n        add('meter', 'value min max low high optimum', phrasingContent);\n        add('details', 'open', [\n          flowContent,\n          'summary'\n        ].join(' '));\n        add('keygen', 'autofocus challenge disabled form keytype name');\n      }\n      if (type !== 'html5-strict') {\n        addAttrs('script', 'language xml:space');\n        addAttrs('style', 'xml:space');\n        addAttrs('object', 'declare classid code codebase codetype archive standby align border hspace vspace');\n        addAttrs('embed', 'align name hspace vspace');\n        addAttrs('param', 'valuetype type');\n        addAttrs('a', 'charset name rev shape coords');\n        addAttrs('br', 'clear');\n        addAttrs('applet', 'codebase archive code object alt name width height align hspace vspace');\n        addAttrs('img', 'name longdesc align border hspace vspace');\n        addAttrs('iframe', 'longdesc frameborder marginwidth marginheight scrolling align');\n        addAttrs('font basefont', 'size color face');\n        addAttrs('input', 'usemap align');\n        addAttrs('select');\n        addAttrs('textarea');\n        addAttrs('h1 h2 h3 h4 h5 h6 div p legend caption', 'align');\n        addAttrs('ul', 'type compact');\n        addAttrs('li', 'type');\n        addAttrs('ol dl menu dir', 'compact');\n        addAttrs('pre', 'width xml:space');\n        addAttrs('hr', 'align noshade size width');\n        addAttrs('isindex', 'prompt');\n        addAttrs('table', 'summary width frame rules cellspacing cellpadding align bgcolor');\n        addAttrs('col', 'width align char charoff valign');\n        addAttrs('colgroup', 'width align char charoff valign');\n        addAttrs('thead', 'align char charoff valign');\n        addAttrs('tr', 'align char charoff valign bgcolor');\n        addAttrs('th', 'axis align char charoff valign nowrap bgcolor width height');\n        addAttrs('form', 'accept');\n        addAttrs('td', 'abbr axis scope align char charoff valign nowrap bgcolor width height');\n        addAttrs('tfoot', 'align char charoff valign');\n        addAttrs('tbody', 'align char charoff valign');\n        addAttrs('area', 'nohref');\n        addAttrs('body', 'background bgcolor text link vlink alink');\n      }\n      if (type !== 'html4') {\n        addAttrs('input button select textarea', 'autofocus');\n        addAttrs('input textarea', 'placeholder');\n        addAttrs('a', 'download');\n        addAttrs('link script img', 'crossorigin');\n        addAttrs('img', 'loading');\n        addAttrs('iframe', 'sandbox seamless allowfullscreen loading');\n      }\n      each$h(split$1('a form meter progress dfn'), function (name) {\n        if (schema[name]) {\n          delete schema[name].children[name];\n        }\n      });\n      delete schema.caption.children.table;\n      delete schema.script;\n      mapCache[type] = schema;\n      return schema;\n    };\n    var compileElementMap = function (value, mode) {\n      var styles;\n      if (value) {\n        styles = {};\n        if (typeof value === 'string') {\n          value = { '*': value };\n        }\n        each$h(value, function (value, key) {\n          styles[key] = styles[key.toUpperCase()] = mode === 'map' ? makeMap$2(value, /[, ]/) : explode$3(value, /[, ]/);\n        });\n      }\n      return styles;\n    };\n    var Schema = function (settings) {\n      var elements = {};\n      var children = {};\n      var patternElements = [];\n      var customElementsMap = {}, specialElements = {};\n      var createLookupTable = function (option, defaultValue, extendWith) {\n        var value = settings[option];\n        if (!value) {\n          value = mapCache[option];\n          if (!value) {\n            value = createMap(defaultValue, extendWith);\n            mapCache[option] = value;\n          }\n        } else {\n          value = makeMap$2(value, /[, ]/, makeMap$2(value.toUpperCase(), /[, ]/));\n        }\n        return value;\n      };\n      settings = settings || {};\n      var schemaItems = compileSchema(settings.schema);\n      if (settings.verify_html === false) {\n        settings.valid_elements = '*[*]';\n      }\n      var validStyles = compileElementMap(settings.valid_styles);\n      var invalidStyles = compileElementMap(settings.invalid_styles, 'map');\n      var validClasses = compileElementMap(settings.valid_classes, 'map');\n      var whiteSpaceElementsMap = createLookupTable('whitespace_elements', 'pre script noscript style textarea video audio iframe object code');\n      var selfClosingElementsMap = createLookupTable('self_closing_elements', 'colgroup dd dt li option p td tfoot th thead tr');\n      var shortEndedElementsMap = createLookupTable('short_ended_elements', 'area base basefont br col frame hr img input isindex link ' + 'meta param embed source wbr track');\n      var boolAttrMap = createLookupTable('boolean_attributes', 'checked compact declare defer disabled ismap multiple nohref noresize ' + 'noshade nowrap readonly selected autoplay loop controls');\n      var nonEmptyOrMoveCaretBeforeOnEnter = 'td th iframe video audio object script code';\n      var nonEmptyElementsMap = createLookupTable('non_empty_elements', nonEmptyOrMoveCaretBeforeOnEnter + ' pre', shortEndedElementsMap);\n      var moveCaretBeforeOnEnterElementsMap = createLookupTable('move_caret_before_on_enter_elements', nonEmptyOrMoveCaretBeforeOnEnter + ' table', shortEndedElementsMap);\n      var textBlockElementsMap = createLookupTable('text_block_elements', 'h1 h2 h3 h4 h5 h6 p div address pre form ' + 'blockquote center dir fieldset header footer article section hgroup aside main nav figure');\n      var blockElementsMap = createLookupTable('block_elements', 'hr table tbody thead tfoot ' + 'th tr td li ol ul caption dl dt dd noscript menu isindex option ' + 'datalist select optgroup figcaption details summary', textBlockElementsMap);\n      var textInlineElementsMap = createLookupTable('text_inline_elements', 'span strong b em i font s strike u var cite ' + 'dfn code mark q sup sub samp');\n      each$h((settings.special || 'script noscript iframe noframes noembed title style textarea xmp').split(' '), function (name) {\n        specialElements[name] = new RegExp('</' + name + '[^>]*>', 'gi');\n      });\n      var patternToRegExp = function (str) {\n        return new RegExp('^' + str.replace(/([?+*])/g, '.$1') + '$');\n      };\n      var addValidElements = function (validElements) {\n        var ei, el, ai, al, matches, element, attr, attrData, elementName, attrName, attrType, attributes, attributesOrder, prefix, outputName, globalAttributes, globalAttributesOrder, value;\n        var elementRuleRegExp = /^([#+\\-])?([^\\[!\\/]+)(?:\\/([^\\[!]+))?(?:(!?)\\[([^\\]]+)])?$/, attrRuleRegExp = /^([!\\-])?(\\w+[\\\\:]:\\w+|[^=:<]+)?(?:([=:<])(.*))?$/, hasPatternsRegExp = /[*?+]/;\n        if (validElements) {\n          var validElementsArr = split$1(validElements, ',');\n          if (elements['@']) {\n            globalAttributes = elements['@'].attributes;\n            globalAttributesOrder = elements['@'].attributesOrder;\n          }\n          for (ei = 0, el = validElementsArr.length; ei < el; ei++) {\n            matches = elementRuleRegExp.exec(validElementsArr[ei]);\n            if (matches) {\n              prefix = matches[1];\n              elementName = matches[2];\n              outputName = matches[3];\n              attrData = matches[5];\n              attributes = {};\n              attributesOrder = [];\n              element = {\n                attributes: attributes,\n                attributesOrder: attributesOrder\n              };\n              if (prefix === '#') {\n                element.paddEmpty = true;\n              }\n              if (prefix === '-') {\n                element.removeEmpty = true;\n              }\n              if (matches[4] === '!') {\n                element.removeEmptyAttrs = true;\n              }\n              if (globalAttributes) {\n                each$j(globalAttributes, function (value, key) {\n                  attributes[key] = value;\n                });\n                attributesOrder.push.apply(attributesOrder, globalAttributesOrder);\n              }\n              if (attrData) {\n                attrData = split$1(attrData, '|');\n                for (ai = 0, al = attrData.length; ai < al; ai++) {\n                  matches = attrRuleRegExp.exec(attrData[ai]);\n                  if (matches) {\n                    attr = {};\n                    attrType = matches[1];\n                    attrName = matches[2].replace(/[\\\\:]:/g, ':');\n                    prefix = matches[3];\n                    value = matches[4];\n                    if (attrType === '!') {\n                      element.attributesRequired = element.attributesRequired || [];\n                      element.attributesRequired.push(attrName);\n                      attr.required = true;\n                    }\n                    if (attrType === '-') {\n                      delete attributes[attrName];\n                      attributesOrder.splice(inArray$2(attributesOrder, attrName), 1);\n                      continue;\n                    }\n                    if (prefix) {\n                      if (prefix === '=') {\n                        element.attributesDefault = element.attributesDefault || [];\n                        element.attributesDefault.push({\n                          name: attrName,\n                          value: value\n                        });\n                        attr.defaultValue = value;\n                      }\n                      if (prefix === ':') {\n                        element.attributesForced = element.attributesForced || [];\n                        element.attributesForced.push({\n                          name: attrName,\n                          value: value\n                        });\n                        attr.forcedValue = value;\n                      }\n                      if (prefix === '<') {\n                        attr.validValues = makeMap$2(value, '?');\n                      }\n                    }\n                    if (hasPatternsRegExp.test(attrName)) {\n                      element.attributePatterns = element.attributePatterns || [];\n                      attr.pattern = patternToRegExp(attrName);\n                      element.attributePatterns.push(attr);\n                    } else {\n                      if (!attributes[attrName]) {\n                        attributesOrder.push(attrName);\n                      }\n                      attributes[attrName] = attr;\n                    }\n                  }\n                }\n              }\n              if (!globalAttributes && elementName === '@') {\n                globalAttributes = attributes;\n                globalAttributesOrder = attributesOrder;\n              }\n              if (outputName) {\n                element.outputName = elementName;\n                elements[outputName] = element;\n              }\n              if (hasPatternsRegExp.test(elementName)) {\n                element.pattern = patternToRegExp(elementName);\n                patternElements.push(element);\n              } else {\n                elements[elementName] = element;\n              }\n            }\n          }\n        }\n      };\n      var setValidElements = function (validElements) {\n        elements = {};\n        patternElements = [];\n        addValidElements(validElements);\n        each$h(schemaItems, function (element, name) {\n          children[name] = element.children;\n        });\n      };\n      var addCustomElements = function (customElements) {\n        var customElementRegExp = /^(~)?(.+)$/;\n        if (customElements) {\n          mapCache.text_block_elements = mapCache.block_elements = null;\n          each$h(split$1(customElements, ','), function (rule) {\n            var matches = customElementRegExp.exec(rule), inline = matches[1] === '~', cloneName = inline ? 'span' : 'div', name = matches[2];\n            children[name] = children[cloneName];\n            customElementsMap[name] = cloneName;\n            if (!inline) {\n              blockElementsMap[name.toUpperCase()] = {};\n              blockElementsMap[name] = {};\n            }\n            if (!elements[name]) {\n              var customRule = elements[cloneName];\n              customRule = extend$5({}, customRule);\n              delete customRule.removeEmptyAttrs;\n              delete customRule.removeEmpty;\n              elements[name] = customRule;\n            }\n            each$h(children, function (element, elmName) {\n              if (element[cloneName]) {\n                children[elmName] = element = extend$5({}, children[elmName]);\n                element[name] = element[cloneName];\n              }\n            });\n          });\n        }\n      };\n      var addValidChildren = function (validChildren) {\n        var childRuleRegExp = /^([+\\-]?)([A-Za-z0-9_\\-.\\u00b7\\u00c0-\\u00d6\\u00d8-\\u00f6\\u00f8-\\u037d\\u037f-\\u1fff\\u200c-\\u200d\\u203f-\\u2040\\u2070-\\u218f\\u2c00-\\u2fef\\u3001-\\ud7ff\\uf900-\\ufdcf\\ufdf0-\\ufffd]+)\\[([^\\]]+)]$/;\n        mapCache[settings.schema] = null;\n        if (validChildren) {\n          each$h(split$1(validChildren, ','), function (rule) {\n            var matches = childRuleRegExp.exec(rule);\n            var parent, prefix;\n            if (matches) {\n              prefix = matches[1];\n              if (prefix) {\n                parent = children[matches[2]];\n              } else {\n                parent = children[matches[2]] = { '#comment': {} };\n              }\n              parent = children[matches[2]];\n              each$h(split$1(matches[3], '|'), function (child) {\n                if (prefix === '-') {\n                  delete parent[child];\n                } else {\n                  parent[child] = {};\n                }\n              });\n            }\n          });\n        }\n      };\n      var getElementRule = function (name) {\n        var element = elements[name], i;\n        if (element) {\n          return element;\n        }\n        i = patternElements.length;\n        while (i--) {\n          element = patternElements[i];\n          if (element.pattern.test(name)) {\n            return element;\n          }\n        }\n      };\n      if (!settings.valid_elements) {\n        each$h(schemaItems, function (element, name) {\n          elements[name] = {\n            attributes: element.attributes,\n            attributesOrder: element.attributesOrder\n          };\n          children[name] = element.children;\n        });\n        if (settings.schema !== 'html5') {\n          each$h(split$1('strong/b em/i'), function (item) {\n            var items = split$1(item, '/');\n            elements[items[1]].outputName = items[0];\n          });\n        }\n        each$h(textInlineElementsMap, function (_val, name) {\n          if (elements[name]) {\n            if (settings.padd_empty_block_inline_children) {\n              elements[name].paddInEmptyBlock = true;\n            }\n            elements[name].removeEmpty = true;\n          }\n        });\n        each$h(split$1('ol ul blockquote a table tbody'), function (name) {\n          if (elements[name]) {\n            elements[name].removeEmpty = true;\n          }\n        });\n        each$h(split$1('p h1 h2 h3 h4 h5 h6 th td pre div address caption li'), function (name) {\n          elements[name].paddEmpty = true;\n        });\n        each$h(split$1('span'), function (name) {\n          elements[name].removeEmptyAttrs = true;\n        });\n      } else {\n        setValidElements(settings.valid_elements);\n      }\n      addCustomElements(settings.custom_elements);\n      addValidChildren(settings.valid_children);\n      addValidElements(settings.extended_valid_elements);\n      addValidChildren('+ol[ul|ol],+ul[ul|ol]');\n      each$h({\n        dd: 'dl',\n        dt: 'dl',\n        li: 'ul ol',\n        td: 'tr',\n        th: 'tr',\n        tr: 'tbody thead tfoot',\n        tbody: 'table',\n        thead: 'table',\n        tfoot: 'table',\n        legend: 'fieldset',\n        area: 'map',\n        param: 'video audio object'\n      }, function (parents, item) {\n        if (elements[item]) {\n          elements[item].parentsRequired = split$1(parents);\n        }\n      });\n      if (settings.invalid_elements) {\n        each$h(explode$3(settings.invalid_elements), function (item) {\n          if (elements[item]) {\n            delete elements[item];\n          }\n        });\n      }\n      if (!getElementRule('span')) {\n        addValidElements('span[!data-mce-type|*]');\n      }\n      var getValidStyles = constant(validStyles);\n      var getInvalidStyles = constant(invalidStyles);\n      var getValidClasses = constant(validClasses);\n      var getBoolAttrs = constant(boolAttrMap);\n      var getBlockElements = constant(blockElementsMap);\n      var getTextBlockElements = constant(textBlockElementsMap);\n      var getTextInlineElements = constant(textInlineElementsMap);\n      var getShortEndedElements = constant(shortEndedElementsMap);\n      var getSelfClosingElements = constant(selfClosingElementsMap);\n      var getNonEmptyElements = constant(nonEmptyElementsMap);\n      var getMoveCaretBeforeOnEnterElements = constant(moveCaretBeforeOnEnterElementsMap);\n      var getWhiteSpaceElements = constant(whiteSpaceElementsMap);\n      var getSpecialElements = constant(specialElements);\n      var isValidChild = function (name, child) {\n        var parent = children[name.toLowerCase()];\n        return !!(parent && parent[child.toLowerCase()]);\n      };\n      var isValid = function (name, attr) {\n        var attrPatterns, i;\n        var rule = getElementRule(name);\n        if (rule) {\n          if (attr) {\n            if (rule.attributes[attr]) {\n              return true;\n            }\n            attrPatterns = rule.attributePatterns;\n            if (attrPatterns) {\n              i = attrPatterns.length;\n              while (i--) {\n                if (attrPatterns[i].pattern.test(name)) {\n                  return true;\n                }\n              }\n            }\n          } else {\n            return true;\n          }\n        }\n        return false;\n      };\n      var getCustomElements = constant(customElementsMap);\n      return {\n        children: children,\n        elements: elements,\n        getValidStyles: getValidStyles,\n        getValidClasses: getValidClasses,\n        getBlockElements: getBlockElements,\n        getInvalidStyles: getInvalidStyles,\n        getShortEndedElements: getShortEndedElements,\n        getTextBlockElements: getTextBlockElements,\n        getTextInlineElements: getTextInlineElements,\n        getBoolAttrs: getBoolAttrs,\n        getElementRule: getElementRule,\n        getSelfClosingElements: getSelfClosingElements,\n        getNonEmptyElements: getNonEmptyElements,\n        getMoveCaretBeforeOnEnterElements: getMoveCaretBeforeOnEnterElements,\n        getWhiteSpaceElements: getWhiteSpaceElements,\n        getSpecialElements: getSpecialElements,\n        isValidChild: isValidChild,\n        isValid: isValid,\n        getCustomElements: getCustomElements,\n        addValidElements: addValidElements,\n        setValidElements: setValidElements,\n        addCustomElements: addCustomElements,\n        addValidChildren: addValidChildren\n      };\n    };\n\n    var toHex = function (match, r, g, b) {\n      var hex = function (val) {\n        val = parseInt(val, 10).toString(16);\n        return val.length > 1 ? val : '0' + val;\n      };\n      return '#' + hex(r) + hex(g) + hex(b);\n    };\n    var Styles = function (settings, schema) {\n      var _this = this;\n      var rgbRegExp = /rgb\\s*\\(\\s*([0-9]+)\\s*,\\s*([0-9]+)\\s*,\\s*([0-9]+)\\s*\\)/gi;\n      var urlOrStrRegExp = /(?:url(?:(?:\\(\\s*\\\"([^\\\"]+)\\\"\\s*\\))|(?:\\(\\s*\\'([^\\']+)\\'\\s*\\))|(?:\\(\\s*([^)\\s]+)\\s*\\))))|(?:\\'([^\\']+)\\')|(?:\\\"([^\\\"]+)\\\")/gi;\n      var styleRegExp = /\\s*([^:]+):\\s*([^;]+);?/g;\n      var trimRightRegExp = /\\s+$/;\n      var i;\n      var encodingLookup = {};\n      var validStyles;\n      var invalidStyles;\n      var invisibleChar = zeroWidth;\n      settings = settings || {};\n      if (schema) {\n        validStyles = schema.getValidStyles();\n        invalidStyles = schema.getInvalidStyles();\n      }\n      var encodingItems = ('\\\\\" \\\\\\' \\\\; \\\\: ; : ' + invisibleChar).split(' ');\n      for (i = 0; i < encodingItems.length; i++) {\n        encodingLookup[encodingItems[i]] = invisibleChar + i;\n        encodingLookup[invisibleChar + i] = encodingItems[i];\n      }\n      return {\n        toHex: function (color) {\n          return color.replace(rgbRegExp, toHex);\n        },\n        parse: function (css) {\n          var styles = {};\n          var matches, name, value, isEncoded;\n          var urlConverter = settings.url_converter;\n          var urlConverterScope = settings.url_converter_scope || _this;\n          var compress = function (prefix, suffix, noJoin) {\n            var top = styles[prefix + '-top' + suffix];\n            if (!top) {\n              return;\n            }\n            var right = styles[prefix + '-right' + suffix];\n            if (!right) {\n              return;\n            }\n            var bottom = styles[prefix + '-bottom' + suffix];\n            if (!bottom) {\n              return;\n            }\n            var left = styles[prefix + '-left' + suffix];\n            if (!left) {\n              return;\n            }\n            var box = [\n              top,\n              right,\n              bottom,\n              left\n            ];\n            i = box.length - 1;\n            while (i--) {\n              if (box[i] !== box[i + 1]) {\n                break;\n              }\n            }\n            if (i > -1 && noJoin) {\n              return;\n            }\n            styles[prefix + suffix] = i === -1 ? box[0] : box.join(' ');\n            delete styles[prefix + '-top' + suffix];\n            delete styles[prefix + '-right' + suffix];\n            delete styles[prefix + '-bottom' + suffix];\n            delete styles[prefix + '-left' + suffix];\n          };\n          var canCompress = function (key) {\n            var value = styles[key], i;\n            if (!value) {\n              return;\n            }\n            value = value.split(' ');\n            i = value.length;\n            while (i--) {\n              if (value[i] !== value[0]) {\n                return false;\n              }\n            }\n            styles[key] = value[0];\n            return true;\n          };\n          var compress2 = function (target, a, b, c) {\n            if (!canCompress(a)) {\n              return;\n            }\n            if (!canCompress(b)) {\n              return;\n            }\n            if (!canCompress(c)) {\n              return;\n            }\n            styles[target] = styles[a] + ' ' + styles[b] + ' ' + styles[c];\n            delete styles[a];\n            delete styles[b];\n            delete styles[c];\n          };\n          var encode = function (str) {\n            isEncoded = true;\n            return encodingLookup[str];\n          };\n          var decode = function (str, keepSlashes) {\n            if (isEncoded) {\n              str = str.replace(/\\uFEFF[0-9]/g, function (str) {\n                return encodingLookup[str];\n              });\n            }\n            if (!keepSlashes) {\n              str = str.replace(/\\\\([\\'\\\";:])/g, '$1');\n            }\n            return str;\n          };\n          var decodeSingleHexSequence = function (escSeq) {\n            return String.fromCharCode(parseInt(escSeq.slice(1), 16));\n          };\n          var decodeHexSequences = function (value) {\n            return value.replace(/\\\\[0-9a-f]+/gi, decodeSingleHexSequence);\n          };\n          var processUrl = function (match, url, url2, url3, str, str2) {\n            str = str || str2;\n            if (str) {\n              str = decode(str);\n              return '\\'' + str.replace(/\\'/g, '\\\\\\'') + '\\'';\n            }\n            url = decode(url || url2 || url3);\n            if (!settings.allow_script_urls) {\n              var scriptUrl = url.replace(/[\\s\\r\\n]+/g, '');\n              if (/(java|vb)script:/i.test(scriptUrl)) {\n                return '';\n              }\n              if (!settings.allow_svg_data_urls && /^data:image\\/svg/i.test(scriptUrl)) {\n                return '';\n              }\n            }\n            if (urlConverter) {\n              url = urlConverter.call(urlConverterScope, url, 'style');\n            }\n            return 'url(\\'' + url.replace(/\\'/g, '\\\\\\'') + '\\')';\n          };\n          if (css) {\n            css = css.replace(/[\\u0000-\\u001F]/g, '');\n            css = css.replace(/\\\\[\\\"\\';:\\uFEFF]/g, encode).replace(/\\\"[^\\\"]+\\\"|\\'[^\\']+\\'/g, function (str) {\n              return str.replace(/[;:]/g, encode);\n            });\n            while (matches = styleRegExp.exec(css)) {\n              styleRegExp.lastIndex = matches.index + matches[0].length;\n              name = matches[1].replace(trimRightRegExp, '').toLowerCase();\n              value = matches[2].replace(trimRightRegExp, '');\n              if (name && value) {\n                name = decodeHexSequences(name);\n                value = decodeHexSequences(value);\n                if (name.indexOf(invisibleChar) !== -1 || name.indexOf('\"') !== -1) {\n                  continue;\n                }\n                if (!settings.allow_script_urls && (name === 'behavior' || /expression\\s*\\(|\\/\\*|\\*\\//.test(value))) {\n                  continue;\n                }\n                if (name === 'font-weight' && value === '700') {\n                  value = 'bold';\n                } else if (name === 'color' || name === 'background-color') {\n                  value = value.toLowerCase();\n                }\n                value = value.replace(rgbRegExp, toHex);\n                value = value.replace(urlOrStrRegExp, processUrl);\n                styles[name] = isEncoded ? decode(value, true) : value;\n              }\n            }\n            compress('border', '', true);\n            compress('border', '-width');\n            compress('border', '-color');\n            compress('border', '-style');\n            compress('padding', '');\n            compress('margin', '');\n            compress2('border', 'border-width', 'border-style', 'border-color');\n            if (styles.border === 'medium none') {\n              delete styles.border;\n            }\n            if (styles['border-image'] === 'none') {\n              delete styles['border-image'];\n            }\n          }\n          return styles;\n        },\n        serialize: function (styles, elementName) {\n          var css = '';\n          var serializeStyles = function (name) {\n            var value;\n            var styleList = validStyles[name];\n            if (styleList) {\n              for (var i_1 = 0, l = styleList.length; i_1 < l; i_1++) {\n                name = styleList[i_1];\n                value = styles[name];\n                if (value) {\n                  css += (css.length > 0 ? ' ' : '') + name + ': ' + value + ';';\n                }\n              }\n            }\n          };\n          var isValid = function (name, elementName) {\n            var styleMap = invalidStyles['*'];\n            if (styleMap && styleMap[name]) {\n              return false;\n            }\n            styleMap = invalidStyles[elementName];\n            return !(styleMap && styleMap[name]);\n          };\n          if (elementName && validStyles) {\n            serializeStyles('*');\n            serializeStyles(elementName);\n          } else {\n            each$j(styles, function (value, name) {\n              if (value && (!invalidStyles || isValid(name, elementName))) {\n                css += (css.length > 0 ? ' ' : '') + name + ': ' + value + ';';\n              }\n            });\n          }\n          return css;\n        }\n      };\n    };\n\n    var deprecated = {\n      keyLocation: true,\n      layerX: true,\n      layerY: true,\n      returnValue: true,\n      webkitMovementX: true,\n      webkitMovementY: true,\n      keyIdentifier: true,\n      mozPressure: true\n    };\n    var isNativeEvent = function (event) {\n      return event instanceof Event || isFunction(event.initEvent);\n    };\n    var hasIsDefaultPrevented = function (event) {\n      return event.isDefaultPrevented === always || event.isDefaultPrevented === never;\n    };\n    var needsNormalizing = function (event) {\n      return isNullable(event.preventDefault) || isNativeEvent(event);\n    };\n    var clone$2 = function (originalEvent, data) {\n      var event = data !== null && data !== void 0 ? data : {};\n      for (var name_1 in originalEvent) {\n        if (!has$2(deprecated, name_1)) {\n          event[name_1] = originalEvent[name_1];\n        }\n      }\n      if (isNonNullable(event.composedPath)) {\n        event.composedPath = function () {\n          return originalEvent.composedPath();\n        };\n      }\n      return event;\n    };\n    var normalize$3 = function (type, originalEvent, fallbackTarget, data) {\n      var _a;\n      var event = clone$2(originalEvent, data);\n      event.type = type;\n      if (isNullable(event.target)) {\n        event.target = (_a = event.srcElement) !== null && _a !== void 0 ? _a : fallbackTarget;\n      }\n      if (needsNormalizing(originalEvent)) {\n        event.preventDefault = function () {\n          event.defaultPrevented = true;\n          event.isDefaultPrevented = always;\n          if (isFunction(originalEvent.preventDefault)) {\n            originalEvent.preventDefault();\n          } else if (isNativeEvent(originalEvent)) {\n            originalEvent.returnValue = false;\n          }\n        };\n        event.stopPropagation = function () {\n          event.cancelBubble = true;\n          event.isPropagationStopped = always;\n          if (isFunction(originalEvent.stopPropagation)) {\n            originalEvent.stopPropagation();\n          } else if (isNativeEvent(originalEvent)) {\n            originalEvent.cancelBubble = true;\n          }\n        };\n        event.stopImmediatePropagation = function () {\n          event.isImmediatePropagationStopped = always;\n          event.stopPropagation();\n        };\n        if (!hasIsDefaultPrevented(event)) {\n          event.isDefaultPrevented = event.defaultPrevented === true ? always : never;\n          event.isPropagationStopped = event.cancelBubble === true ? always : never;\n          event.isImmediatePropagationStopped = never;\n        }\n      }\n      return event;\n    };\n\n    var eventExpandoPrefix = 'mce-data-';\n    var mouseEventRe = /^(?:mouse|contextmenu)|click/;\n    var addEvent = function (target, name, callback, capture) {\n      if (target.addEventListener) {\n        target.addEventListener(name, callback, capture || false);\n      } else if (target.attachEvent) {\n        target.attachEvent('on' + name, callback);\n      }\n    };\n    var removeEvent = function (target, name, callback, capture) {\n      if (target.removeEventListener) {\n        target.removeEventListener(name, callback, capture || false);\n      } else if (target.detachEvent) {\n        target.detachEvent('on' + name, callback);\n      }\n    };\n    var isMouseEvent = function (event) {\n      return isNonNullable(event) && mouseEventRe.test(event.type);\n    };\n    var fix = function (originalEvent, data) {\n      var event = normalize$3(originalEvent.type, originalEvent, document, data);\n      if (isMouseEvent(originalEvent) && isUndefined(originalEvent.pageX) && !isUndefined(originalEvent.clientX)) {\n        var eventDoc = event.target.ownerDocument || document;\n        var doc = eventDoc.documentElement;\n        var body = eventDoc.body;\n        var mouseEvent = event;\n        mouseEvent.pageX = originalEvent.clientX + (doc && doc.scrollLeft || body && body.scrollLeft || 0) - (doc && doc.clientLeft || body && body.clientLeft || 0);\n        mouseEvent.pageY = originalEvent.clientY + (doc && doc.scrollTop || body && body.scrollTop || 0) - (doc && doc.clientTop || body && body.clientTop || 0);\n      }\n      if (isUndefined(event.metaKey)) {\n        event.metaKey = false;\n      }\n      return event;\n    };\n    var bindOnReady = function (win, callback, eventUtils) {\n      var doc = win.document, event = { type: 'ready' };\n      if (eventUtils.domLoaded) {\n        callback(event);\n        return;\n      }\n      var isDocReady = function () {\n        return doc.readyState === 'complete' || doc.readyState === 'interactive' && doc.body;\n      };\n      var readyHandler = function () {\n        removeEvent(win, 'DOMContentLoaded', readyHandler);\n        removeEvent(win, 'load', readyHandler);\n        if (!eventUtils.domLoaded) {\n          eventUtils.domLoaded = true;\n          callback(event);\n        }\n        win = null;\n      };\n      if (isDocReady()) {\n        readyHandler();\n      } else {\n        addEvent(win, 'DOMContentLoaded', readyHandler);\n      }\n      if (!eventUtils.domLoaded) {\n        addEvent(win, 'load', readyHandler);\n      }\n    };\n    var EventUtils = function () {\n      function EventUtils() {\n        this.domLoaded = false;\n        this.events = {};\n        this.count = 1;\n        this.expando = eventExpandoPrefix + (+new Date()).toString(32);\n        this.hasMouseEnterLeave = 'onmouseenter' in document.documentElement;\n        this.hasFocusIn = 'onfocusin' in document.documentElement;\n        this.count = 1;\n      }\n      EventUtils.prototype.bind = function (target, names, callback, scope) {\n        var self = this;\n        var id, callbackList, i, name, fakeName, nativeHandler, capture;\n        var win = window;\n        var defaultNativeHandler = function (evt) {\n          self.executeHandlers(fix(evt || win.event), id);\n        };\n        if (!target || target.nodeType === 3 || target.nodeType === 8) {\n          return;\n        }\n        if (!target[self.expando]) {\n          id = self.count++;\n          target[self.expando] = id;\n          self.events[id] = {};\n        } else {\n          id = target[self.expando];\n        }\n        scope = scope || target;\n        var namesList = names.split(' ');\n        i = namesList.length;\n        while (i--) {\n          name = namesList[i];\n          nativeHandler = defaultNativeHandler;\n          fakeName = capture = false;\n          if (name === 'DOMContentLoaded') {\n            name = 'ready';\n          }\n          if (self.domLoaded && name === 'ready' && target.readyState === 'complete') {\n            callback.call(scope, fix({ type: name }));\n            continue;\n          }\n          if (!self.hasMouseEnterLeave) {\n            fakeName = self.mouseEnterLeave[name];\n            if (fakeName) {\n              nativeHandler = function (evt) {\n                var current = evt.currentTarget;\n                var related = evt.relatedTarget;\n                if (related && current.contains) {\n                  related = current.contains(related);\n                } else {\n                  while (related && related !== current) {\n                    related = related.parentNode;\n                  }\n                }\n                if (!related) {\n                  evt = fix(evt || win.event);\n                  evt.type = evt.type === 'mouseout' ? 'mouseleave' : 'mouseenter';\n                  evt.target = current;\n                  self.executeHandlers(evt, id);\n                }\n              };\n            }\n          }\n          if (!self.hasFocusIn && (name === 'focusin' || name === 'focusout')) {\n            capture = true;\n            fakeName = name === 'focusin' ? 'focus' : 'blur';\n            nativeHandler = function (evt) {\n              evt = fix(evt || win.event);\n              evt.type = evt.type === 'focus' ? 'focusin' : 'focusout';\n              self.executeHandlers(evt, id);\n            };\n          }\n          callbackList = self.events[id][name];\n          if (!callbackList) {\n            self.events[id][name] = callbackList = [{\n                func: callback,\n                scope: scope\n              }];\n            callbackList.fakeName = fakeName;\n            callbackList.capture = capture;\n            callbackList.nativeHandler = nativeHandler;\n            if (name === 'ready') {\n              bindOnReady(target, nativeHandler, self);\n            } else {\n              addEvent(target, fakeName || name, nativeHandler, capture);\n            }\n          } else {\n            if (name === 'ready' && self.domLoaded) {\n              callback(fix({ type: name }));\n            } else {\n              callbackList.push({\n                func: callback,\n                scope: scope\n              });\n            }\n          }\n        }\n        target = callbackList = null;\n        return callback;\n      };\n      EventUtils.prototype.unbind = function (target, names, callback) {\n        var callbackList, i, ci, name, eventMap;\n        if (!target || target.nodeType === 3 || target.nodeType === 8) {\n          return this;\n        }\n        var id = target[this.expando];\n        if (id) {\n          eventMap = this.events[id];\n          if (names) {\n            var namesList = names.split(' ');\n            i = namesList.length;\n            while (i--) {\n              name = namesList[i];\n              callbackList = eventMap[name];\n              if (callbackList) {\n                if (callback) {\n                  ci = callbackList.length;\n                  while (ci--) {\n                    if (callbackList[ci].func === callback) {\n                      var nativeHandler = callbackList.nativeHandler;\n                      var fakeName = callbackList.fakeName, capture = callbackList.capture;\n                      callbackList = callbackList.slice(0, ci).concat(callbackList.slice(ci + 1));\n                      callbackList.nativeHandler = nativeHandler;\n                      callbackList.fakeName = fakeName;\n                      callbackList.capture = capture;\n                      eventMap[name] = callbackList;\n                    }\n                  }\n                }\n                if (!callback || callbackList.length === 0) {\n                  delete eventMap[name];\n                  removeEvent(target, callbackList.fakeName || name, callbackList.nativeHandler, callbackList.capture);\n                }\n              }\n            }\n          } else {\n            each$j(eventMap, function (callbackList, name) {\n              removeEvent(target, callbackList.fakeName || name, callbackList.nativeHandler, callbackList.capture);\n            });\n            eventMap = {};\n          }\n          for (name in eventMap) {\n            if (has$2(eventMap, name)) {\n              return this;\n            }\n          }\n          delete this.events[id];\n          try {\n            delete target[this.expando];\n          } catch (ex) {\n            target[this.expando] = null;\n          }\n        }\n        return this;\n      };\n      EventUtils.prototype.fire = function (target, name, args) {\n        var id;\n        if (!target || target.nodeType === 3 || target.nodeType === 8) {\n          return this;\n        }\n        var event = fix({\n          type: name,\n          target: target\n        }, args);\n        do {\n          id = target[this.expando];\n          if (id) {\n            this.executeHandlers(event, id);\n          }\n          target = target.parentNode || target.ownerDocument || target.defaultView || target.parentWindow;\n        } while (target && !event.isPropagationStopped());\n        return this;\n      };\n      EventUtils.prototype.clean = function (target) {\n        var i, children;\n        if (!target || target.nodeType === 3 || target.nodeType === 8) {\n          return this;\n        }\n        if (target[this.expando]) {\n          this.unbind(target);\n        }\n        if (!target.getElementsByTagName) {\n          target = target.document;\n        }\n        if (target && target.getElementsByTagName) {\n          this.unbind(target);\n          children = target.getElementsByTagName('*');\n          i = children.length;\n          while (i--) {\n            target = children[i];\n            if (target[this.expando]) {\n              this.unbind(target);\n            }\n          }\n        }\n        return this;\n      };\n      EventUtils.prototype.destroy = function () {\n        this.events = {};\n      };\n      EventUtils.prototype.cancel = function (e) {\n        if (e) {\n          e.preventDefault();\n          e.stopImmediatePropagation();\n        }\n        return false;\n      };\n      EventUtils.prototype.executeHandlers = function (evt, id) {\n        var container = this.events[id];\n        var callbackList = container && container[evt.type];\n        if (callbackList) {\n          for (var i = 0, l = callbackList.length; i < l; i++) {\n            var callback = callbackList[i];\n            if (callback && callback.func.call(callback.scope, evt) === false) {\n              evt.preventDefault();\n            }\n            if (evt.isImmediatePropagationStopped()) {\n              return;\n            }\n          }\n        }\n      };\n      EventUtils.Event = new EventUtils();\n      return EventUtils;\n    }();\n\n    var support, Expr, getText, isXML, tokenize, compile, select$1, outermostContext, sortInput, hasDuplicate, setDocument, document$1, docElem, documentIsHTML, rbuggyQSA, rbuggyMatches, matches, contains, expando = 'sizzle' + -new Date(), preferredDoc = window.document, dirruns = 0, done = 0, classCache = createCache(), tokenCache = createCache(), compilerCache = createCache(), sortOrder = function (a, b) {\n        if (a === b) {\n          hasDuplicate = true;\n        }\n        return 0;\n      }, strundefined = typeof undefined, MAX_NEGATIVE = 1 << 31, hasOwn = {}.hasOwnProperty, arr = [], pop = arr.pop, push_native = arr.push, push$1 = arr.push, slice$1 = arr.slice, indexOf = arr.indexOf || function (elem) {\n        var i = 0, len = this.length;\n        for (; i < len; i++) {\n          if (this[i] === elem) {\n            return i;\n          }\n        }\n        return -1;\n      }, booleans = 'checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped', whitespace = '[\\\\x20\\\\t\\\\r\\\\n\\\\f]', identifier = '(?:\\\\\\\\.|[\\\\w-]|[^\\\\x00-\\\\xa0])+', attributes = '\\\\[' + whitespace + '*(' + identifier + ')(?:' + whitespace + '*([*^$|!~]?=)' + whitespace + '*(?:\\'((?:\\\\\\\\.|[^\\\\\\\\\\'])*)\\'|\"((?:\\\\\\\\.|[^\\\\\\\\\"])*)\"|(' + identifier + '))|)' + whitespace + '*\\\\]', pseudos = ':(' + identifier + ')(?:\\\\((' + '(\\'((?:\\\\\\\\.|[^\\\\\\\\\\'])*)\\'|\"((?:\\\\\\\\.|[^\\\\\\\\\"])*)\")|' + '((?:\\\\\\\\.|[^\\\\\\\\()[\\\\]]|' + attributes + ')*)|' + '.*' + ')\\\\)|)', rtrim = new RegExp('^' + whitespace + '+|((?:^|[^\\\\\\\\])(?:\\\\\\\\.)*)' + whitespace + '+$', 'g'), rcomma = new RegExp('^' + whitespace + '*,' + whitespace + '*'), rcombinators = new RegExp('^' + whitespace + '*([>+~]|' + whitespace + ')' + whitespace + '*'), rattributeQuotes = new RegExp('=' + whitespace + '*([^\\\\]\\'\"]*?)' + whitespace + '*\\\\]', 'g'), rpseudo = new RegExp(pseudos), ridentifier = new RegExp('^' + identifier + '$'), matchExpr = {\n        ID: new RegExp('^#(' + identifier + ')'),\n        CLASS: new RegExp('^\\\\.(' + identifier + ')'),\n        TAG: new RegExp('^(' + identifier + '|[*])'),\n        ATTR: new RegExp('^' + attributes),\n        PSEUDO: new RegExp('^' + pseudos),\n        CHILD: new RegExp('^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\\\(' + whitespace + '*(even|odd|(([+-]|)(\\\\d*)n|)' + whitespace + '*(?:([+-]|)' + whitespace + '*(\\\\d+)|))' + whitespace + '*\\\\)|)', 'i'),\n        bool: new RegExp('^(?:' + booleans + ')$', 'i'),\n        needsContext: new RegExp('^' + whitespace + '*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\\\(' + whitespace + '*((?:-\\\\d)?\\\\d*)' + whitespace + '*\\\\)|)(?=[^-]|$)', 'i')\n      }, rinputs = /^(?:input|select|textarea|button)$/i, rheader = /^h\\d$/i, rnative = /^[^{]+\\{\\s*\\[native \\w/, rquickExpr$1 = /^(?:#([\\w-]+)|(\\w+)|\\.([\\w-]+))$/, rsibling = /[+~]/, rescape = /'|\\\\/g, runescape = new RegExp('\\\\\\\\([\\\\da-f]{1,6}' + whitespace + '?|(' + whitespace + ')|.)', 'ig'), funescape = function (_, escaped, escapedWhitespace) {\n        var high = '0x' + escaped - 65536;\n        return high !== high || escapedWhitespace ? escaped : high < 0 ? String.fromCharCode(high + 65536) : String.fromCharCode(high >> 10 | 55296, high & 1023 | 56320);\n      };\n    try {\n      push$1.apply(arr = slice$1.call(preferredDoc.childNodes), preferredDoc.childNodes);\n      arr[preferredDoc.childNodes.length].nodeType;\n    } catch (e) {\n      push$1 = {\n        apply: arr.length ? function (target, els) {\n          push_native.apply(target, slice$1.call(els));\n        } : function (target, els) {\n          var j = target.length, i = 0;\n          while (target[j++] = els[i++]) {\n          }\n          target.length = j - 1;\n        }\n      };\n    }\n    var Sizzle = function (selector, context, results, seed) {\n      var match, elem, m, nodeType, i, groups, old, nid, newContext, newSelector;\n      if ((context ? context.ownerDocument || context : preferredDoc) !== document$1) {\n        setDocument(context);\n      }\n      context = context || document$1;\n      results = results || [];\n      if (!selector || typeof selector !== 'string') {\n        return results;\n      }\n      if ((nodeType = context.nodeType) !== 1 && nodeType !== 9) {\n        return [];\n      }\n      if (documentIsHTML && !seed) {\n        if (match = rquickExpr$1.exec(selector)) {\n          if (m = match[1]) {\n            if (nodeType === 9) {\n              elem = context.getElementById(m);\n              if (elem && elem.parentNode) {\n                if (elem.id === m) {\n                  results.push(elem);\n                  return results;\n                }\n              } else {\n                return results;\n              }\n            } else {\n              if (context.ownerDocument && (elem = context.ownerDocument.getElementById(m)) && contains(context, elem) && elem.id === m) {\n                results.push(elem);\n                return results;\n              }\n            }\n          } else if (match[2]) {\n            push$1.apply(results, context.getElementsByTagName(selector));\n            return results;\n          } else if ((m = match[3]) && support.getElementsByClassName) {\n            push$1.apply(results, context.getElementsByClassName(m));\n            return results;\n          }\n        }\n        if (support.qsa && (!rbuggyQSA || !rbuggyQSA.test(selector))) {\n          nid = old = expando;\n          newContext = context;\n          newSelector = nodeType === 9 && selector;\n          if (nodeType === 1 && context.nodeName.toLowerCase() !== 'object') {\n            groups = tokenize(selector);\n            if (old = context.getAttribute('id')) {\n              nid = old.replace(rescape, '\\\\$&');\n            } else {\n              context.setAttribute('id', nid);\n            }\n            nid = '[id=\\'' + nid + '\\'] ';\n            i = groups.length;\n            while (i--) {\n              groups[i] = nid + toSelector(groups[i]);\n            }\n            newContext = rsibling.test(selector) && testContext(context.parentNode) || context;\n            newSelector = groups.join(',');\n          }\n          if (newSelector) {\n            try {\n              push$1.apply(results, newContext.querySelectorAll(newSelector));\n              return results;\n            } catch (qsaError) {\n            } finally {\n              if (!old) {\n                context.removeAttribute('id');\n              }\n            }\n          }\n        }\n      }\n      return select$1(selector.replace(rtrim, '$1'), context, results, seed);\n    };\n    function createCache() {\n      var keys = [];\n      function cache(key, value) {\n        if (keys.push(key + ' ') > Expr.cacheLength) {\n          delete cache[keys.shift()];\n        }\n        return cache[key + ' '] = value;\n      }\n      return cache;\n    }\n    function markFunction(fn) {\n      fn[expando] = true;\n      return fn;\n    }\n    function siblingCheck(a, b) {\n      var cur = b && a, diff = cur && a.nodeType === 1 && b.nodeType === 1 && (~b.sourceIndex || MAX_NEGATIVE) - (~a.sourceIndex || MAX_NEGATIVE);\n      if (diff) {\n        return diff;\n      }\n      if (cur) {\n        while (cur = cur.nextSibling) {\n          if (cur === b) {\n            return -1;\n          }\n        }\n      }\n      return a ? 1 : -1;\n    }\n    function createInputPseudo(type) {\n      return function (elem) {\n        var name = elem.nodeName.toLowerCase();\n        return name === 'input' && elem.type === type;\n      };\n    }\n    function createButtonPseudo(type) {\n      return function (elem) {\n        var name = elem.nodeName.toLowerCase();\n        return (name === 'input' || name === 'button') && elem.type === type;\n      };\n    }\n    function createPositionalPseudo(fn) {\n      return markFunction(function (argument) {\n        argument = +argument;\n        return markFunction(function (seed, matches) {\n          var j, matchIndexes = fn([], seed.length, argument), i = matchIndexes.length;\n          while (i--) {\n            if (seed[j = matchIndexes[i]]) {\n              seed[j] = !(matches[j] = seed[j]);\n            }\n          }\n        });\n      });\n    }\n    function testContext(context) {\n      return context && typeof context.getElementsByTagName !== strundefined && context;\n    }\n    support = Sizzle.support = {};\n    isXML = Sizzle.isXML = function (elem) {\n      var documentElement = elem && (elem.ownerDocument || elem).documentElement;\n      return documentElement ? documentElement.nodeName !== 'HTML' : false;\n    };\n    setDocument = Sizzle.setDocument = function (node) {\n      var hasCompare, doc = node ? node.ownerDocument || node : preferredDoc, parent = doc.defaultView;\n      function getTop(win) {\n        try {\n          return win.top;\n        } catch (ex) {\n        }\n        return null;\n      }\n      if (doc === document$1 || doc.nodeType !== 9 || !doc.documentElement) {\n        return document$1;\n      }\n      document$1 = doc;\n      docElem = doc.documentElement;\n      documentIsHTML = !isXML(doc);\n      if (parent && parent !== getTop(parent)) {\n        if (parent.addEventListener) {\n          parent.addEventListener('unload', function () {\n            setDocument();\n          }, false);\n        } else if (parent.attachEvent) {\n          parent.attachEvent('onunload', function () {\n            setDocument();\n          });\n        }\n      }\n      support.attributes = true;\n      support.getElementsByTagName = true;\n      support.getElementsByClassName = rnative.test(doc.getElementsByClassName);\n      support.getById = true;\n      Expr.find.ID = function (id, context) {\n        if (typeof context.getElementById !== strundefined && documentIsHTML) {\n          var m = context.getElementById(id);\n          return m && m.parentNode ? [m] : [];\n        }\n      };\n      Expr.filter.ID = function (id) {\n        var attrId = id.replace(runescape, funescape);\n        return function (elem) {\n          return elem.getAttribute('id') === attrId;\n        };\n      };\n      Expr.find.TAG = support.getElementsByTagName ? function (tag, context) {\n        if (typeof context.getElementsByTagName !== strundefined) {\n          return context.getElementsByTagName(tag);\n        }\n      } : function (tag, context) {\n        var elem, tmp = [], i = 0, results = context.getElementsByTagName(tag);\n        if (tag === '*') {\n          while (elem = results[i++]) {\n            if (elem.nodeType === 1) {\n              tmp.push(elem);\n            }\n          }\n          return tmp;\n        }\n        return results;\n      };\n      Expr.find.CLASS = support.getElementsByClassName && function (className, context) {\n        if (documentIsHTML) {\n          return context.getElementsByClassName(className);\n        }\n      };\n      rbuggyMatches = [];\n      rbuggyQSA = [];\n      support.disconnectedMatch = true;\n      rbuggyQSA = rbuggyQSA.length && new RegExp(rbuggyQSA.join('|'));\n      rbuggyMatches = rbuggyMatches.length && new RegExp(rbuggyMatches.join('|'));\n      hasCompare = rnative.test(docElem.compareDocumentPosition);\n      contains = hasCompare || rnative.test(docElem.contains) ? function (a, b) {\n        var adown = a.nodeType === 9 ? a.documentElement : a, bup = b && b.parentNode;\n        return a === bup || !!(bup && bup.nodeType === 1 && (adown.contains ? adown.contains(bup) : a.compareDocumentPosition && a.compareDocumentPosition(bup) & 16));\n      } : function (a, b) {\n        if (b) {\n          while (b = b.parentNode) {\n            if (b === a) {\n              return true;\n            }\n          }\n        }\n        return false;\n      };\n      sortOrder = hasCompare ? function (a, b) {\n        if (a === b) {\n          hasDuplicate = true;\n          return 0;\n        }\n        var compare = !a.compareDocumentPosition - !b.compareDocumentPosition;\n        if (compare) {\n          return compare;\n        }\n        compare = (a.ownerDocument || a) === (b.ownerDocument || b) ? a.compareDocumentPosition(b) : 1;\n        if (compare & 1 || !support.sortDetached && b.compareDocumentPosition(a) === compare) {\n          if (a === doc || a.ownerDocument === preferredDoc && contains(preferredDoc, a)) {\n            return -1;\n          }\n          if (b === doc || b.ownerDocument === preferredDoc && contains(preferredDoc, b)) {\n            return 1;\n          }\n          return sortInput ? indexOf.call(sortInput, a) - indexOf.call(sortInput, b) : 0;\n        }\n        return compare & 4 ? -1 : 1;\n      } : function (a, b) {\n        if (a === b) {\n          hasDuplicate = true;\n          return 0;\n        }\n        var cur, i = 0, aup = a.parentNode, bup = b.parentNode, ap = [a], bp = [b];\n        if (!aup || !bup) {\n          return a === doc ? -1 : b === doc ? 1 : aup ? -1 : bup ? 1 : sortInput ? indexOf.call(sortInput, a) - indexOf.call(sortInput, b) : 0;\n        } else if (aup === bup) {\n          return siblingCheck(a, b);\n        }\n        cur = a;\n        while (cur = cur.parentNode) {\n          ap.unshift(cur);\n        }\n        cur = b;\n        while (cur = cur.parentNode) {\n          bp.unshift(cur);\n        }\n        while (ap[i] === bp[i]) {\n          i++;\n        }\n        return i ? siblingCheck(ap[i], bp[i]) : ap[i] === preferredDoc ? -1 : bp[i] === preferredDoc ? 1 : 0;\n      };\n      return doc;\n    };\n    Sizzle.matches = function (expr, elements) {\n      return Sizzle(expr, null, null, elements);\n    };\n    Sizzle.matchesSelector = function (elem, expr) {\n      if ((elem.ownerDocument || elem) !== document$1) {\n        setDocument(elem);\n      }\n      expr = expr.replace(rattributeQuotes, '=\\'$1\\']');\n      if (support.matchesSelector && documentIsHTML && (!rbuggyMatches || !rbuggyMatches.test(expr)) && (!rbuggyQSA || !rbuggyQSA.test(expr))) {\n        try {\n          var ret = matches.call(elem, expr);\n          if (ret || support.disconnectedMatch || elem.document && elem.document.nodeType !== 11) {\n            return ret;\n          }\n        } catch (e) {\n        }\n      }\n      return Sizzle(expr, document$1, null, [elem]).length > 0;\n    };\n    Sizzle.contains = function (context, elem) {\n      if ((context.ownerDocument || context) !== document$1) {\n        setDocument(context);\n      }\n      return contains(context, elem);\n    };\n    Sizzle.attr = function (elem, name) {\n      if ((elem.ownerDocument || elem) !== document$1) {\n        setDocument(elem);\n      }\n      var fn = Expr.attrHandle[name.toLowerCase()], val = fn && hasOwn.call(Expr.attrHandle, name.toLowerCase()) ? fn(elem, name, !documentIsHTML) : undefined;\n      return val !== undefined ? val : support.attributes || !documentIsHTML ? elem.getAttribute(name) : (val = elem.getAttributeNode(name)) && val.specified ? val.value : null;\n    };\n    Sizzle.error = function (msg) {\n      throw new Error('Syntax error, unrecognized expression: ' + msg);\n    };\n    Sizzle.uniqueSort = function (results) {\n      var elem, duplicates = [], j = 0, i = 0;\n      hasDuplicate = !support.detectDuplicates;\n      sortInput = !support.sortStable && results.slice(0);\n      results.sort(sortOrder);\n      if (hasDuplicate) {\n        while (elem = results[i++]) {\n          if (elem === results[i]) {\n            j = duplicates.push(i);\n          }\n        }\n        while (j--) {\n          results.splice(duplicates[j], 1);\n        }\n      }\n      sortInput = null;\n      return results;\n    };\n    getText = Sizzle.getText = function (elem) {\n      var node, ret = '', i = 0, nodeType = elem.nodeType;\n      if (!nodeType) {\n        while (node = elem[i++]) {\n          ret += getText(node);\n        }\n      } else if (nodeType === 1 || nodeType === 9 || nodeType === 11) {\n        if (typeof elem.textContent === 'string') {\n          return elem.textContent;\n        } else {\n          for (elem = elem.firstChild; elem; elem = elem.nextSibling) {\n            ret += getText(elem);\n          }\n        }\n      } else if (nodeType === 3 || nodeType === 4) {\n        return elem.nodeValue;\n      }\n      return ret;\n    };\n    Expr = Sizzle.selectors = {\n      cacheLength: 50,\n      createPseudo: markFunction,\n      match: matchExpr,\n      attrHandle: {},\n      find: {},\n      relative: {\n        '>': {\n          dir: 'parentNode',\n          first: true\n        },\n        ' ': { dir: 'parentNode' },\n        '+': {\n          dir: 'previousSibling',\n          first: true\n        },\n        '~': { dir: 'previousSibling' }\n      },\n      preFilter: {\n        ATTR: function (match) {\n          match[1] = match[1].replace(runescape, funescape);\n          match[3] = (match[3] || match[4] || match[5] || '').replace(runescape, funescape);\n          if (match[2] === '~=') {\n            match[3] = ' ' + match[3] + ' ';\n          }\n          return match.slice(0, 4);\n        },\n        CHILD: function (match) {\n          match[1] = match[1].toLowerCase();\n          if (match[1].slice(0, 3) === 'nth') {\n            if (!match[3]) {\n              Sizzle.error(match[0]);\n            }\n            match[4] = +(match[4] ? match[5] + (match[6] || 1) : 2 * (match[3] === 'even' || match[3] === 'odd'));\n            match[5] = +(match[7] + match[8] || match[3] === 'odd');\n          } else if (match[3]) {\n            Sizzle.error(match[0]);\n          }\n          return match;\n        },\n        PSEUDO: function (match) {\n          var excess, unquoted = !match[6] && match[2];\n          if (matchExpr.CHILD.test(match[0])) {\n            return null;\n          }\n          if (match[3]) {\n            match[2] = match[4] || match[5] || '';\n          } else if (unquoted && rpseudo.test(unquoted) && (excess = tokenize(unquoted, true)) && (excess = unquoted.indexOf(')', unquoted.length - excess) - unquoted.length)) {\n            match[0] = match[0].slice(0, excess);\n            match[2] = unquoted.slice(0, excess);\n          }\n          return match.slice(0, 3);\n        }\n      },\n      filter: {\n        TAG: function (nodeNameSelector) {\n          var nodeName = nodeNameSelector.replace(runescape, funescape).toLowerCase();\n          return nodeNameSelector === '*' ? function () {\n            return true;\n          } : function (elem) {\n            return elem.nodeName && elem.nodeName.toLowerCase() === nodeName;\n          };\n        },\n        CLASS: function (className) {\n          var pattern = classCache[className + ' '];\n          return pattern || (pattern = new RegExp('(^|' + whitespace + ')' + className + '(' + whitespace + '|$)')) && classCache(className, function (elem) {\n            return pattern.test(typeof elem.className === 'string' && elem.className || typeof elem.getAttribute !== strundefined && elem.getAttribute('class') || '');\n          });\n        },\n        ATTR: function (name, operator, check) {\n          return function (elem) {\n            var result = Sizzle.attr(elem, name);\n            if (result == null) {\n              return operator === '!=';\n            }\n            if (!operator) {\n              return true;\n            }\n            result += '';\n            return operator === '=' ? result === check : operator === '!=' ? result !== check : operator === '^=' ? check && result.indexOf(check) === 0 : operator === '*=' ? check && result.indexOf(check) > -1 : operator === '$=' ? check && result.slice(-check.length) === check : operator === '~=' ? (' ' + result + ' ').indexOf(check) > -1 : operator === '|=' ? result === check || result.slice(0, check.length + 1) === check + '-' : false;\n          };\n        },\n        CHILD: function (type, what, argument, first, last) {\n          var simple = type.slice(0, 3) !== 'nth', forward = type.slice(-4) !== 'last', ofType = what === 'of-type';\n          return first === 1 && last === 0 ? function (elem) {\n            return !!elem.parentNode;\n          } : function (elem, context, xml) {\n            var cache, outerCache, node, diff, nodeIndex, start, dir = simple !== forward ? 'nextSibling' : 'previousSibling', parent = elem.parentNode, name = ofType && elem.nodeName.toLowerCase(), useCache = !xml && !ofType;\n            if (parent) {\n              if (simple) {\n                while (dir) {\n                  node = elem;\n                  while (node = node[dir]) {\n                    if (ofType ? node.nodeName.toLowerCase() === name : node.nodeType === 1) {\n                      return false;\n                    }\n                  }\n                  start = dir = type === 'only' && !start && 'nextSibling';\n                }\n                return true;\n              }\n              start = [forward ? parent.firstChild : parent.lastChild];\n              if (forward && useCache) {\n                outerCache = parent[expando] || (parent[expando] = {});\n                cache = outerCache[type] || [];\n                nodeIndex = cache[0] === dirruns && cache[1];\n                diff = cache[0] === dirruns && cache[2];\n                node = nodeIndex && parent.childNodes[nodeIndex];\n                while (node = ++nodeIndex && node && node[dir] || (diff = nodeIndex = 0) || start.pop()) {\n                  if (node.nodeType === 1 && ++diff && node === elem) {\n                    outerCache[type] = [\n                      dirruns,\n                      nodeIndex,\n                      diff\n                    ];\n                    break;\n                  }\n                }\n              } else if (useCache && (cache = (elem[expando] || (elem[expando] = {}))[type]) && cache[0] === dirruns) {\n                diff = cache[1];\n              } else {\n                while (node = ++nodeIndex && node && node[dir] || (diff = nodeIndex = 0) || start.pop()) {\n                  if ((ofType ? node.nodeName.toLowerCase() === name : node.nodeType === 1) && ++diff) {\n                    if (useCache) {\n                      (node[expando] || (node[expando] = {}))[type] = [\n                        dirruns,\n                        diff\n                      ];\n                    }\n                    if (node === elem) {\n                      break;\n                    }\n                  }\n                }\n              }\n              diff -= last;\n              return diff === first || diff % first === 0 && diff / first >= 0;\n            }\n          };\n        },\n        PSEUDO: function (pseudo, argument) {\n          var args, fn = Expr.pseudos[pseudo] || Expr.setFilters[pseudo.toLowerCase()] || Sizzle.error('unsupported pseudo: ' + pseudo);\n          if (fn[expando]) {\n            return fn(argument);\n          }\n          if (fn.length > 1) {\n            args = [\n              pseudo,\n              pseudo,\n              '',\n              argument\n            ];\n            return Expr.setFilters.hasOwnProperty(pseudo.toLowerCase()) ? markFunction(function (seed, matches) {\n              var idx, matched = fn(seed, argument), i = matched.length;\n              while (i--) {\n                idx = indexOf.call(seed, matched[i]);\n                seed[idx] = !(matches[idx] = matched[i]);\n              }\n            }) : function (elem) {\n              return fn(elem, 0, args);\n            };\n          }\n          return fn;\n        }\n      },\n      pseudos: {\n        not: markFunction(function (selector) {\n          var input = [], results = [], matcher = compile(selector.replace(rtrim, '$1'));\n          return matcher[expando] ? markFunction(function (seed, matches, context, xml) {\n            var elem, unmatched = matcher(seed, null, xml, []), i = seed.length;\n            while (i--) {\n              if (elem = unmatched[i]) {\n                seed[i] = !(matches[i] = elem);\n              }\n            }\n          }) : function (elem, context, xml) {\n            input[0] = elem;\n            matcher(input, null, xml, results);\n            input[0] = null;\n            return !results.pop();\n          };\n        }),\n        has: markFunction(function (selector) {\n          return function (elem) {\n            return Sizzle(selector, elem).length > 0;\n          };\n        }),\n        contains: markFunction(function (text) {\n          text = text.replace(runescape, funescape);\n          return function (elem) {\n            return (elem.textContent || elem.innerText || getText(elem)).indexOf(text) > -1;\n          };\n        }),\n        lang: markFunction(function (lang) {\n          if (!ridentifier.test(lang || '')) {\n            Sizzle.error('unsupported lang: ' + lang);\n          }\n          lang = lang.replace(runescape, funescape).toLowerCase();\n          return function (elem) {\n            var elemLang;\n            do {\n              if (elemLang = documentIsHTML ? elem.lang : elem.getAttribute('xml:lang') || elem.getAttribute('lang')) {\n                elemLang = elemLang.toLowerCase();\n                return elemLang === lang || elemLang.indexOf(lang + '-') === 0;\n              }\n            } while ((elem = elem.parentNode) && elem.nodeType === 1);\n            return false;\n          };\n        }),\n        target: function (elem) {\n          var hash = window.location && window.location.hash;\n          return hash && hash.slice(1) === elem.id;\n        },\n        root: function (elem) {\n          return elem === docElem;\n        },\n        focus: function (elem) {\n          return elem === document$1.activeElement && (!document$1.hasFocus || document$1.hasFocus()) && !!(elem.type || elem.href || ~elem.tabIndex);\n        },\n        enabled: function (elem) {\n          return elem.disabled === false;\n        },\n        disabled: function (elem) {\n          return elem.disabled === true;\n        },\n        checked: function (elem) {\n          var nodeName = elem.nodeName.toLowerCase();\n          return nodeName === 'input' && !!elem.checked || nodeName === 'option' && !!elem.selected;\n        },\n        selected: function (elem) {\n          if (elem.parentNode) {\n            elem.parentNode.selectedIndex;\n          }\n          return elem.selected === true;\n        },\n        empty: function (elem) {\n          for (elem = elem.firstChild; elem; elem = elem.nextSibling) {\n            if (elem.nodeType < 6) {\n              return false;\n            }\n          }\n          return true;\n        },\n        parent: function (elem) {\n          return !Expr.pseudos.empty(elem);\n        },\n        header: function (elem) {\n          return rheader.test(elem.nodeName);\n        },\n        input: function (elem) {\n          return rinputs.test(elem.nodeName);\n        },\n        button: function (elem) {\n          var name = elem.nodeName.toLowerCase();\n          return name === 'input' && elem.type === 'button' || name === 'button';\n        },\n        text: function (elem) {\n          var attr;\n          return elem.nodeName.toLowerCase() === 'input' && elem.type === 'text' && ((attr = elem.getAttribute('type')) == null || attr.toLowerCase() === 'text');\n        },\n        first: createPositionalPseudo(function () {\n          return [0];\n        }),\n        last: createPositionalPseudo(function (matchIndexes, length) {\n          return [length - 1];\n        }),\n        eq: createPositionalPseudo(function (matchIndexes, length, argument) {\n          return [argument < 0 ? argument + length : argument];\n        }),\n        even: createPositionalPseudo(function (matchIndexes, length) {\n          var i = 0;\n          for (; i < length; i += 2) {\n            matchIndexes.push(i);\n          }\n          return matchIndexes;\n        }),\n        odd: createPositionalPseudo(function (matchIndexes, length) {\n          var i = 1;\n          for (; i < length; i += 2) {\n            matchIndexes.push(i);\n          }\n          return matchIndexes;\n        }),\n        lt: createPositionalPseudo(function (matchIndexes, length, argument) {\n          var i = argument < 0 ? argument + length : argument;\n          for (; --i >= 0;) {\n            matchIndexes.push(i);\n          }\n          return matchIndexes;\n        }),\n        gt: createPositionalPseudo(function (matchIndexes, length, argument) {\n          var i = argument < 0 ? argument + length : argument;\n          for (; ++i < length;) {\n            matchIndexes.push(i);\n          }\n          return matchIndexes;\n        })\n      }\n    };\n    Expr.pseudos.nth = Expr.pseudos.eq;\n    each$k([\n      'radio',\n      'checkbox',\n      'file',\n      'password',\n      'image'\n    ], function (i) {\n      Expr.pseudos[i] = createInputPseudo(i);\n    });\n    each$k([\n      'submit',\n      'reset'\n    ], function (i) {\n      Expr.pseudos[i] = createButtonPseudo(i);\n    });\n    function setFilters() {\n    }\n    setFilters.prototype = Expr.filters = Expr.pseudos;\n    Expr.setFilters = new setFilters();\n    tokenize = Sizzle.tokenize = function (selector, parseOnly) {\n      var matched, match, tokens, type, soFar, groups, preFilters, cached = tokenCache[selector + ' '];\n      if (cached) {\n        return parseOnly ? 0 : cached.slice(0);\n      }\n      soFar = selector;\n      groups = [];\n      preFilters = Expr.preFilter;\n      while (soFar) {\n        if (!matched || (match = rcomma.exec(soFar))) {\n          if (match) {\n            soFar = soFar.slice(match[0].length) || soFar;\n          }\n          groups.push(tokens = []);\n        }\n        matched = false;\n        if (match = rcombinators.exec(soFar)) {\n          matched = match.shift();\n          tokens.push({\n            value: matched,\n            type: match[0].replace(rtrim, ' ')\n          });\n          soFar = soFar.slice(matched.length);\n        }\n        for (type in Expr.filter) {\n          if (!Expr.filter.hasOwnProperty(type)) {\n            continue;\n          }\n          if ((match = matchExpr[type].exec(soFar)) && (!preFilters[type] || (match = preFilters[type](match)))) {\n            matched = match.shift();\n            tokens.push({\n              value: matched,\n              type: type,\n              matches: match\n            });\n            soFar = soFar.slice(matched.length);\n          }\n        }\n        if (!matched) {\n          break;\n        }\n      }\n      return parseOnly ? soFar.length : soFar ? Sizzle.error(selector) : tokenCache(selector, groups).slice(0);\n    };\n    function toSelector(tokens) {\n      var i = 0, len = tokens.length, selector = '';\n      for (; i < len; i++) {\n        selector += tokens[i].value;\n      }\n      return selector;\n    }\n    function addCombinator(matcher, combinator, base) {\n      var dir = combinator.dir, checkNonElements = base && dir === 'parentNode', doneName = done++;\n      return combinator.first ? function (elem, context, xml) {\n        while (elem = elem[dir]) {\n          if (elem.nodeType === 1 || checkNonElements) {\n            return matcher(elem, context, xml);\n          }\n        }\n      } : function (elem, context, xml) {\n        var oldCache, outerCache, newCache = [\n            dirruns,\n            doneName\n          ];\n        if (xml) {\n          while (elem = elem[dir]) {\n            if (elem.nodeType === 1 || checkNonElements) {\n              if (matcher(elem, context, xml)) {\n                return true;\n              }\n            }\n          }\n        } else {\n          while (elem = elem[dir]) {\n            if (elem.nodeType === 1 || checkNonElements) {\n              outerCache = elem[expando] || (elem[expando] = {});\n              if ((oldCache = outerCache[dir]) && oldCache[0] === dirruns && oldCache[1] === doneName) {\n                return newCache[2] = oldCache[2];\n              } else {\n                outerCache[dir] = newCache;\n                if (newCache[2] = matcher(elem, context, xml)) {\n                  return true;\n                }\n              }\n            }\n          }\n        }\n      };\n    }\n    function elementMatcher(matchers) {\n      return matchers.length > 1 ? function (elem, context, xml) {\n        var i = matchers.length;\n        while (i--) {\n          if (!matchers[i](elem, context, xml)) {\n            return false;\n          }\n        }\n        return true;\n      } : matchers[0];\n    }\n    function multipleContexts(selector, contexts, results) {\n      var i = 0, len = contexts.length;\n      for (; i < len; i++) {\n        Sizzle(selector, contexts[i], results);\n      }\n      return results;\n    }\n    function condense(unmatched, map, filter, context, xml) {\n      var elem, newUnmatched = [], i = 0, len = unmatched.length, mapped = map != null;\n      for (; i < len; i++) {\n        if (elem = unmatched[i]) {\n          if (!filter || filter(elem, context, xml)) {\n            newUnmatched.push(elem);\n            if (mapped) {\n              map.push(i);\n            }\n          }\n        }\n      }\n      return newUnmatched;\n    }\n    function setMatcher(preFilter, selector, matcher, postFilter, postFinder, postSelector) {\n      if (postFilter && !postFilter[expando]) {\n        postFilter = setMatcher(postFilter);\n      }\n      if (postFinder && !postFinder[expando]) {\n        postFinder = setMatcher(postFinder, postSelector);\n      }\n      return markFunction(function (seed, results, context, xml) {\n        var temp, i, elem, preMap = [], postMap = [], preexisting = results.length, elems = seed || multipleContexts(selector || '*', context.nodeType ? [context] : context, []), matcherIn = preFilter && (seed || !selector) ? condense(elems, preMap, preFilter, context, xml) : elems, matcherOut = matcher ? postFinder || (seed ? preFilter : preexisting || postFilter) ? [] : results : matcherIn;\n        if (matcher) {\n          matcher(matcherIn, matcherOut, context, xml);\n        }\n        if (postFilter) {\n          temp = condense(matcherOut, postMap);\n          postFilter(temp, [], context, xml);\n          i = temp.length;\n          while (i--) {\n            if (elem = temp[i]) {\n              matcherOut[postMap[i]] = !(matcherIn[postMap[i]] = elem);\n            }\n          }\n        }\n        if (seed) {\n          if (postFinder || preFilter) {\n            if (postFinder) {\n              temp = [];\n              i = matcherOut.length;\n              while (i--) {\n                if (elem = matcherOut[i]) {\n                  temp.push(matcherIn[i] = elem);\n                }\n              }\n              postFinder(null, matcherOut = [], temp, xml);\n            }\n            i = matcherOut.length;\n            while (i--) {\n              if ((elem = matcherOut[i]) && (temp = postFinder ? indexOf.call(seed, elem) : preMap[i]) > -1) {\n                seed[temp] = !(results[temp] = elem);\n              }\n            }\n          }\n        } else {\n          matcherOut = condense(matcherOut === results ? matcherOut.splice(preexisting, matcherOut.length) : matcherOut);\n          if (postFinder) {\n            postFinder(null, results, matcherOut, xml);\n          } else {\n            push$1.apply(results, matcherOut);\n          }\n        }\n      });\n    }\n    function matcherFromTokens(tokens) {\n      var checkContext, matcher, j, len = tokens.length, leadingRelative = Expr.relative[tokens[0].type], implicitRelative = leadingRelative || Expr.relative[' '], i = leadingRelative ? 1 : 0, matchContext = addCombinator(function (elem) {\n          return elem === checkContext;\n        }, implicitRelative, true), matchAnyContext = addCombinator(function (elem) {\n          return indexOf.call(checkContext, elem) > -1;\n        }, implicitRelative, true), matchers = [function (elem, context, xml) {\n            var ret = !leadingRelative && (xml || context !== outermostContext) || ((checkContext = context).nodeType ? matchContext(elem, context, xml) : matchAnyContext(elem, context, xml));\n            checkContext = null;\n            return ret;\n          }];\n      for (; i < len; i++) {\n        if (matcher = Expr.relative[tokens[i].type]) {\n          matchers = [addCombinator(elementMatcher(matchers), matcher)];\n        } else {\n          matcher = Expr.filter[tokens[i].type].apply(null, tokens[i].matches);\n          if (matcher[expando]) {\n            j = ++i;\n            for (; j < len; j++) {\n              if (Expr.relative[tokens[j].type]) {\n                break;\n              }\n            }\n            return setMatcher(i > 1 && elementMatcher(matchers), i > 1 && toSelector(tokens.slice(0, i - 1).concat({ value: tokens[i - 2].type === ' ' ? '*' : '' })).replace(rtrim, '$1'), matcher, i < j && matcherFromTokens(tokens.slice(i, j)), j < len && matcherFromTokens(tokens = tokens.slice(j)), j < len && toSelector(tokens));\n          }\n          matchers.push(matcher);\n        }\n      }\n      return elementMatcher(matchers);\n    }\n    function matcherFromGroupMatchers(elementMatchers, setMatchers) {\n      var bySet = setMatchers.length > 0, byElement = elementMatchers.length > 0, superMatcher = function (seed, context, xml, results, outermost) {\n          var elem, j, matcher, matchedCount = 0, i = '0', unmatched = seed && [], setMatched = [], contextBackup = outermostContext, elems = seed || byElement && Expr.find.TAG('*', outermost), dirrunsUnique = dirruns += contextBackup == null ? 1 : Math.random() || 0.1, len = elems.length;\n          if (outermost) {\n            outermostContext = context !== document$1 && context;\n          }\n          for (; i !== len && (elem = elems[i]) != null; i++) {\n            if (byElement && elem) {\n              j = 0;\n              while (matcher = elementMatchers[j++]) {\n                if (matcher(elem, context, xml)) {\n                  results.push(elem);\n                  break;\n                }\n              }\n              if (outermost) {\n                dirruns = dirrunsUnique;\n              }\n            }\n            if (bySet) {\n              if (elem = !matcher && elem) {\n                matchedCount--;\n              }\n              if (seed) {\n                unmatched.push(elem);\n              }\n            }\n          }\n          matchedCount += i;\n          if (bySet && i !== matchedCount) {\n            j = 0;\n            while (matcher = setMatchers[j++]) {\n              matcher(unmatched, setMatched, context, xml);\n            }\n            if (seed) {\n              if (matchedCount > 0) {\n                while (i--) {\n                  if (!(unmatched[i] || setMatched[i])) {\n                    setMatched[i] = pop.call(results);\n                  }\n                }\n              }\n              setMatched = condense(setMatched);\n            }\n            push$1.apply(results, setMatched);\n            if (outermost && !seed && setMatched.length > 0 && matchedCount + setMatchers.length > 1) {\n              Sizzle.uniqueSort(results);\n            }\n          }\n          if (outermost) {\n            dirruns = dirrunsUnique;\n            outermostContext = contextBackup;\n          }\n          return unmatched;\n        };\n      return bySet ? markFunction(superMatcher) : superMatcher;\n    }\n    compile = Sizzle.compile = function (selector, match) {\n      var i, setMatchers = [], elementMatchers = [], cached = compilerCache[selector + ' '];\n      if (!cached) {\n        if (!match) {\n          match = tokenize(selector);\n        }\n        i = match.length;\n        while (i--) {\n          cached = matcherFromTokens(match[i]);\n          if (cached[expando]) {\n            setMatchers.push(cached);\n          } else {\n            elementMatchers.push(cached);\n          }\n        }\n        cached = compilerCache(selector, matcherFromGroupMatchers(elementMatchers, setMatchers));\n        cached.selector = selector;\n      }\n      return cached;\n    };\n    select$1 = Sizzle.select = function (selector, context, results, seed) {\n      var i, tokens, token, type, find, compiled = typeof selector === 'function' && selector, match = !seed && tokenize(selector = compiled.selector || selector);\n      results = results || [];\n      if (match.length === 1) {\n        tokens = match[0] = match[0].slice(0);\n        if (tokens.length > 2 && (token = tokens[0]).type === 'ID' && support.getById && context.nodeType === 9 && documentIsHTML && Expr.relative[tokens[1].type]) {\n          context = (Expr.find.ID(token.matches[0].replace(runescape, funescape), context) || [])[0];\n          if (!context) {\n            return results;\n          } else if (compiled) {\n            context = context.parentNode;\n          }\n          selector = selector.slice(tokens.shift().value.length);\n        }\n        i = matchExpr.needsContext.test(selector) ? 0 : tokens.length;\n        while (i--) {\n          token = tokens[i];\n          if (Expr.relative[type = token.type]) {\n            break;\n          }\n          if (find = Expr.find[type]) {\n            if (seed = find(token.matches[0].replace(runescape, funescape), rsibling.test(tokens[0].type) && testContext(context.parentNode) || context)) {\n              tokens.splice(i, 1);\n              selector = seed.length && toSelector(tokens);\n              if (!selector) {\n                push$1.apply(results, seed);\n                return results;\n              }\n              break;\n            }\n          }\n        }\n      }\n      (compiled || compile(selector, match))(seed, context, !documentIsHTML, results, rsibling.test(selector) && testContext(context.parentNode) || context);\n      return results;\n    };\n    support.sortStable = expando.split('').sort(sortOrder).join('') === expando;\n    support.detectDuplicates = !!hasDuplicate;\n    setDocument();\n    support.sortDetached = true;\n\n    var doc = document;\n    var push = Array.prototype.push;\n    var slice = Array.prototype.slice;\n    var rquickExpr = /^(?:[^#<]*(<[\\w\\W]+>)[^>]*$|#([\\w\\-]*)$)/;\n    var Event$1 = EventUtils.Event;\n    var skipUniques = Tools.makeMap('children,contents,next,prev');\n    var isDefined = function (obj) {\n      return typeof obj !== 'undefined';\n    };\n    var isString = function (obj) {\n      return typeof obj === 'string';\n    };\n    var isWindow = function (obj) {\n      return obj && obj === obj.window;\n    };\n    var createFragment$1 = function (html, fragDoc) {\n      fragDoc = fragDoc || doc;\n      var container = fragDoc.createElement('div');\n      var frag = fragDoc.createDocumentFragment();\n      container.innerHTML = html;\n      var node;\n      while (node = container.firstChild) {\n        frag.appendChild(node);\n      }\n      return frag;\n    };\n    var domManipulate = function (targetNodes, sourceItem, callback, reverse) {\n      var i;\n      if (isString(sourceItem)) {\n        sourceItem = createFragment$1(sourceItem, getElementDocument(targetNodes[0]));\n      } else if (sourceItem.length && !sourceItem.nodeType) {\n        sourceItem = DomQuery.makeArray(sourceItem);\n        if (reverse) {\n          for (i = sourceItem.length - 1; i >= 0; i--) {\n            domManipulate(targetNodes, sourceItem[i], callback, reverse);\n          }\n        } else {\n          for (i = 0; i < sourceItem.length; i++) {\n            domManipulate(targetNodes, sourceItem[i], callback, reverse);\n          }\n        }\n        return targetNodes;\n      }\n      if (sourceItem.nodeType) {\n        i = targetNodes.length;\n        while (i--) {\n          callback.call(targetNodes[i], sourceItem);\n        }\n      }\n      return targetNodes;\n    };\n    var hasClass = function (node, className) {\n      return node && className && (' ' + node.className + ' ').indexOf(' ' + className + ' ') !== -1;\n    };\n    var wrap$2 = function (elements, wrapper, all) {\n      var lastParent, newWrapper;\n      wrapper = DomQuery(wrapper)[0];\n      elements.each(function () {\n        var self = this;\n        if (!all || lastParent !== self.parentNode) {\n          lastParent = self.parentNode;\n          newWrapper = wrapper.cloneNode(false);\n          self.parentNode.insertBefore(newWrapper, self);\n          newWrapper.appendChild(self);\n        } else {\n          newWrapper.appendChild(self);\n        }\n      });\n      return elements;\n    };\n    var numericCssMap = Tools.makeMap('fillOpacity fontWeight lineHeight opacity orphans widows zIndex zoom', ' ');\n    var booleanMap = Tools.makeMap('checked compact declare defer disabled ismap multiple nohref noshade nowrap readonly selected', ' ');\n    var propFix = {\n      for: 'htmlFor',\n      class: 'className',\n      readonly: 'readOnly'\n    };\n    var cssFix = { float: 'cssFloat' };\n    var attrHooks = {}, cssHooks = {};\n    var DomQueryConstructor = function (selector, context) {\n      return new DomQuery.fn.init(selector, context);\n    };\n    var inArray$1 = function (item, array) {\n      var i;\n      if (array.indexOf) {\n        return array.indexOf(item);\n      }\n      i = array.length;\n      while (i--) {\n        if (array[i] === item) {\n          return i;\n        }\n      }\n      return -1;\n    };\n    var whiteSpaceRegExp = /^\\s*|\\s*$/g;\n    var trim$1 = function (str) {\n      return str === null || str === undefined ? '' : ('' + str).replace(whiteSpaceRegExp, '');\n    };\n    var each$g = function (obj, callback) {\n      var length, key, i, value;\n      if (obj) {\n        length = obj.length;\n        if (length === undefined) {\n          for (key in obj) {\n            if (obj.hasOwnProperty(key)) {\n              value = obj[key];\n              if (callback.call(value, key, value) === false) {\n                break;\n              }\n            }\n          }\n        } else {\n          for (i = 0; i < length; i++) {\n            value = obj[i];\n            if (callback.call(value, i, value) === false) {\n              break;\n            }\n          }\n        }\n      }\n      return obj;\n    };\n    var grep$2 = function (array, callback) {\n      var out = [];\n      each$g(array, function (i, item) {\n        if (callback(item, i)) {\n          out.push(item);\n        }\n      });\n      return out;\n    };\n    var getElementDocument = function (element) {\n      if (!element) {\n        return doc;\n      }\n      if (element.nodeType === 9) {\n        return element;\n      }\n      return element.ownerDocument;\n    };\n    DomQueryConstructor.fn = DomQueryConstructor.prototype = {\n      constructor: DomQueryConstructor,\n      selector: '',\n      context: null,\n      length: 0,\n      init: function (selector, context) {\n        var self = this;\n        var match, node;\n        if (!selector) {\n          return self;\n        }\n        if (selector.nodeType) {\n          self.context = self[0] = selector;\n          self.length = 1;\n          return self;\n        }\n        if (context && context.nodeType) {\n          self.context = context;\n        } else {\n          if (context) {\n            return DomQuery(selector).attr(context);\n          }\n          self.context = context = document;\n        }\n        if (isString(selector)) {\n          self.selector = selector;\n          if (selector.charAt(0) === '<' && selector.charAt(selector.length - 1) === '>' && selector.length >= 3) {\n            match = [\n              null,\n              selector,\n              null\n            ];\n          } else {\n            match = rquickExpr.exec(selector);\n          }\n          if (match) {\n            if (match[1]) {\n              node = createFragment$1(selector, getElementDocument(context)).firstChild;\n              while (node) {\n                push.call(self, node);\n                node = node.nextSibling;\n              }\n            } else {\n              node = getElementDocument(context).getElementById(match[2]);\n              if (!node) {\n                return self;\n              }\n              if (node.id !== match[2]) {\n                return self.find(selector);\n              }\n              self.length = 1;\n              self[0] = node;\n            }\n          } else {\n            return DomQuery(context).find(selector);\n          }\n        } else {\n          this.add(selector, false);\n        }\n        return self;\n      },\n      toArray: function () {\n        return Tools.toArray(this);\n      },\n      add: function (items, sort) {\n        var self = this;\n        var nodes, i;\n        if (isString(items)) {\n          return self.add(DomQuery(items));\n        }\n        if (sort !== false) {\n          nodes = DomQuery.unique(self.toArray().concat(DomQuery.makeArray(items)));\n          self.length = nodes.length;\n          for (i = 0; i < nodes.length; i++) {\n            self[i] = nodes[i];\n          }\n        } else {\n          push.apply(self, DomQuery.makeArray(items));\n        }\n        return self;\n      },\n      attr: function (name, value) {\n        var self = this;\n        var hook;\n        if (typeof name === 'object') {\n          each$g(name, function (name, value) {\n            self.attr(name, value);\n          });\n        } else if (isDefined(value)) {\n          this.each(function () {\n            var hook;\n            if (this.nodeType === 1) {\n              hook = attrHooks[name];\n              if (hook && hook.set) {\n                hook.set(this, value);\n                return;\n              }\n              if (value === null) {\n                this.removeAttribute(name, 2);\n              } else {\n                this.setAttribute(name, value, 2);\n              }\n            }\n          });\n        } else {\n          if (self[0] && self[0].nodeType === 1) {\n            hook = attrHooks[name];\n            if (hook && hook.get) {\n              return hook.get(self[0], name);\n            }\n            if (booleanMap[name]) {\n              return self.prop(name) ? name : undefined;\n            }\n            value = self[0].getAttribute(name, 2);\n            if (value === null) {\n              value = undefined;\n            }\n          }\n          return value;\n        }\n        return self;\n      },\n      removeAttr: function (name) {\n        return this.attr(name, null);\n      },\n      prop: function (name, value) {\n        var self = this;\n        name = propFix[name] || name;\n        if (typeof name === 'object') {\n          each$g(name, function (name, value) {\n            self.prop(name, value);\n          });\n        } else if (isDefined(value)) {\n          this.each(function () {\n            if (this.nodeType === 1) {\n              this[name] = value;\n            }\n          });\n        } else {\n          if (self[0] && self[0].nodeType && name in self[0]) {\n            return self[0][name];\n          }\n          return value;\n        }\n        return self;\n      },\n      css: function (name, value) {\n        var self = this;\n        var elm, hook;\n        var camel = function (name) {\n          return name.replace(/-(\\D)/g, function (a, b) {\n            return b.toUpperCase();\n          });\n        };\n        var dashed = function (name) {\n          return name.replace(/[A-Z]/g, function (a) {\n            return '-' + a;\n          });\n        };\n        if (typeof name === 'object') {\n          each$g(name, function (name, value) {\n            self.css(name, value);\n          });\n        } else {\n          if (isDefined(value)) {\n            name = camel(name);\n            if (typeof value === 'number' && !numericCssMap[name]) {\n              value = value.toString() + 'px';\n            }\n            self.each(function () {\n              var style = this.style;\n              hook = cssHooks[name];\n              if (hook && hook.set) {\n                hook.set(this, value);\n                return;\n              }\n              try {\n                this.style[cssFix[name] || name] = value;\n              } catch (ex) {\n              }\n              if (value === null || value === '') {\n                if (style.removeProperty) {\n                  style.removeProperty(dashed(name));\n                } else {\n                  style.removeAttribute(name);\n                }\n              }\n            });\n          } else {\n            elm = self[0];\n            hook = cssHooks[name];\n            if (hook && hook.get) {\n              return hook.get(elm);\n            }\n            if (elm.ownerDocument.defaultView) {\n              try {\n                return elm.ownerDocument.defaultView.getComputedStyle(elm, null).getPropertyValue(dashed(name));\n              } catch (ex) {\n                return undefined;\n              }\n            } else if (elm.currentStyle) {\n              return elm.currentStyle[camel(name)];\n            } else {\n              return '';\n            }\n          }\n        }\n        return self;\n      },\n      remove: function () {\n        var self = this;\n        var node, i = this.length;\n        while (i--) {\n          node = self[i];\n          Event$1.clean(node);\n          if (node.parentNode) {\n            node.parentNode.removeChild(node);\n          }\n        }\n        return this;\n      },\n      empty: function () {\n        var self = this;\n        var node, i = this.length;\n        while (i--) {\n          node = self[i];\n          while (node.firstChild) {\n            node.removeChild(node.firstChild);\n          }\n        }\n        return this;\n      },\n      html: function (value) {\n        var self = this;\n        var i;\n        if (isDefined(value)) {\n          i = self.length;\n          try {\n            while (i--) {\n              self[i].innerHTML = value;\n            }\n          } catch (ex) {\n            DomQuery(self[i]).empty().append(value);\n          }\n          return self;\n        }\n        return self[0] ? self[0].innerHTML : '';\n      },\n      text: function (value) {\n        var self = this;\n        var i;\n        if (isDefined(value)) {\n          i = self.length;\n          while (i--) {\n            if ('innerText' in self[i]) {\n              self[i].innerText = value;\n            } else {\n              self[0].textContent = value;\n            }\n          }\n          return self;\n        }\n        return self[0] ? self[0].innerText || self[0].textContent : '';\n      },\n      append: function () {\n        return domManipulate(this, arguments, function (node) {\n          if (this.nodeType === 1 || this.host && this.host.nodeType === 1) {\n            this.appendChild(node);\n          }\n        });\n      },\n      prepend: function () {\n        return domManipulate(this, arguments, function (node) {\n          if (this.nodeType === 1 || this.host && this.host.nodeType === 1) {\n            this.insertBefore(node, this.firstChild);\n          }\n        }, true);\n      },\n      before: function () {\n        var self = this;\n        if (self[0] && self[0].parentNode) {\n          return domManipulate(self, arguments, function (node) {\n            this.parentNode.insertBefore(node, this);\n          });\n        }\n        return self;\n      },\n      after: function () {\n        var self = this;\n        if (self[0] && self[0].parentNode) {\n          return domManipulate(self, arguments, function (node) {\n            this.parentNode.insertBefore(node, this.nextSibling);\n          }, true);\n        }\n        return self;\n      },\n      appendTo: function (val) {\n        DomQuery(val).append(this);\n        return this;\n      },\n      prependTo: function (val) {\n        DomQuery(val).prepend(this);\n        return this;\n      },\n      replaceWith: function (content) {\n        return this.before(content).remove();\n      },\n      wrap: function (content) {\n        return wrap$2(this, content);\n      },\n      wrapAll: function (content) {\n        return wrap$2(this, content, true);\n      },\n      wrapInner: function (content) {\n        this.each(function () {\n          DomQuery(this).contents().wrapAll(content);\n        });\n        return this;\n      },\n      unwrap: function () {\n        return this.parent().each(function () {\n          DomQuery(this).replaceWith(this.childNodes);\n        });\n      },\n      clone: function () {\n        var result = [];\n        this.each(function () {\n          result.push(this.cloneNode(true));\n        });\n        return DomQuery(result);\n      },\n      addClass: function (className) {\n        return this.toggleClass(className, true);\n      },\n      removeClass: function (className) {\n        return this.toggleClass(className, false);\n      },\n      toggleClass: function (className, state) {\n        var self = this;\n        if (typeof className !== 'string') {\n          return self;\n        }\n        if (className.indexOf(' ') !== -1) {\n          each$g(className.split(' '), function () {\n            self.toggleClass(this, state);\n          });\n        } else {\n          self.each(function (index, node) {\n            var classState = hasClass(node, className);\n            if (classState !== state) {\n              var existingClassName = node.className;\n              if (classState) {\n                node.className = trim$1((' ' + existingClassName + ' ').replace(' ' + className + ' ', ' '));\n              } else {\n                node.className += existingClassName ? ' ' + className : className;\n              }\n            }\n          });\n        }\n        return self;\n      },\n      hasClass: function (className) {\n        return hasClass(this[0], className);\n      },\n      each: function (callback) {\n        return each$g(this, callback);\n      },\n      on: function (name, callback) {\n        return this.each(function () {\n          Event$1.bind(this, name, callback);\n        });\n      },\n      off: function (name, callback) {\n        return this.each(function () {\n          Event$1.unbind(this, name, callback);\n        });\n      },\n      trigger: function (name) {\n        return this.each(function () {\n          if (typeof name === 'object') {\n            Event$1.fire(this, name.type, name);\n          } else {\n            Event$1.fire(this, name);\n          }\n        });\n      },\n      show: function () {\n        return this.css('display', '');\n      },\n      hide: function () {\n        return this.css('display', 'none');\n      },\n      slice: function () {\n        return DomQuery(slice.apply(this, arguments));\n      },\n      eq: function (index) {\n        return index === -1 ? this.slice(index) : this.slice(index, +index + 1);\n      },\n      first: function () {\n        return this.eq(0);\n      },\n      last: function () {\n        return this.eq(-1);\n      },\n      find: function (selector) {\n        var i, l;\n        var ret = [];\n        for (i = 0, l = this.length; i < l; i++) {\n          DomQuery.find(selector, this[i], ret);\n        }\n        return DomQuery(ret);\n      },\n      filter: function (selector) {\n        if (typeof selector === 'function') {\n          return DomQuery(grep$2(this.toArray(), function (item, i) {\n            return selector(i, item);\n          }));\n        }\n        return DomQuery(DomQuery.filter(selector, this.toArray()));\n      },\n      closest: function (selector) {\n        var result = [];\n        if (selector instanceof DomQuery) {\n          selector = selector[0];\n        }\n        this.each(function (i, node) {\n          while (node) {\n            if (typeof selector === 'string' && DomQuery(node).is(selector)) {\n              result.push(node);\n              break;\n            } else if (node === selector) {\n              result.push(node);\n              break;\n            }\n            node = node.parentNode;\n          }\n        });\n        return DomQuery(result);\n      },\n      offset: function (offset) {\n        var elm, doc, docElm;\n        var x = 0, y = 0, pos;\n        if (!offset) {\n          elm = this[0];\n          if (elm) {\n            doc = elm.ownerDocument;\n            docElm = doc.documentElement;\n            if (elm.getBoundingClientRect) {\n              pos = elm.getBoundingClientRect();\n              x = pos.left + (docElm.scrollLeft || doc.body.scrollLeft) - docElm.clientLeft;\n              y = pos.top + (docElm.scrollTop || doc.body.scrollTop) - docElm.clientTop;\n            }\n          }\n          return {\n            left: x,\n            top: y\n          };\n        }\n        return this.css(offset);\n      },\n      push: push,\n      sort: Array.prototype.sort,\n      splice: Array.prototype.splice\n    };\n    Tools.extend(DomQueryConstructor, {\n      extend: Tools.extend,\n      makeArray: function (object) {\n        if (isWindow(object) || object.nodeType) {\n          return [object];\n        }\n        return Tools.toArray(object);\n      },\n      inArray: inArray$1,\n      isArray: Tools.isArray,\n      each: each$g,\n      trim: trim$1,\n      grep: grep$2,\n      find: Sizzle,\n      expr: Sizzle.selectors,\n      unique: Sizzle.uniqueSort,\n      text: Sizzle.getText,\n      contains: Sizzle.contains,\n      filter: function (expr, elems, not) {\n        var i = elems.length;\n        if (not) {\n          expr = ':not(' + expr + ')';\n        }\n        while (i--) {\n          if (elems[i].nodeType !== 1) {\n            elems.splice(i, 1);\n          }\n        }\n        if (elems.length === 1) {\n          elems = DomQuery.find.matchesSelector(elems[0], expr) ? [elems[0]] : [];\n        } else {\n          elems = DomQuery.find.matches(expr, elems);\n        }\n        return elems;\n      }\n    });\n    var dir = function (el, prop, until) {\n      var matched = [];\n      var cur = el[prop];\n      if (typeof until !== 'string' && until instanceof DomQuery) {\n        until = until[0];\n      }\n      while (cur && cur.nodeType !== 9) {\n        if (until !== undefined) {\n          if (cur === until) {\n            break;\n          }\n          if (typeof until === 'string' && DomQuery(cur).is(until)) {\n            break;\n          }\n        }\n        if (cur.nodeType === 1) {\n          matched.push(cur);\n        }\n        cur = cur[prop];\n      }\n      return matched;\n    };\n    var sibling$1 = function (node, siblingName, nodeType, until) {\n      var result = [];\n      if (until instanceof DomQuery) {\n        until = until[0];\n      }\n      for (; node; node = node[siblingName]) {\n        if (nodeType && node.nodeType !== nodeType) {\n          continue;\n        }\n        if (until !== undefined) {\n          if (node === until) {\n            break;\n          }\n          if (typeof until === 'string' && DomQuery(node).is(until)) {\n            break;\n          }\n        }\n        result.push(node);\n      }\n      return result;\n    };\n    var firstSibling = function (node, siblingName, nodeType) {\n      for (node = node[siblingName]; node; node = node[siblingName]) {\n        if (node.nodeType === nodeType) {\n          return node;\n        }\n      }\n      return null;\n    };\n    each$g({\n      parent: function (node) {\n        var parent = node.parentNode;\n        return parent && parent.nodeType !== 11 ? parent : null;\n      },\n      parents: function (node) {\n        return dir(node, 'parentNode');\n      },\n      next: function (node) {\n        return firstSibling(node, 'nextSibling', 1);\n      },\n      prev: function (node) {\n        return firstSibling(node, 'previousSibling', 1);\n      },\n      children: function (node) {\n        return sibling$1(node.firstChild, 'nextSibling', 1);\n      },\n      contents: function (node) {\n        return Tools.toArray((node.nodeName === 'iframe' ? node.contentDocument || node.contentWindow.document : node).childNodes);\n      }\n    }, function (name, fn) {\n      DomQueryConstructor.fn[name] = function (selector) {\n        var self = this;\n        var result = [];\n        self.each(function () {\n          var nodes = fn.call(result, this, selector, result);\n          if (nodes) {\n            if (DomQuery.isArray(nodes)) {\n              result.push.apply(result, nodes);\n            } else {\n              result.push(nodes);\n            }\n          }\n        });\n        if (this.length > 1) {\n          if (!skipUniques[name]) {\n            result = DomQuery.unique(result);\n          }\n          if (name.indexOf('parents') === 0) {\n            result = result.reverse();\n          }\n        }\n        var wrappedResult = DomQuery(result);\n        if (selector) {\n          return wrappedResult.filter(selector);\n        }\n        return wrappedResult;\n      };\n    });\n    each$g({\n      parentsUntil: function (node, until) {\n        return dir(node, 'parentNode', until);\n      },\n      nextUntil: function (node, until) {\n        return sibling$1(node, 'nextSibling', 1, until).slice(1);\n      },\n      prevUntil: function (node, until) {\n        return sibling$1(node, 'previousSibling', 1, until).slice(1);\n      }\n    }, function (name, fn) {\n      DomQueryConstructor.fn[name] = function (selector, filter) {\n        var self = this;\n        var result = [];\n        self.each(function () {\n          var nodes = fn.call(result, this, selector, result);\n          if (nodes) {\n            if (DomQuery.isArray(nodes)) {\n              result.push.apply(result, nodes);\n            } else {\n              result.push(nodes);\n            }\n          }\n        });\n        if (this.length > 1) {\n          result = DomQuery.unique(result);\n          if (name.indexOf('parents') === 0 || name === 'prevUntil') {\n            result = result.reverse();\n          }\n        }\n        var wrappedResult = DomQuery(result);\n        if (filter) {\n          return wrappedResult.filter(filter);\n        }\n        return wrappedResult;\n      };\n    });\n    DomQueryConstructor.fn.is = function (selector) {\n      return !!selector && this.filter(selector).length > 0;\n    };\n    DomQueryConstructor.fn.init.prototype = DomQueryConstructor.fn;\n    DomQueryConstructor.overrideDefaults = function (callback) {\n      var defaults;\n      var sub = function (selector, context) {\n        defaults = defaults || callback();\n        if (arguments.length === 0) {\n          selector = defaults.element;\n        }\n        if (!context) {\n          context = defaults.context;\n        }\n        return new sub.fn.init(selector, context);\n      };\n      DomQuery.extend(sub, this);\n      return sub;\n    };\n    DomQueryConstructor.attrHooks = attrHooks;\n    DomQueryConstructor.cssHooks = cssHooks;\n    var DomQuery = DomQueryConstructor;\n\n    var each$f = Tools.each;\n    var grep$1 = Tools.grep;\n    var isIE = Env.ie;\n    var simpleSelectorRe = /^([a-z0-9],?)+$/i;\n    var setupAttrHooks = function (styles, settings, getContext) {\n      var keepValues = settings.keep_values;\n      var keepUrlHook = {\n        set: function ($elm, value, name) {\n          if (settings.url_converter && value !== null) {\n            value = settings.url_converter.call(settings.url_converter_scope || getContext(), value, name, $elm[0]);\n          }\n          $elm.attr('data-mce-' + name, value).attr(name, value);\n        },\n        get: function ($elm, name) {\n          return $elm.attr('data-mce-' + name) || $elm.attr(name);\n        }\n      };\n      var attrHooks = {\n        style: {\n          set: function ($elm, value) {\n            if (value !== null && typeof value === 'object') {\n              $elm.css(value);\n              return;\n            }\n            if (keepValues) {\n              $elm.attr('data-mce-style', value);\n            }\n            if (value !== null && typeof value === 'string') {\n              $elm.removeAttr('style');\n              $elm.css(styles.parse(value));\n            } else {\n              $elm.attr('style', value);\n            }\n          },\n          get: function ($elm) {\n            var value = $elm.attr('data-mce-style') || $elm.attr('style');\n            value = styles.serialize(styles.parse(value), $elm[0].nodeName);\n            return value;\n          }\n        }\n      };\n      if (keepValues) {\n        attrHooks.href = attrHooks.src = keepUrlHook;\n      }\n      return attrHooks;\n    };\n    var updateInternalStyleAttr = function (styles, $elm) {\n      var rawValue = $elm.attr('style');\n      var value = styles.serialize(styles.parse(rawValue), $elm[0].nodeName);\n      if (!value) {\n        value = null;\n      }\n      $elm.attr('data-mce-style', value);\n    };\n    var findNodeIndex = function (node, normalized) {\n      var idx = 0, lastNodeType, nodeType;\n      if (node) {\n        for (lastNodeType = node.nodeType, node = node.previousSibling; node; node = node.previousSibling) {\n          nodeType = node.nodeType;\n          if (normalized && nodeType === 3) {\n            if (nodeType === lastNodeType || !node.nodeValue.length) {\n              continue;\n            }\n          }\n          idx++;\n          lastNodeType = nodeType;\n        }\n      }\n      return idx;\n    };\n    var DOMUtils = function (doc, settings) {\n      if (settings === void 0) {\n        settings = {};\n      }\n      var addedStyles = {};\n      var win = window;\n      var files = {};\n      var counter = 0;\n      var stdMode = true;\n      var boxModel = true;\n      var styleSheetLoader = instance.forElement(SugarElement.fromDom(doc), {\n        contentCssCors: settings.contentCssCors,\n        referrerPolicy: settings.referrerPolicy\n      });\n      var boundEvents = [];\n      var schema = settings.schema ? settings.schema : Schema({});\n      var styles = Styles({\n        url_converter: settings.url_converter,\n        url_converter_scope: settings.url_converter_scope\n      }, settings.schema);\n      var events = settings.ownEvents ? new EventUtils() : EventUtils.Event;\n      var blockElementsMap = schema.getBlockElements();\n      var $ = DomQuery.overrideDefaults(function () {\n        return {\n          context: doc,\n          element: self.getRoot()\n        };\n      });\n      var isBlock = function (node) {\n        if (typeof node === 'string') {\n          return !!blockElementsMap[node];\n        } else if (node) {\n          var type = node.nodeType;\n          if (type) {\n            return !!(type === 1 && blockElementsMap[node.nodeName]);\n          }\n        }\n        return false;\n      };\n      var get = function (elm) {\n        return elm && doc && isString$1(elm) ? doc.getElementById(elm) : elm;\n      };\n      var $$ = function (elm) {\n        return $(typeof elm === 'string' ? get(elm) : elm);\n      };\n      var getAttrib = function (elm, name, defaultVal) {\n        var hook, value;\n        var $elm = $$(elm);\n        if ($elm.length) {\n          hook = attrHooks[name];\n          if (hook && hook.get) {\n            value = hook.get($elm, name);\n          } else {\n            value = $elm.attr(name);\n          }\n        }\n        if (typeof value === 'undefined') {\n          value = defaultVal || '';\n        }\n        return value;\n      };\n      var getAttribs = function (elm) {\n        var node = get(elm);\n        if (!node) {\n          return [];\n        }\n        return node.attributes;\n      };\n      var setAttrib = function (elm, name, value) {\n        if (value === '') {\n          value = null;\n        }\n        var $elm = $$(elm);\n        var originalValue = $elm.attr(name);\n        if (!$elm.length) {\n          return;\n        }\n        var hook = attrHooks[name];\n        if (hook && hook.set) {\n          hook.set($elm, value, name);\n        } else {\n          $elm.attr(name, value);\n        }\n        if (originalValue !== value && settings.onSetAttrib) {\n          settings.onSetAttrib({\n            attrElm: $elm,\n            attrName: name,\n            attrValue: value\n          });\n        }\n      };\n      var clone = function (node, deep) {\n        if (!isIE || node.nodeType !== 1 || deep) {\n          return node.cloneNode(deep);\n        } else {\n          var clone_1 = doc.createElement(node.nodeName);\n          each$f(getAttribs(node), function (attr) {\n            setAttrib(clone_1, attr.nodeName, getAttrib(node, attr.nodeName));\n          });\n          return clone_1;\n        }\n      };\n      var getRoot = function () {\n        return settings.root_element || doc.body;\n      };\n      var getViewPort = function (argWin) {\n        var vp = getBounds(argWin);\n        return {\n          x: vp.x,\n          y: vp.y,\n          w: vp.width,\n          h: vp.height\n        };\n      };\n      var getPos$1 = function (elm, rootElm) {\n        return getPos(doc.body, get(elm), rootElm);\n      };\n      var setStyle = function (elm, name, value) {\n        var $elm = isString$1(name) ? $$(elm).css(name, value) : $$(elm).css(name);\n        if (settings.update_styles) {\n          updateInternalStyleAttr(styles, $elm);\n        }\n      };\n      var setStyles = function (elm, stylesArg) {\n        var $elm = $$(elm).css(stylesArg);\n        if (settings.update_styles) {\n          updateInternalStyleAttr(styles, $elm);\n        }\n      };\n      var getStyle = function (elm, name, computed) {\n        var $elm = $$(elm);\n        if (computed) {\n          return $elm.css(name);\n        }\n        name = name.replace(/-(\\D)/g, function (a, b) {\n          return b.toUpperCase();\n        });\n        if (name === 'float') {\n          name = Env.browser.isIE() ? 'styleFloat' : 'cssFloat';\n        }\n        return $elm[0] && $elm[0].style ? $elm[0].style[name] : undefined;\n      };\n      var getSize = function (elm) {\n        var w, h;\n        elm = get(elm);\n        w = getStyle(elm, 'width');\n        h = getStyle(elm, 'height');\n        if (w.indexOf('px') === -1) {\n          w = 0;\n        }\n        if (h.indexOf('px') === -1) {\n          h = 0;\n        }\n        return {\n          w: parseInt(w, 10) || elm.offsetWidth || elm.clientWidth,\n          h: parseInt(h, 10) || elm.offsetHeight || elm.clientHeight\n        };\n      };\n      var getRect = function (elm) {\n        elm = get(elm);\n        var pos = getPos$1(elm);\n        var size = getSize(elm);\n        return {\n          x: pos.x,\n          y: pos.y,\n          w: size.w,\n          h: size.h\n        };\n      };\n      var is = function (elm, selector) {\n        var i;\n        if (!elm) {\n          return false;\n        }\n        if (!Array.isArray(elm)) {\n          if (selector === '*') {\n            return elm.nodeType === 1;\n          }\n          if (simpleSelectorRe.test(selector)) {\n            var selectors = selector.toLowerCase().split(/,/);\n            var elmName = elm.nodeName.toLowerCase();\n            for (i = selectors.length - 1; i >= 0; i--) {\n              if (selectors[i] === elmName) {\n                return true;\n              }\n            }\n            return false;\n          }\n          if (elm.nodeType && elm.nodeType !== 1) {\n            return false;\n          }\n        }\n        var elms = !Array.isArray(elm) ? [elm] : elm;\n        return Sizzle(selector, elms[0].ownerDocument || elms[0], null, elms).length > 0;\n      };\n      var getParents = function (elm, selector, root, collect) {\n        var result = [];\n        var selectorVal;\n        var node = get(elm);\n        collect = collect === undefined;\n        root = root || (getRoot().nodeName !== 'BODY' ? getRoot().parentNode : null);\n        if (Tools.is(selector, 'string')) {\n          selectorVal = selector;\n          if (selector === '*') {\n            selector = function (node) {\n              return node.nodeType === 1;\n            };\n          } else {\n            selector = function (node) {\n              return is(node, selectorVal);\n            };\n          }\n        }\n        while (node) {\n          if (node === root || isNullable(node.nodeType) || isDocument$1(node) || isDocumentFragment(node)) {\n            break;\n          }\n          if (!selector || typeof selector === 'function' && selector(node)) {\n            if (collect) {\n              result.push(node);\n            } else {\n              return [node];\n            }\n          }\n          node = node.parentNode;\n        }\n        return collect ? result : null;\n      };\n      var getParent = function (node, selector, root) {\n        var parents = getParents(node, selector, root, false);\n        return parents && parents.length > 0 ? parents[0] : null;\n      };\n      var _findSib = function (node, selector, name) {\n        var func = selector;\n        if (node) {\n          if (typeof selector === 'string') {\n            func = function (node) {\n              return is(node, selector);\n            };\n          }\n          for (node = node[name]; node; node = node[name]) {\n            if (typeof func === 'function' && func(node)) {\n              return node;\n            }\n          }\n        }\n        return null;\n      };\n      var getNext = function (node, selector) {\n        return _findSib(node, selector, 'nextSibling');\n      };\n      var getPrev = function (node, selector) {\n        return _findSib(node, selector, 'previousSibling');\n      };\n      var select = function (selector, scope) {\n        return Sizzle(selector, get(scope) || settings.root_element || doc, []);\n      };\n      var run = function (elm, func, scope) {\n        var result;\n        var node = typeof elm === 'string' ? get(elm) : elm;\n        if (!node) {\n          return false;\n        }\n        if (Tools.isArray(node) && (node.length || node.length === 0)) {\n          result = [];\n          each$f(node, function (elm, i) {\n            if (elm) {\n              result.push(func.call(scope, typeof elm === 'string' ? get(elm) : elm, i));\n            }\n          });\n          return result;\n        }\n        var context = scope ? scope : this;\n        return func.call(context, node);\n      };\n      var setAttribs = function (elm, attrs) {\n        $$(elm).each(function (i, node) {\n          each$f(attrs, function (value, name) {\n            setAttrib(node, name, value);\n          });\n        });\n      };\n      var setHTML = function (elm, html) {\n        var $elm = $$(elm);\n        if (isIE) {\n          $elm.each(function (i, target) {\n            if (target.canHaveHTML === false) {\n              return;\n            }\n            while (target.firstChild) {\n              target.removeChild(target.firstChild);\n            }\n            try {\n              target.innerHTML = '<br>' + html;\n              target.removeChild(target.firstChild);\n            } catch (ex) {\n              DomQuery('<div></div>').html('<br>' + html).contents().slice(1).appendTo(target);\n            }\n            return html;\n          });\n        } else {\n          $elm.html(html);\n        }\n      };\n      var add = function (parentElm, name, attrs, html, create) {\n        return run(parentElm, function (parentElm) {\n          var newElm = typeof name === 'string' ? doc.createElement(name) : name;\n          setAttribs(newElm, attrs);\n          if (html) {\n            if (typeof html !== 'string' && html.nodeType) {\n              newElm.appendChild(html);\n            } else if (typeof html === 'string') {\n              setHTML(newElm, html);\n            }\n          }\n          return !create ? parentElm.appendChild(newElm) : newElm;\n        });\n      };\n      var create = function (name, attrs, html) {\n        return add(doc.createElement(name), name, attrs, html, true);\n      };\n      var decode = Entities.decode;\n      var encode = Entities.encodeAllRaw;\n      var createHTML = function (name, attrs, html) {\n        var outHtml = '', key;\n        outHtml += '<' + name;\n        for (key in attrs) {\n          if (hasNonNullableKey(attrs, key)) {\n            outHtml += ' ' + key + '=\"' + encode(attrs[key]) + '\"';\n          }\n        }\n        if (typeof html !== 'undefined') {\n          return outHtml + '>' + html + '</' + name + '>';\n        }\n        return outHtml + ' />';\n      };\n      var createFragment = function (html) {\n        var node;\n        var container = doc.createElement('div');\n        var frag = doc.createDocumentFragment();\n        frag.appendChild(container);\n        if (html) {\n          container.innerHTML = html;\n        }\n        while (node = container.firstChild) {\n          frag.appendChild(node);\n        }\n        frag.removeChild(container);\n        return frag;\n      };\n      var remove = function (node, keepChildren) {\n        var $node = $$(node);\n        if (keepChildren) {\n          $node.each(function () {\n            var child;\n            while (child = this.firstChild) {\n              if (child.nodeType === 3 && child.data.length === 0) {\n                this.removeChild(child);\n              } else {\n                this.parentNode.insertBefore(child, this);\n              }\n            }\n          }).remove();\n        } else {\n          $node.remove();\n        }\n        return $node.length > 1 ? $node.toArray() : $node[0];\n      };\n      var removeAllAttribs = function (e) {\n        return run(e, function (e) {\n          var i;\n          var attrs = e.attributes;\n          for (i = attrs.length - 1; i >= 0; i--) {\n            e.removeAttributeNode(attrs.item(i));\n          }\n        });\n      };\n      var parseStyle = function (cssText) {\n        return styles.parse(cssText);\n      };\n      var serializeStyle = function (stylesArg, name) {\n        return styles.serialize(stylesArg, name);\n      };\n      var addStyle = function (cssText) {\n        var head, styleElm;\n        if (self !== DOMUtils.DOM && doc === document) {\n          if (addedStyles[cssText]) {\n            return;\n          }\n          addedStyles[cssText] = true;\n        }\n        styleElm = doc.getElementById('mceDefaultStyles');\n        if (!styleElm) {\n          styleElm = doc.createElement('style');\n          styleElm.id = 'mceDefaultStyles';\n          styleElm.type = 'text/css';\n          head = doc.getElementsByTagName('head')[0];\n          if (head.firstChild) {\n            head.insertBefore(styleElm, head.firstChild);\n          } else {\n            head.appendChild(styleElm);\n          }\n        }\n        if (styleElm.styleSheet) {\n          styleElm.styleSheet.cssText += cssText;\n        } else {\n          styleElm.appendChild(doc.createTextNode(cssText));\n        }\n      };\n      var loadCSS = function (urls) {\n        if (!urls) {\n          urls = '';\n        }\n        each$k(urls.split(','), function (url) {\n          files[url] = true;\n          styleSheetLoader.load(url, noop);\n        });\n      };\n      var toggleClass = function (elm, cls, state) {\n        $$(elm).toggleClass(cls, state).each(function () {\n          if (this.className === '') {\n            DomQuery(this).attr('class', null);\n          }\n        });\n      };\n      var addClass = function (elm, cls) {\n        $$(elm).addClass(cls);\n      };\n      var removeClass = function (elm, cls) {\n        toggleClass(elm, cls, false);\n      };\n      var hasClass = function (elm, cls) {\n        return $$(elm).hasClass(cls);\n      };\n      var show = function (elm) {\n        $$(elm).show();\n      };\n      var hide = function (elm) {\n        $$(elm).hide();\n      };\n      var isHidden = function (elm) {\n        return $$(elm).css('display') === 'none';\n      };\n      var uniqueId = function (prefix) {\n        return (!prefix ? 'mce_' : prefix) + counter++;\n      };\n      var getOuterHTML = function (elm) {\n        var node = typeof elm === 'string' ? get(elm) : elm;\n        return isElement$5(node) ? node.outerHTML : DomQuery('<div></div>').append(DomQuery(node).clone()).html();\n      };\n      var setOuterHTML = function (elm, html) {\n        $$(elm).each(function () {\n          try {\n            if ('outerHTML' in this) {\n              this.outerHTML = html;\n              return;\n            }\n          } catch (ex) {\n          }\n          remove(DomQuery(this).html(html), true);\n        });\n      };\n      var insertAfter = function (node, reference) {\n        var referenceNode = get(reference);\n        return run(node, function (node) {\n          var parent = referenceNode.parentNode;\n          var nextSibling = referenceNode.nextSibling;\n          if (nextSibling) {\n            parent.insertBefore(node, nextSibling);\n          } else {\n            parent.appendChild(node);\n          }\n          return node;\n        });\n      };\n      var replace = function (newElm, oldElm, keepChildren) {\n        return run(oldElm, function (oldElm) {\n          if (Tools.is(oldElm, 'array')) {\n            newElm = newElm.cloneNode(true);\n          }\n          if (keepChildren) {\n            each$f(grep$1(oldElm.childNodes), function (node) {\n              newElm.appendChild(node);\n            });\n          }\n          return oldElm.parentNode.replaceChild(newElm, oldElm);\n        });\n      };\n      var rename = function (elm, name) {\n        var newElm;\n        if (elm.nodeName !== name.toUpperCase()) {\n          newElm = create(name);\n          each$f(getAttribs(elm), function (attrNode) {\n            setAttrib(newElm, attrNode.nodeName, getAttrib(elm, attrNode.nodeName));\n          });\n          replace(newElm, elm, true);\n        }\n        return newElm || elm;\n      };\n      var findCommonAncestor = function (a, b) {\n        var ps = a, pe;\n        while (ps) {\n          pe = b;\n          while (pe && ps !== pe) {\n            pe = pe.parentNode;\n          }\n          if (ps === pe) {\n            break;\n          }\n          ps = ps.parentNode;\n        }\n        if (!ps && a.ownerDocument) {\n          return a.ownerDocument.documentElement;\n        }\n        return ps;\n      };\n      var toHex = function (rgbVal) {\n        return styles.toHex(Tools.trim(rgbVal));\n      };\n      var isNonEmptyElement = function (node) {\n        if (isElement$5(node)) {\n          var isNamedAnchor = node.nodeName.toLowerCase() === 'a' && !getAttrib(node, 'href') && getAttrib(node, 'id');\n          if (getAttrib(node, 'name') || getAttrib(node, 'data-mce-bookmark') || isNamedAnchor) {\n            return true;\n          }\n        }\n        return false;\n      };\n      var isEmpty = function (node, elements) {\n        var type, name, brCount = 0;\n        if (isNonEmptyElement(node)) {\n          return false;\n        }\n        node = node.firstChild;\n        if (node) {\n          var walker = new DomTreeWalker(node, node.parentNode);\n          var whitespace = schema ? schema.getWhiteSpaceElements() : {};\n          elements = elements || (schema ? schema.getNonEmptyElements() : null);\n          do {\n            type = node.nodeType;\n            if (isElement$5(node)) {\n              var bogusVal = node.getAttribute('data-mce-bogus');\n              if (bogusVal) {\n                node = walker.next(bogusVal === 'all');\n                continue;\n              }\n              name = node.nodeName.toLowerCase();\n              if (elements && elements[name]) {\n                if (name === 'br') {\n                  brCount++;\n                  node = walker.next();\n                  continue;\n                }\n                return false;\n              }\n              if (isNonEmptyElement(node)) {\n                return false;\n              }\n            }\n            if (type === 8) {\n              return false;\n            }\n            if (type === 3 && !isWhitespaceText(node.nodeValue)) {\n              return false;\n            }\n            if (type === 3 && node.parentNode && whitespace[node.parentNode.nodeName] && isWhitespaceText(node.nodeValue)) {\n              return false;\n            }\n            node = walker.next();\n          } while (node);\n        }\n        return brCount <= 1;\n      };\n      var createRng = function () {\n        return doc.createRange();\n      };\n      var split = function (parentElm, splitElm, replacementElm) {\n        var range = createRng();\n        var beforeFragment;\n        var afterFragment;\n        var parentNode;\n        if (parentElm && splitElm) {\n          range.setStart(parentElm.parentNode, findNodeIndex(parentElm));\n          range.setEnd(splitElm.parentNode, findNodeIndex(splitElm));\n          beforeFragment = range.extractContents();\n          range = createRng();\n          range.setStart(splitElm.parentNode, findNodeIndex(splitElm) + 1);\n          range.setEnd(parentElm.parentNode, findNodeIndex(parentElm) + 1);\n          afterFragment = range.extractContents();\n          parentNode = parentElm.parentNode;\n          parentNode.insertBefore(trimNode(self, beforeFragment), parentElm);\n          if (replacementElm) {\n            parentNode.insertBefore(replacementElm, parentElm);\n          } else {\n            parentNode.insertBefore(splitElm, parentElm);\n          }\n          parentNode.insertBefore(trimNode(self, afterFragment), parentElm);\n          remove(parentElm);\n          return replacementElm || splitElm;\n        }\n      };\n      var bind = function (target, name, func, scope) {\n        if (Tools.isArray(target)) {\n          var i = target.length;\n          var rv = [];\n          while (i--) {\n            rv[i] = bind(target[i], name, func, scope);\n          }\n          return rv;\n        }\n        if (settings.collect && (target === doc || target === win)) {\n          boundEvents.push([\n            target,\n            name,\n            func,\n            scope\n          ]);\n        }\n        var output = events.bind(target, name, func, scope || self);\n        return output;\n      };\n      var unbind = function (target, name, func) {\n        if (Tools.isArray(target)) {\n          var i = target.length;\n          var rv = [];\n          while (i--) {\n            rv[i] = unbind(target[i], name, func);\n          }\n          return rv;\n        } else {\n          if (boundEvents.length > 0 && (target === doc || target === win)) {\n            var i = boundEvents.length;\n            while (i--) {\n              var item = boundEvents[i];\n              if (target === item[0] && (!name || name === item[1]) && (!func || func === item[2])) {\n                events.unbind(item[0], item[1], item[2]);\n              }\n            }\n          }\n          return events.unbind(target, name, func);\n        }\n      };\n      var fire = function (target, name, evt) {\n        return events.fire(target, name, evt);\n      };\n      var getContentEditable = function (node) {\n        if (node && isElement$5(node)) {\n          var contentEditable = node.getAttribute('data-mce-contenteditable');\n          if (contentEditable && contentEditable !== 'inherit') {\n            return contentEditable;\n          }\n          return node.contentEditable !== 'inherit' ? node.contentEditable : null;\n        } else {\n          return null;\n        }\n      };\n      var getContentEditableParent = function (node) {\n        var root = getRoot();\n        var state = null;\n        for (; node && node !== root; node = node.parentNode) {\n          state = getContentEditable(node);\n          if (state !== null) {\n            break;\n          }\n        }\n        return state;\n      };\n      var destroy = function () {\n        if (boundEvents.length > 0) {\n          var i = boundEvents.length;\n          while (i--) {\n            var item = boundEvents[i];\n            events.unbind(item[0], item[1], item[2]);\n          }\n        }\n        each$j(files, function (_, url) {\n          styleSheetLoader.unload(url);\n          delete files[url];\n        });\n        if (Sizzle.setDocument) {\n          Sizzle.setDocument();\n        }\n      };\n      var isChildOf = function (node, parent) {\n        if (!isIE) {\n          return node === parent || parent.contains(node);\n        } else {\n          while (node) {\n            if (parent === node) {\n              return true;\n            }\n            node = node.parentNode;\n          }\n          return false;\n        }\n      };\n      var dumpRng = function (r) {\n        return 'startContainer: ' + r.startContainer.nodeName + ', startOffset: ' + r.startOffset + ', endContainer: ' + r.endContainer.nodeName + ', endOffset: ' + r.endOffset;\n      };\n      var self = {\n        doc: doc,\n        settings: settings,\n        win: win,\n        files: files,\n        stdMode: stdMode,\n        boxModel: boxModel,\n        styleSheetLoader: styleSheetLoader,\n        boundEvents: boundEvents,\n        styles: styles,\n        schema: schema,\n        events: events,\n        isBlock: isBlock,\n        $: $,\n        $$: $$,\n        root: null,\n        clone: clone,\n        getRoot: getRoot,\n        getViewPort: getViewPort,\n        getRect: getRect,\n        getSize: getSize,\n        getParent: getParent,\n        getParents: getParents,\n        get: get,\n        getNext: getNext,\n        getPrev: getPrev,\n        select: select,\n        is: is,\n        add: add,\n        create: create,\n        createHTML: createHTML,\n        createFragment: createFragment,\n        remove: remove,\n        setStyle: setStyle,\n        getStyle: getStyle,\n        setStyles: setStyles,\n        removeAllAttribs: removeAllAttribs,\n        setAttrib: setAttrib,\n        setAttribs: setAttribs,\n        getAttrib: getAttrib,\n        getPos: getPos$1,\n        parseStyle: parseStyle,\n        serializeStyle: serializeStyle,\n        addStyle: addStyle,\n        loadCSS: loadCSS,\n        addClass: addClass,\n        removeClass: removeClass,\n        hasClass: hasClass,\n        toggleClass: toggleClass,\n        show: show,\n        hide: hide,\n        isHidden: isHidden,\n        uniqueId: uniqueId,\n        setHTML: setHTML,\n        getOuterHTML: getOuterHTML,\n        setOuterHTML: setOuterHTML,\n        decode: decode,\n        encode: encode,\n        insertAfter: insertAfter,\n        replace: replace,\n        rename: rename,\n        findCommonAncestor: findCommonAncestor,\n        toHex: toHex,\n        run: run,\n        getAttribs: getAttribs,\n        isEmpty: isEmpty,\n        createRng: createRng,\n        nodeIndex: findNodeIndex,\n        split: split,\n        bind: bind,\n        unbind: unbind,\n        fire: fire,\n        getContentEditable: getContentEditable,\n        getContentEditableParent: getContentEditableParent,\n        destroy: destroy,\n        isChildOf: isChildOf,\n        dumpRng: dumpRng\n      };\n      var attrHooks = setupAttrHooks(styles, settings, constant(self));\n      return self;\n    };\n    DOMUtils.DOM = DOMUtils(document);\n    DOMUtils.nodeIndex = findNodeIndex;\n\n    var DOM$a = DOMUtils.DOM;\n    var each$e = Tools.each, grep = Tools.grep;\n    var QUEUED = 0;\n    var LOADING = 1;\n    var LOADED = 2;\n    var FAILED = 3;\n    var ScriptLoader = function () {\n      function ScriptLoader(settings) {\n        if (settings === void 0) {\n          settings = {};\n        }\n        this.states = {};\n        this.queue = [];\n        this.scriptLoadedCallbacks = {};\n        this.queueLoadedCallbacks = [];\n        this.loading = 0;\n        this.settings = settings;\n      }\n      ScriptLoader.prototype._setReferrerPolicy = function (referrerPolicy) {\n        this.settings.referrerPolicy = referrerPolicy;\n      };\n      ScriptLoader.prototype.loadScript = function (url, success, failure) {\n        var dom = DOM$a;\n        var elm;\n        var cleanup = function () {\n          dom.remove(id);\n          if (elm) {\n            elm.onerror = elm.onload = elm = null;\n          }\n        };\n        var done = function () {\n          cleanup();\n          success();\n        };\n        var error = function () {\n          cleanup();\n          if (isFunction(failure)) {\n            failure();\n          } else {\n            if (typeof console !== 'undefined' && console.log) {\n              console.log('Failed to load script: ' + url);\n            }\n          }\n        };\n        var id = dom.uniqueId();\n        elm = document.createElement('script');\n        elm.id = id;\n        elm.type = 'text/javascript';\n        elm.src = Tools._addCacheSuffix(url);\n        if (this.settings.referrerPolicy) {\n          dom.setAttrib(elm, 'referrerpolicy', this.settings.referrerPolicy);\n        }\n        elm.onload = done;\n        elm.onerror = error;\n        (document.getElementsByTagName('head')[0] || document.body).appendChild(elm);\n      };\n      ScriptLoader.prototype.isDone = function (url) {\n        return this.states[url] === LOADED;\n      };\n      ScriptLoader.prototype.markDone = function (url) {\n        this.states[url] = LOADED;\n      };\n      ScriptLoader.prototype.add = function (url, success, scope, failure) {\n        var state = this.states[url];\n        this.queue.push(url);\n        if (state === undefined) {\n          this.states[url] = QUEUED;\n        }\n        if (success) {\n          if (!this.scriptLoadedCallbacks[url]) {\n            this.scriptLoadedCallbacks[url] = [];\n          }\n          this.scriptLoadedCallbacks[url].push({\n            success: success,\n            failure: failure,\n            scope: scope || this\n          });\n        }\n      };\n      ScriptLoader.prototype.load = function (url, success, scope, failure) {\n        return this.add(url, success, scope, failure);\n      };\n      ScriptLoader.prototype.remove = function (url) {\n        delete this.states[url];\n        delete this.scriptLoadedCallbacks[url];\n      };\n      ScriptLoader.prototype.loadQueue = function (success, scope, failure) {\n        this.loadScripts(this.queue, success, scope, failure);\n      };\n      ScriptLoader.prototype.loadScripts = function (scripts, success, scope, failure) {\n        var self = this;\n        var failures = [];\n        var execCallbacks = function (name, url) {\n          each$e(self.scriptLoadedCallbacks[url], function (callback) {\n            if (isFunction(callback[name])) {\n              callback[name].call(callback.scope);\n            }\n          });\n          self.scriptLoadedCallbacks[url] = undefined;\n        };\n        self.queueLoadedCallbacks.push({\n          success: success,\n          failure: failure,\n          scope: scope || this\n        });\n        var loadScripts = function () {\n          var loadingScripts = grep(scripts);\n          scripts.length = 0;\n          each$e(loadingScripts, function (url) {\n            if (self.states[url] === LOADED) {\n              execCallbacks('success', url);\n              return;\n            }\n            if (self.states[url] === FAILED) {\n              execCallbacks('failure', url);\n              return;\n            }\n            if (self.states[url] !== LOADING) {\n              self.states[url] = LOADING;\n              self.loading++;\n              self.loadScript(url, function () {\n                self.states[url] = LOADED;\n                self.loading--;\n                execCallbacks('success', url);\n                loadScripts();\n              }, function () {\n                self.states[url] = FAILED;\n                self.loading--;\n                failures.push(url);\n                execCallbacks('failure', url);\n                loadScripts();\n              });\n            }\n          });\n          if (!self.loading) {\n            var notifyCallbacks = self.queueLoadedCallbacks.slice(0);\n            self.queueLoadedCallbacks.length = 0;\n            each$e(notifyCallbacks, function (callback) {\n              if (failures.length === 0) {\n                if (isFunction(callback.success)) {\n                  callback.success.call(callback.scope);\n                }\n              } else {\n                if (isFunction(callback.failure)) {\n                  callback.failure.call(callback.scope, failures);\n                }\n              }\n            });\n          }\n        };\n        loadScripts();\n      };\n      ScriptLoader.ScriptLoader = new ScriptLoader();\n      return ScriptLoader;\n    }();\n\n    var Cell = function (initial) {\n      var value = initial;\n      var get = function () {\n        return value;\n      };\n      var set = function (v) {\n        value = v;\n      };\n      return {\n        get: get,\n        set: set\n      };\n    };\n\n    var isRaw = function (str) {\n      return isObject(str) && has$2(str, 'raw');\n    };\n    var isTokenised = function (str) {\n      return isArray$1(str) && str.length > 1;\n    };\n    var data = {};\n    var currentCode = Cell('en');\n    var getLanguageData = function () {\n      return get$9(data, currentCode.get());\n    };\n    var getData = function () {\n      return map$2(data, function (value) {\n        return __assign({}, value);\n      });\n    };\n    var setCode = function (newCode) {\n      if (newCode) {\n        currentCode.set(newCode);\n      }\n    };\n    var getCode = function () {\n      return currentCode.get();\n    };\n    var add$4 = function (code, items) {\n      var langData = data[code];\n      if (!langData) {\n        data[code] = langData = {};\n      }\n      each$j(items, function (translation, name) {\n        langData[name.toLowerCase()] = translation;\n      });\n    };\n    var translate = function (text) {\n      var langData = getLanguageData().getOr({});\n      var toString = function (obj) {\n        if (isFunction(obj)) {\n          return Object.prototype.toString.call(obj);\n        }\n        return !isEmpty(obj) ? '' + obj : '';\n      };\n      var isEmpty = function (text) {\n        return text === '' || text === null || text === undefined;\n      };\n      var getLangData = function (text) {\n        var textstr = toString(text);\n        return get$9(langData, textstr.toLowerCase()).map(toString).getOr(textstr);\n      };\n      var removeContext = function (str) {\n        return str.replace(/{context:\\w+}$/, '');\n      };\n      if (isEmpty(text)) {\n        return '';\n      }\n      if (isRaw(text)) {\n        return toString(text.raw);\n      }\n      if (isTokenised(text)) {\n        var values_1 = text.slice(1);\n        var substitued = getLangData(text[0]).replace(/\\{([0-9]+)\\}/g, function ($1, $2) {\n          return has$2(values_1, $2) ? toString(values_1[$2]) : $1;\n        });\n        return removeContext(substitued);\n      }\n      return removeContext(getLangData(text));\n    };\n    var isRtl$1 = function () {\n      return getLanguageData().bind(function (items) {\n        return get$9(items, '_dir');\n      }).exists(function (dir) {\n        return dir === 'rtl';\n      });\n    };\n    var hasCode = function (code) {\n      return has$2(data, code);\n    };\n    var I18n = {\n      getData: getData,\n      setCode: setCode,\n      getCode: getCode,\n      add: add$4,\n      translate: translate,\n      isRtl: isRtl$1,\n      hasCode: hasCode\n    };\n\n    var AddOnManager = function () {\n      var items = [];\n      var urls = {};\n      var lookup = {};\n      var _listeners = [];\n      var runListeners = function (name, state) {\n        var matchedListeners = filter$4(_listeners, function (listener) {\n          return listener.name === name && listener.state === state;\n        });\n        each$k(matchedListeners, function (listener) {\n          return listener.callback();\n        });\n      };\n      var get = function (name) {\n        if (lookup[name]) {\n          return lookup[name].instance;\n        }\n        return undefined;\n      };\n      var dependencies = function (name) {\n        var result;\n        if (lookup[name]) {\n          result = lookup[name].dependencies;\n        }\n        return result || [];\n      };\n      var requireLangPack = function (name, languages) {\n        if (AddOnManager.languageLoad !== false) {\n          waitFor(name, function () {\n            var language = I18n.getCode();\n            var wrappedLanguages = ',' + (languages || '') + ',';\n            if (!language || languages && wrappedLanguages.indexOf(',' + language + ',') === -1) {\n              return;\n            }\n            ScriptLoader.ScriptLoader.add(urls[name] + '/langs/' + language + '.js');\n          }, 'loaded');\n        }\n      };\n      var add = function (id, addOn, dependencies) {\n        var addOnConstructor = addOn;\n        items.push(addOnConstructor);\n        lookup[id] = {\n          instance: addOnConstructor,\n          dependencies: dependencies\n        };\n        runListeners(id, 'added');\n        return addOnConstructor;\n      };\n      var remove = function (name) {\n        delete urls[name];\n        delete lookup[name];\n      };\n      var createUrl = function (baseUrl, dep) {\n        if (typeof dep === 'object') {\n          return dep;\n        }\n        return typeof baseUrl === 'string' ? {\n          prefix: '',\n          resource: dep,\n          suffix: ''\n        } : {\n          prefix: baseUrl.prefix,\n          resource: dep,\n          suffix: baseUrl.suffix\n        };\n      };\n      var addComponents = function (pluginName, scripts) {\n        var pluginUrl = urls[pluginName];\n        each$k(scripts, function (script) {\n          ScriptLoader.ScriptLoader.add(pluginUrl + '/' + script);\n        });\n      };\n      var loadDependencies = function (name, addOnUrl, success, scope) {\n        var deps = dependencies(name);\n        each$k(deps, function (dep) {\n          var newUrl = createUrl(addOnUrl, dep);\n          load(newUrl.resource, newUrl, undefined, undefined);\n        });\n        if (success) {\n          if (scope) {\n            success.call(scope);\n          } else {\n            success.call(ScriptLoader);\n          }\n        }\n      };\n      var load = function (name, addOnUrl, success, scope, failure) {\n        if (urls[name]) {\n          return;\n        }\n        var urlString = typeof addOnUrl === 'string' ? addOnUrl : addOnUrl.prefix + addOnUrl.resource + addOnUrl.suffix;\n        if (urlString.indexOf('/') !== 0 && urlString.indexOf('://') === -1) {\n          urlString = AddOnManager.baseURL + '/' + urlString;\n        }\n        urls[name] = urlString.substring(0, urlString.lastIndexOf('/'));\n        var done = function () {\n          runListeners(name, 'loaded');\n          loadDependencies(name, addOnUrl, success, scope);\n        };\n        if (lookup[name]) {\n          done();\n        } else {\n          ScriptLoader.ScriptLoader.add(urlString, done, scope, failure);\n        }\n      };\n      var waitFor = function (name, callback, state) {\n        if (state === void 0) {\n          state = 'added';\n        }\n        if (has$2(lookup, name) && state === 'added') {\n          callback();\n        } else if (has$2(urls, name) && state === 'loaded') {\n          callback();\n        } else {\n          _listeners.push({\n            name: name,\n            state: state,\n            callback: callback\n          });\n        }\n      };\n      return {\n        items: items,\n        urls: urls,\n        lookup: lookup,\n        _listeners: _listeners,\n        get: get,\n        dependencies: dependencies,\n        requireLangPack: requireLangPack,\n        add: add,\n        remove: remove,\n        createUrl: createUrl,\n        addComponents: addComponents,\n        load: load,\n        waitFor: waitFor\n      };\n    };\n    AddOnManager.languageLoad = true;\n    AddOnManager.baseURL = '';\n    AddOnManager.PluginManager = AddOnManager();\n    AddOnManager.ThemeManager = AddOnManager();\n\n    var singleton = function (doRevoke) {\n      var subject = Cell(Optional.none());\n      var revoke = function () {\n        return subject.get().each(doRevoke);\n      };\n      var clear = function () {\n        revoke();\n        subject.set(Optional.none());\n      };\n      var isSet = function () {\n        return subject.get().isSome();\n      };\n      var get = function () {\n        return subject.get();\n      };\n      var set = function (s) {\n        revoke();\n        subject.set(Optional.some(s));\n      };\n      return {\n        clear: clear,\n        isSet: isSet,\n        get: get,\n        set: set\n      };\n    };\n    var value = function () {\n      var subject = singleton(noop);\n      var on = function (f) {\n        return subject.get().each(f);\n      };\n      return __assign(__assign({}, subject), { on: on });\n    };\n\n    var first = function (fn, rate) {\n      var timer = null;\n      var cancel = function () {\n        if (!isNull(timer)) {\n          clearTimeout(timer);\n          timer = null;\n        }\n      };\n      var throttle = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        if (isNull(timer)) {\n          timer = setTimeout(function () {\n            timer = null;\n            fn.apply(null, args);\n          }, rate);\n        }\n      };\n      return {\n        cancel: cancel,\n        throttle: throttle\n      };\n    };\n    var last = function (fn, rate) {\n      var timer = null;\n      var cancel = function () {\n        if (!isNull(timer)) {\n          clearTimeout(timer);\n          timer = null;\n        }\n      };\n      var throttle = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        cancel();\n        timer = setTimeout(function () {\n          timer = null;\n          fn.apply(null, args);\n        }, rate);\n      };\n      return {\n        cancel: cancel,\n        throttle: throttle\n      };\n    };\n\n    var read$4 = function (element, attr) {\n      var value = get$6(element, attr);\n      return value === undefined || value === '' ? [] : value.split(' ');\n    };\n    var add$3 = function (element, attr, id) {\n      var old = read$4(element, attr);\n      var nu = old.concat([id]);\n      set$1(element, attr, nu.join(' '));\n      return true;\n    };\n    var remove$5 = function (element, attr, id) {\n      var nu = filter$4(read$4(element, attr), function (v) {\n        return v !== id;\n      });\n      if (nu.length > 0) {\n        set$1(element, attr, nu.join(' '));\n      } else {\n        remove$6(element, attr);\n      }\n      return false;\n    };\n\n    var supports = function (element) {\n      return element.dom.classList !== undefined;\n    };\n    var get$4 = function (element) {\n      return read$4(element, 'class');\n    };\n    var add$2 = function (element, clazz) {\n      return add$3(element, 'class', clazz);\n    };\n    var remove$4 = function (element, clazz) {\n      return remove$5(element, 'class', clazz);\n    };\n\n    var add$1 = function (element, clazz) {\n      if (supports(element)) {\n        element.dom.classList.add(clazz);\n      } else {\n        add$2(element, clazz);\n      }\n    };\n    var cleanClass = function (element) {\n      var classList = supports(element) ? element.dom.classList : get$4(element);\n      if (classList.length === 0) {\n        remove$6(element, 'class');\n      }\n    };\n    var remove$3 = function (element, clazz) {\n      if (supports(element)) {\n        var classList = element.dom.classList;\n        classList.remove(clazz);\n      } else {\n        remove$4(element, clazz);\n      }\n      cleanClass(element);\n    };\n    var has = function (element, clazz) {\n      return supports(element) && element.dom.classList.contains(clazz);\n    };\n\n    var descendants$1 = function (scope, predicate) {\n      var result = [];\n      each$k(children(scope), function (x) {\n        if (predicate(x)) {\n          result = result.concat([x]);\n        }\n        result = result.concat(descendants$1(x, predicate));\n      });\n      return result;\n    };\n\n    var descendants = function (scope, selector) {\n      return all(selector, scope);\n    };\n\n    var annotation = constant('mce-annotation');\n    var dataAnnotation = constant('data-mce-annotation');\n    var dataAnnotationId = constant('data-mce-annotation-uid');\n\n    var identify = function (editor, annotationName) {\n      var rng = editor.selection.getRng();\n      var start = SugarElement.fromDom(rng.startContainer);\n      var root = SugarElement.fromDom(editor.getBody());\n      var selector = annotationName.fold(function () {\n        return '.' + annotation();\n      }, function (an) {\n        return '[' + dataAnnotation() + '=\"' + an + '\"]';\n      });\n      var newStart = child$1(start, rng.startOffset).getOr(start);\n      var closest = closest$2(newStart, selector, function (n) {\n        return eq(n, root);\n      });\n      var getAttr = function (c, property) {\n        if (has$1(c, property)) {\n          return Optional.some(get$6(c, property));\n        } else {\n          return Optional.none();\n        }\n      };\n      return closest.bind(function (c) {\n        return getAttr(c, '' + dataAnnotationId()).bind(function (uid) {\n          return getAttr(c, '' + dataAnnotation()).map(function (name) {\n            var elements = findMarkers(editor, uid);\n            return {\n              uid: uid,\n              name: name,\n              elements: elements\n            };\n          });\n        });\n      });\n    };\n    var isAnnotation = function (elem) {\n      return isElement$6(elem) && has(elem, annotation());\n    };\n    var findMarkers = function (editor, uid) {\n      var body = SugarElement.fromDom(editor.getBody());\n      return descendants(body, '[' + dataAnnotationId() + '=\"' + uid + '\"]');\n    };\n    var findAll = function (editor, name) {\n      var body = SugarElement.fromDom(editor.getBody());\n      var markers = descendants(body, '[' + dataAnnotation() + '=\"' + name + '\"]');\n      var directory = {};\n      each$k(markers, function (m) {\n        var uid = get$6(m, dataAnnotationId());\n        var nodesAlready = get$9(directory, uid).getOr([]);\n        directory[uid] = nodesAlready.concat([m]);\n      });\n      return directory;\n    };\n\n    var setup$n = function (editor, _registry) {\n      var changeCallbacks = Cell({});\n      var initData = function () {\n        return {\n          listeners: [],\n          previous: value()\n        };\n      };\n      var withCallbacks = function (name, f) {\n        updateCallbacks(name, function (data) {\n          f(data);\n          return data;\n        });\n      };\n      var updateCallbacks = function (name, f) {\n        var callbackMap = changeCallbacks.get();\n        var data = get$9(callbackMap, name).getOrThunk(initData);\n        var outputData = f(data);\n        callbackMap[name] = outputData;\n        changeCallbacks.set(callbackMap);\n      };\n      var fireCallbacks = function (name, uid, elements) {\n        withCallbacks(name, function (data) {\n          each$k(data.listeners, function (f) {\n            return f(true, name, {\n              uid: uid,\n              nodes: map$3(elements, function (elem) {\n                return elem.dom;\n              })\n            });\n          });\n        });\n      };\n      var fireNoAnnotation = function (name) {\n        withCallbacks(name, function (data) {\n          each$k(data.listeners, function (f) {\n            return f(false, name);\n          });\n        });\n      };\n      var onNodeChange = last(function () {\n        var callbackMap = changeCallbacks.get();\n        var annotations = sort(keys(callbackMap));\n        each$k(annotations, function (name) {\n          updateCallbacks(name, function (data) {\n            var prev = data.previous.get();\n            identify(editor, Optional.some(name)).fold(function () {\n              if (prev.isSome()) {\n                fireNoAnnotation(name);\n                data.previous.clear();\n              }\n            }, function (_a) {\n              var uid = _a.uid, name = _a.name, elements = _a.elements;\n              if (!is$1(prev, uid)) {\n                fireCallbacks(name, uid, elements);\n                data.previous.set(uid);\n              }\n            });\n            return {\n              previous: data.previous,\n              listeners: data.listeners\n            };\n          });\n        });\n      }, 30);\n      editor.on('remove', function () {\n        onNodeChange.cancel();\n      });\n      editor.on('NodeChange', function () {\n        onNodeChange.throttle();\n      });\n      var addListener = function (name, f) {\n        updateCallbacks(name, function (data) {\n          return {\n            previous: data.previous,\n            listeners: data.listeners.concat([f])\n          };\n        });\n      };\n      return { addListener: addListener };\n    };\n\n    var setup$m = function (editor, registry) {\n      var identifyParserNode = function (span) {\n        return Optional.from(span.attr(dataAnnotation())).bind(registry.lookup);\n      };\n      editor.on('init', function () {\n        editor.serializer.addNodeFilter('span', function (spans) {\n          each$k(spans, function (span) {\n            identifyParserNode(span).each(function (settings) {\n              if (settings.persistent === false) {\n                span.unwrap();\n              }\n            });\n          });\n        });\n      });\n    };\n\n    var create$7 = function () {\n      var annotations = {};\n      var register = function (name, settings) {\n        annotations[name] = {\n          name: name,\n          settings: settings\n        };\n      };\n      var lookup = function (name) {\n        return get$9(annotations, name).map(function (a) {\n          return a.settings;\n        });\n      };\n      return {\n        register: register,\n        lookup: lookup\n      };\n    };\n\n    var unique = 0;\n    var generate = function (prefix) {\n      var date = new Date();\n      var time = date.getTime();\n      var random = Math.floor(Math.random() * 1000000000);\n      unique++;\n      return prefix + '_' + random + unique + String(time);\n    };\n\n    var add = function (element, classes) {\n      each$k(classes, function (x) {\n        add$1(element, x);\n      });\n    };\n\n    var fromHtml = function (html, scope) {\n      var doc = scope || document;\n      var div = doc.createElement('div');\n      div.innerHTML = html;\n      return children(SugarElement.fromDom(div));\n    };\n    var fromDom$1 = function (nodes) {\n      return map$3(nodes, SugarElement.fromDom);\n    };\n\n    var get$3 = function (element) {\n      return element.dom.innerHTML;\n    };\n    var set = function (element, content) {\n      var owner = owner$1(element);\n      var docDom = owner.dom;\n      var fragment = SugarElement.fromDom(docDom.createDocumentFragment());\n      var contentElements = fromHtml(content, docDom);\n      append(fragment, contentElements);\n      empty(element);\n      append$1(element, fragment);\n    };\n\n    var clone$1 = function (original, isDeep) {\n      return SugarElement.fromDom(original.dom.cloneNode(isDeep));\n    };\n    var shallow = function (original) {\n      return clone$1(original, false);\n    };\n    var deep$1 = function (original) {\n      return clone$1(original, true);\n    };\n\n    var TextWalker = function (startNode, rootNode, isBoundary) {\n      if (isBoundary === void 0) {\n        isBoundary = never;\n      }\n      var walker = new DomTreeWalker(startNode, rootNode);\n      var walk = function (direction) {\n        var next;\n        do {\n          next = walker[direction]();\n        } while (next && !isText$7(next) && !isBoundary(next));\n        return Optional.from(next).filter(isText$7);\n      };\n      return {\n        current: function () {\n          return Optional.from(walker.current()).filter(isText$7);\n        },\n        next: function () {\n          return walk('next');\n        },\n        prev: function () {\n          return walk('prev');\n        },\n        prev2: function () {\n          return walk('prev2');\n        }\n      };\n    };\n\n    var TextSeeker = function (dom, isBoundary) {\n      var isBlockBoundary = isBoundary ? isBoundary : function (node) {\n        return dom.isBlock(node) || isBr$5(node) || isContentEditableFalse$b(node);\n      };\n      var walk = function (node, offset, walker, process) {\n        if (isText$7(node)) {\n          var newOffset = process(node, offset, node.data);\n          if (newOffset !== -1) {\n            return Optional.some({\n              container: node,\n              offset: newOffset\n            });\n          }\n        }\n        return walker().bind(function (next) {\n          return walk(next.container, next.offset, walker, process);\n        });\n      };\n      var backwards = function (node, offset, process, root) {\n        var walker = TextWalker(node, root, isBlockBoundary);\n        return walk(node, offset, function () {\n          return walker.prev().map(function (prev) {\n            return {\n              container: prev,\n              offset: prev.length\n            };\n          });\n        }, process).getOrNull();\n      };\n      var forwards = function (node, offset, process, root) {\n        var walker = TextWalker(node, root, isBlockBoundary);\n        return walk(node, offset, function () {\n          return walker.next().map(function (next) {\n            return {\n              container: next,\n              offset: 0\n            };\n          });\n        }, process).getOrNull();\n      };\n      return {\n        backwards: backwards,\n        forwards: forwards\n      };\n    };\n\n    var round$2 = Math.round;\n    var clone = function (rect) {\n      if (!rect) {\n        return {\n          left: 0,\n          top: 0,\n          bottom: 0,\n          right: 0,\n          width: 0,\n          height: 0\n        };\n      }\n      return {\n        left: round$2(rect.left),\n        top: round$2(rect.top),\n        bottom: round$2(rect.bottom),\n        right: round$2(rect.right),\n        width: round$2(rect.width),\n        height: round$2(rect.height)\n      };\n    };\n    var collapse = function (rect, toStart) {\n      rect = clone(rect);\n      if (toStart) {\n        rect.right = rect.left;\n      } else {\n        rect.left = rect.left + rect.width;\n        rect.right = rect.left;\n      }\n      rect.width = 0;\n      return rect;\n    };\n    var isEqual = function (rect1, rect2) {\n      return rect1.left === rect2.left && rect1.top === rect2.top && rect1.bottom === rect2.bottom && rect1.right === rect2.right;\n    };\n    var isValidOverflow = function (overflowY, rect1, rect2) {\n      return overflowY >= 0 && overflowY <= Math.min(rect1.height, rect2.height) / 2;\n    };\n    var isAbove$1 = function (rect1, rect2) {\n      var halfHeight = Math.min(rect2.height / 2, rect1.height / 2);\n      if (rect1.bottom - halfHeight < rect2.top) {\n        return true;\n      }\n      if (rect1.top > rect2.bottom) {\n        return false;\n      }\n      return isValidOverflow(rect2.top - rect1.bottom, rect1, rect2);\n    };\n    var isBelow$1 = function (rect1, rect2) {\n      if (rect1.top > rect2.bottom) {\n        return true;\n      }\n      if (rect1.bottom < rect2.top) {\n        return false;\n      }\n      return isValidOverflow(rect2.bottom - rect1.top, rect1, rect2);\n    };\n    var containsXY = function (rect, clientX, clientY) {\n      return clientX >= rect.left && clientX <= rect.right && clientY >= rect.top && clientY <= rect.bottom;\n    };\n\n    var clamp$2 = function (value, min, max) {\n      return Math.min(Math.max(value, min), max);\n    };\n\n    var getSelectedNode = function (range) {\n      var startContainer = range.startContainer, startOffset = range.startOffset;\n      if (startContainer.hasChildNodes() && range.endOffset === startOffset + 1) {\n        return startContainer.childNodes[startOffset];\n      }\n      return null;\n    };\n    var getNode$1 = function (container, offset) {\n      if (isElement$5(container) && container.hasChildNodes()) {\n        var childNodes = container.childNodes;\n        var safeOffset = clamp$2(offset, 0, childNodes.length - 1);\n        return childNodes[safeOffset];\n      } else {\n        return container;\n      }\n    };\n    var getNodeUnsafe = function (container, offset) {\n      if (offset < 0 && isElement$5(container) && container.hasChildNodes()) {\n        return undefined;\n      } else {\n        return getNode$1(container, offset);\n      }\n    };\n\n    var extendingChars = new RegExp('[\\u0300-\\u036f\\u0483-\\u0487\\u0488-\\u0489\\u0591-\\u05bd\\u05bf\\u05c1-\\u05c2\\u05c4-\\u05c5\\u05c7\\u0610-\\u061a' + '\\u064b-\\u065f\\u0670\\u06d6-\\u06dc\\u06df-\\u06e4\\u06e7-\\u06e8\\u06ea-\\u06ed\\u0711\\u0730-\\u074a\\u07a6-\\u07b0' + '\\u07eb-\\u07f3\\u0816-\\u0819\\u081b-\\u0823\\u0825-\\u0827\\u0829-\\u082d\\u0859-\\u085b\\u08e3-\\u0902\\u093a\\u093c' + '\\u0941-\\u0948\\u094d\\u0951-\\u0957\\u0962-\\u0963\\u0981\\u09bc\\u09be\\u09c1-\\u09c4\\u09cd\\u09d7\\u09e2-\\u09e3' + '\\u0a01-\\u0a02\\u0a3c\\u0a41-\\u0a42\\u0a47-\\u0a48\\u0a4b-\\u0a4d\\u0a51\\u0a70-\\u0a71\\u0a75\\u0a81-\\u0a82\\u0abc' + '\\u0ac1-\\u0ac5\\u0ac7-\\u0ac8\\u0acd\\u0ae2-\\u0ae3\\u0b01\\u0b3c\\u0b3e\\u0b3f\\u0b41-\\u0b44\\u0b4d\\u0b56\\u0b57' + '\\u0b62-\\u0b63\\u0b82\\u0bbe\\u0bc0\\u0bcd\\u0bd7\\u0c00\\u0c3e-\\u0c40\\u0c46-\\u0c48\\u0c4a-\\u0c4d\\u0c55-\\u0c56' + '\\u0c62-\\u0c63\\u0c81\\u0cbc\\u0cbf\\u0cc2\\u0cc6\\u0ccc-\\u0ccd\\u0cd5-\\u0cd6\\u0ce2-\\u0ce3\\u0d01\\u0d3e\\u0d41-\\u0d44' + '\\u0d4d\\u0d57\\u0d62-\\u0d63\\u0dca\\u0dcf\\u0dd2-\\u0dd4\\u0dd6\\u0ddf\\u0e31\\u0e34-\\u0e3a\\u0e47-\\u0e4e\\u0eb1\\u0eb4-\\u0eb9' + '\\u0ebb-\\u0ebc\\u0ec8-\\u0ecd\\u0f18-\\u0f19\\u0f35\\u0f37\\u0f39\\u0f71-\\u0f7e\\u0f80-\\u0f84\\u0f86-\\u0f87\\u0f8d-\\u0f97' + '\\u0f99-\\u0fbc\\u0fc6\\u102d-\\u1030\\u1032-\\u1037\\u1039-\\u103a\\u103d-\\u103e\\u1058-\\u1059\\u105e-\\u1060\\u1071-\\u1074' + '\\u1082\\u1085-\\u1086\\u108d\\u109d\\u135d-\\u135f\\u1712-\\u1714\\u1732-\\u1734\\u1752-\\u1753\\u1772-\\u1773\\u17b4-\\u17b5' + '\\u17b7-\\u17bd\\u17c6\\u17c9-\\u17d3\\u17dd\\u180b-\\u180d\\u18a9\\u1920-\\u1922\\u1927-\\u1928\\u1932\\u1939-\\u193b\\u1a17-\\u1a18' + '\\u1a1b\\u1a56\\u1a58-\\u1a5e\\u1a60\\u1a62\\u1a65-\\u1a6c\\u1a73-\\u1a7c\\u1a7f\\u1ab0-\\u1abd\\u1ABE\\u1b00-\\u1b03\\u1b34' + '\\u1b36-\\u1b3a\\u1b3c\\u1b42\\u1b6b-\\u1b73\\u1b80-\\u1b81\\u1ba2-\\u1ba5\\u1ba8-\\u1ba9\\u1bab-\\u1bad\\u1be6\\u1be8-\\u1be9' + '\\u1bed\\u1bef-\\u1bf1\\u1c2c-\\u1c33\\u1c36-\\u1c37\\u1cd0-\\u1cd2\\u1cd4-\\u1ce0\\u1ce2-\\u1ce8\\u1ced\\u1cf4\\u1cf8-\\u1cf9' + '\\u1dc0-\\u1df5\\u1dfc-\\u1dff\\u200c-\\u200d\\u20d0-\\u20dc\\u20DD-\\u20E0\\u20e1\\u20E2-\\u20E4\\u20e5-\\u20f0\\u2cef-\\u2cf1' + '\\u2d7f\\u2de0-\\u2dff\\u302a-\\u302d\\u302e-\\u302f\\u3099-\\u309a\\ua66f\\uA670-\\uA672\\ua674-\\ua67d\\ua69e-\\ua69f\\ua6f0-\\ua6f1' + '\\ua802\\ua806\\ua80b\\ua825-\\ua826\\ua8c4\\ua8e0-\\ua8f1\\ua926-\\ua92d\\ua947-\\ua951\\ua980-\\ua982\\ua9b3\\ua9b6-\\ua9b9\\ua9bc' + '\\ua9e5\\uaa29-\\uaa2e\\uaa31-\\uaa32\\uaa35-\\uaa36\\uaa43\\uaa4c\\uaa7c\\uaab0\\uaab2-\\uaab4\\uaab7-\\uaab8\\uaabe-\\uaabf\\uaac1' + '\\uaaec-\\uaaed\\uaaf6\\uabe5\\uabe8\\uabed\\ufb1e\\ufe00-\\ufe0f\\ufe20-\\ufe2f\\uff9e-\\uff9f]');\n    var isExtendingChar = function (ch) {\n      return typeof ch === 'string' && ch.charCodeAt(0) >= 768 && extendingChars.test(ch);\n    };\n\n    var or = function () {\n      var args = [];\n      for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n      }\n      return function (x) {\n        for (var i = 0; i < args.length; i++) {\n          if (args[i](x)) {\n            return true;\n          }\n        }\n        return false;\n      };\n    };\n    var and = function () {\n      var args = [];\n      for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n      }\n      return function (x) {\n        for (var i = 0; i < args.length; i++) {\n          if (!args[i](x)) {\n            return false;\n          }\n        }\n        return true;\n      };\n    };\n\n    var isElement$3 = isElement$5;\n    var isCaretCandidate$2 = isCaretCandidate$3;\n    var isBlock$1 = matchStyleValues('display', 'block table');\n    var isFloated = matchStyleValues('float', 'left right');\n    var isValidElementCaretCandidate = and(isElement$3, isCaretCandidate$2, not(isFloated));\n    var isNotPre = not(matchStyleValues('white-space', 'pre pre-line pre-wrap'));\n    var isText$4 = isText$7;\n    var isBr$2 = isBr$5;\n    var nodeIndex$1 = DOMUtils.nodeIndex;\n    var resolveIndex$1 = getNodeUnsafe;\n    var createRange$1 = function (doc) {\n      return 'createRange' in doc ? doc.createRange() : DOMUtils.DOM.createRng();\n    };\n    var isWhiteSpace$1 = function (chr) {\n      return chr && /[\\r\\n\\t ]/.test(chr);\n    };\n    var isRange = function (rng) {\n      return !!rng.setStart && !!rng.setEnd;\n    };\n    var isHiddenWhiteSpaceRange = function (range) {\n      var container = range.startContainer;\n      var offset = range.startOffset;\n      if (isWhiteSpace$1(range.toString()) && isNotPre(container.parentNode) && isText$7(container)) {\n        var text = container.data;\n        if (isWhiteSpace$1(text[offset - 1]) || isWhiteSpace$1(text[offset + 1])) {\n          return true;\n        }\n      }\n      return false;\n    };\n    var getBrClientRect = function (brNode) {\n      var doc = brNode.ownerDocument;\n      var rng = createRange$1(doc);\n      var nbsp$1 = doc.createTextNode(nbsp);\n      var parentNode = brNode.parentNode;\n      parentNode.insertBefore(nbsp$1, brNode);\n      rng.setStart(nbsp$1, 0);\n      rng.setEnd(nbsp$1, 1);\n      var clientRect = clone(rng.getBoundingClientRect());\n      parentNode.removeChild(nbsp$1);\n      return clientRect;\n    };\n    var getBoundingClientRectWebKitText = function (rng) {\n      var sc = rng.startContainer;\n      var ec = rng.endContainer;\n      var so = rng.startOffset;\n      var eo = rng.endOffset;\n      if (sc === ec && isText$7(ec) && so === 0 && eo === 1) {\n        var newRng = rng.cloneRange();\n        newRng.setEndAfter(ec);\n        return getBoundingClientRect$1(newRng);\n      } else {\n        return null;\n      }\n    };\n    var isZeroRect = function (r) {\n      return r.left === 0 && r.right === 0 && r.top === 0 && r.bottom === 0;\n    };\n    var getBoundingClientRect$1 = function (item) {\n      var clientRect;\n      var clientRects = item.getClientRects();\n      if (clientRects.length > 0) {\n        clientRect = clone(clientRects[0]);\n      } else {\n        clientRect = clone(item.getBoundingClientRect());\n      }\n      if (!isRange(item) && isBr$2(item) && isZeroRect(clientRect)) {\n        return getBrClientRect(item);\n      }\n      if (isZeroRect(clientRect) && isRange(item)) {\n        return getBoundingClientRectWebKitText(item);\n      }\n      return clientRect;\n    };\n    var collapseAndInflateWidth = function (clientRect, toStart) {\n      var newClientRect = collapse(clientRect, toStart);\n      newClientRect.width = 1;\n      newClientRect.right = newClientRect.left + 1;\n      return newClientRect;\n    };\n    var getCaretPositionClientRects = function (caretPosition) {\n      var clientRects = [];\n      var addUniqueAndValidRect = function (clientRect) {\n        if (clientRect.height === 0) {\n          return;\n        }\n        if (clientRects.length > 0) {\n          if (isEqual(clientRect, clientRects[clientRects.length - 1])) {\n            return;\n          }\n        }\n        clientRects.push(clientRect);\n      };\n      var addCharacterOffset = function (container, offset) {\n        var range = createRange$1(container.ownerDocument);\n        if (offset < container.data.length) {\n          if (isExtendingChar(container.data[offset])) {\n            return clientRects;\n          }\n          if (isExtendingChar(container.data[offset - 1])) {\n            range.setStart(container, offset);\n            range.setEnd(container, offset + 1);\n            if (!isHiddenWhiteSpaceRange(range)) {\n              addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect$1(range), false));\n              return clientRects;\n            }\n          }\n        }\n        if (offset > 0) {\n          range.setStart(container, offset - 1);\n          range.setEnd(container, offset);\n          if (!isHiddenWhiteSpaceRange(range)) {\n            addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect$1(range), false));\n          }\n        }\n        if (offset < container.data.length) {\n          range.setStart(container, offset);\n          range.setEnd(container, offset + 1);\n          if (!isHiddenWhiteSpaceRange(range)) {\n            addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect$1(range), true));\n          }\n        }\n      };\n      var container = caretPosition.container();\n      var offset = caretPosition.offset();\n      if (isText$4(container)) {\n        addCharacterOffset(container, offset);\n        return clientRects;\n      }\n      if (isElement$3(container)) {\n        if (caretPosition.isAtEnd()) {\n          var node = resolveIndex$1(container, offset);\n          if (isText$4(node)) {\n            addCharacterOffset(node, node.data.length);\n          }\n          if (isValidElementCaretCandidate(node) && !isBr$2(node)) {\n            addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect$1(node), false));\n          }\n        } else {\n          var node = resolveIndex$1(container, offset);\n          if (isText$4(node)) {\n            addCharacterOffset(node, 0);\n          }\n          if (isValidElementCaretCandidate(node) && caretPosition.isAtEnd()) {\n            addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect$1(node), false));\n            return clientRects;\n          }\n          var beforeNode = resolveIndex$1(caretPosition.container(), caretPosition.offset() - 1);\n          if (isValidElementCaretCandidate(beforeNode) && !isBr$2(beforeNode)) {\n            if (isBlock$1(beforeNode) || isBlock$1(node) || !isValidElementCaretCandidate(node)) {\n              addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect$1(beforeNode), false));\n            }\n          }\n          if (isValidElementCaretCandidate(node)) {\n            addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect$1(node), true));\n          }\n        }\n      }\n      return clientRects;\n    };\n    var CaretPosition = function (container, offset, clientRects) {\n      var isAtStart = function () {\n        if (isText$4(container)) {\n          return offset === 0;\n        }\n        return offset === 0;\n      };\n      var isAtEnd = function () {\n        if (isText$4(container)) {\n          return offset >= container.data.length;\n        }\n        return offset >= container.childNodes.length;\n      };\n      var toRange = function () {\n        var range = createRange$1(container.ownerDocument);\n        range.setStart(container, offset);\n        range.setEnd(container, offset);\n        return range;\n      };\n      var getClientRects = function () {\n        if (!clientRects) {\n          clientRects = getCaretPositionClientRects(CaretPosition(container, offset));\n        }\n        return clientRects;\n      };\n      var isVisible = function () {\n        return getClientRects().length > 0;\n      };\n      var isEqual = function (caretPosition) {\n        return caretPosition && container === caretPosition.container() && offset === caretPosition.offset();\n      };\n      var getNode = function (before) {\n        return resolveIndex$1(container, before ? offset - 1 : offset);\n      };\n      return {\n        container: constant(container),\n        offset: constant(offset),\n        toRange: toRange,\n        getClientRects: getClientRects,\n        isVisible: isVisible,\n        isAtStart: isAtStart,\n        isAtEnd: isAtEnd,\n        isEqual: isEqual,\n        getNode: getNode\n      };\n    };\n    CaretPosition.fromRangeStart = function (range) {\n      return CaretPosition(range.startContainer, range.startOffset);\n    };\n    CaretPosition.fromRangeEnd = function (range) {\n      return CaretPosition(range.endContainer, range.endOffset);\n    };\n    CaretPosition.after = function (node) {\n      return CaretPosition(node.parentNode, nodeIndex$1(node) + 1);\n    };\n    CaretPosition.before = function (node) {\n      return CaretPosition(node.parentNode, nodeIndex$1(node));\n    };\n    CaretPosition.isAbove = function (pos1, pos2) {\n      return lift2(head(pos2.getClientRects()), last$2(pos1.getClientRects()), isAbove$1).getOr(false);\n    };\n    CaretPosition.isBelow = function (pos1, pos2) {\n      return lift2(last$2(pos2.getClientRects()), head(pos1.getClientRects()), isBelow$1).getOr(false);\n    };\n    CaretPosition.isAtStart = function (pos) {\n      return pos ? pos.isAtStart() : false;\n    };\n    CaretPosition.isAtEnd = function (pos) {\n      return pos ? pos.isAtEnd() : false;\n    };\n    CaretPosition.isTextPosition = function (pos) {\n      return pos ? isText$7(pos.container()) : false;\n    };\n    CaretPosition.isElementPosition = function (pos) {\n      return CaretPosition.isTextPosition(pos) === false;\n    };\n\n    var trimEmptyTextNode$1 = function (dom, node) {\n      if (isText$7(node) && node.data.length === 0) {\n        dom.remove(node);\n      }\n    };\n    var insertNode = function (dom, rng, node) {\n      rng.insertNode(node);\n      trimEmptyTextNode$1(dom, node.previousSibling);\n      trimEmptyTextNode$1(dom, node.nextSibling);\n    };\n    var insertFragment = function (dom, rng, frag) {\n      var firstChild = Optional.from(frag.firstChild);\n      var lastChild = Optional.from(frag.lastChild);\n      rng.insertNode(frag);\n      firstChild.each(function (child) {\n        return trimEmptyTextNode$1(dom, child.previousSibling);\n      });\n      lastChild.each(function (child) {\n        return trimEmptyTextNode$1(dom, child.nextSibling);\n      });\n    };\n    var rangeInsertNode = function (dom, rng, node) {\n      if (isDocumentFragment(node)) {\n        insertFragment(dom, rng, node);\n      } else {\n        insertNode(dom, rng, node);\n      }\n    };\n\n    var isText$3 = isText$7;\n    var isBogus = isBogus$2;\n    var nodeIndex = DOMUtils.nodeIndex;\n    var normalizedParent = function (node) {\n      var parentNode = node.parentNode;\n      if (isBogus(parentNode)) {\n        return normalizedParent(parentNode);\n      }\n      return parentNode;\n    };\n    var getChildNodes = function (node) {\n      if (!node) {\n        return [];\n      }\n      return reduce(node.childNodes, function (result, node) {\n        if (isBogus(node) && node.nodeName !== 'BR') {\n          result = result.concat(getChildNodes(node));\n        } else {\n          result.push(node);\n        }\n        return result;\n      }, []);\n    };\n    var normalizedTextOffset = function (node, offset) {\n      while (node = node.previousSibling) {\n        if (!isText$3(node)) {\n          break;\n        }\n        offset += node.data.length;\n      }\n      return offset;\n    };\n    var equal = function (a) {\n      return function (b) {\n        return a === b;\n      };\n    };\n    var normalizedNodeIndex = function (node) {\n      var nodes, index;\n      nodes = getChildNodes(normalizedParent(node));\n      index = findIndex$1(nodes, equal(node), node);\n      nodes = nodes.slice(0, index + 1);\n      var numTextFragments = reduce(nodes, function (result, node, i) {\n        if (isText$3(node) && isText$3(nodes[i - 1])) {\n          result++;\n        }\n        return result;\n      }, 0);\n      nodes = filter$2(nodes, matchNodeNames([node.nodeName]));\n      index = findIndex$1(nodes, equal(node), node);\n      return index - numTextFragments;\n    };\n    var createPathItem = function (node) {\n      var name;\n      if (isText$3(node)) {\n        name = 'text()';\n      } else {\n        name = node.nodeName.toLowerCase();\n      }\n      return name + '[' + normalizedNodeIndex(node) + ']';\n    };\n    var parentsUntil$1 = function (root, node, predicate) {\n      var parents = [];\n      for (node = node.parentNode; node !== root; node = node.parentNode) {\n        if (predicate && predicate(node)) {\n          break;\n        }\n        parents.push(node);\n      }\n      return parents;\n    };\n    var create$6 = function (root, caretPosition) {\n      var container, offset, path = [], outputOffset, childNodes, parents;\n      container = caretPosition.container();\n      offset = caretPosition.offset();\n      if (isText$3(container)) {\n        outputOffset = normalizedTextOffset(container, offset);\n      } else {\n        childNodes = container.childNodes;\n        if (offset >= childNodes.length) {\n          outputOffset = 'after';\n          offset = childNodes.length - 1;\n        } else {\n          outputOffset = 'before';\n        }\n        container = childNodes[offset];\n      }\n      path.push(createPathItem(container));\n      parents = parentsUntil$1(root, container);\n      parents = filter$2(parents, not(isBogus$2));\n      path = path.concat(map$1(parents, function (node) {\n        return createPathItem(node);\n      }));\n      return path.reverse().join('/') + ',' + outputOffset;\n    };\n    var resolvePathItem = function (node, name, index) {\n      var nodes = getChildNodes(node);\n      nodes = filter$2(nodes, function (node, index) {\n        return !isText$3(node) || !isText$3(nodes[index - 1]);\n      });\n      nodes = filter$2(nodes, matchNodeNames([name]));\n      return nodes[index];\n    };\n    var findTextPosition = function (container, offset) {\n      var node = container, targetOffset = 0, dataLen;\n      while (isText$3(node)) {\n        dataLen = node.data.length;\n        if (offset >= targetOffset && offset <= targetOffset + dataLen) {\n          container = node;\n          offset = offset - targetOffset;\n          break;\n        }\n        if (!isText$3(node.nextSibling)) {\n          container = node;\n          offset = dataLen;\n          break;\n        }\n        targetOffset += dataLen;\n        node = node.nextSibling;\n      }\n      if (isText$3(container) && offset > container.data.length) {\n        offset = container.data.length;\n      }\n      return CaretPosition(container, offset);\n    };\n    var resolve$2 = function (root, path) {\n      var offset;\n      if (!path) {\n        return null;\n      }\n      var parts = path.split(',');\n      var paths = parts[0].split('/');\n      offset = parts.length > 1 ? parts[1] : 'before';\n      var container = reduce(paths, function (result, value) {\n        var match = /([\\w\\-\\(\\)]+)\\[([0-9]+)\\]/.exec(value);\n        if (!match) {\n          return null;\n        }\n        if (match[1] === 'text()') {\n          match[1] = '#text';\n        }\n        return resolvePathItem(result, match[1], parseInt(match[2], 10));\n      }, root);\n      if (!container) {\n        return null;\n      }\n      if (!isText$3(container)) {\n        if (offset === 'after') {\n          offset = nodeIndex(container) + 1;\n        } else {\n          offset = nodeIndex(container);\n        }\n        return CaretPosition(container.parentNode, offset);\n      }\n      return findTextPosition(container, parseInt(offset, 10));\n    };\n\n    var isContentEditableFalse$9 = isContentEditableFalse$b;\n    var getNormalizedTextOffset = function (trim, container, offset) {\n      var node, trimmedOffset;\n      trimmedOffset = trim(container.data.slice(0, offset)).length;\n      for (node = container.previousSibling; node && isText$7(node); node = node.previousSibling) {\n        trimmedOffset += trim(node.data).length;\n      }\n      return trimmedOffset;\n    };\n    var getPoint = function (dom, trim, normalized, rng, start) {\n      var container = rng[start ? 'startContainer' : 'endContainer'];\n      var offset = rng[start ? 'startOffset' : 'endOffset'];\n      var point = [];\n      var childNodes, after = 0;\n      var root = dom.getRoot();\n      if (isText$7(container)) {\n        point.push(normalized ? getNormalizedTextOffset(trim, container, offset) : offset);\n      } else {\n        childNodes = container.childNodes;\n        if (offset >= childNodes.length && childNodes.length) {\n          after = 1;\n          offset = Math.max(0, childNodes.length - 1);\n        }\n        point.push(dom.nodeIndex(childNodes[offset], normalized) + after);\n      }\n      for (; container && container !== root; container = container.parentNode) {\n        point.push(dom.nodeIndex(container, normalized));\n      }\n      return point;\n    };\n    var getLocation = function (trim, selection, normalized, rng) {\n      var dom = selection.dom, bookmark = {};\n      bookmark.start = getPoint(dom, trim, normalized, rng, true);\n      if (!selection.isCollapsed()) {\n        bookmark.end = getPoint(dom, trim, normalized, rng, false);\n      }\n      if (isRangeInCaretContainerBlock(rng)) {\n        bookmark.isFakeCaret = true;\n      }\n      return bookmark;\n    };\n    var findIndex = function (dom, name, element) {\n      var count = 0;\n      Tools.each(dom.select(name), function (node) {\n        if (node.getAttribute('data-mce-bogus') === 'all') {\n          return;\n        }\n        if (node === element) {\n          return false;\n        }\n        count++;\n      });\n      return count;\n    };\n    var moveEndPoint$1 = function (rng, start) {\n      var container, offset, childNodes;\n      var prefix = start ? 'start' : 'end';\n      container = rng[prefix + 'Container'];\n      offset = rng[prefix + 'Offset'];\n      if (isElement$5(container) && container.nodeName === 'TR') {\n        childNodes = container.childNodes;\n        container = childNodes[Math.min(start ? offset : offset - 1, childNodes.length - 1)];\n        if (container) {\n          offset = start ? 0 : container.childNodes.length;\n          rng['set' + (start ? 'Start' : 'End')](container, offset);\n        }\n      }\n    };\n    var normalizeTableCellSelection = function (rng) {\n      moveEndPoint$1(rng, true);\n      moveEndPoint$1(rng, false);\n      return rng;\n    };\n    var findSibling = function (node, offset) {\n      var sibling;\n      if (isElement$5(node)) {\n        node = getNode$1(node, offset);\n        if (isContentEditableFalse$9(node)) {\n          return node;\n        }\n      }\n      if (isCaretContainer$2(node)) {\n        if (isText$7(node) && isCaretContainerBlock$1(node)) {\n          node = node.parentNode;\n        }\n        sibling = node.previousSibling;\n        if (isContentEditableFalse$9(sibling)) {\n          return sibling;\n        }\n        sibling = node.nextSibling;\n        if (isContentEditableFalse$9(sibling)) {\n          return sibling;\n        }\n      }\n    };\n    var findAdjacentContentEditableFalseElm = function (rng) {\n      return findSibling(rng.startContainer, rng.startOffset) || findSibling(rng.endContainer, rng.endOffset);\n    };\n    var getOffsetBookmark = function (trim, normalized, selection) {\n      var element = selection.getNode();\n      var name = element ? element.nodeName : null;\n      var rng = selection.getRng();\n      if (isContentEditableFalse$9(element) || name === 'IMG') {\n        return {\n          name: name,\n          index: findIndex(selection.dom, name, element)\n        };\n      }\n      var sibling = findAdjacentContentEditableFalseElm(rng);\n      if (sibling) {\n        name = sibling.tagName;\n        return {\n          name: name,\n          index: findIndex(selection.dom, name, sibling)\n        };\n      }\n      return getLocation(trim, selection, normalized, rng);\n    };\n    var getCaretBookmark = function (selection) {\n      var rng = selection.getRng();\n      return {\n        start: create$6(selection.dom.getRoot(), CaretPosition.fromRangeStart(rng)),\n        end: create$6(selection.dom.getRoot(), CaretPosition.fromRangeEnd(rng))\n      };\n    };\n    var getRangeBookmark = function (selection) {\n      return { rng: selection.getRng() };\n    };\n    var createBookmarkSpan = function (dom, id, filled) {\n      var args = {\n        'data-mce-type': 'bookmark',\n        id: id,\n        'style': 'overflow:hidden;line-height:0px'\n      };\n      return filled ? dom.create('span', args, '&#xFEFF;') : dom.create('span', args);\n    };\n    var getPersistentBookmark = function (selection, filled) {\n      var dom = selection.dom;\n      var rng = selection.getRng();\n      var id = dom.uniqueId();\n      var collapsed = selection.isCollapsed();\n      var element = selection.getNode();\n      var name = element.nodeName;\n      if (name === 'IMG') {\n        return {\n          name: name,\n          index: findIndex(dom, name, element)\n        };\n      }\n      var rng2 = normalizeTableCellSelection(rng.cloneRange());\n      if (!collapsed) {\n        rng2.collapse(false);\n        var endBookmarkNode = createBookmarkSpan(dom, id + '_end', filled);\n        rangeInsertNode(dom, rng2, endBookmarkNode);\n      }\n      rng = normalizeTableCellSelection(rng);\n      rng.collapse(true);\n      var startBookmarkNode = createBookmarkSpan(dom, id + '_start', filled);\n      rangeInsertNode(dom, rng, startBookmarkNode);\n      selection.moveToBookmark({\n        id: id,\n        keep: true\n      });\n      return { id: id };\n    };\n    var getBookmark$2 = function (selection, type, normalized) {\n      if (type === 2) {\n        return getOffsetBookmark(trim$2, normalized, selection);\n      } else if (type === 3) {\n        return getCaretBookmark(selection);\n      } else if (type) {\n        return getRangeBookmark(selection);\n      } else {\n        return getPersistentBookmark(selection, false);\n      }\n    };\n    var getUndoBookmark = curry(getOffsetBookmark, identity, true);\n\n    var DOM$9 = DOMUtils.DOM;\n    var defaultPreviewStyles = 'font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow';\n    var getBodySetting = function (editor, name, defaultValue) {\n      var value = editor.getParam(name, defaultValue);\n      if (value.indexOf('=') !== -1) {\n        var bodyObj = editor.getParam(name, '', 'hash');\n        return get$9(bodyObj, editor.id).getOr(defaultValue);\n      } else {\n        return value;\n      }\n    };\n    var getIframeAttrs = function (editor) {\n      return editor.getParam('iframe_attrs', {});\n    };\n    var getDocType = function (editor) {\n      return editor.getParam('doctype', '<!DOCTYPE html>');\n    };\n    var getDocumentBaseUrl = function (editor) {\n      return editor.getParam('document_base_url', '');\n    };\n    var getBodyId = function (editor) {\n      return getBodySetting(editor, 'body_id', 'tinymce');\n    };\n    var getBodyClass = function (editor) {\n      return getBodySetting(editor, 'body_class', '');\n    };\n    var getContentSecurityPolicy = function (editor) {\n      return editor.getParam('content_security_policy', '');\n    };\n    var shouldPutBrInPre$1 = function (editor) {\n      return editor.getParam('br_in_pre', true);\n    };\n    var getForcedRootBlock = function (editor) {\n      if (editor.getParam('force_p_newlines', false)) {\n        return 'p';\n      }\n      var block = editor.getParam('forced_root_block', 'p');\n      if (block === false) {\n        return '';\n      } else if (block === true) {\n        return 'p';\n      } else {\n        return block;\n      }\n    };\n    var getForcedRootBlockAttrs = function (editor) {\n      return editor.getParam('forced_root_block_attrs', {});\n    };\n    var getBrNewLineSelector = function (editor) {\n      return editor.getParam('br_newline_selector', '.mce-toc h2,figcaption,caption');\n    };\n    var getNoNewLineSelector = function (editor) {\n      return editor.getParam('no_newline_selector', '');\n    };\n    var shouldKeepStyles = function (editor) {\n      return editor.getParam('keep_styles', true);\n    };\n    var shouldEndContainerOnEmptyBlock = function (editor) {\n      return editor.getParam('end_container_on_empty_block', false);\n    };\n    var getFontStyleValues = function (editor) {\n      return Tools.explode(editor.getParam('font_size_style_values', 'xx-small,x-small,small,medium,large,x-large,xx-large'));\n    };\n    var getFontSizeClasses = function (editor) {\n      return Tools.explode(editor.getParam('font_size_classes', ''));\n    };\n    var getImagesDataImgFilter = function (editor) {\n      return editor.getParam('images_dataimg_filter', always, 'function');\n    };\n    var isAutomaticUploadsEnabled = function (editor) {\n      return editor.getParam('automatic_uploads', true, 'boolean');\n    };\n    var shouldReuseFileName = function (editor) {\n      return editor.getParam('images_reuse_filename', false, 'boolean');\n    };\n    var shouldReplaceBlobUris = function (editor) {\n      return editor.getParam('images_replace_blob_uris', true, 'boolean');\n    };\n    var getIconPackName = function (editor) {\n      return editor.getParam('icons', '', 'string');\n    };\n    var getIconsUrl = function (editor) {\n      return editor.getParam('icons_url', '', 'string');\n    };\n    var getImageUploadUrl = function (editor) {\n      return editor.getParam('images_upload_url', '', 'string');\n    };\n    var getImageUploadBasePath = function (editor) {\n      return editor.getParam('images_upload_base_path', '', 'string');\n    };\n    var getImagesUploadCredentials = function (editor) {\n      return editor.getParam('images_upload_credentials', false, 'boolean');\n    };\n    var getImagesUploadHandler = function (editor) {\n      return editor.getParam('images_upload_handler', null, 'function');\n    };\n    var shouldUseContentCssCors = function (editor) {\n      return editor.getParam('content_css_cors', false, 'boolean');\n    };\n    var getReferrerPolicy = function (editor) {\n      return editor.getParam('referrer_policy', '', 'string');\n    };\n    var getLanguageCode = function (editor) {\n      return editor.getParam('language', 'en', 'string');\n    };\n    var getLanguageUrl = function (editor) {\n      return editor.getParam('language_url', '', 'string');\n    };\n    var shouldIndentUseMargin = function (editor) {\n      return editor.getParam('indent_use_margin', false);\n    };\n    var getIndentation = function (editor) {\n      return editor.getParam('indentation', '40px', 'string');\n    };\n    var getContentCss = function (editor) {\n      var contentCss = editor.getParam('content_css');\n      if (isString$1(contentCss)) {\n        return map$3(contentCss.split(','), trim$4);\n      } else if (isArray$1(contentCss)) {\n        return contentCss;\n      } else if (contentCss === false || editor.inline) {\n        return [];\n      } else {\n        return ['default'];\n      }\n    };\n    var getFontCss = function (editor) {\n      var fontCss = editor.getParam('font_css', []);\n      return isArray$1(fontCss) ? fontCss : map$3(fontCss.split(','), trim$4);\n    };\n    var getDirectionality = function (editor) {\n      return editor.getParam('directionality', I18n.isRtl() ? 'rtl' : undefined);\n    };\n    var getInlineBoundarySelector = function (editor) {\n      return editor.getParam('inline_boundaries_selector', 'a[href],code,.mce-annotation', 'string');\n    };\n    var getObjectResizing = function (editor) {\n      var selector = editor.getParam('object_resizing');\n      if (selector === false || Env.iOS) {\n        return false;\n      } else {\n        return isString$1(selector) ? selector : 'table,img,figure.image,div,video,iframe';\n      }\n    };\n    var getResizeImgProportional = function (editor) {\n      return editor.getParam('resize_img_proportional', true, 'boolean');\n    };\n    var getPlaceholder = function (editor) {\n      return editor.getParam('placeholder', DOM$9.getAttrib(editor.getElement(), 'placeholder'), 'string');\n    };\n    var getEventRoot = function (editor) {\n      return editor.getParam('event_root');\n    };\n    var getServiceMessage = function (editor) {\n      return editor.getParam('service_message');\n    };\n    var getTheme = function (editor) {\n      return editor.getParam('theme');\n    };\n    var shouldValidate = function (editor) {\n      return editor.getParam('validate');\n    };\n    var isInlineBoundariesEnabled = function (editor) {\n      return editor.getParam('inline_boundaries') !== false;\n    };\n    var getFormats = function (editor) {\n      return editor.getParam('formats');\n    };\n    var getPreviewStyles = function (editor) {\n      var style = editor.getParam('preview_styles', defaultPreviewStyles);\n      if (isString$1(style)) {\n        return style;\n      } else {\n        return '';\n      }\n    };\n    var canFormatEmptyLines = function (editor) {\n      return editor.getParam('format_empty_lines', false, 'boolean');\n    };\n    var getCustomUiSelector = function (editor) {\n      return editor.getParam('custom_ui_selector', '', 'string');\n    };\n    var getThemeUrl = function (editor) {\n      return editor.getParam('theme_url');\n    };\n    var isInline = function (editor) {\n      return editor.getParam('inline');\n    };\n    var hasHiddenInput = function (editor) {\n      return editor.getParam('hidden_input');\n    };\n    var shouldPatchSubmit = function (editor) {\n      return editor.getParam('submit_patch');\n    };\n    var isEncodingXml = function (editor) {\n      return editor.getParam('encoding') === 'xml';\n    };\n    var shouldAddFormSubmitTrigger = function (editor) {\n      return editor.getParam('add_form_submit_trigger');\n    };\n    var shouldAddUnloadTrigger = function (editor) {\n      return editor.getParam('add_unload_trigger');\n    };\n    var hasForcedRootBlock = function (editor) {\n      return getForcedRootBlock(editor) !== '';\n    };\n    var getCustomUndoRedoLevels = function (editor) {\n      return editor.getParam('custom_undo_redo_levels', 0, 'number');\n    };\n    var shouldDisableNodeChange = function (editor) {\n      return editor.getParam('disable_nodechange');\n    };\n    var isReadOnly$1 = function (editor) {\n      return editor.getParam('readonly');\n    };\n    var hasContentCssCors = function (editor) {\n      return editor.getParam('content_css_cors');\n    };\n    var getPlugins = function (editor) {\n      return editor.getParam('plugins', '', 'string');\n    };\n    var getExternalPlugins$1 = function (editor) {\n      return editor.getParam('external_plugins');\n    };\n    var shouldBlockUnsupportedDrop = function (editor) {\n      return editor.getParam('block_unsupported_drop', true, 'boolean');\n    };\n    var isVisualAidsEnabled = function (editor) {\n      return editor.getParam('visual', true, 'boolean');\n    };\n    var getVisualAidsTableClass = function (editor) {\n      return editor.getParam('visual_table_class', 'mce-item-table', 'string');\n    };\n    var getVisualAidsAnchorClass = function (editor) {\n      return editor.getParam('visual_anchor_class', 'mce-item-anchor', 'string');\n    };\n    var getIframeAriaText = function (editor) {\n      return editor.getParam('iframe_aria_text', 'Rich Text Area. Press ALT-0 for help.', 'string');\n    };\n\n    var isElement$2 = isElement$5;\n    var isText$2 = isText$7;\n    var removeNode$1 = function (node) {\n      var parentNode = node.parentNode;\n      if (parentNode) {\n        parentNode.removeChild(node);\n      }\n    };\n    var trimCount = function (text) {\n      var trimmedText = trim$2(text);\n      return {\n        count: text.length - trimmedText.length,\n        text: trimmedText\n      };\n    };\n    var deleteZwspChars = function (caretContainer) {\n      var idx;\n      while ((idx = caretContainer.data.lastIndexOf(ZWSP$1)) !== -1) {\n        caretContainer.deleteData(idx, 1);\n      }\n    };\n    var removeUnchanged = function (caretContainer, pos) {\n      remove$2(caretContainer);\n      return pos;\n    };\n    var removeTextAndReposition = function (caretContainer, pos) {\n      var before = trimCount(caretContainer.data.substr(0, pos.offset()));\n      var after = trimCount(caretContainer.data.substr(pos.offset()));\n      var text = before.text + after.text;\n      if (text.length > 0) {\n        deleteZwspChars(caretContainer);\n        return CaretPosition(caretContainer, pos.offset() - before.count);\n      } else {\n        return pos;\n      }\n    };\n    var removeElementAndReposition = function (caretContainer, pos) {\n      var parentNode = pos.container();\n      var newPosition = indexOf$2(from(parentNode.childNodes), caretContainer).map(function (index) {\n        return index < pos.offset() ? CaretPosition(parentNode, pos.offset() - 1) : pos;\n      }).getOr(pos);\n      remove$2(caretContainer);\n      return newPosition;\n    };\n    var removeTextCaretContainer = function (caretContainer, pos) {\n      return isText$2(caretContainer) && pos.container() === caretContainer ? removeTextAndReposition(caretContainer, pos) : removeUnchanged(caretContainer, pos);\n    };\n    var removeElementCaretContainer = function (caretContainer, pos) {\n      return pos.container() === caretContainer.parentNode ? removeElementAndReposition(caretContainer, pos) : removeUnchanged(caretContainer, pos);\n    };\n    var removeAndReposition = function (container, pos) {\n      return CaretPosition.isTextPosition(pos) ? removeTextCaretContainer(container, pos) : removeElementCaretContainer(container, pos);\n    };\n    var remove$2 = function (caretContainerNode) {\n      if (isElement$2(caretContainerNode) && isCaretContainer$2(caretContainerNode)) {\n        if (hasContent(caretContainerNode)) {\n          caretContainerNode.removeAttribute('data-mce-caret');\n        } else {\n          removeNode$1(caretContainerNode);\n        }\n      }\n      if (isText$2(caretContainerNode)) {\n        deleteZwspChars(caretContainerNode);\n        if (caretContainerNode.data.length === 0) {\n          removeNode$1(caretContainerNode);\n        }\n      }\n    };\n\n    var browser$2 = detect().browser;\n    var isContentEditableFalse$8 = isContentEditableFalse$b;\n    var isMedia$1 = isMedia$2;\n    var isTableCell$3 = isTableCell$5;\n    var inlineFakeCaretSelector = '*[contentEditable=false],video,audio,embed,object';\n    var getAbsoluteClientRect = function (root, element, before) {\n      var clientRect = collapse(element.getBoundingClientRect(), before);\n      var scrollX;\n      var scrollY;\n      if (root.tagName === 'BODY') {\n        var docElm = root.ownerDocument.documentElement;\n        scrollX = root.scrollLeft || docElm.scrollLeft;\n        scrollY = root.scrollTop || docElm.scrollTop;\n      } else {\n        var rootRect = root.getBoundingClientRect();\n        scrollX = root.scrollLeft - rootRect.left;\n        scrollY = root.scrollTop - rootRect.top;\n      }\n      clientRect.left += scrollX;\n      clientRect.right += scrollX;\n      clientRect.top += scrollY;\n      clientRect.bottom += scrollY;\n      clientRect.width = 1;\n      var margin = element.offsetWidth - element.clientWidth;\n      if (margin > 0) {\n        if (before) {\n          margin *= -1;\n        }\n        clientRect.left += margin;\n        clientRect.right += margin;\n      }\n      return clientRect;\n    };\n    var trimInlineCaretContainers = function (root) {\n      var fakeCaretTargetNodes = descendants(SugarElement.fromDom(root), inlineFakeCaretSelector);\n      for (var i = 0; i < fakeCaretTargetNodes.length; i++) {\n        var node = fakeCaretTargetNodes[i].dom;\n        var sibling = node.previousSibling;\n        if (endsWithCaretContainer$1(sibling)) {\n          var data = sibling.data;\n          if (data.length === 1) {\n            sibling.parentNode.removeChild(sibling);\n          } else {\n            sibling.deleteData(data.length - 1, 1);\n          }\n        }\n        sibling = node.nextSibling;\n        if (startsWithCaretContainer$1(sibling)) {\n          var data = sibling.data;\n          if (data.length === 1) {\n            sibling.parentNode.removeChild(sibling);\n          } else {\n            sibling.deleteData(0, 1);\n          }\n        }\n      }\n    };\n    var FakeCaret = function (editor, root, isBlock, hasFocus) {\n      var lastVisualCaret = value();\n      var cursorInterval;\n      var caretContainerNode;\n      var rootBlock = getForcedRootBlock(editor);\n      var caretBlock = rootBlock.length > 0 ? rootBlock : 'p';\n      var show = function (before, element) {\n        var rng;\n        hide();\n        if (isTableCell$3(element)) {\n          return null;\n        }\n        if (isBlock(element)) {\n          caretContainerNode = insertBlock$1(caretBlock, element, before);\n          var clientRect = getAbsoluteClientRect(root, element, before);\n          DomQuery(caretContainerNode).css('top', clientRect.top);\n          var caret = DomQuery('<div class=\"mce-visual-caret\" data-mce-bogus=\"all\"></div>').css(__assign({}, clientRect)).appendTo(root)[0];\n          lastVisualCaret.set({\n            caret: caret,\n            element: element,\n            before: before\n          });\n          if (before) {\n            DomQuery(caret).addClass('mce-visual-caret-before');\n          }\n          startBlink();\n          rng = element.ownerDocument.createRange();\n          rng.setStart(caretContainerNode, 0);\n          rng.setEnd(caretContainerNode, 0);\n        } else {\n          caretContainerNode = insertInline$1(element, before);\n          rng = element.ownerDocument.createRange();\n          if (isInlineFakeCaretTarget(caretContainerNode.nextSibling)) {\n            rng.setStart(caretContainerNode, 0);\n            rng.setEnd(caretContainerNode, 0);\n          } else {\n            rng.setStart(caretContainerNode, 1);\n            rng.setEnd(caretContainerNode, 1);\n          }\n          return rng;\n        }\n        return rng;\n      };\n      var hide = function () {\n        trimInlineCaretContainers(root);\n        if (caretContainerNode) {\n          remove$2(caretContainerNode);\n          caretContainerNode = null;\n        }\n        lastVisualCaret.on(function (caretState) {\n          DomQuery(caretState.caret).remove();\n          lastVisualCaret.clear();\n        });\n        if (cursorInterval) {\n          Delay.clearInterval(cursorInterval);\n          cursorInterval = undefined;\n        }\n      };\n      var startBlink = function () {\n        cursorInterval = Delay.setInterval(function () {\n          if (hasFocus()) {\n            DomQuery('div.mce-visual-caret', root).toggleClass('mce-visual-caret-hidden');\n          } else {\n            DomQuery('div.mce-visual-caret', root).addClass('mce-visual-caret-hidden');\n          }\n        }, 500);\n      };\n      var reposition = function () {\n        lastVisualCaret.on(function (caretState) {\n          var clientRect = getAbsoluteClientRect(root, caretState.element, caretState.before);\n          DomQuery(caretState.caret).css(__assign({}, clientRect));\n        });\n      };\n      var destroy = function () {\n        return Delay.clearInterval(cursorInterval);\n      };\n      var getCss = function () {\n        return '.mce-visual-caret {' + 'position: absolute;' + 'background-color: black;' + 'background-color: currentcolor;' + '}' + '.mce-visual-caret-hidden {' + 'display: none;' + '}' + '*[data-mce-caret] {' + 'position: absolute;' + 'left: -1000px;' + 'right: auto;' + 'top: 0;' + 'margin: 0;' + 'padding: 0;' + '}';\n      };\n      return {\n        show: show,\n        hide: hide,\n        getCss: getCss,\n        reposition: reposition,\n        destroy: destroy\n      };\n    };\n    var isFakeCaretTableBrowser = function () {\n      return browser$2.isIE() || browser$2.isEdge() || browser$2.isFirefox();\n    };\n    var isInlineFakeCaretTarget = function (node) {\n      return isContentEditableFalse$8(node) || isMedia$1(node);\n    };\n    var isFakeCaretTarget = function (node) {\n      return isInlineFakeCaretTarget(node) || isTable$3(node) && isFakeCaretTableBrowser();\n    };\n\n    var isContentEditableFalse$7 = isContentEditableFalse$b;\n    var isMedia = isMedia$2;\n    var isBlockLike = matchStyleValues('display', 'block table table-cell table-caption list-item');\n    var isCaretContainer = isCaretContainer$2;\n    var isCaretContainerBlock = isCaretContainerBlock$1;\n    var isElement$1 = isElement$5;\n    var isCaretCandidate$1 = isCaretCandidate$3;\n    var isForwards = function (direction) {\n      return direction > 0;\n    };\n    var isBackwards = function (direction) {\n      return direction < 0;\n    };\n    var skipCaretContainers = function (walk, shallow) {\n      var node;\n      while (node = walk(shallow)) {\n        if (!isCaretContainerBlock(node)) {\n          return node;\n        }\n      }\n      return null;\n    };\n    var findNode$1 = function (node, direction, predicateFn, rootNode, shallow) {\n      var walker = new DomTreeWalker(node, rootNode);\n      var isCefOrCaretContainer = isContentEditableFalse$7(node) || isCaretContainerBlock(node);\n      if (isBackwards(direction)) {\n        if (isCefOrCaretContainer) {\n          node = skipCaretContainers(walker.prev.bind(walker), true);\n          if (predicateFn(node)) {\n            return node;\n          }\n        }\n        while (node = skipCaretContainers(walker.prev.bind(walker), shallow)) {\n          if (predicateFn(node)) {\n            return node;\n          }\n        }\n      }\n      if (isForwards(direction)) {\n        if (isCefOrCaretContainer) {\n          node = skipCaretContainers(walker.next.bind(walker), true);\n          if (predicateFn(node)) {\n            return node;\n          }\n        }\n        while (node = skipCaretContainers(walker.next.bind(walker), shallow)) {\n          if (predicateFn(node)) {\n            return node;\n          }\n        }\n      }\n      return null;\n    };\n    var getParentBlock$2 = function (node, rootNode) {\n      while (node && node !== rootNode) {\n        if (isBlockLike(node)) {\n          return node;\n        }\n        node = node.parentNode;\n      }\n      return null;\n    };\n    var isInSameBlock = function (caretPosition1, caretPosition2, rootNode) {\n      return getParentBlock$2(caretPosition1.container(), rootNode) === getParentBlock$2(caretPosition2.container(), rootNode);\n    };\n    var getChildNodeAtRelativeOffset = function (relativeOffset, caretPosition) {\n      if (!caretPosition) {\n        return null;\n      }\n      var container = caretPosition.container();\n      var offset = caretPosition.offset();\n      if (!isElement$1(container)) {\n        return null;\n      }\n      return container.childNodes[offset + relativeOffset];\n    };\n    var beforeAfter = function (before, node) {\n      var range = node.ownerDocument.createRange();\n      if (before) {\n        range.setStartBefore(node);\n        range.setEndBefore(node);\n      } else {\n        range.setStartAfter(node);\n        range.setEndAfter(node);\n      }\n      return range;\n    };\n    var isNodesInSameBlock = function (root, node1, node2) {\n      return getParentBlock$2(node1, root) === getParentBlock$2(node2, root);\n    };\n    var lean = function (left, root, node) {\n      var siblingName = left ? 'previousSibling' : 'nextSibling';\n      while (node && node !== root) {\n        var sibling = node[siblingName];\n        if (isCaretContainer(sibling)) {\n          sibling = sibling[siblingName];\n        }\n        if (isContentEditableFalse$7(sibling) || isMedia(sibling)) {\n          if (isNodesInSameBlock(root, sibling, node)) {\n            return sibling;\n          }\n          break;\n        }\n        if (isCaretCandidate$1(sibling)) {\n          break;\n        }\n        node = node.parentNode;\n      }\n      return null;\n    };\n    var before$2 = curry(beforeAfter, true);\n    var after$2 = curry(beforeAfter, false);\n    var normalizeRange = function (direction, root, range) {\n      var node;\n      var leanLeft = curry(lean, true, root);\n      var leanRight = curry(lean, false, root);\n      var container = range.startContainer;\n      var offset = range.startOffset;\n      if (isCaretContainerBlock$1(container)) {\n        if (!isElement$1(container)) {\n          container = container.parentNode;\n        }\n        var location_1 = container.getAttribute('data-mce-caret');\n        if (location_1 === 'before') {\n          node = container.nextSibling;\n          if (isFakeCaretTarget(node)) {\n            return before$2(node);\n          }\n        }\n        if (location_1 === 'after') {\n          node = container.previousSibling;\n          if (isFakeCaretTarget(node)) {\n            return after$2(node);\n          }\n        }\n      }\n      if (!range.collapsed) {\n        return range;\n      }\n      if (isText$7(container)) {\n        if (isCaretContainer(container)) {\n          if (direction === 1) {\n            node = leanRight(container);\n            if (node) {\n              return before$2(node);\n            }\n            node = leanLeft(container);\n            if (node) {\n              return after$2(node);\n            }\n          }\n          if (direction === -1) {\n            node = leanLeft(container);\n            if (node) {\n              return after$2(node);\n            }\n            node = leanRight(container);\n            if (node) {\n              return before$2(node);\n            }\n          }\n          return range;\n        }\n        if (endsWithCaretContainer$1(container) && offset >= container.data.length - 1) {\n          if (direction === 1) {\n            node = leanRight(container);\n            if (node) {\n              return before$2(node);\n            }\n          }\n          return range;\n        }\n        if (startsWithCaretContainer$1(container) && offset <= 1) {\n          if (direction === -1) {\n            node = leanLeft(container);\n            if (node) {\n              return after$2(node);\n            }\n          }\n          return range;\n        }\n        if (offset === container.data.length) {\n          node = leanRight(container);\n          if (node) {\n            return before$2(node);\n          }\n          return range;\n        }\n        if (offset === 0) {\n          node = leanLeft(container);\n          if (node) {\n            return after$2(node);\n          }\n          return range;\n        }\n      }\n      return range;\n    };\n    var getRelativeCefElm = function (forward, caretPosition) {\n      return Optional.from(getChildNodeAtRelativeOffset(forward ? 0 : -1, caretPosition)).filter(isContentEditableFalse$7);\n    };\n    var getNormalizedRangeEndPoint = function (direction, root, range) {\n      var normalizedRange = normalizeRange(direction, root, range);\n      if (direction === -1) {\n        return CaretPosition.fromRangeStart(normalizedRange);\n      }\n      return CaretPosition.fromRangeEnd(normalizedRange);\n    };\n    var getElementFromPosition = function (pos) {\n      return Optional.from(pos.getNode()).map(SugarElement.fromDom);\n    };\n    var getElementFromPrevPosition = function (pos) {\n      return Optional.from(pos.getNode(true)).map(SugarElement.fromDom);\n    };\n    var getVisualCaretPosition = function (walkFn, caretPosition) {\n      while (caretPosition = walkFn(caretPosition)) {\n        if (caretPosition.isVisible()) {\n          return caretPosition;\n        }\n      }\n      return caretPosition;\n    };\n    var isMoveInsideSameBlock = function (from, to) {\n      var inSameBlock = isInSameBlock(from, to);\n      if (!inSameBlock && isBr$5(from.getNode())) {\n        return true;\n      }\n      return inSameBlock;\n    };\n\n    var HDirection;\n    (function (HDirection) {\n      HDirection[HDirection['Backwards'] = -1] = 'Backwards';\n      HDirection[HDirection['Forwards'] = 1] = 'Forwards';\n    }(HDirection || (HDirection = {})));\n    var isContentEditableFalse$6 = isContentEditableFalse$b;\n    var isText$1 = isText$7;\n    var isElement = isElement$5;\n    var isBr$1 = isBr$5;\n    var isCaretCandidate = isCaretCandidate$3;\n    var isAtomic = isAtomic$1;\n    var isEditableCaretCandidate = isEditableCaretCandidate$1;\n    var getParents$3 = function (node, root) {\n      var parents = [];\n      while (node && node !== root) {\n        parents.push(node);\n        node = node.parentNode;\n      }\n      return parents;\n    };\n    var nodeAtIndex = function (container, offset) {\n      if (container.hasChildNodes() && offset < container.childNodes.length) {\n        return container.childNodes[offset];\n      }\n      return null;\n    };\n    var getCaretCandidatePosition = function (direction, node) {\n      if (isForwards(direction)) {\n        if (isCaretCandidate(node.previousSibling) && !isText$1(node.previousSibling)) {\n          return CaretPosition.before(node);\n        }\n        if (isText$1(node)) {\n          return CaretPosition(node, 0);\n        }\n      }\n      if (isBackwards(direction)) {\n        if (isCaretCandidate(node.nextSibling) && !isText$1(node.nextSibling)) {\n          return CaretPosition.after(node);\n        }\n        if (isText$1(node)) {\n          return CaretPosition(node, node.data.length);\n        }\n      }\n      if (isBackwards(direction)) {\n        if (isBr$1(node)) {\n          return CaretPosition.before(node);\n        }\n        return CaretPosition.after(node);\n      }\n      return CaretPosition.before(node);\n    };\n    var moveForwardFromBr = function (root, nextNode) {\n      var nextSibling = nextNode.nextSibling;\n      if (nextSibling && isCaretCandidate(nextSibling)) {\n        if (isText$1(nextSibling)) {\n          return CaretPosition(nextSibling, 0);\n        } else {\n          return CaretPosition.before(nextSibling);\n        }\n      } else {\n        return findCaretPosition$1(HDirection.Forwards, CaretPosition.after(nextNode), root);\n      }\n    };\n    var findCaretPosition$1 = function (direction, startPos, root) {\n      var node;\n      var nextNode;\n      var innerNode;\n      var caretPosition;\n      if (!isElement(root) || !startPos) {\n        return null;\n      }\n      if (startPos.isEqual(CaretPosition.after(root)) && root.lastChild) {\n        caretPosition = CaretPosition.after(root.lastChild);\n        if (isBackwards(direction) && isCaretCandidate(root.lastChild) && isElement(root.lastChild)) {\n          return isBr$1(root.lastChild) ? CaretPosition.before(root.lastChild) : caretPosition;\n        }\n      } else {\n        caretPosition = startPos;\n      }\n      var container = caretPosition.container();\n      var offset = caretPosition.offset();\n      if (isText$1(container)) {\n        if (isBackwards(direction) && offset > 0) {\n          return CaretPosition(container, --offset);\n        }\n        if (isForwards(direction) && offset < container.length) {\n          return CaretPosition(container, ++offset);\n        }\n        node = container;\n      } else {\n        if (isBackwards(direction) && offset > 0) {\n          nextNode = nodeAtIndex(container, offset - 1);\n          if (isCaretCandidate(nextNode)) {\n            if (!isAtomic(nextNode)) {\n              innerNode = findNode$1(nextNode, direction, isEditableCaretCandidate, nextNode);\n              if (innerNode) {\n                if (isText$1(innerNode)) {\n                  return CaretPosition(innerNode, innerNode.data.length);\n                }\n                return CaretPosition.after(innerNode);\n              }\n            }\n            if (isText$1(nextNode)) {\n              return CaretPosition(nextNode, nextNode.data.length);\n            }\n            return CaretPosition.before(nextNode);\n          }\n        }\n        if (isForwards(direction) && offset < container.childNodes.length) {\n          nextNode = nodeAtIndex(container, offset);\n          if (isCaretCandidate(nextNode)) {\n            if (isBr$1(nextNode)) {\n              return moveForwardFromBr(root, nextNode);\n            }\n            if (!isAtomic(nextNode)) {\n              innerNode = findNode$1(nextNode, direction, isEditableCaretCandidate, nextNode);\n              if (innerNode) {\n                if (isText$1(innerNode)) {\n                  return CaretPosition(innerNode, 0);\n                }\n                return CaretPosition.before(innerNode);\n              }\n            }\n            if (isText$1(nextNode)) {\n              return CaretPosition(nextNode, 0);\n            }\n            return CaretPosition.after(nextNode);\n          }\n        }\n        node = nextNode ? nextNode : caretPosition.getNode();\n      }\n      if (isForwards(direction) && caretPosition.isAtEnd() || isBackwards(direction) && caretPosition.isAtStart()) {\n        node = findNode$1(node, direction, always, root, true);\n        if (isEditableCaretCandidate(node, root)) {\n          return getCaretCandidatePosition(direction, node);\n        }\n      }\n      nextNode = findNode$1(node, direction, isEditableCaretCandidate, root);\n      var rootContentEditableFalseElm = last$1(filter$4(getParents$3(container, root), isContentEditableFalse$6));\n      if (rootContentEditableFalseElm && (!nextNode || !rootContentEditableFalseElm.contains(nextNode))) {\n        if (isForwards(direction)) {\n          caretPosition = CaretPosition.after(rootContentEditableFalseElm);\n        } else {\n          caretPosition = CaretPosition.before(rootContentEditableFalseElm);\n        }\n        return caretPosition;\n      }\n      if (nextNode) {\n        return getCaretCandidatePosition(direction, nextNode);\n      }\n      return null;\n    };\n    var CaretWalker = function (root) {\n      return {\n        next: function (caretPosition) {\n          return findCaretPosition$1(HDirection.Forwards, caretPosition, root);\n        },\n        prev: function (caretPosition) {\n          return findCaretPosition$1(HDirection.Backwards, caretPosition, root);\n        }\n      };\n    };\n\n    var walkToPositionIn = function (forward, root, start) {\n      var position = forward ? CaretPosition.before(start) : CaretPosition.after(start);\n      return fromPosition(forward, root, position);\n    };\n    var afterElement = function (node) {\n      return isBr$5(node) ? CaretPosition.before(node) : CaretPosition.after(node);\n    };\n    var isBeforeOrStart = function (position) {\n      if (CaretPosition.isTextPosition(position)) {\n        return position.offset() === 0;\n      } else {\n        return isCaretCandidate$3(position.getNode());\n      }\n    };\n    var isAfterOrEnd = function (position) {\n      if (CaretPosition.isTextPosition(position)) {\n        var container = position.container();\n        return position.offset() === container.data.length;\n      } else {\n        return isCaretCandidate$3(position.getNode(true));\n      }\n    };\n    var isBeforeAfterSameElement = function (from, to) {\n      return !CaretPosition.isTextPosition(from) && !CaretPosition.isTextPosition(to) && from.getNode() === to.getNode(true);\n    };\n    var isAtBr = function (position) {\n      return !CaretPosition.isTextPosition(position) && isBr$5(position.getNode());\n    };\n    var shouldSkipPosition = function (forward, from, to) {\n      if (forward) {\n        return !isBeforeAfterSameElement(from, to) && !isAtBr(from) && isAfterOrEnd(from) && isBeforeOrStart(to);\n      } else {\n        return !isBeforeAfterSameElement(to, from) && isBeforeOrStart(from) && isAfterOrEnd(to);\n      }\n    };\n    var fromPosition = function (forward, root, pos) {\n      var walker = CaretWalker(root);\n      return Optional.from(forward ? walker.next(pos) : walker.prev(pos));\n    };\n    var navigate = function (forward, root, from) {\n      return fromPosition(forward, root, from).bind(function (to) {\n        if (isInSameBlock(from, to, root) && shouldSkipPosition(forward, from, to)) {\n          return fromPosition(forward, root, to);\n        } else {\n          return Optional.some(to);\n        }\n      });\n    };\n    var navigateIgnore = function (forward, root, from, ignoreFilter) {\n      return navigate(forward, root, from).bind(function (pos) {\n        return ignoreFilter(pos) ? navigateIgnore(forward, root, pos, ignoreFilter) : Optional.some(pos);\n      });\n    };\n    var positionIn = function (forward, element) {\n      var startNode = forward ? element.firstChild : element.lastChild;\n      if (isText$7(startNode)) {\n        return Optional.some(CaretPosition(startNode, forward ? 0 : startNode.data.length));\n      } else if (startNode) {\n        if (isCaretCandidate$3(startNode)) {\n          return Optional.some(forward ? CaretPosition.before(startNode) : afterElement(startNode));\n        } else {\n          return walkToPositionIn(forward, element, startNode);\n        }\n      } else {\n        return Optional.none();\n      }\n    };\n    var nextPosition = curry(fromPosition, true);\n    var prevPosition = curry(fromPosition, false);\n    var firstPositionIn = curry(positionIn, true);\n    var lastPositionIn = curry(positionIn, false);\n\n    var CARET_ID$1 = '_mce_caret';\n    var isCaretNode = function (node) {\n      return isElement$5(node) && node.id === CARET_ID$1;\n    };\n    var getParentCaretContainer = function (body, node) {\n      while (node && node !== body) {\n        if (node.id === CARET_ID$1) {\n          return node;\n        }\n        node = node.parentNode;\n      }\n      return null;\n    };\n\n    var isStringPathBookmark = function (bookmark) {\n      return isString$1(bookmark.start);\n    };\n    var isRangeBookmark = function (bookmark) {\n      return has$2(bookmark, 'rng');\n    };\n    var isIdBookmark = function (bookmark) {\n      return has$2(bookmark, 'id');\n    };\n    var isIndexBookmark = function (bookmark) {\n      return has$2(bookmark, 'name');\n    };\n    var isPathBookmark = function (bookmark) {\n      return Tools.isArray(bookmark.start);\n    };\n\n    var addBogus = function (dom, node) {\n      if (isElement$5(node) && dom.isBlock(node) && !node.innerHTML && !Env.ie) {\n        node.innerHTML = '<br data-mce-bogus=\"1\" />';\n      }\n      return node;\n    };\n    var resolveCaretPositionBookmark = function (dom, bookmark) {\n      var pos;\n      var rng = dom.createRng();\n      pos = resolve$2(dom.getRoot(), bookmark.start);\n      rng.setStart(pos.container(), pos.offset());\n      pos = resolve$2(dom.getRoot(), bookmark.end);\n      rng.setEnd(pos.container(), pos.offset());\n      return rng;\n    };\n    var insertZwsp = function (node, rng) {\n      var textNode = node.ownerDocument.createTextNode(ZWSP$1);\n      node.appendChild(textNode);\n      rng.setStart(textNode, 0);\n      rng.setEnd(textNode, 0);\n    };\n    var isEmpty$1 = function (node) {\n      return node.hasChildNodes() === false;\n    };\n    var tryFindRangePosition = function (node, rng) {\n      return lastPositionIn(node).fold(never, function (pos) {\n        rng.setStart(pos.container(), pos.offset());\n        rng.setEnd(pos.container(), pos.offset());\n        return true;\n      });\n    };\n    var padEmptyCaretContainer = function (root, node, rng) {\n      if (isEmpty$1(node) && getParentCaretContainer(root, node)) {\n        insertZwsp(node, rng);\n        return true;\n      } else {\n        return false;\n      }\n    };\n    var setEndPoint = function (dom, start, bookmark, rng) {\n      var point = bookmark[start ? 'start' : 'end'];\n      var i, node, offset, children;\n      var root = dom.getRoot();\n      if (point) {\n        offset = point[0];\n        for (node = root, i = point.length - 1; i >= 1; i--) {\n          children = node.childNodes;\n          if (padEmptyCaretContainer(root, node, rng)) {\n            return true;\n          }\n          if (point[i] > children.length - 1) {\n            if (padEmptyCaretContainer(root, node, rng)) {\n              return true;\n            }\n            return tryFindRangePosition(node, rng);\n          }\n          node = children[point[i]];\n        }\n        if (node.nodeType === 3) {\n          offset = Math.min(point[0], node.nodeValue.length);\n        }\n        if (node.nodeType === 1) {\n          offset = Math.min(point[0], node.childNodes.length);\n        }\n        if (start) {\n          rng.setStart(node, offset);\n        } else {\n          rng.setEnd(node, offset);\n        }\n      }\n      return true;\n    };\n    var isValidTextNode = function (node) {\n      return isText$7(node) && node.data.length > 0;\n    };\n    var restoreEndPoint = function (dom, suffix, bookmark) {\n      var marker = dom.get(bookmark.id + '_' + suffix), node, idx, next, prev;\n      var keep = bookmark.keep;\n      var container, offset;\n      if (marker) {\n        node = marker.parentNode;\n        if (suffix === 'start') {\n          if (!keep) {\n            idx = dom.nodeIndex(marker);\n          } else {\n            if (marker.hasChildNodes()) {\n              node = marker.firstChild;\n              idx = 1;\n            } else if (isValidTextNode(marker.nextSibling)) {\n              node = marker.nextSibling;\n              idx = 0;\n            } else if (isValidTextNode(marker.previousSibling)) {\n              node = marker.previousSibling;\n              idx = marker.previousSibling.data.length;\n            } else {\n              node = marker.parentNode;\n              idx = dom.nodeIndex(marker) + 1;\n            }\n          }\n          container = node;\n          offset = idx;\n        } else {\n          if (!keep) {\n            idx = dom.nodeIndex(marker);\n          } else {\n            if (marker.hasChildNodes()) {\n              node = marker.firstChild;\n              idx = 1;\n            } else if (isValidTextNode(marker.previousSibling)) {\n              node = marker.previousSibling;\n              idx = marker.previousSibling.data.length;\n            } else {\n              node = marker.parentNode;\n              idx = dom.nodeIndex(marker);\n            }\n          }\n          container = node;\n          offset = idx;\n        }\n        if (!keep) {\n          prev = marker.previousSibling;\n          next = marker.nextSibling;\n          Tools.each(Tools.grep(marker.childNodes), function (node) {\n            if (isText$7(node)) {\n              node.nodeValue = node.nodeValue.replace(/\\uFEFF/g, '');\n            }\n          });\n          while (marker = dom.get(bookmark.id + '_' + suffix)) {\n            dom.remove(marker, true);\n          }\n          if (prev && next && prev.nodeType === next.nodeType && isText$7(prev) && !Env.opera) {\n            idx = prev.nodeValue.length;\n            prev.appendData(next.nodeValue);\n            dom.remove(next);\n            container = prev;\n            offset = idx;\n          }\n        }\n        return Optional.some(CaretPosition(container, offset));\n      } else {\n        return Optional.none();\n      }\n    };\n    var resolvePaths = function (dom, bookmark) {\n      var rng = dom.createRng();\n      if (setEndPoint(dom, true, bookmark, rng) && setEndPoint(dom, false, bookmark, rng)) {\n        return Optional.some(rng);\n      } else {\n        return Optional.none();\n      }\n    };\n    var resolveId = function (dom, bookmark) {\n      var startPos = restoreEndPoint(dom, 'start', bookmark);\n      var endPos = restoreEndPoint(dom, 'end', bookmark);\n      return lift2(startPos, endPos.or(startPos), function (spos, epos) {\n        var rng = dom.createRng();\n        rng.setStart(addBogus(dom, spos.container()), spos.offset());\n        rng.setEnd(addBogus(dom, epos.container()), epos.offset());\n        return rng;\n      });\n    };\n    var resolveIndex = function (dom, bookmark) {\n      return Optional.from(dom.select(bookmark.name)[bookmark.index]).map(function (elm) {\n        var rng = dom.createRng();\n        rng.selectNode(elm);\n        return rng;\n      });\n    };\n    var resolve$1 = function (selection, bookmark) {\n      var dom = selection.dom;\n      if (bookmark) {\n        if (isPathBookmark(bookmark)) {\n          return resolvePaths(dom, bookmark);\n        } else if (isStringPathBookmark(bookmark)) {\n          return Optional.some(resolveCaretPositionBookmark(dom, bookmark));\n        } else if (isIdBookmark(bookmark)) {\n          return resolveId(dom, bookmark);\n        } else if (isIndexBookmark(bookmark)) {\n          return resolveIndex(dom, bookmark);\n        } else if (isRangeBookmark(bookmark)) {\n          return Optional.some(bookmark.rng);\n        }\n      }\n      return Optional.none();\n    };\n\n    var getBookmark$1 = function (selection, type, normalized) {\n      return getBookmark$2(selection, type, normalized);\n    };\n    var moveToBookmark = function (selection, bookmark) {\n      resolve$1(selection, bookmark).each(function (rng) {\n        selection.setRng(rng);\n      });\n    };\n    var isBookmarkNode$1 = function (node) {\n      return isElement$5(node) && node.tagName === 'SPAN' && node.getAttribute('data-mce-type') === 'bookmark';\n    };\n\n    var is = function (expected) {\n      return function (actual) {\n        return expected === actual;\n      };\n    };\n    var isNbsp = is(nbsp);\n    var isWhiteSpace = function (chr) {\n      return chr !== '' && ' \\f\\n\\r\\t\\x0B'.indexOf(chr) !== -1;\n    };\n    var isContent = function (chr) {\n      return !isWhiteSpace(chr) && !isNbsp(chr);\n    };\n\n    var isNode = function (node) {\n      return !!node.nodeType;\n    };\n    var isInlineBlock = function (node) {\n      return node && /^(IMG)$/.test(node.nodeName);\n    };\n    var moveStart = function (dom, selection, rng) {\n      var offset = rng.startOffset;\n      var container = rng.startContainer;\n      if (container === rng.endContainer) {\n        if (isInlineBlock(container.childNodes[offset])) {\n          return;\n        }\n      }\n      if (isElement$5(container)) {\n        var nodes = container.childNodes;\n        var walker = void 0;\n        if (offset < nodes.length) {\n          container = nodes[offset];\n          walker = new DomTreeWalker(container, dom.getParent(container, dom.isBlock));\n        } else {\n          container = nodes[nodes.length - 1];\n          walker = new DomTreeWalker(container, dom.getParent(container, dom.isBlock));\n          walker.next(true);\n        }\n        for (var node = walker.current(); node; node = walker.next()) {\n          if (isText$7(node) && !isWhiteSpaceNode$1(node)) {\n            rng.setStart(node, 0);\n            selection.setRng(rng);\n            return;\n          }\n        }\n      }\n    };\n    var getNonWhiteSpaceSibling = function (node, next, inc) {\n      if (node) {\n        var nextName = next ? 'nextSibling' : 'previousSibling';\n        for (node = inc ? node : node[nextName]; node; node = node[nextName]) {\n          if (isElement$5(node) || !isWhiteSpaceNode$1(node)) {\n            return node;\n          }\n        }\n      }\n    };\n    var isTextBlock$1 = function (editor, name) {\n      if (isNode(name)) {\n        name = name.nodeName;\n      }\n      return !!editor.schema.getTextBlockElements()[name.toLowerCase()];\n    };\n    var isValid = function (ed, parent, child) {\n      return ed.schema.isValidChild(parent, child);\n    };\n    var isWhiteSpaceNode$1 = function (node, allowSpaces) {\n      if (allowSpaces === void 0) {\n        allowSpaces = false;\n      }\n      if (isNonNullable(node) && isText$7(node)) {\n        var data = allowSpaces ? node.data.replace(/ /g, '\\xA0') : node.data;\n        return isWhitespaceText(data);\n      } else {\n        return false;\n      }\n    };\n    var isEmptyTextNode$1 = function (node) {\n      return isNonNullable(node) && isText$7(node) && node.length === 0;\n    };\n    var replaceVars = function (value, vars) {\n      if (isFunction(value)) {\n        value = value(vars);\n      } else if (isNonNullable(vars)) {\n        value = value.replace(/%(\\w+)/g, function (str, name) {\n          return vars[name] || str;\n        });\n      }\n      return value;\n    };\n    var isEq$5 = function (str1, str2) {\n      str1 = str1 || '';\n      str2 = str2 || '';\n      str1 = '' + (str1.nodeName || str1);\n      str2 = '' + (str2.nodeName || str2);\n      return str1.toLowerCase() === str2.toLowerCase();\n    };\n    var normalizeStyleValue = function (dom, value, name) {\n      if (name === 'color' || name === 'backgroundColor') {\n        value = dom.toHex(value);\n      }\n      if (name === 'fontWeight' && value === 700) {\n        value = 'bold';\n      }\n      if (name === 'fontFamily') {\n        value = value.replace(/[\\'\\\"]/g, '').replace(/,\\s+/g, ',');\n      }\n      return '' + value;\n    };\n    var getStyle = function (dom, node, name) {\n      return normalizeStyleValue(dom, dom.getStyle(node, name), name);\n    };\n    var getTextDecoration = function (dom, node) {\n      var decoration;\n      dom.getParent(node, function (n) {\n        decoration = dom.getStyle(n, 'text-decoration');\n        return decoration && decoration !== 'none';\n      });\n      return decoration;\n    };\n    var getParents$2 = function (dom, node, selector) {\n      return dom.getParents(node, selector, dom.getRoot());\n    };\n    var isVariableFormatName = function (editor, formatName) {\n      var hasVariableValues = function (format) {\n        var isVariableValue = function (val) {\n          return val.length > 1 && val.charAt(0) === '%';\n        };\n        return exists([\n          'styles',\n          'attributes'\n        ], function (key) {\n          return get$9(format, key).exists(function (field) {\n            var fieldValues = isArray$1(field) ? field : values(field);\n            return exists(fieldValues, isVariableValue);\n          });\n        });\n      };\n      return exists(editor.formatter.get(formatName), hasVariableValues);\n    };\n    var areSimilarFormats = function (editor, formatName, otherFormatName) {\n      var validKeys = [\n        'inline',\n        'block',\n        'selector',\n        'attributes',\n        'styles',\n        'classes'\n      ];\n      var filterObj = function (format) {\n        return filter$3(format, function (_, key) {\n          return exists(validKeys, function (validKey) {\n            return validKey === key;\n          });\n        });\n      };\n      return exists(editor.formatter.get(formatName), function (fmt1) {\n        var filteredFmt1 = filterObj(fmt1);\n        return exists(editor.formatter.get(otherFormatName), function (fmt2) {\n          var filteredFmt2 = filterObj(fmt2);\n          return equal$1(filteredFmt1, filteredFmt2);\n        });\n      });\n    };\n    var isBlockFormat = function (format) {\n      return hasNonNullableKey(format, 'block');\n    };\n    var isSelectorFormat = function (format) {\n      return hasNonNullableKey(format, 'selector');\n    };\n    var isInlineFormat = function (format) {\n      return hasNonNullableKey(format, 'inline');\n    };\n    var isMixedFormat = function (format) {\n      return isSelectorFormat(format) && isInlineFormat(format) && is$1(get$9(format, 'mixed'), true);\n    };\n    var shouldExpandToSelector = function (format) {\n      return isSelectorFormat(format) && format.expand !== false && !isInlineFormat(format);\n    };\n\n    var isBookmarkNode = isBookmarkNode$1;\n    var getParents$1 = getParents$2;\n    var isWhiteSpaceNode = isWhiteSpaceNode$1;\n    var isTextBlock = isTextBlock$1;\n    var isBogusBr = function (node) {\n      return isBr$5(node) && node.getAttribute('data-mce-bogus') && !node.nextSibling;\n    };\n    var findParentContentEditable = function (dom, node) {\n      var parent = node;\n      while (parent) {\n        if (isElement$5(parent) && dom.getContentEditable(parent)) {\n          return dom.getContentEditable(parent) === 'false' ? parent : node;\n        }\n        parent = parent.parentNode;\n      }\n      return node;\n    };\n    var walkText = function (start, node, offset, predicate) {\n      var str = node.data;\n      for (var i = offset; start ? i >= 0 : i < str.length; start ? i-- : i++) {\n        if (predicate(str.charAt(i))) {\n          return start ? i + 1 : i;\n        }\n      }\n      return -1;\n    };\n    var findSpace = function (start, node, offset) {\n      return walkText(start, node, offset, function (c) {\n        return isNbsp(c) || isWhiteSpace(c);\n      });\n    };\n    var findContent = function (start, node, offset) {\n      return walkText(start, node, offset, isContent);\n    };\n    var findWordEndPoint = function (dom, body, container, offset, start, includeTrailingSpaces) {\n      var lastTextNode;\n      var rootNode = dom.getParent(container, dom.isBlock) || body;\n      var walk = function (container, offset, pred) {\n        var textSeeker = TextSeeker(dom);\n        var walker = start ? textSeeker.backwards : textSeeker.forwards;\n        return Optional.from(walker(container, offset, function (text, textOffset) {\n          if (isBookmarkNode(text.parentNode)) {\n            return -1;\n          } else {\n            lastTextNode = text;\n            return pred(start, text, textOffset);\n          }\n        }, rootNode));\n      };\n      var spaceResult = walk(container, offset, findSpace);\n      return spaceResult.bind(function (result) {\n        return includeTrailingSpaces ? walk(result.container, result.offset + (start ? -1 : 0), findContent) : Optional.some(result);\n      }).orThunk(function () {\n        return lastTextNode ? Optional.some({\n          container: lastTextNode,\n          offset: start ? 0 : lastTextNode.length\n        }) : Optional.none();\n      });\n    };\n    var findSelectorEndPoint = function (dom, formatList, rng, container, siblingName) {\n      if (isText$7(container) && isEmpty$3(container.data) && container[siblingName]) {\n        container = container[siblingName];\n      }\n      var parents = getParents$1(dom, container);\n      for (var i = 0; i < parents.length; i++) {\n        for (var y = 0; y < formatList.length; y++) {\n          var curFormat = formatList[y];\n          if (isNonNullable(curFormat.collapsed) && curFormat.collapsed !== rng.collapsed) {\n            continue;\n          }\n          if (isSelectorFormat(curFormat) && dom.is(parents[i], curFormat.selector)) {\n            return parents[i];\n          }\n        }\n      }\n      return container;\n    };\n    var findBlockEndPoint = function (editor, formatList, container, siblingName) {\n      var node = container;\n      var dom = editor.dom;\n      var root = dom.getRoot();\n      var format = formatList[0];\n      if (isBlockFormat(format)) {\n        node = format.wrapper ? null : dom.getParent(container, format.block, root);\n      }\n      if (!node) {\n        var scopeRoot = dom.getParent(container, 'LI,TD,TH');\n        node = dom.getParent(isText$7(container) ? container.parentNode : container, function (node) {\n          return node !== root && isTextBlock(editor, node);\n        }, scopeRoot);\n      }\n      if (node && isBlockFormat(format) && format.wrapper) {\n        node = getParents$1(dom, node, 'ul,ol').reverse()[0] || node;\n      }\n      if (!node) {\n        node = container;\n        while (node[siblingName] && !dom.isBlock(node[siblingName])) {\n          node = node[siblingName];\n          if (isEq$5(node, 'br')) {\n            break;\n          }\n        }\n      }\n      return node || container;\n    };\n    var isAtBlockBoundary$1 = function (dom, root, container, siblingName) {\n      var parent = container.parentNode;\n      if (isNonNullable(container[siblingName])) {\n        return false;\n      } else if (parent === root || isNullable(parent) || dom.isBlock(parent)) {\n        return true;\n      } else {\n        return isAtBlockBoundary$1(dom, root, parent, siblingName);\n      }\n    };\n    var findParentContainer = function (dom, formatList, container, offset, start) {\n      var parent = container;\n      var siblingName = start ? 'previousSibling' : 'nextSibling';\n      var root = dom.getRoot();\n      if (isText$7(container) && !isWhiteSpaceNode(container)) {\n        if (start ? offset > 0 : offset < container.data.length) {\n          return container;\n        }\n      }\n      while (true) {\n        if (!formatList[0].block_expand && dom.isBlock(parent)) {\n          return parent;\n        }\n        for (var sibling = parent[siblingName]; sibling; sibling = sibling[siblingName]) {\n          var allowSpaces = isText$7(sibling) && !isAtBlockBoundary$1(dom, root, sibling, siblingName);\n          if (!isBookmarkNode(sibling) && !isBogusBr(sibling) && !isWhiteSpaceNode(sibling, allowSpaces)) {\n            return parent;\n          }\n        }\n        if (parent === root || parent.parentNode === root) {\n          container = parent;\n          break;\n        }\n        parent = parent.parentNode;\n      }\n      return container;\n    };\n    var isSelfOrParentBookmark = function (container) {\n      return isBookmarkNode(container.parentNode) || isBookmarkNode(container);\n    };\n    var expandRng = function (editor, rng, formatList, includeTrailingSpace) {\n      if (includeTrailingSpace === void 0) {\n        includeTrailingSpace = false;\n      }\n      var startContainer = rng.startContainer, startOffset = rng.startOffset, endContainer = rng.endContainer, endOffset = rng.endOffset;\n      var dom = editor.dom;\n      var format = formatList[0];\n      if (isElement$5(startContainer) && startContainer.hasChildNodes()) {\n        startContainer = getNode$1(startContainer, startOffset);\n        if (isText$7(startContainer)) {\n          startOffset = 0;\n        }\n      }\n      if (isElement$5(endContainer) && endContainer.hasChildNodes()) {\n        endContainer = getNode$1(endContainer, rng.collapsed ? endOffset : endOffset - 1);\n        if (isText$7(endContainer)) {\n          endOffset = endContainer.nodeValue.length;\n        }\n      }\n      startContainer = findParentContentEditable(dom, startContainer);\n      endContainer = findParentContentEditable(dom, endContainer);\n      if (isSelfOrParentBookmark(startContainer)) {\n        startContainer = isBookmarkNode(startContainer) ? startContainer : startContainer.parentNode;\n        if (rng.collapsed) {\n          startContainer = startContainer.previousSibling || startContainer;\n        } else {\n          startContainer = startContainer.nextSibling || startContainer;\n        }\n        if (isText$7(startContainer)) {\n          startOffset = rng.collapsed ? startContainer.length : 0;\n        }\n      }\n      if (isSelfOrParentBookmark(endContainer)) {\n        endContainer = isBookmarkNode(endContainer) ? endContainer : endContainer.parentNode;\n        if (rng.collapsed) {\n          endContainer = endContainer.nextSibling || endContainer;\n        } else {\n          endContainer = endContainer.previousSibling || endContainer;\n        }\n        if (isText$7(endContainer)) {\n          endOffset = rng.collapsed ? 0 : endContainer.length;\n        }\n      }\n      if (rng.collapsed) {\n        var startPoint = findWordEndPoint(dom, editor.getBody(), startContainer, startOffset, true, includeTrailingSpace);\n        startPoint.each(function (_a) {\n          var container = _a.container, offset = _a.offset;\n          startContainer = container;\n          startOffset = offset;\n        });\n        var endPoint = findWordEndPoint(dom, editor.getBody(), endContainer, endOffset, false, includeTrailingSpace);\n        endPoint.each(function (_a) {\n          var container = _a.container, offset = _a.offset;\n          endContainer = container;\n          endOffset = offset;\n        });\n      }\n      if (isInlineFormat(format) || format.block_expand) {\n        if (!isInlineFormat(format) || (!isText$7(startContainer) || startOffset === 0)) {\n          startContainer = findParentContainer(dom, formatList, startContainer, startOffset, true);\n        }\n        if (!isInlineFormat(format) || (!isText$7(endContainer) || endOffset === endContainer.nodeValue.length)) {\n          endContainer = findParentContainer(dom, formatList, endContainer, endOffset, false);\n        }\n      }\n      if (shouldExpandToSelector(format)) {\n        startContainer = findSelectorEndPoint(dom, formatList, rng, startContainer, 'previousSibling');\n        endContainer = findSelectorEndPoint(dom, formatList, rng, endContainer, 'nextSibling');\n      }\n      if (isBlockFormat(format) || isSelectorFormat(format)) {\n        startContainer = findBlockEndPoint(editor, formatList, startContainer, 'previousSibling');\n        endContainer = findBlockEndPoint(editor, formatList, endContainer, 'nextSibling');\n        if (isBlockFormat(format)) {\n          if (!dom.isBlock(startContainer)) {\n            startContainer = findParentContainer(dom, formatList, startContainer, startOffset, true);\n          }\n          if (!dom.isBlock(endContainer)) {\n            endContainer = findParentContainer(dom, formatList, endContainer, endOffset, false);\n          }\n        }\n      }\n      if (isElement$5(startContainer)) {\n        startOffset = dom.nodeIndex(startContainer);\n        startContainer = startContainer.parentNode;\n      }\n      if (isElement$5(endContainer)) {\n        endOffset = dom.nodeIndex(endContainer) + 1;\n        endContainer = endContainer.parentNode;\n      }\n      return {\n        startContainer: startContainer,\n        startOffset: startOffset,\n        endContainer: endContainer,\n        endOffset: endOffset\n      };\n    };\n\n    var walk$2 = function (dom, rng, callback) {\n      var startOffset = rng.startOffset;\n      var startContainer = getNode$1(rng.startContainer, startOffset);\n      var endOffset = rng.endOffset;\n      var endContainer = getNode$1(rng.endContainer, endOffset - 1);\n      var exclude = function (nodes) {\n        var firstNode = nodes[0];\n        if (isText$7(firstNode) && firstNode === startContainer && startOffset >= firstNode.data.length) {\n          nodes.splice(0, 1);\n        }\n        var lastNode = nodes[nodes.length - 1];\n        if (endOffset === 0 && nodes.length > 0 && lastNode === endContainer && isText$7(lastNode)) {\n          nodes.splice(nodes.length - 1, 1);\n        }\n        return nodes;\n      };\n      var collectSiblings = function (node, name, endNode) {\n        var siblings = [];\n        for (; node && node !== endNode; node = node[name]) {\n          siblings.push(node);\n        }\n        return siblings;\n      };\n      var findEndPoint = function (node, root) {\n        return dom.getParent(node, function (node) {\n          return node.parentNode === root;\n        }, root);\n      };\n      var walkBoundary = function (startNode, endNode, next) {\n        var siblingName = next ? 'nextSibling' : 'previousSibling';\n        for (var node = startNode, parent_1 = node.parentNode; node && node !== endNode; node = parent_1) {\n          parent_1 = node.parentNode;\n          var siblings_1 = collectSiblings(node === startNode ? node : node[siblingName], siblingName);\n          if (siblings_1.length) {\n            if (!next) {\n              siblings_1.reverse();\n            }\n            callback(exclude(siblings_1));\n          }\n        }\n      };\n      if (startContainer === endContainer) {\n        return callback(exclude([startContainer]));\n      }\n      var ancestor = dom.findCommonAncestor(startContainer, endContainer);\n      if (dom.isChildOf(startContainer, endContainer)) {\n        return walkBoundary(startContainer, ancestor, true);\n      }\n      if (dom.isChildOf(endContainer, startContainer)) {\n        return walkBoundary(endContainer, ancestor);\n      }\n      var startPoint = findEndPoint(startContainer, ancestor) || startContainer;\n      var endPoint = findEndPoint(endContainer, ancestor) || endContainer;\n      walkBoundary(startContainer, startPoint, true);\n      var siblings = collectSiblings(startPoint === startContainer ? startPoint : startPoint.nextSibling, 'nextSibling', endPoint === endContainer ? endPoint.nextSibling : endPoint);\n      if (siblings.length) {\n        callback(exclude(siblings));\n      }\n      walkBoundary(endContainer, endPoint);\n    };\n\n    var getRanges = function (selection) {\n      var ranges = [];\n      if (selection) {\n        for (var i = 0; i < selection.rangeCount; i++) {\n          ranges.push(selection.getRangeAt(i));\n        }\n      }\n      return ranges;\n    };\n    var getSelectedNodes = function (ranges) {\n      return bind(ranges, function (range) {\n        var node = getSelectedNode(range);\n        return node ? [SugarElement.fromDom(node)] : [];\n      });\n    };\n    var hasMultipleRanges = function (selection) {\n      return getRanges(selection).length > 1;\n    };\n\n    var getCellsFromRanges = function (ranges) {\n      return filter$4(getSelectedNodes(ranges), isTableCell$4);\n    };\n    var getCellsFromElement = function (elm) {\n      return descendants(elm, 'td[data-mce-selected],th[data-mce-selected]');\n    };\n    var getCellsFromElementOrRanges = function (ranges, element) {\n      var selectedCells = getCellsFromElement(element);\n      return selectedCells.length > 0 ? selectedCells : getCellsFromRanges(ranges);\n    };\n    var getCellsFromEditor = function (editor) {\n      return getCellsFromElementOrRanges(getRanges(editor.selection.getSel()), SugarElement.fromDom(editor.getBody()));\n    };\n    var getClosestTable = function (cell, isRoot) {\n      return ancestor$2(cell, 'table', isRoot);\n    };\n\n    var getStartNode = function (rng) {\n      var sc = rng.startContainer, so = rng.startOffset;\n      if (isText$7(sc)) {\n        return so === 0 ? Optional.some(SugarElement.fromDom(sc)) : Optional.none();\n      } else {\n        return Optional.from(sc.childNodes[so]).map(SugarElement.fromDom);\n      }\n    };\n    var getEndNode = function (rng) {\n      var ec = rng.endContainer, eo = rng.endOffset;\n      if (isText$7(ec)) {\n        return eo === ec.data.length ? Optional.some(SugarElement.fromDom(ec)) : Optional.none();\n      } else {\n        return Optional.from(ec.childNodes[eo - 1]).map(SugarElement.fromDom);\n      }\n    };\n    var getFirstChildren = function (node) {\n      return firstChild(node).fold(constant([node]), function (child) {\n        return [node].concat(getFirstChildren(child));\n      });\n    };\n    var getLastChildren$1 = function (node) {\n      return lastChild(node).fold(constant([node]), function (child) {\n        if (name(child) === 'br') {\n          return prevSibling(child).map(function (sibling) {\n            return [node].concat(getLastChildren$1(sibling));\n          }).getOr([]);\n        } else {\n          return [node].concat(getLastChildren$1(child));\n        }\n      });\n    };\n    var hasAllContentsSelected = function (elm, rng) {\n      return lift2(getStartNode(rng), getEndNode(rng), function (startNode, endNode) {\n        var start = find$3(getFirstChildren(elm), curry(eq, startNode));\n        var end = find$3(getLastChildren$1(elm), curry(eq, endNode));\n        return start.isSome() && end.isSome();\n      }).getOr(false);\n    };\n    var moveEndPoint = function (dom, rng, node, start) {\n      var root = node, walker = new DomTreeWalker(node, root);\n      var moveCaretBeforeOnEnterElementsMap = filter$3(dom.schema.getMoveCaretBeforeOnEnterElements(), function (_, name) {\n        return !contains$3([\n          'td',\n          'th',\n          'table'\n        ], name.toLowerCase());\n      });\n      do {\n        if (isText$7(node) && Tools.trim(node.nodeValue).length !== 0) {\n          if (start) {\n            rng.setStart(node, 0);\n          } else {\n            rng.setEnd(node, node.nodeValue.length);\n          }\n          return;\n        }\n        if (moveCaretBeforeOnEnterElementsMap[node.nodeName]) {\n          if (start) {\n            rng.setStartBefore(node);\n          } else {\n            if (node.nodeName === 'BR') {\n              rng.setEndBefore(node);\n            } else {\n              rng.setEndAfter(node);\n            }\n          }\n          return;\n        }\n      } while (node = start ? walker.next() : walker.prev());\n      if (root.nodeName === 'BODY') {\n        if (start) {\n          rng.setStart(root, 0);\n        } else {\n          rng.setEnd(root, root.childNodes.length);\n        }\n      }\n    };\n    var hasAnyRanges = function (editor) {\n      var sel = editor.selection.getSel();\n      return sel && sel.rangeCount > 0;\n    };\n    var runOnRanges = function (editor, executor) {\n      var fakeSelectionNodes = getCellsFromEditor(editor);\n      if (fakeSelectionNodes.length > 0) {\n        each$k(fakeSelectionNodes, function (elem) {\n          var node = elem.dom;\n          var fakeNodeRng = editor.dom.createRng();\n          fakeNodeRng.setStartBefore(node);\n          fakeNodeRng.setEndAfter(node);\n          executor(fakeNodeRng, true);\n        });\n      } else {\n        executor(editor.selection.getRng(), false);\n      }\n    };\n    var preserve = function (selection, fillBookmark, executor) {\n      var bookmark = getPersistentBookmark(selection, fillBookmark);\n      executor(bookmark);\n      selection.moveToBookmark(bookmark);\n    };\n\n    var NodeValue = function (is, name) {\n      var get = function (element) {\n        if (!is(element)) {\n          throw new Error('Can only get ' + name + ' value of a ' + name + ' node');\n        }\n        return getOption(element).getOr('');\n      };\n      var getOption = function (element) {\n        return is(element) ? Optional.from(element.dom.nodeValue) : Optional.none();\n      };\n      var set = function (element, value) {\n        if (!is(element)) {\n          throw new Error('Can only set raw ' + name + ' value of a ' + name + ' node');\n        }\n        element.dom.nodeValue = value;\n      };\n      return {\n        get: get,\n        getOption: getOption,\n        set: set\n      };\n    };\n\n    var api$1 = NodeValue(isText$8, 'text');\n    var get$2 = function (element) {\n      return api$1.get(element);\n    };\n\n    var isZeroWidth = function (elem) {\n      return isText$8(elem) && get$2(elem) === ZWSP$1;\n    };\n    var context = function (editor, elem, wrapName, nodeName) {\n      return parent(elem).fold(function () {\n        return 'skipping';\n      }, function (parent) {\n        if (nodeName === 'br' || isZeroWidth(elem)) {\n          return 'valid';\n        } else if (isAnnotation(elem)) {\n          return 'existing';\n        } else if (isCaretNode(elem.dom)) {\n          return 'caret';\n        } else if (!isValid(editor, wrapName, nodeName) || !isValid(editor, name(parent), wrapName)) {\n          return 'invalid-child';\n        } else {\n          return 'valid';\n        }\n      });\n    };\n\n    var applyWordGrab = function (editor, rng) {\n      var r = expandRng(editor, rng, [{ inline: 'span' }]);\n      rng.setStart(r.startContainer, r.startOffset);\n      rng.setEnd(r.endContainer, r.endOffset);\n      editor.selection.setRng(rng);\n    };\n    var makeAnnotation = function (eDoc, _a, annotationName, decorate) {\n      var _b = _a.uid, uid = _b === void 0 ? generate('mce-annotation') : _b, data = __rest(_a, ['uid']);\n      var master = SugarElement.fromTag('span', eDoc);\n      add$1(master, annotation());\n      set$1(master, '' + dataAnnotationId(), uid);\n      set$1(master, '' + dataAnnotation(), annotationName);\n      var _c = decorate(uid, data), _d = _c.attributes, attributes = _d === void 0 ? {} : _d, _e = _c.classes, classes = _e === void 0 ? [] : _e;\n      setAll$1(master, attributes);\n      add(master, classes);\n      return master;\n    };\n    var annotate = function (editor, rng, annotationName, decorate, data) {\n      var newWrappers = [];\n      var master = makeAnnotation(editor.getDoc(), data, annotationName, decorate);\n      var wrapper = value();\n      var finishWrapper = function () {\n        wrapper.clear();\n      };\n      var getOrOpenWrapper = function () {\n        return wrapper.get().getOrThunk(function () {\n          var nu = shallow(master);\n          newWrappers.push(nu);\n          wrapper.set(nu);\n          return nu;\n        });\n      };\n      var processElements = function (elems) {\n        each$k(elems, processElement);\n      };\n      var processElement = function (elem) {\n        var ctx = context(editor, elem, 'span', name(elem));\n        switch (ctx) {\n        case 'invalid-child': {\n            finishWrapper();\n            var children$1 = children(elem);\n            processElements(children$1);\n            finishWrapper();\n            break;\n          }\n        case 'valid': {\n            var w = getOrOpenWrapper();\n            wrap$3(elem, w);\n            break;\n          }\n        }\n      };\n      var processNodes = function (nodes) {\n        var elems = map$3(nodes, SugarElement.fromDom);\n        processElements(elems);\n      };\n      walk$2(editor.dom, rng, function (nodes) {\n        finishWrapper();\n        processNodes(nodes);\n      });\n      return newWrappers;\n    };\n    var annotateWithBookmark = function (editor, name, settings, data) {\n      editor.undoManager.transact(function () {\n        var selection = editor.selection;\n        var initialRng = selection.getRng();\n        var hasFakeSelection = getCellsFromEditor(editor).length > 0;\n        if (initialRng.collapsed && !hasFakeSelection) {\n          applyWordGrab(editor, initialRng);\n        }\n        if (selection.getRng().collapsed && !hasFakeSelection) {\n          var wrapper = makeAnnotation(editor.getDoc(), data, name, settings.decorate);\n          set(wrapper, nbsp);\n          selection.getRng().insertNode(wrapper.dom);\n          selection.select(wrapper.dom);\n        } else {\n          preserve(selection, false, function () {\n            runOnRanges(editor, function (selectionRng) {\n              annotate(editor, selectionRng, name, settings.decorate, data);\n            });\n          });\n        }\n      });\n    };\n\n    var Annotator = function (editor) {\n      var registry = create$7();\n      setup$m(editor, registry);\n      var changes = setup$n(editor);\n      return {\n        register: function (name, settings) {\n          registry.register(name, settings);\n        },\n        annotate: function (name, data) {\n          registry.lookup(name).each(function (settings) {\n            annotateWithBookmark(editor, name, settings, data);\n          });\n        },\n        annotationChanged: function (name, callback) {\n          changes.addListener(name, callback);\n        },\n        remove: function (name) {\n          identify(editor, Optional.some(name)).each(function (_a) {\n            var elements = _a.elements;\n            each$k(elements, unwrap);\n          });\n        },\n        getAll: function (name) {\n          var directory = findAll(editor, name);\n          return map$2(directory, function (elems) {\n            return map$3(elems, function (elem) {\n              return elem.dom;\n            });\n          });\n        }\n      };\n    };\n\n    var BookmarkManager = function (selection) {\n      return {\n        getBookmark: curry(getBookmark$1, selection),\n        moveToBookmark: curry(moveToBookmark, selection)\n      };\n    };\n    BookmarkManager.isBookmarkNode = isBookmarkNode$1;\n\n    var getContentEditableRoot$1 = function (root, node) {\n      while (node && node !== root) {\n        if (isContentEditableTrue$4(node) || isContentEditableFalse$b(node)) {\n          return node;\n        }\n        node = node.parentNode;\n      }\n      return null;\n    };\n\n    var isXYWithinRange = function (clientX, clientY, range) {\n      if (range.collapsed) {\n        return false;\n      }\n      if (Env.browser.isIE() && range.startOffset === range.endOffset - 1 && range.startContainer === range.endContainer) {\n        var elm = range.startContainer.childNodes[range.startOffset];\n        if (isElement$5(elm)) {\n          return exists(elm.getClientRects(), function (rect) {\n            return containsXY(rect, clientX, clientY);\n          });\n        }\n      }\n      return exists(range.getClientRects(), function (rect) {\n        return containsXY(rect, clientX, clientY);\n      });\n    };\n\n    var firePreProcess = function (editor, args) {\n      return editor.fire('PreProcess', args);\n    };\n    var firePostProcess = function (editor, args) {\n      return editor.fire('PostProcess', args);\n    };\n    var fireRemove = function (editor) {\n      return editor.fire('remove');\n    };\n    var fireDetach = function (editor) {\n      return editor.fire('detach');\n    };\n    var fireSwitchMode = function (editor, mode) {\n      return editor.fire('SwitchMode', { mode: mode });\n    };\n    var fireObjectResizeStart = function (editor, target, width, height, origin) {\n      editor.fire('ObjectResizeStart', {\n        target: target,\n        width: width,\n        height: height,\n        origin: origin\n      });\n    };\n    var fireObjectResized = function (editor, target, width, height, origin) {\n      editor.fire('ObjectResized', {\n        target: target,\n        width: width,\n        height: height,\n        origin: origin\n      });\n    };\n    var firePreInit = function (editor) {\n      return editor.fire('PreInit');\n    };\n    var firePostRender = function (editor) {\n      return editor.fire('PostRender');\n    };\n    var fireInit = function (editor) {\n      return editor.fire('Init');\n    };\n    var firePlaceholderToggle = function (editor, state) {\n      return editor.fire('PlaceholderToggle', { state: state });\n    };\n    var fireError = function (editor, errorType, error) {\n      return editor.fire(errorType, error);\n    };\n    var fireFormatApply = function (editor, format, node, vars) {\n      return editor.fire('FormatApply', {\n        format: format,\n        node: node,\n        vars: vars\n      });\n    };\n    var fireFormatRemove = function (editor, format, node, vars) {\n      return editor.fire('FormatRemove', {\n        format: format,\n        node: node,\n        vars: vars\n      });\n    };\n\n    var VK = {\n      BACKSPACE: 8,\n      DELETE: 46,\n      DOWN: 40,\n      ENTER: 13,\n      ESC: 27,\n      LEFT: 37,\n      RIGHT: 39,\n      SPACEBAR: 32,\n      TAB: 9,\n      UP: 38,\n      PAGE_UP: 33,\n      PAGE_DOWN: 34,\n      END: 35,\n      HOME: 36,\n      modifierPressed: function (e) {\n        return e.shiftKey || e.ctrlKey || e.altKey || VK.metaKeyPressed(e);\n      },\n      metaKeyPressed: function (e) {\n        return Env.mac ? e.metaKey : e.ctrlKey && !e.altKey;\n      }\n    };\n\n    var isContentEditableFalse$5 = isContentEditableFalse$b;\n    var ControlSelection = function (selection, editor) {\n      var elementSelectionAttr = 'data-mce-selected';\n      var dom = editor.dom, each = Tools.each;\n      var selectedElm, selectedElmGhost, resizeHelper, selectedHandle, resizeBackdrop;\n      var startX, startY, selectedElmX, selectedElmY, startW, startH, ratio, resizeStarted;\n      var width, height;\n      var editableDoc = editor.getDoc(), rootDocument = document;\n      var abs = Math.abs, round = Math.round, rootElement = editor.getBody();\n      var startScrollWidth, startScrollHeight;\n      var resizeHandles = {\n        nw: [\n          0,\n          0,\n          -1,\n          -1\n        ],\n        ne: [\n          1,\n          0,\n          1,\n          -1\n        ],\n        se: [\n          1,\n          1,\n          1,\n          1\n        ],\n        sw: [\n          0,\n          1,\n          -1,\n          1\n        ]\n      };\n      var isImage = function (elm) {\n        return elm && (elm.nodeName === 'IMG' || editor.dom.is(elm, 'figure.image'));\n      };\n      var isMedia = function (elm) {\n        return isMedia$2(elm) || dom.hasClass(elm, 'mce-preview-object');\n      };\n      var isEventOnImageOutsideRange = function (evt, range) {\n        if (evt.type === 'longpress' || evt.type.indexOf('touch') === 0) {\n          var touch = evt.touches[0];\n          return isImage(evt.target) && !isXYWithinRange(touch.clientX, touch.clientY, range);\n        } else {\n          return isImage(evt.target) && !isXYWithinRange(evt.clientX, evt.clientY, range);\n        }\n      };\n      var contextMenuSelectImage = function (evt) {\n        var target = evt.target;\n        if (isEventOnImageOutsideRange(evt, editor.selection.getRng()) && !evt.isDefaultPrevented()) {\n          editor.selection.select(target);\n        }\n      };\n      var getResizeTargets = function (elm) {\n        if (dom.is(elm, 'figure.image')) {\n          return [elm.querySelector('img')];\n        } else if (dom.hasClass(elm, 'mce-preview-object') && isNonNullable(elm.firstElementChild)) {\n          return [\n            elm,\n            elm.firstElementChild\n          ];\n        } else {\n          return [elm];\n        }\n      };\n      var isResizable = function (elm) {\n        var selector = getObjectResizing(editor);\n        if (!selector) {\n          return false;\n        }\n        if (elm.getAttribute('data-mce-resize') === 'false') {\n          return false;\n        }\n        if (elm === editor.getBody()) {\n          return false;\n        }\n        if (dom.hasClass(elm, 'mce-preview-object')) {\n          return is$2(SugarElement.fromDom(elm.firstElementChild), selector);\n        } else {\n          return is$2(SugarElement.fromDom(elm), selector);\n        }\n      };\n      var createGhostElement = function (elm) {\n        if (isMedia(elm)) {\n          return dom.create('img', { src: Env.transparentSrc });\n        } else {\n          return elm.cloneNode(true);\n        }\n      };\n      var setSizeProp = function (element, name, value) {\n        if (isNonNullable(value)) {\n          var targets = getResizeTargets(element);\n          each$k(targets, function (target) {\n            if (target.style[name] || !editor.schema.isValid(target.nodeName.toLowerCase(), name)) {\n              dom.setStyle(target, name, value);\n            } else {\n              dom.setAttrib(target, name, '' + value);\n            }\n          });\n        }\n      };\n      var setGhostElmSize = function (ghostElm, width, height) {\n        setSizeProp(ghostElm, 'width', width);\n        setSizeProp(ghostElm, 'height', height);\n      };\n      var resizeGhostElement = function (e) {\n        var deltaX, deltaY, proportional;\n        var resizeHelperX, resizeHelperY;\n        deltaX = e.screenX - startX;\n        deltaY = e.screenY - startY;\n        width = deltaX * selectedHandle[2] + startW;\n        height = deltaY * selectedHandle[3] + startH;\n        width = width < 5 ? 5 : width;\n        height = height < 5 ? 5 : height;\n        if ((isImage(selectedElm) || isMedia(selectedElm)) && getResizeImgProportional(editor) !== false) {\n          proportional = !VK.modifierPressed(e);\n        } else {\n          proportional = VK.modifierPressed(e);\n        }\n        if (proportional) {\n          if (abs(deltaX) > abs(deltaY)) {\n            height = round(width * ratio);\n            width = round(height / ratio);\n          } else {\n            width = round(height / ratio);\n            height = round(width * ratio);\n          }\n        }\n        setGhostElmSize(selectedElmGhost, width, height);\n        resizeHelperX = selectedHandle.startPos.x + deltaX;\n        resizeHelperY = selectedHandle.startPos.y + deltaY;\n        resizeHelperX = resizeHelperX > 0 ? resizeHelperX : 0;\n        resizeHelperY = resizeHelperY > 0 ? resizeHelperY : 0;\n        dom.setStyles(resizeHelper, {\n          left: resizeHelperX,\n          top: resizeHelperY,\n          display: 'block'\n        });\n        resizeHelper.innerHTML = width + ' &times; ' + height;\n        if (selectedHandle[2] < 0 && selectedElmGhost.clientWidth <= width) {\n          dom.setStyle(selectedElmGhost, 'left', selectedElmX + (startW - width));\n        }\n        if (selectedHandle[3] < 0 && selectedElmGhost.clientHeight <= height) {\n          dom.setStyle(selectedElmGhost, 'top', selectedElmY + (startH - height));\n        }\n        deltaX = rootElement.scrollWidth - startScrollWidth;\n        deltaY = rootElement.scrollHeight - startScrollHeight;\n        if (deltaX + deltaY !== 0) {\n          dom.setStyles(resizeHelper, {\n            left: resizeHelperX - deltaX,\n            top: resizeHelperY - deltaY\n          });\n        }\n        if (!resizeStarted) {\n          fireObjectResizeStart(editor, selectedElm, startW, startH, 'corner-' + selectedHandle.name);\n          resizeStarted = true;\n        }\n      };\n      var endGhostResize = function () {\n        var wasResizeStarted = resizeStarted;\n        resizeStarted = false;\n        if (wasResizeStarted) {\n          setSizeProp(selectedElm, 'width', width);\n          setSizeProp(selectedElm, 'height', height);\n        }\n        dom.unbind(editableDoc, 'mousemove', resizeGhostElement);\n        dom.unbind(editableDoc, 'mouseup', endGhostResize);\n        if (rootDocument !== editableDoc) {\n          dom.unbind(rootDocument, 'mousemove', resizeGhostElement);\n          dom.unbind(rootDocument, 'mouseup', endGhostResize);\n        }\n        dom.remove(selectedElmGhost);\n        dom.remove(resizeHelper);\n        dom.remove(resizeBackdrop);\n        showResizeRect(selectedElm);\n        if (wasResizeStarted) {\n          fireObjectResized(editor, selectedElm, width, height, 'corner-' + selectedHandle.name);\n          dom.setAttrib(selectedElm, 'style', dom.getAttrib(selectedElm, 'style'));\n        }\n        editor.nodeChanged();\n      };\n      var showResizeRect = function (targetElm) {\n        unbindResizeHandleEvents();\n        var position = dom.getPos(targetElm, rootElement);\n        var selectedElmX = position.x;\n        var selectedElmY = position.y;\n        var rect = targetElm.getBoundingClientRect();\n        var targetWidth = rect.width || rect.right - rect.left;\n        var targetHeight = rect.height || rect.bottom - rect.top;\n        if (selectedElm !== targetElm) {\n          hideResizeRect();\n          selectedElm = targetElm;\n          width = height = 0;\n        }\n        var e = editor.fire('ObjectSelected', { target: targetElm });\n        var selectedValue = dom.getAttrib(selectedElm, elementSelectionAttr, '1');\n        if (isResizable(targetElm) && !e.isDefaultPrevented()) {\n          each(resizeHandles, function (handle, name) {\n            var handleElm;\n            var startDrag = function (e) {\n              var target = getResizeTargets(selectedElm)[0];\n              startX = e.screenX;\n              startY = e.screenY;\n              startW = target.clientWidth;\n              startH = target.clientHeight;\n              ratio = startH / startW;\n              selectedHandle = handle;\n              selectedHandle.name = name;\n              selectedHandle.startPos = {\n                x: targetWidth * handle[0] + selectedElmX,\n                y: targetHeight * handle[1] + selectedElmY\n              };\n              startScrollWidth = rootElement.scrollWidth;\n              startScrollHeight = rootElement.scrollHeight;\n              resizeBackdrop = dom.add(rootElement, 'div', {\n                'class': 'mce-resize-backdrop',\n                'data-mce-bogus': 'all'\n              });\n              dom.setStyles(resizeBackdrop, {\n                position: 'fixed',\n                left: '0',\n                top: '0',\n                width: '100%',\n                height: '100%'\n              });\n              selectedElmGhost = createGhostElement(selectedElm);\n              dom.addClass(selectedElmGhost, 'mce-clonedresizable');\n              dom.setAttrib(selectedElmGhost, 'data-mce-bogus', 'all');\n              selectedElmGhost.contentEditable = 'false';\n              dom.setStyles(selectedElmGhost, {\n                left: selectedElmX,\n                top: selectedElmY,\n                margin: 0\n              });\n              setGhostElmSize(selectedElmGhost, targetWidth, targetHeight);\n              selectedElmGhost.removeAttribute(elementSelectionAttr);\n              rootElement.appendChild(selectedElmGhost);\n              dom.bind(editableDoc, 'mousemove', resizeGhostElement);\n              dom.bind(editableDoc, 'mouseup', endGhostResize);\n              if (rootDocument !== editableDoc) {\n                dom.bind(rootDocument, 'mousemove', resizeGhostElement);\n                dom.bind(rootDocument, 'mouseup', endGhostResize);\n              }\n              resizeHelper = dom.add(rootElement, 'div', {\n                'class': 'mce-resize-helper',\n                'data-mce-bogus': 'all'\n              }, startW + ' &times; ' + startH);\n            };\n            handleElm = dom.get('mceResizeHandle' + name);\n            if (handleElm) {\n              dom.remove(handleElm);\n            }\n            handleElm = dom.add(rootElement, 'div', {\n              'id': 'mceResizeHandle' + name,\n              'data-mce-bogus': 'all',\n              'class': 'mce-resizehandle',\n              'unselectable': true,\n              'style': 'cursor:' + name + '-resize; margin:0; padding:0'\n            });\n            if (Env.ie === 11) {\n              handleElm.contentEditable = false;\n            }\n            dom.bind(handleElm, 'mousedown', function (e) {\n              e.stopImmediatePropagation();\n              e.preventDefault();\n              startDrag(e);\n            });\n            handle.elm = handleElm;\n            dom.setStyles(handleElm, {\n              left: targetWidth * handle[0] + selectedElmX - handleElm.offsetWidth / 2,\n              top: targetHeight * handle[1] + selectedElmY - handleElm.offsetHeight / 2\n            });\n          });\n        } else {\n          hideResizeRect();\n        }\n        if (!dom.getAttrib(selectedElm, elementSelectionAttr)) {\n          selectedElm.setAttribute(elementSelectionAttr, selectedValue);\n        }\n      };\n      var hideResizeRect = function () {\n        unbindResizeHandleEvents();\n        if (selectedElm) {\n          selectedElm.removeAttribute(elementSelectionAttr);\n        }\n        each$j(resizeHandles, function (value, name) {\n          var handleElm = dom.get('mceResizeHandle' + name);\n          if (handleElm) {\n            dom.unbind(handleElm);\n            dom.remove(handleElm);\n          }\n        });\n      };\n      var updateResizeRect = function (e) {\n        var startElm, controlElm;\n        var isChildOrEqual = function (node, parent) {\n          if (node) {\n            do {\n              if (node === parent) {\n                return true;\n              }\n            } while (node = node.parentNode);\n          }\n        };\n        if (resizeStarted || editor.removed) {\n          return;\n        }\n        each(dom.select('img[data-mce-selected],hr[data-mce-selected]'), function (img) {\n          img.removeAttribute(elementSelectionAttr);\n        });\n        controlElm = e.type === 'mousedown' ? e.target : selection.getNode();\n        controlElm = dom.$(controlElm).closest('table,img,figure.image,hr,video,span.mce-preview-object')[0];\n        if (isChildOrEqual(controlElm, rootElement)) {\n          disableGeckoResize();\n          startElm = selection.getStart(true);\n          if (isChildOrEqual(startElm, controlElm) && isChildOrEqual(selection.getEnd(true), controlElm)) {\n            showResizeRect(controlElm);\n            return;\n          }\n        }\n        hideResizeRect();\n      };\n      var isWithinContentEditableFalse = function (elm) {\n        return isContentEditableFalse$5(getContentEditableRoot$1(editor.getBody(), elm));\n      };\n      var unbindResizeHandleEvents = function () {\n        each$j(resizeHandles, function (handle) {\n          if (handle.elm) {\n            dom.unbind(handle.elm);\n            delete handle.elm;\n          }\n        });\n      };\n      var disableGeckoResize = function () {\n        try {\n          editor.getDoc().execCommand('enableObjectResizing', false, 'false');\n        } catch (ex) {\n        }\n      };\n      editor.on('init', function () {\n        disableGeckoResize();\n        if (Env.browser.isIE() || Env.browser.isEdge()) {\n          editor.on('mousedown click', function (e) {\n            var target = e.target, nodeName = target.nodeName;\n            if (!resizeStarted && /^(TABLE|IMG|HR)$/.test(nodeName) && !isWithinContentEditableFalse(target)) {\n              if (e.button !== 2) {\n                editor.selection.select(target, nodeName === 'TABLE');\n              }\n              if (e.type === 'mousedown') {\n                editor.nodeChanged();\n              }\n            }\n          });\n          var handleMSControlSelect_1 = function (e) {\n            var delayedSelect = function (node) {\n              Delay.setEditorTimeout(editor, function () {\n                return editor.selection.select(node);\n              });\n            };\n            if (isWithinContentEditableFalse(e.target) || isMedia$2(e.target)) {\n              e.preventDefault();\n              delayedSelect(e.target);\n              return;\n            }\n            if (/^(TABLE|IMG|HR)$/.test(e.target.nodeName)) {\n              e.preventDefault();\n              if (e.target.tagName === 'IMG') {\n                delayedSelect(e.target);\n              }\n            }\n          };\n          dom.bind(rootElement, 'mscontrolselect', handleMSControlSelect_1);\n          editor.on('remove', function () {\n            return dom.unbind(rootElement, 'mscontrolselect', handleMSControlSelect_1);\n          });\n        }\n        var throttledUpdateResizeRect = Delay.throttle(function (e) {\n          if (!editor.composing) {\n            updateResizeRect(e);\n          }\n        });\n        editor.on('NodeChange ResizeEditor ResizeWindow ResizeContent drop', throttledUpdateResizeRect);\n        editor.on('keyup compositionend', function (e) {\n          if (selectedElm && selectedElm.nodeName === 'TABLE') {\n            throttledUpdateResizeRect(e);\n          }\n        });\n        editor.on('hide blur', hideResizeRect);\n        editor.on('contextmenu longpress', contextMenuSelectImage, true);\n      });\n      editor.on('remove', unbindResizeHandleEvents);\n      var destroy = function () {\n        selectedElm = selectedElmGhost = resizeBackdrop = null;\n      };\n      return {\n        isResizable: isResizable,\n        showResizeRect: showResizeRect,\n        hideResizeRect: hideResizeRect,\n        updateResizeRect: updateResizeRect,\n        destroy: destroy\n      };\n    };\n\n    var hasCeProperty = function (node) {\n      return isContentEditableTrue$4(node) || isContentEditableFalse$b(node);\n    };\n    var findParent$1 = function (node, rootNode, predicate) {\n      while (node && node !== rootNode) {\n        if (predicate(node)) {\n          return node;\n        }\n        node = node.parentNode;\n      }\n      return null;\n    };\n    var findClosestIeRange = function (clientX, clientY, doc) {\n      var rects;\n      var element = doc.elementFromPoint(clientX, clientY);\n      var rng = doc.body.createTextRange();\n      if (!element || element.tagName === 'HTML') {\n        element = doc.body;\n      }\n      rng.moveToElementText(element);\n      rects = Tools.toArray(rng.getClientRects());\n      rects = rects.sort(function (a, b) {\n        a = Math.abs(Math.max(a.top - clientY, a.bottom - clientY));\n        b = Math.abs(Math.max(b.top - clientY, b.bottom - clientY));\n        return a - b;\n      });\n      if (rects.length > 0) {\n        clientY = (rects[0].bottom + rects[0].top) / 2;\n        try {\n          rng.moveToPoint(clientX, clientY);\n          rng.collapse(true);\n          return rng;\n        } catch (ex) {\n        }\n      }\n      return null;\n    };\n    var moveOutOfContentEditableFalse = function (rng, rootNode) {\n      var parentElement = rng && rng.parentElement ? rng.parentElement() : null;\n      return isContentEditableFalse$b(findParent$1(parentElement, rootNode, hasCeProperty)) ? null : rng;\n    };\n    var fromPoint = function (clientX, clientY, doc) {\n      var rng, point;\n      var pointDoc = doc;\n      if (pointDoc.caretPositionFromPoint) {\n        point = pointDoc.caretPositionFromPoint(clientX, clientY);\n        if (point) {\n          rng = doc.createRange();\n          rng.setStart(point.offsetNode, point.offset);\n          rng.collapse(true);\n        }\n      } else if (pointDoc.caretRangeFromPoint) {\n        rng = pointDoc.caretRangeFromPoint(clientX, clientY);\n      } else if (pointDoc.body.createTextRange) {\n        rng = pointDoc.body.createTextRange();\n        try {\n          rng.moveToPoint(clientX, clientY);\n          rng.collapse(true);\n        } catch (ex) {\n          rng = findClosestIeRange(clientX, clientY, doc);\n        }\n        return moveOutOfContentEditableFalse(rng, doc.body);\n      }\n      return rng;\n    };\n\n    var isEq$4 = function (rng1, rng2) {\n      return rng1 && rng2 && (rng1.startContainer === rng2.startContainer && rng1.startOffset === rng2.startOffset) && (rng1.endContainer === rng2.endContainer && rng1.endOffset === rng2.endOffset);\n    };\n\n    var findParent = function (node, rootNode, predicate) {\n      while (node && node !== rootNode) {\n        if (predicate(node)) {\n          return node;\n        }\n        node = node.parentNode;\n      }\n      return null;\n    };\n    var hasParent$1 = function (node, rootNode, predicate) {\n      return findParent(node, rootNode, predicate) !== null;\n    };\n    var hasParentWithName = function (node, rootNode, name) {\n      return hasParent$1(node, rootNode, function (node) {\n        return node.nodeName === name;\n      });\n    };\n    var isTable = function (node) {\n      return node && node.nodeName === 'TABLE';\n    };\n    var isTableCell$2 = function (node) {\n      return node && /^(TD|TH|CAPTION)$/.test(node.nodeName);\n    };\n    var isCeFalseCaretContainer = function (node, rootNode) {\n      return isCaretContainer$2(node) && hasParent$1(node, rootNode, isCaretNode) === false;\n    };\n    var hasBrBeforeAfter = function (dom, node, left) {\n      var walker = new DomTreeWalker(node, dom.getParent(node.parentNode, dom.isBlock) || dom.getRoot());\n      while (node = walker[left ? 'prev' : 'next']()) {\n        if (isBr$5(node)) {\n          return true;\n        }\n      }\n    };\n    var isPrevNode = function (node, name) {\n      return node.previousSibling && node.previousSibling.nodeName === name;\n    };\n    var hasContentEditableFalseParent = function (body, node) {\n      while (node && node !== body) {\n        if (isContentEditableFalse$b(node)) {\n          return true;\n        }\n        node = node.parentNode;\n      }\n      return false;\n    };\n    var findTextNodeRelative = function (dom, isAfterNode, collapsed, left, startNode) {\n      var lastInlineElement;\n      var body = dom.getRoot();\n      var node;\n      var nonEmptyElementsMap = dom.schema.getNonEmptyElements();\n      var parentBlockContainer = dom.getParent(startNode.parentNode, dom.isBlock) || body;\n      if (left && isBr$5(startNode) && isAfterNode && dom.isEmpty(parentBlockContainer)) {\n        return Optional.some(CaretPosition(startNode.parentNode, dom.nodeIndex(startNode)));\n      }\n      var walker = new DomTreeWalker(startNode, parentBlockContainer);\n      while (node = walker[left ? 'prev' : 'next']()) {\n        if (dom.getContentEditableParent(node) === 'false' || isCeFalseCaretContainer(node, body)) {\n          return Optional.none();\n        }\n        if (isText$7(node) && node.nodeValue.length > 0) {\n          if (hasParentWithName(node, body, 'A') === false) {\n            return Optional.some(CaretPosition(node, left ? node.nodeValue.length : 0));\n          }\n          return Optional.none();\n        }\n        if (dom.isBlock(node) || nonEmptyElementsMap[node.nodeName.toLowerCase()]) {\n          return Optional.none();\n        }\n        lastInlineElement = node;\n      }\n      if (collapsed && lastInlineElement) {\n        return Optional.some(CaretPosition(lastInlineElement, 0));\n      }\n      return Optional.none();\n    };\n    var normalizeEndPoint = function (dom, collapsed, start, rng) {\n      var container, offset;\n      var body = dom.getRoot();\n      var node;\n      var directionLeft, normalized = false;\n      container = rng[(start ? 'start' : 'end') + 'Container'];\n      offset = rng[(start ? 'start' : 'end') + 'Offset'];\n      var isAfterNode = isElement$5(container) && offset === container.childNodes.length;\n      var nonEmptyElementsMap = dom.schema.getNonEmptyElements();\n      directionLeft = start;\n      if (isCaretContainer$2(container)) {\n        return Optional.none();\n      }\n      if (isElement$5(container) && offset > container.childNodes.length - 1) {\n        directionLeft = false;\n      }\n      if (isDocument$1(container)) {\n        container = body;\n        offset = 0;\n      }\n      if (container === body) {\n        if (directionLeft) {\n          node = container.childNodes[offset > 0 ? offset - 1 : 0];\n          if (node) {\n            if (isCaretContainer$2(node)) {\n              return Optional.none();\n            }\n            if (nonEmptyElementsMap[node.nodeName] || isTable(node)) {\n              return Optional.none();\n            }\n          }\n        }\n        if (container.hasChildNodes()) {\n          offset = Math.min(!directionLeft && offset > 0 ? offset - 1 : offset, container.childNodes.length - 1);\n          container = container.childNodes[offset];\n          offset = isText$7(container) && isAfterNode ? container.data.length : 0;\n          if (!collapsed && container === body.lastChild && isTable(container)) {\n            return Optional.none();\n          }\n          if (hasContentEditableFalseParent(body, container) || isCaretContainer$2(container)) {\n            return Optional.none();\n          }\n          if (container.hasChildNodes() && isTable(container) === false) {\n            node = container;\n            var walker = new DomTreeWalker(container, body);\n            do {\n              if (isContentEditableFalse$b(node) || isCaretContainer$2(node)) {\n                normalized = false;\n                break;\n              }\n              if (isText$7(node) && node.nodeValue.length > 0) {\n                offset = directionLeft ? 0 : node.nodeValue.length;\n                container = node;\n                normalized = true;\n                break;\n              }\n              if (nonEmptyElementsMap[node.nodeName.toLowerCase()] && !isTableCell$2(node)) {\n                offset = dom.nodeIndex(node);\n                container = node.parentNode;\n                if (!directionLeft) {\n                  offset++;\n                }\n                normalized = true;\n                break;\n              }\n            } while (node = directionLeft ? walker.next() : walker.prev());\n          }\n        }\n      }\n      if (collapsed) {\n        if (isText$7(container) && offset === 0) {\n          findTextNodeRelative(dom, isAfterNode, collapsed, true, container).each(function (pos) {\n            container = pos.container();\n            offset = pos.offset();\n            normalized = true;\n          });\n        }\n        if (isElement$5(container)) {\n          node = container.childNodes[offset];\n          if (!node) {\n            node = container.childNodes[offset - 1];\n          }\n          if (node && isBr$5(node) && !isPrevNode(node, 'A') && !hasBrBeforeAfter(dom, node, false) && !hasBrBeforeAfter(dom, node, true)) {\n            findTextNodeRelative(dom, isAfterNode, collapsed, true, node).each(function (pos) {\n              container = pos.container();\n              offset = pos.offset();\n              normalized = true;\n            });\n          }\n        }\n      }\n      if (directionLeft && !collapsed && isText$7(container) && offset === container.nodeValue.length) {\n        findTextNodeRelative(dom, isAfterNode, collapsed, false, container).each(function (pos) {\n          container = pos.container();\n          offset = pos.offset();\n          normalized = true;\n        });\n      }\n      return normalized ? Optional.some(CaretPosition(container, offset)) : Optional.none();\n    };\n    var normalize$2 = function (dom, rng) {\n      var collapsed = rng.collapsed, normRng = rng.cloneRange();\n      var startPos = CaretPosition.fromRangeStart(rng);\n      normalizeEndPoint(dom, collapsed, true, normRng).each(function (pos) {\n        if (!collapsed || !CaretPosition.isAbove(startPos, pos)) {\n          normRng.setStart(pos.container(), pos.offset());\n        }\n      });\n      if (!collapsed) {\n        normalizeEndPoint(dom, collapsed, false, normRng).each(function (pos) {\n          normRng.setEnd(pos.container(), pos.offset());\n        });\n      }\n      if (collapsed) {\n        normRng.collapse(true);\n      }\n      return isEq$4(rng, normRng) ? Optional.none() : Optional.some(normRng);\n    };\n\n    var splitText = function (node, offset) {\n      return node.splitText(offset);\n    };\n    var split = function (rng) {\n      var startContainer = rng.startContainer, startOffset = rng.startOffset, endContainer = rng.endContainer, endOffset = rng.endOffset;\n      if (startContainer === endContainer && isText$7(startContainer)) {\n        if (startOffset > 0 && startOffset < startContainer.nodeValue.length) {\n          endContainer = splitText(startContainer, startOffset);\n          startContainer = endContainer.previousSibling;\n          if (endOffset > startOffset) {\n            endOffset = endOffset - startOffset;\n            startContainer = endContainer = splitText(endContainer, endOffset).previousSibling;\n            endOffset = endContainer.nodeValue.length;\n            startOffset = 0;\n          } else {\n            endOffset = 0;\n          }\n        }\n      } else {\n        if (isText$7(startContainer) && startOffset > 0 && startOffset < startContainer.nodeValue.length) {\n          startContainer = splitText(startContainer, startOffset);\n          startOffset = 0;\n        }\n        if (isText$7(endContainer) && endOffset > 0 && endOffset < endContainer.nodeValue.length) {\n          endContainer = splitText(endContainer, endOffset).previousSibling;\n          endOffset = endContainer.nodeValue.length;\n        }\n      }\n      return {\n        startContainer: startContainer,\n        startOffset: startOffset,\n        endContainer: endContainer,\n        endOffset: endOffset\n      };\n    };\n\n    var RangeUtils = function (dom) {\n      var walk = function (rng, callback) {\n        return walk$2(dom, rng, callback);\n      };\n      var split$1 = split;\n      var normalize = function (rng) {\n        return normalize$2(dom, rng).fold(never, function (normalizedRng) {\n          rng.setStart(normalizedRng.startContainer, normalizedRng.startOffset);\n          rng.setEnd(normalizedRng.endContainer, normalizedRng.endOffset);\n          return true;\n        });\n      };\n      return {\n        walk: walk,\n        split: split$1,\n        normalize: normalize\n      };\n    };\n    RangeUtils.compareRanges = isEq$4;\n    RangeUtils.getCaretRangeFromPoint = fromPoint;\n    RangeUtils.getSelectedNode = getSelectedNode;\n    RangeUtils.getNode = getNode$1;\n\n    var Dimension = function (name, getOffset) {\n      var set = function (element, h) {\n        if (!isNumber(h) && !h.match(/^[0-9]+$/)) {\n          throw new Error(name + '.set accepts only positive integer values. Value was ' + h);\n        }\n        var dom = element.dom;\n        if (isSupported(dom)) {\n          dom.style[name] = h + 'px';\n        }\n      };\n      var get = function (element) {\n        var r = getOffset(element);\n        if (r <= 0 || r === null) {\n          var css = get$5(element, name);\n          return parseFloat(css) || 0;\n        }\n        return r;\n      };\n      var getOuter = get;\n      var aggregate = function (element, properties) {\n        return foldl(properties, function (acc, property) {\n          var val = get$5(element, property);\n          var value = val === undefined ? 0 : parseInt(val, 10);\n          return isNaN(value) ? acc : acc + value;\n        }, 0);\n      };\n      var max = function (element, value, properties) {\n        var cumulativeInclusions = aggregate(element, properties);\n        var absoluteMax = value > cumulativeInclusions ? value - cumulativeInclusions : 0;\n        return absoluteMax;\n      };\n      return {\n        set: set,\n        get: get,\n        getOuter: getOuter,\n        aggregate: aggregate,\n        max: max\n      };\n    };\n\n    var api = Dimension('height', function (element) {\n      var dom = element.dom;\n      return inBody(element) ? dom.getBoundingClientRect().height : dom.offsetHeight;\n    });\n    var get$1 = function (element) {\n      return api.get(element);\n    };\n\n    var walkUp = function (navigation, doc) {\n      var frame = navigation.view(doc);\n      return frame.fold(constant([]), function (f) {\n        var parent = navigation.owner(f);\n        var rest = walkUp(navigation, parent);\n        return [f].concat(rest);\n      });\n    };\n    var pathTo = function (element, navigation) {\n      var d = navigation.owner(element);\n      return walkUp(navigation, d);\n    };\n\n    var view = function (doc) {\n      var _a;\n      var element = doc.dom === document ? Optional.none() : Optional.from((_a = doc.dom.defaultView) === null || _a === void 0 ? void 0 : _a.frameElement);\n      return element.map(SugarElement.fromDom);\n    };\n    var owner = function (element) {\n      return documentOrOwner(element);\n    };\n\n    var Navigation = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        view: view,\n        owner: owner\n    });\n\n    var find$1 = function (element) {\n      var doc = SugarElement.fromDom(document);\n      var scroll = get$8(doc);\n      var frames = pathTo(element, Navigation);\n      var offset = viewport(element);\n      var r = foldr(frames, function (b, a) {\n        var loc = viewport(a);\n        return {\n          left: b.left + loc.left,\n          top: b.top + loc.top\n        };\n      }, {\n        left: 0,\n        top: 0\n      });\n      return SugarPosition(r.left + offset.left + scroll.left, r.top + offset.top + scroll.top);\n    };\n\n    var excludeFromDescend = function (element) {\n      return name(element) === 'textarea';\n    };\n    var fireScrollIntoViewEvent = function (editor, data) {\n      var scrollEvent = editor.fire('ScrollIntoView', data);\n      return scrollEvent.isDefaultPrevented();\n    };\n    var fireAfterScrollIntoViewEvent = function (editor, data) {\n      editor.fire('AfterScrollIntoView', data);\n    };\n    var descend = function (element, offset) {\n      var children$1 = children(element);\n      if (children$1.length === 0 || excludeFromDescend(element)) {\n        return {\n          element: element,\n          offset: offset\n        };\n      } else if (offset < children$1.length && !excludeFromDescend(children$1[offset])) {\n        return {\n          element: children$1[offset],\n          offset: 0\n        };\n      } else {\n        var last = children$1[children$1.length - 1];\n        if (excludeFromDescend(last)) {\n          return {\n            element: element,\n            offset: offset\n          };\n        } else {\n          if (name(last) === 'img') {\n            return {\n              element: last,\n              offset: 1\n            };\n          } else if (isText$8(last)) {\n            return {\n              element: last,\n              offset: get$2(last).length\n            };\n          } else {\n            return {\n              element: last,\n              offset: children(last).length\n            };\n          }\n        }\n      }\n    };\n    var markerInfo = function (element, cleanupFun) {\n      var pos = absolute(element);\n      var height = get$1(element);\n      return {\n        element: element,\n        bottom: pos.top + height,\n        height: height,\n        pos: pos,\n        cleanup: cleanupFun\n      };\n    };\n    var createMarker = function (element, offset) {\n      var startPoint = descend(element, offset);\n      var span = SugarElement.fromHtml('<span data-mce-bogus=\"all\" style=\"display: inline-block;\">' + ZWSP$1 + '</span>');\n      before$4(startPoint.element, span);\n      return markerInfo(span, function () {\n        return remove$7(span);\n      });\n    };\n    var elementMarker = function (element) {\n      return markerInfo(SugarElement.fromDom(element), noop);\n    };\n    var withMarker = function (editor, f, rng, alignToTop) {\n      preserveWith(editor, function (_s, _e) {\n        return applyWithMarker(editor, f, rng, alignToTop);\n      }, rng);\n    };\n    var withScrollEvents = function (editor, doc, f, marker, alignToTop) {\n      var data = {\n        elm: marker.element.dom,\n        alignToTop: alignToTop\n      };\n      if (fireScrollIntoViewEvent(editor, data)) {\n        return;\n      }\n      var scrollTop = get$8(doc).top;\n      f(doc, scrollTop, marker, alignToTop);\n      fireAfterScrollIntoViewEvent(editor, data);\n    };\n    var applyWithMarker = function (editor, f, rng, alignToTop) {\n      var body = SugarElement.fromDom(editor.getBody());\n      var doc = SugarElement.fromDom(editor.getDoc());\n      reflow(body);\n      var marker = createMarker(SugarElement.fromDom(rng.startContainer), rng.startOffset);\n      withScrollEvents(editor, doc, f, marker, alignToTop);\n      marker.cleanup();\n    };\n    var withElement = function (editor, element, f, alignToTop) {\n      var doc = SugarElement.fromDom(editor.getDoc());\n      withScrollEvents(editor, doc, f, elementMarker(element), alignToTop);\n    };\n    var preserveWith = function (editor, f, rng) {\n      var startElement = rng.startContainer;\n      var startOffset = rng.startOffset;\n      var endElement = rng.endContainer;\n      var endOffset = rng.endOffset;\n      f(SugarElement.fromDom(startElement), SugarElement.fromDom(endElement));\n      var newRng = editor.dom.createRng();\n      newRng.setStart(startElement, startOffset);\n      newRng.setEnd(endElement, endOffset);\n      editor.selection.setRng(rng);\n    };\n    var scrollToMarker = function (marker, viewHeight, alignToTop, doc) {\n      var pos = marker.pos;\n      if (alignToTop) {\n        to(pos.left, pos.top, doc);\n      } else {\n        var y = pos.top - viewHeight + marker.height;\n        to(pos.left, y, doc);\n      }\n    };\n    var intoWindowIfNeeded = function (doc, scrollTop, viewHeight, marker, alignToTop) {\n      var viewportBottom = viewHeight + scrollTop;\n      var markerTop = marker.pos.top;\n      var markerBottom = marker.bottom;\n      var largerThanViewport = markerBottom - markerTop >= viewHeight;\n      if (markerTop < scrollTop) {\n        scrollToMarker(marker, viewHeight, alignToTop !== false, doc);\n      } else if (markerTop > viewportBottom) {\n        var align = largerThanViewport ? alignToTop !== false : alignToTop === true;\n        scrollToMarker(marker, viewHeight, align, doc);\n      } else if (markerBottom > viewportBottom && !largerThanViewport) {\n        scrollToMarker(marker, viewHeight, alignToTop === true, doc);\n      }\n    };\n    var intoWindow = function (doc, scrollTop, marker, alignToTop) {\n      var viewHeight = doc.dom.defaultView.innerHeight;\n      intoWindowIfNeeded(doc, scrollTop, viewHeight, marker, alignToTop);\n    };\n    var intoFrame = function (doc, scrollTop, marker, alignToTop) {\n      var frameViewHeight = doc.dom.defaultView.innerHeight;\n      intoWindowIfNeeded(doc, scrollTop, frameViewHeight, marker, alignToTop);\n      var op = find$1(marker.element);\n      var viewportBounds = getBounds(window);\n      if (op.top < viewportBounds.y) {\n        intoView(marker.element, alignToTop !== false);\n      } else if (op.top > viewportBounds.bottom) {\n        intoView(marker.element, alignToTop === true);\n      }\n    };\n    var rangeIntoWindow = function (editor, rng, alignToTop) {\n      return withMarker(editor, intoWindow, rng, alignToTop);\n    };\n    var elementIntoWindow = function (editor, element, alignToTop) {\n      return withElement(editor, element, intoWindow, alignToTop);\n    };\n    var rangeIntoFrame = function (editor, rng, alignToTop) {\n      return withMarker(editor, intoFrame, rng, alignToTop);\n    };\n    var elementIntoFrame = function (editor, element, alignToTop) {\n      return withElement(editor, element, intoFrame, alignToTop);\n    };\n    var scrollElementIntoView = function (editor, element, alignToTop) {\n      var scroller = editor.inline ? elementIntoWindow : elementIntoFrame;\n      scroller(editor, element, alignToTop);\n    };\n    var scrollRangeIntoView = function (editor, rng, alignToTop) {\n      var scroller = editor.inline ? rangeIntoWindow : rangeIntoFrame;\n      scroller(editor, rng, alignToTop);\n    };\n\n    var getDocument = function () {\n      return SugarElement.fromDom(document);\n    };\n\n    var focus$1 = function (element) {\n      return element.dom.focus();\n    };\n    var hasFocus$1 = function (element) {\n      var root = getRootNode(element).dom;\n      return element.dom === root.activeElement;\n    };\n    var active = function (root) {\n      if (root === void 0) {\n        root = getDocument();\n      }\n      return Optional.from(root.dom.activeElement).map(SugarElement.fromDom);\n    };\n    var search = function (element) {\n      return active(getRootNode(element)).filter(function (e) {\n        return element.dom.contains(e.dom);\n      });\n    };\n\n    var create$5 = function (start, soffset, finish, foffset) {\n      return {\n        start: start,\n        soffset: soffset,\n        finish: finish,\n        foffset: foffset\n      };\n    };\n    var SimRange = { create: create$5 };\n\n    var adt$1 = Adt.generate([\n      { before: ['element'] },\n      {\n        on: [\n          'element',\n          'offset'\n        ]\n      },\n      { after: ['element'] }\n    ]);\n    var cata = function (subject, onBefore, onOn, onAfter) {\n      return subject.fold(onBefore, onOn, onAfter);\n    };\n    var getStart$2 = function (situ) {\n      return situ.fold(identity, identity, identity);\n    };\n    var before$1 = adt$1.before;\n    var on = adt$1.on;\n    var after$1 = adt$1.after;\n    var Situ = {\n      before: before$1,\n      on: on,\n      after: after$1,\n      cata: cata,\n      getStart: getStart$2\n    };\n\n    var adt = Adt.generate([\n      { domRange: ['rng'] },\n      {\n        relative: [\n          'startSitu',\n          'finishSitu'\n        ]\n      },\n      {\n        exact: [\n          'start',\n          'soffset',\n          'finish',\n          'foffset'\n        ]\n      }\n    ]);\n    var exactFromRange = function (simRange) {\n      return adt.exact(simRange.start, simRange.soffset, simRange.finish, simRange.foffset);\n    };\n    var getStart$1 = function (selection) {\n      return selection.match({\n        domRange: function (rng) {\n          return SugarElement.fromDom(rng.startContainer);\n        },\n        relative: function (startSitu, _finishSitu) {\n          return Situ.getStart(startSitu);\n        },\n        exact: function (start, _soffset, _finish, _foffset) {\n          return start;\n        }\n      });\n    };\n    var domRange = adt.domRange;\n    var relative = adt.relative;\n    var exact = adt.exact;\n    var getWin = function (selection) {\n      var start = getStart$1(selection);\n      return defaultView(start);\n    };\n    var range = SimRange.create;\n    var SimSelection = {\n      domRange: domRange,\n      relative: relative,\n      exact: exact,\n      exactFromRange: exactFromRange,\n      getWin: getWin,\n      range: range\n    };\n\n    var browser$1 = detect().browser;\n    var clamp$1 = function (offset, element) {\n      var max = isText$8(element) ? get$2(element).length : children(element).length + 1;\n      if (offset > max) {\n        return max;\n      } else if (offset < 0) {\n        return 0;\n      }\n      return offset;\n    };\n    var normalizeRng = function (rng) {\n      return SimSelection.range(rng.start, clamp$1(rng.soffset, rng.start), rng.finish, clamp$1(rng.foffset, rng.finish));\n    };\n    var isOrContains = function (root, elm) {\n      return !isRestrictedNode(elm.dom) && (contains$1(root, elm) || eq(root, elm));\n    };\n    var isRngInRoot = function (root) {\n      return function (rng) {\n        return isOrContains(root, rng.start) && isOrContains(root, rng.finish);\n      };\n    };\n    var shouldStore = function (editor) {\n      return editor.inline === true || browser$1.isIE();\n    };\n    var nativeRangeToSelectionRange = function (r) {\n      return SimSelection.range(SugarElement.fromDom(r.startContainer), r.startOffset, SugarElement.fromDom(r.endContainer), r.endOffset);\n    };\n    var readRange = function (win) {\n      var selection = win.getSelection();\n      var rng = !selection || selection.rangeCount === 0 ? Optional.none() : Optional.from(selection.getRangeAt(0));\n      return rng.map(nativeRangeToSelectionRange);\n    };\n    var getBookmark = function (root) {\n      var win = defaultView(root);\n      return readRange(win.dom).filter(isRngInRoot(root));\n    };\n    var validate = function (root, bookmark) {\n      return Optional.from(bookmark).filter(isRngInRoot(root)).map(normalizeRng);\n    };\n    var bookmarkToNativeRng = function (bookmark) {\n      var rng = document.createRange();\n      try {\n        rng.setStart(bookmark.start.dom, bookmark.soffset);\n        rng.setEnd(bookmark.finish.dom, bookmark.foffset);\n        return Optional.some(rng);\n      } catch (_) {\n        return Optional.none();\n      }\n    };\n    var store = function (editor) {\n      var newBookmark = shouldStore(editor) ? getBookmark(SugarElement.fromDom(editor.getBody())) : Optional.none();\n      editor.bookmark = newBookmark.isSome() ? newBookmark : editor.bookmark;\n    };\n    var storeNative = function (editor, rng) {\n      var root = SugarElement.fromDom(editor.getBody());\n      var range = shouldStore(editor) ? Optional.from(rng) : Optional.none();\n      var newBookmark = range.map(nativeRangeToSelectionRange).filter(isRngInRoot(root));\n      editor.bookmark = newBookmark.isSome() ? newBookmark : editor.bookmark;\n    };\n    var getRng = function (editor) {\n      var bookmark = editor.bookmark ? editor.bookmark : Optional.none();\n      return bookmark.bind(function (x) {\n        return validate(SugarElement.fromDom(editor.getBody()), x);\n      }).bind(bookmarkToNativeRng);\n    };\n    var restore = function (editor) {\n      getRng(editor).each(function (rng) {\n        return editor.selection.setRng(rng);\n      });\n    };\n\n    var isEditorUIElement$1 = function (elm) {\n      var className = elm.className.toString();\n      return className.indexOf('tox-') !== -1 || className.indexOf('mce-') !== -1;\n    };\n    var FocusManager = { isEditorUIElement: isEditorUIElement$1 };\n\n    var isManualNodeChange = function (e) {\n      return e.type === 'nodechange' && e.selectionChange;\n    };\n    var registerPageMouseUp = function (editor, throttledStore) {\n      var mouseUpPage = function () {\n        throttledStore.throttle();\n      };\n      DOMUtils.DOM.bind(document, 'mouseup', mouseUpPage);\n      editor.on('remove', function () {\n        DOMUtils.DOM.unbind(document, 'mouseup', mouseUpPage);\n      });\n    };\n    var registerFocusOut = function (editor) {\n      editor.on('focusout', function () {\n        store(editor);\n      });\n    };\n    var registerMouseUp = function (editor, throttledStore) {\n      editor.on('mouseup touchend', function (_e) {\n        throttledStore.throttle();\n      });\n    };\n    var registerEditorEvents = function (editor, throttledStore) {\n      var browser = detect().browser;\n      if (browser.isIE()) {\n        registerFocusOut(editor);\n      } else {\n        registerMouseUp(editor, throttledStore);\n      }\n      editor.on('keyup NodeChange', function (e) {\n        if (!isManualNodeChange(e)) {\n          store(editor);\n        }\n      });\n    };\n    var register$3 = function (editor) {\n      var throttledStore = first(function () {\n        store(editor);\n      }, 0);\n      editor.on('init', function () {\n        if (editor.inline) {\n          registerPageMouseUp(editor, throttledStore);\n        }\n        registerEditorEvents(editor, throttledStore);\n      });\n      editor.on('remove', function () {\n        throttledStore.cancel();\n      });\n    };\n\n    var documentFocusInHandler;\n    var DOM$8 = DOMUtils.DOM;\n    var isEditorUIElement = function (elm) {\n      return FocusManager.isEditorUIElement(elm);\n    };\n    var isEditorContentAreaElement = function (elm) {\n      var classList = elm.classList;\n      if (classList !== undefined) {\n        return classList.contains('tox-edit-area') || classList.contains('tox-edit-area__iframe') || classList.contains('mce-content-body');\n      } else {\n        return false;\n      }\n    };\n    var isUIElement = function (editor, elm) {\n      var customSelector = getCustomUiSelector(editor);\n      var parent = DOM$8.getParent(elm, function (elm) {\n        return isEditorUIElement(elm) || (customSelector ? editor.dom.is(elm, customSelector) : false);\n      });\n      return parent !== null;\n    };\n    var getActiveElement = function (editor) {\n      try {\n        var root = getRootNode(SugarElement.fromDom(editor.getElement()));\n        return active(root).fold(function () {\n          return document.body;\n        }, function (x) {\n          return x.dom;\n        });\n      } catch (ex) {\n        return document.body;\n      }\n    };\n    var registerEvents$1 = function (editorManager, e) {\n      var editor = e.editor;\n      register$3(editor);\n      editor.on('focusin', function () {\n        var focusedEditor = editorManager.focusedEditor;\n        if (focusedEditor !== editor) {\n          if (focusedEditor) {\n            focusedEditor.fire('blur', { focusedEditor: editor });\n          }\n          editorManager.setActive(editor);\n          editorManager.focusedEditor = editor;\n          editor.fire('focus', { blurredEditor: focusedEditor });\n          editor.focus(true);\n        }\n      });\n      editor.on('focusout', function () {\n        Delay.setEditorTimeout(editor, function () {\n          var focusedEditor = editorManager.focusedEditor;\n          if (!isUIElement(editor, getActiveElement(editor)) && focusedEditor === editor) {\n            editor.fire('blur', { focusedEditor: null });\n            editorManager.focusedEditor = null;\n          }\n        });\n      });\n      if (!documentFocusInHandler) {\n        documentFocusInHandler = function (e) {\n          var activeEditor = editorManager.activeEditor;\n          if (activeEditor) {\n            getOriginalEventTarget(e).each(function (target) {\n              if (target.ownerDocument === document) {\n                if (target !== document.body && !isUIElement(activeEditor, target) && editorManager.focusedEditor === activeEditor) {\n                  activeEditor.fire('blur', { focusedEditor: null });\n                  editorManager.focusedEditor = null;\n                }\n              }\n            });\n          }\n        };\n        DOM$8.bind(document, 'focusin', documentFocusInHandler);\n      }\n    };\n    var unregisterDocumentEvents = function (editorManager, e) {\n      if (editorManager.focusedEditor === e.editor) {\n        editorManager.focusedEditor = null;\n      }\n      if (!editorManager.activeEditor) {\n        DOM$8.unbind(document, 'focusin', documentFocusInHandler);\n        documentFocusInHandler = null;\n      }\n    };\n    var setup$l = function (editorManager) {\n      editorManager.on('AddEditor', curry(registerEvents$1, editorManager));\n      editorManager.on('RemoveEditor', curry(unregisterDocumentEvents, editorManager));\n    };\n\n    var getContentEditableHost = function (editor, node) {\n      return editor.dom.getParent(node, function (node) {\n        return editor.dom.getContentEditable(node) === 'true';\n      });\n    };\n    var getCollapsedNode = function (rng) {\n      return rng.collapsed ? Optional.from(getNode$1(rng.startContainer, rng.startOffset)).map(SugarElement.fromDom) : Optional.none();\n    };\n    var getFocusInElement = function (root, rng) {\n      return getCollapsedNode(rng).bind(function (node) {\n        if (isTableSection(node)) {\n          return Optional.some(node);\n        } else if (contains$1(root, node) === false) {\n          return Optional.some(root);\n        } else {\n          return Optional.none();\n        }\n      });\n    };\n    var normalizeSelection$1 = function (editor, rng) {\n      getFocusInElement(SugarElement.fromDom(editor.getBody()), rng).bind(function (elm) {\n        return firstPositionIn(elm.dom);\n      }).fold(function () {\n        editor.selection.normalize();\n        return;\n      }, function (caretPos) {\n        return editor.selection.setRng(caretPos.toRange());\n      });\n    };\n    var focusBody = function (body) {\n      if (body.setActive) {\n        try {\n          body.setActive();\n        } catch (ex) {\n          body.focus();\n        }\n      } else {\n        body.focus();\n      }\n    };\n    var hasElementFocus = function (elm) {\n      return hasFocus$1(elm) || search(elm).isSome();\n    };\n    var hasIframeFocus = function (editor) {\n      return editor.iframeElement && hasFocus$1(SugarElement.fromDom(editor.iframeElement));\n    };\n    var hasInlineFocus = function (editor) {\n      var rawBody = editor.getBody();\n      return rawBody && hasElementFocus(SugarElement.fromDom(rawBody));\n    };\n    var hasUiFocus = function (editor) {\n      var dos = getRootNode(SugarElement.fromDom(editor.getElement()));\n      return active(dos).filter(function (elem) {\n        return !isEditorContentAreaElement(elem.dom) && isUIElement(editor, elem.dom);\n      }).isSome();\n    };\n    var hasFocus = function (editor) {\n      return editor.inline ? hasInlineFocus(editor) : hasIframeFocus(editor);\n    };\n    var hasEditorOrUiFocus = function (editor) {\n      return hasFocus(editor) || hasUiFocus(editor);\n    };\n    var focusEditor = function (editor) {\n      var selection = editor.selection;\n      var body = editor.getBody();\n      var rng = selection.getRng();\n      editor.quirks.refreshContentEditable();\n      if (editor.bookmark !== undefined && hasFocus(editor) === false) {\n        getRng(editor).each(function (bookmarkRng) {\n          editor.selection.setRng(bookmarkRng);\n          rng = bookmarkRng;\n        });\n      }\n      var contentEditableHost = getContentEditableHost(editor, selection.getNode());\n      if (editor.$.contains(body, contentEditableHost)) {\n        focusBody(contentEditableHost);\n        normalizeSelection$1(editor, rng);\n        activateEditor(editor);\n        return;\n      }\n      if (!editor.inline) {\n        if (!Env.opera) {\n          focusBody(body);\n        }\n        editor.getWin().focus();\n      }\n      if (Env.gecko || editor.inline) {\n        focusBody(body);\n        normalizeSelection$1(editor, rng);\n      }\n      activateEditor(editor);\n    };\n    var activateEditor = function (editor) {\n      return editor.editorManager.setActive(editor);\n    };\n    var focus = function (editor, skipFocus) {\n      if (editor.removed) {\n        return;\n      }\n      if (skipFocus) {\n        activateEditor(editor);\n      } else {\n        focusEditor(editor);\n      }\n    };\n\n    var getEndpointElement = function (root, rng, start, real, resolve) {\n      var container = start ? rng.startContainer : rng.endContainer;\n      var offset = start ? rng.startOffset : rng.endOffset;\n      return Optional.from(container).map(SugarElement.fromDom).map(function (elm) {\n        return !real || !rng.collapsed ? child$1(elm, resolve(elm, offset)).getOr(elm) : elm;\n      }).bind(function (elm) {\n        return isElement$6(elm) ? Optional.some(elm) : parent(elm).filter(isElement$6);\n      }).map(function (elm) {\n        return elm.dom;\n      }).getOr(root);\n    };\n    var getStart = function (root, rng, real) {\n      return getEndpointElement(root, rng, true, real, function (elm, offset) {\n        return Math.min(childNodesCount(elm), offset);\n      });\n    };\n    var getEnd = function (root, rng, real) {\n      return getEndpointElement(root, rng, false, real, function (elm, offset) {\n        return offset > 0 ? offset - 1 : offset;\n      });\n    };\n    var skipEmptyTextNodes = function (node, forwards) {\n      var orig = node;\n      while (node && isText$7(node) && node.length === 0) {\n        node = forwards ? node.nextSibling : node.previousSibling;\n      }\n      return node || orig;\n    };\n    var getNode = function (root, rng) {\n      var elm, startContainer, endContainer;\n      if (!rng) {\n        return root;\n      }\n      startContainer = rng.startContainer;\n      endContainer = rng.endContainer;\n      var startOffset = rng.startOffset;\n      var endOffset = rng.endOffset;\n      elm = rng.commonAncestorContainer;\n      if (!rng.collapsed) {\n        if (startContainer === endContainer) {\n          if (endOffset - startOffset < 2) {\n            if (startContainer.hasChildNodes()) {\n              elm = startContainer.childNodes[startOffset];\n            }\n          }\n        }\n        if (startContainer.nodeType === 3 && endContainer.nodeType === 3) {\n          if (startContainer.length === startOffset) {\n            startContainer = skipEmptyTextNodes(startContainer.nextSibling, true);\n          } else {\n            startContainer = startContainer.parentNode;\n          }\n          if (endOffset === 0) {\n            endContainer = skipEmptyTextNodes(endContainer.previousSibling, false);\n          } else {\n            endContainer = endContainer.parentNode;\n          }\n          if (startContainer && startContainer === endContainer) {\n            return startContainer;\n          }\n        }\n      }\n      if (elm && elm.nodeType === 3) {\n        return elm.parentNode;\n      }\n      return elm;\n    };\n    var getSelectedBlocks = function (dom, rng, startElm, endElm) {\n      var node;\n      var selectedBlocks = [];\n      var root = dom.getRoot();\n      startElm = dom.getParent(startElm || getStart(root, rng, rng.collapsed), dom.isBlock);\n      endElm = dom.getParent(endElm || getEnd(root, rng, rng.collapsed), dom.isBlock);\n      if (startElm && startElm !== root) {\n        selectedBlocks.push(startElm);\n      }\n      if (startElm && endElm && startElm !== endElm) {\n        node = startElm;\n        var walker = new DomTreeWalker(startElm, root);\n        while ((node = walker.next()) && node !== endElm) {\n          if (dom.isBlock(node)) {\n            selectedBlocks.push(node);\n          }\n        }\n      }\n      if (endElm && startElm !== endElm && endElm !== root) {\n        selectedBlocks.push(endElm);\n      }\n      return selectedBlocks;\n    };\n    var select = function (dom, node, content) {\n      return Optional.from(node).map(function (node) {\n        var idx = dom.nodeIndex(node);\n        var rng = dom.createRng();\n        rng.setStart(node.parentNode, idx);\n        rng.setEnd(node.parentNode, idx + 1);\n        if (content) {\n          moveEndPoint(dom, rng, node, true);\n          moveEndPoint(dom, rng, node, false);\n        }\n        return rng;\n      });\n    };\n\n    var processRanges = function (editor, ranges) {\n      return map$3(ranges, function (range) {\n        var evt = editor.fire('GetSelectionRange', { range: range });\n        return evt.range !== range ? evt.range : range;\n      });\n    };\n\n    var typeLookup = {\n      '#text': 3,\n      '#comment': 8,\n      '#cdata': 4,\n      '#pi': 7,\n      '#doctype': 10,\n      '#document-fragment': 11\n    };\n    var walk$1 = function (node, root, prev) {\n      var startName = prev ? 'lastChild' : 'firstChild';\n      var siblingName = prev ? 'prev' : 'next';\n      if (node[startName]) {\n        return node[startName];\n      }\n      if (node !== root) {\n        var sibling = node[siblingName];\n        if (sibling) {\n          return sibling;\n        }\n        for (var parent_1 = node.parent; parent_1 && parent_1 !== root; parent_1 = parent_1.parent) {\n          sibling = parent_1[siblingName];\n          if (sibling) {\n            return sibling;\n          }\n        }\n      }\n    };\n    var isEmptyTextNode = function (node) {\n      if (!isWhitespaceText(node.value)) {\n        return false;\n      }\n      var parentNode = node.parent;\n      if (parentNode && (parentNode.name !== 'span' || parentNode.attr('style')) && /^[ ]+$/.test(node.value)) {\n        return false;\n      }\n      return true;\n    };\n    var isNonEmptyElement = function (node) {\n      var isNamedAnchor = node.name === 'a' && !node.attr('href') && node.attr('id');\n      return node.attr('name') || node.attr('id') && !node.firstChild || node.attr('data-mce-bookmark') || isNamedAnchor;\n    };\n    var AstNode = function () {\n      function AstNode(name, type) {\n        this.name = name;\n        this.type = type;\n        if (type === 1) {\n          this.attributes = [];\n          this.attributes.map = {};\n        }\n      }\n      AstNode.create = function (name, attrs) {\n        var node = new AstNode(name, typeLookup[name] || 1);\n        if (attrs) {\n          each$j(attrs, function (value, attrName) {\n            node.attr(attrName, value);\n          });\n        }\n        return node;\n      };\n      AstNode.prototype.replace = function (node) {\n        var self = this;\n        if (node.parent) {\n          node.remove();\n        }\n        self.insert(node, self);\n        self.remove();\n        return self;\n      };\n      AstNode.prototype.attr = function (name, value) {\n        var self = this;\n        var attrs;\n        if (typeof name !== 'string') {\n          if (name !== undefined && name !== null) {\n            each$j(name, function (value, key) {\n              self.attr(key, value);\n            });\n          }\n          return self;\n        }\n        if (attrs = self.attributes) {\n          if (value !== undefined) {\n            if (value === null) {\n              if (name in attrs.map) {\n                delete attrs.map[name];\n                var i = attrs.length;\n                while (i--) {\n                  if (attrs[i].name === name) {\n                    attrs.splice(i, 1);\n                    return self;\n                  }\n                }\n              }\n              return self;\n            }\n            if (name in attrs.map) {\n              var i = attrs.length;\n              while (i--) {\n                if (attrs[i].name === name) {\n                  attrs[i].value = value;\n                  break;\n                }\n              }\n            } else {\n              attrs.push({\n                name: name,\n                value: value\n              });\n            }\n            attrs.map[name] = value;\n            return self;\n          }\n          return attrs.map[name];\n        }\n      };\n      AstNode.prototype.clone = function () {\n        var self = this;\n        var clone = new AstNode(self.name, self.type);\n        var selfAttrs;\n        if (selfAttrs = self.attributes) {\n          var cloneAttrs = [];\n          cloneAttrs.map = {};\n          for (var i = 0, l = selfAttrs.length; i < l; i++) {\n            var selfAttr = selfAttrs[i];\n            if (selfAttr.name !== 'id') {\n              cloneAttrs[cloneAttrs.length] = {\n                name: selfAttr.name,\n                value: selfAttr.value\n              };\n              cloneAttrs.map[selfAttr.name] = selfAttr.value;\n            }\n          }\n          clone.attributes = cloneAttrs;\n        }\n        clone.value = self.value;\n        clone.shortEnded = self.shortEnded;\n        return clone;\n      };\n      AstNode.prototype.wrap = function (wrapper) {\n        var self = this;\n        self.parent.insert(wrapper, self);\n        wrapper.append(self);\n        return self;\n      };\n      AstNode.prototype.unwrap = function () {\n        var self = this;\n        for (var node = self.firstChild; node;) {\n          var next = node.next;\n          self.insert(node, self, true);\n          node = next;\n        }\n        self.remove();\n      };\n      AstNode.prototype.remove = function () {\n        var self = this, parent = self.parent, next = self.next, prev = self.prev;\n        if (parent) {\n          if (parent.firstChild === self) {\n            parent.firstChild = next;\n            if (next) {\n              next.prev = null;\n            }\n          } else {\n            prev.next = next;\n          }\n          if (parent.lastChild === self) {\n            parent.lastChild = prev;\n            if (prev) {\n              prev.next = null;\n            }\n          } else {\n            next.prev = prev;\n          }\n          self.parent = self.next = self.prev = null;\n        }\n        return self;\n      };\n      AstNode.prototype.append = function (node) {\n        var self = this;\n        if (node.parent) {\n          node.remove();\n        }\n        var last = self.lastChild;\n        if (last) {\n          last.next = node;\n          node.prev = last;\n          self.lastChild = node;\n        } else {\n          self.lastChild = self.firstChild = node;\n        }\n        node.parent = self;\n        return node;\n      };\n      AstNode.prototype.insert = function (node, refNode, before) {\n        if (node.parent) {\n          node.remove();\n        }\n        var parent = refNode.parent || this;\n        if (before) {\n          if (refNode === parent.firstChild) {\n            parent.firstChild = node;\n          } else {\n            refNode.prev.next = node;\n          }\n          node.prev = refNode.prev;\n          node.next = refNode;\n          refNode.prev = node;\n        } else {\n          if (refNode === parent.lastChild) {\n            parent.lastChild = node;\n          } else {\n            refNode.next.prev = node;\n          }\n          node.next = refNode.next;\n          node.prev = refNode;\n          refNode.next = node;\n        }\n        node.parent = parent;\n        return node;\n      };\n      AstNode.prototype.getAll = function (name) {\n        var self = this;\n        var collection = [];\n        for (var node = self.firstChild; node; node = walk$1(node, self)) {\n          if (node.name === name) {\n            collection.push(node);\n          }\n        }\n        return collection;\n      };\n      AstNode.prototype.children = function () {\n        var self = this;\n        var collection = [];\n        for (var node = self.firstChild; node; node = node.next) {\n          collection.push(node);\n        }\n        return collection;\n      };\n      AstNode.prototype.empty = function () {\n        var self = this;\n        if (self.firstChild) {\n          var nodes = [];\n          for (var node = self.firstChild; node; node = walk$1(node, self)) {\n            nodes.push(node);\n          }\n          var i = nodes.length;\n          while (i--) {\n            var node = nodes[i];\n            node.parent = node.firstChild = node.lastChild = node.next = node.prev = null;\n          }\n        }\n        self.firstChild = self.lastChild = null;\n        return self;\n      };\n      AstNode.prototype.isEmpty = function (elements, whitespace, predicate) {\n        if (whitespace === void 0) {\n          whitespace = {};\n        }\n        var self = this;\n        var node = self.firstChild;\n        if (isNonEmptyElement(self)) {\n          return false;\n        }\n        if (node) {\n          do {\n            if (node.type === 1) {\n              if (node.attr('data-mce-bogus')) {\n                continue;\n              }\n              if (elements[node.name]) {\n                return false;\n              }\n              if (isNonEmptyElement(node)) {\n                return false;\n              }\n            }\n            if (node.type === 8) {\n              return false;\n            }\n            if (node.type === 3 && !isEmptyTextNode(node)) {\n              return false;\n            }\n            if (node.type === 3 && node.parent && whitespace[node.parent.name] && isWhitespaceText(node.value)) {\n              return false;\n            }\n            if (predicate && predicate(node)) {\n              return false;\n            }\n          } while (node = walk$1(node, self));\n        }\n        return true;\n      };\n      AstNode.prototype.walk = function (prev) {\n        return walk$1(this, null, prev);\n      };\n      return AstNode;\n    }();\n\n    var extractBase64DataUris = function (html) {\n      var dataImageUri = /data:[^;<\"'\\s]+;base64,([a-z0-9\\+\\/=\\s]+)/gi;\n      var chunks = [];\n      var uris = {};\n      var prefix = generate('img');\n      var matches;\n      var index = 0;\n      var count = 0;\n      while (matches = dataImageUri.exec(html)) {\n        var uri = matches[0];\n        var imageId = prefix + '_' + count++;\n        uris[imageId] = uri;\n        if (index < matches.index) {\n          chunks.push(html.substr(index, matches.index - index));\n        }\n        chunks.push(imageId);\n        index = matches.index + uri.length;\n      }\n      var re = new RegExp(prefix + '_[0-9]+', 'g');\n      if (index === 0) {\n        return {\n          prefix: prefix,\n          uris: uris,\n          html: html,\n          re: re\n        };\n      } else {\n        if (index < html.length) {\n          chunks.push(html.substr(index));\n        }\n        return {\n          prefix: prefix,\n          uris: uris,\n          html: chunks.join(''),\n          re: re\n        };\n      }\n    };\n    var restoreDataUris = function (html, result) {\n      return html.replace(result.re, function (imageId) {\n        return get$9(result.uris, imageId).getOr(imageId);\n      });\n    };\n    var parseDataUri$1 = function (uri) {\n      var matches = /data:([^;]+);base64,([a-z0-9\\+\\/=\\s]+)/i.exec(uri);\n      if (matches) {\n        return Optional.some({\n          type: matches[1],\n          data: decodeURIComponent(matches[2])\n        });\n      } else {\n        return Optional.none();\n      }\n    };\n\n    var each$d = Tools.each, trim = Tools.trim;\n    var queryParts = 'source protocol authority userInfo user password host port relative path directory file query anchor'.split(' ');\n    var DEFAULT_PORTS = {\n      ftp: 21,\n      http: 80,\n      https: 443,\n      mailto: 25\n    };\n    var safeSvgDataUrlElements = [\n      'img',\n      'video'\n    ];\n    var blockSvgDataUris = function (allowSvgDataUrls, tagName) {\n      if (isNonNullable(allowSvgDataUrls)) {\n        return !allowSvgDataUrls;\n      } else {\n        return isNonNullable(tagName) ? !contains$3(safeSvgDataUrlElements, tagName) : true;\n      }\n    };\n    var isInvalidUri = function (settings, uri, tagName) {\n      if (settings.allow_html_data_urls) {\n        return false;\n      } else if (/^data:image\\//i.test(uri)) {\n        return blockSvgDataUris(settings.allow_svg_data_urls, tagName) && /^data:image\\/svg\\+xml/i.test(uri);\n      } else {\n        return /^data:/i.test(uri);\n      }\n    };\n    var URI = function () {\n      function URI(url, settings) {\n        url = trim(url);\n        this.settings = settings || {};\n        var baseUri = this.settings.base_uri;\n        var self = this;\n        if (/^([\\w\\-]+):([^\\/]{2})/i.test(url) || /^\\s*#/.test(url)) {\n          self.source = url;\n          return;\n        }\n        var isProtocolRelative = url.indexOf('//') === 0;\n        if (url.indexOf('/') === 0 && !isProtocolRelative) {\n          url = (baseUri ? baseUri.protocol || 'http' : 'http') + '://mce_host' + url;\n        }\n        if (!/^[\\w\\-]*:?\\/\\//.test(url)) {\n          var baseUrl = this.settings.base_uri ? this.settings.base_uri.path : new URI(document.location.href).directory;\n          if (this.settings.base_uri && this.settings.base_uri.protocol == '') {\n            url = '//mce_host' + self.toAbsPath(baseUrl, url);\n          } else {\n            var match = /([^#?]*)([#?]?.*)/.exec(url);\n            url = (baseUri && baseUri.protocol || 'http') + '://mce_host' + self.toAbsPath(baseUrl, match[1]) + match[2];\n          }\n        }\n        url = url.replace(/@@/g, '(mce_at)');\n        var urlMatch = /^(?:(?![^:@]+:[^:@\\/]*@)([^:\\/?#.]+):)?(?:\\/\\/)?((?:(([^:@\\/]*):?([^:@\\/]*))?@)?(\\[[a-zA-Z0-9:.%]+\\]|[^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/.exec(url);\n        each$d(queryParts, function (v, i) {\n          var part = urlMatch[i];\n          if (part) {\n            part = part.replace(/\\(mce_at\\)/g, '@@');\n          }\n          self[v] = part;\n        });\n        if (baseUri) {\n          if (!self.protocol) {\n            self.protocol = baseUri.protocol;\n          }\n          if (!self.userInfo) {\n            self.userInfo = baseUri.userInfo;\n          }\n          if (!self.port && self.host === 'mce_host') {\n            self.port = baseUri.port;\n          }\n          if (!self.host || self.host === 'mce_host') {\n            self.host = baseUri.host;\n          }\n          self.source = '';\n        }\n        if (isProtocolRelative) {\n          self.protocol = '';\n        }\n      }\n      URI.parseDataUri = function (uri) {\n        var type;\n        var uriComponents = decodeURIComponent(uri).split(',');\n        var matches = /data:([^;]+)/.exec(uriComponents[0]);\n        if (matches) {\n          type = matches[1];\n        }\n        return {\n          type: type,\n          data: uriComponents[1]\n        };\n      };\n      URI.isDomSafe = function (uri, context, options) {\n        if (options === void 0) {\n          options = {};\n        }\n        if (options.allow_script_urls) {\n          return true;\n        } else {\n          var decodedUri = Entities.decode(uri).replace(/[\\s\\u0000-\\u001F]+/g, '');\n          try {\n            decodedUri = decodeURIComponent(decodedUri);\n          } catch (ex) {\n            decodedUri = unescape(decodedUri);\n          }\n          if (/((java|vb)script|mhtml):/i.test(decodedUri)) {\n            return false;\n          }\n          return !isInvalidUri(options, decodedUri, context);\n        }\n      };\n      URI.getDocumentBaseUrl = function (loc) {\n        var baseUrl;\n        if (loc.protocol.indexOf('http') !== 0 && loc.protocol !== 'file:') {\n          baseUrl = loc.href;\n        } else {\n          baseUrl = loc.protocol + '//' + loc.host + loc.pathname;\n        }\n        if (/^[^:]+:\\/\\/\\/?[^\\/]+\\//.test(baseUrl)) {\n          baseUrl = baseUrl.replace(/[\\?#].*$/, '').replace(/[\\/\\\\][^\\/]+$/, '');\n          if (!/[\\/\\\\]$/.test(baseUrl)) {\n            baseUrl += '/';\n          }\n        }\n        return baseUrl;\n      };\n      URI.prototype.setPath = function (path) {\n        var pathMatch = /^(.*?)\\/?(\\w+)?$/.exec(path);\n        this.path = pathMatch[0];\n        this.directory = pathMatch[1];\n        this.file = pathMatch[2];\n        this.source = '';\n        this.getURI();\n      };\n      URI.prototype.toRelative = function (uri) {\n        var output;\n        if (uri === './') {\n          return uri;\n        }\n        var relativeUri = new URI(uri, { base_uri: this });\n        if (relativeUri.host !== 'mce_host' && this.host !== relativeUri.host && relativeUri.host || this.port !== relativeUri.port || this.protocol !== relativeUri.protocol && relativeUri.protocol !== '') {\n          return relativeUri.getURI();\n        }\n        var tu = this.getURI(), uu = relativeUri.getURI();\n        if (tu === uu || tu.charAt(tu.length - 1) === '/' && tu.substr(0, tu.length - 1) === uu) {\n          return tu;\n        }\n        output = this.toRelPath(this.path, relativeUri.path);\n        if (relativeUri.query) {\n          output += '?' + relativeUri.query;\n        }\n        if (relativeUri.anchor) {\n          output += '#' + relativeUri.anchor;\n        }\n        return output;\n      };\n      URI.prototype.toAbsolute = function (uri, noHost) {\n        var absoluteUri = new URI(uri, { base_uri: this });\n        return absoluteUri.getURI(noHost && this.isSameOrigin(absoluteUri));\n      };\n      URI.prototype.isSameOrigin = function (uri) {\n        if (this.host == uri.host && this.protocol == uri.protocol) {\n          if (this.port == uri.port) {\n            return true;\n          }\n          var defaultPort = DEFAULT_PORTS[this.protocol];\n          if (defaultPort && (this.port || defaultPort) == (uri.port || defaultPort)) {\n            return true;\n          }\n        }\n        return false;\n      };\n      URI.prototype.toRelPath = function (base, path) {\n        var breakPoint = 0, out = '', i, l;\n        var normalizedBase = base.substring(0, base.lastIndexOf('/')).split('/');\n        var items = path.split('/');\n        if (normalizedBase.length >= items.length) {\n          for (i = 0, l = normalizedBase.length; i < l; i++) {\n            if (i >= items.length || normalizedBase[i] !== items[i]) {\n              breakPoint = i + 1;\n              break;\n            }\n          }\n        }\n        if (normalizedBase.length < items.length) {\n          for (i = 0, l = items.length; i < l; i++) {\n            if (i >= normalizedBase.length || normalizedBase[i] !== items[i]) {\n              breakPoint = i + 1;\n              break;\n            }\n          }\n        }\n        if (breakPoint === 1) {\n          return path;\n        }\n        for (i = 0, l = normalizedBase.length - (breakPoint - 1); i < l; i++) {\n          out += '../';\n        }\n        for (i = breakPoint - 1, l = items.length; i < l; i++) {\n          if (i !== breakPoint - 1) {\n            out += '/' + items[i];\n          } else {\n            out += items[i];\n          }\n        }\n        return out;\n      };\n      URI.prototype.toAbsPath = function (base, path) {\n        var i, nb = 0, o = [], outPath;\n        var tr = /\\/$/.test(path) ? '/' : '';\n        var normalizedBase = base.split('/');\n        var normalizedPath = path.split('/');\n        each$d(normalizedBase, function (k) {\n          if (k) {\n            o.push(k);\n          }\n        });\n        normalizedBase = o;\n        for (i = normalizedPath.length - 1, o = []; i >= 0; i--) {\n          if (normalizedPath[i].length === 0 || normalizedPath[i] === '.') {\n            continue;\n          }\n          if (normalizedPath[i] === '..') {\n            nb++;\n            continue;\n          }\n          if (nb > 0) {\n            nb--;\n            continue;\n          }\n          o.push(normalizedPath[i]);\n        }\n        i = normalizedBase.length - nb;\n        if (i <= 0) {\n          outPath = reverse(o).join('/');\n        } else {\n          outPath = normalizedBase.slice(0, i).join('/') + '/' + reverse(o).join('/');\n        }\n        if (outPath.indexOf('/') !== 0) {\n          outPath = '/' + outPath;\n        }\n        if (tr && outPath.lastIndexOf('/') !== outPath.length - 1) {\n          outPath += tr;\n        }\n        return outPath;\n      };\n      URI.prototype.getURI = function (noProtoHost) {\n        if (noProtoHost === void 0) {\n          noProtoHost = false;\n        }\n        var s;\n        if (!this.source || noProtoHost) {\n          s = '';\n          if (!noProtoHost) {\n            if (this.protocol) {\n              s += this.protocol + '://';\n            } else {\n              s += '//';\n            }\n            if (this.userInfo) {\n              s += this.userInfo + '@';\n            }\n            if (this.host) {\n              s += this.host;\n            }\n            if (this.port) {\n              s += ':' + this.port;\n            }\n          }\n          if (this.path) {\n            s += this.path;\n          }\n          if (this.query) {\n            s += '?' + this.query;\n          }\n          if (this.anchor) {\n            s += '#' + this.anchor;\n          }\n          this.source = s;\n        }\n        return this.source;\n      };\n      return URI;\n    }();\n\n    var filteredClobberElements = Tools.makeMap('button,fieldset,form,iframe,img,image,input,object,output,select,textarea');\n    var isValidPrefixAttrName = function (name) {\n      return name.indexOf('data-') === 0 || name.indexOf('aria-') === 0;\n    };\n    var lazyTempDocument$1 = cached(function () {\n      return document.implementation.createHTMLDocument('parser');\n    });\n    var findMatchingEndTagIndex = function (schema, html, startIndex) {\n      var startTagRegExp = /<([!?\\/])?([A-Za-z0-9\\-_:.]+)/g;\n      var endTagRegExp = /(?:\\s(?:[^'\">]+(?:\"[^\"]*\"|'[^']*'))*[^\"'>]*(?:\"[^\">]*|'[^'>]*)?|\\s*|\\/)>/g;\n      var shortEndedElements = schema.getShortEndedElements();\n      var count = 1, index = startIndex;\n      while (count !== 0) {\n        startTagRegExp.lastIndex = index;\n        while (true) {\n          var startMatch = startTagRegExp.exec(html);\n          if (startMatch === null) {\n            return index;\n          } else if (startMatch[1] === '!') {\n            if (startsWith(startMatch[2], '--')) {\n              index = findCommentEndIndex(html, false, startMatch.index + '!--'.length);\n            } else {\n              index = findCommentEndIndex(html, true, startMatch.index + 1);\n            }\n            break;\n          } else {\n            endTagRegExp.lastIndex = startTagRegExp.lastIndex;\n            var endMatch = endTagRegExp.exec(html);\n            if (isNull(endMatch) || endMatch.index !== startTagRegExp.lastIndex) {\n              continue;\n            }\n            if (startMatch[1] === '/') {\n              count -= 1;\n            } else if (!has$2(shortEndedElements, startMatch[2])) {\n              count += 1;\n            }\n            index = startTagRegExp.lastIndex + endMatch[0].length;\n            break;\n          }\n        }\n      }\n      return index;\n    };\n    var isConditionalComment = function (html, startIndex) {\n      return /^\\s*\\[if [\\w\\W]+\\]>.*<!\\[endif\\](--!?)?>/.test(html.substr(startIndex));\n    };\n    var findCommentEndIndex = function (html, isBogus, startIndex) {\n      if (startIndex === void 0) {\n        startIndex = 0;\n      }\n      var lcHtml = html.toLowerCase();\n      if (lcHtml.indexOf('[if ', startIndex) !== -1 && isConditionalComment(lcHtml, startIndex)) {\n        var endIfIndex = lcHtml.indexOf('[endif]', startIndex);\n        return lcHtml.indexOf('>', endIfIndex);\n      } else {\n        if (isBogus) {\n          var endIndex = lcHtml.indexOf('>', startIndex);\n          return endIndex !== -1 ? endIndex : lcHtml.length;\n        } else {\n          var endCommentRegexp = /--!?>/g;\n          endCommentRegexp.lastIndex = startIndex;\n          var match = endCommentRegexp.exec(html);\n          return match ? match.index + match[0].length : lcHtml.length;\n        }\n      }\n    };\n    var checkBogusAttribute = function (regExp, attrString) {\n      var matches = regExp.exec(attrString);\n      if (matches) {\n        var name_1 = matches[1];\n        var value = matches[2];\n        return typeof name_1 === 'string' && name_1.toLowerCase() === 'data-mce-bogus' ? value : null;\n      } else {\n        return null;\n      }\n    };\n    var SaxParser = function (settings, schema) {\n      if (schema === void 0) {\n        schema = Schema();\n      }\n      settings = settings || {};\n      var doc = lazyTempDocument$1();\n      var form = doc.createElement('form');\n      if (settings.fix_self_closing !== false) {\n        settings.fix_self_closing = true;\n      }\n      var comment = settings.comment ? settings.comment : noop;\n      var cdata = settings.cdata ? settings.cdata : noop;\n      var text = settings.text ? settings.text : noop;\n      var start = settings.start ? settings.start : noop;\n      var end = settings.end ? settings.end : noop;\n      var pi = settings.pi ? settings.pi : noop;\n      var doctype = settings.doctype ? settings.doctype : noop;\n      var parseInternal = function (base64Extract, format) {\n        if (format === void 0) {\n          format = 'html';\n        }\n        var html = base64Extract.html;\n        var matches, index = 0, value, endRegExp;\n        var stack = [];\n        var attrList, i, textData, name;\n        var isInternalElement, isShortEnded;\n        var elementRule, isValidElement, attr, attribsValue, validAttributesMap, validAttributePatterns;\n        var attributesRequired, attributesDefault, attributesForced;\n        var anyAttributesRequired, attrValue, idCount = 0;\n        var decode = Entities.decode;\n        var filteredUrlAttrs = Tools.makeMap('src,href,data,background,action,formaction,poster,xlink:href');\n        var parsingMode = format === 'html' ? 0 : 1;\n        var processEndTag = function (name) {\n          var pos, i;\n          pos = stack.length;\n          while (pos--) {\n            if (stack[pos].name === name) {\n              break;\n            }\n          }\n          if (pos >= 0) {\n            for (i = stack.length - 1; i >= pos; i--) {\n              name = stack[i];\n              if (name.valid) {\n                end(name.name);\n              }\n            }\n            stack.length = pos;\n          }\n        };\n        var processText = function (value, raw) {\n          return text(restoreDataUris(value, base64Extract), raw);\n        };\n        var processComment = function (value) {\n          if (value === '') {\n            return;\n          }\n          if (value.charAt(0) === '>') {\n            value = ' ' + value;\n          }\n          if (!settings.allow_conditional_comments && value.substr(0, 3).toLowerCase() === '[if') {\n            value = ' ' + value;\n          }\n          comment(restoreDataUris(value, base64Extract));\n        };\n        var processAttr = function (value) {\n          return restoreDataUris(value, base64Extract);\n        };\n        var processMalformedComment = function (value, startIndex) {\n          var startTag = value || '';\n          var isBogus = !startsWith(startTag, '--');\n          var endIndex = findCommentEndIndex(html, isBogus, startIndex);\n          value = html.substr(startIndex, endIndex - startIndex);\n          processComment(isBogus ? startTag + value : value);\n          return endIndex + 1;\n        };\n        var parseAttribute = function (tagName, name, value, val2, val3) {\n          name = name.toLowerCase();\n          value = processAttr(name in fillAttrsMap ? name : decode(value || val2 || val3 || ''));\n          if (validate && !isInternalElement && isValidPrefixAttrName(name) === false) {\n            var attrRule = validAttributesMap[name];\n            if (!attrRule && validAttributePatterns) {\n              var i_1 = validAttributePatterns.length;\n              while (i_1--) {\n                attrRule = validAttributePatterns[i_1];\n                if (attrRule.pattern.test(name)) {\n                  break;\n                }\n              }\n              if (i_1 === -1) {\n                attrRule = null;\n              }\n            }\n            if (!attrRule) {\n              return;\n            }\n            if (attrRule.validValues && !(value in attrRule.validValues)) {\n              return;\n            }\n          }\n          var isNameOrId = name === 'name' || name === 'id';\n          if (isNameOrId && tagName in filteredClobberElements && (value in doc || value in form)) {\n            return;\n          }\n          if (filteredUrlAttrs[name] && !URI.isDomSafe(value, tagName, settings)) {\n            return;\n          }\n          if (isInternalElement && (name in filteredUrlAttrs || name.indexOf('on') === 0)) {\n            return;\n          }\n          attrList.map[name] = value;\n          attrList.push({\n            name: name,\n            value: value\n          });\n        };\n        var tokenRegExp = new RegExp('<(?:' + '(?:!--([\\\\w\\\\W]*?)--!?>)|' + '(?:!\\\\[CDATA\\\\[([\\\\w\\\\W]*?)\\\\]\\\\]>)|' + '(?:![Dd][Oo][Cc][Tt][Yy][Pp][Ee]([\\\\w\\\\W]*?)>)|' + '(?:!(--)?)|' + '(?:\\\\?([^\\\\s\\\\/<>]+) ?([\\\\w\\\\W]*?)[?/]>)|' + '(?:\\\\/([A-Za-z][A-Za-z0-9\\\\-_\\\\:\\\\.]*)>)|' + '(?:([A-Za-z][A-Za-z0-9\\\\-_:.]*)(\\\\s(?:[^\\'\">]+(?:\"[^\"]*\"|\\'[^\\']*\\'))*[^\"\\'>]*(?:\"[^\">]*|\\'[^\\'>]*)?|\\\\s*|\\\\/)>)' + ')', 'g');\n        var attrRegExp = /([\\w:\\-]+)(?:\\s*=\\s*(?:(?:\\\"((?:[^\\\"])*)\\\")|(?:\\'((?:[^\\'])*)\\')|([^>\\s]+)))?/g;\n        var shortEndedElements = schema.getShortEndedElements();\n        var selfClosing = settings.self_closing_elements || schema.getSelfClosingElements();\n        var fillAttrsMap = schema.getBoolAttrs();\n        var validate = settings.validate;\n        var removeInternalElements = settings.remove_internals;\n        var fixSelfClosing = settings.fix_self_closing;\n        var specialElements = schema.getSpecialElements();\n        var processHtml = html + '>';\n        while (matches = tokenRegExp.exec(processHtml)) {\n          var matchText = matches[0];\n          if (index < matches.index) {\n            processText(decode(html.substr(index, matches.index - index)));\n          }\n          if (value = matches[7]) {\n            value = value.toLowerCase();\n            if (value.charAt(0) === ':') {\n              value = value.substr(1);\n            }\n            processEndTag(value);\n          } else if (value = matches[8]) {\n            if (matches.index + matchText.length > html.length) {\n              processText(decode(html.substr(matches.index)));\n              index = matches.index + matchText.length;\n              continue;\n            }\n            value = value.toLowerCase();\n            if (value.charAt(0) === ':') {\n              value = value.substr(1);\n            }\n            isShortEnded = value in shortEndedElements;\n            if (fixSelfClosing && selfClosing[value] && stack.length > 0 && stack[stack.length - 1].name === value) {\n              processEndTag(value);\n            }\n            var bogusValue = checkBogusAttribute(attrRegExp, matches[9]);\n            if (bogusValue !== null) {\n              if (bogusValue === 'all') {\n                index = findMatchingEndTagIndex(schema, html, tokenRegExp.lastIndex);\n                tokenRegExp.lastIndex = index;\n                continue;\n              }\n              isValidElement = false;\n            }\n            if (!validate || (elementRule = schema.getElementRule(value))) {\n              isValidElement = true;\n              if (validate) {\n                validAttributesMap = elementRule.attributes;\n                validAttributePatterns = elementRule.attributePatterns;\n              }\n              if (attribsValue = matches[9]) {\n                isInternalElement = attribsValue.indexOf('data-mce-type') !== -1;\n                if (isInternalElement && removeInternalElements) {\n                  isValidElement = false;\n                }\n                attrList = [];\n                attrList.map = {};\n                attribsValue.replace(attrRegExp, function (match, name, val, val2, val3) {\n                  parseAttribute(value, name, val, val2, val3);\n                  return '';\n                });\n              } else {\n                attrList = [];\n                attrList.map = {};\n              }\n              if (validate && !isInternalElement) {\n                attributesRequired = elementRule.attributesRequired;\n                attributesDefault = elementRule.attributesDefault;\n                attributesForced = elementRule.attributesForced;\n                anyAttributesRequired = elementRule.removeEmptyAttrs;\n                if (anyAttributesRequired && !attrList.length) {\n                  isValidElement = false;\n                }\n                if (attributesForced) {\n                  i = attributesForced.length;\n                  while (i--) {\n                    attr = attributesForced[i];\n                    name = attr.name;\n                    attrValue = attr.value;\n                    if (attrValue === '{$uid}') {\n                      attrValue = 'mce_' + idCount++;\n                    }\n                    attrList.map[name] = attrValue;\n                    attrList.push({\n                      name: name,\n                      value: attrValue\n                    });\n                  }\n                }\n                if (attributesDefault) {\n                  i = attributesDefault.length;\n                  while (i--) {\n                    attr = attributesDefault[i];\n                    name = attr.name;\n                    if (!(name in attrList.map)) {\n                      attrValue = attr.value;\n                      if (attrValue === '{$uid}') {\n                        attrValue = 'mce_' + idCount++;\n                      }\n                      attrList.map[name] = attrValue;\n                      attrList.push({\n                        name: name,\n                        value: attrValue\n                      });\n                    }\n                  }\n                }\n                if (attributesRequired) {\n                  i = attributesRequired.length;\n                  while (i--) {\n                    if (attributesRequired[i] in attrList.map) {\n                      break;\n                    }\n                  }\n                  if (i === -1) {\n                    isValidElement = false;\n                  }\n                }\n                if (attr = attrList.map['data-mce-bogus']) {\n                  if (attr === 'all') {\n                    index = findMatchingEndTagIndex(schema, html, tokenRegExp.lastIndex);\n                    tokenRegExp.lastIndex = index;\n                    continue;\n                  }\n                  isValidElement = false;\n                }\n              }\n              if (isValidElement) {\n                start(value, attrList, isShortEnded);\n              }\n            } else {\n              isValidElement = false;\n            }\n            if (endRegExp = specialElements[value]) {\n              endRegExp.lastIndex = index = matches.index + matchText.length;\n              if (matches = endRegExp.exec(html)) {\n                if (isValidElement) {\n                  textData = html.substr(index, matches.index - index);\n                }\n                index = matches.index + matches[0].length;\n              } else {\n                textData = html.substr(index);\n                index = html.length;\n              }\n              if (isValidElement) {\n                if (textData.length > 0) {\n                  processText(textData, true);\n                }\n                end(value);\n              }\n              tokenRegExp.lastIndex = index;\n              continue;\n            }\n            if (!isShortEnded) {\n              if (!attribsValue || attribsValue.indexOf('/') !== attribsValue.length - 1) {\n                stack.push({\n                  name: value,\n                  valid: isValidElement\n                });\n              } else if (isValidElement) {\n                end(value);\n              }\n            }\n          } else if (value = matches[1]) {\n            processComment(value);\n          } else if (value = matches[2]) {\n            var isValidCdataSection = parsingMode === 1 || settings.preserve_cdata || stack.length > 0 && schema.isValidChild(stack[stack.length - 1].name, '#cdata');\n            if (isValidCdataSection) {\n              cdata(value);\n            } else {\n              index = processMalformedComment('', matches.index + 2);\n              tokenRegExp.lastIndex = index;\n              continue;\n            }\n          } else if (value = matches[3]) {\n            doctype(value);\n          } else if ((value = matches[4]) || matchText === '<!') {\n            index = processMalformedComment(value, matches.index + matchText.length);\n            tokenRegExp.lastIndex = index;\n            continue;\n          } else if (value = matches[5]) {\n            if (parsingMode === 1) {\n              pi(value, matches[6]);\n            } else {\n              index = processMalformedComment('?', matches.index + 2);\n              tokenRegExp.lastIndex = index;\n              continue;\n            }\n          }\n          index = matches.index + matchText.length;\n        }\n        if (index < html.length) {\n          processText(decode(html.substr(index)));\n        }\n        for (i = stack.length - 1; i >= 0; i--) {\n          value = stack[i];\n          if (value.valid) {\n            end(value.name);\n          }\n        }\n      };\n      var parse = function (html, format) {\n        if (format === void 0) {\n          format = 'html';\n        }\n        parseInternal(extractBase64DataUris(html), format);\n      };\n      return { parse: parse };\n    };\n    SaxParser.findEndTag = findMatchingEndTagIndex;\n\n    var trimHtml = function (tempAttrs, html) {\n      var trimContentRegExp = new RegExp(['\\\\s?(' + tempAttrs.join('|') + ')=\"[^\"]+\"'].join('|'), 'gi');\n      return html.replace(trimContentRegExp, '');\n    };\n    var trimInternal = function (serializer, html) {\n      var bogusAllRegExp = /<(\\w+) [^>]*data-mce-bogus=\"all\"[^>]*>/g;\n      var schema = serializer.schema;\n      var content = trimHtml(serializer.getTempAttrs(), html);\n      var shortEndedElements = schema.getShortEndedElements();\n      var matches;\n      while (matches = bogusAllRegExp.exec(content)) {\n        var index = bogusAllRegExp.lastIndex;\n        var matchLength = matches[0].length;\n        var endTagIndex = void 0;\n        if (shortEndedElements[matches[1]]) {\n          endTagIndex = index;\n        } else {\n          endTagIndex = SaxParser.findEndTag(schema, content, index);\n        }\n        content = content.substring(0, index - matchLength) + content.substring(endTagIndex);\n        bogusAllRegExp.lastIndex = index - matchLength;\n      }\n      return trim$2(content);\n    };\n    var trimExternal = trimInternal;\n\n    var trimEmptyContents = function (editor, html) {\n      var blockName = getForcedRootBlock(editor);\n      var emptyRegExp = new RegExp('^(<' + blockName + '[^>]*>(&nbsp;|&#160;|\\\\s|\\xA0|<br \\\\/>|)<\\\\/' + blockName + '>[\\r\\n]*|<br \\\\/>[\\r\\n]*)$');\n      return html.replace(emptyRegExp, '');\n    };\n    var setupArgs$3 = function (args, format) {\n      return __assign(__assign({}, args), {\n        format: format,\n        get: true,\n        getInner: true\n      });\n    };\n    var getContentFromBody = function (editor, args, format, body) {\n      var defaultedArgs = setupArgs$3(args, format);\n      var updatedArgs = args.no_events ? defaultedArgs : editor.fire('BeforeGetContent', defaultedArgs);\n      var content;\n      if (updatedArgs.format === 'raw') {\n        content = Tools.trim(trimExternal(editor.serializer, body.innerHTML));\n      } else if (updatedArgs.format === 'text') {\n        content = editor.dom.isEmpty(body) ? '' : trim$2(body.innerText || body.textContent);\n      } else if (updatedArgs.format === 'tree') {\n        content = editor.serializer.serialize(body, updatedArgs);\n      } else {\n        content = trimEmptyContents(editor, editor.serializer.serialize(body, updatedArgs));\n      }\n      if (!contains$3([\n          'text',\n          'tree'\n        ], updatedArgs.format) && !isWsPreserveElement(SugarElement.fromDom(body))) {\n        updatedArgs.content = Tools.trim(content);\n      } else {\n        updatedArgs.content = content;\n      }\n      if (updatedArgs.no_events) {\n        return updatedArgs.content;\n      } else {\n        return editor.fire('GetContent', updatedArgs).content;\n      }\n    };\n    var getContentInternal = function (editor, args, format) {\n      return Optional.from(editor.getBody()).fold(constant(args.format === 'tree' ? new AstNode('body', 11) : ''), function (body) {\n        return getContentFromBody(editor, args, format, body);\n      });\n    };\n\n    var each$c = Tools.each;\n    var ElementUtils = function (dom) {\n      var compare = function (node1, node2) {\n        if (node1.nodeName !== node2.nodeName) {\n          return false;\n        }\n        var getAttribs = function (node) {\n          var attribs = {};\n          each$c(dom.getAttribs(node), function (attr) {\n            var name = attr.nodeName.toLowerCase();\n            if (name.indexOf('_') !== 0 && name !== 'style' && name.indexOf('data-') !== 0) {\n              attribs[name] = dom.getAttrib(node, name);\n            }\n          });\n          return attribs;\n        };\n        var compareObjects = function (obj1, obj2) {\n          var value, name;\n          for (name in obj1) {\n            if (has$2(obj1, name)) {\n              value = obj2[name];\n              if (typeof value === 'undefined') {\n                return false;\n              }\n              if (obj1[name] !== value) {\n                return false;\n              }\n              delete obj2[name];\n            }\n          }\n          for (name in obj2) {\n            if (has$2(obj2, name)) {\n              return false;\n            }\n          }\n          return true;\n        };\n        if (!compareObjects(getAttribs(node1), getAttribs(node2))) {\n          return false;\n        }\n        if (!compareObjects(dom.parseStyle(dom.getAttrib(node1, 'style')), dom.parseStyle(dom.getAttrib(node2, 'style')))) {\n          return false;\n        }\n        return !isBookmarkNode$1(node1) && !isBookmarkNode$1(node2);\n      };\n      return { compare: compare };\n    };\n\n    var makeMap$1 = Tools.makeMap;\n    var Writer = function (settings) {\n      var html = [];\n      settings = settings || {};\n      var indent = settings.indent;\n      var indentBefore = makeMap$1(settings.indent_before || '');\n      var indentAfter = makeMap$1(settings.indent_after || '');\n      var encode = Entities.getEncodeFunc(settings.entity_encoding || 'raw', settings.entities);\n      var htmlOutput = settings.element_format === 'html';\n      return {\n        start: function (name, attrs, empty) {\n          var i, l, attr, value;\n          if (indent && indentBefore[name] && html.length > 0) {\n            value = html[html.length - 1];\n            if (value.length > 0 && value !== '\\n') {\n              html.push('\\n');\n            }\n          }\n          html.push('<', name);\n          if (attrs) {\n            for (i = 0, l = attrs.length; i < l; i++) {\n              attr = attrs[i];\n              html.push(' ', attr.name, '=\"', encode(attr.value, true), '\"');\n            }\n          }\n          if (!empty || htmlOutput) {\n            html[html.length] = '>';\n          } else {\n            html[html.length] = ' />';\n          }\n          if (empty && indent && indentAfter[name] && html.length > 0) {\n            value = html[html.length - 1];\n            if (value.length > 0 && value !== '\\n') {\n              html.push('\\n');\n            }\n          }\n        },\n        end: function (name) {\n          var value;\n          html.push('</', name, '>');\n          if (indent && indentAfter[name] && html.length > 0) {\n            value = html[html.length - 1];\n            if (value.length > 0 && value !== '\\n') {\n              html.push('\\n');\n            }\n          }\n        },\n        text: function (text, raw) {\n          if (text.length > 0) {\n            html[html.length] = raw ? text : encode(text);\n          }\n        },\n        cdata: function (text) {\n          html.push('<![CDATA[', text, ']]>');\n        },\n        comment: function (text) {\n          html.push('<!--', text, '-->');\n        },\n        pi: function (name, text) {\n          if (text) {\n            html.push('<?', name, ' ', encode(text), '?>');\n          } else {\n            html.push('<?', name, '?>');\n          }\n          if (indent) {\n            html.push('\\n');\n          }\n        },\n        doctype: function (text) {\n          html.push('<!DOCTYPE', text, '>', indent ? '\\n' : '');\n        },\n        reset: function () {\n          html.length = 0;\n        },\n        getContent: function () {\n          return html.join('').replace(/\\n$/, '');\n        }\n      };\n    };\n\n    var HtmlSerializer = function (settings, schema) {\n      if (schema === void 0) {\n        schema = Schema();\n      }\n      var writer = Writer(settings);\n      settings = settings || {};\n      settings.validate = 'validate' in settings ? settings.validate : true;\n      var serialize = function (node) {\n        var validate = settings.validate;\n        var handlers = {\n          3: function (node) {\n            writer.text(node.value, node.raw);\n          },\n          8: function (node) {\n            writer.comment(node.value);\n          },\n          7: function (node) {\n            writer.pi(node.name, node.value);\n          },\n          10: function (node) {\n            writer.doctype(node.value);\n          },\n          4: function (node) {\n            writer.cdata(node.value);\n          },\n          11: function (node) {\n            if (node = node.firstChild) {\n              do {\n                walk(node);\n              } while (node = node.next);\n            }\n          }\n        };\n        writer.reset();\n        var walk = function (node) {\n          var handler = handlers[node.type];\n          if (!handler) {\n            var name_1 = node.name;\n            var isEmpty = node.shortEnded;\n            var attrs = node.attributes;\n            if (validate && attrs && attrs.length > 1) {\n              var sortedAttrs = [];\n              sortedAttrs.map = {};\n              var elementRule = schema.getElementRule(node.name);\n              if (elementRule) {\n                for (var i = 0, l = elementRule.attributesOrder.length; i < l; i++) {\n                  var attrName = elementRule.attributesOrder[i];\n                  if (attrName in attrs.map) {\n                    var attrValue = attrs.map[attrName];\n                    sortedAttrs.map[attrName] = attrValue;\n                    sortedAttrs.push({\n                      name: attrName,\n                      value: attrValue\n                    });\n                  }\n                }\n                for (var i = 0, l = attrs.length; i < l; i++) {\n                  var attrName = attrs[i].name;\n                  if (!(attrName in sortedAttrs.map)) {\n                    var attrValue = attrs.map[attrName];\n                    sortedAttrs.map[attrName] = attrValue;\n                    sortedAttrs.push({\n                      name: attrName,\n                      value: attrValue\n                    });\n                  }\n                }\n                attrs = sortedAttrs;\n              }\n            }\n            writer.start(node.name, attrs, isEmpty);\n            if (!isEmpty) {\n              if (node = node.firstChild) {\n                do {\n                  walk(node);\n                } while (node = node.next);\n              }\n              writer.end(name_1);\n            }\n          } else {\n            handler(node);\n          }\n        };\n        if (node.type === 1 && !settings.inner) {\n          walk(node);\n        } else {\n          handlers[11](node);\n        }\n        return writer.getContent();\n      };\n      return { serialize: serialize };\n    };\n\n    var nonInheritableStyles = new Set();\n    (function () {\n      var nonInheritableStylesArr = [\n        'margin',\n        'margin-left',\n        'margin-right',\n        'margin-top',\n        'margin-bottom',\n        'padding',\n        'padding-left',\n        'padding-right',\n        'padding-top',\n        'padding-bottom',\n        'border',\n        'border-width',\n        'border-style',\n        'border-color',\n        'background',\n        'background-attachment',\n        'background-clip',\n        'background-color',\n        'background-image',\n        'background-origin',\n        'background-position',\n        'background-repeat',\n        'background-size',\n        'float',\n        'position',\n        'left',\n        'right',\n        'top',\n        'bottom',\n        'z-index',\n        'display',\n        'transform',\n        'width',\n        'max-width',\n        'min-width',\n        'height',\n        'max-height',\n        'min-height',\n        'overflow',\n        'overflow-x',\n        'overflow-y',\n        'text-overflow',\n        'vertical-align',\n        'transition',\n        'transition-delay',\n        'transition-duration',\n        'transition-property',\n        'transition-timing-function'\n      ];\n      each$k(nonInheritableStylesArr, function (style) {\n        nonInheritableStyles.add(style);\n      });\n    }());\n    var shorthandStyleProps = [\n      'font',\n      'text-decoration',\n      'text-emphasis'\n    ];\n    var getStyleProps = function (dom, node) {\n      return keys(dom.parseStyle(dom.getAttrib(node, 'style')));\n    };\n    var isNonInheritableStyle = function (style) {\n      return nonInheritableStyles.has(style);\n    };\n    var hasInheritableStyles = function (dom, node) {\n      return forall(getStyleProps(dom, node), function (style) {\n        return !isNonInheritableStyle(style);\n      });\n    };\n    var getLonghandStyleProps = function (styles) {\n      return filter$4(styles, function (style) {\n        return exists(shorthandStyleProps, function (prop) {\n          return startsWith(style, prop);\n        });\n      });\n    };\n    var hasStyleConflict = function (dom, node, parentNode) {\n      var nodeStyleProps = getStyleProps(dom, node);\n      var parentNodeStyleProps = getStyleProps(dom, parentNode);\n      var valueMismatch = function (prop) {\n        var nodeValue = dom.getStyle(node, prop);\n        var parentValue = dom.getStyle(parentNode, prop);\n        return isNotEmpty(nodeValue) && isNotEmpty(parentValue) && nodeValue !== parentValue;\n      };\n      return exists(nodeStyleProps, function (nodeStyleProp) {\n        var propExists = function (props) {\n          return exists(props, function (prop) {\n            return prop === nodeStyleProp;\n          });\n        };\n        if (!propExists(parentNodeStyleProps) && propExists(shorthandStyleProps)) {\n          var longhandProps = getLonghandStyleProps(parentNodeStyleProps);\n          return exists(longhandProps, valueMismatch);\n        } else {\n          return valueMismatch(nodeStyleProp);\n        }\n      });\n    };\n\n    var isChar = function (forward, predicate, pos) {\n      return Optional.from(pos.container()).filter(isText$7).exists(function (text) {\n        var delta = forward ? 0 : -1;\n        return predicate(text.data.charAt(pos.offset() + delta));\n      });\n    };\n    var isBeforeSpace = curry(isChar, true, isWhiteSpace);\n    var isAfterSpace = curry(isChar, false, isWhiteSpace);\n    var isEmptyText = function (pos) {\n      var container = pos.container();\n      return isText$7(container) && (container.data.length === 0 || isZwsp(container.data) && BookmarkManager.isBookmarkNode(container.parentNode));\n    };\n    var matchesElementPosition = function (before, predicate) {\n      return function (pos) {\n        return Optional.from(getChildNodeAtRelativeOffset(before ? 0 : -1, pos)).filter(predicate).isSome();\n      };\n    };\n    var isImageBlock = function (node) {\n      return isImg(node) && get$5(SugarElement.fromDom(node), 'display') === 'block';\n    };\n    var isCefNode = function (node) {\n      return isContentEditableFalse$b(node) && !isBogusAll$1(node);\n    };\n    var isBeforeImageBlock = matchesElementPosition(true, isImageBlock);\n    var isAfterImageBlock = matchesElementPosition(false, isImageBlock);\n    var isBeforeMedia = matchesElementPosition(true, isMedia$2);\n    var isAfterMedia = matchesElementPosition(false, isMedia$2);\n    var isBeforeTable = matchesElementPosition(true, isTable$3);\n    var isAfterTable = matchesElementPosition(false, isTable$3);\n    var isBeforeContentEditableFalse = matchesElementPosition(true, isCefNode);\n    var isAfterContentEditableFalse = matchesElementPosition(false, isCefNode);\n\n    var getLastChildren = function (elm) {\n      var children = [];\n      var rawNode = elm.dom;\n      while (rawNode) {\n        children.push(SugarElement.fromDom(rawNode));\n        rawNode = rawNode.lastChild;\n      }\n      return children;\n    };\n    var removeTrailingBr = function (elm) {\n      var allBrs = descendants(elm, 'br');\n      var brs = filter$4(getLastChildren(elm).slice(-1), isBr$4);\n      if (allBrs.length === brs.length) {\n        each$k(brs, remove$7);\n      }\n    };\n    var fillWithPaddingBr = function (elm) {\n      empty(elm);\n      append$1(elm, SugarElement.fromHtml('<br data-mce-bogus=\"1\">'));\n    };\n    var trimBlockTrailingBr = function (elm) {\n      lastChild(elm).each(function (lastChild) {\n        prevSibling(lastChild).each(function (lastChildPrevSibling) {\n          if (isBlock$2(elm) && isBr$4(lastChild) && isBlock$2(lastChildPrevSibling)) {\n            remove$7(lastChild);\n          }\n        });\n      });\n    };\n\n    var dropLast = function (xs) {\n      return xs.slice(0, -1);\n    };\n    var parentsUntil = function (start, root, predicate) {\n      if (contains$1(root, start)) {\n        return dropLast(parents$1(start, function (elm) {\n          return predicate(elm) || eq(elm, root);\n        }));\n      } else {\n        return [];\n      }\n    };\n    var parents = function (start, root) {\n      return parentsUntil(start, root, never);\n    };\n    var parentsAndSelf = function (start, root) {\n      return [start].concat(parents(start, root));\n    };\n\n    var navigateIgnoreEmptyTextNodes = function (forward, root, from) {\n      return navigateIgnore(forward, root, from, isEmptyText);\n    };\n    var getClosestBlock$1 = function (root, pos) {\n      return find$3(parentsAndSelf(SugarElement.fromDom(pos.container()), root), isBlock$2);\n    };\n    var isAtBeforeAfterBlockBoundary = function (forward, root, pos) {\n      return navigateIgnoreEmptyTextNodes(forward, root.dom, pos).forall(function (newPos) {\n        return getClosestBlock$1(root, pos).fold(function () {\n          return isInSameBlock(newPos, pos, root.dom) === false;\n        }, function (fromBlock) {\n          return isInSameBlock(newPos, pos, root.dom) === false && contains$1(fromBlock, SugarElement.fromDom(newPos.container()));\n        });\n      });\n    };\n    var isAtBlockBoundary = function (forward, root, pos) {\n      return getClosestBlock$1(root, pos).fold(function () {\n        return navigateIgnoreEmptyTextNodes(forward, root.dom, pos).forall(function (newPos) {\n          return isInSameBlock(newPos, pos, root.dom) === false;\n        });\n      }, function (parent) {\n        return navigateIgnoreEmptyTextNodes(forward, parent.dom, pos).isNone();\n      });\n    };\n    var isAtStartOfBlock = curry(isAtBlockBoundary, false);\n    var isAtEndOfBlock = curry(isAtBlockBoundary, true);\n    var isBeforeBlock = curry(isAtBeforeAfterBlockBoundary, false);\n    var isAfterBlock = curry(isAtBeforeAfterBlockBoundary, true);\n\n    var isBr = function (pos) {\n      return getElementFromPosition(pos).exists(isBr$4);\n    };\n    var findBr = function (forward, root, pos) {\n      var parentBlocks = filter$4(parentsAndSelf(SugarElement.fromDom(pos.container()), root), isBlock$2);\n      var scope = head(parentBlocks).getOr(root);\n      return fromPosition(forward, scope.dom, pos).filter(isBr);\n    };\n    var isBeforeBr$1 = function (root, pos) {\n      return getElementFromPosition(pos).exists(isBr$4) || findBr(true, root, pos).isSome();\n    };\n    var isAfterBr = function (root, pos) {\n      return getElementFromPrevPosition(pos).exists(isBr$4) || findBr(false, root, pos).isSome();\n    };\n    var findPreviousBr = curry(findBr, false);\n    var findNextBr = curry(findBr, true);\n\n    var isInMiddleOfText = function (pos) {\n      return CaretPosition.isTextPosition(pos) && !pos.isAtStart() && !pos.isAtEnd();\n    };\n    var getClosestBlock = function (root, pos) {\n      var parentBlocks = filter$4(parentsAndSelf(SugarElement.fromDom(pos.container()), root), isBlock$2);\n      return head(parentBlocks).getOr(root);\n    };\n    var hasSpaceBefore = function (root, pos) {\n      if (isInMiddleOfText(pos)) {\n        return isAfterSpace(pos);\n      } else {\n        return isAfterSpace(pos) || prevPosition(getClosestBlock(root, pos).dom, pos).exists(isAfterSpace);\n      }\n    };\n    var hasSpaceAfter = function (root, pos) {\n      if (isInMiddleOfText(pos)) {\n        return isBeforeSpace(pos);\n      } else {\n        return isBeforeSpace(pos) || nextPosition(getClosestBlock(root, pos).dom, pos).exists(isBeforeSpace);\n      }\n    };\n    var isPreValue = function (value) {\n      return contains$3([\n        'pre',\n        'pre-wrap'\n      ], value);\n    };\n    var isInPre = function (pos) {\n      return getElementFromPosition(pos).bind(function (elm) {\n        return closest$3(elm, isElement$6);\n      }).exists(function (elm) {\n        return isPreValue(get$5(elm, 'white-space'));\n      });\n    };\n    var isAtBeginningOfBody = function (root, pos) {\n      return prevPosition(root.dom, pos).isNone();\n    };\n    var isAtEndOfBody = function (root, pos) {\n      return nextPosition(root.dom, pos).isNone();\n    };\n    var isAtLineBoundary = function (root, pos) {\n      return isAtBeginningOfBody(root, pos) || isAtEndOfBody(root, pos) || isAtStartOfBlock(root, pos) || isAtEndOfBlock(root, pos) || isAfterBr(root, pos) || isBeforeBr$1(root, pos);\n    };\n    var needsToHaveNbsp = function (root, pos) {\n      if (isInPre(pos)) {\n        return false;\n      } else {\n        return isAtLineBoundary(root, pos) || hasSpaceBefore(root, pos) || hasSpaceAfter(root, pos);\n      }\n    };\n    var needsToBeNbspLeft = function (root, pos) {\n      if (isInPre(pos)) {\n        return false;\n      } else {\n        return isAtStartOfBlock(root, pos) || isBeforeBlock(root, pos) || isAfterBr(root, pos) || hasSpaceBefore(root, pos);\n      }\n    };\n    var leanRight = function (pos) {\n      var container = pos.container();\n      var offset = pos.offset();\n      if (isText$7(container) && offset < container.data.length) {\n        return CaretPosition(container, offset + 1);\n      } else {\n        return pos;\n      }\n    };\n    var needsToBeNbspRight = function (root, pos) {\n      if (isInPre(pos)) {\n        return false;\n      } else {\n        return isAtEndOfBlock(root, pos) || isAfterBlock(root, pos) || isBeforeBr$1(root, pos) || hasSpaceAfter(root, pos);\n      }\n    };\n    var needsToBeNbsp = function (root, pos) {\n      return needsToBeNbspLeft(root, pos) || needsToBeNbspRight(root, leanRight(pos));\n    };\n    var isNbspAt = function (text, offset) {\n      return isNbsp(text.charAt(offset));\n    };\n    var hasNbsp = function (pos) {\n      var container = pos.container();\n      return isText$7(container) && contains$2(container.data, nbsp);\n    };\n    var normalizeNbspMiddle = function (text) {\n      var chars = text.split('');\n      return map$3(chars, function (chr, i) {\n        if (isNbsp(chr) && i > 0 && i < chars.length - 1 && isContent(chars[i - 1]) && isContent(chars[i + 1])) {\n          return ' ';\n        } else {\n          return chr;\n        }\n      }).join('');\n    };\n    var normalizeNbspAtStart = function (root, node) {\n      var text = node.data;\n      var firstPos = CaretPosition(node, 0);\n      if (isNbspAt(text, 0) && !needsToBeNbsp(root, firstPos)) {\n        node.data = ' ' + text.slice(1);\n        return true;\n      } else {\n        return false;\n      }\n    };\n    var normalizeNbspInMiddleOfTextNode = function (node) {\n      var text = node.data;\n      var newText = normalizeNbspMiddle(text);\n      if (newText !== text) {\n        node.data = newText;\n        return true;\n      } else {\n        return false;\n      }\n    };\n    var normalizeNbspAtEnd = function (root, node) {\n      var text = node.data;\n      var lastPos = CaretPosition(node, text.length - 1);\n      if (isNbspAt(text, text.length - 1) && !needsToBeNbsp(root, lastPos)) {\n        node.data = text.slice(0, -1) + ' ';\n        return true;\n      } else {\n        return false;\n      }\n    };\n    var normalizeNbsps = function (root, pos) {\n      return Optional.some(pos).filter(hasNbsp).bind(function (pos) {\n        var container = pos.container();\n        var normalized = normalizeNbspAtStart(root, container) || normalizeNbspInMiddleOfTextNode(container) || normalizeNbspAtEnd(root, container);\n        return normalized ? Optional.some(pos) : Optional.none();\n      });\n    };\n    var normalizeNbspsInEditor = function (editor) {\n      var root = SugarElement.fromDom(editor.getBody());\n      if (editor.selection.isCollapsed()) {\n        normalizeNbsps(root, CaretPosition.fromRangeStart(editor.selection.getRng())).each(function (pos) {\n          editor.selection.setRng(pos.toRange());\n        });\n      }\n    };\n\n    var normalizeContent = function (content, isStartOfContent, isEndOfContent) {\n      var result = foldl(content, function (acc, c) {\n        if (isWhiteSpace(c) || isNbsp(c)) {\n          if (acc.previousCharIsSpace || acc.str === '' && isStartOfContent || acc.str.length === content.length - 1 && isEndOfContent) {\n            return {\n              previousCharIsSpace: false,\n              str: acc.str + nbsp\n            };\n          } else {\n            return {\n              previousCharIsSpace: true,\n              str: acc.str + ' '\n            };\n          }\n        } else {\n          return {\n            previousCharIsSpace: false,\n            str: acc.str + c\n          };\n        }\n      }, {\n        previousCharIsSpace: false,\n        str: ''\n      });\n      return result.str;\n    };\n    var normalize$1 = function (node, offset, count) {\n      if (count === 0) {\n        return;\n      }\n      var elm = SugarElement.fromDom(node);\n      var root = ancestor$3(elm, isBlock$2).getOr(elm);\n      var whitespace = node.data.slice(offset, offset + count);\n      var isEndOfContent = offset + count >= node.data.length && needsToBeNbspRight(root, CaretPosition(node, node.data.length));\n      var isStartOfContent = offset === 0 && needsToBeNbspLeft(root, CaretPosition(node, 0));\n      node.replaceData(offset, count, normalizeContent(whitespace, isStartOfContent, isEndOfContent));\n    };\n    var normalizeWhitespaceAfter = function (node, offset) {\n      var content = node.data.slice(offset);\n      var whitespaceCount = content.length - lTrim(content).length;\n      normalize$1(node, offset, whitespaceCount);\n    };\n    var normalizeWhitespaceBefore = function (node, offset) {\n      var content = node.data.slice(0, offset);\n      var whitespaceCount = content.length - rTrim(content).length;\n      normalize$1(node, offset - whitespaceCount, whitespaceCount);\n    };\n    var mergeTextNodes = function (prevNode, nextNode, normalizeWhitespace, mergeToPrev) {\n      if (mergeToPrev === void 0) {\n        mergeToPrev = true;\n      }\n      var whitespaceOffset = rTrim(prevNode.data).length;\n      var newNode = mergeToPrev ? prevNode : nextNode;\n      var removeNode = mergeToPrev ? nextNode : prevNode;\n      if (mergeToPrev) {\n        newNode.appendData(removeNode.data);\n      } else {\n        newNode.insertData(0, removeNode.data);\n      }\n      remove$7(SugarElement.fromDom(removeNode));\n      if (normalizeWhitespace) {\n        normalizeWhitespaceAfter(newNode, whitespaceOffset);\n      }\n      return newNode;\n    };\n\n    var needsReposition = function (pos, elm) {\n      var container = pos.container();\n      var offset = pos.offset();\n      return CaretPosition.isTextPosition(pos) === false && container === elm.parentNode && offset > CaretPosition.before(elm).offset();\n    };\n    var reposition = function (elm, pos) {\n      return needsReposition(pos, elm) ? CaretPosition(pos.container(), pos.offset() - 1) : pos;\n    };\n    var beforeOrStartOf = function (node) {\n      return isText$7(node) ? CaretPosition(node, 0) : CaretPosition.before(node);\n    };\n    var afterOrEndOf = function (node) {\n      return isText$7(node) ? CaretPosition(node, node.data.length) : CaretPosition.after(node);\n    };\n    var getPreviousSiblingCaretPosition = function (elm) {\n      if (isCaretCandidate$3(elm.previousSibling)) {\n        return Optional.some(afterOrEndOf(elm.previousSibling));\n      } else {\n        return elm.previousSibling ? lastPositionIn(elm.previousSibling) : Optional.none();\n      }\n    };\n    var getNextSiblingCaretPosition = function (elm) {\n      if (isCaretCandidate$3(elm.nextSibling)) {\n        return Optional.some(beforeOrStartOf(elm.nextSibling));\n      } else {\n        return elm.nextSibling ? firstPositionIn(elm.nextSibling) : Optional.none();\n      }\n    };\n    var findCaretPositionBackwardsFromElm = function (rootElement, elm) {\n      var startPosition = CaretPosition.before(elm.previousSibling ? elm.previousSibling : elm.parentNode);\n      return prevPosition(rootElement, startPosition).fold(function () {\n        return nextPosition(rootElement, CaretPosition.after(elm));\n      }, Optional.some);\n    };\n    var findCaretPositionForwardsFromElm = function (rootElement, elm) {\n      return nextPosition(rootElement, CaretPosition.after(elm)).fold(function () {\n        return prevPosition(rootElement, CaretPosition.before(elm));\n      }, Optional.some);\n    };\n    var findCaretPositionBackwards = function (rootElement, elm) {\n      return getPreviousSiblingCaretPosition(elm).orThunk(function () {\n        return getNextSiblingCaretPosition(elm);\n      }).orThunk(function () {\n        return findCaretPositionBackwardsFromElm(rootElement, elm);\n      });\n    };\n    var findCaretPositionForward = function (rootElement, elm) {\n      return getNextSiblingCaretPosition(elm).orThunk(function () {\n        return getPreviousSiblingCaretPosition(elm);\n      }).orThunk(function () {\n        return findCaretPositionForwardsFromElm(rootElement, elm);\n      });\n    };\n    var findCaretPosition = function (forward, rootElement, elm) {\n      return forward ? findCaretPositionForward(rootElement, elm) : findCaretPositionBackwards(rootElement, elm);\n    };\n    var findCaretPosOutsideElmAfterDelete = function (forward, rootElement, elm) {\n      return findCaretPosition(forward, rootElement, elm).map(curry(reposition, elm));\n    };\n    var setSelection$1 = function (editor, forward, pos) {\n      pos.fold(function () {\n        editor.focus();\n      }, function (pos) {\n        editor.selection.setRng(pos.toRange(), forward);\n      });\n    };\n    var eqRawNode = function (rawNode) {\n      return function (elm) {\n        return elm.dom === rawNode;\n      };\n    };\n    var isBlock = function (editor, elm) {\n      return elm && has$2(editor.schema.getBlockElements(), name(elm));\n    };\n    var paddEmptyBlock = function (elm) {\n      if (isEmpty$2(elm)) {\n        var br = SugarElement.fromHtml('<br data-mce-bogus=\"1\">');\n        empty(elm);\n        append$1(elm, br);\n        return Optional.some(CaretPosition.before(br.dom));\n      } else {\n        return Optional.none();\n      }\n    };\n    var deleteNormalized = function (elm, afterDeletePosOpt, normalizeWhitespace) {\n      var prevTextOpt = prevSibling(elm).filter(isText$8);\n      var nextTextOpt = nextSibling(elm).filter(isText$8);\n      remove$7(elm);\n      return lift3(prevTextOpt, nextTextOpt, afterDeletePosOpt, function (prev, next, pos) {\n        var prevNode = prev.dom, nextNode = next.dom;\n        var offset = prevNode.data.length;\n        mergeTextNodes(prevNode, nextNode, normalizeWhitespace);\n        return pos.container() === nextNode ? CaretPosition(prevNode, offset) : pos;\n      }).orThunk(function () {\n        if (normalizeWhitespace) {\n          prevTextOpt.each(function (elm) {\n            return normalizeWhitespaceBefore(elm.dom, elm.dom.length);\n          });\n          nextTextOpt.each(function (elm) {\n            return normalizeWhitespaceAfter(elm.dom, 0);\n          });\n        }\n        return afterDeletePosOpt;\n      });\n    };\n    var isInlineElement = function (editor, element) {\n      return has$2(editor.schema.getTextInlineElements(), name(element));\n    };\n    var deleteElement$2 = function (editor, forward, elm, moveCaret) {\n      if (moveCaret === void 0) {\n        moveCaret = true;\n      }\n      var afterDeletePos = findCaretPosOutsideElmAfterDelete(forward, editor.getBody(), elm.dom);\n      var parentBlock = ancestor$3(elm, curry(isBlock, editor), eqRawNode(editor.getBody()));\n      var normalizedAfterDeletePos = deleteNormalized(elm, afterDeletePos, isInlineElement(editor, elm));\n      if (editor.dom.isEmpty(editor.getBody())) {\n        editor.setContent('');\n        editor.selection.setCursorLocation();\n      } else {\n        parentBlock.bind(paddEmptyBlock).fold(function () {\n          if (moveCaret) {\n            setSelection$1(editor, forward, normalizedAfterDeletePos);\n          }\n        }, function (paddPos) {\n          if (moveCaret) {\n            setSelection$1(editor, forward, Optional.some(paddPos));\n          }\n        });\n      }\n    };\n\n    var isRootFromElement = function (root) {\n      return function (cur) {\n        return eq(root, cur);\n      };\n    };\n    var getTableCells = function (table) {\n      return descendants(table, 'td,th');\n    };\n    var getTableDetailsFromRange = function (rng, isRoot) {\n      var getTable = function (node) {\n        return getClosestTable(SugarElement.fromDom(node), isRoot);\n      };\n      var startTable = getTable(rng.startContainer);\n      var endTable = getTable(rng.endContainer);\n      var isStartInTable = startTable.isSome();\n      var isEndInTable = endTable.isSome();\n      var isSameTable = lift2(startTable, endTable, eq).getOr(false);\n      var isMultiTable = !isSameTable && isStartInTable && isEndInTable;\n      return {\n        startTable: startTable,\n        endTable: endTable,\n        isStartInTable: isStartInTable,\n        isEndInTable: isEndInTable,\n        isSameTable: isSameTable,\n        isMultiTable: isMultiTable\n      };\n    };\n\n    var tableCellRng = function (start, end) {\n      return {\n        start: start,\n        end: end\n      };\n    };\n    var tableSelection = function (rng, table, cells) {\n      return {\n        rng: rng,\n        table: table,\n        cells: cells\n      };\n    };\n    var deleteAction = Adt.generate([\n      {\n        singleCellTable: [\n          'rng',\n          'cell'\n        ]\n      },\n      { fullTable: ['table'] },\n      {\n        partialTable: [\n          'cells',\n          'outsideDetails'\n        ]\n      },\n      {\n        multiTable: [\n          'startTableCells',\n          'endTableCells',\n          'betweenRng'\n        ]\n      }\n    ]);\n    var getClosestCell$1 = function (container, isRoot) {\n      return closest$2(SugarElement.fromDom(container), 'td,th', isRoot);\n    };\n    var isExpandedCellRng = function (cellRng) {\n      return !eq(cellRng.start, cellRng.end);\n    };\n    var getTableFromCellRng = function (cellRng, isRoot) {\n      return getClosestTable(cellRng.start, isRoot).bind(function (startParentTable) {\n        return getClosestTable(cellRng.end, isRoot).bind(function (endParentTable) {\n          return someIf(eq(startParentTable, endParentTable), startParentTable);\n        });\n      });\n    };\n    var isSingleCellTable = function (cellRng, isRoot) {\n      return !isExpandedCellRng(cellRng) && getTableFromCellRng(cellRng, isRoot).exists(function (table) {\n        var rows = table.dom.rows;\n        return rows.length === 1 && rows[0].cells.length === 1;\n      });\n    };\n    var getCellRng = function (rng, isRoot) {\n      var startCell = getClosestCell$1(rng.startContainer, isRoot);\n      var endCell = getClosestCell$1(rng.endContainer, isRoot);\n      return lift2(startCell, endCell, tableCellRng);\n    };\n    var getCellRangeFromStartTable = function (isRoot) {\n      return function (startCell) {\n        return getClosestTable(startCell, isRoot).bind(function (table) {\n          return last$2(getTableCells(table)).map(function (endCell) {\n            return tableCellRng(startCell, endCell);\n          });\n        });\n      };\n    };\n    var getCellRangeFromEndTable = function (isRoot) {\n      return function (endCell) {\n        return getClosestTable(endCell, isRoot).bind(function (table) {\n          return head(getTableCells(table)).map(function (startCell) {\n            return tableCellRng(startCell, endCell);\n          });\n        });\n      };\n    };\n    var getTableSelectionFromCellRng = function (isRoot) {\n      return function (cellRng) {\n        return getTableFromCellRng(cellRng, isRoot).map(function (table) {\n          return tableSelection(cellRng, table, getTableCells(table));\n        });\n      };\n    };\n    var getTableSelections = function (cellRng, selectionDetails, rng, isRoot) {\n      if (rng.collapsed || !cellRng.forall(isExpandedCellRng)) {\n        return Optional.none();\n      } else if (selectionDetails.isSameTable) {\n        var sameTableSelection = cellRng.bind(getTableSelectionFromCellRng(isRoot));\n        return Optional.some({\n          start: sameTableSelection,\n          end: sameTableSelection\n        });\n      } else {\n        var startCell = getClosestCell$1(rng.startContainer, isRoot);\n        var endCell = getClosestCell$1(rng.endContainer, isRoot);\n        var startTableSelection = startCell.bind(getCellRangeFromStartTable(isRoot)).bind(getTableSelectionFromCellRng(isRoot));\n        var endTableSelection = endCell.bind(getCellRangeFromEndTable(isRoot)).bind(getTableSelectionFromCellRng(isRoot));\n        return Optional.some({\n          start: startTableSelection,\n          end: endTableSelection\n        });\n      }\n    };\n    var getCellIndex = function (cells, cell) {\n      return findIndex$2(cells, function (x) {\n        return eq(x, cell);\n      });\n    };\n    var getSelectedCells = function (tableSelection) {\n      return lift2(getCellIndex(tableSelection.cells, tableSelection.rng.start), getCellIndex(tableSelection.cells, tableSelection.rng.end), function (startIndex, endIndex) {\n        return tableSelection.cells.slice(startIndex, endIndex + 1);\n      });\n    };\n    var isSingleCellTableContentSelected = function (optCellRng, rng, isRoot) {\n      return optCellRng.exists(function (cellRng) {\n        return isSingleCellTable(cellRng, isRoot) && hasAllContentsSelected(cellRng.start, rng);\n      });\n    };\n    var unselectCells = function (rng, selectionDetails) {\n      var startTable = selectionDetails.startTable, endTable = selectionDetails.endTable;\n      var otherContentRng = rng.cloneRange();\n      startTable.each(function (table) {\n        return otherContentRng.setStartAfter(table.dom);\n      });\n      endTable.each(function (table) {\n        return otherContentRng.setEndBefore(table.dom);\n      });\n      return otherContentRng;\n    };\n    var handleSingleTable = function (cellRng, selectionDetails, rng, isRoot) {\n      return getTableSelections(cellRng, selectionDetails, rng, isRoot).bind(function (_a) {\n        var start = _a.start, end = _a.end;\n        return start.or(end);\n      }).bind(function (tableSelection) {\n        var isSameTable = selectionDetails.isSameTable;\n        var selectedCells = getSelectedCells(tableSelection).getOr([]);\n        if (isSameTable && tableSelection.cells.length === selectedCells.length) {\n          return Optional.some(deleteAction.fullTable(tableSelection.table));\n        } else if (selectedCells.length > 0) {\n          if (isSameTable) {\n            return Optional.some(deleteAction.partialTable(selectedCells, Optional.none()));\n          } else {\n            var otherContentRng = unselectCells(rng, selectionDetails);\n            return Optional.some(deleteAction.partialTable(selectedCells, Optional.some(__assign(__assign({}, selectionDetails), { rng: otherContentRng }))));\n          }\n        } else {\n          return Optional.none();\n        }\n      });\n    };\n    var handleMultiTable = function (cellRng, selectionDetails, rng, isRoot) {\n      return getTableSelections(cellRng, selectionDetails, rng, isRoot).bind(function (_a) {\n        var start = _a.start, end = _a.end;\n        var startTableSelectedCells = start.bind(getSelectedCells).getOr([]);\n        var endTableSelectedCells = end.bind(getSelectedCells).getOr([]);\n        if (startTableSelectedCells.length > 0 && endTableSelectedCells.length > 0) {\n          var otherContentRng = unselectCells(rng, selectionDetails);\n          return Optional.some(deleteAction.multiTable(startTableSelectedCells, endTableSelectedCells, otherContentRng));\n        } else {\n          return Optional.none();\n        }\n      });\n    };\n    var getActionFromRange = function (root, rng) {\n      var isRoot = isRootFromElement(root);\n      var optCellRng = getCellRng(rng, isRoot);\n      var selectionDetails = getTableDetailsFromRange(rng, isRoot);\n      if (isSingleCellTableContentSelected(optCellRng, rng, isRoot)) {\n        return optCellRng.map(function (cellRng) {\n          return deleteAction.singleCellTable(rng, cellRng.start);\n        });\n      } else if (selectionDetails.isMultiTable) {\n        return handleMultiTable(optCellRng, selectionDetails, rng, isRoot);\n      } else {\n        return handleSingleTable(optCellRng, selectionDetails, rng, isRoot);\n      }\n    };\n\n    var freefallRtl = function (root) {\n      var child = isComment$1(root) ? prevSibling(root) : lastChild(root);\n      return child.bind(freefallRtl).orThunk(function () {\n        return Optional.some(root);\n      });\n    };\n    var cleanCells = function (cells) {\n      return each$k(cells, function (cell) {\n        remove$6(cell, 'contenteditable');\n        fillWithPaddingBr(cell);\n      });\n    };\n    var getOutsideBlock = function (editor, container) {\n      return Optional.from(editor.dom.getParent(container, editor.dom.isBlock)).map(SugarElement.fromDom);\n    };\n    var handleEmptyBlock = function (editor, startInTable, emptyBlock) {\n      emptyBlock.each(function (block) {\n        if (startInTable) {\n          remove$7(block);\n        } else {\n          fillWithPaddingBr(block);\n          editor.selection.setCursorLocation(block.dom, 0);\n        }\n      });\n    };\n    var deleteContentInsideCell = function (editor, cell, rng, isFirstCellInSelection) {\n      var insideTableRng = rng.cloneRange();\n      if (isFirstCellInSelection) {\n        insideTableRng.setStart(rng.startContainer, rng.startOffset);\n        insideTableRng.setEndAfter(cell.dom.lastChild);\n      } else {\n        insideTableRng.setStartBefore(cell.dom.firstChild);\n        insideTableRng.setEnd(rng.endContainer, rng.endOffset);\n      }\n      deleteCellContents(editor, insideTableRng, cell, false);\n    };\n    var collapseAndRestoreCellSelection = function (editor) {\n      var selectedCells = getCellsFromEditor(editor);\n      var selectedNode = SugarElement.fromDom(editor.selection.getNode());\n      if (isTableCell$5(selectedNode.dom) && isEmpty$2(selectedNode)) {\n        editor.selection.setCursorLocation(selectedNode.dom, 0);\n      } else {\n        editor.selection.collapse(true);\n      }\n      if (selectedCells.length > 1 && exists(selectedCells, function (cell) {\n          return eq(cell, selectedNode);\n        })) {\n        set$1(selectedNode, 'data-mce-selected', '1');\n      }\n    };\n    var emptySingleTableCells = function (editor, cells, outsideDetails) {\n      var editorRng = editor.selection.getRng();\n      var cellsToClean = outsideDetails.bind(function (_a) {\n        var rng = _a.rng, isStartInTable = _a.isStartInTable;\n        var outsideBlock = getOutsideBlock(editor, isStartInTable ? rng.endContainer : rng.startContainer);\n        rng.deleteContents();\n        handleEmptyBlock(editor, isStartInTable, outsideBlock.filter(isEmpty$2));\n        var endPointCell = isStartInTable ? cells[0] : cells[cells.length - 1];\n        deleteContentInsideCell(editor, endPointCell, editorRng, isStartInTable);\n        if (!isEmpty$2(endPointCell)) {\n          return Optional.some(isStartInTable ? cells.slice(1) : cells.slice(0, -1));\n        } else {\n          return Optional.none();\n        }\n      }).getOr(cells);\n      cleanCells(cellsToClean);\n      collapseAndRestoreCellSelection(editor);\n      return true;\n    };\n    var emptyMultiTableCells = function (editor, startTableCells, endTableCells, betweenRng) {\n      var rng = editor.selection.getRng();\n      var startCell = startTableCells[0];\n      var endCell = endTableCells[endTableCells.length - 1];\n      deleteContentInsideCell(editor, startCell, rng, true);\n      deleteContentInsideCell(editor, endCell, rng, false);\n      var startTableCellsToClean = isEmpty$2(startCell) ? startTableCells : startTableCells.slice(1);\n      var endTableCellsToClean = isEmpty$2(endCell) ? endTableCells : endTableCells.slice(0, -1);\n      cleanCells(startTableCellsToClean.concat(endTableCellsToClean));\n      betweenRng.deleteContents();\n      collapseAndRestoreCellSelection(editor);\n      return true;\n    };\n    var deleteCellContents = function (editor, rng, cell, moveSelection) {\n      if (moveSelection === void 0) {\n        moveSelection = true;\n      }\n      rng.deleteContents();\n      var lastNode = freefallRtl(cell).getOr(cell);\n      var lastBlock = SugarElement.fromDom(editor.dom.getParent(lastNode.dom, editor.dom.isBlock));\n      if (isEmpty$2(lastBlock)) {\n        fillWithPaddingBr(lastBlock);\n        if (moveSelection) {\n          editor.selection.setCursorLocation(lastBlock.dom, 0);\n        }\n      }\n      if (!eq(cell, lastBlock)) {\n        var additionalCleanupNodes = is$1(parent(lastBlock), cell) ? [] : siblings(lastBlock);\n        each$k(additionalCleanupNodes.concat(children(cell)), function (node) {\n          if (!eq(node, lastBlock) && !contains$1(node, lastBlock) && isEmpty$2(node)) {\n            remove$7(node);\n          }\n        });\n      }\n      return true;\n    };\n    var deleteTableElement = function (editor, table) {\n      deleteElement$2(editor, false, table);\n      return true;\n    };\n    var deleteCellRange = function (editor, rootElm, rng) {\n      return getActionFromRange(rootElm, rng).map(function (action) {\n        return action.fold(curry(deleteCellContents, editor), curry(deleteTableElement, editor), curry(emptySingleTableCells, editor), curry(emptyMultiTableCells, editor));\n      });\n    };\n    var deleteCaptionRange = function (editor, caption) {\n      return emptyElement(editor, caption);\n    };\n    var deleteTableRange = function (editor, rootElm, rng, startElm) {\n      return getParentCaption(rootElm, startElm).fold(function () {\n        return deleteCellRange(editor, rootElm, rng);\n      }, function (caption) {\n        return deleteCaptionRange(editor, caption);\n      }).getOr(false);\n    };\n    var deleteRange$2 = function (editor, startElm, selectedCells) {\n      var rootNode = SugarElement.fromDom(editor.getBody());\n      var rng = editor.selection.getRng();\n      return selectedCells.length !== 0 ? emptySingleTableCells(editor, selectedCells, Optional.none()) : deleteTableRange(editor, rootNode, rng, startElm);\n    };\n    var getParentCell = function (rootElm, elm) {\n      return find$3(parentsAndSelf(elm, rootElm), isTableCell$4);\n    };\n    var getParentCaption = function (rootElm, elm) {\n      return find$3(parentsAndSelf(elm, rootElm), isTag('caption'));\n    };\n    var deleteBetweenCells = function (editor, rootElm, forward, fromCell, from) {\n      return navigate(forward, editor.getBody(), from).bind(function (to) {\n        return getParentCell(rootElm, SugarElement.fromDom(to.getNode())).map(function (toCell) {\n          return eq(toCell, fromCell) === false;\n        });\n      });\n    };\n    var emptyElement = function (editor, elm) {\n      fillWithPaddingBr(elm);\n      editor.selection.setCursorLocation(elm.dom, 0);\n      return Optional.some(true);\n    };\n    var isDeleteOfLastCharPos = function (fromCaption, forward, from, to) {\n      return firstPositionIn(fromCaption.dom).bind(function (first) {\n        return lastPositionIn(fromCaption.dom).map(function (last) {\n          return forward ? from.isEqual(first) && to.isEqual(last) : from.isEqual(last) && to.isEqual(first);\n        });\n      }).getOr(true);\n    };\n    var emptyCaretCaption = function (editor, elm) {\n      return emptyElement(editor, elm);\n    };\n    var validateCaretCaption = function (rootElm, fromCaption, to) {\n      return getParentCaption(rootElm, SugarElement.fromDom(to.getNode())).map(function (toCaption) {\n        return eq(toCaption, fromCaption) === false;\n      });\n    };\n    var deleteCaretInsideCaption = function (editor, rootElm, forward, fromCaption, from) {\n      return navigate(forward, editor.getBody(), from).bind(function (to) {\n        return isDeleteOfLastCharPos(fromCaption, forward, from, to) ? emptyCaretCaption(editor, fromCaption) : validateCaretCaption(rootElm, fromCaption, to);\n      }).or(Optional.some(true));\n    };\n    var deleteCaretCells = function (editor, forward, rootElm, startElm) {\n      var from = CaretPosition.fromRangeStart(editor.selection.getRng());\n      return getParentCell(rootElm, startElm).bind(function (fromCell) {\n        return isEmpty$2(fromCell) ? emptyElement(editor, fromCell) : deleteBetweenCells(editor, rootElm, forward, fromCell, from);\n      }).getOr(false);\n    };\n    var deleteCaretCaption = function (editor, forward, rootElm, fromCaption) {\n      var from = CaretPosition.fromRangeStart(editor.selection.getRng());\n      return isEmpty$2(fromCaption) ? emptyElement(editor, fromCaption) : deleteCaretInsideCaption(editor, rootElm, forward, fromCaption, from);\n    };\n    var isNearTable = function (forward, pos) {\n      return forward ? isBeforeTable(pos) : isAfterTable(pos);\n    };\n    var isBeforeOrAfterTable = function (editor, forward) {\n      var fromPos = CaretPosition.fromRangeStart(editor.selection.getRng());\n      return isNearTable(forward, fromPos) || fromPosition(forward, editor.getBody(), fromPos).exists(function (pos) {\n        return isNearTable(forward, pos);\n      });\n    };\n    var deleteCaret$3 = function (editor, forward, startElm) {\n      var rootElm = SugarElement.fromDom(editor.getBody());\n      return getParentCaption(rootElm, startElm).fold(function () {\n        return deleteCaretCells(editor, forward, rootElm, startElm) || isBeforeOrAfterTable(editor, forward);\n      }, function (fromCaption) {\n        return deleteCaretCaption(editor, forward, rootElm, fromCaption).getOr(false);\n      });\n    };\n    var backspaceDelete$9 = function (editor, forward) {\n      var startElm = SugarElement.fromDom(editor.selection.getStart(true));\n      var cells = getCellsFromEditor(editor);\n      return editor.selection.isCollapsed() && cells.length === 0 ? deleteCaret$3(editor, forward, startElm) : deleteRange$2(editor, startElm, cells);\n    };\n\n    var createRange = function (sc, so, ec, eo) {\n      var rng = document.createRange();\n      rng.setStart(sc, so);\n      rng.setEnd(ec, eo);\n      return rng;\n    };\n    var normalizeBlockSelectionRange = function (rng) {\n      var startPos = CaretPosition.fromRangeStart(rng);\n      var endPos = CaretPosition.fromRangeEnd(rng);\n      var rootNode = rng.commonAncestorContainer;\n      return fromPosition(false, rootNode, endPos).map(function (newEndPos) {\n        if (!isInSameBlock(startPos, endPos, rootNode) && isInSameBlock(startPos, newEndPos, rootNode)) {\n          return createRange(startPos.container(), startPos.offset(), newEndPos.container(), newEndPos.offset());\n        } else {\n          return rng;\n        }\n      }).getOr(rng);\n    };\n    var normalize = function (rng) {\n      return rng.collapsed ? rng : normalizeBlockSelectionRange(rng);\n    };\n\n    var hasOnlyOneChild$1 = function (node) {\n      return node.firstChild && node.firstChild === node.lastChild;\n    };\n    var isPaddingNode = function (node) {\n      return node.name === 'br' || node.value === nbsp;\n    };\n    var isPaddedEmptyBlock = function (schema, node) {\n      var blockElements = schema.getBlockElements();\n      return blockElements[node.name] && hasOnlyOneChild$1(node) && isPaddingNode(node.firstChild);\n    };\n    var isEmptyFragmentElement = function (schema, node) {\n      var nonEmptyElements = schema.getNonEmptyElements();\n      return node && (node.isEmpty(nonEmptyElements) || isPaddedEmptyBlock(schema, node));\n    };\n    var isListFragment = function (schema, fragment) {\n      var firstChild = fragment.firstChild;\n      var lastChild = fragment.lastChild;\n      if (firstChild && firstChild.name === 'meta') {\n        firstChild = firstChild.next;\n      }\n      if (lastChild && lastChild.attr('id') === 'mce_marker') {\n        lastChild = lastChild.prev;\n      }\n      if (isEmptyFragmentElement(schema, lastChild)) {\n        lastChild = lastChild.prev;\n      }\n      if (!firstChild || firstChild !== lastChild) {\n        return false;\n      }\n      return firstChild.name === 'ul' || firstChild.name === 'ol';\n    };\n    var cleanupDomFragment = function (domFragment) {\n      var firstChild = domFragment.firstChild;\n      var lastChild = domFragment.lastChild;\n      if (firstChild && firstChild.nodeName === 'META') {\n        firstChild.parentNode.removeChild(firstChild);\n      }\n      if (lastChild && lastChild.id === 'mce_marker') {\n        lastChild.parentNode.removeChild(lastChild);\n      }\n      return domFragment;\n    };\n    var toDomFragment = function (dom, serializer, fragment) {\n      var html = serializer.serialize(fragment);\n      var domFragment = dom.createFragment(html);\n      return cleanupDomFragment(domFragment);\n    };\n    var listItems = function (elm) {\n      return filter$4(elm.childNodes, function (child) {\n        return child.nodeName === 'LI';\n      });\n    };\n    var isPadding = function (node) {\n      return node.data === nbsp || isBr$5(node);\n    };\n    var isListItemPadded = function (node) {\n      return node && node.firstChild && node.firstChild === node.lastChild && isPadding(node.firstChild);\n    };\n    var isEmptyOrPadded = function (elm) {\n      return !elm.firstChild || isListItemPadded(elm);\n    };\n    var trimListItems = function (elms) {\n      return elms.length > 0 && isEmptyOrPadded(elms[elms.length - 1]) ? elms.slice(0, -1) : elms;\n    };\n    var getParentLi = function (dom, node) {\n      var parentBlock = dom.getParent(node, dom.isBlock);\n      return parentBlock && parentBlock.nodeName === 'LI' ? parentBlock : null;\n    };\n    var isParentBlockLi = function (dom, node) {\n      return !!getParentLi(dom, node);\n    };\n    var getSplit = function (parentNode, rng) {\n      var beforeRng = rng.cloneRange();\n      var afterRng = rng.cloneRange();\n      beforeRng.setStartBefore(parentNode);\n      afterRng.setEndAfter(parentNode);\n      return [\n        beforeRng.cloneContents(),\n        afterRng.cloneContents()\n      ];\n    };\n    var findFirstIn = function (node, rootNode) {\n      var caretPos = CaretPosition.before(node);\n      var caretWalker = CaretWalker(rootNode);\n      var newCaretPos = caretWalker.next(caretPos);\n      return newCaretPos ? newCaretPos.toRange() : null;\n    };\n    var findLastOf = function (node, rootNode) {\n      var caretPos = CaretPosition.after(node);\n      var caretWalker = CaretWalker(rootNode);\n      var newCaretPos = caretWalker.prev(caretPos);\n      return newCaretPos ? newCaretPos.toRange() : null;\n    };\n    var insertMiddle = function (target, elms, rootNode, rng) {\n      var parts = getSplit(target, rng);\n      var parentElm = target.parentNode;\n      parentElm.insertBefore(parts[0], target);\n      Tools.each(elms, function (li) {\n        parentElm.insertBefore(li, target);\n      });\n      parentElm.insertBefore(parts[1], target);\n      parentElm.removeChild(target);\n      return findLastOf(elms[elms.length - 1], rootNode);\n    };\n    var insertBefore$1 = function (target, elms, rootNode) {\n      var parentElm = target.parentNode;\n      Tools.each(elms, function (elm) {\n        parentElm.insertBefore(elm, target);\n      });\n      return findFirstIn(target, rootNode);\n    };\n    var insertAfter$1 = function (target, elms, rootNode, dom) {\n      dom.insertAfter(elms.reverse(), target);\n      return findLastOf(elms[0], rootNode);\n    };\n    var insertAtCaret$1 = function (serializer, dom, rng, fragment) {\n      var domFragment = toDomFragment(dom, serializer, fragment);\n      var liTarget = getParentLi(dom, rng.startContainer);\n      var liElms = trimListItems(listItems(domFragment.firstChild));\n      var BEGINNING = 1, END = 2;\n      var rootNode = dom.getRoot();\n      var isAt = function (location) {\n        var caretPos = CaretPosition.fromRangeStart(rng);\n        var caretWalker = CaretWalker(dom.getRoot());\n        var newPos = location === BEGINNING ? caretWalker.prev(caretPos) : caretWalker.next(caretPos);\n        return newPos ? getParentLi(dom, newPos.getNode()) !== liTarget : true;\n      };\n      if (isAt(BEGINNING)) {\n        return insertBefore$1(liTarget, liElms, rootNode);\n      } else if (isAt(END)) {\n        return insertAfter$1(liTarget, liElms, rootNode, dom);\n      }\n      return insertMiddle(liTarget, liElms, rootNode, rng);\n    };\n\n    var trimOrPadLeftRight = function (dom, rng, html) {\n      var root = SugarElement.fromDom(dom.getRoot());\n      if (needsToBeNbspLeft(root, CaretPosition.fromRangeStart(rng))) {\n        html = html.replace(/^ /, '&nbsp;');\n      } else {\n        html = html.replace(/^&nbsp;/, ' ');\n      }\n      if (needsToBeNbspRight(root, CaretPosition.fromRangeEnd(rng))) {\n        html = html.replace(/(&nbsp;| )(<br( \\/)>)?$/, '&nbsp;');\n      } else {\n        html = html.replace(/&nbsp;(<br( \\/)?>)?$/, ' ');\n      }\n      return html;\n    };\n\n    var isTableCell$1 = isTableCell$5;\n    var isTableCellContentSelected = function (dom, rng, cell) {\n      if (cell !== null) {\n        var endCell = dom.getParent(rng.endContainer, isTableCell$1);\n        return cell === endCell && hasAllContentsSelected(SugarElement.fromDom(cell), rng);\n      } else {\n        return false;\n      }\n    };\n    var validInsertion = function (editor, value, parentNode) {\n      if (parentNode.getAttribute('data-mce-bogus') === 'all') {\n        parentNode.parentNode.insertBefore(editor.dom.createFragment(value), parentNode);\n      } else {\n        var node = parentNode.firstChild;\n        var node2 = parentNode.lastChild;\n        if (!node || node === node2 && node.nodeName === 'BR') {\n          editor.dom.setHTML(parentNode, value);\n        } else {\n          editor.selection.setContent(value);\n        }\n      }\n    };\n    var trimBrsFromTableCell = function (dom, elm) {\n      Optional.from(dom.getParent(elm, 'td,th')).map(SugarElement.fromDom).each(trimBlockTrailingBr);\n    };\n    var reduceInlineTextElements = function (editor, merge) {\n      var textInlineElements = editor.schema.getTextInlineElements();\n      var dom = editor.dom;\n      if (merge) {\n        var root_1 = editor.getBody();\n        var elementUtils_1 = ElementUtils(dom);\n        Tools.each(dom.select('*[data-mce-fragment]'), function (node) {\n          var isInline = isNonNullable(textInlineElements[node.nodeName.toLowerCase()]);\n          if (isInline && hasInheritableStyles(dom, node)) {\n            for (var parentNode = node.parentNode; isNonNullable(parentNode) && parentNode !== root_1; parentNode = parentNode.parentNode) {\n              var styleConflict = hasStyleConflict(dom, node, parentNode);\n              if (styleConflict) {\n                break;\n              }\n              if (elementUtils_1.compare(parentNode, node)) {\n                dom.remove(node, true);\n                break;\n              }\n            }\n          }\n        });\n      }\n    };\n    var markFragmentElements = function (fragment) {\n      var node = fragment;\n      while (node = node.walk()) {\n        if (node.type === 1) {\n          node.attr('data-mce-fragment', '1');\n        }\n      }\n    };\n    var unmarkFragmentElements = function (elm) {\n      Tools.each(elm.getElementsByTagName('*'), function (elm) {\n        elm.removeAttribute('data-mce-fragment');\n      });\n    };\n    var isPartOfFragment = function (node) {\n      return !!node.getAttribute('data-mce-fragment');\n    };\n    var canHaveChildren = function (editor, node) {\n      return node && !editor.schema.getShortEndedElements()[node.nodeName];\n    };\n    var moveSelectionToMarker = function (editor, marker) {\n      var nextRng;\n      var dom = editor.dom;\n      var selection = editor.selection;\n      if (!marker) {\n        return;\n      }\n      selection.scrollIntoView(marker);\n      var parentEditableElm = getContentEditableRoot$1(editor.getBody(), marker);\n      if (dom.getContentEditable(parentEditableElm) === 'false') {\n        dom.remove(marker);\n        selection.select(parentEditableElm);\n        return;\n      }\n      var rng = dom.createRng();\n      var node = marker.previousSibling;\n      if (isText$7(node)) {\n        rng.setStart(node, node.nodeValue.length);\n        if (!Env.ie) {\n          var node2 = marker.nextSibling;\n          if (isText$7(node2)) {\n            node.appendData(node2.data);\n            node2.parentNode.removeChild(node2);\n          }\n        }\n      } else {\n        rng.setStartBefore(marker);\n        rng.setEndBefore(marker);\n      }\n      var findNextCaretRng = function (rng) {\n        var caretPos = CaretPosition.fromRangeStart(rng);\n        var caretWalker = CaretWalker(editor.getBody());\n        caretPos = caretWalker.next(caretPos);\n        if (caretPos) {\n          return caretPos.toRange();\n        }\n      };\n      var parentBlock = dom.getParent(marker, dom.isBlock);\n      dom.remove(marker);\n      if (parentBlock && dom.isEmpty(parentBlock)) {\n        editor.$(parentBlock).empty();\n        rng.setStart(parentBlock, 0);\n        rng.setEnd(parentBlock, 0);\n        if (!isTableCell$1(parentBlock) && !isPartOfFragment(parentBlock) && (nextRng = findNextCaretRng(rng))) {\n          rng = nextRng;\n          dom.remove(parentBlock);\n        } else {\n          dom.add(parentBlock, dom.create('br', { 'data-mce-bogus': '1' }));\n        }\n      }\n      selection.setRng(rng);\n    };\n    var deleteSelectedContent = function (editor) {\n      var dom = editor.dom;\n      var rng = normalize(editor.selection.getRng());\n      editor.selection.setRng(rng);\n      var startCell = dom.getParent(rng.startContainer, isTableCell$1);\n      if (isTableCellContentSelected(dom, rng, startCell)) {\n        deleteCellContents(editor, rng, SugarElement.fromDom(startCell));\n      } else {\n        editor.getDoc().execCommand('Delete', false, null);\n      }\n    };\n    var insertHtmlAtCaret = function (editor, value, details) {\n      var parentNode;\n      var rng, node;\n      var selection = editor.selection;\n      var dom = editor.dom;\n      if (/^ | $/.test(value)) {\n        value = trimOrPadLeftRight(dom, selection.getRng(), value);\n      }\n      var parser = editor.parser;\n      var merge = details.merge;\n      var serializer = HtmlSerializer({ validate: shouldValidate(editor) }, editor.schema);\n      var bookmarkHtml = '<span id=\"mce_marker\" data-mce-type=\"bookmark\">&#xFEFF;</span>';\n      var args = editor.fire('BeforeSetContent', {\n        content: value,\n        format: 'html',\n        selection: true,\n        paste: details.paste\n      });\n      if (args.isDefaultPrevented()) {\n        editor.fire('SetContent', {\n          content: args.content,\n          format: 'html',\n          selection: true,\n          paste: details.paste\n        });\n        return;\n      }\n      value = args.content;\n      if (value.indexOf('{$caret}') === -1) {\n        value += '{$caret}';\n      }\n      value = value.replace(/\\{\\$caret\\}/, bookmarkHtml);\n      rng = selection.getRng();\n      var caretElement = rng.startContainer || (rng.parentElement ? rng.parentElement() : null);\n      var body = editor.getBody();\n      if (caretElement === body && selection.isCollapsed()) {\n        if (dom.isBlock(body.firstChild) && canHaveChildren(editor, body.firstChild) && dom.isEmpty(body.firstChild)) {\n          rng = dom.createRng();\n          rng.setStart(body.firstChild, 0);\n          rng.setEnd(body.firstChild, 0);\n          selection.setRng(rng);\n        }\n      }\n      if (!selection.isCollapsed()) {\n        deleteSelectedContent(editor);\n      }\n      parentNode = selection.getNode();\n      var parserArgs = {\n        context: parentNode.nodeName.toLowerCase(),\n        data: details.data,\n        insert: true\n      };\n      var fragment = parser.parse(value, parserArgs);\n      if (details.paste === true && isListFragment(editor.schema, fragment) && isParentBlockLi(dom, parentNode)) {\n        rng = insertAtCaret$1(serializer, dom, selection.getRng(), fragment);\n        selection.setRng(rng);\n        editor.fire('SetContent', args);\n        return;\n      }\n      markFragmentElements(fragment);\n      node = fragment.lastChild;\n      if (node.attr('id') === 'mce_marker') {\n        var marker = node;\n        for (node = node.prev; node; node = node.walk(true)) {\n          if (node.type === 3 || !dom.isBlock(node.name)) {\n            if (editor.schema.isValidChild(node.parent.name, 'span')) {\n              node.parent.insert(marker, node, node.name === 'br');\n            }\n            break;\n          }\n        }\n      }\n      editor._selectionOverrides.showBlockCaretContainer(parentNode);\n      if (!parserArgs.invalid) {\n        value = serializer.serialize(fragment);\n        validInsertion(editor, value, parentNode);\n      } else {\n        editor.selection.setContent(bookmarkHtml);\n        parentNode = selection.getNode();\n        var rootNode = editor.getBody();\n        if (parentNode.nodeType === 9) {\n          parentNode = node = rootNode;\n        } else {\n          node = parentNode;\n        }\n        while (node !== rootNode) {\n          parentNode = node;\n          node = node.parentNode;\n        }\n        value = parentNode === rootNode ? rootNode.innerHTML : dom.getOuterHTML(parentNode);\n        value = serializer.serialize(parser.parse(value.replace(/<span (id=\"mce_marker\"|id=mce_marker).+?<\\/span>/i, function () {\n          return serializer.serialize(fragment);\n        })));\n        if (parentNode === rootNode) {\n          dom.setHTML(rootNode, value);\n        } else {\n          dom.setOuterHTML(parentNode, value);\n        }\n      }\n      reduceInlineTextElements(editor, merge);\n      moveSelectionToMarker(editor, dom.get('mce_marker'));\n      unmarkFragmentElements(editor.getBody());\n      trimBrsFromTableCell(dom, selection.getStart());\n      editor.fire('SetContent', args);\n      editor.addVisual();\n    };\n\n    var traverse = function (node, fn) {\n      fn(node);\n      if (node.firstChild) {\n        traverse(node.firstChild, fn);\n      }\n      if (node.next) {\n        traverse(node.next, fn);\n      }\n    };\n    var findMatchingNodes = function (nodeFilters, attributeFilters, node) {\n      var nodeMatches = {};\n      var attrMatches = {};\n      var matches = [];\n      if (node.firstChild) {\n        traverse(node.firstChild, function (node) {\n          each$k(nodeFilters, function (filter) {\n            if (filter.name === node.name) {\n              if (nodeMatches[filter.name]) {\n                nodeMatches[filter.name].nodes.push(node);\n              } else {\n                nodeMatches[filter.name] = {\n                  filter: filter,\n                  nodes: [node]\n                };\n              }\n            }\n          });\n          each$k(attributeFilters, function (filter) {\n            if (typeof node.attr(filter.name) === 'string') {\n              if (attrMatches[filter.name]) {\n                attrMatches[filter.name].nodes.push(node);\n              } else {\n                attrMatches[filter.name] = {\n                  filter: filter,\n                  nodes: [node]\n                };\n              }\n            }\n          });\n        });\n      }\n      for (var name_1 in nodeMatches) {\n        if (has$2(nodeMatches, name_1)) {\n          matches.push(nodeMatches[name_1]);\n        }\n      }\n      for (var name_2 in attrMatches) {\n        if (has$2(attrMatches, name_2)) {\n          matches.push(attrMatches[name_2]);\n        }\n      }\n      return matches;\n    };\n    var filter$1 = function (nodeFilters, attributeFilters, node) {\n      var matches = findMatchingNodes(nodeFilters, attributeFilters, node);\n      each$k(matches, function (match) {\n        each$k(match.filter.callbacks, function (callback) {\n          callback(match.nodes, match.filter.name, {});\n        });\n      });\n    };\n\n    var defaultFormat$1 = 'html';\n    var isTreeNode = function (content) {\n      return content instanceof AstNode;\n    };\n    var moveSelection = function (editor) {\n      if (hasFocus(editor)) {\n        firstPositionIn(editor.getBody()).each(function (pos) {\n          var node = pos.getNode();\n          var caretPos = isTable$3(node) ? firstPositionIn(node).getOr(pos) : pos;\n          editor.selection.setRng(caretPos.toRange());\n        });\n      }\n    };\n    var setEditorHtml = function (editor, html, noSelection) {\n      editor.dom.setHTML(editor.getBody(), html);\n      if (noSelection !== true) {\n        moveSelection(editor);\n      }\n    };\n    var setContentString = function (editor, body, content, args) {\n      if (content.length === 0 || /^\\s+$/.test(content)) {\n        var padd = '<br data-mce-bogus=\"1\">';\n        if (body.nodeName === 'TABLE') {\n          content = '<tr><td>' + padd + '</td></tr>';\n        } else if (/^(UL|OL)$/.test(body.nodeName)) {\n          content = '<li>' + padd + '</li>';\n        }\n        var forcedRootBlockName = getForcedRootBlock(editor);\n        if (forcedRootBlockName && editor.schema.isValidChild(body.nodeName.toLowerCase(), forcedRootBlockName.toLowerCase())) {\n          content = padd;\n          content = editor.dom.createHTML(forcedRootBlockName, getForcedRootBlockAttrs(editor), content);\n        } else if (!content) {\n          content = '<br data-mce-bogus=\"1\">';\n        }\n        setEditorHtml(editor, content, args.no_selection);\n        editor.fire('SetContent', args);\n      } else {\n        if (args.format !== 'raw') {\n          content = HtmlSerializer({ validate: editor.validate }, editor.schema).serialize(editor.parser.parse(content, {\n            isRootContent: true,\n            insert: true\n          }));\n        }\n        args.content = isWsPreserveElement(SugarElement.fromDom(body)) ? content : Tools.trim(content);\n        setEditorHtml(editor, args.content, args.no_selection);\n        if (!args.no_events) {\n          editor.fire('SetContent', args);\n        }\n      }\n      return args.content;\n    };\n    var setContentTree = function (editor, body, content, args) {\n      filter$1(editor.parser.getNodeFilters(), editor.parser.getAttributeFilters(), content);\n      var html = HtmlSerializer({ validate: editor.validate }, editor.schema).serialize(content);\n      args.content = isWsPreserveElement(SugarElement.fromDom(body)) ? html : Tools.trim(html);\n      setEditorHtml(editor, args.content, args.no_selection);\n      if (!args.no_events) {\n        editor.fire('SetContent', args);\n      }\n      return content;\n    };\n    var setupArgs$2 = function (args, content) {\n      return __assign(__assign({ format: defaultFormat$1 }, args), {\n        set: true,\n        content: isTreeNode(content) ? '' : content\n      });\n    };\n    var setContentInternal = function (editor, content, args) {\n      var defaultedArgs = setupArgs$2(args, content);\n      var updatedArgs = args.no_events ? defaultedArgs : editor.fire('BeforeSetContent', defaultedArgs);\n      if (!isTreeNode(content)) {\n        content = updatedArgs.content;\n      }\n      return Optional.from(editor.getBody()).fold(constant(content), function (body) {\n        return isTreeNode(content) ? setContentTree(editor, body, content, updatedArgs) : setContentString(editor, body, content, updatedArgs);\n      });\n    };\n\n    var sibling = function (scope, predicate) {\n      return sibling$2(scope, predicate).isSome();\n    };\n\n    var ensureIsRoot = function (isRoot) {\n      return isFunction(isRoot) ? isRoot : never;\n    };\n    var ancestor = function (scope, transform, isRoot) {\n      var element = scope.dom;\n      var stop = ensureIsRoot(isRoot);\n      while (element.parentNode) {\n        element = element.parentNode;\n        var el = SugarElement.fromDom(element);\n        var transformed = transform(el);\n        if (transformed.isSome()) {\n          return transformed;\n        } else if (stop(el)) {\n          break;\n        }\n      }\n      return Optional.none();\n    };\n    var closest$1 = function (scope, transform, isRoot) {\n      var current = transform(scope);\n      var stop = ensureIsRoot(isRoot);\n      return current.orThunk(function () {\n        return stop(scope) ? Optional.none() : ancestor(scope, transform, stop);\n      });\n    };\n\n    var isEq$3 = isEq$5;\n    var matchesUnInheritedFormatSelector = function (ed, node, name) {\n      var formatList = ed.formatter.get(name);\n      if (formatList) {\n        for (var i = 0; i < formatList.length; i++) {\n          var format = formatList[i];\n          if (isSelectorFormat(format) && format.inherit === false && ed.dom.is(node, format.selector)) {\n            return true;\n          }\n        }\n      }\n      return false;\n    };\n    var matchParents = function (editor, node, name, vars, similar) {\n      var root = editor.dom.getRoot();\n      if (node === root) {\n        return false;\n      }\n      node = editor.dom.getParent(node, function (node) {\n        if (matchesUnInheritedFormatSelector(editor, node, name)) {\n          return true;\n        }\n        return node.parentNode === root || !!matchNode(editor, node, name, vars, true);\n      });\n      return !!matchNode(editor, node, name, vars, similar);\n    };\n    var matchName$1 = function (dom, node, format) {\n      if (isEq$3(node, format.inline)) {\n        return true;\n      }\n      if (isEq$3(node, format.block)) {\n        return true;\n      }\n      if (format.selector) {\n        return node.nodeType === 1 && dom.is(node, format.selector);\n      }\n    };\n    var matchItems = function (dom, node, format, itemName, similar, vars) {\n      var items = format[itemName];\n      if (isFunction(format.onmatch)) {\n        return format.onmatch(node, format, itemName);\n      }\n      if (items) {\n        if (isUndefined(items.length)) {\n          for (var key in items) {\n            if (has$2(items, key)) {\n              var value = itemName === 'attributes' ? dom.getAttrib(node, key) : getStyle(dom, node, key);\n              var expectedValue = replaceVars(items[key], vars);\n              var isEmptyValue = isNullable(value) || isEmpty$3(value);\n              if (isEmptyValue && isNullable(expectedValue)) {\n                continue;\n              }\n              if (similar && isEmptyValue && !format.exact) {\n                return false;\n              }\n              if ((!similar || format.exact) && !isEq$3(value, normalizeStyleValue(dom, expectedValue, key))) {\n                return false;\n              }\n            }\n          }\n        } else {\n          for (var i = 0; i < items.length; i++) {\n            if (itemName === 'attributes' ? dom.getAttrib(node, items[i]) : getStyle(dom, node, items[i])) {\n              return true;\n            }\n          }\n        }\n      }\n      return true;\n    };\n    var matchNode = function (ed, node, name, vars, similar) {\n      var formatList = ed.formatter.get(name);\n      var dom = ed.dom;\n      if (formatList && node) {\n        for (var i = 0; i < formatList.length; i++) {\n          var format = formatList[i];\n          if (matchName$1(ed.dom, node, format) && matchItems(dom, node, format, 'attributes', similar, vars) && matchItems(dom, node, format, 'styles', similar, vars)) {\n            var classes = format.classes;\n            if (classes) {\n              for (var x = 0; x < classes.length; x++) {\n                if (!ed.dom.hasClass(node, replaceVars(classes[x], vars))) {\n                  return;\n                }\n              }\n            }\n            return format;\n          }\n        }\n      }\n    };\n    var match$2 = function (editor, name, vars, node, similar) {\n      if (node) {\n        return matchParents(editor, node, name, vars, similar);\n      }\n      node = editor.selection.getNode();\n      if (matchParents(editor, node, name, vars, similar)) {\n        return true;\n      }\n      var startNode = editor.selection.getStart();\n      if (startNode !== node) {\n        if (matchParents(editor, startNode, name, vars, similar)) {\n          return true;\n        }\n      }\n      return false;\n    };\n    var matchAll = function (editor, names, vars) {\n      var matchedFormatNames = [];\n      var checkedMap = {};\n      var startElement = editor.selection.getStart();\n      editor.dom.getParent(startElement, function (node) {\n        for (var i = 0; i < names.length; i++) {\n          var name_1 = names[i];\n          if (!checkedMap[name_1] && matchNode(editor, node, name_1, vars)) {\n            checkedMap[name_1] = true;\n            matchedFormatNames.push(name_1);\n          }\n        }\n      }, editor.dom.getRoot());\n      return matchedFormatNames;\n    };\n    var closest = function (editor, names) {\n      var isRoot = function (elm) {\n        return eq(elm, SugarElement.fromDom(editor.getBody()));\n      };\n      var match = function (elm, name) {\n        return matchNode(editor, elm.dom, name) ? Optional.some(name) : Optional.none();\n      };\n      return Optional.from(editor.selection.getStart(true)).bind(function (rawElm) {\n        return closest$1(SugarElement.fromDom(rawElm), function (elm) {\n          return findMap(names, function (name) {\n            return match(elm, name);\n          });\n        }, isRoot);\n      }).getOrNull();\n    };\n    var canApply = function (editor, name) {\n      var formatList = editor.formatter.get(name);\n      var dom = editor.dom;\n      if (formatList) {\n        var startNode = editor.selection.getStart();\n        var parents = getParents$2(dom, startNode);\n        for (var x = formatList.length - 1; x >= 0; x--) {\n          var format = formatList[x];\n          if (!isSelectorFormat(format) || isNonNullable(format.defaultBlock)) {\n            return true;\n          }\n          for (var i = parents.length - 1; i >= 0; i--) {\n            if (dom.is(parents[i], format.selector)) {\n              return true;\n            }\n          }\n        }\n      }\n      return false;\n    };\n    var matchAllOnNode = function (editor, node, formatNames) {\n      return foldl(formatNames, function (acc, name) {\n        var matchSimilar = isVariableFormatName(editor, name);\n        if (editor.formatter.matchNode(node, name, {}, matchSimilar)) {\n          return acc.concat([name]);\n        } else {\n          return acc;\n        }\n      }, []);\n    };\n\n    var ZWSP = ZWSP$1, CARET_ID = '_mce_caret';\n    var importNode = function (ownerDocument, node) {\n      return ownerDocument.importNode(node, true);\n    };\n    var getEmptyCaretContainers = function (node) {\n      var nodes = [];\n      while (node) {\n        if (node.nodeType === 3 && node.nodeValue !== ZWSP || node.childNodes.length > 1) {\n          return [];\n        }\n        if (node.nodeType === 1) {\n          nodes.push(node);\n        }\n        node = node.firstChild;\n      }\n      return nodes;\n    };\n    var isCaretContainerEmpty = function (node) {\n      return getEmptyCaretContainers(node).length > 0;\n    };\n    var findFirstTextNode = function (node) {\n      if (node) {\n        var walker = new DomTreeWalker(node, node);\n        for (node = walker.current(); node; node = walker.next()) {\n          if (isText$7(node)) {\n            return node;\n          }\n        }\n      }\n      return null;\n    };\n    var createCaretContainer = function (fill) {\n      var caretContainer = SugarElement.fromTag('span');\n      setAll$1(caretContainer, {\n        'id': CARET_ID,\n        'data-mce-bogus': '1',\n        'data-mce-type': 'format-caret'\n      });\n      if (fill) {\n        append$1(caretContainer, SugarElement.fromText(ZWSP));\n      }\n      return caretContainer;\n    };\n    var trimZwspFromCaretContainer = function (caretContainerNode) {\n      var textNode = findFirstTextNode(caretContainerNode);\n      if (textNode && textNode.nodeValue.charAt(0) === ZWSP) {\n        textNode.deleteData(0, 1);\n      }\n      return textNode;\n    };\n    var removeCaretContainerNode = function (editor, node, moveCaret) {\n      if (moveCaret === void 0) {\n        moveCaret = true;\n      }\n      var dom = editor.dom, selection = editor.selection;\n      if (isCaretContainerEmpty(node)) {\n        deleteElement$2(editor, false, SugarElement.fromDom(node), moveCaret);\n      } else {\n        var rng = selection.getRng();\n        var block = dom.getParent(node, dom.isBlock);\n        var startContainer = rng.startContainer;\n        var startOffset = rng.startOffset;\n        var endContainer = rng.endContainer;\n        var endOffset = rng.endOffset;\n        var textNode = trimZwspFromCaretContainer(node);\n        dom.remove(node, true);\n        if (startContainer === textNode && startOffset > 0) {\n          rng.setStart(textNode, startOffset - 1);\n        }\n        if (endContainer === textNode && endOffset > 0) {\n          rng.setEnd(textNode, endOffset - 1);\n        }\n        if (block && dom.isEmpty(block)) {\n          fillWithPaddingBr(SugarElement.fromDom(block));\n        }\n        selection.setRng(rng);\n      }\n    };\n    var removeCaretContainer = function (editor, node, moveCaret) {\n      if (moveCaret === void 0) {\n        moveCaret = true;\n      }\n      var dom = editor.dom, selection = editor.selection;\n      if (!node) {\n        node = getParentCaretContainer(editor.getBody(), selection.getStart());\n        if (!node) {\n          while (node = dom.get(CARET_ID)) {\n            removeCaretContainerNode(editor, node, false);\n          }\n        }\n      } else {\n        removeCaretContainerNode(editor, node, moveCaret);\n      }\n    };\n    var insertCaretContainerNode = function (editor, caretContainer, formatNode) {\n      var dom = editor.dom, block = dom.getParent(formatNode, curry(isTextBlock$1, editor));\n      if (block && dom.isEmpty(block)) {\n        formatNode.parentNode.replaceChild(caretContainer, formatNode);\n      } else {\n        removeTrailingBr(SugarElement.fromDom(formatNode));\n        if (dom.isEmpty(formatNode)) {\n          formatNode.parentNode.replaceChild(caretContainer, formatNode);\n        } else {\n          dom.insertAfter(caretContainer, formatNode);\n        }\n      }\n    };\n    var appendNode = function (parentNode, node) {\n      parentNode.appendChild(node);\n      return node;\n    };\n    var insertFormatNodesIntoCaretContainer = function (formatNodes, caretContainer) {\n      var innerMostFormatNode = foldr(formatNodes, function (parentNode, formatNode) {\n        return appendNode(parentNode, formatNode.cloneNode(false));\n      }, caretContainer);\n      return appendNode(innerMostFormatNode, innerMostFormatNode.ownerDocument.createTextNode(ZWSP));\n    };\n    var cleanFormatNode = function (editor, caretContainer, formatNode, name, vars, similar) {\n      var formatter = editor.formatter;\n      var dom = editor.dom;\n      var validFormats = filter$4(keys(formatter.get()), function (formatName) {\n        return formatName !== name && !contains$2(formatName, 'removeformat');\n      });\n      var matchedFormats = matchAllOnNode(editor, formatNode, validFormats);\n      var uniqueFormats = filter$4(matchedFormats, function (fmtName) {\n        return !areSimilarFormats(editor, fmtName, name);\n      });\n      if (uniqueFormats.length > 0) {\n        var clonedFormatNode = formatNode.cloneNode(false);\n        dom.add(caretContainer, clonedFormatNode);\n        formatter.remove(name, vars, clonedFormatNode, similar);\n        dom.remove(clonedFormatNode);\n        return Optional.some(clonedFormatNode);\n      } else {\n        return Optional.none();\n      }\n    };\n    var applyCaretFormat = function (editor, name, vars) {\n      var caretContainer, textNode;\n      var selection = editor.selection;\n      var selectionRng = selection.getRng();\n      var offset = selectionRng.startOffset;\n      var container = selectionRng.startContainer;\n      var text = container.nodeValue;\n      caretContainer = getParentCaretContainer(editor.getBody(), selection.getStart());\n      if (caretContainer) {\n        textNode = findFirstTextNode(caretContainer);\n      }\n      var wordcharRegex = /[^\\s\\u00a0\\u00ad\\u200b\\ufeff]/;\n      if (text && offset > 0 && offset < text.length && wordcharRegex.test(text.charAt(offset)) && wordcharRegex.test(text.charAt(offset - 1))) {\n        var bookmark = selection.getBookmark();\n        selectionRng.collapse(true);\n        var rng = expandRng(editor, selectionRng, editor.formatter.get(name));\n        rng = split(rng);\n        editor.formatter.apply(name, vars, rng);\n        selection.moveToBookmark(bookmark);\n      } else {\n        if (!caretContainer || textNode.nodeValue !== ZWSP) {\n          caretContainer = importNode(editor.getDoc(), createCaretContainer(true).dom);\n          textNode = caretContainer.firstChild;\n          selectionRng.insertNode(caretContainer);\n          offset = 1;\n          editor.formatter.apply(name, vars, caretContainer);\n        } else {\n          editor.formatter.apply(name, vars, caretContainer);\n        }\n        selection.setCursorLocation(textNode, offset);\n      }\n    };\n    var removeCaretFormat = function (editor, name, vars, similar) {\n      var dom = editor.dom;\n      var selection = editor.selection;\n      var hasContentAfter, node, formatNode;\n      var parents = [];\n      var rng = selection.getRng();\n      var container = rng.startContainer;\n      var offset = rng.startOffset;\n      node = container;\n      if (container.nodeType === 3) {\n        if (offset !== container.nodeValue.length) {\n          hasContentAfter = true;\n        }\n        node = node.parentNode;\n      }\n      while (node) {\n        if (matchNode(editor, node, name, vars, similar)) {\n          formatNode = node;\n          break;\n        }\n        if (node.nextSibling) {\n          hasContentAfter = true;\n        }\n        parents.push(node);\n        node = node.parentNode;\n      }\n      if (!formatNode) {\n        return;\n      }\n      if (hasContentAfter) {\n        var bookmark = selection.getBookmark();\n        rng.collapse(true);\n        var expandedRng = expandRng(editor, rng, editor.formatter.get(name), true);\n        expandedRng = split(expandedRng);\n        editor.formatter.remove(name, vars, expandedRng, similar);\n        selection.moveToBookmark(bookmark);\n      } else {\n        var caretContainer = getParentCaretContainer(editor.getBody(), formatNode);\n        var newCaretContainer = createCaretContainer(false).dom;\n        insertCaretContainerNode(editor, newCaretContainer, caretContainer !== null ? caretContainer : formatNode);\n        var cleanedFormatNode = cleanFormatNode(editor, newCaretContainer, formatNode, name, vars, similar);\n        var caretTextNode = insertFormatNodesIntoCaretContainer(parents.concat(cleanedFormatNode.toArray()), newCaretContainer);\n        removeCaretContainerNode(editor, caretContainer, false);\n        selection.setCursorLocation(caretTextNode, 1);\n        if (dom.isEmpty(formatNode)) {\n          dom.remove(formatNode);\n        }\n      }\n    };\n    var disableCaretContainer = function (editor, keyCode) {\n      var selection = editor.selection, body = editor.getBody();\n      removeCaretContainer(editor, null, false);\n      if ((keyCode === 8 || keyCode === 46) && selection.isCollapsed() && selection.getStart().innerHTML === ZWSP) {\n        removeCaretContainer(editor, getParentCaretContainer(body, selection.getStart()));\n      }\n      if (keyCode === 37 || keyCode === 39) {\n        removeCaretContainer(editor, getParentCaretContainer(body, selection.getStart()));\n      }\n    };\n    var setup$k = function (editor) {\n      editor.on('mouseup keydown', function (e) {\n        disableCaretContainer(editor, e.keyCode);\n      });\n    };\n    var replaceWithCaretFormat = function (targetNode, formatNodes) {\n      var caretContainer = createCaretContainer(false);\n      var innerMost = insertFormatNodesIntoCaretContainer(formatNodes, caretContainer.dom);\n      before$4(SugarElement.fromDom(targetNode), caretContainer);\n      remove$7(SugarElement.fromDom(targetNode));\n      return CaretPosition(innerMost, 0);\n    };\n    var isFormatElement = function (editor, element) {\n      var inlineElements = editor.schema.getTextInlineElements();\n      return has$2(inlineElements, name(element)) && !isCaretNode(element.dom) && !isBogus$2(element.dom);\n    };\n    var isEmptyCaretFormatElement = function (element) {\n      return isCaretNode(element.dom) && isCaretContainerEmpty(element.dom);\n    };\n\n    var postProcessHooks = {};\n    var filter = filter$2;\n    var each$b = each$i;\n    var addPostProcessHook = function (name, hook) {\n      var hooks = postProcessHooks[name];\n      if (!hooks) {\n        postProcessHooks[name] = [];\n      }\n      postProcessHooks[name].push(hook);\n    };\n    var postProcess$1 = function (name, editor) {\n      each$b(postProcessHooks[name], function (hook) {\n        hook(editor);\n      });\n    };\n    addPostProcessHook('pre', function (editor) {\n      var rng = editor.selection.getRng();\n      var blocks;\n      var hasPreSibling = function (pre) {\n        return isPre(pre.previousSibling) && indexOf$1(blocks, pre.previousSibling) !== -1;\n      };\n      var joinPre = function (pre1, pre2) {\n        DomQuery(pre2).remove();\n        DomQuery(pre1).append('<br><br>').append(pre2.childNodes);\n      };\n      var isPre = matchNodeNames(['pre']);\n      if (!rng.collapsed) {\n        blocks = editor.selection.getSelectedBlocks();\n        each$b(filter(filter(blocks, isPre), hasPreSibling), function (pre) {\n          joinPre(pre.previousSibling, pre);\n        });\n      }\n    });\n\n    var each$a = Tools.each;\n    var isElementNode$1 = function (node) {\n      return isElement$5(node) && !isBookmarkNode$1(node) && !isCaretNode(node) && !isBogus$2(node);\n    };\n    var findElementSibling = function (node, siblingName) {\n      for (var sibling = node; sibling; sibling = sibling[siblingName]) {\n        if (isText$7(sibling) && isNotEmpty(sibling.data)) {\n          return node;\n        }\n        if (isElement$5(sibling) && !isBookmarkNode$1(sibling)) {\n          return sibling;\n        }\n      }\n      return node;\n    };\n    var mergeSiblingsNodes = function (dom, prev, next) {\n      var elementUtils = ElementUtils(dom);\n      if (prev && next) {\n        prev = findElementSibling(prev, 'previousSibling');\n        next = findElementSibling(next, 'nextSibling');\n        if (elementUtils.compare(prev, next)) {\n          for (var sibling = prev.nextSibling; sibling && sibling !== next;) {\n            var tmpSibling = sibling;\n            sibling = sibling.nextSibling;\n            prev.appendChild(tmpSibling);\n          }\n          dom.remove(next);\n          Tools.each(Tools.grep(next.childNodes), function (node) {\n            prev.appendChild(node);\n          });\n          return prev;\n        }\n      }\n      return next;\n    };\n    var mergeSiblings = function (dom, format, vars, node) {\n      if (node && format.merge_siblings !== false) {\n        var newNode = mergeSiblingsNodes(dom, getNonWhiteSpaceSibling(node), node);\n        mergeSiblingsNodes(dom, newNode, getNonWhiteSpaceSibling(newNode, true));\n      }\n    };\n    var clearChildStyles = function (dom, format, node) {\n      if (format.clear_child_styles) {\n        var selector = format.links ? '*:not(a)' : '*';\n        each$a(dom.select(selector, node), function (node) {\n          if (isElementNode$1(node)) {\n            each$a(format.styles, function (value, name) {\n              dom.setStyle(node, name, '');\n            });\n          }\n        });\n      }\n    };\n    var processChildElements = function (node, filter, process) {\n      each$a(node.childNodes, function (node) {\n        if (isElementNode$1(node)) {\n          if (filter(node)) {\n            process(node);\n          }\n          if (node.hasChildNodes()) {\n            processChildElements(node, filter, process);\n          }\n        }\n      });\n    };\n    var unwrapEmptySpan = function (dom, node) {\n      if (node.nodeName === 'SPAN' && dom.getAttribs(node).length === 0) {\n        dom.remove(node, true);\n      }\n    };\n    var hasStyle = function (dom, name) {\n      return function (node) {\n        return !!(node && getStyle(dom, node, name));\n      };\n    };\n    var applyStyle = function (dom, name, value) {\n      return function (node) {\n        dom.setStyle(node, name, value);\n        if (node.getAttribute('style') === '') {\n          node.removeAttribute('style');\n        }\n        unwrapEmptySpan(dom, node);\n      };\n    };\n\n    var removeResult = Adt.generate([\n      { keep: [] },\n      { rename: ['name'] },\n      { removed: [] }\n    ]);\n    var MCE_ATTR_RE = /^(src|href|style)$/;\n    var each$9 = Tools.each;\n    var isEq$2 = isEq$5;\n    var isTableCellOrRow = function (node) {\n      return /^(TR|TH|TD)$/.test(node.nodeName);\n    };\n    var isChildOfInlineParent = function (dom, node, parent) {\n      return dom.isChildOf(node, parent) && node !== parent && !dom.isBlock(parent);\n    };\n    var getContainer = function (ed, rng, start) {\n      var container = rng[start ? 'startContainer' : 'endContainer'];\n      var offset = rng[start ? 'startOffset' : 'endOffset'];\n      if (isElement$5(container)) {\n        var lastIdx = container.childNodes.length - 1;\n        if (!start && offset) {\n          offset--;\n        }\n        container = container.childNodes[offset > lastIdx ? lastIdx : offset];\n      }\n      if (isText$7(container) && start && offset >= container.nodeValue.length) {\n        container = new DomTreeWalker(container, ed.getBody()).next() || container;\n      }\n      if (isText$7(container) && !start && offset === 0) {\n        container = new DomTreeWalker(container, ed.getBody()).prev() || container;\n      }\n      return container;\n    };\n    var normalizeTableSelection = function (node, start) {\n      var prop = start ? 'firstChild' : 'lastChild';\n      if (isTableCellOrRow(node) && node[prop]) {\n        var childNode = node[prop];\n        if (node.nodeName === 'TR') {\n          return childNode[prop] || childNode;\n        } else {\n          return childNode;\n        }\n      }\n      return node;\n    };\n    var wrap$1 = function (dom, node, name, attrs) {\n      var wrapper = dom.create(name, attrs);\n      node.parentNode.insertBefore(wrapper, node);\n      wrapper.appendChild(node);\n      return wrapper;\n    };\n    var wrapWithSiblings = function (dom, node, next, name, attrs) {\n      var start = SugarElement.fromDom(node);\n      var wrapper = SugarElement.fromDom(dom.create(name, attrs));\n      var siblings = next ? nextSiblings(start) : prevSiblings(start);\n      append(wrapper, siblings);\n      if (next) {\n        before$4(start, wrapper);\n        prepend(wrapper, start);\n      } else {\n        after$3(start, wrapper);\n        append$1(wrapper, start);\n      }\n      return wrapper.dom;\n    };\n    var matchName = function (dom, node, format) {\n      if (isInlineFormat(format) && isEq$2(node, format.inline)) {\n        return true;\n      }\n      if (isBlockFormat(format) && isEq$2(node, format.block)) {\n        return true;\n      }\n      if (isSelectorFormat(format)) {\n        return isElement$5(node) && dom.is(node, format.selector);\n      }\n    };\n    var isColorFormatAndAnchor = function (node, format) {\n      return format.links && node.nodeName === 'A';\n    };\n    var find = function (dom, node, next, inc) {\n      var sibling = getNonWhiteSpaceSibling(node, next, inc);\n      return isNullable(sibling) || sibling.nodeName === 'BR' || dom.isBlock(sibling);\n    };\n    var removeNode = function (ed, node, format) {\n      var parentNode = node.parentNode;\n      var rootBlockElm;\n      var dom = ed.dom, forcedRootBlock = getForcedRootBlock(ed);\n      if (isBlockFormat(format)) {\n        if (!forcedRootBlock) {\n          if (dom.isBlock(node) && !dom.isBlock(parentNode)) {\n            if (!find(dom, node, false) && !find(dom, node.firstChild, true, true)) {\n              node.insertBefore(dom.create('br'), node.firstChild);\n            }\n            if (!find(dom, node, true) && !find(dom, node.lastChild, false, true)) {\n              node.appendChild(dom.create('br'));\n            }\n          }\n        } else {\n          if (parentNode === dom.getRoot()) {\n            if (!format.list_block || !isEq$2(node, format.list_block)) {\n              each$k(from(node.childNodes), function (node) {\n                if (isValid(ed, forcedRootBlock, node.nodeName.toLowerCase())) {\n                  if (!rootBlockElm) {\n                    rootBlockElm = wrap$1(dom, node, forcedRootBlock);\n                    dom.setAttribs(rootBlockElm, ed.settings.forced_root_block_attrs);\n                  } else {\n                    rootBlockElm.appendChild(node);\n                  }\n                } else {\n                  rootBlockElm = null;\n                }\n              });\n            }\n          }\n        }\n      }\n      if (isMixedFormat(format) && !isEq$2(format.inline, node)) {\n        return;\n      }\n      dom.remove(node, true);\n    };\n    var removeFormatInternal = function (ed, format, vars, node, compareNode) {\n      var stylesModified;\n      var dom = ed.dom;\n      if (!matchName(dom, node, format) && !isColorFormatAndAnchor(node, format)) {\n        return removeResult.keep();\n      }\n      var elm = node;\n      if (isInlineFormat(format) && format.remove === 'all' && isArray$1(format.preserve_attributes)) {\n        var attrsToPreserve = filter$4(dom.getAttribs(elm), function (attr) {\n          return contains$3(format.preserve_attributes, attr.name.toLowerCase());\n        });\n        dom.removeAllAttribs(elm);\n        each$k(attrsToPreserve, function (attr) {\n          return dom.setAttrib(elm, attr.name, attr.value);\n        });\n        if (attrsToPreserve.length > 0) {\n          return removeResult.rename('span');\n        }\n      }\n      if (format.remove !== 'all') {\n        each$9(format.styles, function (value, name) {\n          value = normalizeStyleValue(dom, replaceVars(value, vars), name + '');\n          if (isNumber(name)) {\n            name = value;\n            compareNode = null;\n          }\n          if (format.remove_similar || (!compareNode || isEq$2(getStyle(dom, compareNode, name), value))) {\n            dom.setStyle(elm, name, '');\n          }\n          stylesModified = true;\n        });\n        if (stylesModified && dom.getAttrib(elm, 'style') === '') {\n          elm.removeAttribute('style');\n          elm.removeAttribute('data-mce-style');\n        }\n        each$9(format.attributes, function (value, name) {\n          var valueOut;\n          value = replaceVars(value, vars);\n          if (isNumber(name)) {\n            name = value;\n            compareNode = null;\n          }\n          if (format.remove_similar || (!compareNode || isEq$2(dom.getAttrib(compareNode, name), value))) {\n            if (name === 'class') {\n              value = dom.getAttrib(elm, name);\n              if (value) {\n                valueOut = '';\n                each$k(value.split(/\\s+/), function (cls) {\n                  if (/mce\\-\\w+/.test(cls)) {\n                    valueOut += (valueOut ? ' ' : '') + cls;\n                  }\n                });\n                if (valueOut) {\n                  dom.setAttrib(elm, name, valueOut);\n                  return;\n                }\n              }\n            }\n            if (MCE_ATTR_RE.test(name)) {\n              elm.removeAttribute('data-mce-' + name);\n            }\n            if (name === 'style' && matchNodeNames(['li'])(elm) && dom.getStyle(elm, 'list-style-type') === 'none') {\n              elm.removeAttribute(name);\n              dom.setStyle(elm, 'list-style-type', 'none');\n              return;\n            }\n            if (name === 'class') {\n              elm.removeAttribute('className');\n            }\n            elm.removeAttribute(name);\n          }\n        });\n        each$9(format.classes, function (value) {\n          value = replaceVars(value, vars);\n          if (!compareNode || dom.hasClass(compareNode, value)) {\n            dom.removeClass(elm, value);\n          }\n        });\n        var attrs = dom.getAttribs(elm);\n        for (var i = 0; i < attrs.length; i++) {\n          var attrName = attrs[i].nodeName;\n          if (attrName.indexOf('_') !== 0 && attrName.indexOf('data-') !== 0) {\n            return removeResult.keep();\n          }\n        }\n      }\n      if (format.remove !== 'none') {\n        removeNode(ed, elm, format);\n        return removeResult.removed();\n      }\n      return removeResult.keep();\n    };\n    var removeFormat$1 = function (ed, format, vars, node, compareNode) {\n      return removeFormatInternal(ed, format, vars, node, compareNode).fold(never, function (newName) {\n        ed.dom.rename(node, newName);\n        return true;\n      }, always);\n    };\n    var findFormatRoot = function (editor, container, name, vars, similar) {\n      var formatRoot;\n      each$k(getParents$2(editor.dom, container.parentNode).reverse(), function (parent) {\n        if (!formatRoot && parent.id !== '_start' && parent.id !== '_end') {\n          var format = matchNode(editor, parent, name, vars, similar);\n          if (format && format.split !== false) {\n            formatRoot = parent;\n          }\n        }\n      });\n      return formatRoot;\n    };\n    var removeFormatFromClone = function (editor, format, vars, clone) {\n      return removeFormatInternal(editor, format, vars, clone, clone).fold(constant(clone), function (newName) {\n        var fragment = editor.dom.createFragment();\n        fragment.appendChild(clone);\n        return editor.dom.rename(clone, newName);\n      }, constant(null));\n    };\n    var wrapAndSplit = function (editor, formatList, formatRoot, container, target, split, format, vars) {\n      var clone, lastClone, firstClone;\n      var dom = editor.dom;\n      if (formatRoot) {\n        var formatRootParent = formatRoot.parentNode;\n        for (var parent_1 = container.parentNode; parent_1 && parent_1 !== formatRootParent; parent_1 = parent_1.parentNode) {\n          clone = dom.clone(parent_1, false);\n          for (var i = 0; i < formatList.length; i++) {\n            clone = removeFormatFromClone(editor, formatList[i], vars, clone);\n            if (clone === null) {\n              break;\n            }\n          }\n          if (clone) {\n            if (lastClone) {\n              clone.appendChild(lastClone);\n            }\n            if (!firstClone) {\n              firstClone = clone;\n            }\n            lastClone = clone;\n          }\n        }\n        if (split && (!format.mixed || !dom.isBlock(formatRoot))) {\n          container = dom.split(formatRoot, container);\n        }\n        if (lastClone) {\n          target.parentNode.insertBefore(lastClone, target);\n          firstClone.appendChild(target);\n          if (isInlineFormat(format)) {\n            mergeSiblings(dom, format, vars, lastClone);\n          }\n        }\n      }\n      return container;\n    };\n    var remove$1 = function (ed, name, vars, node, similar) {\n      var formatList = ed.formatter.get(name);\n      var format = formatList[0];\n      var contentEditable = true;\n      var dom = ed.dom;\n      var selection = ed.selection;\n      var splitToFormatRoot = function (container) {\n        var formatRoot = findFormatRoot(ed, container, name, vars, similar);\n        return wrapAndSplit(ed, formatList, formatRoot, container, container, true, format, vars);\n      };\n      var isRemoveBookmarkNode = function (node) {\n        return isBookmarkNode$1(node) && isElement$5(node) && (node.id === '_start' || node.id === '_end');\n      };\n      var removeNodeFormat = function (node) {\n        return exists(formatList, function (fmt) {\n          return removeFormat$1(ed, fmt, vars, node, node);\n        });\n      };\n      var process = function (node) {\n        var lastContentEditable = true;\n        var hasContentEditableState = false;\n        if (isElement$5(node) && dom.getContentEditable(node)) {\n          lastContentEditable = contentEditable;\n          contentEditable = dom.getContentEditable(node) === 'true';\n          hasContentEditableState = true;\n        }\n        var children = from(node.childNodes);\n        if (contentEditable && !hasContentEditableState) {\n          var removed = removeNodeFormat(node);\n          var currentNodeMatches = removed || exists(formatList, function (f) {\n            return matchName$1(dom, node, f);\n          });\n          var parentNode = node.parentNode;\n          if (!currentNodeMatches && isNonNullable(parentNode) && shouldExpandToSelector(format)) {\n            removeNodeFormat(parentNode);\n          }\n        }\n        if (format.deep) {\n          if (children.length) {\n            for (var i = 0; i < children.length; i++) {\n              process(children[i]);\n            }\n            if (hasContentEditableState) {\n              contentEditable = lastContentEditable;\n            }\n          }\n        }\n        var textDecorations = [\n          'underline',\n          'line-through',\n          'overline'\n        ];\n        each$k(textDecorations, function (decoration) {\n          if (isElement$5(node) && ed.dom.getStyle(node, 'text-decoration') === decoration && node.parentNode && getTextDecoration(dom, node.parentNode) === decoration) {\n            removeFormat$1(ed, {\n              deep: false,\n              exact: true,\n              inline: 'span',\n              styles: { textDecoration: decoration }\n            }, null, node);\n          }\n        });\n      };\n      var unwrap = function (start) {\n        var node = dom.get(start ? '_start' : '_end');\n        var out = node[start ? 'firstChild' : 'lastChild'];\n        if (isRemoveBookmarkNode(out)) {\n          out = out[start ? 'firstChild' : 'lastChild'];\n        }\n        if (isText$7(out) && out.data.length === 0) {\n          out = start ? node.previousSibling || node.nextSibling : node.nextSibling || node.previousSibling;\n        }\n        dom.remove(node, true);\n        return out;\n      };\n      var removeRngStyle = function (rng) {\n        var startContainer, endContainer;\n        var expandedRng = expandRng(ed, rng, formatList, rng.collapsed);\n        if (format.split) {\n          expandedRng = split(expandedRng);\n          startContainer = getContainer(ed, expandedRng, true);\n          endContainer = getContainer(ed, expandedRng);\n          if (startContainer !== endContainer) {\n            startContainer = normalizeTableSelection(startContainer, true);\n            endContainer = normalizeTableSelection(endContainer, false);\n            if (isChildOfInlineParent(dom, startContainer, endContainer)) {\n              var marker = Optional.from(startContainer.firstChild).getOr(startContainer);\n              splitToFormatRoot(wrapWithSiblings(dom, marker, true, 'span', {\n                'id': '_start',\n                'data-mce-type': 'bookmark'\n              }));\n              unwrap(true);\n              return;\n            }\n            if (isChildOfInlineParent(dom, endContainer, startContainer)) {\n              var marker = Optional.from(endContainer.lastChild).getOr(endContainer);\n              splitToFormatRoot(wrapWithSiblings(dom, marker, false, 'span', {\n                'id': '_end',\n                'data-mce-type': 'bookmark'\n              }));\n              unwrap(false);\n              return;\n            }\n            startContainer = wrap$1(dom, startContainer, 'span', {\n              'id': '_start',\n              'data-mce-type': 'bookmark'\n            });\n            endContainer = wrap$1(dom, endContainer, 'span', {\n              'id': '_end',\n              'data-mce-type': 'bookmark'\n            });\n            var newRng = dom.createRng();\n            newRng.setStartAfter(startContainer);\n            newRng.setEndBefore(endContainer);\n            walk$2(dom, newRng, function (nodes) {\n              each$k(nodes, function (n) {\n                if (!isBookmarkNode$1(n) && !isBookmarkNode$1(n.parentNode)) {\n                  splitToFormatRoot(n);\n                }\n              });\n            });\n            splitToFormatRoot(startContainer);\n            splitToFormatRoot(endContainer);\n            startContainer = unwrap(true);\n            endContainer = unwrap();\n          } else {\n            startContainer = endContainer = splitToFormatRoot(startContainer);\n          }\n          expandedRng.startContainer = startContainer.parentNode ? startContainer.parentNode : startContainer;\n          expandedRng.startOffset = dom.nodeIndex(startContainer);\n          expandedRng.endContainer = endContainer.parentNode ? endContainer.parentNode : endContainer;\n          expandedRng.endOffset = dom.nodeIndex(endContainer) + 1;\n        }\n        walk$2(dom, expandedRng, function (nodes) {\n          each$k(nodes, process);\n        });\n      };\n      if (node) {\n        if (isNode(node)) {\n          var rng = dom.createRng();\n          rng.setStartBefore(node);\n          rng.setEndAfter(node);\n          removeRngStyle(rng);\n        } else {\n          removeRngStyle(node);\n        }\n        fireFormatRemove(ed, name, node, vars);\n        return;\n      }\n      if (dom.getContentEditable(selection.getNode()) === 'false') {\n        node = selection.getNode();\n        for (var i = 0; i < formatList.length; i++) {\n          if (formatList[i].ceFalseOverride) {\n            if (removeFormat$1(ed, formatList[i], vars, node, node)) {\n              break;\n            }\n          }\n        }\n        fireFormatRemove(ed, name, node, vars);\n        return;\n      }\n      if (!selection.isCollapsed() || !isInlineFormat(format) || getCellsFromEditor(ed).length) {\n        preserve(selection, true, function () {\n          runOnRanges(ed, removeRngStyle);\n        });\n        if (isInlineFormat(format) && match$2(ed, name, vars, selection.getStart())) {\n          moveStart(dom, selection, selection.getRng());\n        }\n        ed.nodeChanged();\n      } else {\n        removeCaretFormat(ed, name, vars, similar);\n      }\n      fireFormatRemove(ed, name, node, vars);\n    };\n\n    var each$8 = Tools.each;\n    var mergeTextDecorationsAndColor = function (dom, format, vars, node) {\n      var processTextDecorationsAndColor = function (n) {\n        if (n.nodeType === 1 && n.parentNode && n.parentNode.nodeType === 1) {\n          var textDecoration = getTextDecoration(dom, n.parentNode);\n          if (dom.getStyle(n, 'color') && textDecoration) {\n            dom.setStyle(n, 'text-decoration', textDecoration);\n          } else if (dom.getStyle(n, 'text-decoration') === textDecoration) {\n            dom.setStyle(n, 'text-decoration', null);\n          }\n        }\n      };\n      if (format.styles && (format.styles.color || format.styles.textDecoration)) {\n        Tools.walk(node, processTextDecorationsAndColor, 'childNodes');\n        processTextDecorationsAndColor(node);\n      }\n    };\n    var mergeBackgroundColorAndFontSize = function (dom, format, vars, node) {\n      if (format.styles && format.styles.backgroundColor) {\n        processChildElements(node, hasStyle(dom, 'fontSize'), applyStyle(dom, 'backgroundColor', replaceVars(format.styles.backgroundColor, vars)));\n      }\n    };\n    var mergeSubSup = function (dom, format, vars, node) {\n      if (isInlineFormat(format) && (format.inline === 'sub' || format.inline === 'sup')) {\n        processChildElements(node, hasStyle(dom, 'fontSize'), applyStyle(dom, 'fontSize', ''));\n        dom.remove(dom.select(format.inline === 'sup' ? 'sub' : 'sup', node), true);\n      }\n    };\n    var mergeWithChildren = function (editor, formatList, vars, node) {\n      each$8(formatList, function (format) {\n        if (isInlineFormat(format)) {\n          each$8(editor.dom.select(format.inline, node), function (child) {\n            if (!isElementNode$1(child)) {\n              return;\n            }\n            removeFormat$1(editor, format, vars, child, format.exact ? child : null);\n          });\n        }\n        clearChildStyles(editor.dom, format, node);\n      });\n    };\n    var mergeWithParents = function (editor, format, name, vars, node) {\n      if (matchNode(editor, node.parentNode, name, vars)) {\n        if (removeFormat$1(editor, format, vars, node)) {\n          return;\n        }\n      }\n      if (format.merge_with_parents) {\n        editor.dom.getParent(node.parentNode, function (parent) {\n          if (matchNode(editor, parent, name, vars)) {\n            removeFormat$1(editor, format, vars, node);\n            return true;\n          }\n        });\n      }\n    };\n\n    var each$7 = Tools.each;\n    var isElementNode = function (node) {\n      return isElement$5(node) && !isBookmarkNode$1(node) && !isCaretNode(node) && !isBogus$2(node);\n    };\n    var canFormatBR = function (editor, format, node, parentName) {\n      if (canFormatEmptyLines(editor) && isInlineFormat(format)) {\n        var validBRParentElements = getTextRootBlockElements(editor.schema);\n        var hasCaretNodeSibling = sibling(SugarElement.fromDom(node), function (sibling) {\n          return isCaretNode(sibling.dom);\n        });\n        return hasNonNullableKey(validBRParentElements, parentName) && isEmpty$2(SugarElement.fromDom(node.parentNode), false) && !hasCaretNodeSibling;\n      } else {\n        return false;\n      }\n    };\n    var applyFormat$1 = function (ed, name, vars, node) {\n      var formatList = ed.formatter.get(name);\n      var format = formatList[0];\n      var isCollapsed = !node && ed.selection.isCollapsed();\n      var dom = ed.dom;\n      var selection = ed.selection;\n      var setElementFormat = function (elm, fmt) {\n        if (fmt === void 0) {\n          fmt = format;\n        }\n        if (isFunction(fmt.onformat)) {\n          fmt.onformat(elm, fmt, vars, node);\n        }\n        each$7(fmt.styles, function (value, name) {\n          dom.setStyle(elm, name, replaceVars(value, vars));\n        });\n        if (fmt.styles) {\n          var styleVal = dom.getAttrib(elm, 'style');\n          if (styleVal) {\n            dom.setAttrib(elm, 'data-mce-style', styleVal);\n          }\n        }\n        each$7(fmt.attributes, function (value, name) {\n          dom.setAttrib(elm, name, replaceVars(value, vars));\n        });\n        each$7(fmt.classes, function (value) {\n          value = replaceVars(value, vars);\n          if (!dom.hasClass(elm, value)) {\n            dom.addClass(elm, value);\n          }\n        });\n      };\n      var applyNodeStyle = function (formatList, node) {\n        var found = false;\n        each$7(formatList, function (format) {\n          if (!isSelectorFormat(format)) {\n            return false;\n          }\n          if (isNonNullable(format.collapsed) && format.collapsed !== isCollapsed) {\n            return;\n          }\n          if (dom.is(node, format.selector) && !isCaretNode(node)) {\n            setElementFormat(node, format);\n            found = true;\n            return false;\n          }\n        });\n        return found;\n      };\n      var createWrapElement = function (wrapName) {\n        if (isString$1(wrapName)) {\n          var wrapElm = dom.create(wrapName);\n          setElementFormat(wrapElm);\n          return wrapElm;\n        } else {\n          return null;\n        }\n      };\n      var applyRngStyle = function (dom, rng, nodeSpecific) {\n        var newWrappers = [];\n        var contentEditable = true;\n        var wrapName = format.inline || format.block;\n        var wrapElm = createWrapElement(wrapName);\n        walk$2(dom, rng, function (nodes) {\n          var currentWrapElm;\n          var process = function (node) {\n            var hasContentEditableState = false;\n            var lastContentEditable = contentEditable;\n            var nodeName = node.nodeName.toLowerCase();\n            var parentNode = node.parentNode;\n            var parentName = parentNode.nodeName.toLowerCase();\n            if (isElement$5(node) && dom.getContentEditable(node)) {\n              lastContentEditable = contentEditable;\n              contentEditable = dom.getContentEditable(node) === 'true';\n              hasContentEditableState = true;\n            }\n            if (isBr$5(node) && !canFormatBR(ed, format, node, parentName)) {\n              currentWrapElm = null;\n              if (isBlockFormat(format)) {\n                dom.remove(node);\n              }\n              return;\n            }\n            if (isBlockFormat(format) && format.wrapper && matchNode(ed, node, name, vars)) {\n              currentWrapElm = null;\n              return;\n            }\n            if (contentEditable && !hasContentEditableState && isBlockFormat(format) && !format.wrapper && isTextBlock$1(ed, nodeName) && isValid(ed, parentName, wrapName)) {\n              var elm = dom.rename(node, wrapName);\n              setElementFormat(elm);\n              newWrappers.push(elm);\n              currentWrapElm = null;\n              return;\n            }\n            if (isSelectorFormat(format)) {\n              var found = applyNodeStyle(formatList, node);\n              if (!found && isNonNullable(parentNode) && shouldExpandToSelector(format)) {\n                found = applyNodeStyle(formatList, parentNode);\n              }\n              if (!isInlineFormat(format) || found) {\n                currentWrapElm = null;\n                return;\n              }\n            }\n            if (contentEditable && !hasContentEditableState && isValid(ed, wrapName, nodeName) && isValid(ed, parentName, wrapName) && !(!nodeSpecific && isText$7(node) && isZwsp(node.data)) && !isCaretNode(node) && (!isInlineFormat(format) || !dom.isBlock(node))) {\n              if (!currentWrapElm) {\n                currentWrapElm = dom.clone(wrapElm, false);\n                node.parentNode.insertBefore(currentWrapElm, node);\n                newWrappers.push(currentWrapElm);\n              }\n              currentWrapElm.appendChild(node);\n            } else {\n              currentWrapElm = null;\n              each$k(from(node.childNodes), process);\n              if (hasContentEditableState) {\n                contentEditable = lastContentEditable;\n              }\n              currentWrapElm = null;\n            }\n          };\n          each$k(nodes, process);\n        });\n        if (format.links === true) {\n          each$k(newWrappers, function (node) {\n            var process = function (node) {\n              if (node.nodeName === 'A') {\n                setElementFormat(node, format);\n              }\n              each$k(from(node.childNodes), process);\n            };\n            process(node);\n          });\n        }\n        each$k(newWrappers, function (node) {\n          var getChildCount = function (node) {\n            var count = 0;\n            each$k(node.childNodes, function (node) {\n              if (!isEmptyTextNode$1(node) && !isBookmarkNode$1(node)) {\n                count++;\n              }\n            });\n            return count;\n          };\n          var mergeStyles = function (node) {\n            var childElement = find$3(node.childNodes, isElementNode).filter(function (child) {\n              return matchName$1(dom, child, format);\n            });\n            return childElement.map(function (child) {\n              var clone = dom.clone(child, false);\n              setElementFormat(clone);\n              dom.replace(clone, node, true);\n              dom.remove(child, true);\n              return clone;\n            }).getOr(node);\n          };\n          var childCount = getChildCount(node);\n          if ((newWrappers.length > 1 || !dom.isBlock(node)) && childCount === 0) {\n            dom.remove(node, true);\n            return;\n          }\n          if (isInlineFormat(format) || isBlockFormat(format) && format.wrapper) {\n            if (!format.exact && childCount === 1) {\n              node = mergeStyles(node);\n            }\n            mergeWithChildren(ed, formatList, vars, node);\n            mergeWithParents(ed, format, name, vars, node);\n            mergeBackgroundColorAndFontSize(dom, format, vars, node);\n            mergeTextDecorationsAndColor(dom, format, vars, node);\n            mergeSubSup(dom, format, vars, node);\n            mergeSiblings(dom, format, vars, node);\n          }\n        });\n      };\n      if (dom.getContentEditable(selection.getNode()) === 'false') {\n        node = selection.getNode();\n        for (var i = 0, l = formatList.length; i < l; i++) {\n          var formatItem = formatList[i];\n          if (formatItem.ceFalseOverride && isSelectorFormat(formatItem) && dom.is(node, formatItem.selector)) {\n            setElementFormat(node, formatItem);\n            break;\n          }\n        }\n        fireFormatApply(ed, name, node, vars);\n        return;\n      }\n      if (format) {\n        if (node) {\n          if (isNode(node)) {\n            if (!applyNodeStyle(formatList, node)) {\n              var rng = dom.createRng();\n              rng.setStartBefore(node);\n              rng.setEndAfter(node);\n              applyRngStyle(dom, expandRng(ed, rng, formatList), true);\n            }\n          } else {\n            applyRngStyle(dom, node, true);\n          }\n        } else {\n          if (!isCollapsed || !isInlineFormat(format) || getCellsFromEditor(ed).length) {\n            var curSelNode = selection.getNode();\n            var firstFormat = formatList[0];\n            if (!ed.settings.forced_root_block && firstFormat.defaultBlock && !dom.getParent(curSelNode, dom.isBlock)) {\n              applyFormat$1(ed, firstFormat.defaultBlock);\n            }\n            selection.setRng(normalize(selection.getRng()));\n            preserve(selection, true, function () {\n              runOnRanges(ed, function (selectionRng, fake) {\n                var expandedRng = fake ? selectionRng : expandRng(ed, selectionRng, formatList);\n                applyRngStyle(dom, expandedRng, false);\n              });\n            });\n            moveStart(dom, selection, selection.getRng());\n            ed.nodeChanged();\n          } else {\n            applyCaretFormat(ed, name, vars);\n          }\n        }\n        postProcess$1(name, ed);\n      }\n      fireFormatApply(ed, name, node, vars);\n    };\n\n    var hasVars = function (value) {\n      return has$2(value, 'vars');\n    };\n    var setup$j = function (registeredFormatListeners, editor) {\n      registeredFormatListeners.set({});\n      editor.on('NodeChange', function (e) {\n        updateAndFireChangeCallbacks(editor, e.element, registeredFormatListeners.get());\n      });\n      editor.on('FormatApply FormatRemove', function (e) {\n        var element = Optional.from(e.node).map(function (nodeOrRange) {\n          return isNode(nodeOrRange) ? nodeOrRange : nodeOrRange.startContainer;\n        }).bind(function (node) {\n          return isElement$5(node) ? Optional.some(node) : Optional.from(node.parentElement);\n        }).getOrThunk(function () {\n          return fallbackElement(editor);\n        });\n        updateAndFireChangeCallbacks(editor, element, registeredFormatListeners.get());\n      });\n    };\n    var fallbackElement = function (editor) {\n      return editor.selection.getStart();\n    };\n    var matchingNode = function (editor, parents, format, similar, vars) {\n      var isMatchingNode = function (node) {\n        var matchingFormat = editor.formatter.matchNode(node, format, vars !== null && vars !== void 0 ? vars : {}, similar);\n        return !isUndefined(matchingFormat);\n      };\n      var isUnableToMatch = function (node) {\n        if (matchesUnInheritedFormatSelector(editor, node, format)) {\n          return true;\n        } else {\n          if (!similar) {\n            return isNonNullable(editor.formatter.matchNode(node, format, vars, true));\n          } else {\n            return false;\n          }\n        }\n      };\n      return findUntil$1(parents, isMatchingNode, isUnableToMatch);\n    };\n    var getParents = function (editor, elm) {\n      var element = elm !== null && elm !== void 0 ? elm : fallbackElement(editor);\n      return filter$4(getParents$2(editor.dom, element), function (node) {\n        return isElement$5(node) && !isBogus$2(node);\n      });\n    };\n    var updateAndFireChangeCallbacks = function (editor, elm, registeredCallbacks) {\n      var parents = getParents(editor, elm);\n      each$j(registeredCallbacks, function (data, format) {\n        var runIfChanged = function (spec) {\n          var match = matchingNode(editor, parents, format, spec.similar, hasVars(spec) ? spec.vars : undefined);\n          var isSet = match.isSome();\n          if (spec.state.get() !== isSet) {\n            spec.state.set(isSet);\n            var node_1 = match.getOr(elm);\n            if (hasVars(spec)) {\n              spec.callback(isSet, {\n                node: node_1,\n                format: format,\n                parents: parents\n              });\n            } else {\n              each$k(spec.callbacks, function (callback) {\n                return callback(isSet, {\n                  node: node_1,\n                  format: format,\n                  parents: parents\n                });\n              });\n            }\n          }\n        };\n        each$k([\n          data.withSimilar,\n          data.withoutSimilar\n        ], runIfChanged);\n        each$k(data.withVars, runIfChanged);\n      });\n    };\n    var addListeners = function (editor, registeredFormatListeners, formats, callback, similar, vars) {\n      var formatChangeItems = registeredFormatListeners.get();\n      each$k(formats.split(','), function (format) {\n        var group = get$9(formatChangeItems, format).getOrThunk(function () {\n          var base = {\n            withSimilar: {\n              state: Cell(false),\n              similar: true,\n              callbacks: []\n            },\n            withoutSimilar: {\n              state: Cell(false),\n              similar: false,\n              callbacks: []\n            },\n            withVars: []\n          };\n          formatChangeItems[format] = base;\n          return base;\n        });\n        var getCurrent = function () {\n          var parents = getParents(editor);\n          return matchingNode(editor, parents, format, similar, vars).isSome();\n        };\n        if (isUndefined(vars)) {\n          var toAppendTo = similar ? group.withSimilar : group.withoutSimilar;\n          toAppendTo.callbacks.push(callback);\n          if (toAppendTo.callbacks.length === 1) {\n            toAppendTo.state.set(getCurrent());\n          }\n        } else {\n          group.withVars.push({\n            state: Cell(getCurrent()),\n            similar: similar,\n            vars: vars,\n            callback: callback\n          });\n        }\n      });\n      registeredFormatListeners.set(formatChangeItems);\n    };\n    var removeListeners = function (registeredFormatListeners, formats, callback) {\n      var formatChangeItems = registeredFormatListeners.get();\n      each$k(formats.split(','), function (format) {\n        return get$9(formatChangeItems, format).each(function (group) {\n          formatChangeItems[format] = {\n            withSimilar: __assign(__assign({}, group.withSimilar), {\n              callbacks: filter$4(group.withSimilar.callbacks, function (cb) {\n                return cb !== callback;\n              })\n            }),\n            withoutSimilar: __assign(__assign({}, group.withoutSimilar), {\n              callbacks: filter$4(group.withoutSimilar.callbacks, function (cb) {\n                return cb !== callback;\n              })\n            }),\n            withVars: filter$4(group.withVars, function (item) {\n              return item.callback !== callback;\n            })\n          };\n        });\n      });\n      registeredFormatListeners.set(formatChangeItems);\n    };\n    var formatChangedInternal = function (editor, registeredFormatListeners, formats, callback, similar, vars) {\n      if (registeredFormatListeners.get() === null) {\n        setup$j(registeredFormatListeners, editor);\n      }\n      addListeners(editor, registeredFormatListeners, formats, callback, similar, vars);\n      return {\n        unbind: function () {\n          return removeListeners(registeredFormatListeners, formats, callback);\n        }\n      };\n    };\n\n    var toggle = function (editor, name, vars, node) {\n      var fmt = editor.formatter.get(name);\n      if (match$2(editor, name, vars, node) && (!('toggle' in fmt[0]) || fmt[0].toggle)) {\n        remove$1(editor, name, vars, node);\n      } else {\n        applyFormat$1(editor, name, vars, node);\n      }\n    };\n\n    var fromElements = function (elements, scope) {\n      var doc = scope || document;\n      var fragment = doc.createDocumentFragment();\n      each$k(elements, function (element) {\n        fragment.appendChild(element.dom);\n      });\n      return SugarElement.fromDom(fragment);\n    };\n\n    var tableModel = function (element, width, rows) {\n      return {\n        element: element,\n        width: width,\n        rows: rows\n      };\n    };\n    var tableRow = function (element, cells) {\n      return {\n        element: element,\n        cells: cells\n      };\n    };\n    var cellPosition = function (x, y) {\n      return {\n        x: x,\n        y: y\n      };\n    };\n    var getSpan = function (td, key) {\n      var value = parseInt(get$6(td, key), 10);\n      return isNaN(value) ? 1 : value;\n    };\n    var fillout = function (table, x, y, tr, td) {\n      var rowspan = getSpan(td, 'rowspan');\n      var colspan = getSpan(td, 'colspan');\n      var rows = table.rows;\n      for (var y2 = y; y2 < y + rowspan; y2++) {\n        if (!rows[y2]) {\n          rows[y2] = tableRow(deep$1(tr), []);\n        }\n        for (var x2 = x; x2 < x + colspan; x2++) {\n          var cells = rows[y2].cells;\n          cells[x2] = y2 === y && x2 === x ? td : shallow(td);\n        }\n      }\n    };\n    var cellExists = function (table, x, y) {\n      var rows = table.rows;\n      var cells = rows[y] ? rows[y].cells : [];\n      return !!cells[x];\n    };\n    var skipCellsX = function (table, x, y) {\n      while (cellExists(table, x, y)) {\n        x++;\n      }\n      return x;\n    };\n    var getWidth = function (rows) {\n      return foldl(rows, function (acc, row) {\n        return row.cells.length > acc ? row.cells.length : acc;\n      }, 0);\n    };\n    var findElementPos = function (table, element) {\n      var rows = table.rows;\n      for (var y = 0; y < rows.length; y++) {\n        var cells = rows[y].cells;\n        for (var x = 0; x < cells.length; x++) {\n          if (eq(cells[x], element)) {\n            return Optional.some(cellPosition(x, y));\n          }\n        }\n      }\n      return Optional.none();\n    };\n    var extractRows = function (table, sx, sy, ex, ey) {\n      var newRows = [];\n      var rows = table.rows;\n      for (var y = sy; y <= ey; y++) {\n        var cells = rows[y].cells;\n        var slice = sx < ex ? cells.slice(sx, ex + 1) : cells.slice(ex, sx + 1);\n        newRows.push(tableRow(rows[y].element, slice));\n      }\n      return newRows;\n    };\n    var subTable = function (table, startPos, endPos) {\n      var sx = startPos.x, sy = startPos.y;\n      var ex = endPos.x, ey = endPos.y;\n      var newRows = sy < ey ? extractRows(table, sx, sy, ex, ey) : extractRows(table, sx, ey, ex, sy);\n      return tableModel(table.element, getWidth(newRows), newRows);\n    };\n    var createDomTable = function (table, rows) {\n      var tableElement = shallow(table.element);\n      var tableBody = SugarElement.fromTag('tbody');\n      append(tableBody, rows);\n      append$1(tableElement, tableBody);\n      return tableElement;\n    };\n    var modelRowsToDomRows = function (table) {\n      return map$3(table.rows, function (row) {\n        var cells = map$3(row.cells, function (cell) {\n          var td = deep$1(cell);\n          remove$6(td, 'colspan');\n          remove$6(td, 'rowspan');\n          return td;\n        });\n        var tr = shallow(row.element);\n        append(tr, cells);\n        return tr;\n      });\n    };\n    var fromDom = function (tableElm) {\n      var table = tableModel(shallow(tableElm), 0, []);\n      each$k(descendants(tableElm, 'tr'), function (tr, y) {\n        each$k(descendants(tr, 'td,th'), function (td, x) {\n          fillout(table, skipCellsX(table, x, y), y, tr, td);\n        });\n      });\n      return tableModel(table.element, getWidth(table.rows), table.rows);\n    };\n    var toDom = function (table) {\n      return createDomTable(table, modelRowsToDomRows(table));\n    };\n    var subsection = function (table, startElement, endElement) {\n      return findElementPos(table, startElement).bind(function (startPos) {\n        return findElementPos(table, endElement).map(function (endPos) {\n          return subTable(table, startPos, endPos);\n        });\n      });\n    };\n\n    var findParentListContainer = function (parents) {\n      return find$3(parents, function (elm) {\n        return name(elm) === 'ul' || name(elm) === 'ol';\n      });\n    };\n    var getFullySelectedListWrappers = function (parents, rng) {\n      return find$3(parents, function (elm) {\n        return name(elm) === 'li' && hasAllContentsSelected(elm, rng);\n      }).fold(constant([]), function (_li) {\n        return findParentListContainer(parents).map(function (listCont) {\n          var listElm = SugarElement.fromTag(name(listCont));\n          var listStyles = filter$3(getAllRaw(listCont), function (_style, name) {\n            return startsWith(name, 'list-style');\n          });\n          setAll(listElm, listStyles);\n          return [\n            SugarElement.fromTag('li'),\n            listElm\n          ];\n        }).getOr([]);\n      });\n    };\n    var wrap = function (innerElm, elms) {\n      var wrapped = foldl(elms, function (acc, elm) {\n        append$1(elm, acc);\n        return elm;\n      }, innerElm);\n      return elms.length > 0 ? fromElements([wrapped]) : wrapped;\n    };\n    var directListWrappers = function (commonAnchorContainer) {\n      if (isListItem(commonAnchorContainer)) {\n        return parent(commonAnchorContainer).filter(isList).fold(constant([]), function (listElm) {\n          return [\n            commonAnchorContainer,\n            listElm\n          ];\n        });\n      } else {\n        return isList(commonAnchorContainer) ? [commonAnchorContainer] : [];\n      }\n    };\n    var getWrapElements = function (rootNode, rng) {\n      var commonAnchorContainer = SugarElement.fromDom(rng.commonAncestorContainer);\n      var parents = parentsAndSelf(commonAnchorContainer, rootNode);\n      var wrapElements = filter$4(parents, function (elm) {\n        return isInline$1(elm) || isHeading(elm);\n      });\n      var listWrappers = getFullySelectedListWrappers(parents, rng);\n      var allWrappers = wrapElements.concat(listWrappers.length ? listWrappers : directListWrappers(commonAnchorContainer));\n      return map$3(allWrappers, shallow);\n    };\n    var emptyFragment = function () {\n      return fromElements([]);\n    };\n    var getFragmentFromRange = function (rootNode, rng) {\n      return wrap(SugarElement.fromDom(rng.cloneContents()), getWrapElements(rootNode, rng));\n    };\n    var getParentTable = function (rootElm, cell) {\n      return ancestor$2(cell, 'table', curry(eq, rootElm));\n    };\n    var getTableFragment = function (rootNode, selectedTableCells) {\n      return getParentTable(rootNode, selectedTableCells[0]).bind(function (tableElm) {\n        var firstCell = selectedTableCells[0];\n        var lastCell = selectedTableCells[selectedTableCells.length - 1];\n        var fullTableModel = fromDom(tableElm);\n        return subsection(fullTableModel, firstCell, lastCell).map(function (sectionedTableModel) {\n          return fromElements([toDom(sectionedTableModel)]);\n        });\n      }).getOrThunk(emptyFragment);\n    };\n    var getSelectionFragment = function (rootNode, ranges) {\n      return ranges.length > 0 && ranges[0].collapsed ? emptyFragment() : getFragmentFromRange(rootNode, ranges[0]);\n    };\n    var read$3 = function (rootNode, ranges) {\n      var selectedCells = getCellsFromElementOrRanges(ranges, rootNode);\n      return selectedCells.length > 0 ? getTableFragment(rootNode, selectedCells) : getSelectionFragment(rootNode, ranges);\n    };\n\n    var trimLeadingCollapsibleText = function (text) {\n      return text.replace(/^[ \\f\\n\\r\\t\\v]+/, '');\n    };\n    var isCollapsibleWhitespace = function (text, index) {\n      return index >= 0 && index < text.length && isWhiteSpace(text.charAt(index));\n    };\n    var getInnerText = function (bin, shouldTrim) {\n      var text = trim$2(bin.innerText);\n      return shouldTrim ? trimLeadingCollapsibleText(text) : text;\n    };\n    var getContextNodeName = function (parentBlockOpt) {\n      return parentBlockOpt.map(function (block) {\n        return block.nodeName;\n      }).getOr('div').toLowerCase();\n    };\n    var getTextContent = function (editor) {\n      return Optional.from(editor.selection.getRng()).map(function (rng) {\n        var parentBlockOpt = Optional.from(editor.dom.getParent(rng.commonAncestorContainer, editor.dom.isBlock));\n        var body = editor.getBody();\n        var contextNodeName = getContextNodeName(parentBlockOpt);\n        var shouldTrimSpaces = Env.browser.isIE() && contextNodeName !== 'pre';\n        var bin = editor.dom.add(body, contextNodeName, {\n          'data-mce-bogus': 'all',\n          'style': 'overflow: hidden; opacity: 0;'\n        }, rng.cloneContents());\n        var text = getInnerText(bin, shouldTrimSpaces);\n        var nonRenderedText = trim$2(bin.textContent);\n        editor.dom.remove(bin);\n        if (isCollapsibleWhitespace(nonRenderedText, 0) || isCollapsibleWhitespace(nonRenderedText, nonRenderedText.length - 1)) {\n          var parentBlock = parentBlockOpt.getOr(body);\n          var parentBlockText = getInnerText(parentBlock, shouldTrimSpaces);\n          var textIndex = parentBlockText.indexOf(text);\n          if (textIndex === -1) {\n            return text;\n          } else {\n            var hasProceedingSpace = isCollapsibleWhitespace(parentBlockText, textIndex - 1);\n            var hasTrailingSpace = isCollapsibleWhitespace(parentBlockText, textIndex + text.length);\n            return (hasProceedingSpace ? ' ' : '') + text + (hasTrailingSpace ? ' ' : '');\n          }\n        } else {\n          return text;\n        }\n      }).getOr('');\n    };\n    var getSerializedContent = function (editor, args) {\n      var rng = editor.selection.getRng(), tmpElm = editor.dom.create('body');\n      var sel = editor.selection.getSel();\n      var ranges = processRanges(editor, getRanges(sel));\n      var fragment = args.contextual ? read$3(SugarElement.fromDom(editor.getBody()), ranges).dom : rng.cloneContents();\n      if (fragment) {\n        tmpElm.appendChild(fragment);\n      }\n      return editor.selection.serializer.serialize(tmpElm, args);\n    };\n    var setupArgs$1 = function (args, format) {\n      return __assign(__assign({}, args), {\n        format: format,\n        get: true,\n        selection: true\n      });\n    };\n    var getSelectedContentInternal = function (editor, format, args) {\n      if (args === void 0) {\n        args = {};\n      }\n      var defaultedArgs = setupArgs$1(args, format);\n      var updatedArgs = editor.fire('BeforeGetContent', defaultedArgs);\n      if (updatedArgs.isDefaultPrevented()) {\n        editor.fire('GetContent', updatedArgs);\n        return updatedArgs.content;\n      }\n      if (updatedArgs.format === 'text') {\n        return getTextContent(editor);\n      } else {\n        updatedArgs.getInner = true;\n        var content = getSerializedContent(editor, updatedArgs);\n        if (updatedArgs.format === 'tree') {\n          return content;\n        } else {\n          updatedArgs.content = editor.selection.isCollapsed() ? '' : content;\n          editor.fire('GetContent', updatedArgs);\n          return updatedArgs.content;\n        }\n      }\n    };\n\n    var KEEP = 0, INSERT = 1, DELETE = 2;\n    var diff = function (left, right) {\n      var size = left.length + right.length + 2;\n      var vDown = new Array(size);\n      var vUp = new Array(size);\n      var snake = function (start, end, diag) {\n        return {\n          start: start,\n          end: end,\n          diag: diag\n        };\n      };\n      var buildScript = function (start1, end1, start2, end2, script) {\n        var middle = getMiddleSnake(start1, end1, start2, end2);\n        if (middle === null || middle.start === end1 && middle.diag === end1 - end2 || middle.end === start1 && middle.diag === start1 - start2) {\n          var i = start1;\n          var j = start2;\n          while (i < end1 || j < end2) {\n            if (i < end1 && j < end2 && left[i] === right[j]) {\n              script.push([\n                KEEP,\n                left[i]\n              ]);\n              ++i;\n              ++j;\n            } else {\n              if (end1 - start1 > end2 - start2) {\n                script.push([\n                  DELETE,\n                  left[i]\n                ]);\n                ++i;\n              } else {\n                script.push([\n                  INSERT,\n                  right[j]\n                ]);\n                ++j;\n              }\n            }\n          }\n        } else {\n          buildScript(start1, middle.start, start2, middle.start - middle.diag, script);\n          for (var i2 = middle.start; i2 < middle.end; ++i2) {\n            script.push([\n              KEEP,\n              left[i2]\n            ]);\n          }\n          buildScript(middle.end, end1, middle.end - middle.diag, end2, script);\n        }\n      };\n      var buildSnake = function (start, diag, end1, end2) {\n        var end = start;\n        while (end - diag < end2 && end < end1 && left[end] === right[end - diag]) {\n          ++end;\n        }\n        return snake(start, end, diag);\n      };\n      var getMiddleSnake = function (start1, end1, start2, end2) {\n        var m = end1 - start1;\n        var n = end2 - start2;\n        if (m === 0 || n === 0) {\n          return null;\n        }\n        var delta = m - n;\n        var sum = n + m;\n        var offset = (sum % 2 === 0 ? sum : sum + 1) / 2;\n        vDown[1 + offset] = start1;\n        vUp[1 + offset] = end1 + 1;\n        var d, k, i, x, y;\n        for (d = 0; d <= offset; ++d) {\n          for (k = -d; k <= d; k += 2) {\n            i = k + offset;\n            if (k === -d || k !== d && vDown[i - 1] < vDown[i + 1]) {\n              vDown[i] = vDown[i + 1];\n            } else {\n              vDown[i] = vDown[i - 1] + 1;\n            }\n            x = vDown[i];\n            y = x - start1 + start2 - k;\n            while (x < end1 && y < end2 && left[x] === right[y]) {\n              vDown[i] = ++x;\n              ++y;\n            }\n            if (delta % 2 !== 0 && delta - d <= k && k <= delta + d) {\n              if (vUp[i - delta] <= vDown[i]) {\n                return buildSnake(vUp[i - delta], k + start1 - start2, end1, end2);\n              }\n            }\n          }\n          for (k = delta - d; k <= delta + d; k += 2) {\n            i = k + offset - delta;\n            if (k === delta - d || k !== delta + d && vUp[i + 1] <= vUp[i - 1]) {\n              vUp[i] = vUp[i + 1] - 1;\n            } else {\n              vUp[i] = vUp[i - 1];\n            }\n            x = vUp[i] - 1;\n            y = x - start1 + start2 - k;\n            while (x >= start1 && y >= start2 && left[x] === right[y]) {\n              vUp[i] = x--;\n              y--;\n            }\n            if (delta % 2 === 0 && -d <= k && k <= d) {\n              if (vUp[i] <= vDown[i + delta]) {\n                return buildSnake(vUp[i], k + start1 - start2, end1, end2);\n              }\n            }\n          }\n        }\n      };\n      var script = [];\n      buildScript(0, left.length, 0, right.length, script);\n      return script;\n    };\n\n    var getOuterHtml = function (elm) {\n      if (isElement$5(elm)) {\n        return elm.outerHTML;\n      } else if (isText$7(elm)) {\n        return Entities.encodeRaw(elm.data, false);\n      } else if (isComment(elm)) {\n        return '<!--' + elm.data + '-->';\n      }\n      return '';\n    };\n    var createFragment = function (html) {\n      var node;\n      var container = document.createElement('div');\n      var frag = document.createDocumentFragment();\n      if (html) {\n        container.innerHTML = html;\n      }\n      while (node = container.firstChild) {\n        frag.appendChild(node);\n      }\n      return frag;\n    };\n    var insertAt = function (elm, html, index) {\n      var fragment = createFragment(html);\n      if (elm.hasChildNodes() && index < elm.childNodes.length) {\n        var target = elm.childNodes[index];\n        target.parentNode.insertBefore(fragment, target);\n      } else {\n        elm.appendChild(fragment);\n      }\n    };\n    var removeAt = function (elm, index) {\n      if (elm.hasChildNodes() && index < elm.childNodes.length) {\n        var target = elm.childNodes[index];\n        target.parentNode.removeChild(target);\n      }\n    };\n    var applyDiff = function (diff, elm) {\n      var index = 0;\n      each$k(diff, function (action) {\n        if (action[0] === KEEP) {\n          index++;\n        } else if (action[0] === INSERT) {\n          insertAt(elm, action[1], index);\n          index++;\n        } else if (action[0] === DELETE) {\n          removeAt(elm, index);\n        }\n      });\n    };\n    var read$2 = function (elm) {\n      return filter$4(map$3(from(elm.childNodes), getOuterHtml), function (item) {\n        return item.length > 0;\n      });\n    };\n    var write = function (fragments, elm) {\n      var currentFragments = map$3(from(elm.childNodes), getOuterHtml);\n      applyDiff(diff(currentFragments, fragments), elm);\n      return elm;\n    };\n\n    var lazyTempDocument = cached(function () {\n      return document.implementation.createHTMLDocument('undo');\n    });\n    var hasIframes = function (html) {\n      return html.indexOf('</iframe>') !== -1;\n    };\n    var createFragmentedLevel = function (fragments) {\n      return {\n        type: 'fragmented',\n        fragments: fragments,\n        content: '',\n        bookmark: null,\n        beforeBookmark: null\n      };\n    };\n    var createCompleteLevel = function (content) {\n      return {\n        type: 'complete',\n        fragments: null,\n        content: content,\n        bookmark: null,\n        beforeBookmark: null\n      };\n    };\n    var createFromEditor = function (editor) {\n      var fragments = read$2(editor.getBody());\n      var trimmedFragments = bind(fragments, function (html) {\n        var trimmed = trimInternal(editor.serializer, html);\n        return trimmed.length > 0 ? [trimmed] : [];\n      });\n      var content = trimmedFragments.join('');\n      return hasIframes(content) ? createFragmentedLevel(trimmedFragments) : createCompleteLevel(content);\n    };\n    var applyToEditor = function (editor, level, before) {\n      var bookmark = before ? level.beforeBookmark : level.bookmark;\n      if (level.type === 'fragmented') {\n        write(level.fragments, editor.getBody());\n      } else {\n        editor.setContent(level.content, {\n          format: 'raw',\n          no_selection: isNonNullable(bookmark) && isPathBookmark(bookmark) ? !bookmark.isFakeCaret : true\n        });\n      }\n      editor.selection.moveToBookmark(bookmark);\n    };\n    var getLevelContent = function (level) {\n      return level.type === 'fragmented' ? level.fragments.join('') : level.content;\n    };\n    var getCleanLevelContent = function (level) {\n      var elm = SugarElement.fromTag('body', lazyTempDocument());\n      set(elm, getLevelContent(level));\n      each$k(descendants(elm, '*[data-mce-bogus]'), unwrap);\n      return get$3(elm);\n    };\n    var hasEqualContent = function (level1, level2) {\n      return getLevelContent(level1) === getLevelContent(level2);\n    };\n    var hasEqualCleanedContent = function (level1, level2) {\n      return getCleanLevelContent(level1) === getCleanLevelContent(level2);\n    };\n    var isEq$1 = function (level1, level2) {\n      if (!level1 || !level2) {\n        return false;\n      } else if (hasEqualContent(level1, level2)) {\n        return true;\n      } else {\n        return hasEqualCleanedContent(level1, level2);\n      }\n    };\n\n    var isUnlocked = function (locks) {\n      return locks.get() === 0;\n    };\n\n    var setTyping = function (undoManager, typing, locks) {\n      if (isUnlocked(locks)) {\n        undoManager.typing = typing;\n      }\n    };\n    var endTyping = function (undoManager, locks) {\n      if (undoManager.typing) {\n        setTyping(undoManager, false, locks);\n        undoManager.add();\n      }\n    };\n    var endTypingLevelIgnoreLocks = function (undoManager) {\n      if (undoManager.typing) {\n        undoManager.typing = false;\n        undoManager.add();\n      }\n    };\n\n    var beforeChange$1 = function (editor, locks, beforeBookmark) {\n      if (isUnlocked(locks)) {\n        beforeBookmark.set(getUndoBookmark(editor.selection));\n      }\n    };\n    var addUndoLevel$1 = function (editor, undoManager, index, locks, beforeBookmark, level, event) {\n      var currentLevel = createFromEditor(editor);\n      level = level || {};\n      level = Tools.extend(level, currentLevel);\n      if (isUnlocked(locks) === false || editor.removed) {\n        return null;\n      }\n      var lastLevel = undoManager.data[index.get()];\n      if (editor.fire('BeforeAddUndo', {\n          level: level,\n          lastLevel: lastLevel,\n          originalEvent: event\n        }).isDefaultPrevented()) {\n        return null;\n      }\n      if (lastLevel && isEq$1(lastLevel, level)) {\n        return null;\n      }\n      if (undoManager.data[index.get()]) {\n        beforeBookmark.get().each(function (bm) {\n          undoManager.data[index.get()].beforeBookmark = bm;\n        });\n      }\n      var customUndoRedoLevels = getCustomUndoRedoLevels(editor);\n      if (customUndoRedoLevels) {\n        if (undoManager.data.length > customUndoRedoLevels) {\n          for (var i = 0; i < undoManager.data.length - 1; i++) {\n            undoManager.data[i] = undoManager.data[i + 1];\n          }\n          undoManager.data.length--;\n          index.set(undoManager.data.length);\n        }\n      }\n      level.bookmark = getUndoBookmark(editor.selection);\n      if (index.get() < undoManager.data.length - 1) {\n        undoManager.data.length = index.get() + 1;\n      }\n      undoManager.data.push(level);\n      index.set(undoManager.data.length - 1);\n      var args = {\n        level: level,\n        lastLevel: lastLevel,\n        originalEvent: event\n      };\n      if (index.get() > 0) {\n        editor.setDirty(true);\n        editor.fire('AddUndo', args);\n        editor.fire('change', args);\n      } else {\n        editor.fire('AddUndo', args);\n      }\n      return level;\n    };\n    var clear$1 = function (editor, undoManager, index) {\n      undoManager.data = [];\n      index.set(0);\n      undoManager.typing = false;\n      editor.fire('ClearUndos');\n    };\n    var extra$1 = function (editor, undoManager, index, callback1, callback2) {\n      if (undoManager.transact(callback1)) {\n        var bookmark = undoManager.data[index.get()].bookmark;\n        var lastLevel = undoManager.data[index.get() - 1];\n        applyToEditor(editor, lastLevel, true);\n        if (undoManager.transact(callback2)) {\n          undoManager.data[index.get() - 1].beforeBookmark = bookmark;\n        }\n      }\n    };\n    var redo$1 = function (editor, index, data) {\n      var level;\n      if (index.get() < data.length - 1) {\n        index.set(index.get() + 1);\n        level = data[index.get()];\n        applyToEditor(editor, level, false);\n        editor.setDirty(true);\n        editor.fire('Redo', { level: level });\n      }\n      return level;\n    };\n    var undo$1 = function (editor, undoManager, locks, index) {\n      var level;\n      if (undoManager.typing) {\n        undoManager.add();\n        undoManager.typing = false;\n        setTyping(undoManager, false, locks);\n      }\n      if (index.get() > 0) {\n        index.set(index.get() - 1);\n        level = undoManager.data[index.get()];\n        applyToEditor(editor, level, true);\n        editor.setDirty(true);\n        editor.fire('Undo', { level: level });\n      }\n      return level;\n    };\n    var reset$1 = function (undoManager) {\n      undoManager.clear();\n      undoManager.add();\n    };\n    var hasUndo$1 = function (editor, undoManager, index) {\n      return index.get() > 0 || undoManager.typing && undoManager.data[0] && !isEq$1(createFromEditor(editor), undoManager.data[0]);\n    };\n    var hasRedo$1 = function (undoManager, index) {\n      return index.get() < undoManager.data.length - 1 && !undoManager.typing;\n    };\n    var transact$1 = function (undoManager, locks, callback) {\n      endTyping(undoManager, locks);\n      undoManager.beforeChange();\n      undoManager.ignore(callback);\n      return undoManager.add();\n    };\n    var ignore$1 = function (locks, callback) {\n      try {\n        locks.set(locks.get() + 1);\n        callback();\n      } finally {\n        locks.set(locks.get() - 1);\n      }\n    };\n\n    var addVisualInternal = function (editor, elm) {\n      var dom = editor.dom;\n      var scope = isNonNullable(elm) ? elm : editor.getBody();\n      if (isUndefined(editor.hasVisual)) {\n        editor.hasVisual = isVisualAidsEnabled(editor);\n      }\n      each$k(dom.select('table,a', scope), function (matchedElm) {\n        switch (matchedElm.nodeName) {\n        case 'TABLE':\n          var cls = getVisualAidsTableClass(editor);\n          var value = dom.getAttrib(matchedElm, 'border');\n          if ((!value || value === '0') && editor.hasVisual) {\n            dom.addClass(matchedElm, cls);\n          } else {\n            dom.removeClass(matchedElm, cls);\n          }\n          break;\n        case 'A':\n          if (!dom.getAttrib(matchedElm, 'href')) {\n            var value_1 = dom.getAttrib(matchedElm, 'name') || matchedElm.id;\n            var cls_1 = getVisualAidsAnchorClass(editor);\n            if (value_1 && editor.hasVisual) {\n              dom.addClass(matchedElm, cls_1);\n            } else {\n              dom.removeClass(matchedElm, cls_1);\n            }\n          }\n          break;\n        }\n      });\n      editor.fire('VisualAid', {\n        element: elm,\n        hasVisual: editor.hasVisual\n      });\n    };\n\n    var makePlainAdaptor = function (editor) {\n      return {\n        undoManager: {\n          beforeChange: function (locks, beforeBookmark) {\n            return beforeChange$1(editor, locks, beforeBookmark);\n          },\n          add: function (undoManager, index, locks, beforeBookmark, level, event) {\n            return addUndoLevel$1(editor, undoManager, index, locks, beforeBookmark, level, event);\n          },\n          undo: function (undoManager, locks, index) {\n            return undo$1(editor, undoManager, locks, index);\n          },\n          redo: function (index, data) {\n            return redo$1(editor, index, data);\n          },\n          clear: function (undoManager, index) {\n            return clear$1(editor, undoManager, index);\n          },\n          reset: function (undoManager) {\n            return reset$1(undoManager);\n          },\n          hasUndo: function (undoManager, index) {\n            return hasUndo$1(editor, undoManager, index);\n          },\n          hasRedo: function (undoManager, index) {\n            return hasRedo$1(undoManager, index);\n          },\n          transact: function (undoManager, locks, callback) {\n            return transact$1(undoManager, locks, callback);\n          },\n          ignore: function (locks, callback) {\n            return ignore$1(locks, callback);\n          },\n          extra: function (undoManager, index, callback1, callback2) {\n            return extra$1(editor, undoManager, index, callback1, callback2);\n          }\n        },\n        formatter: {\n          match: function (name, vars, node, similar) {\n            return match$2(editor, name, vars, node, similar);\n          },\n          matchAll: function (names, vars) {\n            return matchAll(editor, names, vars);\n          },\n          matchNode: function (node, name, vars, similar) {\n            return matchNode(editor, node, name, vars, similar);\n          },\n          canApply: function (name) {\n            return canApply(editor, name);\n          },\n          closest: function (names) {\n            return closest(editor, names);\n          },\n          apply: function (name, vars, node) {\n            return applyFormat$1(editor, name, vars, node);\n          },\n          remove: function (name, vars, node, similar) {\n            return remove$1(editor, name, vars, node, similar);\n          },\n          toggle: function (name, vars, node) {\n            return toggle(editor, name, vars, node);\n          },\n          formatChanged: function (registeredFormatListeners, formats, callback, similar, vars) {\n            return formatChangedInternal(editor, registeredFormatListeners, formats, callback, similar, vars);\n          }\n        },\n        editor: {\n          getContent: function (args, format) {\n            return getContentInternal(editor, args, format);\n          },\n          setContent: function (content, args) {\n            return setContentInternal(editor, content, args);\n          },\n          insertContent: function (value, details) {\n            return insertHtmlAtCaret(editor, value, details);\n          },\n          addVisual: function (elm) {\n            return addVisualInternal(editor, elm);\n          }\n        },\n        selection: {\n          getContent: function (format, args) {\n            return getSelectedContentInternal(editor, format, args);\n          }\n        },\n        raw: {\n          getModel: function () {\n            return Optional.none();\n          }\n        }\n      };\n    };\n    var makeRtcAdaptor = function (rtcEditor) {\n      var defaultVars = function (vars) {\n        return isObject(vars) ? vars : {};\n      };\n      var undoManager = rtcEditor.undoManager, formatter = rtcEditor.formatter, editor = rtcEditor.editor, selection = rtcEditor.selection, raw = rtcEditor.raw;\n      return {\n        undoManager: {\n          beforeChange: undoManager.beforeChange,\n          add: undoManager.add,\n          undo: undoManager.undo,\n          redo: undoManager.redo,\n          clear: undoManager.clear,\n          reset: undoManager.reset,\n          hasUndo: undoManager.hasUndo,\n          hasRedo: undoManager.hasRedo,\n          transact: function (_undoManager, _locks, fn) {\n            return undoManager.transact(fn);\n          },\n          ignore: function (_locks, callback) {\n            return undoManager.ignore(callback);\n          },\n          extra: function (_undoManager, _index, callback1, callback2) {\n            return undoManager.extra(callback1, callback2);\n          }\n        },\n        formatter: {\n          match: function (name, vars, _node, similar) {\n            return formatter.match(name, defaultVars(vars), similar);\n          },\n          matchAll: formatter.matchAll,\n          matchNode: formatter.matchNode,\n          canApply: function (name) {\n            return formatter.canApply(name);\n          },\n          closest: function (names) {\n            return formatter.closest(names);\n          },\n          apply: function (name, vars, _node) {\n            return formatter.apply(name, defaultVars(vars));\n          },\n          remove: function (name, vars, _node, _similar) {\n            return formatter.remove(name, defaultVars(vars));\n          },\n          toggle: function (name, vars, _node) {\n            return formatter.toggle(name, defaultVars(vars));\n          },\n          formatChanged: function (_rfl, formats, callback, similar, vars) {\n            return formatter.formatChanged(formats, callback, similar, vars);\n          }\n        },\n        editor: {\n          getContent: function (args, _format) {\n            return editor.getContent(args);\n          },\n          setContent: function (content, args) {\n            return editor.setContent(content, args);\n          },\n          insertContent: function (content, _details) {\n            return editor.insertContent(content);\n          },\n          addVisual: editor.addVisual\n        },\n        selection: {\n          getContent: function (_format, args) {\n            return selection.getContent(args);\n          }\n        },\n        raw: {\n          getModel: function () {\n            return Optional.some(raw.getRawModel());\n          }\n        }\n      };\n    };\n    var makeNoopAdaptor = function () {\n      var nul = constant(null);\n      var empty = constant('');\n      return {\n        undoManager: {\n          beforeChange: noop,\n          add: nul,\n          undo: nul,\n          redo: nul,\n          clear: noop,\n          reset: noop,\n          hasUndo: never,\n          hasRedo: never,\n          transact: nul,\n          ignore: noop,\n          extra: noop\n        },\n        formatter: {\n          match: never,\n          matchAll: constant([]),\n          matchNode: constant(undefined),\n          canApply: never,\n          closest: empty,\n          apply: noop,\n          remove: noop,\n          toggle: noop,\n          formatChanged: constant({ unbind: noop })\n        },\n        editor: {\n          getContent: empty,\n          setContent: empty,\n          insertContent: noop,\n          addVisual: noop\n        },\n        selection: { getContent: empty },\n        raw: { getModel: constant(Optional.none()) }\n      };\n    };\n    var isRtc = function (editor) {\n      return has$2(editor.plugins, 'rtc');\n    };\n    var getRtcSetup = function (editor) {\n      return get$9(editor.plugins, 'rtc').bind(function (rtcPlugin) {\n        return Optional.from(rtcPlugin.setup);\n      });\n    };\n    var setup$i = function (editor) {\n      var editorCast = editor;\n      return getRtcSetup(editor).fold(function () {\n        editorCast.rtcInstance = makePlainAdaptor(editor);\n        return Optional.none();\n      }, function (setup) {\n        editorCast.rtcInstance = makeNoopAdaptor();\n        return Optional.some(function () {\n          return setup().then(function (rtcEditor) {\n            editorCast.rtcInstance = makeRtcAdaptor(rtcEditor);\n            return rtcEditor.rtc.isRemote;\n          });\n        });\n      });\n    };\n    var getRtcInstanceWithFallback = function (editor) {\n      return editor.rtcInstance ? editor.rtcInstance : makePlainAdaptor(editor);\n    };\n    var getRtcInstanceWithError = function (editor) {\n      var rtcInstance = editor.rtcInstance;\n      if (!rtcInstance) {\n        throw new Error('Failed to get RTC instance not yet initialized.');\n      } else {\n        return rtcInstance;\n      }\n    };\n    var beforeChange = function (editor, locks, beforeBookmark) {\n      getRtcInstanceWithError(editor).undoManager.beforeChange(locks, beforeBookmark);\n    };\n    var addUndoLevel = function (editor, undoManager, index, locks, beforeBookmark, level, event) {\n      return getRtcInstanceWithError(editor).undoManager.add(undoManager, index, locks, beforeBookmark, level, event);\n    };\n    var undo = function (editor, undoManager, locks, index) {\n      return getRtcInstanceWithError(editor).undoManager.undo(undoManager, locks, index);\n    };\n    var redo = function (editor, index, data) {\n      return getRtcInstanceWithError(editor).undoManager.redo(index, data);\n    };\n    var clear = function (editor, undoManager, index) {\n      getRtcInstanceWithError(editor).undoManager.clear(undoManager, index);\n    };\n    var reset = function (editor, undoManager) {\n      getRtcInstanceWithError(editor).undoManager.reset(undoManager);\n    };\n    var hasUndo = function (editor, undoManager, index) {\n      return getRtcInstanceWithError(editor).undoManager.hasUndo(undoManager, index);\n    };\n    var hasRedo = function (editor, undoManager, index) {\n      return getRtcInstanceWithError(editor).undoManager.hasRedo(undoManager, index);\n    };\n    var transact = function (editor, undoManager, locks, callback) {\n      return getRtcInstanceWithError(editor).undoManager.transact(undoManager, locks, callback);\n    };\n    var ignore = function (editor, locks, callback) {\n      getRtcInstanceWithError(editor).undoManager.ignore(locks, callback);\n    };\n    var extra = function (editor, undoManager, index, callback1, callback2) {\n      getRtcInstanceWithError(editor).undoManager.extra(undoManager, index, callback1, callback2);\n    };\n    var matchFormat = function (editor, name, vars, node, similar) {\n      return getRtcInstanceWithError(editor).formatter.match(name, vars, node, similar);\n    };\n    var matchAllFormats = function (editor, names, vars) {\n      return getRtcInstanceWithError(editor).formatter.matchAll(names, vars);\n    };\n    var matchNodeFormat = function (editor, node, name, vars, similar) {\n      return getRtcInstanceWithError(editor).formatter.matchNode(node, name, vars, similar);\n    };\n    var canApplyFormat = function (editor, name) {\n      return getRtcInstanceWithError(editor).formatter.canApply(name);\n    };\n    var closestFormat = function (editor, names) {\n      return getRtcInstanceWithError(editor).formatter.closest(names);\n    };\n    var applyFormat = function (editor, name, vars, node) {\n      getRtcInstanceWithError(editor).formatter.apply(name, vars, node);\n    };\n    var removeFormat = function (editor, name, vars, node, similar) {\n      getRtcInstanceWithError(editor).formatter.remove(name, vars, node, similar);\n    };\n    var toggleFormat = function (editor, name, vars, node) {\n      getRtcInstanceWithError(editor).formatter.toggle(name, vars, node);\n    };\n    var formatChanged = function (editor, registeredFormatListeners, formats, callback, similar, vars) {\n      return getRtcInstanceWithError(editor).formatter.formatChanged(registeredFormatListeners, formats, callback, similar, vars);\n    };\n    var getContent$2 = function (editor, args, format) {\n      return getRtcInstanceWithFallback(editor).editor.getContent(args, format);\n    };\n    var setContent$2 = function (editor, content, args) {\n      return getRtcInstanceWithFallback(editor).editor.setContent(content, args);\n    };\n    var insertContent = function (editor, value, details) {\n      return getRtcInstanceWithFallback(editor).editor.insertContent(value, details);\n    };\n    var getSelectedContent = function (editor, format, args) {\n      return getRtcInstanceWithError(editor).selection.getContent(format, args);\n    };\n    var addVisual$1 = function (editor, elm) {\n      return getRtcInstanceWithError(editor).editor.addVisual(elm);\n    };\n\n    var getContent$1 = function (editor, args) {\n      if (args === void 0) {\n        args = {};\n      }\n      var format = args.format ? args.format : 'html';\n      return getSelectedContent(editor, format, args);\n    };\n\n    var removeEmpty = function (text) {\n      if (text.dom.length === 0) {\n        remove$7(text);\n        return Optional.none();\n      } else {\n        return Optional.some(text);\n      }\n    };\n    var walkPastBookmark = function (node, start) {\n      return node.filter(function (elm) {\n        return BookmarkManager.isBookmarkNode(elm.dom);\n      }).bind(start ? nextSibling : prevSibling);\n    };\n    var merge = function (outer, inner, rng, start) {\n      var outerElm = outer.dom;\n      var innerElm = inner.dom;\n      var oldLength = start ? outerElm.length : innerElm.length;\n      if (start) {\n        mergeTextNodes(outerElm, innerElm, false, !start);\n        rng.setStart(innerElm, oldLength);\n      } else {\n        mergeTextNodes(innerElm, outerElm, false, !start);\n        rng.setEnd(innerElm, oldLength);\n      }\n    };\n    var normalizeTextIfRequired = function (inner, start) {\n      parent(inner).each(function (root) {\n        var text = inner.dom;\n        if (start && needsToBeNbspLeft(root, CaretPosition(text, 0))) {\n          normalizeWhitespaceAfter(text, 0);\n        } else if (!start && needsToBeNbspRight(root, CaretPosition(text, text.length))) {\n          normalizeWhitespaceBefore(text, text.length);\n        }\n      });\n    };\n    var mergeAndNormalizeText = function (outerNode, innerNode, rng, start) {\n      outerNode.bind(function (outer) {\n        var normalizer = start ? normalizeWhitespaceBefore : normalizeWhitespaceAfter;\n        normalizer(outer.dom, start ? outer.dom.length : 0);\n        return innerNode.filter(isText$8).map(function (inner) {\n          return merge(outer, inner, rng, start);\n        });\n      }).orThunk(function () {\n        var innerTextNode = walkPastBookmark(innerNode, start).or(innerNode).filter(isText$8);\n        return innerTextNode.map(function (inner) {\n          return normalizeTextIfRequired(inner, start);\n        });\n      });\n    };\n    var rngSetContent = function (rng, fragment) {\n      var firstChild = Optional.from(fragment.firstChild).map(SugarElement.fromDom);\n      var lastChild = Optional.from(fragment.lastChild).map(SugarElement.fromDom);\n      rng.deleteContents();\n      rng.insertNode(fragment);\n      var prevText = firstChild.bind(prevSibling).filter(isText$8).bind(removeEmpty);\n      var nextText = lastChild.bind(nextSibling).filter(isText$8).bind(removeEmpty);\n      mergeAndNormalizeText(prevText, firstChild, rng, true);\n      mergeAndNormalizeText(nextText, lastChild, rng, false);\n      rng.collapse(false);\n    };\n    var setupArgs = function (args, content) {\n      return __assign(__assign({ format: 'html' }, args), {\n        set: true,\n        selection: true,\n        content: content\n      });\n    };\n    var cleanContent = function (editor, args) {\n      if (args.format !== 'raw') {\n        var rng = editor.selection.getRng();\n        var contextBlock = editor.dom.getParent(rng.commonAncestorContainer, editor.dom.isBlock);\n        var contextArgs = contextBlock ? { context: contextBlock.nodeName.toLowerCase() } : {};\n        var node = editor.parser.parse(args.content, __assign(__assign({\n          isRootContent: true,\n          forced_root_block: false\n        }, contextArgs), args));\n        return HtmlSerializer({ validate: editor.validate }, editor.schema).serialize(node);\n      } else {\n        return args.content;\n      }\n    };\n    var setContent$1 = function (editor, content, args) {\n      if (args === void 0) {\n        args = {};\n      }\n      var defaultedArgs = setupArgs(args, content);\n      var updatedArgs = defaultedArgs;\n      if (!defaultedArgs.no_events) {\n        var eventArgs = editor.fire('BeforeSetContent', defaultedArgs);\n        if (eventArgs.isDefaultPrevented()) {\n          editor.fire('SetContent', eventArgs);\n          return;\n        } else {\n          updatedArgs = eventArgs;\n        }\n      }\n      updatedArgs.content = cleanContent(editor, updatedArgs);\n      var rng = editor.selection.getRng();\n      rngSetContent(rng, rng.createContextualFragment(updatedArgs.content));\n      editor.selection.setRng(rng);\n      scrollRangeIntoView(editor, rng);\n      if (!updatedArgs.no_events) {\n        editor.fire('SetContent', updatedArgs);\n      }\n    };\n\n    var deleteFromCallbackMap = function (callbackMap, selector, callback) {\n      if (callbackMap && has$2(callbackMap, selector)) {\n        var newCallbacks = filter$4(callbackMap[selector], function (cb) {\n          return cb !== callback;\n        });\n        if (newCallbacks.length === 0) {\n          delete callbackMap[selector];\n        } else {\n          callbackMap[selector] = newCallbacks;\n        }\n      }\n    };\n    function SelectorChanged (dom, editor) {\n      var selectorChangedData;\n      var currentSelectors;\n      var findMatchingNode = function (selector, nodes) {\n        return find$3(nodes, function (node) {\n          return dom.is(node, selector);\n        });\n      };\n      var getParents = function (elem) {\n        return dom.getParents(elem, null, dom.getRoot());\n      };\n      return {\n        selectorChangedWithUnbind: function (selector, callback) {\n          if (!selectorChangedData) {\n            selectorChangedData = {};\n            currentSelectors = {};\n            editor.on('NodeChange', function (e) {\n              var node = e.element;\n              var parents = getParents(node);\n              var matchedSelectors = {};\n              Tools.each(selectorChangedData, function (callbacks, selector) {\n                findMatchingNode(selector, parents).each(function (node) {\n                  if (!currentSelectors[selector]) {\n                    each$k(callbacks, function (callback) {\n                      callback(true, {\n                        node: node,\n                        selector: selector,\n                        parents: parents\n                      });\n                    });\n                    currentSelectors[selector] = callbacks;\n                  }\n                  matchedSelectors[selector] = callbacks;\n                });\n              });\n              Tools.each(currentSelectors, function (callbacks, selector) {\n                if (!matchedSelectors[selector]) {\n                  delete currentSelectors[selector];\n                  Tools.each(callbacks, function (callback) {\n                    callback(false, {\n                      node: node,\n                      selector: selector,\n                      parents: parents\n                    });\n                  });\n                }\n              });\n            });\n          }\n          if (!selectorChangedData[selector]) {\n            selectorChangedData[selector] = [];\n          }\n          selectorChangedData[selector].push(callback);\n          findMatchingNode(selector, getParents(editor.selection.getStart())).each(function () {\n            currentSelectors[selector] = selectorChangedData[selector];\n          });\n          return {\n            unbind: function () {\n              deleteFromCallbackMap(selectorChangedData, selector, callback);\n              deleteFromCallbackMap(currentSelectors, selector, callback);\n            }\n          };\n        }\n      };\n    }\n\n    var isNativeIeSelection = function (rng) {\n      return !!rng.select;\n    };\n    var isAttachedToDom = function (node) {\n      return !!(node && node.ownerDocument) && contains$1(SugarElement.fromDom(node.ownerDocument), SugarElement.fromDom(node));\n    };\n    var isValidRange = function (rng) {\n      if (!rng) {\n        return false;\n      } else if (isNativeIeSelection(rng)) {\n        return true;\n      } else {\n        return isAttachedToDom(rng.startContainer) && isAttachedToDom(rng.endContainer);\n      }\n    };\n    var EditorSelection = function (dom, win, serializer, editor) {\n      var selectedRange;\n      var explicitRange;\n      var selectorChangedWithUnbind = SelectorChanged(dom, editor).selectorChangedWithUnbind;\n      var setCursorLocation = function (node, offset) {\n        var rng = dom.createRng();\n        if (isNonNullable(node) && isNonNullable(offset)) {\n          rng.setStart(node, offset);\n          rng.setEnd(node, offset);\n          setRng(rng);\n          collapse(false);\n        } else {\n          moveEndPoint(dom, rng, editor.getBody(), true);\n          setRng(rng);\n        }\n      };\n      var getContent = function (args) {\n        return getContent$1(editor, args);\n      };\n      var setContent = function (content, args) {\n        return setContent$1(editor, content, args);\n      };\n      var getStart$1 = function (real) {\n        return getStart(editor.getBody(), getRng$1(), real);\n      };\n      var getEnd$1 = function (real) {\n        return getEnd(editor.getBody(), getRng$1(), real);\n      };\n      var getBookmark = function (type, normalized) {\n        return bookmarkManager.getBookmark(type, normalized);\n      };\n      var moveToBookmark = function (bookmark) {\n        return bookmarkManager.moveToBookmark(bookmark);\n      };\n      var select$1 = function (node, content) {\n        select(dom, node, content).each(setRng);\n        return node;\n      };\n      var isCollapsed = function () {\n        var rng = getRng$1(), sel = getSel();\n        if (!rng || rng.item) {\n          return false;\n        }\n        if (rng.compareEndPoints) {\n          return rng.compareEndPoints('StartToEnd', rng) === 0;\n        }\n        return !sel || rng.collapsed;\n      };\n      var collapse = function (toStart) {\n        var rng = getRng$1();\n        rng.collapse(!!toStart);\n        setRng(rng);\n      };\n      var getSel = function () {\n        return win.getSelection ? win.getSelection() : win.document.selection;\n      };\n      var getRng$1 = function () {\n        var selection, rng, elm;\n        var tryCompareBoundaryPoints = function (how, sourceRange, destinationRange) {\n          try {\n            return sourceRange.compareBoundaryPoints(how, destinationRange);\n          } catch (ex) {\n            return -1;\n          }\n        };\n        var doc = win.document;\n        if (editor.bookmark !== undefined && hasFocus(editor) === false) {\n          var bookmark = getRng(editor);\n          if (bookmark.isSome()) {\n            return bookmark.map(function (r) {\n              return processRanges(editor, [r])[0];\n            }).getOr(doc.createRange());\n          }\n        }\n        try {\n          if ((selection = getSel()) && !isRestrictedNode(selection.anchorNode)) {\n            if (selection.rangeCount > 0) {\n              rng = selection.getRangeAt(0);\n            } else {\n              rng = selection.createRange ? selection.createRange() : doc.createRange();\n            }\n            rng = processRanges(editor, [rng])[0];\n          }\n        } catch (ex) {\n        }\n        if (!rng) {\n          rng = doc.createRange ? doc.createRange() : doc.body.createTextRange();\n        }\n        if (rng.setStart && rng.startContainer.nodeType === 9 && rng.collapsed) {\n          elm = dom.getRoot();\n          rng.setStart(elm, 0);\n          rng.setEnd(elm, 0);\n        }\n        if (selectedRange && explicitRange) {\n          if (tryCompareBoundaryPoints(rng.START_TO_START, rng, selectedRange) === 0 && tryCompareBoundaryPoints(rng.END_TO_END, rng, selectedRange) === 0) {\n            rng = explicitRange;\n          } else {\n            selectedRange = null;\n            explicitRange = null;\n          }\n        }\n        return rng;\n      };\n      var setRng = function (rng, forward) {\n        var node;\n        if (!isValidRange(rng)) {\n          return;\n        }\n        var ieRange = isNativeIeSelection(rng) ? rng : null;\n        if (ieRange) {\n          explicitRange = null;\n          try {\n            ieRange.select();\n          } catch (ex) {\n          }\n          return;\n        }\n        var sel = getSel();\n        var evt = editor.fire('SetSelectionRange', {\n          range: rng,\n          forward: forward\n        });\n        rng = evt.range;\n        if (sel) {\n          explicitRange = rng;\n          try {\n            sel.removeAllRanges();\n            sel.addRange(rng);\n          } catch (ex) {\n          }\n          if (forward === false && sel.extend) {\n            sel.collapse(rng.endContainer, rng.endOffset);\n            sel.extend(rng.startContainer, rng.startOffset);\n          }\n          selectedRange = sel.rangeCount > 0 ? sel.getRangeAt(0) : null;\n        }\n        if (!rng.collapsed && rng.startContainer === rng.endContainer && sel.setBaseAndExtent && !Env.ie) {\n          if (rng.endOffset - rng.startOffset < 2) {\n            if (rng.startContainer.hasChildNodes()) {\n              node = rng.startContainer.childNodes[rng.startOffset];\n              if (node && node.tagName === 'IMG') {\n                sel.setBaseAndExtent(rng.startContainer, rng.startOffset, rng.endContainer, rng.endOffset);\n                if (sel.anchorNode !== rng.startContainer || sel.focusNode !== rng.endContainer) {\n                  sel.setBaseAndExtent(node, 0, node, 1);\n                }\n              }\n            }\n          }\n        }\n        editor.fire('AfterSetSelectionRange', {\n          range: rng,\n          forward: forward\n        });\n      };\n      var setNode = function (elm) {\n        setContent(dom.getOuterHTML(elm));\n        return elm;\n      };\n      var getNode$1 = function () {\n        return getNode(editor.getBody(), getRng$1());\n      };\n      var getSelectedBlocks$1 = function (startElm, endElm) {\n        return getSelectedBlocks(dom, getRng$1(), startElm, endElm);\n      };\n      var isForward = function () {\n        var sel = getSel();\n        var anchorNode = sel === null || sel === void 0 ? void 0 : sel.anchorNode;\n        var focusNode = sel === null || sel === void 0 ? void 0 : sel.focusNode;\n        if (!sel || !anchorNode || !focusNode || isRestrictedNode(anchorNode) || isRestrictedNode(focusNode)) {\n          return true;\n        }\n        var anchorRange = dom.createRng();\n        anchorRange.setStart(anchorNode, sel.anchorOffset);\n        anchorRange.collapse(true);\n        var focusRange = dom.createRng();\n        focusRange.setStart(focusNode, sel.focusOffset);\n        focusRange.collapse(true);\n        return anchorRange.compareBoundaryPoints(anchorRange.START_TO_START, focusRange) <= 0;\n      };\n      var normalize = function () {\n        var rng = getRng$1();\n        var sel = getSel();\n        if (!hasMultipleRanges(sel) && hasAnyRanges(editor)) {\n          var normRng = normalize$2(dom, rng);\n          normRng.each(function (normRng) {\n            setRng(normRng, isForward());\n          });\n          return normRng.getOr(rng);\n        }\n        return rng;\n      };\n      var selectorChanged = function (selector, callback) {\n        selectorChangedWithUnbind(selector, callback);\n        return exports;\n      };\n      var getScrollContainer = function () {\n        var scrollContainer;\n        var node = dom.getRoot();\n        while (node && node.nodeName !== 'BODY') {\n          if (node.scrollHeight > node.clientHeight) {\n            scrollContainer = node;\n            break;\n          }\n          node = node.parentNode;\n        }\n        return scrollContainer;\n      };\n      var scrollIntoView = function (elm, alignToTop) {\n        if (isNonNullable(elm)) {\n          scrollElementIntoView(editor, elm, alignToTop);\n        } else {\n          scrollRangeIntoView(editor, getRng$1(), alignToTop);\n        }\n      };\n      var placeCaretAt = function (clientX, clientY) {\n        return setRng(fromPoint(clientX, clientY, editor.getDoc()));\n      };\n      var getBoundingClientRect = function () {\n        var rng = getRng$1();\n        return rng.collapsed ? CaretPosition.fromRangeStart(rng).getClientRects()[0] : rng.getBoundingClientRect();\n      };\n      var destroy = function () {\n        win = selectedRange = explicitRange = null;\n        controlSelection.destroy();\n      };\n      var exports = {\n        bookmarkManager: null,\n        controlSelection: null,\n        dom: dom,\n        win: win,\n        serializer: serializer,\n        editor: editor,\n        collapse: collapse,\n        setCursorLocation: setCursorLocation,\n        getContent: getContent,\n        setContent: setContent,\n        getBookmark: getBookmark,\n        moveToBookmark: moveToBookmark,\n        select: select$1,\n        isCollapsed: isCollapsed,\n        isForward: isForward,\n        setNode: setNode,\n        getNode: getNode$1,\n        getSel: getSel,\n        setRng: setRng,\n        getRng: getRng$1,\n        getStart: getStart$1,\n        getEnd: getEnd$1,\n        getSelectedBlocks: getSelectedBlocks$1,\n        normalize: normalize,\n        selectorChanged: selectorChanged,\n        selectorChangedWithUnbind: selectorChangedWithUnbind,\n        getScrollContainer: getScrollContainer,\n        scrollIntoView: scrollIntoView,\n        placeCaretAt: placeCaretAt,\n        getBoundingClientRect: getBoundingClientRect,\n        destroy: destroy\n      };\n      var bookmarkManager = BookmarkManager(exports);\n      var controlSelection = ControlSelection(exports, editor);\n      exports.bookmarkManager = bookmarkManager;\n      exports.controlSelection = controlSelection;\n      return exports;\n    };\n\n    var removeAttrs = function (node, names) {\n      each$k(names, function (name) {\n        node.attr(name, null);\n      });\n    };\n    var addFontToSpansFilter = function (domParser, styles, fontSizes) {\n      domParser.addNodeFilter('font', function (nodes) {\n        each$k(nodes, function (node) {\n          var props = styles.parse(node.attr('style'));\n          var color = node.attr('color');\n          var face = node.attr('face');\n          var size = node.attr('size');\n          if (color) {\n            props.color = color;\n          }\n          if (face) {\n            props['font-family'] = face;\n          }\n          if (size) {\n            props['font-size'] = fontSizes[parseInt(node.attr('size'), 10) - 1];\n          }\n          node.name = 'span';\n          node.attr('style', styles.serialize(props));\n          removeAttrs(node, [\n            'color',\n            'face',\n            'size'\n          ]);\n        });\n      });\n    };\n    var addStrikeToSpanFilter = function (domParser, styles) {\n      domParser.addNodeFilter('strike', function (nodes) {\n        each$k(nodes, function (node) {\n          var props = styles.parse(node.attr('style'));\n          props['text-decoration'] = 'line-through';\n          node.name = 'span';\n          node.attr('style', styles.serialize(props));\n        });\n      });\n    };\n    var addFilters = function (domParser, settings) {\n      var styles = Styles();\n      if (settings.convert_fonts_to_spans) {\n        addFontToSpansFilter(domParser, styles, Tools.explode(settings.font_size_legacy_values));\n      }\n      addStrikeToSpanFilter(domParser, styles);\n    };\n    var register$2 = function (domParser, settings) {\n      if (settings.inline_styles) {\n        addFilters(domParser, settings);\n      }\n    };\n\n    var blobUriToBlob = function (url) {\n      return new promiseObj(function (resolve, reject) {\n        var rejectWithError = function () {\n          reject('Cannot convert ' + url + ' to Blob. Resource might not exist or is inaccessible.');\n        };\n        try {\n          var xhr_1 = new XMLHttpRequest();\n          xhr_1.open('GET', url, true);\n          xhr_1.responseType = 'blob';\n          xhr_1.onload = function () {\n            if (xhr_1.status === 200) {\n              resolve(xhr_1.response);\n            } else {\n              rejectWithError();\n            }\n          };\n          xhr_1.onerror = rejectWithError;\n          xhr_1.send();\n        } catch (ex) {\n          rejectWithError();\n        }\n      });\n    };\n    var parseDataUri = function (uri) {\n      var type;\n      var uriParts = decodeURIComponent(uri).split(',');\n      var matches = /data:([^;]+)/.exec(uriParts[0]);\n      if (matches) {\n        type = matches[1];\n      }\n      return {\n        type: type,\n        data: uriParts[1]\n      };\n    };\n    var buildBlob = function (type, data) {\n      var str;\n      try {\n        str = atob(data);\n      } catch (e) {\n        return Optional.none();\n      }\n      var arr = new Uint8Array(str.length);\n      for (var i = 0; i < arr.length; i++) {\n        arr[i] = str.charCodeAt(i);\n      }\n      return Optional.some(new Blob([arr], { type: type }));\n    };\n    var dataUriToBlob = function (uri) {\n      return new promiseObj(function (resolve) {\n        var _a = parseDataUri(uri), type = _a.type, data = _a.data;\n        buildBlob(type, data).fold(function () {\n          return resolve(new Blob([]));\n        }, resolve);\n      });\n    };\n    var uriToBlob = function (url) {\n      if (url.indexOf('blob:') === 0) {\n        return blobUriToBlob(url);\n      }\n      if (url.indexOf('data:') === 0) {\n        return dataUriToBlob(url);\n      }\n      return null;\n    };\n    var blobToDataUri = function (blob) {\n      return new promiseObj(function (resolve) {\n        var reader = new FileReader();\n        reader.onloadend = function () {\n          resolve(reader.result);\n        };\n        reader.readAsDataURL(blob);\n      });\n    };\n\n    var count$1 = 0;\n    var uniqueId = function (prefix) {\n      return (prefix || 'blobid') + count$1++;\n    };\n    var imageToBlobInfo = function (blobCache, img, resolve, reject) {\n      var base64, blobInfo;\n      if (img.src.indexOf('blob:') === 0) {\n        blobInfo = blobCache.getByUri(img.src);\n        if (blobInfo) {\n          resolve({\n            image: img,\n            blobInfo: blobInfo\n          });\n        } else {\n          uriToBlob(img.src).then(function (blob) {\n            blobToDataUri(blob).then(function (dataUri) {\n              base64 = parseDataUri(dataUri).data;\n              blobInfo = blobCache.create(uniqueId(), blob, base64);\n              blobCache.add(blobInfo);\n              resolve({\n                image: img,\n                blobInfo: blobInfo\n              });\n            });\n          }, function (err) {\n            reject(err);\n          });\n        }\n        return;\n      }\n      var _a = parseDataUri(img.src), data = _a.data, type = _a.type;\n      base64 = data;\n      blobInfo = blobCache.getByData(base64, type);\n      if (blobInfo) {\n        resolve({\n          image: img,\n          blobInfo: blobInfo\n        });\n      } else {\n        uriToBlob(img.src).then(function (blob) {\n          blobInfo = blobCache.create(uniqueId(), blob, base64);\n          blobCache.add(blobInfo);\n          resolve({\n            image: img,\n            blobInfo: blobInfo\n          });\n        }, function (err) {\n          reject(err);\n        });\n      }\n    };\n    var getAllImages = function (elm) {\n      return elm ? from(elm.getElementsByTagName('img')) : [];\n    };\n    var ImageScanner = function (uploadStatus, blobCache) {\n      var cachedPromises = {};\n      var findAll = function (elm, predicate) {\n        if (!predicate) {\n          predicate = always;\n        }\n        var images = filter$4(getAllImages(elm), function (img) {\n          var src = img.src;\n          if (!Env.fileApi) {\n            return false;\n          }\n          if (img.hasAttribute('data-mce-bogus')) {\n            return false;\n          }\n          if (img.hasAttribute('data-mce-placeholder')) {\n            return false;\n          }\n          if (!src || src === Env.transparentSrc) {\n            return false;\n          }\n          if (src.indexOf('blob:') === 0) {\n            return !uploadStatus.isUploaded(src) && predicate(img);\n          }\n          if (src.indexOf('data:') === 0) {\n            return predicate(img);\n          }\n          return false;\n        });\n        var promises = map$3(images, function (img) {\n          if (cachedPromises[img.src] !== undefined) {\n            return new promiseObj(function (resolve) {\n              cachedPromises[img.src].then(function (imageInfo) {\n                if (typeof imageInfo === 'string') {\n                  return imageInfo;\n                }\n                resolve({\n                  image: img,\n                  blobInfo: imageInfo.blobInfo\n                });\n              });\n            });\n          }\n          var newPromise = new promiseObj(function (resolve, reject) {\n            imageToBlobInfo(blobCache, img, resolve, reject);\n          }).then(function (result) {\n            delete cachedPromises[result.image.src];\n            return result;\n          }).catch(function (error) {\n            delete cachedPromises[img.src];\n            return error;\n          });\n          cachedPromises[img.src] = newPromise;\n          return newPromise;\n        });\n        return promiseObj.all(promises);\n      };\n      return { findAll: findAll };\n    };\n\n    var paddEmptyNode = function (settings, args, blockElements, node) {\n      var brPreferred = settings.padd_empty_with_br || args.insert;\n      if (brPreferred && blockElements[node.name]) {\n        node.empty().append(new AstNode('br', 1)).shortEnded = true;\n      } else {\n        node.empty().append(new AstNode('#text', 3)).value = nbsp;\n      }\n    };\n    var isPaddedWithNbsp = function (node) {\n      return hasOnlyChild(node, '#text') && node.firstChild.value === nbsp;\n    };\n    var hasOnlyChild = function (node, name) {\n      return node && node.firstChild && node.firstChild === node.lastChild && node.firstChild.name === name;\n    };\n    var isPadded = function (schema, node) {\n      var rule = schema.getElementRule(node.name);\n      return rule && rule.paddEmpty;\n    };\n    var isEmpty = function (schema, nonEmptyElements, whitespaceElements, node) {\n      return node.isEmpty(nonEmptyElements, whitespaceElements, function (node) {\n        return isPadded(schema, node);\n      });\n    };\n    var isLineBreakNode = function (node, blockElements) {\n      return node && (has$2(blockElements, node.name) || node.name === 'br');\n    };\n\n    var isBogusImage = function (img) {\n      return isNonNullable(img.attr('data-mce-bogus'));\n    };\n    var isInternalImageSource = function (img) {\n      return img.attr('src') === Env.transparentSrc || isNonNullable(img.attr('data-mce-placeholder'));\n    };\n    var isValidDataImg = function (img, settings) {\n      if (settings.images_dataimg_filter) {\n        var imgElem_1 = new Image();\n        imgElem_1.src = img.attr('src');\n        each$j(img.attributes.map, function (value, key) {\n          imgElem_1.setAttribute(key, value);\n        });\n        return settings.images_dataimg_filter(imgElem_1);\n      } else {\n        return true;\n      }\n    };\n    var registerBase64ImageFilter = function (parser, settings) {\n      var blobCache = settings.blob_cache;\n      var processImage = function (img) {\n        var inputSrc = img.attr('src');\n        if (isInternalImageSource(img) || isBogusImage(img)) {\n          return;\n        }\n        parseDataUri$1(inputSrc).filter(function () {\n          return isValidDataImg(img, settings);\n        }).bind(function (_a) {\n          var type = _a.type, data = _a.data;\n          return Optional.from(blobCache.getByData(data, type)).orThunk(function () {\n            return buildBlob(type, data).map(function (blob) {\n              var blobInfo = blobCache.create(uniqueId(), blob, data);\n              blobCache.add(blobInfo);\n              return blobInfo;\n            });\n          });\n        }).each(function (blobInfo) {\n          img.attr('src', blobInfo.blobUri());\n        });\n      };\n      if (blobCache) {\n        parser.addAttributeFilter('src', function (nodes) {\n          return each$k(nodes, processImage);\n        });\n      }\n    };\n    var register$1 = function (parser, settings) {\n      var schema = parser.schema;\n      if (settings.remove_trailing_brs) {\n        parser.addNodeFilter('br', function (nodes, _, args) {\n          var i;\n          var l = nodes.length;\n          var node;\n          var blockElements = Tools.extend({}, schema.getBlockElements());\n          var nonEmptyElements = schema.getNonEmptyElements();\n          var parent, lastParent, prev, prevName;\n          var whiteSpaceElements = schema.getWhiteSpaceElements();\n          var elementRule, textNode;\n          blockElements.body = 1;\n          for (i = 0; i < l; i++) {\n            node = nodes[i];\n            parent = node.parent;\n            if (blockElements[node.parent.name] && node === parent.lastChild) {\n              prev = node.prev;\n              while (prev) {\n                prevName = prev.name;\n                if (prevName !== 'span' || prev.attr('data-mce-type') !== 'bookmark') {\n                  if (prevName === 'br') {\n                    node = null;\n                  }\n                  break;\n                }\n                prev = prev.prev;\n              }\n              if (node) {\n                node.remove();\n                if (isEmpty(schema, nonEmptyElements, whiteSpaceElements, parent)) {\n                  elementRule = schema.getElementRule(parent.name);\n                  if (elementRule) {\n                    if (elementRule.removeEmpty) {\n                      parent.remove();\n                    } else if (elementRule.paddEmpty) {\n                      paddEmptyNode(settings, args, blockElements, parent);\n                    }\n                  }\n                }\n              }\n            } else {\n              lastParent = node;\n              while (parent && parent.firstChild === lastParent && parent.lastChild === lastParent) {\n                lastParent = parent;\n                if (blockElements[parent.name]) {\n                  break;\n                }\n                parent = parent.parent;\n              }\n              if (lastParent === parent && settings.padd_empty_with_br !== true) {\n                textNode = new AstNode('#text', 3);\n                textNode.value = nbsp;\n                node.replace(textNode);\n              }\n            }\n          }\n        });\n      }\n      parser.addAttributeFilter('href', function (nodes) {\n        var i = nodes.length;\n        var appendRel = function (rel) {\n          var parts = rel.split(' ').filter(function (p) {\n            return p.length > 0;\n          });\n          return parts.concat(['noopener']).sort().join(' ');\n        };\n        var addNoOpener = function (rel) {\n          var newRel = rel ? Tools.trim(rel) : '';\n          if (!/\\b(noopener)\\b/g.test(newRel)) {\n            return appendRel(newRel);\n          } else {\n            return newRel;\n          }\n        };\n        if (!settings.allow_unsafe_link_target) {\n          while (i--) {\n            var node = nodes[i];\n            if (node.name === 'a' && node.attr('target') === '_blank') {\n              node.attr('rel', addNoOpener(node.attr('rel')));\n            }\n          }\n        }\n      });\n      if (!settings.allow_html_in_named_anchor) {\n        parser.addAttributeFilter('id,name', function (nodes) {\n          var i = nodes.length, sibling, prevSibling, parent, node;\n          while (i--) {\n            node = nodes[i];\n            if (node.name === 'a' && node.firstChild && !node.attr('href')) {\n              parent = node.parent;\n              sibling = node.lastChild;\n              do {\n                prevSibling = sibling.prev;\n                parent.insert(sibling, node);\n                sibling = prevSibling;\n              } while (sibling);\n            }\n          }\n        });\n      }\n      if (settings.fix_list_elements) {\n        parser.addNodeFilter('ul,ol', function (nodes) {\n          var i = nodes.length, node, parentNode;\n          while (i--) {\n            node = nodes[i];\n            parentNode = node.parent;\n            if (parentNode.name === 'ul' || parentNode.name === 'ol') {\n              if (node.prev && node.prev.name === 'li') {\n                node.prev.append(node);\n              } else {\n                var li = new AstNode('li', 1);\n                li.attr('style', 'list-style-type: none');\n                node.wrap(li);\n              }\n            }\n          }\n        });\n      }\n      if (settings.validate && schema.getValidClasses()) {\n        parser.addAttributeFilter('class', function (nodes) {\n          var validClasses = schema.getValidClasses();\n          var i = nodes.length;\n          while (i--) {\n            var node = nodes[i];\n            var classList = node.attr('class').split(' ');\n            var classValue = '';\n            for (var ci = 0; ci < classList.length; ci++) {\n              var className = classList[ci];\n              var valid = false;\n              var validClassesMap = validClasses['*'];\n              if (validClassesMap && validClassesMap[className]) {\n                valid = true;\n              }\n              validClassesMap = validClasses[node.name];\n              if (!valid && validClassesMap && validClassesMap[className]) {\n                valid = true;\n              }\n              if (valid) {\n                if (classValue) {\n                  classValue += ' ';\n                }\n                classValue += className;\n              }\n            }\n            if (!classValue.length) {\n              classValue = null;\n            }\n            node.attr('class', classValue);\n          }\n        });\n      }\n      registerBase64ImageFilter(parser, settings);\n    };\n\n    var makeMap = Tools.makeMap, each$6 = Tools.each, explode$2 = Tools.explode, extend$4 = Tools.extend;\n    var DomParser = function (settings, schema) {\n      if (schema === void 0) {\n        schema = Schema();\n      }\n      var nodeFilters = {};\n      var attributeFilters = [];\n      var matchedNodes = {};\n      var matchedAttributes = {};\n      settings = settings || {};\n      settings.validate = 'validate' in settings ? settings.validate : true;\n      settings.root_name = settings.root_name || 'body';\n      var fixInvalidChildren = function (nodes) {\n        var nonSplitableElements = makeMap('tr,td,th,tbody,thead,tfoot,table');\n        var nonEmptyElements = schema.getNonEmptyElements();\n        var whitespaceElements = schema.getWhiteSpaceElements();\n        var textBlockElements = schema.getTextBlockElements();\n        var specialElements = schema.getSpecialElements();\n        var removeOrUnwrapInvalidNode = function (node, originalNodeParent) {\n          if (originalNodeParent === void 0) {\n            originalNodeParent = node.parent;\n          }\n          if (specialElements[node.name]) {\n            node.empty().remove();\n          } else {\n            var children = node.children();\n            for (var _i = 0, children_1 = children; _i < children_1.length; _i++) {\n              var childNode = children_1[_i];\n              if (!schema.isValidChild(originalNodeParent.name, childNode.name)) {\n                removeOrUnwrapInvalidNode(childNode, originalNodeParent);\n              }\n            }\n            node.unwrap();\n          }\n        };\n        for (var ni = 0; ni < nodes.length; ni++) {\n          var node = nodes[ni];\n          var parent_1 = void 0, newParent = void 0, tempNode = void 0;\n          if (!node.parent || node.fixed) {\n            continue;\n          }\n          if (textBlockElements[node.name] && node.parent.name === 'li') {\n            var sibling = node.next;\n            while (sibling) {\n              if (textBlockElements[sibling.name]) {\n                sibling.name = 'li';\n                sibling.fixed = true;\n                node.parent.insert(sibling, node.parent);\n              } else {\n                break;\n              }\n              sibling = sibling.next;\n            }\n            node.unwrap();\n            continue;\n          }\n          var parents = [node];\n          for (parent_1 = node.parent; parent_1 && !schema.isValidChild(parent_1.name, node.name) && !nonSplitableElements[parent_1.name]; parent_1 = parent_1.parent) {\n            parents.push(parent_1);\n          }\n          if (parent_1 && parents.length > 1) {\n            if (schema.isValidChild(parent_1.name, node.name)) {\n              parents.reverse();\n              newParent = filterNode(parents[0].clone());\n              var currentNode = newParent;\n              for (var i = 0; i < parents.length - 1; i++) {\n                if (schema.isValidChild(currentNode.name, parents[i].name)) {\n                  tempNode = filterNode(parents[i].clone());\n                  currentNode.append(tempNode);\n                } else {\n                  tempNode = currentNode;\n                }\n                for (var childNode = parents[i].firstChild; childNode && childNode !== parents[i + 1];) {\n                  var nextNode = childNode.next;\n                  tempNode.append(childNode);\n                  childNode = nextNode;\n                }\n                currentNode = tempNode;\n              }\n              if (!isEmpty(schema, nonEmptyElements, whitespaceElements, newParent)) {\n                parent_1.insert(newParent, parents[0], true);\n                parent_1.insert(node, newParent);\n              } else {\n                parent_1.insert(node, parents[0], true);\n              }\n              parent_1 = parents[0];\n              if (isEmpty(schema, nonEmptyElements, whitespaceElements, parent_1) || hasOnlyChild(parent_1, 'br')) {\n                parent_1.empty().remove();\n              }\n            } else {\n              removeOrUnwrapInvalidNode(node);\n            }\n          } else if (node.parent) {\n            if (node.name === 'li') {\n              var sibling = node.prev;\n              if (sibling && (sibling.name === 'ul' || sibling.name === 'ol')) {\n                sibling.append(node);\n                continue;\n              }\n              sibling = node.next;\n              if (sibling && (sibling.name === 'ul' || sibling.name === 'ol')) {\n                sibling.insert(node, sibling.firstChild, true);\n                continue;\n              }\n              node.wrap(filterNode(new AstNode('ul', 1)));\n              continue;\n            }\n            if (schema.isValidChild(node.parent.name, 'div') && schema.isValidChild('div', node.name)) {\n              node.wrap(filterNode(new AstNode('div', 1)));\n            } else {\n              removeOrUnwrapInvalidNode(node);\n            }\n          }\n        }\n      };\n      var filterNode = function (node) {\n        var name = node.name;\n        if (name in nodeFilters) {\n          var list = matchedNodes[name];\n          if (list) {\n            list.push(node);\n          } else {\n            matchedNodes[name] = [node];\n          }\n        }\n        var i = attributeFilters.length;\n        while (i--) {\n          var attrName = attributeFilters[i].name;\n          if (attrName in node.attributes.map) {\n            var list = matchedAttributes[attrName];\n            if (list) {\n              list.push(node);\n            } else {\n              matchedAttributes[attrName] = [node];\n            }\n          }\n        }\n        return node;\n      };\n      var addNodeFilter = function (name, callback) {\n        each$6(explode$2(name), function (name) {\n          var list = nodeFilters[name];\n          if (!list) {\n            nodeFilters[name] = list = [];\n          }\n          list.push(callback);\n        });\n      };\n      var getNodeFilters = function () {\n        var out = [];\n        for (var name_1 in nodeFilters) {\n          if (has$2(nodeFilters, name_1)) {\n            out.push({\n              name: name_1,\n              callbacks: nodeFilters[name_1]\n            });\n          }\n        }\n        return out;\n      };\n      var addAttributeFilter = function (name, callback) {\n        each$6(explode$2(name), function (name) {\n          var i;\n          for (i = 0; i < attributeFilters.length; i++) {\n            if (attributeFilters[i].name === name) {\n              attributeFilters[i].callbacks.push(callback);\n              return;\n            }\n          }\n          attributeFilters.push({\n            name: name,\n            callbacks: [callback]\n          });\n        });\n      };\n      var getAttributeFilters = function () {\n        return [].concat(attributeFilters);\n      };\n      var parse = function (html, args) {\n        var nodes, i, l, fi, fl, list, name;\n        var invalidChildren = [];\n        var node;\n        var getRootBlockName = function (name) {\n          if (name === false) {\n            return '';\n          } else if (name === true) {\n            return 'p';\n          } else {\n            return name;\n          }\n        };\n        args = args || {};\n        matchedNodes = {};\n        matchedAttributes = {};\n        var blockElements = extend$4(makeMap('script,style,head,html,body,title,meta,param'), schema.getBlockElements());\n        var textRootBlockElements = getTextRootBlockElements(schema);\n        var nonEmptyElements = schema.getNonEmptyElements();\n        var children = schema.children;\n        var validate = settings.validate;\n        var forcedRootBlockName = 'forced_root_block' in args ? args.forced_root_block : settings.forced_root_block;\n        var rootBlockName = getRootBlockName(forcedRootBlockName);\n        var whiteSpaceElements = schema.getWhiteSpaceElements();\n        var startWhiteSpaceRegExp = /^[ \\t\\r\\n]+/;\n        var endWhiteSpaceRegExp = /[ \\t\\r\\n]+$/;\n        var allWhiteSpaceRegExp = /[ \\t\\r\\n]+/g;\n        var isAllWhiteSpaceRegExp = /^[ \\t\\r\\n]+$/;\n        var isInWhiteSpacePreservedElement = has$2(whiteSpaceElements, args.context) || has$2(whiteSpaceElements, settings.root_name);\n        var addRootBlocks = function () {\n          var node = rootNode.firstChild, rootBlockNode = null;\n          var trim = function (rootBlock) {\n            if (rootBlock) {\n              node = rootBlock.firstChild;\n              if (node && node.type === 3) {\n                node.value = node.value.replace(startWhiteSpaceRegExp, '');\n              }\n              node = rootBlock.lastChild;\n              if (node && node.type === 3) {\n                node.value = node.value.replace(endWhiteSpaceRegExp, '');\n              }\n            }\n          };\n          if (!schema.isValidChild(rootNode.name, rootBlockName.toLowerCase())) {\n            return;\n          }\n          while (node) {\n            var next = node.next;\n            if (node.type === 3 || node.type === 1 && node.name !== 'p' && !blockElements[node.name] && !node.attr('data-mce-type')) {\n              if (!rootBlockNode) {\n                rootBlockNode = createNode(rootBlockName, 1);\n                rootBlockNode.attr(settings.forced_root_block_attrs);\n                rootNode.insert(rootBlockNode, node);\n                rootBlockNode.append(node);\n              } else {\n                rootBlockNode.append(node);\n              }\n            } else {\n              trim(rootBlockNode);\n              rootBlockNode = null;\n            }\n            node = next;\n          }\n          trim(rootBlockNode);\n        };\n        var createNode = function (name, type) {\n          var node = new AstNode(name, type);\n          var list;\n          if (name in nodeFilters) {\n            list = matchedNodes[name];\n            if (list) {\n              list.push(node);\n            } else {\n              matchedNodes[name] = [node];\n            }\n          }\n          return node;\n        };\n        var removeWhitespaceBefore = function (node) {\n          var blockElements = schema.getBlockElements();\n          for (var textNode = node.prev; textNode && textNode.type === 3;) {\n            var textVal = textNode.value.replace(endWhiteSpaceRegExp, '');\n            if (textVal.length > 0) {\n              textNode.value = textVal;\n              return;\n            }\n            var textNodeNext = textNode.next;\n            if (textNodeNext) {\n              if (textNodeNext.type === 3 && textNodeNext.value.length) {\n                textNode = textNode.prev;\n                continue;\n              }\n              if (!blockElements[textNodeNext.name] && textNodeNext.name !== 'script' && textNodeNext.name !== 'style') {\n                textNode = textNode.prev;\n                continue;\n              }\n            }\n            var sibling = textNode.prev;\n            textNode.remove();\n            textNode = sibling;\n          }\n        };\n        var cloneAndExcludeBlocks = function (input) {\n          var output = {};\n          for (var name_2 in input) {\n            if (name_2 !== 'li' && name_2 !== 'p') {\n              output[name_2] = input[name_2];\n            }\n          }\n          return output;\n        };\n        var isTextRootBlockEmpty = function (node) {\n          var tempNode = node;\n          while (isNonNullable(tempNode)) {\n            if (tempNode.name in textRootBlockElements) {\n              return isEmpty(schema, nonEmptyElements, whiteSpaceElements, tempNode);\n            } else {\n              tempNode = tempNode.parent;\n            }\n          }\n          return false;\n        };\n        var parser = SaxParser({\n          validate: validate,\n          document: settings.document,\n          allow_html_data_urls: settings.allow_html_data_urls,\n          allow_svg_data_urls: settings.allow_svg_data_urls,\n          allow_script_urls: settings.allow_script_urls,\n          allow_conditional_comments: settings.allow_conditional_comments,\n          preserve_cdata: settings.preserve_cdata,\n          self_closing_elements: cloneAndExcludeBlocks(schema.getSelfClosingElements()),\n          cdata: function (text) {\n            node.append(createNode('#cdata', 4)).value = text;\n          },\n          text: function (text, raw) {\n            var textNode;\n            if (!isInWhiteSpacePreservedElement) {\n              text = text.replace(allWhiteSpaceRegExp, ' ');\n              if (isLineBreakNode(node.lastChild, blockElements)) {\n                text = text.replace(startWhiteSpaceRegExp, '');\n              }\n            }\n            if (text.length !== 0) {\n              textNode = createNode('#text', 3);\n              textNode.raw = !!raw;\n              node.append(textNode).value = text;\n            }\n          },\n          comment: function (text) {\n            node.append(createNode('#comment', 8)).value = text;\n          },\n          pi: function (name, text) {\n            node.append(createNode(name, 7)).value = text;\n            removeWhitespaceBefore(node);\n          },\n          doctype: function (text) {\n            var newNode = node.append(createNode('#doctype', 10));\n            newNode.value = text;\n            removeWhitespaceBefore(node);\n          },\n          start: function (name, attrs, empty) {\n            var elementRule = validate ? schema.getElementRule(name) : {};\n            if (elementRule) {\n              var newNode = createNode(elementRule.outputName || name, 1);\n              newNode.attributes = attrs;\n              newNode.shortEnded = empty;\n              node.append(newNode);\n              var parent_2 = children[node.name];\n              if (parent_2 && children[newNode.name] && !parent_2[newNode.name]) {\n                invalidChildren.push(newNode);\n              }\n              var attrFiltersLen = attributeFilters.length;\n              while (attrFiltersLen--) {\n                var attrName = attributeFilters[attrFiltersLen].name;\n                if (attrName in attrs.map) {\n                  list = matchedAttributes[attrName];\n                  if (list) {\n                    list.push(newNode);\n                  } else {\n                    matchedAttributes[attrName] = [newNode];\n                  }\n                }\n              }\n              if (blockElements[name]) {\n                removeWhitespaceBefore(newNode);\n              }\n              if (!empty) {\n                node = newNode;\n              }\n              if (!isInWhiteSpacePreservedElement && whiteSpaceElements[name]) {\n                isInWhiteSpacePreservedElement = true;\n              }\n            }\n          },\n          end: function (name) {\n            var textNode, text, sibling;\n            var elementRule = validate ? schema.getElementRule(name) : {};\n            if (elementRule) {\n              if (blockElements[name]) {\n                if (!isInWhiteSpacePreservedElement) {\n                  textNode = node.firstChild;\n                  if (textNode && textNode.type === 3) {\n                    text = textNode.value.replace(startWhiteSpaceRegExp, '');\n                    if (text.length > 0) {\n                      textNode.value = text;\n                      textNode = textNode.next;\n                    } else {\n                      sibling = textNode.next;\n                      textNode.remove();\n                      textNode = sibling;\n                      while (textNode && textNode.type === 3) {\n                        text = textNode.value;\n                        sibling = textNode.next;\n                        if (text.length === 0 || isAllWhiteSpaceRegExp.test(text)) {\n                          textNode.remove();\n                          textNode = sibling;\n                        }\n                        textNode = sibling;\n                      }\n                    }\n                  }\n                  textNode = node.lastChild;\n                  if (textNode && textNode.type === 3) {\n                    text = textNode.value.replace(endWhiteSpaceRegExp, '');\n                    if (text.length > 0) {\n                      textNode.value = text;\n                      textNode = textNode.prev;\n                    } else {\n                      sibling = textNode.prev;\n                      textNode.remove();\n                      textNode = sibling;\n                      while (textNode && textNode.type === 3) {\n                        text = textNode.value;\n                        sibling = textNode.prev;\n                        if (text.length === 0 || isAllWhiteSpaceRegExp.test(text)) {\n                          textNode.remove();\n                          textNode = sibling;\n                        }\n                        textNode = sibling;\n                      }\n                    }\n                  }\n                }\n              }\n              if (isInWhiteSpacePreservedElement && whiteSpaceElements[name]) {\n                isInWhiteSpacePreservedElement = false;\n              }\n              var isNodeEmpty = isEmpty(schema, nonEmptyElements, whiteSpaceElements, node);\n              var parentNode = node.parent;\n              if (elementRule.paddInEmptyBlock && isNodeEmpty && isTextRootBlockEmpty(node)) {\n                paddEmptyNode(settings, args, blockElements, node);\n              } else if (elementRule.removeEmpty && isNodeEmpty) {\n                if (blockElements[node.name]) {\n                  node.empty().remove();\n                } else {\n                  node.unwrap();\n                }\n              } else if (elementRule.paddEmpty && (isPaddedWithNbsp(node) || isNodeEmpty)) {\n                paddEmptyNode(settings, args, blockElements, node);\n              }\n              node = parentNode;\n            }\n          }\n        }, schema);\n        var rootNode = node = new AstNode(args.context || settings.root_name, 11);\n        parser.parse(html, args.format);\n        if (validate && invalidChildren.length) {\n          if (!args.context) {\n            fixInvalidChildren(invalidChildren);\n          } else {\n            args.invalid = true;\n          }\n        }\n        if (rootBlockName && (rootNode.name === 'body' || args.isRootContent)) {\n          addRootBlocks();\n        }\n        if (!args.invalid) {\n          for (name in matchedNodes) {\n            if (!has$2(matchedNodes, name)) {\n              continue;\n            }\n            list = nodeFilters[name];\n            nodes = matchedNodes[name];\n            fi = nodes.length;\n            while (fi--) {\n              if (!nodes[fi].parent) {\n                nodes.splice(fi, 1);\n              }\n            }\n            for (i = 0, l = list.length; i < l; i++) {\n              list[i](nodes, name, args);\n            }\n          }\n          for (i = 0, l = attributeFilters.length; i < l; i++) {\n            list = attributeFilters[i];\n            if (list.name in matchedAttributes) {\n              nodes = matchedAttributes[list.name];\n              fi = nodes.length;\n              while (fi--) {\n                if (!nodes[fi].parent) {\n                  nodes.splice(fi, 1);\n                }\n              }\n              for (fi = 0, fl = list.callbacks.length; fi < fl; fi++) {\n                list.callbacks[fi](nodes, list.name, args);\n              }\n            }\n          }\n        }\n        return rootNode;\n      };\n      var exports = {\n        schema: schema,\n        addAttributeFilter: addAttributeFilter,\n        getAttributeFilters: getAttributeFilters,\n        addNodeFilter: addNodeFilter,\n        getNodeFilters: getNodeFilters,\n        filterNode: filterNode,\n        parse: parse\n      };\n      register$1(exports, settings);\n      register$2(exports, settings);\n      return exports;\n    };\n\n    var register = function (htmlParser, settings, dom) {\n      htmlParser.addAttributeFilter('data-mce-tabindex', function (nodes, name) {\n        var i = nodes.length;\n        while (i--) {\n          var node = nodes[i];\n          node.attr('tabindex', node.attr('data-mce-tabindex'));\n          node.attr(name, null);\n        }\n      });\n      htmlParser.addAttributeFilter('src,href,style', function (nodes, name) {\n        var internalName = 'data-mce-' + name;\n        var urlConverter = settings.url_converter;\n        var urlConverterScope = settings.url_converter_scope;\n        var i = nodes.length;\n        while (i--) {\n          var node = nodes[i];\n          var value = node.attr(internalName);\n          if (value !== undefined) {\n            node.attr(name, value.length > 0 ? value : null);\n            node.attr(internalName, null);\n          } else {\n            value = node.attr(name);\n            if (name === 'style') {\n              value = dom.serializeStyle(dom.parseStyle(value), node.name);\n            } else if (urlConverter) {\n              value = urlConverter.call(urlConverterScope, value, name, node.name);\n            }\n            node.attr(name, value.length > 0 ? value : null);\n          }\n        }\n      });\n      htmlParser.addAttributeFilter('class', function (nodes) {\n        var i = nodes.length;\n        while (i--) {\n          var node = nodes[i];\n          var value = node.attr('class');\n          if (value) {\n            value = node.attr('class').replace(/(?:^|\\s)mce-item-\\w+(?!\\S)/g, '');\n            node.attr('class', value.length > 0 ? value : null);\n          }\n        }\n      });\n      htmlParser.addAttributeFilter('data-mce-type', function (nodes, name, args) {\n        var i = nodes.length;\n        while (i--) {\n          var node = nodes[i];\n          if (node.attr('data-mce-type') === 'bookmark' && !args.cleanup) {\n            var hasChildren = Optional.from(node.firstChild).exists(function (firstChild) {\n              return !isZwsp(firstChild.value);\n            });\n            if (hasChildren) {\n              node.unwrap();\n            } else {\n              node.remove();\n            }\n          }\n        }\n      });\n      htmlParser.addNodeFilter('noscript', function (nodes) {\n        var i = nodes.length;\n        while (i--) {\n          var node = nodes[i].firstChild;\n          if (node) {\n            node.value = Entities.decode(node.value);\n          }\n        }\n      });\n      htmlParser.addNodeFilter('script,style', function (nodes, name) {\n        var trim = function (value) {\n          return value.replace(/(<!--\\[CDATA\\[|\\]\\]-->)/g, '\\n').replace(/^[\\r\\n]*|[\\r\\n]*$/g, '').replace(/^\\s*((<!--)?(\\s*\\/\\/)?\\s*<!\\[CDATA\\[|(<!--\\s*)?\\/\\*\\s*<!\\[CDATA\\[\\s*\\*\\/|(\\/\\/)?\\s*<!--|\\/\\*\\s*<!--\\s*\\*\\/)\\s*[\\r\\n]*/gi, '').replace(/\\s*(\\/\\*\\s*\\]\\]>\\s*\\*\\/(-->)?|\\s*\\/\\/\\s*\\]\\]>(-->)?|\\/\\/\\s*(-->)?|\\]\\]>|\\/\\*\\s*-->\\s*\\*\\/|\\s*-->\\s*)\\s*$/g, '');\n        };\n        var i = nodes.length;\n        while (i--) {\n          var node = nodes[i];\n          var value = node.firstChild ? node.firstChild.value : '';\n          if (name === 'script') {\n            var type = node.attr('type');\n            if (type) {\n              node.attr('type', type === 'mce-no/type' ? null : type.replace(/^mce\\-/, ''));\n            }\n            if (settings.element_format === 'xhtml' && value.length > 0) {\n              node.firstChild.value = '// <![CDATA[\\n' + trim(value) + '\\n// ]]>';\n            }\n          } else {\n            if (settings.element_format === 'xhtml' && value.length > 0) {\n              node.firstChild.value = '<!--\\n' + trim(value) + '\\n-->';\n            }\n          }\n        }\n      });\n      htmlParser.addNodeFilter('#comment', function (nodes) {\n        var i = nodes.length;\n        while (i--) {\n          var node = nodes[i];\n          if (settings.preserve_cdata && node.value.indexOf('[CDATA[') === 0) {\n            node.name = '#cdata';\n            node.type = 4;\n            node.value = dom.decode(node.value.replace(/^\\[CDATA\\[|\\]\\]$/g, ''));\n          } else if (node.value.indexOf('mce:protected ') === 0) {\n            node.name = '#text';\n            node.type = 3;\n            node.raw = true;\n            node.value = unescape(node.value).substr(14);\n          }\n        }\n      });\n      htmlParser.addNodeFilter('xml:namespace,input', function (nodes, name) {\n        var i = nodes.length;\n        while (i--) {\n          var node = nodes[i];\n          if (node.type === 7) {\n            node.remove();\n          } else if (node.type === 1) {\n            if (name === 'input' && !node.attr('type')) {\n              node.attr('type', 'text');\n            }\n          }\n        }\n      });\n      htmlParser.addAttributeFilter('data-mce-type', function (nodes) {\n        each$k(nodes, function (node) {\n          if (node.attr('data-mce-type') === 'format-caret') {\n            if (node.isEmpty(htmlParser.schema.getNonEmptyElements())) {\n              node.remove();\n            } else {\n              node.unwrap();\n            }\n          }\n        });\n      });\n      htmlParser.addAttributeFilter('data-mce-src,data-mce-href,data-mce-style,' + 'data-mce-selected,data-mce-expando,' + 'data-mce-type,data-mce-resize,data-mce-placeholder', function (nodes, name) {\n        var i = nodes.length;\n        while (i--) {\n          nodes[i].attr(name, null);\n        }\n      });\n    };\n    var trimTrailingBr = function (rootNode) {\n      var isBr = function (node) {\n        return node && node.name === 'br';\n      };\n      var brNode1 = rootNode.lastChild;\n      if (isBr(brNode1)) {\n        var brNode2 = brNode1.prev;\n        if (isBr(brNode2)) {\n          brNode1.remove();\n          brNode2.remove();\n        }\n      }\n    };\n\n    var preProcess = function (editor, node, args) {\n      var oldDoc;\n      var dom = editor.dom;\n      var clonedNode = node.cloneNode(true);\n      var impl = document.implementation;\n      if (impl.createHTMLDocument) {\n        var doc_1 = impl.createHTMLDocument('');\n        Tools.each(clonedNode.nodeName === 'BODY' ? clonedNode.childNodes : [clonedNode], function (node) {\n          doc_1.body.appendChild(doc_1.importNode(node, true));\n        });\n        if (clonedNode.nodeName !== 'BODY') {\n          clonedNode = doc_1.body.firstChild;\n        } else {\n          clonedNode = doc_1.body;\n        }\n        oldDoc = dom.doc;\n        dom.doc = doc_1;\n      }\n      firePreProcess(editor, __assign(__assign({}, args), { node: clonedNode }));\n      if (oldDoc) {\n        dom.doc = oldDoc;\n      }\n      return clonedNode;\n    };\n    var shouldFireEvent = function (editor, args) {\n      return editor && editor.hasEventListeners('PreProcess') && !args.no_events;\n    };\n    var process = function (editor, node, args) {\n      return shouldFireEvent(editor, args) ? preProcess(editor, node, args) : node;\n    };\n\n    var addTempAttr = function (htmlParser, tempAttrs, name) {\n      if (Tools.inArray(tempAttrs, name) === -1) {\n        htmlParser.addAttributeFilter(name, function (nodes, name) {\n          var i = nodes.length;\n          while (i--) {\n            nodes[i].attr(name, null);\n          }\n        });\n        tempAttrs.push(name);\n      }\n    };\n    var postProcess = function (editor, args, content) {\n      if (!args.no_events && editor) {\n        var outArgs = firePostProcess(editor, __assign(__assign({}, args), { content: content }));\n        return outArgs.content;\n      } else {\n        return content;\n      }\n    };\n    var getHtmlFromNode = function (dom, node, args) {\n      var html = trim$2(args.getInner ? node.innerHTML : dom.getOuterHTML(node));\n      return args.selection || isWsPreserveElement(SugarElement.fromDom(node)) ? html : Tools.trim(html);\n    };\n    var parseHtml = function (htmlParser, html, args) {\n      var parserArgs = args.selection ? __assign({ forced_root_block: false }, args) : args;\n      var rootNode = htmlParser.parse(html, parserArgs);\n      trimTrailingBr(rootNode);\n      return rootNode;\n    };\n    var serializeNode = function (settings, schema, node) {\n      var htmlSerializer = HtmlSerializer(settings, schema);\n      return htmlSerializer.serialize(node);\n    };\n    var toHtml = function (editor, settings, schema, rootNode, args) {\n      var content = serializeNode(settings, schema, rootNode);\n      return postProcess(editor, args, content);\n    };\n    var DomSerializerImpl = function (settings, editor) {\n      var tempAttrs = ['data-mce-selected'];\n      var dom = editor && editor.dom ? editor.dom : DOMUtils.DOM;\n      var schema = editor && editor.schema ? editor.schema : Schema(settings);\n      settings.entity_encoding = settings.entity_encoding || 'named';\n      settings.remove_trailing_brs = 'remove_trailing_brs' in settings ? settings.remove_trailing_brs : true;\n      var htmlParser = DomParser(settings, schema);\n      register(htmlParser, settings, dom);\n      var serialize = function (node, parserArgs) {\n        if (parserArgs === void 0) {\n          parserArgs = {};\n        }\n        var args = __assign({ format: 'html' }, parserArgs);\n        var targetNode = process(editor, node, args);\n        var html = getHtmlFromNode(dom, targetNode, args);\n        var rootNode = parseHtml(htmlParser, html, args);\n        return args.format === 'tree' ? rootNode : toHtml(editor, settings, schema, rootNode, args);\n      };\n      return {\n        schema: schema,\n        addNodeFilter: htmlParser.addNodeFilter,\n        addAttributeFilter: htmlParser.addAttributeFilter,\n        serialize: serialize,\n        addRules: schema.addValidElements,\n        setRules: schema.setValidElements,\n        addTempAttr: curry(addTempAttr, htmlParser, tempAttrs),\n        getTempAttrs: constant(tempAttrs),\n        getNodeFilters: htmlParser.getNodeFilters,\n        getAttributeFilters: htmlParser.getAttributeFilters\n      };\n    };\n\n    var DomSerializer = function (settings, editor) {\n      var domSerializer = DomSerializerImpl(settings, editor);\n      return {\n        schema: domSerializer.schema,\n        addNodeFilter: domSerializer.addNodeFilter,\n        addAttributeFilter: domSerializer.addAttributeFilter,\n        serialize: domSerializer.serialize,\n        addRules: domSerializer.addRules,\n        setRules: domSerializer.setRules,\n        addTempAttr: domSerializer.addTempAttr,\n        getTempAttrs: domSerializer.getTempAttrs,\n        getNodeFilters: domSerializer.getNodeFilters,\n        getAttributeFilters: domSerializer.getAttributeFilters\n      };\n    };\n\n    var defaultFormat = 'html';\n    var getContent = function (editor, args) {\n      if (args === void 0) {\n        args = {};\n      }\n      var format = args.format ? args.format : defaultFormat;\n      return getContent$2(editor, args, format);\n    };\n\n    var setContent = function (editor, content, args) {\n      if (args === void 0) {\n        args = {};\n      }\n      return setContent$2(editor, content, args);\n    };\n\n    var DOM$7 = DOMUtils.DOM;\n    var restoreOriginalStyles = function (editor) {\n      DOM$7.setStyle(editor.id, 'display', editor.orgDisplay);\n    };\n    var safeDestroy = function (x) {\n      return Optional.from(x).each(function (x) {\n        return x.destroy();\n      });\n    };\n    var clearDomReferences = function (editor) {\n      editor.contentAreaContainer = editor.formElement = editor.container = editor.editorContainer = null;\n      editor.bodyElement = editor.contentDocument = editor.contentWindow = null;\n      editor.iframeElement = editor.targetElm = null;\n      if (editor.selection) {\n        editor.selection = editor.selection.win = editor.selection.dom = editor.selection.dom.doc = null;\n      }\n    };\n    var restoreForm = function (editor) {\n      var form = editor.formElement;\n      if (form) {\n        if (form._mceOldSubmit) {\n          form.submit = form._mceOldSubmit;\n          form._mceOldSubmit = null;\n        }\n        DOM$7.unbind(form, 'submit reset', editor.formEventDelegate);\n      }\n    };\n    var remove = function (editor) {\n      if (!editor.removed) {\n        var _selectionOverrides = editor._selectionOverrides, editorUpload = editor.editorUpload;\n        var body = editor.getBody();\n        var element = editor.getElement();\n        if (body) {\n          editor.save({ is_removing: true });\n        }\n        editor.removed = true;\n        editor.unbindAllNativeEvents();\n        if (editor.hasHiddenInput && element) {\n          DOM$7.remove(element.nextSibling);\n        }\n        fireRemove(editor);\n        editor.editorManager.remove(editor);\n        if (!editor.inline && body) {\n          restoreOriginalStyles(editor);\n        }\n        fireDetach(editor);\n        DOM$7.remove(editor.getContainer());\n        safeDestroy(_selectionOverrides);\n        safeDestroy(editorUpload);\n        editor.destroy();\n      }\n    };\n    var destroy = function (editor, automatic) {\n      var selection = editor.selection, dom = editor.dom;\n      if (editor.destroyed) {\n        return;\n      }\n      if (!automatic && !editor.removed) {\n        editor.remove();\n        return;\n      }\n      if (!automatic) {\n        editor.editorManager.off('beforeunload', editor._beforeUnload);\n        if (editor.theme && editor.theme.destroy) {\n          editor.theme.destroy();\n        }\n        safeDestroy(selection);\n        safeDestroy(dom);\n      }\n      restoreForm(editor);\n      clearDomReferences(editor);\n      editor.destroyed = true;\n    };\n\n    var deep = function (old, nu) {\n      var bothObjects = isObject(old) && isObject(nu);\n      return bothObjects ? deepMerge(old, nu) : nu;\n    };\n    var baseMerge = function (merger) {\n      return function () {\n        var objects = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          objects[_i] = arguments[_i];\n        }\n        if (objects.length === 0) {\n          throw new Error('Can\\'t merge zero objects');\n        }\n        var ret = {};\n        for (var j = 0; j < objects.length; j++) {\n          var curObject = objects[j];\n          for (var key in curObject) {\n            if (has$2(curObject, key)) {\n              ret[key] = merger(ret[key], curObject[key]);\n            }\n          }\n        }\n        return ret;\n      };\n    };\n    var deepMerge = baseMerge(deep);\n\n    var deprecatedSettings = ('autoresize_on_init,content_editable_state,convert_fonts_to_spans,inline_styles,padd_empty_with_br,block_elements,' + 'boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,' + 'force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,' + 'non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,' + 'tab_focus,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,' + 'paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists').split(',');\n    var deprecatedPlugins = 'bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,textcolor'.split(',');\n    var movedToPremiumPlugins = 'imagetools,toc'.split(',');\n    var getDeprecatedSettings = function (settings) {\n      var settingNames = filter$4(deprecatedSettings, function (setting) {\n        return has$2(settings, setting);\n      });\n      var forcedRootBlock = settings.forced_root_block;\n      if (forcedRootBlock === false || forcedRootBlock === '') {\n        settingNames.push('forced_root_block (false only)');\n      }\n      return sort(settingNames);\n    };\n    var getDeprecatedPlugins = function (settings) {\n      var plugins = Tools.makeMap(settings.plugins, ' ');\n      var hasPlugin = function (plugin) {\n        return has$2(plugins, plugin);\n      };\n      var pluginNames = __spreadArray(__spreadArray([], filter$4(deprecatedPlugins, hasPlugin), true), bind(movedToPremiumPlugins, function (plugin) {\n        return hasPlugin(plugin) ? [plugin + ' (moving to premium)'] : [];\n      }), true);\n      return sort(pluginNames);\n    };\n    var logDeprecationsWarning = function (rawSettings, finalSettings) {\n      var deprecatedSettings = getDeprecatedSettings(rawSettings);\n      var deprecatedPlugins = getDeprecatedPlugins(finalSettings);\n      var hasDeprecatedPlugins = deprecatedPlugins.length > 0;\n      var hasDeprecatedSettings = deprecatedSettings.length > 0;\n      var isLegacyMobileTheme = finalSettings.theme === 'mobile';\n      if (hasDeprecatedPlugins || hasDeprecatedSettings || isLegacyMobileTheme) {\n        var listJoiner = '\\n- ';\n        var themesMessage = isLegacyMobileTheme ? '\\n\\nThemes:' + listJoiner + 'mobile' : '';\n        var pluginsMessage = hasDeprecatedPlugins ? '\\n\\nPlugins:' + listJoiner + deprecatedPlugins.join(listJoiner) : '';\n        var settingsMessage = hasDeprecatedSettings ? '\\n\\nSettings:' + listJoiner + deprecatedSettings.join(listJoiner) : '';\n        console.warn('The following deprecated features are currently enabled, these will be removed in TinyMCE 6.0. ' + 'See https://www.tiny.cloud/docs/release-notes/6.0-upcoming-changes/ for more information.' + themesMessage + pluginsMessage + settingsMessage);\n      }\n    };\n\n    var sectionResult = function (sections, settings) {\n      return {\n        sections: constant(sections),\n        settings: constant(settings)\n      };\n    };\n    var deviceDetection = detect().deviceType;\n    var isTouch = deviceDetection.isTouch();\n    var isPhone = deviceDetection.isPhone();\n    var isTablet = deviceDetection.isTablet();\n    var legacyMobilePlugins = [\n      'lists',\n      'autolink',\n      'autosave'\n    ];\n    var defaultTouchSettings = {\n      table_grid: false,\n      object_resizing: false,\n      resize: false\n    };\n    var normalizePlugins = function (plugins) {\n      var pluginNames = isArray$1(plugins) ? plugins.join(' ') : plugins;\n      var trimmedPlugins = map$3(isString$1(pluginNames) ? pluginNames.split(' ') : [], trim$4);\n      return filter$4(trimmedPlugins, function (item) {\n        return item.length > 0;\n      });\n    };\n    var filterLegacyMobilePlugins = function (plugins) {\n      return filter$4(plugins, curry(contains$3, legacyMobilePlugins));\n    };\n    var extractSections = function (keys, settings) {\n      var result = bifilter(settings, function (value, key) {\n        return contains$3(keys, key);\n      });\n      return sectionResult(result.t, result.f);\n    };\n    var getSection = function (sectionResult, name, defaults) {\n      if (defaults === void 0) {\n        defaults = {};\n      }\n      var sections = sectionResult.sections();\n      var sectionSettings = get$9(sections, name).getOr({});\n      return Tools.extend({}, defaults, sectionSettings);\n    };\n    var hasSection = function (sectionResult, name) {\n      return has$2(sectionResult.sections(), name);\n    };\n    var isSectionTheme = function (sectionResult, name, theme) {\n      var section = sectionResult.sections();\n      return hasSection(sectionResult, name) && section[name].theme === theme;\n    };\n    var getSectionConfig = function (sectionResult, name) {\n      return hasSection(sectionResult, name) ? sectionResult.sections()[name] : {};\n    };\n    var getToolbarMode = function (settings, defaultVal) {\n      return get$9(settings, 'toolbar_mode').orThunk(function () {\n        return get$9(settings, 'toolbar_drawer').map(function (val) {\n          return val === false ? 'wrap' : val;\n        });\n      }).getOr(defaultVal);\n    };\n    var getDefaultSettings = function (settings, id, documentBaseUrl, isTouch, editor) {\n      var baseDefaults = {\n        id: id,\n        theme: 'silver',\n        toolbar_mode: getToolbarMode(settings, 'floating'),\n        plugins: '',\n        document_base_url: documentBaseUrl,\n        add_form_submit_trigger: true,\n        submit_patch: true,\n        add_unload_trigger: true,\n        convert_urls: true,\n        relative_urls: true,\n        remove_script_host: true,\n        object_resizing: true,\n        doctype: '<!DOCTYPE html>',\n        visual: true,\n        font_size_legacy_values: 'xx-small,small,medium,large,x-large,xx-large,300%',\n        forced_root_block: 'p',\n        hidden_input: true,\n        inline_styles: true,\n        convert_fonts_to_spans: true,\n        indent: true,\n        indent_before: 'p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,' + 'tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist',\n        indent_after: 'p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,' + 'tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist',\n        entity_encoding: 'named',\n        url_converter: editor.convertURL,\n        url_converter_scope: editor\n      };\n      return __assign(__assign({}, baseDefaults), isTouch ? defaultTouchSettings : {});\n    };\n    var getDefaultMobileSettings = function (mobileSettings, isPhone) {\n      var defaultMobileSettings = {\n        resize: false,\n        toolbar_mode: getToolbarMode(mobileSettings, 'scrolling'),\n        toolbar_sticky: false\n      };\n      var defaultPhoneSettings = { menubar: false };\n      return __assign(__assign(__assign({}, defaultTouchSettings), defaultMobileSettings), isPhone ? defaultPhoneSettings : {});\n    };\n    var getExternalPlugins = function (overrideSettings, settings) {\n      var userDefinedExternalPlugins = settings.external_plugins ? settings.external_plugins : {};\n      if (overrideSettings && overrideSettings.external_plugins) {\n        return Tools.extend({}, overrideSettings.external_plugins, userDefinedExternalPlugins);\n      } else {\n        return userDefinedExternalPlugins;\n      }\n    };\n    var combinePlugins = function (forcedPlugins, plugins) {\n      return [].concat(normalizePlugins(forcedPlugins)).concat(normalizePlugins(plugins));\n    };\n    var getPlatformPlugins = function (isMobileDevice, sectionResult, desktopPlugins, mobilePlugins) {\n      if (isMobileDevice && isSectionTheme(sectionResult, 'mobile', 'mobile')) {\n        return filterLegacyMobilePlugins(mobilePlugins);\n      } else if (isMobileDevice && hasSection(sectionResult, 'mobile')) {\n        return mobilePlugins;\n      } else {\n        return desktopPlugins;\n      }\n    };\n    var processPlugins = function (isMobileDevice, sectionResult, defaultOverrideSettings, settings) {\n      var forcedPlugins = normalizePlugins(defaultOverrideSettings.forced_plugins);\n      var desktopPlugins = normalizePlugins(settings.plugins);\n      var mobileConfig = getSectionConfig(sectionResult, 'mobile');\n      var mobilePlugins = mobileConfig.plugins ? normalizePlugins(mobileConfig.plugins) : desktopPlugins;\n      var platformPlugins = getPlatformPlugins(isMobileDevice, sectionResult, desktopPlugins, mobilePlugins);\n      var combinedPlugins = combinePlugins(forcedPlugins, platformPlugins);\n      if (Env.browser.isIE() && contains$3(combinedPlugins, 'rtc')) {\n        throw new Error('RTC plugin is not supported on IE 11.');\n      }\n      return Tools.extend(settings, { plugins: combinedPlugins.join(' ') });\n    };\n    var isOnMobile = function (isMobileDevice, sectionResult) {\n      return isMobileDevice && hasSection(sectionResult, 'mobile');\n    };\n    var combineSettings = function (isMobileDevice, isPhone, defaultSettings, defaultOverrideSettings, settings) {\n      var defaultDeviceSettings = isMobileDevice ? { mobile: getDefaultMobileSettings(settings.mobile || {}, isPhone) } : {};\n      var sectionResult = extractSections(['mobile'], deepMerge(defaultDeviceSettings, settings));\n      var extendedSettings = Tools.extend(defaultSettings, defaultOverrideSettings, sectionResult.settings(), isOnMobile(isMobileDevice, sectionResult) ? getSection(sectionResult, 'mobile') : {}, {\n        validate: true,\n        external_plugins: getExternalPlugins(defaultOverrideSettings, sectionResult.settings())\n      });\n      return processPlugins(isMobileDevice, sectionResult, defaultOverrideSettings, extendedSettings);\n    };\n    var getEditorSettings = function (editor, id, documentBaseUrl, defaultOverrideSettings, settings) {\n      var defaultSettings = getDefaultSettings(settings, id, documentBaseUrl, isTouch, editor);\n      var finalSettings = combineSettings(isPhone || isTablet, isPhone, defaultSettings, defaultOverrideSettings, settings);\n      if (finalSettings.deprecation_warnings !== false) {\n        logDeprecationsWarning(settings, finalSettings);\n      }\n      return finalSettings;\n    };\n    var getFiltered = function (predicate, editor, name) {\n      return Optional.from(editor.settings[name]).filter(predicate);\n    };\n    var getParamObject = function (value) {\n      var output = {};\n      if (typeof value === 'string') {\n        each$k(value.indexOf('=') > 0 ? value.split(/[;,](?![^=;,]*(?:[;,]|$))/) : value.split(','), function (val) {\n          var arr = val.split('=');\n          if (arr.length > 1) {\n            output[Tools.trim(arr[0])] = Tools.trim(arr[1]);\n          } else {\n            output[Tools.trim(arr[0])] = Tools.trim(arr[0]);\n          }\n        });\n      } else {\n        output = value;\n      }\n      return output;\n    };\n    var isArrayOf = function (p) {\n      return function (a) {\n        return isArray$1(a) && forall(a, p);\n      };\n    };\n    var getParam = function (editor, name, defaultVal, type) {\n      var value = name in editor.settings ? editor.settings[name] : defaultVal;\n      if (type === 'hash') {\n        return getParamObject(value);\n      } else if (type === 'string') {\n        return getFiltered(isString$1, editor, name).getOr(defaultVal);\n      } else if (type === 'number') {\n        return getFiltered(isNumber, editor, name).getOr(defaultVal);\n      } else if (type === 'boolean') {\n        return getFiltered(isBoolean, editor, name).getOr(defaultVal);\n      } else if (type === 'object') {\n        return getFiltered(isObject, editor, name).getOr(defaultVal);\n      } else if (type === 'array') {\n        return getFiltered(isArray$1, editor, name).getOr(defaultVal);\n      } else if (type === 'string[]') {\n        return getFiltered(isArrayOf(isString$1), editor, name).getOr(defaultVal);\n      } else if (type === 'function') {\n        return getFiltered(isFunction, editor, name).getOr(defaultVal);\n      } else {\n        return value;\n      }\n    };\n\n    var CreateIconManager = function () {\n      var lookup = {};\n      var add = function (id, iconPack) {\n        lookup[id] = iconPack;\n      };\n      var get = function (id) {\n        if (lookup[id]) {\n          return lookup[id];\n        }\n        return { icons: {} };\n      };\n      var has = function (id) {\n        return has$2(lookup, id);\n      };\n      return {\n        add: add,\n        get: get,\n        has: has\n      };\n    };\n    var IconManager = CreateIconManager();\n\n    var getProp = function (propName, elm) {\n      var rawElm = elm.dom;\n      return rawElm[propName];\n    };\n    var getComputedSizeProp = function (propName, elm) {\n      return parseInt(get$5(elm, propName), 10);\n    };\n    var getClientWidth = curry(getProp, 'clientWidth');\n    var getClientHeight = curry(getProp, 'clientHeight');\n    var getMarginTop = curry(getComputedSizeProp, 'margin-top');\n    var getMarginLeft = curry(getComputedSizeProp, 'margin-left');\n    var getBoundingClientRect = function (elm) {\n      return elm.dom.getBoundingClientRect();\n    };\n    var isInsideElementContentArea = function (bodyElm, clientX, clientY) {\n      var clientWidth = getClientWidth(bodyElm);\n      var clientHeight = getClientHeight(bodyElm);\n      return clientX >= 0 && clientY >= 0 && clientX <= clientWidth && clientY <= clientHeight;\n    };\n    var transpose = function (inline, elm, clientX, clientY) {\n      var clientRect = getBoundingClientRect(elm);\n      var deltaX = inline ? clientRect.left + elm.dom.clientLeft + getMarginLeft(elm) : 0;\n      var deltaY = inline ? clientRect.top + elm.dom.clientTop + getMarginTop(elm) : 0;\n      var x = clientX - deltaX;\n      var y = clientY - deltaY;\n      return {\n        x: x,\n        y: y\n      };\n    };\n    var isXYInContentArea = function (editor, clientX, clientY) {\n      var bodyElm = SugarElement.fromDom(editor.getBody());\n      var targetElm = editor.inline ? bodyElm : documentElement(bodyElm);\n      var transposedPoint = transpose(editor.inline, targetElm, clientX, clientY);\n      return isInsideElementContentArea(targetElm, transposedPoint.x, transposedPoint.y);\n    };\n    var fromDomSafe = function (node) {\n      return Optional.from(node).map(SugarElement.fromDom);\n    };\n    var isEditorAttachedToDom = function (editor) {\n      var rawContainer = editor.inline ? editor.getBody() : editor.getContentAreaContainer();\n      return fromDomSafe(rawContainer).map(inBody).getOr(false);\n    };\n\n    var NotificationManagerImpl = function () {\n      var unimplemented = function () {\n        throw new Error('Theme did not provide a NotificationManager implementation.');\n      };\n      return {\n        open: unimplemented,\n        close: unimplemented,\n        reposition: unimplemented,\n        getArgs: unimplemented\n      };\n    };\n\n    var NotificationManager = function (editor) {\n      var notifications = [];\n      var getImplementation = function () {\n        var theme = editor.theme;\n        return theme && theme.getNotificationManagerImpl ? theme.getNotificationManagerImpl() : NotificationManagerImpl();\n      };\n      var getTopNotification = function () {\n        return Optional.from(notifications[0]);\n      };\n      var isEqual = function (a, b) {\n        return a.type === b.type && a.text === b.text && !a.progressBar && !a.timeout && !b.progressBar && !b.timeout;\n      };\n      var reposition = function () {\n        if (notifications.length > 0) {\n          getImplementation().reposition(notifications);\n        }\n      };\n      var addNotification = function (notification) {\n        notifications.push(notification);\n      };\n      var closeNotification = function (notification) {\n        findIndex$2(notifications, function (otherNotification) {\n          return otherNotification === notification;\n        }).each(function (index) {\n          notifications.splice(index, 1);\n        });\n      };\n      var open = function (spec, fireEvent) {\n        if (fireEvent === void 0) {\n          fireEvent = true;\n        }\n        if (editor.removed || !isEditorAttachedToDom(editor)) {\n          return;\n        }\n        if (fireEvent) {\n          editor.fire('BeforeOpenNotification', { notification: spec });\n        }\n        return find$3(notifications, function (notification) {\n          return isEqual(getImplementation().getArgs(notification), spec);\n        }).getOrThunk(function () {\n          editor.editorManager.setActive(editor);\n          var notification = getImplementation().open(spec, function () {\n            closeNotification(notification);\n            reposition();\n            getTopNotification().fold(function () {\n              return editor.focus();\n            }, function (top) {\n              return focus$1(SugarElement.fromDom(top.getEl()));\n            });\n          });\n          addNotification(notification);\n          reposition();\n          editor.fire('OpenNotification', { notification: __assign({}, notification) });\n          return notification;\n        });\n      };\n      var close = function () {\n        getTopNotification().each(function (notification) {\n          getImplementation().close(notification);\n          closeNotification(notification);\n          reposition();\n        });\n      };\n      var getNotifications = constant(notifications);\n      var registerEvents = function (editor) {\n        editor.on('SkinLoaded', function () {\n          var serviceMessage = getServiceMessage(editor);\n          if (serviceMessage) {\n            open({\n              text: serviceMessage,\n              type: 'warning',\n              timeout: 0\n            }, false);\n          }\n          reposition();\n        });\n        editor.on('show ResizeEditor ResizeWindow NodeChange', function () {\n          Delay.requestAnimationFrame(reposition);\n        });\n        editor.on('remove', function () {\n          each$k(notifications.slice(), function (notification) {\n            getImplementation().close(notification);\n          });\n        });\n      };\n      registerEvents(editor);\n      return {\n        open: open,\n        close: close,\n        getNotifications: getNotifications\n      };\n    };\n\n    var PluginManager = AddOnManager.PluginManager;\n\n    var ThemeManager = AddOnManager.ThemeManager;\n\n    function WindowManagerImpl () {\n      var unimplemented = function () {\n        throw new Error('Theme did not provide a WindowManager implementation.');\n      };\n      return {\n        open: unimplemented,\n        openUrl: unimplemented,\n        alert: unimplemented,\n        confirm: unimplemented,\n        close: unimplemented,\n        getParams: unimplemented,\n        setParams: unimplemented\n      };\n    }\n\n    var WindowManager = function (editor) {\n      var dialogs = [];\n      var getImplementation = function () {\n        var theme = editor.theme;\n        return theme && theme.getWindowManagerImpl ? theme.getWindowManagerImpl() : WindowManagerImpl();\n      };\n      var funcBind = function (scope, f) {\n        return function () {\n          var args = [];\n          for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n          }\n          return f ? f.apply(scope, args) : undefined;\n        };\n      };\n      var fireOpenEvent = function (dialog) {\n        editor.fire('OpenWindow', { dialog: dialog });\n      };\n      var fireCloseEvent = function (dialog) {\n        editor.fire('CloseWindow', { dialog: dialog });\n      };\n      var addDialog = function (dialog) {\n        dialogs.push(dialog);\n        fireOpenEvent(dialog);\n      };\n      var closeDialog = function (dialog) {\n        fireCloseEvent(dialog);\n        dialogs = filter$4(dialogs, function (otherDialog) {\n          return otherDialog !== dialog;\n        });\n        if (dialogs.length === 0) {\n          editor.focus();\n        }\n      };\n      var getTopDialog = function () {\n        return Optional.from(dialogs[dialogs.length - 1]);\n      };\n      var storeSelectionAndOpenDialog = function (openDialog) {\n        editor.editorManager.setActive(editor);\n        store(editor);\n        var dialog = openDialog();\n        addDialog(dialog);\n        return dialog;\n      };\n      var open = function (args, params) {\n        return storeSelectionAndOpenDialog(function () {\n          return getImplementation().open(args, params, closeDialog);\n        });\n      };\n      var openUrl = function (args) {\n        return storeSelectionAndOpenDialog(function () {\n          return getImplementation().openUrl(args, closeDialog);\n        });\n      };\n      var alert = function (message, callback, scope) {\n        var windowManagerImpl = getImplementation();\n        windowManagerImpl.alert(message, funcBind(scope ? scope : windowManagerImpl, callback));\n      };\n      var confirm = function (message, callback, scope) {\n        var windowManagerImpl = getImplementation();\n        windowManagerImpl.confirm(message, funcBind(scope ? scope : windowManagerImpl, callback));\n      };\n      var close = function () {\n        getTopDialog().each(function (dialog) {\n          getImplementation().close(dialog);\n          closeDialog(dialog);\n        });\n      };\n      editor.on('remove', function () {\n        each$k(dialogs, function (dialog) {\n          getImplementation().close(dialog);\n        });\n      });\n      return {\n        open: open,\n        openUrl: openUrl,\n        alert: alert,\n        confirm: confirm,\n        close: close\n      };\n    };\n\n    var displayNotification = function (editor, message) {\n      editor.notificationManager.open({\n        type: 'error',\n        text: message\n      });\n    };\n    var displayError = function (editor, message) {\n      if (editor._skinLoaded) {\n        displayNotification(editor, message);\n      } else {\n        editor.on('SkinLoaded', function () {\n          displayNotification(editor, message);\n        });\n      }\n    };\n    var uploadError = function (editor, message) {\n      displayError(editor, I18n.translate([\n        'Failed to upload image: {0}',\n        message\n      ]));\n    };\n    var logError = function (editor, errorType, msg) {\n      fireError(editor, errorType, { message: msg });\n      console.error(msg);\n    };\n    var createLoadError = function (type, url, name) {\n      return name ? 'Failed to load ' + type + ': ' + name + ' from url ' + url : 'Failed to load ' + type + ' url: ' + url;\n    };\n    var pluginLoadError = function (editor, url, name) {\n      logError(editor, 'PluginLoadError', createLoadError('plugin', url, name));\n    };\n    var iconsLoadError = function (editor, url, name) {\n      logError(editor, 'IconsLoadError', createLoadError('icons', url, name));\n    };\n    var languageLoadError = function (editor, url, name) {\n      logError(editor, 'LanguageLoadError', createLoadError('language', url, name));\n    };\n    var pluginInitError = function (editor, name, err) {\n      var message = I18n.translate([\n        'Failed to initialize plugin: {0}',\n        name\n      ]);\n      fireError(editor, 'PluginLoadError', { message: message });\n      initError(message, err);\n      displayError(editor, message);\n    };\n    var initError = function (message) {\n      var x = [];\n      for (var _i = 1; _i < arguments.length; _i++) {\n        x[_i - 1] = arguments[_i];\n      }\n      var console = window.console;\n      if (console) {\n        if (console.error) {\n          console.error.apply(console, __spreadArray([message], x, false));\n        } else {\n          console.log.apply(console, __spreadArray([message], x, false));\n        }\n      }\n    };\n\n    var isContentCssSkinName = function (url) {\n      return /^[a-z0-9\\-]+$/i.test(url);\n    };\n    var getContentCssUrls = function (editor) {\n      return transformToUrls(editor, getContentCss(editor));\n    };\n    var getFontCssUrls = function (editor) {\n      return transformToUrls(editor, getFontCss(editor));\n    };\n    var transformToUrls = function (editor, cssLinks) {\n      var skinUrl = editor.editorManager.baseURL + '/skins/content';\n      var suffix = editor.editorManager.suffix;\n      var contentCssFile = 'content' + suffix + '.css';\n      var inline = editor.inline === true;\n      return map$3(cssLinks, function (url) {\n        if (isContentCssSkinName(url) && !inline) {\n          return skinUrl + '/' + url + '/' + contentCssFile;\n        } else {\n          return editor.documentBaseURI.toAbsolute(url);\n        }\n      });\n    };\n    var appendContentCssFromSettings = function (editor) {\n      editor.contentCSS = editor.contentCSS.concat(getContentCssUrls(editor), getFontCssUrls(editor));\n    };\n\n    var UploadStatus = function () {\n      var PENDING = 1, UPLOADED = 2;\n      var blobUriStatuses = {};\n      var createStatus = function (status, resultUri) {\n        return {\n          status: status,\n          resultUri: resultUri\n        };\n      };\n      var hasBlobUri = function (blobUri) {\n        return blobUri in blobUriStatuses;\n      };\n      var getResultUri = function (blobUri) {\n        var result = blobUriStatuses[blobUri];\n        return result ? result.resultUri : null;\n      };\n      var isPending = function (blobUri) {\n        return hasBlobUri(blobUri) ? blobUriStatuses[blobUri].status === PENDING : false;\n      };\n      var isUploaded = function (blobUri) {\n        return hasBlobUri(blobUri) ? blobUriStatuses[blobUri].status === UPLOADED : false;\n      };\n      var markPending = function (blobUri) {\n        blobUriStatuses[blobUri] = createStatus(PENDING, null);\n      };\n      var markUploaded = function (blobUri, resultUri) {\n        blobUriStatuses[blobUri] = createStatus(UPLOADED, resultUri);\n      };\n      var removeFailed = function (blobUri) {\n        delete blobUriStatuses[blobUri];\n      };\n      var destroy = function () {\n        blobUriStatuses = {};\n      };\n      return {\n        hasBlobUri: hasBlobUri,\n        getResultUri: getResultUri,\n        isPending: isPending,\n        isUploaded: isUploaded,\n        markPending: markPending,\n        markUploaded: markUploaded,\n        removeFailed: removeFailed,\n        destroy: destroy\n      };\n    };\n\n    var count = 0;\n    var seed = function () {\n      var rnd = function () {\n        return Math.round(Math.random() * 4294967295).toString(36);\n      };\n      var now = new Date().getTime();\n      return 's' + now.toString(36) + rnd() + rnd() + rnd();\n    };\n    var uuid = function (prefix) {\n      return prefix + count++ + seed();\n    };\n\n    var BlobCache = function () {\n      var cache = [];\n      var mimeToExt = function (mime) {\n        var mimes = {\n          'image/jpeg': 'jpg',\n          'image/jpg': 'jpg',\n          'image/gif': 'gif',\n          'image/png': 'png',\n          'image/apng': 'apng',\n          'image/avif': 'avif',\n          'image/svg+xml': 'svg',\n          'image/webp': 'webp',\n          'image/bmp': 'bmp',\n          'image/tiff': 'tiff'\n        };\n        return mimes[mime.toLowerCase()] || 'dat';\n      };\n      var create = function (o, blob, base64, name, filename) {\n        if (isString$1(o)) {\n          var id = o;\n          return toBlobInfo({\n            id: id,\n            name: name,\n            filename: filename,\n            blob: blob,\n            base64: base64\n          });\n        } else if (isObject(o)) {\n          return toBlobInfo(o);\n        } else {\n          throw new Error('Unknown input type');\n        }\n      };\n      var toBlobInfo = function (o) {\n        if (!o.blob || !o.base64) {\n          throw new Error('blob and base64 representations of the image are required for BlobInfo to be created');\n        }\n        var id = o.id || uuid('blobid');\n        var name = o.name || id;\n        var blob = o.blob;\n        return {\n          id: constant(id),\n          name: constant(name),\n          filename: constant(o.filename || name + '.' + mimeToExt(blob.type)),\n          blob: constant(blob),\n          base64: constant(o.base64),\n          blobUri: constant(o.blobUri || URL.createObjectURL(blob)),\n          uri: constant(o.uri)\n        };\n      };\n      var add = function (blobInfo) {\n        if (!get(blobInfo.id())) {\n          cache.push(blobInfo);\n        }\n      };\n      var findFirst = function (predicate) {\n        return find$3(cache, predicate).getOrUndefined();\n      };\n      var get = function (id) {\n        return findFirst(function (cachedBlobInfo) {\n          return cachedBlobInfo.id() === id;\n        });\n      };\n      var getByUri = function (blobUri) {\n        return findFirst(function (blobInfo) {\n          return blobInfo.blobUri() === blobUri;\n        });\n      };\n      var getByData = function (base64, type) {\n        return findFirst(function (blobInfo) {\n          return blobInfo.base64() === base64 && blobInfo.blob().type === type;\n        });\n      };\n      var removeByUri = function (blobUri) {\n        cache = filter$4(cache, function (blobInfo) {\n          if (blobInfo.blobUri() === blobUri) {\n            URL.revokeObjectURL(blobInfo.blobUri());\n            return false;\n          }\n          return true;\n        });\n      };\n      var destroy = function () {\n        each$k(cache, function (cachedBlobInfo) {\n          URL.revokeObjectURL(cachedBlobInfo.blobUri());\n        });\n        cache = [];\n      };\n      return {\n        create: create,\n        add: add,\n        get: get,\n        getByUri: getByUri,\n        getByData: getByData,\n        findFirst: findFirst,\n        removeByUri: removeByUri,\n        destroy: destroy\n      };\n    };\n\n    var Uploader = function (uploadStatus, settings) {\n      var pendingPromises = {};\n      var pathJoin = function (path1, path2) {\n        if (path1) {\n          return path1.replace(/\\/$/, '') + '/' + path2.replace(/^\\//, '');\n        }\n        return path2;\n      };\n      var defaultHandler = function (blobInfo, success, failure, progress) {\n        var xhr = new XMLHttpRequest();\n        xhr.open('POST', settings.url);\n        xhr.withCredentials = settings.credentials;\n        xhr.upload.onprogress = function (e) {\n          progress(e.loaded / e.total * 100);\n        };\n        xhr.onerror = function () {\n          failure('Image upload failed due to a XHR Transport error. Code: ' + xhr.status);\n        };\n        xhr.onload = function () {\n          if (xhr.status < 200 || xhr.status >= 300) {\n            failure('HTTP Error: ' + xhr.status);\n            return;\n          }\n          var json = JSON.parse(xhr.responseText);\n          if (!json || typeof json.location !== 'string') {\n            failure('Invalid JSON: ' + xhr.responseText);\n            return;\n          }\n          success(pathJoin(settings.basePath, json.location));\n        };\n        var formData = new FormData();\n        formData.append('file', blobInfo.blob(), blobInfo.filename());\n        xhr.send(formData);\n      };\n      var noUpload = function () {\n        return new promiseObj(function (resolve) {\n          resolve([]);\n        });\n      };\n      var handlerSuccess = function (blobInfo, url) {\n        return {\n          url: url,\n          blobInfo: blobInfo,\n          status: true\n        };\n      };\n      var handlerFailure = function (blobInfo, message, options) {\n        return {\n          url: '',\n          blobInfo: blobInfo,\n          status: false,\n          error: {\n            message: message,\n            options: options\n          }\n        };\n      };\n      var resolvePending = function (blobUri, result) {\n        Tools.each(pendingPromises[blobUri], function (resolve) {\n          resolve(result);\n        });\n        delete pendingPromises[blobUri];\n      };\n      var uploadBlobInfo = function (blobInfo, handler, openNotification) {\n        uploadStatus.markPending(blobInfo.blobUri());\n        return new promiseObj(function (resolve) {\n          var notification, progress;\n          try {\n            var closeNotification_1 = function () {\n              if (notification) {\n                notification.close();\n                progress = noop;\n              }\n            };\n            var success = function (url) {\n              closeNotification_1();\n              uploadStatus.markUploaded(blobInfo.blobUri(), url);\n              resolvePending(blobInfo.blobUri(), handlerSuccess(blobInfo, url));\n              resolve(handlerSuccess(blobInfo, url));\n            };\n            var failure = function (error, options) {\n              var failureOptions = options ? options : {};\n              closeNotification_1();\n              uploadStatus.removeFailed(blobInfo.blobUri());\n              resolvePending(blobInfo.blobUri(), handlerFailure(blobInfo, error, failureOptions));\n              resolve(handlerFailure(blobInfo, error, failureOptions));\n            };\n            progress = function (percent) {\n              if (percent < 0 || percent > 100) {\n                return;\n              }\n              Optional.from(notification).orThunk(function () {\n                return Optional.from(openNotification).map(apply);\n              }).each(function (n) {\n                notification = n;\n                n.progressBar.value(percent);\n              });\n            };\n            handler(blobInfo, success, failure, progress);\n          } catch (ex) {\n            resolve(handlerFailure(blobInfo, ex.message, {}));\n          }\n        });\n      };\n      var isDefaultHandler = function (handler) {\n        return handler === defaultHandler;\n      };\n      var pendingUploadBlobInfo = function (blobInfo) {\n        var blobUri = blobInfo.blobUri();\n        return new promiseObj(function (resolve) {\n          pendingPromises[blobUri] = pendingPromises[blobUri] || [];\n          pendingPromises[blobUri].push(resolve);\n        });\n      };\n      var uploadBlobs = function (blobInfos, openNotification) {\n        blobInfos = Tools.grep(blobInfos, function (blobInfo) {\n          return !uploadStatus.isUploaded(blobInfo.blobUri());\n        });\n        return promiseObj.all(Tools.map(blobInfos, function (blobInfo) {\n          return uploadStatus.isPending(blobInfo.blobUri()) ? pendingUploadBlobInfo(blobInfo) : uploadBlobInfo(blobInfo, settings.handler, openNotification);\n        }));\n      };\n      var upload = function (blobInfos, openNotification) {\n        return !settings.url && isDefaultHandler(settings.handler) ? noUpload() : uploadBlobs(blobInfos, openNotification);\n      };\n      if (isFunction(settings.handler) === false) {\n        settings.handler = defaultHandler;\n      }\n      return { upload: upload };\n    };\n\n    var openNotification = function (editor) {\n      return function () {\n        return editor.notificationManager.open({\n          text: editor.translate('Image uploading...'),\n          type: 'info',\n          timeout: -1,\n          progressBar: true\n        });\n      };\n    };\n    var createUploader = function (editor, uploadStatus) {\n      return Uploader(uploadStatus, {\n        url: getImageUploadUrl(editor),\n        basePath: getImageUploadBasePath(editor),\n        credentials: getImagesUploadCredentials(editor),\n        handler: getImagesUploadHandler(editor)\n      });\n    };\n    var ImageUploader = function (editor) {\n      var uploadStatus = UploadStatus();\n      var uploader = createUploader(editor, uploadStatus);\n      return {\n        upload: function (blobInfos, showNotification) {\n          if (showNotification === void 0) {\n            showNotification = true;\n          }\n          return uploader.upload(blobInfos, showNotification ? openNotification(editor) : undefined);\n        }\n      };\n    };\n\n    var UploadChangeHandler = function (editor) {\n      var lastChangedLevel = Cell(null);\n      editor.on('change AddUndo', function (e) {\n        lastChangedLevel.set(__assign({}, e.level));\n      });\n      var fireIfChanged = function () {\n        var data = editor.undoManager.data;\n        last$2(data).filter(function (level) {\n          return !isEq$1(lastChangedLevel.get(), level);\n        }).each(function (level) {\n          editor.setDirty(true);\n          editor.fire('change', {\n            level: level,\n            lastLevel: get$a(data, data.length - 2).getOrNull()\n          });\n        });\n      };\n      return { fireIfChanged: fireIfChanged };\n    };\n    var EditorUpload = function (editor) {\n      var blobCache = BlobCache();\n      var uploader, imageScanner;\n      var uploadStatus = UploadStatus();\n      var urlFilters = [];\n      var changeHandler = UploadChangeHandler(editor);\n      var aliveGuard = function (callback) {\n        return function (result) {\n          if (editor.selection) {\n            return callback(result);\n          }\n          return [];\n        };\n      };\n      var cacheInvalidator = function (url) {\n        return url + (url.indexOf('?') === -1 ? '?' : '&') + new Date().getTime();\n      };\n      var replaceString = function (content, search, replace) {\n        var index = 0;\n        do {\n          index = content.indexOf(search, index);\n          if (index !== -1) {\n            content = content.substring(0, index) + replace + content.substr(index + search.length);\n            index += replace.length - search.length + 1;\n          }\n        } while (index !== -1);\n        return content;\n      };\n      var replaceImageUrl = function (content, targetUrl, replacementUrl) {\n        var replacementString = 'src=\"' + replacementUrl + '\"' + (replacementUrl === Env.transparentSrc ? ' data-mce-placeholder=\"1\"' : '');\n        content = replaceString(content, 'src=\"' + targetUrl + '\"', replacementString);\n        content = replaceString(content, 'data-mce-src=\"' + targetUrl + '\"', 'data-mce-src=\"' + replacementUrl + '\"');\n        return content;\n      };\n      var replaceUrlInUndoStack = function (targetUrl, replacementUrl) {\n        each$k(editor.undoManager.data, function (level) {\n          if (level.type === 'fragmented') {\n            level.fragments = map$3(level.fragments, function (fragment) {\n              return replaceImageUrl(fragment, targetUrl, replacementUrl);\n            });\n          } else {\n            level.content = replaceImageUrl(level.content, targetUrl, replacementUrl);\n          }\n        });\n      };\n      var replaceImageUriInView = function (image, resultUri) {\n        var src = editor.convertURL(resultUri, 'src');\n        replaceUrlInUndoStack(image.src, resultUri);\n        editor.$(image).attr({\n          'src': shouldReuseFileName(editor) ? cacheInvalidator(resultUri) : resultUri,\n          'data-mce-src': src\n        });\n      };\n      var uploadImages = function (callback) {\n        if (!uploader) {\n          uploader = createUploader(editor, uploadStatus);\n        }\n        return scanForImages().then(aliveGuard(function (imageInfos) {\n          var blobInfos = map$3(imageInfos, function (imageInfo) {\n            return imageInfo.blobInfo;\n          });\n          return uploader.upload(blobInfos, openNotification(editor)).then(aliveGuard(function (result) {\n            var imagesToRemove = [];\n            var filteredResult = map$3(result, function (uploadInfo, index) {\n              var blobInfo = imageInfos[index].blobInfo;\n              var image = imageInfos[index].image;\n              if (uploadInfo.status && shouldReplaceBlobUris(editor)) {\n                blobCache.removeByUri(image.src);\n                if (isRtc(editor)) ; else {\n                  replaceImageUriInView(image, uploadInfo.url);\n                }\n              } else if (uploadInfo.error) {\n                if (uploadInfo.error.options.remove) {\n                  replaceUrlInUndoStack(image.getAttribute('src'), Env.transparentSrc);\n                  imagesToRemove.push(image);\n                }\n                uploadError(editor, uploadInfo.error.message);\n              }\n              return {\n                element: image,\n                status: uploadInfo.status,\n                uploadUri: uploadInfo.url,\n                blobInfo: blobInfo\n              };\n            });\n            if (filteredResult.length > 0) {\n              changeHandler.fireIfChanged();\n            }\n            if (imagesToRemove.length > 0) {\n              if (isRtc(editor)) {\n                console.error('Removing images on failed uploads is currently unsupported for RTC');\n              } else {\n                editor.undoManager.transact(function () {\n                  each$k(imagesToRemove, function (element) {\n                    editor.dom.remove(element);\n                    blobCache.removeByUri(element.src);\n                  });\n                });\n              }\n            }\n            if (callback) {\n              callback(filteredResult);\n            }\n            return filteredResult;\n          }));\n        }));\n      };\n      var uploadImagesAuto = function (callback) {\n        if (isAutomaticUploadsEnabled(editor)) {\n          return uploadImages(callback);\n        }\n      };\n      var isValidDataUriImage = function (imgElm) {\n        if (forall(urlFilters, function (filter) {\n            return filter(imgElm);\n          }) === false) {\n          return false;\n        }\n        if (imgElm.getAttribute('src').indexOf('data:') === 0) {\n          var dataImgFilter = getImagesDataImgFilter(editor);\n          return dataImgFilter(imgElm);\n        }\n        return true;\n      };\n      var addFilter = function (filter) {\n        urlFilters.push(filter);\n      };\n      var scanForImages = function () {\n        if (!imageScanner) {\n          imageScanner = ImageScanner(uploadStatus, blobCache);\n        }\n        return imageScanner.findAll(editor.getBody(), isValidDataUriImage).then(aliveGuard(function (result) {\n          result = filter$4(result, function (resultItem) {\n            if (typeof resultItem === 'string') {\n              displayError(editor, resultItem);\n              return false;\n            }\n            return true;\n          });\n          if (isRtc(editor)) ; else {\n            each$k(result, function (resultItem) {\n              replaceUrlInUndoStack(resultItem.image.src, resultItem.blobInfo.blobUri());\n              resultItem.image.src = resultItem.blobInfo.blobUri();\n              resultItem.image.removeAttribute('data-mce-src');\n            });\n          }\n          return result;\n        }));\n      };\n      var destroy = function () {\n        blobCache.destroy();\n        uploadStatus.destroy();\n        imageScanner = uploader = null;\n      };\n      var replaceBlobUris = function (content) {\n        return content.replace(/src=\"(blob:[^\"]+)\"/g, function (match, blobUri) {\n          var resultUri = uploadStatus.getResultUri(blobUri);\n          if (resultUri) {\n            return 'src=\"' + resultUri + '\"';\n          }\n          var blobInfo = blobCache.getByUri(blobUri);\n          if (!blobInfo) {\n            blobInfo = foldl(editor.editorManager.get(), function (result, editor) {\n              return result || editor.editorUpload && editor.editorUpload.blobCache.getByUri(blobUri);\n            }, null);\n          }\n          if (blobInfo) {\n            var blob = blobInfo.blob();\n            return 'src=\"data:' + blob.type + ';base64,' + blobInfo.base64() + '\"';\n          }\n          return match;\n        });\n      };\n      editor.on('SetContent', function () {\n        if (isAutomaticUploadsEnabled(editor)) {\n          uploadImagesAuto();\n        } else {\n          scanForImages();\n        }\n      });\n      editor.on('RawSaveContent', function (e) {\n        e.content = replaceBlobUris(e.content);\n      });\n      editor.on('GetContent', function (e) {\n        if (e.source_view || e.format === 'raw' || e.format === 'tree') {\n          return;\n        }\n        e.content = replaceBlobUris(e.content);\n      });\n      editor.on('PostRender', function () {\n        editor.parser.addNodeFilter('img', function (images) {\n          each$k(images, function (img) {\n            var src = img.attr('src');\n            if (blobCache.getByUri(src)) {\n              return;\n            }\n            var resultUri = uploadStatus.getResultUri(src);\n            if (resultUri) {\n              img.attr('src', resultUri);\n            }\n          });\n        });\n      });\n      return {\n        blobCache: blobCache,\n        addFilter: addFilter,\n        uploadImages: uploadImages,\n        uploadImagesAuto: uploadImagesAuto,\n        scanForImages: scanForImages,\n        destroy: destroy\n      };\n    };\n\n    var get = function (dom) {\n      var formats = {\n        valigntop: [{\n            selector: 'td,th',\n            styles: { verticalAlign: 'top' }\n          }],\n        valignmiddle: [{\n            selector: 'td,th',\n            styles: { verticalAlign: 'middle' }\n          }],\n        valignbottom: [{\n            selector: 'td,th',\n            styles: { verticalAlign: 'bottom' }\n          }],\n        alignleft: [\n          {\n            selector: 'figure.image',\n            collapsed: false,\n            classes: 'align-left',\n            ceFalseOverride: true,\n            preview: 'font-family font-size'\n          },\n          {\n            selector: 'figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li',\n            styles: { textAlign: 'left' },\n            inherit: false,\n            preview: false,\n            defaultBlock: 'div'\n          },\n          {\n            selector: 'img,table,audio,video',\n            collapsed: false,\n            styles: { float: 'left' },\n            preview: 'font-family font-size'\n          }\n        ],\n        aligncenter: [\n          {\n            selector: 'figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li',\n            styles: { textAlign: 'center' },\n            inherit: false,\n            preview: 'font-family font-size',\n            defaultBlock: 'div'\n          },\n          {\n            selector: 'figure.image',\n            collapsed: false,\n            classes: 'align-center',\n            ceFalseOverride: true,\n            preview: 'font-family font-size'\n          },\n          {\n            selector: 'img,audio,video',\n            collapsed: false,\n            styles: {\n              display: 'block',\n              marginLeft: 'auto',\n              marginRight: 'auto'\n            },\n            preview: false\n          },\n          {\n            selector: 'table',\n            collapsed: false,\n            styles: {\n              marginLeft: 'auto',\n              marginRight: 'auto'\n            },\n            preview: 'font-family font-size'\n          }\n        ],\n        alignright: [\n          {\n            selector: 'figure.image',\n            collapsed: false,\n            classes: 'align-right',\n            ceFalseOverride: true,\n            preview: 'font-family font-size'\n          },\n          {\n            selector: 'figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li',\n            styles: { textAlign: 'right' },\n            inherit: false,\n            preview: 'font-family font-size',\n            defaultBlock: 'div'\n          },\n          {\n            selector: 'img,table,audio,video',\n            collapsed: false,\n            styles: { float: 'right' },\n            preview: 'font-family font-size'\n          }\n        ],\n        alignjustify: [{\n            selector: 'figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li',\n            styles: { textAlign: 'justify' },\n            inherit: false,\n            defaultBlock: 'div',\n            preview: 'font-family font-size'\n          }],\n        bold: [\n          {\n            inline: 'strong',\n            remove: 'all',\n            preserve_attributes: [\n              'class',\n              'style'\n            ]\n          },\n          {\n            inline: 'span',\n            styles: { fontWeight: 'bold' }\n          },\n          {\n            inline: 'b',\n            remove: 'all',\n            preserve_attributes: [\n              'class',\n              'style'\n            ]\n          }\n        ],\n        italic: [\n          {\n            inline: 'em',\n            remove: 'all',\n            preserve_attributes: [\n              'class',\n              'style'\n            ]\n          },\n          {\n            inline: 'span',\n            styles: { fontStyle: 'italic' }\n          },\n          {\n            inline: 'i',\n            remove: 'all',\n            preserve_attributes: [\n              'class',\n              'style'\n            ]\n          }\n        ],\n        underline: [\n          {\n            inline: 'span',\n            styles: { textDecoration: 'underline' },\n            exact: true\n          },\n          {\n            inline: 'u',\n            remove: 'all',\n            preserve_attributes: [\n              'class',\n              'style'\n            ]\n          }\n        ],\n        strikethrough: [\n          {\n            inline: 'span',\n            styles: { textDecoration: 'line-through' },\n            exact: true\n          },\n          {\n            inline: 'strike',\n            remove: 'all',\n            preserve_attributes: [\n              'class',\n              'style'\n            ]\n          },\n          {\n            inline: 's',\n            remove: 'all',\n            preserve_attributes: [\n              'class',\n              'style'\n            ]\n          }\n        ],\n        forecolor: {\n          inline: 'span',\n          styles: { color: '%value' },\n          links: true,\n          remove_similar: true,\n          clear_child_styles: true\n        },\n        hilitecolor: {\n          inline: 'span',\n          styles: { backgroundColor: '%value' },\n          links: true,\n          remove_similar: true,\n          clear_child_styles: true\n        },\n        fontname: {\n          inline: 'span',\n          toggle: false,\n          styles: { fontFamily: '%value' },\n          clear_child_styles: true\n        },\n        fontsize: {\n          inline: 'span',\n          toggle: false,\n          styles: { fontSize: '%value' },\n          clear_child_styles: true\n        },\n        lineheight: {\n          selector: 'h1,h2,h3,h4,h5,h6,p,li,td,th,div',\n          defaultBlock: 'p',\n          styles: { lineHeight: '%value' }\n        },\n        fontsize_class: {\n          inline: 'span',\n          attributes: { class: '%value' }\n        },\n        blockquote: {\n          block: 'blockquote',\n          wrapper: true,\n          remove: 'all'\n        },\n        subscript: { inline: 'sub' },\n        superscript: { inline: 'sup' },\n        code: { inline: 'code' },\n        link: {\n          inline: 'a',\n          selector: 'a',\n          remove: 'all',\n          split: true,\n          deep: true,\n          onmatch: function (node, _fmt, _itemName) {\n            return isElement$5(node) && node.hasAttribute('href');\n          },\n          onformat: function (elm, _fmt, vars) {\n            Tools.each(vars, function (value, key) {\n              dom.setAttrib(elm, key, value);\n            });\n          }\n        },\n        lang: {\n          inline: 'span',\n          clear_child_styles: true,\n          remove_similar: true,\n          attributes: {\n            'lang': '%value',\n            'data-mce-lang': function (vars) {\n              var _a;\n              return (_a = vars === null || vars === void 0 ? void 0 : vars.customValue) !== null && _a !== void 0 ? _a : null;\n            }\n          }\n        },\n        removeformat: [\n          {\n            selector: 'b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small',\n            remove: 'all',\n            split: true,\n            expand: false,\n            block_expand: true,\n            deep: true\n          },\n          {\n            selector: 'span',\n            attributes: [\n              'style',\n              'class'\n            ],\n            remove: 'empty',\n            split: true,\n            expand: false,\n            deep: true\n          },\n          {\n            selector: '*',\n            attributes: [\n              'style',\n              'class'\n            ],\n            split: false,\n            expand: false,\n            deep: true\n          }\n        ]\n      };\n      Tools.each('p h1 h2 h3 h4 h5 h6 div address pre dt dd samp'.split(/\\s/), function (name) {\n        formats[name] = {\n          block: name,\n          remove: 'all'\n        };\n      });\n      return formats;\n    };\n\n    var FormatRegistry = function (editor) {\n      var formats = {};\n      var get$1 = function (name) {\n        return isNonNullable(name) ? formats[name] : formats;\n      };\n      var has = function (name) {\n        return has$2(formats, name);\n      };\n      var register = function (name, format) {\n        if (name) {\n          if (!isString$1(name)) {\n            each$j(name, function (format, name) {\n              register(name, format);\n            });\n          } else {\n            if (!isArray$1(format)) {\n              format = [format];\n            }\n            each$k(format, function (format) {\n              if (isUndefined(format.deep)) {\n                format.deep = !isSelectorFormat(format);\n              }\n              if (isUndefined(format.split)) {\n                format.split = !isSelectorFormat(format) || isInlineFormat(format);\n              }\n              if (isUndefined(format.remove) && isSelectorFormat(format) && !isInlineFormat(format)) {\n                format.remove = 'none';\n              }\n              if (isSelectorFormat(format) && isInlineFormat(format)) {\n                format.mixed = true;\n                format.block_expand = true;\n              }\n              if (isString$1(format.classes)) {\n                format.classes = format.classes.split(/\\s+/);\n              }\n            });\n            formats[name] = format;\n          }\n        }\n      };\n      var unregister = function (name) {\n        if (name && formats[name]) {\n          delete formats[name];\n        }\n        return formats;\n      };\n      register(get(editor.dom));\n      register(getFormats(editor));\n      return {\n        get: get$1,\n        has: has,\n        register: register,\n        unregister: unregister\n      };\n    };\n\n    var each$5 = Tools.each;\n    var dom = DOMUtils.DOM;\n    var parsedSelectorToHtml = function (ancestry, editor) {\n      var elm, item, fragment;\n      var schema = editor && editor.schema || Schema({});\n      var decorate = function (elm, item) {\n        if (item.classes.length) {\n          dom.addClass(elm, item.classes.join(' '));\n        }\n        dom.setAttribs(elm, item.attrs);\n      };\n      var createElement = function (sItem) {\n        item = typeof sItem === 'string' ? {\n          name: sItem,\n          classes: [],\n          attrs: {}\n        } : sItem;\n        var elm = dom.create(item.name);\n        decorate(elm, item);\n        return elm;\n      };\n      var getRequiredParent = function (elm, candidate) {\n        var name = typeof elm !== 'string' ? elm.nodeName.toLowerCase() : elm;\n        var elmRule = schema.getElementRule(name);\n        var parentsRequired = elmRule && elmRule.parentsRequired;\n        if (parentsRequired && parentsRequired.length) {\n          return candidate && Tools.inArray(parentsRequired, candidate) !== -1 ? candidate : parentsRequired[0];\n        } else {\n          return false;\n        }\n      };\n      var wrapInHtml = function (elm, ancestry, siblings) {\n        var parent, parentCandidate;\n        var ancestor = ancestry.length > 0 && ancestry[0];\n        var ancestorName = ancestor && ancestor.name;\n        var parentRequired = getRequiredParent(elm, ancestorName);\n        if (parentRequired) {\n          if (ancestorName === parentRequired) {\n            parentCandidate = ancestry[0];\n            ancestry = ancestry.slice(1);\n          } else {\n            parentCandidate = parentRequired;\n          }\n        } else if (ancestor) {\n          parentCandidate = ancestry[0];\n          ancestry = ancestry.slice(1);\n        } else if (!siblings) {\n          return elm;\n        }\n        if (parentCandidate) {\n          parent = createElement(parentCandidate);\n          parent.appendChild(elm);\n        }\n        if (siblings) {\n          if (!parent) {\n            parent = dom.create('div');\n            parent.appendChild(elm);\n          }\n          Tools.each(siblings, function (sibling) {\n            var siblingElm = createElement(sibling);\n            parent.insertBefore(siblingElm, elm);\n          });\n        }\n        return wrapInHtml(parent, ancestry, parentCandidate && parentCandidate.siblings);\n      };\n      if (ancestry && ancestry.length) {\n        item = ancestry[0];\n        elm = createElement(item);\n        fragment = dom.create('div');\n        fragment.appendChild(wrapInHtml(elm, ancestry.slice(1), item.siblings));\n        return fragment;\n      } else {\n        return '';\n      }\n    };\n    var parseSelectorItem = function (item) {\n      var tagName;\n      var obj = {\n        classes: [],\n        attrs: {}\n      };\n      item = obj.selector = Tools.trim(item);\n      if (item !== '*') {\n        tagName = item.replace(/(?:([#\\.]|::?)([\\w\\-]+)|(\\[)([^\\]]+)\\]?)/g, function ($0, $1, $2, $3, $4) {\n          switch ($1) {\n          case '#':\n            obj.attrs.id = $2;\n            break;\n          case '.':\n            obj.classes.push($2);\n            break;\n          case ':':\n            if (Tools.inArray('checked disabled enabled read-only required'.split(' '), $2) !== -1) {\n              obj.attrs[$2] = $2;\n            }\n            break;\n          }\n          if ($3 === '[') {\n            var m = $4.match(/([\\w\\-]+)(?:\\=\\\"([^\\\"]+))?/);\n            if (m) {\n              obj.attrs[m[1]] = m[2];\n            }\n          }\n          return '';\n        });\n      }\n      obj.name = tagName || 'div';\n      return obj;\n    };\n    var parseSelector = function (selector) {\n      if (!selector || typeof selector !== 'string') {\n        return [];\n      }\n      selector = selector.split(/\\s*,\\s*/)[0];\n      selector = selector.replace(/\\s*(~\\+|~|\\+|>)\\s*/g, '$1');\n      return Tools.map(selector.split(/(?:>|\\s+(?![^\\[\\]]+\\]))/), function (item) {\n        var siblings = Tools.map(item.split(/(?:~\\+|~|\\+)/), parseSelectorItem);\n        var obj = siblings.pop();\n        if (siblings.length) {\n          obj.siblings = siblings;\n        }\n        return obj;\n      }).reverse();\n    };\n    var getCssText = function (editor, format) {\n      var name, previewFrag;\n      var previewCss = '', parentFontSize;\n      var previewStyles = getPreviewStyles(editor);\n      if (previewStyles === '') {\n        return '';\n      }\n      var removeVars = function (val) {\n        return val.replace(/%(\\w+)/g, '');\n      };\n      if (typeof format === 'string') {\n        format = editor.formatter.get(format);\n        if (!format) {\n          return;\n        }\n        format = format[0];\n      }\n      if ('preview' in format) {\n        var previewOpt = get$9(format, 'preview');\n        if (is$1(previewOpt, false)) {\n          return '';\n        } else {\n          previewStyles = previewOpt.getOr(previewStyles);\n        }\n      }\n      name = format.block || format.inline || 'span';\n      var items = parseSelector(format.selector);\n      if (items.length) {\n        if (!items[0].name) {\n          items[0].name = name;\n        }\n        name = format.selector;\n        previewFrag = parsedSelectorToHtml(items, editor);\n      } else {\n        previewFrag = parsedSelectorToHtml([name], editor);\n      }\n      var previewElm = dom.select(name, previewFrag)[0] || previewFrag.firstChild;\n      each$5(format.styles, function (value, name) {\n        var newValue = removeVars(value);\n        if (newValue) {\n          dom.setStyle(previewElm, name, newValue);\n        }\n      });\n      each$5(format.attributes, function (value, name) {\n        var newValue = removeVars(value);\n        if (newValue) {\n          dom.setAttrib(previewElm, name, newValue);\n        }\n      });\n      each$5(format.classes, function (value) {\n        var newValue = removeVars(value);\n        if (!dom.hasClass(previewElm, newValue)) {\n          dom.addClass(previewElm, newValue);\n        }\n      });\n      editor.fire('PreviewFormats');\n      dom.setStyles(previewFrag, {\n        position: 'absolute',\n        left: -65535\n      });\n      editor.getBody().appendChild(previewFrag);\n      parentFontSize = dom.getStyle(editor.getBody(), 'fontSize', true);\n      parentFontSize = /px$/.test(parentFontSize) ? parseInt(parentFontSize, 10) : 0;\n      each$5(previewStyles.split(' '), function (name) {\n        var value = dom.getStyle(previewElm, name, true);\n        if (name === 'background-color' && /transparent|rgba\\s*\\([^)]+,\\s*0\\)/.test(value)) {\n          value = dom.getStyle(editor.getBody(), name, true);\n          if (dom.toHex(value).toLowerCase() === '#ffffff') {\n            return;\n          }\n        }\n        if (name === 'color') {\n          if (dom.toHex(value).toLowerCase() === '#000000') {\n            return;\n          }\n        }\n        if (name === 'font-size') {\n          if (/em|%$/.test(value)) {\n            if (parentFontSize === 0) {\n              return;\n            }\n            var numValue = parseFloat(value) / (/%$/.test(value) ? 100 : 1);\n            value = numValue * parentFontSize + 'px';\n          }\n        }\n        if (name === 'border' && value) {\n          previewCss += 'padding:0 2px;';\n        }\n        previewCss += name + ':' + value + ';';\n      });\n      editor.fire('AfterPreviewFormats');\n      dom.remove(previewFrag);\n      return previewCss;\n    };\n\n    var setup$h = function (editor) {\n      editor.addShortcut('meta+b', '', 'Bold');\n      editor.addShortcut('meta+i', '', 'Italic');\n      editor.addShortcut('meta+u', '', 'Underline');\n      for (var i = 1; i <= 6; i++) {\n        editor.addShortcut('access+' + i, '', [\n          'FormatBlock',\n          false,\n          'h' + i\n        ]);\n      }\n      editor.addShortcut('access+7', '', [\n        'FormatBlock',\n        false,\n        'p'\n      ]);\n      editor.addShortcut('access+8', '', [\n        'FormatBlock',\n        false,\n        'div'\n      ]);\n      editor.addShortcut('access+9', '', [\n        'FormatBlock',\n        false,\n        'address'\n      ]);\n    };\n\n    var Formatter = function (editor) {\n      var formats = FormatRegistry(editor);\n      var formatChangeState = Cell(null);\n      setup$h(editor);\n      setup$k(editor);\n      return {\n        get: formats.get,\n        has: formats.has,\n        register: formats.register,\n        unregister: formats.unregister,\n        apply: function (name, vars, node) {\n          applyFormat(editor, name, vars, node);\n        },\n        remove: function (name, vars, node, similar) {\n          removeFormat(editor, name, vars, node, similar);\n        },\n        toggle: function (name, vars, node) {\n          toggleFormat(editor, name, vars, node);\n        },\n        match: function (name, vars, node, similar) {\n          return matchFormat(editor, name, vars, node, similar);\n        },\n        closest: function (names) {\n          return closestFormat(editor, names);\n        },\n        matchAll: function (names, vars) {\n          return matchAllFormats(editor, names, vars);\n        },\n        matchNode: function (node, name, vars, similar) {\n          return matchNodeFormat(editor, node, name, vars, similar);\n        },\n        canApply: function (name) {\n          return canApplyFormat(editor, name);\n        },\n        formatChanged: function (formats, callback, similar, vars) {\n          return formatChanged(editor, formatChangeState, formats, callback, similar, vars);\n        },\n        getCssText: curry(getCssText, editor)\n      };\n    };\n\n    var shouldIgnoreCommand = function (cmd) {\n      switch (cmd.toLowerCase()) {\n      case 'undo':\n      case 'redo':\n      case 'mcerepaint':\n      case 'mcefocus':\n        return true;\n      default:\n        return false;\n      }\n    };\n    var registerEvents = function (editor, undoManager, locks) {\n      var isFirstTypedCharacter = Cell(false);\n      var addNonTypingUndoLevel = function (e) {\n        setTyping(undoManager, false, locks);\n        undoManager.add({}, e);\n      };\n      editor.on('init', function () {\n        undoManager.add();\n      });\n      editor.on('BeforeExecCommand', function (e) {\n        var cmd = e.command;\n        if (!shouldIgnoreCommand(cmd)) {\n          endTyping(undoManager, locks);\n          undoManager.beforeChange();\n        }\n      });\n      editor.on('ExecCommand', function (e) {\n        var cmd = e.command;\n        if (!shouldIgnoreCommand(cmd)) {\n          addNonTypingUndoLevel(e);\n        }\n      });\n      editor.on('ObjectResizeStart cut', function () {\n        undoManager.beforeChange();\n      });\n      editor.on('SaveContent ObjectResized blur', addNonTypingUndoLevel);\n      editor.on('dragend', addNonTypingUndoLevel);\n      editor.on('keyup', function (e) {\n        var keyCode = e.keyCode;\n        if (e.isDefaultPrevented()) {\n          return;\n        }\n        if (keyCode >= 33 && keyCode <= 36 || keyCode >= 37 && keyCode <= 40 || keyCode === 45 || e.ctrlKey) {\n          addNonTypingUndoLevel();\n          editor.nodeChanged();\n        }\n        if (keyCode === 46 || keyCode === 8) {\n          editor.nodeChanged();\n        }\n        if (isFirstTypedCharacter.get() && undoManager.typing && isEq$1(createFromEditor(editor), undoManager.data[0]) === false) {\n          if (editor.isDirty() === false) {\n            editor.setDirty(true);\n            editor.fire('change', {\n              level: undoManager.data[0],\n              lastLevel: null\n            });\n          }\n          editor.fire('TypingUndo');\n          isFirstTypedCharacter.set(false);\n          editor.nodeChanged();\n        }\n      });\n      editor.on('keydown', function (e) {\n        var keyCode = e.keyCode;\n        if (e.isDefaultPrevented()) {\n          return;\n        }\n        if (keyCode >= 33 && keyCode <= 36 || keyCode >= 37 && keyCode <= 40 || keyCode === 45) {\n          if (undoManager.typing) {\n            addNonTypingUndoLevel(e);\n          }\n          return;\n        }\n        var modKey = e.ctrlKey && !e.altKey || e.metaKey;\n        if ((keyCode < 16 || keyCode > 20) && keyCode !== 224 && keyCode !== 91 && !undoManager.typing && !modKey) {\n          undoManager.beforeChange();\n          setTyping(undoManager, true, locks);\n          undoManager.add({}, e);\n          isFirstTypedCharacter.set(true);\n        }\n      });\n      editor.on('mousedown', function (e) {\n        if (undoManager.typing) {\n          addNonTypingUndoLevel(e);\n        }\n      });\n      var isInsertReplacementText = function (event) {\n        return event.inputType === 'insertReplacementText';\n      };\n      var isInsertTextDataNull = function (event) {\n        return event.inputType === 'insertText' && event.data === null;\n      };\n      var isInsertFromPasteOrDrop = function (event) {\n        return event.inputType === 'insertFromPaste' || event.inputType === 'insertFromDrop';\n      };\n      editor.on('input', function (e) {\n        if (e.inputType && (isInsertReplacementText(e) || isInsertTextDataNull(e) || isInsertFromPasteOrDrop(e))) {\n          addNonTypingUndoLevel(e);\n        }\n      });\n      editor.on('AddUndo Undo Redo ClearUndos', function (e) {\n        if (!e.isDefaultPrevented()) {\n          editor.nodeChanged();\n        }\n      });\n    };\n    var addKeyboardShortcuts = function (editor) {\n      editor.addShortcut('meta+z', '', 'Undo');\n      editor.addShortcut('meta+y,meta+shift+z', '', 'Redo');\n    };\n\n    var UndoManager = function (editor) {\n      var beforeBookmark = value();\n      var locks = Cell(0);\n      var index = Cell(0);\n      var undoManager = {\n        data: [],\n        typing: false,\n        beforeChange: function () {\n          beforeChange(editor, locks, beforeBookmark);\n        },\n        add: function (level, event) {\n          return addUndoLevel(editor, undoManager, index, locks, beforeBookmark, level, event);\n        },\n        undo: function () {\n          return undo(editor, undoManager, locks, index);\n        },\n        redo: function () {\n          return redo(editor, index, undoManager.data);\n        },\n        clear: function () {\n          clear(editor, undoManager, index);\n        },\n        reset: function () {\n          reset(editor, undoManager);\n        },\n        hasUndo: function () {\n          return hasUndo(editor, undoManager, index);\n        },\n        hasRedo: function () {\n          return hasRedo(editor, undoManager, index);\n        },\n        transact: function (callback) {\n          return transact(editor, undoManager, locks, callback);\n        },\n        ignore: function (callback) {\n          ignore(editor, locks, callback);\n        },\n        extra: function (callback1, callback2) {\n          extra(editor, undoManager, index, callback1, callback2);\n        }\n      };\n      if (!isRtc(editor)) {\n        registerEvents(editor, undoManager, locks);\n      }\n      addKeyboardShortcuts(editor);\n      return undoManager;\n    };\n\n    var nonTypingKeycodes = [\n      9,\n      27,\n      VK.HOME,\n      VK.END,\n      19,\n      20,\n      44,\n      144,\n      145,\n      33,\n      34,\n      45,\n      16,\n      17,\n      18,\n      91,\n      92,\n      93,\n      VK.DOWN,\n      VK.UP,\n      VK.LEFT,\n      VK.RIGHT\n    ].concat(Env.browser.isFirefox() ? [224] : []);\n    var placeholderAttr = 'data-mce-placeholder';\n    var isKeyboardEvent = function (e) {\n      return e.type === 'keydown' || e.type === 'keyup';\n    };\n    var isDeleteEvent = function (e) {\n      var keyCode = e.keyCode;\n      return keyCode === VK.BACKSPACE || keyCode === VK.DELETE;\n    };\n    var isNonTypingKeyboardEvent = function (e) {\n      if (isKeyboardEvent(e)) {\n        var keyCode = e.keyCode;\n        return !isDeleteEvent(e) && (VK.metaKeyPressed(e) || e.altKey || keyCode >= 112 && keyCode <= 123 || contains$3(nonTypingKeycodes, keyCode));\n      } else {\n        return false;\n      }\n    };\n    var isTypingKeyboardEvent = function (e) {\n      return isKeyboardEvent(e) && !(isDeleteEvent(e) || e.type === 'keyup' && e.keyCode === 229);\n    };\n    var isVisuallyEmpty = function (dom, rootElm, forcedRootBlock) {\n      if (isEmpty$2(SugarElement.fromDom(rootElm), false)) {\n        var isForcedRootBlockFalse = forcedRootBlock === '';\n        var firstElement = rootElm.firstElementChild;\n        if (!firstElement) {\n          return true;\n        } else if (dom.getStyle(rootElm.firstElementChild, 'padding-left') || dom.getStyle(rootElm.firstElementChild, 'padding-right')) {\n          return false;\n        } else {\n          return isForcedRootBlockFalse ? !dom.isBlock(firstElement) : forcedRootBlock === firstElement.nodeName.toLowerCase();\n        }\n      } else {\n        return false;\n      }\n    };\n    var setup$g = function (editor) {\n      var dom = editor.dom;\n      var rootBlock = getForcedRootBlock(editor);\n      var placeholder = getPlaceholder(editor);\n      var updatePlaceholder = function (e, initial) {\n        if (isNonTypingKeyboardEvent(e)) {\n          return;\n        }\n        var body = editor.getBody();\n        var showPlaceholder = isTypingKeyboardEvent(e) ? false : isVisuallyEmpty(dom, body, rootBlock);\n        var isPlaceholderShown = dom.getAttrib(body, placeholderAttr) !== '';\n        if (isPlaceholderShown !== showPlaceholder || initial) {\n          dom.setAttrib(body, placeholderAttr, showPlaceholder ? placeholder : null);\n          dom.setAttrib(body, 'aria-placeholder', showPlaceholder ? placeholder : null);\n          firePlaceholderToggle(editor, showPlaceholder);\n          editor.on(showPlaceholder ? 'keydown' : 'keyup', updatePlaceholder);\n          editor.off(showPlaceholder ? 'keyup' : 'keydown', updatePlaceholder);\n        }\n      };\n      if (placeholder) {\n        editor.on('init', function (e) {\n          updatePlaceholder(e, true);\n          editor.on('change SetContent ExecCommand', updatePlaceholder);\n          editor.on('paste', function (e) {\n            return Delay.setEditorTimeout(editor, function () {\n              return updatePlaceholder(e);\n            });\n          });\n        });\n      }\n    };\n\n    var strongRtl = /[\\u0591-\\u07FF\\uFB1D-\\uFDFF\\uFE70-\\uFEFC]/;\n    var hasStrongRtl = function (text) {\n      return strongRtl.test(text);\n    };\n\n    var isInlineTarget = function (editor, elm) {\n      return is$2(SugarElement.fromDom(elm), getInlineBoundarySelector(editor));\n    };\n    var isRtl = function (element) {\n      return DOMUtils.DOM.getStyle(element, 'direction', true) === 'rtl' || hasStrongRtl(element.textContent);\n    };\n    var findInlineParents = function (isInlineTarget, rootNode, pos) {\n      return filter$4(DOMUtils.DOM.getParents(pos.container(), '*', rootNode), isInlineTarget);\n    };\n    var findRootInline = function (isInlineTarget, rootNode, pos) {\n      var parents = findInlineParents(isInlineTarget, rootNode, pos);\n      return Optional.from(parents[parents.length - 1]);\n    };\n    var hasSameParentBlock = function (rootNode, node1, node2) {\n      var block1 = getParentBlock$2(node1, rootNode);\n      var block2 = getParentBlock$2(node2, rootNode);\n      return block1 && block1 === block2;\n    };\n    var isAtZwsp = function (pos) {\n      return isBeforeInline(pos) || isAfterInline(pos);\n    };\n    var normalizePosition = function (forward, pos) {\n      if (!pos) {\n        return pos;\n      }\n      var container = pos.container(), offset = pos.offset();\n      if (forward) {\n        if (isCaretContainerInline(container)) {\n          if (isText$7(container.nextSibling)) {\n            return CaretPosition(container.nextSibling, 0);\n          } else {\n            return CaretPosition.after(container);\n          }\n        } else {\n          return isBeforeInline(pos) ? CaretPosition(container, offset + 1) : pos;\n        }\n      } else {\n        if (isCaretContainerInline(container)) {\n          if (isText$7(container.previousSibling)) {\n            return CaretPosition(container.previousSibling, container.previousSibling.data.length);\n          } else {\n            return CaretPosition.before(container);\n          }\n        } else {\n          return isAfterInline(pos) ? CaretPosition(container, offset - 1) : pos;\n        }\n      }\n    };\n    var normalizeForwards = curry(normalizePosition, true);\n    var normalizeBackwards = curry(normalizePosition, false);\n\n    var isBeforeRoot = function (rootNode) {\n      return function (elm) {\n        return eq(rootNode, SugarElement.fromDom(elm.dom.parentNode));\n      };\n    };\n    var isTextBlockOrListItem = function (element) {\n      return isTextBlock$2(element) || isListItem(element);\n    };\n    var getParentBlock$1 = function (rootNode, elm) {\n      if (contains$1(rootNode, elm)) {\n        return closest$3(elm, isTextBlockOrListItem, isBeforeRoot(rootNode));\n      } else {\n        return Optional.none();\n      }\n    };\n    var placeCaretInEmptyBody = function (editor) {\n      var body = editor.getBody();\n      var node = body.firstChild && editor.dom.isBlock(body.firstChild) ? body.firstChild : body;\n      editor.selection.setCursorLocation(node, 0);\n    };\n    var paddEmptyBody = function (editor) {\n      if (editor.dom.isEmpty(editor.getBody())) {\n        editor.setContent('');\n        placeCaretInEmptyBody(editor);\n      }\n    };\n    var willDeleteLastPositionInElement = function (forward, fromPos, elm) {\n      return lift2(firstPositionIn(elm), lastPositionIn(elm), function (firstPos, lastPos) {\n        var normalizedFirstPos = normalizePosition(true, firstPos);\n        var normalizedLastPos = normalizePosition(false, lastPos);\n        var normalizedFromPos = normalizePosition(false, fromPos);\n        if (forward) {\n          return nextPosition(elm, normalizedFromPos).exists(function (nextPos) {\n            return nextPos.isEqual(normalizedLastPos) && fromPos.isEqual(normalizedFirstPos);\n          });\n        } else {\n          return prevPosition(elm, normalizedFromPos).exists(function (prevPos) {\n            return prevPos.isEqual(normalizedFirstPos) && fromPos.isEqual(normalizedLastPos);\n          });\n        }\n      }).getOr(true);\n    };\n\n    var blockPosition = function (block, position) {\n      return {\n        block: block,\n        position: position\n      };\n    };\n    var blockBoundary = function (from, to) {\n      return {\n        from: from,\n        to: to\n      };\n    };\n    var getBlockPosition = function (rootNode, pos) {\n      var rootElm = SugarElement.fromDom(rootNode);\n      var containerElm = SugarElement.fromDom(pos.container());\n      return getParentBlock$1(rootElm, containerElm).map(function (block) {\n        return blockPosition(block, pos);\n      });\n    };\n    var isDifferentBlocks = function (blockBoundary) {\n      return eq(blockBoundary.from.block, blockBoundary.to.block) === false;\n    };\n    var hasSameParent = function (blockBoundary) {\n      return parent(blockBoundary.from.block).bind(function (parent1) {\n        return parent(blockBoundary.to.block).filter(function (parent2) {\n          return eq(parent1, parent2);\n        });\n      }).isSome();\n    };\n    var isEditable$1 = function (blockBoundary) {\n      return isContentEditableFalse$b(blockBoundary.from.block.dom) === false && isContentEditableFalse$b(blockBoundary.to.block.dom) === false;\n    };\n    var skipLastBr = function (rootNode, forward, blockPosition) {\n      if (isBr$5(blockPosition.position.getNode()) && isEmpty$2(blockPosition.block) === false) {\n        return positionIn(false, blockPosition.block.dom).bind(function (lastPositionInBlock) {\n          if (lastPositionInBlock.isEqual(blockPosition.position)) {\n            return fromPosition(forward, rootNode, lastPositionInBlock).bind(function (to) {\n              return getBlockPosition(rootNode, to);\n            });\n          } else {\n            return Optional.some(blockPosition);\n          }\n        }).getOr(blockPosition);\n      } else {\n        return blockPosition;\n      }\n    };\n    var readFromRange = function (rootNode, forward, rng) {\n      var fromBlockPos = getBlockPosition(rootNode, CaretPosition.fromRangeStart(rng));\n      var toBlockPos = fromBlockPos.bind(function (blockPos) {\n        return fromPosition(forward, rootNode, blockPos.position).bind(function (to) {\n          return getBlockPosition(rootNode, to).map(function (blockPos) {\n            return skipLastBr(rootNode, forward, blockPos);\n          });\n        });\n      });\n      return lift2(fromBlockPos, toBlockPos, blockBoundary).filter(function (blockBoundary) {\n        return isDifferentBlocks(blockBoundary) && hasSameParent(blockBoundary) && isEditable$1(blockBoundary);\n      });\n    };\n    var read$1 = function (rootNode, forward, rng) {\n      return rng.collapsed ? readFromRange(rootNode, forward, rng) : Optional.none();\n    };\n\n    var getChildrenUntilBlockBoundary = function (block) {\n      var children$1 = children(block);\n      return findIndex$2(children$1, isBlock$2).fold(constant(children$1), function (index) {\n        return children$1.slice(0, index);\n      });\n    };\n    var extractChildren = function (block) {\n      var children = getChildrenUntilBlockBoundary(block);\n      each$k(children, remove$7);\n      return children;\n    };\n    var removeEmptyRoot = function (rootNode, block) {\n      var parents = parentsAndSelf(block, rootNode);\n      return find$3(parents.reverse(), function (element) {\n        return isEmpty$2(element);\n      }).each(remove$7);\n    };\n    var isEmptyBefore = function (el) {\n      return filter$4(prevSiblings(el), function (el) {\n        return !isEmpty$2(el);\n      }).length === 0;\n    };\n    var nestedBlockMerge = function (rootNode, fromBlock, toBlock, insertionPoint) {\n      if (isEmpty$2(toBlock)) {\n        fillWithPaddingBr(toBlock);\n        return firstPositionIn(toBlock.dom);\n      }\n      if (isEmptyBefore(insertionPoint) && isEmpty$2(fromBlock)) {\n        before$4(insertionPoint, SugarElement.fromTag('br'));\n      }\n      var position = prevPosition(toBlock.dom, CaretPosition.before(insertionPoint.dom));\n      each$k(extractChildren(fromBlock), function (child) {\n        before$4(insertionPoint, child);\n      });\n      removeEmptyRoot(rootNode, fromBlock);\n      return position;\n    };\n    var sidelongBlockMerge = function (rootNode, fromBlock, toBlock) {\n      if (isEmpty$2(toBlock)) {\n        remove$7(toBlock);\n        if (isEmpty$2(fromBlock)) {\n          fillWithPaddingBr(fromBlock);\n        }\n        return firstPositionIn(fromBlock.dom);\n      }\n      var position = lastPositionIn(toBlock.dom);\n      each$k(extractChildren(fromBlock), function (child) {\n        append$1(toBlock, child);\n      });\n      removeEmptyRoot(rootNode, fromBlock);\n      return position;\n    };\n    var findInsertionPoint = function (toBlock, block) {\n      var parentsAndSelf$1 = parentsAndSelf(block, toBlock);\n      return Optional.from(parentsAndSelf$1[parentsAndSelf$1.length - 1]);\n    };\n    var getInsertionPoint = function (fromBlock, toBlock) {\n      return contains$1(toBlock, fromBlock) ? findInsertionPoint(toBlock, fromBlock) : Optional.none();\n    };\n    var trimBr = function (first, block) {\n      positionIn(first, block.dom).map(function (position) {\n        return position.getNode();\n      }).map(SugarElement.fromDom).filter(isBr$4).each(remove$7);\n    };\n    var mergeBlockInto = function (rootNode, fromBlock, toBlock) {\n      trimBr(true, fromBlock);\n      trimBr(false, toBlock);\n      return getInsertionPoint(fromBlock, toBlock).fold(curry(sidelongBlockMerge, rootNode, fromBlock, toBlock), curry(nestedBlockMerge, rootNode, fromBlock, toBlock));\n    };\n    var mergeBlocks = function (rootNode, forward, block1, block2) {\n      return forward ? mergeBlockInto(rootNode, block2, block1) : mergeBlockInto(rootNode, block1, block2);\n    };\n\n    var backspaceDelete$8 = function (editor, forward) {\n      var rootNode = SugarElement.fromDom(editor.getBody());\n      var position = read$1(rootNode.dom, forward, editor.selection.getRng()).bind(function (blockBoundary) {\n        return mergeBlocks(rootNode, forward, blockBoundary.from.block, blockBoundary.to.block);\n      });\n      position.each(function (pos) {\n        editor.selection.setRng(pos.toRange());\n      });\n      return position.isSome();\n    };\n\n    var deleteRangeMergeBlocks = function (rootNode, selection) {\n      var rng = selection.getRng();\n      return lift2(getParentBlock$1(rootNode, SugarElement.fromDom(rng.startContainer)), getParentBlock$1(rootNode, SugarElement.fromDom(rng.endContainer)), function (block1, block2) {\n        if (eq(block1, block2) === false) {\n          rng.deleteContents();\n          mergeBlocks(rootNode, true, block1, block2).each(function (pos) {\n            selection.setRng(pos.toRange());\n          });\n          return true;\n        } else {\n          return false;\n        }\n      }).getOr(false);\n    };\n    var isRawNodeInTable = function (root, rawNode) {\n      var node = SugarElement.fromDom(rawNode);\n      var isRoot = curry(eq, root);\n      return ancestor$3(node, isTableCell$4, isRoot).isSome();\n    };\n    var isSelectionInTable = function (root, rng) {\n      return isRawNodeInTable(root, rng.startContainer) || isRawNodeInTable(root, rng.endContainer);\n    };\n    var isEverythingSelected = function (root, rng) {\n      var noPrevious = prevPosition(root.dom, CaretPosition.fromRangeStart(rng)).isNone();\n      var noNext = nextPosition(root.dom, CaretPosition.fromRangeEnd(rng)).isNone();\n      return !isSelectionInTable(root, rng) && noPrevious && noNext;\n    };\n    var emptyEditor = function (editor) {\n      editor.setContent('');\n      editor.selection.setCursorLocation();\n      return true;\n    };\n    var deleteRange$1 = function (editor) {\n      var rootNode = SugarElement.fromDom(editor.getBody());\n      var rng = editor.selection.getRng();\n      return isEverythingSelected(rootNode, rng) ? emptyEditor(editor) : deleteRangeMergeBlocks(rootNode, editor.selection);\n    };\n    var backspaceDelete$7 = function (editor, _forward) {\n      return editor.selection.isCollapsed() ? false : deleteRange$1(editor);\n    };\n\n    var isContentEditableTrue$2 = isContentEditableTrue$4;\n    var isContentEditableFalse$4 = isContentEditableFalse$b;\n    var showCaret = function (direction, editor, node, before, scrollIntoView) {\n      return Optional.from(editor._selectionOverrides.showCaret(direction, node, before, scrollIntoView));\n    };\n    var getNodeRange = function (node) {\n      var rng = node.ownerDocument.createRange();\n      rng.selectNode(node);\n      return rng;\n    };\n    var selectNode = function (editor, node) {\n      var e = editor.fire('BeforeObjectSelected', { target: node });\n      if (e.isDefaultPrevented()) {\n        return Optional.none();\n      }\n      return Optional.some(getNodeRange(node));\n    };\n    var renderCaretAtRange = function (editor, range, scrollIntoView) {\n      var normalizedRange = normalizeRange(1, editor.getBody(), range);\n      var caretPosition = CaretPosition.fromRangeStart(normalizedRange);\n      var caretPositionNode = caretPosition.getNode();\n      if (isInlineFakeCaretTarget(caretPositionNode)) {\n        return showCaret(1, editor, caretPositionNode, !caretPosition.isAtEnd(), false);\n      }\n      var caretPositionBeforeNode = caretPosition.getNode(true);\n      if (isInlineFakeCaretTarget(caretPositionBeforeNode)) {\n        return showCaret(1, editor, caretPositionBeforeNode, false, false);\n      }\n      var ceRoot = editor.dom.getParent(caretPosition.getNode(), function (node) {\n        return isContentEditableFalse$4(node) || isContentEditableTrue$2(node);\n      });\n      if (isInlineFakeCaretTarget(ceRoot)) {\n        return showCaret(1, editor, ceRoot, false, scrollIntoView);\n      }\n      return Optional.none();\n    };\n    var renderRangeCaret = function (editor, range, scrollIntoView) {\n      return range.collapsed ? renderCaretAtRange(editor, range, scrollIntoView).getOr(range) : range;\n    };\n\n    var isBeforeBoundary = function (pos) {\n      return isBeforeContentEditableFalse(pos) || isBeforeMedia(pos);\n    };\n    var isAfterBoundary = function (pos) {\n      return isAfterContentEditableFalse(pos) || isAfterMedia(pos);\n    };\n    var trimEmptyTextNode = function (dom, node) {\n      if (isText$7(node) && node.data.length === 0) {\n        dom.remove(node);\n      }\n    };\n    var deleteContentAndShowCaret = function (editor, range, node, direction, forward, peekCaretPosition) {\n      showCaret(direction, editor, peekCaretPosition.getNode(!forward), forward, true).each(function (caretRange) {\n        if (range.collapsed) {\n          var deleteRange = range.cloneRange();\n          if (forward) {\n            deleteRange.setEnd(caretRange.startContainer, caretRange.startOffset);\n          } else {\n            deleteRange.setStart(caretRange.endContainer, caretRange.endOffset);\n          }\n          deleteRange.deleteContents();\n        } else {\n          range.deleteContents();\n        }\n        editor.selection.setRng(caretRange);\n      });\n      trimEmptyTextNode(editor.dom, node);\n      return true;\n    };\n    var deleteBoundaryText = function (editor, forward) {\n      var range = editor.selection.getRng();\n      if (!isText$7(range.commonAncestorContainer)) {\n        return false;\n      }\n      var direction = forward ? HDirection.Forwards : HDirection.Backwards;\n      var caretWalker = CaretWalker(editor.getBody());\n      var getNextPosFn = curry(getVisualCaretPosition, forward ? caretWalker.next : caretWalker.prev);\n      var isBeforeFn = forward ? isBeforeBoundary : isAfterBoundary;\n      var caretPosition = getNormalizedRangeEndPoint(direction, editor.getBody(), range);\n      var nextCaretPosition = normalizePosition(forward, getNextPosFn(caretPosition));\n      if (!nextCaretPosition || !isMoveInsideSameBlock(caretPosition, nextCaretPosition)) {\n        return false;\n      } else if (isBeforeFn(nextCaretPosition)) {\n        return deleteContentAndShowCaret(editor, range, caretPosition.getNode(), direction, forward, nextCaretPosition);\n      }\n      var peekCaretPosition = getNextPosFn(nextCaretPosition);\n      if (peekCaretPosition && isBeforeFn(peekCaretPosition)) {\n        if (isMoveInsideSameBlock(nextCaretPosition, peekCaretPosition)) {\n          return deleteContentAndShowCaret(editor, range, caretPosition.getNode(), direction, forward, peekCaretPosition);\n        }\n      }\n      return false;\n    };\n    var backspaceDelete$6 = function (editor, forward) {\n      return deleteBoundaryText(editor, forward);\n    };\n\n    var isCompoundElement = function (node) {\n      return isTableCell$4(SugarElement.fromDom(node)) || isListItem(SugarElement.fromDom(node));\n    };\n    var DeleteAction = Adt.generate([\n      { remove: ['element'] },\n      { moveToElement: ['element'] },\n      { moveToPosition: ['position'] }\n    ]);\n    var isAtContentEditableBlockCaret = function (forward, from) {\n      var elm = from.getNode(forward === false);\n      var caretLocation = forward ? 'after' : 'before';\n      return isElement$5(elm) && elm.getAttribute('data-mce-caret') === caretLocation;\n    };\n    var isDeleteFromCefDifferentBlocks = function (root, forward, from, to) {\n      var inSameBlock = function (elm) {\n        return isInline$1(SugarElement.fromDom(elm)) && !isInSameBlock(from, to, root);\n      };\n      return getRelativeCefElm(!forward, from).fold(function () {\n        return getRelativeCefElm(forward, to).fold(never, inSameBlock);\n      }, inSameBlock);\n    };\n    var deleteEmptyBlockOrMoveToCef = function (root, forward, from, to) {\n      var toCefElm = to.getNode(forward === false);\n      return getParentBlock$1(SugarElement.fromDom(root), SugarElement.fromDom(from.getNode())).map(function (blockElm) {\n        return isEmpty$2(blockElm) ? DeleteAction.remove(blockElm.dom) : DeleteAction.moveToElement(toCefElm);\n      }).orThunk(function () {\n        return Optional.some(DeleteAction.moveToElement(toCefElm));\n      });\n    };\n    var findCefPosition = function (root, forward, from) {\n      return fromPosition(forward, root, from).bind(function (to) {\n        if (isCompoundElement(to.getNode())) {\n          return Optional.none();\n        } else if (isDeleteFromCefDifferentBlocks(root, forward, from, to)) {\n          return Optional.none();\n        } else if (forward && isContentEditableFalse$b(to.getNode())) {\n          return deleteEmptyBlockOrMoveToCef(root, forward, from, to);\n        } else if (forward === false && isContentEditableFalse$b(to.getNode(true))) {\n          return deleteEmptyBlockOrMoveToCef(root, forward, from, to);\n        } else if (forward && isAfterContentEditableFalse(from)) {\n          return Optional.some(DeleteAction.moveToPosition(to));\n        } else if (forward === false && isBeforeContentEditableFalse(from)) {\n          return Optional.some(DeleteAction.moveToPosition(to));\n        } else {\n          return Optional.none();\n        }\n      });\n    };\n    var getContentEditableBlockAction = function (forward, elm) {\n      if (forward && isContentEditableFalse$b(elm.nextSibling)) {\n        return Optional.some(DeleteAction.moveToElement(elm.nextSibling));\n      } else if (forward === false && isContentEditableFalse$b(elm.previousSibling)) {\n        return Optional.some(DeleteAction.moveToElement(elm.previousSibling));\n      } else {\n        return Optional.none();\n      }\n    };\n    var skipMoveToActionFromInlineCefToContent = function (root, from, deleteAction) {\n      return deleteAction.fold(function (elm) {\n        return Optional.some(DeleteAction.remove(elm));\n      }, function (elm) {\n        return Optional.some(DeleteAction.moveToElement(elm));\n      }, function (to) {\n        if (isInSameBlock(from, to, root)) {\n          return Optional.none();\n        } else {\n          return Optional.some(DeleteAction.moveToPosition(to));\n        }\n      });\n    };\n    var getContentEditableAction = function (root, forward, from) {\n      if (isAtContentEditableBlockCaret(forward, from)) {\n        return getContentEditableBlockAction(forward, from.getNode(forward === false)).fold(function () {\n          return findCefPosition(root, forward, from);\n        }, Optional.some);\n      } else {\n        return findCefPosition(root, forward, from).bind(function (deleteAction) {\n          return skipMoveToActionFromInlineCefToContent(root, from, deleteAction);\n        });\n      }\n    };\n    var read = function (root, forward, rng) {\n      var normalizedRange = normalizeRange(forward ? 1 : -1, root, rng);\n      var from = CaretPosition.fromRangeStart(normalizedRange);\n      var rootElement = SugarElement.fromDom(root);\n      if (forward === false && isAfterContentEditableFalse(from)) {\n        return Optional.some(DeleteAction.remove(from.getNode(true)));\n      } else if (forward && isBeforeContentEditableFalse(from)) {\n        return Optional.some(DeleteAction.remove(from.getNode()));\n      } else if (forward === false && isBeforeContentEditableFalse(from) && isAfterBr(rootElement, from)) {\n        return findPreviousBr(rootElement, from).map(function (br) {\n          return DeleteAction.remove(br.getNode());\n        });\n      } else if (forward && isAfterContentEditableFalse(from) && isBeforeBr$1(rootElement, from)) {\n        return findNextBr(rootElement, from).map(function (br) {\n          return DeleteAction.remove(br.getNode());\n        });\n      } else {\n        return getContentEditableAction(root, forward, from);\n      }\n    };\n\n    var deleteElement$1 = function (editor, forward) {\n      return function (element) {\n        editor._selectionOverrides.hideFakeCaret();\n        deleteElement$2(editor, forward, SugarElement.fromDom(element));\n        return true;\n      };\n    };\n    var moveToElement = function (editor, forward) {\n      return function (element) {\n        var pos = forward ? CaretPosition.before(element) : CaretPosition.after(element);\n        editor.selection.setRng(pos.toRange());\n        return true;\n      };\n    };\n    var moveToPosition = function (editor) {\n      return function (pos) {\n        editor.selection.setRng(pos.toRange());\n        return true;\n      };\n    };\n    var getAncestorCe = function (editor, node) {\n      return Optional.from(getContentEditableRoot$1(editor.getBody(), node));\n    };\n    var backspaceDeleteCaret = function (editor, forward) {\n      var selectedNode = editor.selection.getNode();\n      return getAncestorCe(editor, selectedNode).filter(isContentEditableFalse$b).fold(function () {\n        return read(editor.getBody(), forward, editor.selection.getRng()).exists(function (deleteAction) {\n          return deleteAction.fold(deleteElement$1(editor, forward), moveToElement(editor, forward), moveToPosition(editor));\n        });\n      }, always);\n    };\n    var deleteOffscreenSelection = function (rootElement) {\n      each$k(descendants(rootElement, '.mce-offscreen-selection'), remove$7);\n    };\n    var backspaceDeleteRange = function (editor, forward) {\n      var selectedNode = editor.selection.getNode();\n      if (isContentEditableFalse$b(selectedNode) && !isTableCell$5(selectedNode)) {\n        var hasCefAncestor = getAncestorCe(editor, selectedNode.parentNode).filter(isContentEditableFalse$b);\n        return hasCefAncestor.fold(function () {\n          deleteOffscreenSelection(SugarElement.fromDom(editor.getBody()));\n          deleteElement$2(editor, forward, SugarElement.fromDom(editor.selection.getNode()));\n          paddEmptyBody(editor);\n          return true;\n        }, always);\n      }\n      return false;\n    };\n    var paddEmptyElement = function (editor) {\n      var dom = editor.dom, selection = editor.selection;\n      var ceRoot = getContentEditableRoot$1(editor.getBody(), selection.getNode());\n      if (isContentEditableTrue$4(ceRoot) && dom.isBlock(ceRoot) && dom.isEmpty(ceRoot)) {\n        var br = dom.create('br', { 'data-mce-bogus': '1' });\n        dom.setHTML(ceRoot, '');\n        ceRoot.appendChild(br);\n        selection.setRng(CaretPosition.before(br).toRange());\n      }\n      return true;\n    };\n    var backspaceDelete$5 = function (editor, forward) {\n      if (editor.selection.isCollapsed()) {\n        return backspaceDeleteCaret(editor, forward);\n      } else {\n        return backspaceDeleteRange(editor, forward);\n      }\n    };\n\n    var deleteCaret$2 = function (editor, forward) {\n      var fromPos = CaretPosition.fromRangeStart(editor.selection.getRng());\n      return fromPosition(forward, editor.getBody(), fromPos).filter(function (pos) {\n        return forward ? isBeforeImageBlock(pos) : isAfterImageBlock(pos);\n      }).bind(function (pos) {\n        return Optional.from(getChildNodeAtRelativeOffset(forward ? 0 : -1, pos));\n      }).exists(function (elm) {\n        editor.selection.select(elm);\n        return true;\n      });\n    };\n    var backspaceDelete$4 = function (editor, forward) {\n      return editor.selection.isCollapsed() ? deleteCaret$2(editor, forward) : false;\n    };\n\n    var isText = isText$7;\n    var startsWithCaretContainer = function (node) {\n      return isText(node) && node.data[0] === ZWSP$1;\n    };\n    var endsWithCaretContainer = function (node) {\n      return isText(node) && node.data[node.data.length - 1] === ZWSP$1;\n    };\n    var createZwsp = function (node) {\n      return node.ownerDocument.createTextNode(ZWSP$1);\n    };\n    var insertBefore = function (node) {\n      if (isText(node.previousSibling)) {\n        if (endsWithCaretContainer(node.previousSibling)) {\n          return node.previousSibling;\n        } else {\n          node.previousSibling.appendData(ZWSP$1);\n          return node.previousSibling;\n        }\n      } else if (isText(node)) {\n        if (startsWithCaretContainer(node)) {\n          return node;\n        } else {\n          node.insertData(0, ZWSP$1);\n          return node;\n        }\n      } else {\n        var newNode = createZwsp(node);\n        node.parentNode.insertBefore(newNode, node);\n        return newNode;\n      }\n    };\n    var insertAfter = function (node) {\n      if (isText(node.nextSibling)) {\n        if (startsWithCaretContainer(node.nextSibling)) {\n          return node.nextSibling;\n        } else {\n          node.nextSibling.insertData(0, ZWSP$1);\n          return node.nextSibling;\n        }\n      } else if (isText(node)) {\n        if (endsWithCaretContainer(node)) {\n          return node;\n        } else {\n          node.appendData(ZWSP$1);\n          return node;\n        }\n      } else {\n        var newNode = createZwsp(node);\n        if (node.nextSibling) {\n          node.parentNode.insertBefore(newNode, node.nextSibling);\n        } else {\n          node.parentNode.appendChild(newNode);\n        }\n        return newNode;\n      }\n    };\n    var insertInline = function (before, node) {\n      return before ? insertBefore(node) : insertAfter(node);\n    };\n    var insertInlineBefore = curry(insertInline, true);\n    var insertInlineAfter = curry(insertInline, false);\n\n    var insertInlinePos = function (pos, before) {\n      if (isText$7(pos.container())) {\n        return insertInline(before, pos.container());\n      } else {\n        return insertInline(before, pos.getNode());\n      }\n    };\n    var isPosCaretContainer = function (pos, caret) {\n      var caretNode = caret.get();\n      return caretNode && pos.container() === caretNode && isCaretContainerInline(caretNode);\n    };\n    var renderCaret = function (caret, location) {\n      return location.fold(function (element) {\n        remove$2(caret.get());\n        var text = insertInlineBefore(element);\n        caret.set(text);\n        return Optional.some(CaretPosition(text, text.length - 1));\n      }, function (element) {\n        return firstPositionIn(element).map(function (pos) {\n          if (!isPosCaretContainer(pos, caret)) {\n            remove$2(caret.get());\n            var text = insertInlinePos(pos, true);\n            caret.set(text);\n            return CaretPosition(text, 1);\n          } else {\n            return CaretPosition(caret.get(), 1);\n          }\n        });\n      }, function (element) {\n        return lastPositionIn(element).map(function (pos) {\n          if (!isPosCaretContainer(pos, caret)) {\n            remove$2(caret.get());\n            var text = insertInlinePos(pos, false);\n            caret.set(text);\n            return CaretPosition(text, text.length - 1);\n          } else {\n            return CaretPosition(caret.get(), caret.get().length - 1);\n          }\n        });\n      }, function (element) {\n        remove$2(caret.get());\n        var text = insertInlineAfter(element);\n        caret.set(text);\n        return Optional.some(CaretPosition(text, 1));\n      });\n    };\n\n    var evaluateUntil = function (fns, args) {\n      for (var i = 0; i < fns.length; i++) {\n        var result = fns[i].apply(null, args);\n        if (result.isSome()) {\n          return result;\n        }\n      }\n      return Optional.none();\n    };\n\n    var Location = Adt.generate([\n      { before: ['element'] },\n      { start: ['element'] },\n      { end: ['element'] },\n      { after: ['element'] }\n    ]);\n    var rescope$1 = function (rootNode, node) {\n      var parentBlock = getParentBlock$2(node, rootNode);\n      return parentBlock ? parentBlock : rootNode;\n    };\n    var before = function (isInlineTarget, rootNode, pos) {\n      var nPos = normalizeForwards(pos);\n      var scope = rescope$1(rootNode, nPos.container());\n      return findRootInline(isInlineTarget, scope, nPos).fold(function () {\n        return nextPosition(scope, nPos).bind(curry(findRootInline, isInlineTarget, scope)).map(function (inline) {\n          return Location.before(inline);\n        });\n      }, Optional.none);\n    };\n    var isNotInsideFormatCaretContainer = function (rootNode, elm) {\n      return getParentCaretContainer(rootNode, elm) === null;\n    };\n    var findInsideRootInline = function (isInlineTarget, rootNode, pos) {\n      return findRootInline(isInlineTarget, rootNode, pos).filter(curry(isNotInsideFormatCaretContainer, rootNode));\n    };\n    var start$1 = function (isInlineTarget, rootNode, pos) {\n      var nPos = normalizeBackwards(pos);\n      return findInsideRootInline(isInlineTarget, rootNode, nPos).bind(function (inline) {\n        var prevPos = prevPosition(inline, nPos);\n        return prevPos.isNone() ? Optional.some(Location.start(inline)) : Optional.none();\n      });\n    };\n    var end = function (isInlineTarget, rootNode, pos) {\n      var nPos = normalizeForwards(pos);\n      return findInsideRootInline(isInlineTarget, rootNode, nPos).bind(function (inline) {\n        var nextPos = nextPosition(inline, nPos);\n        return nextPos.isNone() ? Optional.some(Location.end(inline)) : Optional.none();\n      });\n    };\n    var after = function (isInlineTarget, rootNode, pos) {\n      var nPos = normalizeBackwards(pos);\n      var scope = rescope$1(rootNode, nPos.container());\n      return findRootInline(isInlineTarget, scope, nPos).fold(function () {\n        return prevPosition(scope, nPos).bind(curry(findRootInline, isInlineTarget, scope)).map(function (inline) {\n          return Location.after(inline);\n        });\n      }, Optional.none);\n    };\n    var isValidLocation = function (location) {\n      return isRtl(getElement(location)) === false;\n    };\n    var readLocation = function (isInlineTarget, rootNode, pos) {\n      var location = evaluateUntil([\n        before,\n        start$1,\n        end,\n        after\n      ], [\n        isInlineTarget,\n        rootNode,\n        pos\n      ]);\n      return location.filter(isValidLocation);\n    };\n    var getElement = function (location) {\n      return location.fold(identity, identity, identity, identity);\n    };\n    var getName = function (location) {\n      return location.fold(constant('before'), constant('start'), constant('end'), constant('after'));\n    };\n    var outside = function (location) {\n      return location.fold(Location.before, Location.before, Location.after, Location.after);\n    };\n    var inside = function (location) {\n      return location.fold(Location.start, Location.start, Location.end, Location.end);\n    };\n    var isEq = function (location1, location2) {\n      return getName(location1) === getName(location2) && getElement(location1) === getElement(location2);\n    };\n    var betweenInlines = function (forward, isInlineTarget, rootNode, from, to, location) {\n      return lift2(findRootInline(isInlineTarget, rootNode, from), findRootInline(isInlineTarget, rootNode, to), function (fromInline, toInline) {\n        if (fromInline !== toInline && hasSameParentBlock(rootNode, fromInline, toInline)) {\n          return Location.after(forward ? fromInline : toInline);\n        } else {\n          return location;\n        }\n      }).getOr(location);\n    };\n    var skipNoMovement = function (fromLocation, toLocation) {\n      return fromLocation.fold(always, function (fromLocation) {\n        return !isEq(fromLocation, toLocation);\n      });\n    };\n    var findLocationTraverse = function (forward, isInlineTarget, rootNode, fromLocation, pos) {\n      var from = normalizePosition(forward, pos);\n      var to = fromPosition(forward, rootNode, from).map(curry(normalizePosition, forward));\n      var location = to.fold(function () {\n        return fromLocation.map(outside);\n      }, function (to) {\n        return readLocation(isInlineTarget, rootNode, to).map(curry(betweenInlines, forward, isInlineTarget, rootNode, from, to)).filter(curry(skipNoMovement, fromLocation));\n      });\n      return location.filter(isValidLocation);\n    };\n    var findLocationSimple = function (forward, location) {\n      if (forward) {\n        return location.fold(compose(Optional.some, Location.start), Optional.none, compose(Optional.some, Location.after), Optional.none);\n      } else {\n        return location.fold(Optional.none, compose(Optional.some, Location.before), Optional.none, compose(Optional.some, Location.end));\n      }\n    };\n    var findLocation$1 = function (forward, isInlineTarget, rootNode, pos) {\n      var from = normalizePosition(forward, pos);\n      var fromLocation = readLocation(isInlineTarget, rootNode, from);\n      return readLocation(isInlineTarget, rootNode, from).bind(curry(findLocationSimple, forward)).orThunk(function () {\n        return findLocationTraverse(forward, isInlineTarget, rootNode, fromLocation, pos);\n      });\n    };\n    curry(findLocation$1, false);\n    curry(findLocation$1, true);\n\n    var hasSelectionModifyApi = function (editor) {\n      return isFunction(editor.selection.getSel().modify);\n    };\n    var moveRel = function (forward, selection, pos) {\n      var delta = forward ? 1 : -1;\n      selection.setRng(CaretPosition(pos.container(), pos.offset() + delta).toRange());\n      selection.getSel().modify('move', forward ? 'forward' : 'backward', 'word');\n      return true;\n    };\n    var moveByWord = function (forward, editor) {\n      var rng = editor.selection.getRng();\n      var pos = forward ? CaretPosition.fromRangeEnd(rng) : CaretPosition.fromRangeStart(rng);\n      if (!hasSelectionModifyApi(editor)) {\n        return false;\n      } else if (forward && isBeforeInline(pos)) {\n        return moveRel(true, editor.selection, pos);\n      } else if (!forward && isAfterInline(pos)) {\n        return moveRel(false, editor.selection, pos);\n      } else {\n        return false;\n      }\n    };\n\n    var BreakType;\n    (function (BreakType) {\n      BreakType[BreakType['Br'] = 0] = 'Br';\n      BreakType[BreakType['Block'] = 1] = 'Block';\n      BreakType[BreakType['Wrap'] = 2] = 'Wrap';\n      BreakType[BreakType['Eol'] = 3] = 'Eol';\n    }(BreakType || (BreakType = {})));\n    var flip = function (direction, positions) {\n      return direction === HDirection.Backwards ? reverse(positions) : positions;\n    };\n    var walk = function (direction, caretWalker, pos) {\n      return direction === HDirection.Forwards ? caretWalker.next(pos) : caretWalker.prev(pos);\n    };\n    var getBreakType = function (scope, direction, currentPos, nextPos) {\n      if (isBr$5(nextPos.getNode(direction === HDirection.Forwards))) {\n        return BreakType.Br;\n      } else if (isInSameBlock(currentPos, nextPos) === false) {\n        return BreakType.Block;\n      } else {\n        return BreakType.Wrap;\n      }\n    };\n    var getPositionsUntil = function (predicate, direction, scope, start) {\n      var caretWalker = CaretWalker(scope);\n      var currentPos = start;\n      var positions = [];\n      while (currentPos) {\n        var nextPos = walk(direction, caretWalker, currentPos);\n        if (!nextPos) {\n          break;\n        }\n        if (isBr$5(nextPos.getNode(false))) {\n          if (direction === HDirection.Forwards) {\n            return {\n              positions: flip(direction, positions).concat([nextPos]),\n              breakType: BreakType.Br,\n              breakAt: Optional.some(nextPos)\n            };\n          } else {\n            return {\n              positions: flip(direction, positions),\n              breakType: BreakType.Br,\n              breakAt: Optional.some(nextPos)\n            };\n          }\n        }\n        if (!nextPos.isVisible()) {\n          currentPos = nextPos;\n          continue;\n        }\n        if (predicate(currentPos, nextPos)) {\n          var breakType = getBreakType(scope, direction, currentPos, nextPos);\n          return {\n            positions: flip(direction, positions),\n            breakType: breakType,\n            breakAt: Optional.some(nextPos)\n          };\n        }\n        positions.push(nextPos);\n        currentPos = nextPos;\n      }\n      return {\n        positions: flip(direction, positions),\n        breakType: BreakType.Eol,\n        breakAt: Optional.none()\n      };\n    };\n    var getAdjacentLinePositions = function (direction, getPositionsUntilBreak, scope, start) {\n      return getPositionsUntilBreak(scope, start).breakAt.map(function (pos) {\n        var positions = getPositionsUntilBreak(scope, pos).positions;\n        return direction === HDirection.Backwards ? positions.concat(pos) : [pos].concat(positions);\n      }).getOr([]);\n    };\n    var findClosestHorizontalPositionFromPoint = function (positions, x) {\n      return foldl(positions, function (acc, newPos) {\n        return acc.fold(function () {\n          return Optional.some(newPos);\n        }, function (lastPos) {\n          return lift2(head(lastPos.getClientRects()), head(newPos.getClientRects()), function (lastRect, newRect) {\n            var lastDist = Math.abs(x - lastRect.left);\n            var newDist = Math.abs(x - newRect.left);\n            return newDist <= lastDist ? newPos : lastPos;\n          }).or(acc);\n        });\n      }, Optional.none());\n    };\n    var findClosestHorizontalPosition = function (positions, pos) {\n      return head(pos.getClientRects()).bind(function (targetRect) {\n        return findClosestHorizontalPositionFromPoint(positions, targetRect.left);\n      });\n    };\n    var getPositionsUntilPreviousLine = curry(getPositionsUntil, CaretPosition.isAbove, -1);\n    var getPositionsUntilNextLine = curry(getPositionsUntil, CaretPosition.isBelow, 1);\n    var getPositionsAbove = curry(getAdjacentLinePositions, -1, getPositionsUntilPreviousLine);\n    var getPositionsBelow = curry(getAdjacentLinePositions, 1, getPositionsUntilNextLine);\n    var isAtFirstLine = function (scope, pos) {\n      return getPositionsUntilPreviousLine(scope, pos).breakAt.isNone();\n    };\n    var isAtLastLine = function (scope, pos) {\n      return getPositionsUntilNextLine(scope, pos).breakAt.isNone();\n    };\n    var getFirstLinePositions = function (scope) {\n      return firstPositionIn(scope).map(function (pos) {\n        return [pos].concat(getPositionsUntilNextLine(scope, pos).positions);\n      }).getOr([]);\n    };\n    var getLastLinePositions = function (scope) {\n      return lastPositionIn(scope).map(function (pos) {\n        return getPositionsUntilPreviousLine(scope, pos).positions.concat(pos);\n      }).getOr([]);\n    };\n\n    var getNodeClientRects = function (node) {\n      var toArrayWithNode = function (clientRects) {\n        return map$3(clientRects, function (rect) {\n          var clientRect = clone(rect);\n          clientRect.node = node;\n          return clientRect;\n        });\n      };\n      if (isElement$5(node)) {\n        return toArrayWithNode(node.getClientRects());\n      }\n      if (isText$7(node)) {\n        var rng = node.ownerDocument.createRange();\n        rng.setStart(node, 0);\n        rng.setEnd(node, node.data.length);\n        return toArrayWithNode(rng.getClientRects());\n      }\n    };\n    var getClientRects = function (nodes) {\n      return bind(nodes, getNodeClientRects);\n    };\n\n    var VDirection;\n    (function (VDirection) {\n      VDirection[VDirection['Up'] = -1] = 'Up';\n      VDirection[VDirection['Down'] = 1] = 'Down';\n    }(VDirection || (VDirection = {})));\n    var findUntil = function (direction, root, predicateFn, node) {\n      while (node = findNode$1(node, direction, isEditableCaretCandidate$1, root)) {\n        if (predicateFn(node)) {\n          return;\n        }\n      }\n    };\n    var walkUntil$1 = function (direction, isAboveFn, isBeflowFn, root, predicateFn, caretPosition) {\n      var line = 0;\n      var result = [];\n      var add = function (node) {\n        var clientRects = getClientRects([node]);\n        if (direction === -1) {\n          clientRects = clientRects.reverse();\n        }\n        for (var i = 0; i < clientRects.length; i++) {\n          var clientRect = clientRects[i];\n          if (isBeflowFn(clientRect, targetClientRect)) {\n            continue;\n          }\n          if (result.length > 0 && isAboveFn(clientRect, last$1(result))) {\n            line++;\n          }\n          clientRect.line = line;\n          if (predicateFn(clientRect)) {\n            return true;\n          }\n          result.push(clientRect);\n        }\n      };\n      var targetClientRect = last$1(caretPosition.getClientRects());\n      if (!targetClientRect) {\n        return result;\n      }\n      var node = caretPosition.getNode();\n      add(node);\n      findUntil(direction, root, add, node);\n      return result;\n    };\n    var aboveLineNumber = function (lineNumber, clientRect) {\n      return clientRect.line > lineNumber;\n    };\n    var isLineNumber = function (lineNumber, clientRect) {\n      return clientRect.line === lineNumber;\n    };\n    var upUntil = curry(walkUntil$1, VDirection.Up, isAbove$1, isBelow$1);\n    var downUntil = curry(walkUntil$1, VDirection.Down, isBelow$1, isAbove$1);\n    var positionsUntil = function (direction, root, predicateFn, node) {\n      var caretWalker = CaretWalker(root);\n      var walkFn;\n      var isBelowFn;\n      var isAboveFn;\n      var caretPosition;\n      var result = [];\n      var line = 0;\n      var getClientRect = function (caretPosition) {\n        if (direction === 1) {\n          return last$1(caretPosition.getClientRects());\n        }\n        return last$1(caretPosition.getClientRects());\n      };\n      if (direction === 1) {\n        walkFn = caretWalker.next;\n        isBelowFn = isBelow$1;\n        isAboveFn = isAbove$1;\n        caretPosition = CaretPosition.after(node);\n      } else {\n        walkFn = caretWalker.prev;\n        isBelowFn = isAbove$1;\n        isAboveFn = isBelow$1;\n        caretPosition = CaretPosition.before(node);\n      }\n      var targetClientRect = getClientRect(caretPosition);\n      do {\n        if (!caretPosition.isVisible()) {\n          continue;\n        }\n        var rect = getClientRect(caretPosition);\n        if (isAboveFn(rect, targetClientRect)) {\n          continue;\n        }\n        if (result.length > 0 && isBelowFn(rect, last$1(result))) {\n          line++;\n        }\n        var clientRect = clone(rect);\n        clientRect.position = caretPosition;\n        clientRect.line = line;\n        if (predicateFn(clientRect)) {\n          return result;\n        }\n        result.push(clientRect);\n      } while (caretPosition = walkFn(caretPosition));\n      return result;\n    };\n    var isAboveLine = function (lineNumber) {\n      return function (clientRect) {\n        return aboveLineNumber(lineNumber, clientRect);\n      };\n    };\n    var isLine = function (lineNumber) {\n      return function (clientRect) {\n        return isLineNumber(lineNumber, clientRect);\n      };\n    };\n\n    var isContentEditableFalse$3 = isContentEditableFalse$b;\n    var findNode = findNode$1;\n    var distanceToRectLeft = function (clientRect, clientX) {\n      return Math.abs(clientRect.left - clientX);\n    };\n    var distanceToRectRight = function (clientRect, clientX) {\n      return Math.abs(clientRect.right - clientX);\n    };\n    var isInsideX = function (clientX, clientRect) {\n      return clientX >= clientRect.left && clientX <= clientRect.right;\n    };\n    var isInsideY = function (clientY, clientRect) {\n      return clientY >= clientRect.top && clientY <= clientRect.bottom;\n    };\n    var isNodeClientRect = function (rect) {\n      return hasNonNullableKey(rect, 'node');\n    };\n    var findClosestClientRect = function (clientRects, clientX, allowInside) {\n      if (allowInside === void 0) {\n        allowInside = always;\n      }\n      return reduce(clientRects, function (oldClientRect, clientRect) {\n        if (isInsideX(clientX, clientRect)) {\n          return allowInside(clientRect) ? clientRect : oldClientRect;\n        }\n        if (isInsideX(clientX, oldClientRect)) {\n          return allowInside(oldClientRect) ? oldClientRect : clientRect;\n        }\n        var oldDistance = Math.min(distanceToRectLeft(oldClientRect, clientX), distanceToRectRight(oldClientRect, clientX));\n        var newDistance = Math.min(distanceToRectLeft(clientRect, clientX), distanceToRectRight(clientRect, clientX));\n        if (newDistance === oldDistance && isNodeClientRect(clientRect) && isContentEditableFalse$3(clientRect.node)) {\n          return clientRect;\n        }\n        if (newDistance < oldDistance) {\n          return clientRect;\n        }\n        return oldClientRect;\n      });\n    };\n    var walkUntil = function (direction, root, predicateFn, startNode, includeChildren) {\n      var node = findNode(startNode, direction, isEditableCaretCandidate$1, root, !includeChildren);\n      do {\n        if (!node || predicateFn(node)) {\n          return;\n        }\n      } while (node = findNode(node, direction, isEditableCaretCandidate$1, root));\n    };\n    var findLineNodeRects = function (root, targetNodeRect, includeChildren) {\n      if (includeChildren === void 0) {\n        includeChildren = true;\n      }\n      var clientRects = [];\n      var collect = function (checkPosFn, node) {\n        var lineRects = filter$4(getClientRects([node]), function (clientRect) {\n          return !checkPosFn(clientRect, targetNodeRect);\n        });\n        clientRects = clientRects.concat(lineRects);\n        return lineRects.length === 0;\n      };\n      clientRects.push(targetNodeRect);\n      walkUntil(VDirection.Up, root, curry(collect, isAbove$1), targetNodeRect.node, includeChildren);\n      walkUntil(VDirection.Down, root, curry(collect, isBelow$1), targetNodeRect.node, includeChildren);\n      return clientRects;\n    };\n    var getFakeCaretTargets = function (root) {\n      return filter$4(from(root.getElementsByTagName('*')), isFakeCaretTarget);\n    };\n    var caretInfo = function (clientRect, clientX) {\n      return {\n        node: clientRect.node,\n        before: distanceToRectLeft(clientRect, clientX) < distanceToRectRight(clientRect, clientX)\n      };\n    };\n    var closestFakeCaret = function (root, clientX, clientY) {\n      var fakeTargetNodeRects = getClientRects(getFakeCaretTargets(root));\n      var targetNodeRects = filter$4(fakeTargetNodeRects, curry(isInsideY, clientY));\n      var checkInside = function (clientRect) {\n        return !isTable$3(clientRect.node) && !isMedia$2(clientRect.node);\n      };\n      var closestNodeRect = findClosestClientRect(targetNodeRects, clientX, checkInside);\n      if (closestNodeRect) {\n        var includeChildren = checkInside(closestNodeRect);\n        closestNodeRect = findClosestClientRect(findLineNodeRects(root, closestNodeRect, includeChildren), clientX, checkInside);\n        if (closestNodeRect && isFakeCaretTarget(closestNodeRect.node)) {\n          return caretInfo(closestNodeRect, clientX);\n        }\n      }\n      return null;\n    };\n\n    var moveToRange = function (editor, rng) {\n      editor.selection.setRng(rng);\n      scrollRangeIntoView(editor, editor.selection.getRng());\n    };\n    var renderRangeCaretOpt = function (editor, range, scrollIntoView) {\n      return Optional.some(renderRangeCaret(editor, range, scrollIntoView));\n    };\n    var moveHorizontally = function (editor, direction, range, isBefore, isAfter, isElement) {\n      var forwards = direction === HDirection.Forwards;\n      var caretWalker = CaretWalker(editor.getBody());\n      var getNextPosFn = curry(getVisualCaretPosition, forwards ? caretWalker.next : caretWalker.prev);\n      var isBeforeFn = forwards ? isBefore : isAfter;\n      if (!range.collapsed) {\n        var node = getSelectedNode(range);\n        if (isElement(node)) {\n          return showCaret(direction, editor, node, direction === HDirection.Backwards, false);\n        }\n      }\n      var caretPosition = getNormalizedRangeEndPoint(direction, editor.getBody(), range);\n      if (isBeforeFn(caretPosition)) {\n        return selectNode(editor, caretPosition.getNode(!forwards));\n      }\n      var nextCaretPosition = normalizePosition(forwards, getNextPosFn(caretPosition));\n      var rangeIsInContainerBlock = isRangeInCaretContainerBlock(range);\n      if (!nextCaretPosition) {\n        return rangeIsInContainerBlock ? Optional.some(range) : Optional.none();\n      }\n      if (isBeforeFn(nextCaretPosition)) {\n        return showCaret(direction, editor, nextCaretPosition.getNode(!forwards), forwards, false);\n      }\n      var peekCaretPosition = getNextPosFn(nextCaretPosition);\n      if (peekCaretPosition && isBeforeFn(peekCaretPosition)) {\n        if (isMoveInsideSameBlock(nextCaretPosition, peekCaretPosition)) {\n          return showCaret(direction, editor, peekCaretPosition.getNode(!forwards), forwards, false);\n        }\n      }\n      if (rangeIsInContainerBlock) {\n        return renderRangeCaretOpt(editor, nextCaretPosition.toRange(), false);\n      }\n      return Optional.none();\n    };\n    var moveVertically = function (editor, direction, range, isBefore, isAfter, isElement) {\n      var caretPosition = getNormalizedRangeEndPoint(direction, editor.getBody(), range);\n      var caretClientRect = last$1(caretPosition.getClientRects());\n      var forwards = direction === VDirection.Down;\n      if (!caretClientRect) {\n        return Optional.none();\n      }\n      var walkerFn = forwards ? downUntil : upUntil;\n      var linePositions = walkerFn(editor.getBody(), isAboveLine(1), caretPosition);\n      var nextLinePositions = filter$4(linePositions, isLine(1));\n      var clientX = caretClientRect.left;\n      var nextLineRect = findClosestClientRect(nextLinePositions, clientX);\n      if (nextLineRect && isElement(nextLineRect.node)) {\n        var dist1 = Math.abs(clientX - nextLineRect.left);\n        var dist2 = Math.abs(clientX - nextLineRect.right);\n        return showCaret(direction, editor, nextLineRect.node, dist1 < dist2, false);\n      }\n      var currentNode;\n      if (isBefore(caretPosition)) {\n        currentNode = caretPosition.getNode();\n      } else if (isAfter(caretPosition)) {\n        currentNode = caretPosition.getNode(true);\n      } else {\n        currentNode = getSelectedNode(range);\n      }\n      if (currentNode) {\n        var caretPositions = positionsUntil(direction, editor.getBody(), isAboveLine(1), currentNode);\n        var closestNextLineRect = findClosestClientRect(filter$4(caretPositions, isLine(1)), clientX);\n        if (closestNextLineRect) {\n          return renderRangeCaretOpt(editor, closestNextLineRect.position.toRange(), false);\n        }\n        closestNextLineRect = last$1(filter$4(caretPositions, isLine(0)));\n        if (closestNextLineRect) {\n          return renderRangeCaretOpt(editor, closestNextLineRect.position.toRange(), false);\n        }\n      }\n      if (nextLinePositions.length === 0) {\n        return getLineEndPoint(editor, forwards).filter(forwards ? isAfter : isBefore).map(function (pos) {\n          return renderRangeCaret(editor, pos.toRange(), false);\n        });\n      }\n      return Optional.none();\n    };\n    var getLineEndPoint = function (editor, forward) {\n      var rng = editor.selection.getRng();\n      var body = editor.getBody();\n      if (forward) {\n        var from = CaretPosition.fromRangeEnd(rng);\n        var result = getPositionsUntilNextLine(body, from);\n        return last$2(result.positions);\n      } else {\n        var from = CaretPosition.fromRangeStart(rng);\n        var result = getPositionsUntilPreviousLine(body, from);\n        return head(result.positions);\n      }\n    };\n    var moveToLineEndPoint$3 = function (editor, forward, isElementPosition) {\n      return getLineEndPoint(editor, forward).filter(isElementPosition).exists(function (pos) {\n        editor.selection.setRng(pos.toRange());\n        return true;\n      });\n    };\n\n    var setCaretPosition = function (editor, pos) {\n      var rng = editor.dom.createRng();\n      rng.setStart(pos.container(), pos.offset());\n      rng.setEnd(pos.container(), pos.offset());\n      editor.selection.setRng(rng);\n    };\n    var setSelected = function (state, elm) {\n      if (state) {\n        elm.setAttribute('data-mce-selected', 'inline-boundary');\n      } else {\n        elm.removeAttribute('data-mce-selected');\n      }\n    };\n    var renderCaretLocation = function (editor, caret, location) {\n      return renderCaret(caret, location).map(function (pos) {\n        setCaretPosition(editor, pos);\n        return location;\n      });\n    };\n    var findLocation = function (editor, caret, forward) {\n      var rootNode = editor.getBody();\n      var from = CaretPosition.fromRangeStart(editor.selection.getRng());\n      var isInlineTarget$1 = curry(isInlineTarget, editor);\n      var location = findLocation$1(forward, isInlineTarget$1, rootNode, from);\n      return location.bind(function (location) {\n        return renderCaretLocation(editor, caret, location);\n      });\n    };\n    var toggleInlines = function (isInlineTarget, dom, elms) {\n      var inlineBoundaries = map$3(descendants(SugarElement.fromDom(dom.getRoot()), '*[data-mce-selected=\"inline-boundary\"]'), function (e) {\n        return e.dom;\n      });\n      var selectedInlines = filter$4(inlineBoundaries, isInlineTarget);\n      var targetInlines = filter$4(elms, isInlineTarget);\n      each$k(difference(selectedInlines, targetInlines), curry(setSelected, false));\n      each$k(difference(targetInlines, selectedInlines), curry(setSelected, true));\n    };\n    var safeRemoveCaretContainer = function (editor, caret) {\n      if (editor.selection.isCollapsed() && editor.composing !== true && caret.get()) {\n        var pos = CaretPosition.fromRangeStart(editor.selection.getRng());\n        if (CaretPosition.isTextPosition(pos) && isAtZwsp(pos) === false) {\n          setCaretPosition(editor, removeAndReposition(caret.get(), pos));\n          caret.set(null);\n        }\n      }\n    };\n    var renderInsideInlineCaret = function (isInlineTarget, editor, caret, elms) {\n      if (editor.selection.isCollapsed()) {\n        var inlines = filter$4(elms, isInlineTarget);\n        each$k(inlines, function (_inline) {\n          var pos = CaretPosition.fromRangeStart(editor.selection.getRng());\n          readLocation(isInlineTarget, editor.getBody(), pos).bind(function (location) {\n            return renderCaretLocation(editor, caret, location);\n          });\n        });\n      }\n    };\n    var move$2 = function (editor, caret, forward) {\n      return isInlineBoundariesEnabled(editor) ? findLocation(editor, caret, forward).isSome() : false;\n    };\n    var moveWord = function (forward, editor, _caret) {\n      return isInlineBoundariesEnabled(editor) ? moveByWord(forward, editor) : false;\n    };\n    var setupSelectedState = function (editor) {\n      var caret = Cell(null);\n      var isInlineTarget$1 = curry(isInlineTarget, editor);\n      editor.on('NodeChange', function (e) {\n        if (isInlineBoundariesEnabled(editor) && !(Env.browser.isIE() && e.initial)) {\n          toggleInlines(isInlineTarget$1, editor.dom, e.parents);\n          safeRemoveCaretContainer(editor, caret);\n          renderInsideInlineCaret(isInlineTarget$1, editor, caret, e.parents);\n        }\n      });\n      return caret;\n    };\n    var moveNextWord = curry(moveWord, true);\n    var movePrevWord = curry(moveWord, false);\n    var moveToLineEndPoint$2 = function (editor, forward, caret) {\n      if (isInlineBoundariesEnabled(editor)) {\n        var linePoint = getLineEndPoint(editor, forward).getOrThunk(function () {\n          var rng = editor.selection.getRng();\n          return forward ? CaretPosition.fromRangeEnd(rng) : CaretPosition.fromRangeStart(rng);\n        });\n        return readLocation(curry(isInlineTarget, editor), editor.getBody(), linePoint).exists(function (loc) {\n          var outsideLoc = outside(loc);\n          return renderCaret(caret, outsideLoc).exists(function (pos) {\n            setCaretPosition(editor, pos);\n            return true;\n          });\n        });\n      } else {\n        return false;\n      }\n    };\n\n    var rangeFromPositions = function (from, to) {\n      var range = document.createRange();\n      range.setStart(from.container(), from.offset());\n      range.setEnd(to.container(), to.offset());\n      return range;\n    };\n    var hasOnlyTwoOrLessPositionsLeft = function (elm) {\n      return lift2(firstPositionIn(elm), lastPositionIn(elm), function (firstPos, lastPos) {\n        var normalizedFirstPos = normalizePosition(true, firstPos);\n        var normalizedLastPos = normalizePosition(false, lastPos);\n        return nextPosition(elm, normalizedFirstPos).forall(function (pos) {\n          return pos.isEqual(normalizedLastPos);\n        });\n      }).getOr(true);\n    };\n    var setCaretLocation = function (editor, caret) {\n      return function (location) {\n        return renderCaret(caret, location).exists(function (pos) {\n          setCaretPosition(editor, pos);\n          return true;\n        });\n      };\n    };\n    var deleteFromTo = function (editor, caret, from, to) {\n      var rootNode = editor.getBody();\n      var isInlineTarget$1 = curry(isInlineTarget, editor);\n      editor.undoManager.ignore(function () {\n        editor.selection.setRng(rangeFromPositions(from, to));\n        editor.execCommand('Delete');\n        readLocation(isInlineTarget$1, rootNode, CaretPosition.fromRangeStart(editor.selection.getRng())).map(inside).map(setCaretLocation(editor, caret));\n      });\n      editor.nodeChanged();\n    };\n    var rescope = function (rootNode, node) {\n      var parentBlock = getParentBlock$2(node, rootNode);\n      return parentBlock ? parentBlock : rootNode;\n    };\n    var backspaceDeleteCollapsed = function (editor, caret, forward, from) {\n      var rootNode = rescope(editor.getBody(), from.container());\n      var isInlineTarget$1 = curry(isInlineTarget, editor);\n      var fromLocation = readLocation(isInlineTarget$1, rootNode, from);\n      return fromLocation.bind(function (location) {\n        if (forward) {\n          return location.fold(constant(Optional.some(inside(location))), Optional.none, constant(Optional.some(outside(location))), Optional.none);\n        } else {\n          return location.fold(Optional.none, constant(Optional.some(outside(location))), Optional.none, constant(Optional.some(inside(location))));\n        }\n      }).map(setCaretLocation(editor, caret)).getOrThunk(function () {\n        var toPosition = navigate(forward, rootNode, from);\n        var toLocation = toPosition.bind(function (pos) {\n          return readLocation(isInlineTarget$1, rootNode, pos);\n        });\n        return lift2(fromLocation, toLocation, function () {\n          return findRootInline(isInlineTarget$1, rootNode, from).exists(function (elm) {\n            if (hasOnlyTwoOrLessPositionsLeft(elm)) {\n              deleteElement$2(editor, forward, SugarElement.fromDom(elm));\n              return true;\n            } else {\n              return false;\n            }\n          });\n        }).orThunk(function () {\n          return toLocation.bind(function (_) {\n            return toPosition.map(function (to) {\n              if (forward) {\n                deleteFromTo(editor, caret, from, to);\n              } else {\n                deleteFromTo(editor, caret, to, from);\n              }\n              return true;\n            });\n          });\n        }).getOr(false);\n      });\n    };\n    var backspaceDelete$3 = function (editor, caret, forward) {\n      if (editor.selection.isCollapsed() && isInlineBoundariesEnabled(editor)) {\n        var from = CaretPosition.fromRangeStart(editor.selection.getRng());\n        return backspaceDeleteCollapsed(editor, caret, forward, from);\n      }\n      return false;\n    };\n\n    var getParentInlines = function (rootElm, startElm) {\n      var parents = parentsAndSelf(startElm, rootElm);\n      return findIndex$2(parents, isBlock$2).fold(constant(parents), function (index) {\n        return parents.slice(0, index);\n      });\n    };\n    var hasOnlyOneChild = function (elm) {\n      return childNodesCount(elm) === 1;\n    };\n    var deleteLastPosition = function (forward, editor, target, parentInlines) {\n      var isFormatElement$1 = curry(isFormatElement, editor);\n      var formatNodes = map$3(filter$4(parentInlines, isFormatElement$1), function (elm) {\n        return elm.dom;\n      });\n      if (formatNodes.length === 0) {\n        deleteElement$2(editor, forward, target);\n      } else {\n        var pos = replaceWithCaretFormat(target.dom, formatNodes);\n        editor.selection.setRng(pos.toRange());\n      }\n    };\n    var deleteCaret$1 = function (editor, forward) {\n      var rootElm = SugarElement.fromDom(editor.getBody());\n      var startElm = SugarElement.fromDom(editor.selection.getStart());\n      var parentInlines = filter$4(getParentInlines(rootElm, startElm), hasOnlyOneChild);\n      return last$2(parentInlines).exists(function (target) {\n        var fromPos = CaretPosition.fromRangeStart(editor.selection.getRng());\n        if (willDeleteLastPositionInElement(forward, fromPos, target.dom) && !isEmptyCaretFormatElement(target)) {\n          deleteLastPosition(forward, editor, target, parentInlines);\n          return true;\n        } else {\n          return false;\n        }\n      });\n    };\n    var backspaceDelete$2 = function (editor, forward) {\n      return editor.selection.isCollapsed() ? deleteCaret$1(editor, forward) : false;\n    };\n\n    var deleteElement = function (editor, forward, element) {\n      editor._selectionOverrides.hideFakeCaret();\n      deleteElement$2(editor, forward, SugarElement.fromDom(element));\n      return true;\n    };\n    var deleteCaret = function (editor, forward) {\n      var isNearMedia = forward ? isBeforeMedia : isAfterMedia;\n      var direction = forward ? HDirection.Forwards : HDirection.Backwards;\n      var fromPos = getNormalizedRangeEndPoint(direction, editor.getBody(), editor.selection.getRng());\n      if (isNearMedia(fromPos)) {\n        return deleteElement(editor, forward, fromPos.getNode(!forward));\n      } else {\n        return Optional.from(normalizePosition(forward, fromPos)).filter(function (pos) {\n          return isNearMedia(pos) && isMoveInsideSameBlock(fromPos, pos);\n        }).exists(function (pos) {\n          return deleteElement(editor, forward, pos.getNode(!forward));\n        });\n      }\n    };\n    var deleteRange = function (editor, forward) {\n      var selectedNode = editor.selection.getNode();\n      return isMedia$2(selectedNode) ? deleteElement(editor, forward, selectedNode) : false;\n    };\n    var backspaceDelete$1 = function (editor, forward) {\n      return editor.selection.isCollapsed() ? deleteCaret(editor, forward) : deleteRange(editor, forward);\n    };\n\n    var isEditable = function (target) {\n      return closest$3(target, function (elm) {\n        return isContentEditableTrue$4(elm.dom) || isContentEditableFalse$b(elm.dom);\n      }).exists(function (elm) {\n        return isContentEditableTrue$4(elm.dom);\n      });\n    };\n    var parseIndentValue = function (value) {\n      var number = parseInt(value, 10);\n      return isNaN(number) ? 0 : number;\n    };\n    var getIndentStyleName = function (useMargin, element) {\n      var indentStyleName = useMargin || isTable$2(element) ? 'margin' : 'padding';\n      var suffix = get$5(element, 'direction') === 'rtl' ? '-right' : '-left';\n      return indentStyleName + suffix;\n    };\n    var indentElement = function (dom, command, useMargin, value, unit, element) {\n      var indentStyleName = getIndentStyleName(useMargin, SugarElement.fromDom(element));\n      if (command === 'outdent') {\n        var styleValue = Math.max(0, parseIndentValue(element.style[indentStyleName]) - value);\n        dom.setStyle(element, indentStyleName, styleValue ? styleValue + unit : '');\n      } else {\n        var styleValue = parseIndentValue(element.style[indentStyleName]) + value + unit;\n        dom.setStyle(element, indentStyleName, styleValue);\n      }\n    };\n    var validateBlocks = function (editor, blocks) {\n      return forall(blocks, function (block) {\n        var indentStyleName = getIndentStyleName(shouldIndentUseMargin(editor), block);\n        var intentValue = getRaw(block, indentStyleName).map(parseIndentValue).getOr(0);\n        var contentEditable = editor.dom.getContentEditable(block.dom);\n        return contentEditable !== 'false' && intentValue > 0;\n      });\n    };\n    var canOutdent = function (editor) {\n      var blocks = getBlocksToIndent(editor);\n      return !editor.mode.isReadOnly() && (blocks.length > 1 || validateBlocks(editor, blocks));\n    };\n    var isListComponent = function (el) {\n      return isList(el) || isListItem(el);\n    };\n    var parentIsListComponent = function (el) {\n      return parent(el).exists(isListComponent);\n    };\n    var getBlocksToIndent = function (editor) {\n      return filter$4(fromDom$1(editor.selection.getSelectedBlocks()), function (el) {\n        return !isListComponent(el) && !parentIsListComponent(el) && isEditable(el);\n      });\n    };\n    var handle = function (editor, command) {\n      var dom = editor.dom, selection = editor.selection, formatter = editor.formatter;\n      var indentation = getIndentation(editor);\n      var indentUnit = /[a-z%]+$/i.exec(indentation)[0];\n      var indentValue = parseInt(indentation, 10);\n      var useMargin = shouldIndentUseMargin(editor);\n      var forcedRootBlock = getForcedRootBlock(editor);\n      if (!editor.queryCommandState('InsertUnorderedList') && !editor.queryCommandState('InsertOrderedList')) {\n        if (forcedRootBlock === '' && !dom.getParent(selection.getNode(), dom.isBlock)) {\n          formatter.apply('div');\n        }\n      }\n      each$k(getBlocksToIndent(editor), function (block) {\n        indentElement(dom, command, useMargin, indentValue, indentUnit, block.dom);\n      });\n    };\n\n    var backspaceDelete = function (editor, _forward) {\n      if (editor.selection.isCollapsed() && canOutdent(editor)) {\n        var dom = editor.dom;\n        var rng = editor.selection.getRng();\n        var pos = CaretPosition.fromRangeStart(rng);\n        var block = dom.getParent(rng.startContainer, dom.isBlock);\n        if (block !== null && isAtStartOfBlock(SugarElement.fromDom(block), pos)) {\n          handle(editor, 'outdent');\n          return true;\n        }\n      }\n      return false;\n    };\n\n    var nativeCommand = function (editor, command) {\n      editor.getDoc().execCommand(command, false, null);\n    };\n    var deleteCommand = function (editor, caret) {\n      if (backspaceDelete(editor)) {\n        return;\n      } else if (backspaceDelete$5(editor, false)) {\n        return;\n      } else if (backspaceDelete$6(editor, false)) {\n        return;\n      } else if (backspaceDelete$3(editor, caret, false)) {\n        return;\n      } else if (backspaceDelete$8(editor, false)) {\n        return;\n      } else if (backspaceDelete$9(editor)) {\n        return;\n      } else if (backspaceDelete$4(editor, false)) {\n        return;\n      } else if (backspaceDelete$1(editor, false)) {\n        return;\n      } else if (backspaceDelete$7(editor)) {\n        return;\n      } else if (backspaceDelete$2(editor, false)) {\n        return;\n      } else {\n        nativeCommand(editor, 'Delete');\n        paddEmptyBody(editor);\n      }\n    };\n    var forwardDeleteCommand = function (editor, caret) {\n      if (backspaceDelete$5(editor, true)) {\n        return;\n      } else if (backspaceDelete$6(editor, true)) {\n        return;\n      } else if (backspaceDelete$3(editor, caret, true)) {\n        return;\n      } else if (backspaceDelete$8(editor, true)) {\n        return;\n      } else if (backspaceDelete$9(editor)) {\n        return;\n      } else if (backspaceDelete$4(editor, true)) {\n        return;\n      } else if (backspaceDelete$1(editor, true)) {\n        return;\n      } else if (backspaceDelete$7(editor)) {\n        return;\n      } else if (backspaceDelete$2(editor, true)) {\n        return;\n      } else {\n        nativeCommand(editor, 'ForwardDelete');\n      }\n    };\n    var setup$f = function (editor, caret) {\n      editor.addCommand('delete', function () {\n        deleteCommand(editor, caret);\n      });\n      editor.addCommand('forwardDelete', function () {\n        forwardDeleteCommand(editor, caret);\n      });\n    };\n\n    var SIGNIFICANT_MOVE = 5;\n    var LONGPRESS_DELAY = 400;\n    var getTouch = function (event) {\n      if (event.touches === undefined || event.touches.length !== 1) {\n        return Optional.none();\n      }\n      return Optional.some(event.touches[0]);\n    };\n    var isFarEnough = function (touch, data) {\n      var distX = Math.abs(touch.clientX - data.x);\n      var distY = Math.abs(touch.clientY - data.y);\n      return distX > SIGNIFICANT_MOVE || distY > SIGNIFICANT_MOVE;\n    };\n    var setup$e = function (editor) {\n      var startData = value();\n      var longpressFired = Cell(false);\n      var debounceLongpress = last(function (e) {\n        editor.fire('longpress', __assign(__assign({}, e), { type: 'longpress' }));\n        longpressFired.set(true);\n      }, LONGPRESS_DELAY);\n      editor.on('touchstart', function (e) {\n        getTouch(e).each(function (touch) {\n          debounceLongpress.cancel();\n          var data = {\n            x: touch.clientX,\n            y: touch.clientY,\n            target: e.target\n          };\n          debounceLongpress.throttle(e);\n          longpressFired.set(false);\n          startData.set(data);\n        });\n      }, true);\n      editor.on('touchmove', function (e) {\n        debounceLongpress.cancel();\n        getTouch(e).each(function (touch) {\n          startData.on(function (data) {\n            if (isFarEnough(touch, data)) {\n              startData.clear();\n              longpressFired.set(false);\n              editor.fire('longpresscancel');\n            }\n          });\n        });\n      }, true);\n      editor.on('touchend touchcancel', function (e) {\n        debounceLongpress.cancel();\n        if (e.type === 'touchcancel') {\n          return;\n        }\n        startData.get().filter(function (data) {\n          return data.target.isEqualNode(e.target);\n        }).each(function () {\n          if (longpressFired.get()) {\n            e.preventDefault();\n          } else {\n            editor.fire('tap', __assign(__assign({}, e), { type: 'tap' }));\n          }\n        });\n      }, true);\n    };\n\n    var isBlockElement = function (blockElements, node) {\n      return has$2(blockElements, node.nodeName);\n    };\n    var isValidTarget = function (blockElements, node) {\n      if (isText$7(node)) {\n        return true;\n      } else if (isElement$5(node)) {\n        return !isBlockElement(blockElements, node) && !isBookmarkNode$1(node);\n      } else {\n        return false;\n      }\n    };\n    var hasBlockParent = function (blockElements, root, node) {\n      return exists(parents(SugarElement.fromDom(node), SugarElement.fromDom(root)), function (elm) {\n        return isBlockElement(blockElements, elm.dom);\n      });\n    };\n    var shouldRemoveTextNode = function (blockElements, node) {\n      if (isText$7(node)) {\n        if (node.nodeValue.length === 0) {\n          return true;\n        } else if (/^\\s+$/.test(node.nodeValue) && (!node.nextSibling || isBlockElement(blockElements, node.nextSibling))) {\n          return true;\n        }\n      }\n      return false;\n    };\n    var addRootBlocks = function (editor) {\n      var dom = editor.dom, selection = editor.selection;\n      var schema = editor.schema, blockElements = schema.getBlockElements();\n      var node = selection.getStart();\n      var rootNode = editor.getBody();\n      var rootBlockNode, tempNode, wrapped;\n      var forcedRootBlock = getForcedRootBlock(editor);\n      if (!node || !isElement$5(node) || !forcedRootBlock) {\n        return;\n      }\n      var rootNodeName = rootNode.nodeName.toLowerCase();\n      if (!schema.isValidChild(rootNodeName, forcedRootBlock.toLowerCase()) || hasBlockParent(blockElements, rootNode, node)) {\n        return;\n      }\n      var rng = selection.getRng();\n      var startContainer = rng.startContainer;\n      var startOffset = rng.startOffset;\n      var endContainer = rng.endContainer;\n      var endOffset = rng.endOffset;\n      var restoreSelection = hasFocus(editor);\n      node = rootNode.firstChild;\n      while (node) {\n        if (isValidTarget(blockElements, node)) {\n          if (shouldRemoveTextNode(blockElements, node)) {\n            tempNode = node;\n            node = node.nextSibling;\n            dom.remove(tempNode);\n            continue;\n          }\n          if (!rootBlockNode) {\n            rootBlockNode = dom.create(forcedRootBlock, getForcedRootBlockAttrs(editor));\n            node.parentNode.insertBefore(rootBlockNode, node);\n            wrapped = true;\n          }\n          tempNode = node;\n          node = node.nextSibling;\n          rootBlockNode.appendChild(tempNode);\n        } else {\n          rootBlockNode = null;\n          node = node.nextSibling;\n        }\n      }\n      if (wrapped && restoreSelection) {\n        rng.setStart(startContainer, startOffset);\n        rng.setEnd(endContainer, endOffset);\n        selection.setRng(rng);\n        editor.nodeChanged();\n      }\n    };\n    var setup$d = function (editor) {\n      if (getForcedRootBlock(editor)) {\n        editor.on('NodeChange', curry(addRootBlocks, editor));\n      }\n    };\n\n    var findBlockCaretContainer = function (editor) {\n      return descendant(SugarElement.fromDom(editor.getBody()), '*[data-mce-caret]').map(function (elm) {\n        return elm.dom;\n      }).getOrNull();\n    };\n    var removeIeControlRect = function (editor) {\n      editor.selection.setRng(editor.selection.getRng());\n    };\n    var showBlockCaretContainer = function (editor, blockCaretContainer) {\n      if (blockCaretContainer.hasAttribute('data-mce-caret')) {\n        showCaretContainerBlock(blockCaretContainer);\n        removeIeControlRect(editor);\n        editor.selection.scrollIntoView(blockCaretContainer);\n      }\n    };\n    var handleBlockContainer = function (editor, e) {\n      var blockCaretContainer = findBlockCaretContainer(editor);\n      if (!blockCaretContainer) {\n        return;\n      }\n      if (e.type === 'compositionstart') {\n        e.preventDefault();\n        e.stopPropagation();\n        showBlockCaretContainer(editor, blockCaretContainer);\n        return;\n      }\n      if (hasContent(blockCaretContainer)) {\n        showBlockCaretContainer(editor, blockCaretContainer);\n        editor.undoManager.add();\n      }\n    };\n    var setup$c = function (editor) {\n      editor.on('keyup compositionstart', curry(handleBlockContainer, editor));\n    };\n\n    var isContentEditableFalse$2 = isContentEditableFalse$b;\n    var moveToCeFalseHorizontally = function (direction, editor, range) {\n      return moveHorizontally(editor, direction, range, isBeforeContentEditableFalse, isAfterContentEditableFalse, isContentEditableFalse$2);\n    };\n    var moveToCeFalseVertically = function (direction, editor, range) {\n      var isBefore = function (caretPosition) {\n        return isBeforeContentEditableFalse(caretPosition) || isBeforeTable(caretPosition);\n      };\n      var isAfter = function (caretPosition) {\n        return isAfterContentEditableFalse(caretPosition) || isAfterTable(caretPosition);\n      };\n      return moveVertically(editor, direction, range, isBefore, isAfter, isContentEditableFalse$2);\n    };\n    var createTextBlock = function (editor) {\n      var textBlock = editor.dom.create(getForcedRootBlock(editor));\n      if (!Env.ie || Env.ie >= 11) {\n        textBlock.innerHTML = '<br data-mce-bogus=\"1\">';\n      }\n      return textBlock;\n    };\n    var exitPreBlock = function (editor, direction, range) {\n      var caretWalker = CaretWalker(editor.getBody());\n      var getVisualCaretPosition$1 = curry(getVisualCaretPosition, direction === 1 ? caretWalker.next : caretWalker.prev);\n      if (range.collapsed && hasForcedRootBlock(editor)) {\n        var pre = editor.dom.getParent(range.startContainer, 'PRE');\n        if (!pre) {\n          return;\n        }\n        var caretPos = getVisualCaretPosition$1(CaretPosition.fromRangeStart(range));\n        if (!caretPos) {\n          var newBlock = createTextBlock(editor);\n          if (direction === 1) {\n            editor.$(pre).after(newBlock);\n          } else {\n            editor.$(pre).before(newBlock);\n          }\n          editor.selection.select(newBlock, true);\n          editor.selection.collapse();\n        }\n      }\n    };\n    var getHorizontalRange = function (editor, forward) {\n      var direction = forward ? HDirection.Forwards : HDirection.Backwards;\n      var range = editor.selection.getRng();\n      return moveToCeFalseHorizontally(direction, editor, range).orThunk(function () {\n        exitPreBlock(editor, direction, range);\n        return Optional.none();\n      });\n    };\n    var getVerticalRange = function (editor, down) {\n      var direction = down ? 1 : -1;\n      var range = editor.selection.getRng();\n      return moveToCeFalseVertically(direction, editor, range).orThunk(function () {\n        exitPreBlock(editor, direction, range);\n        return Optional.none();\n      });\n    };\n    var moveH$2 = function (editor, forward) {\n      return getHorizontalRange(editor, forward).exists(function (newRange) {\n        moveToRange(editor, newRange);\n        return true;\n      });\n    };\n    var moveV$3 = function (editor, down) {\n      return getVerticalRange(editor, down).exists(function (newRange) {\n        moveToRange(editor, newRange);\n        return true;\n      });\n    };\n    var moveToLineEndPoint$1 = function (editor, forward) {\n      var isCefPosition = forward ? isAfterContentEditableFalse : isBeforeContentEditableFalse;\n      return moveToLineEndPoint$3(editor, forward, isCefPosition);\n    };\n\n    var isTarget = function (node) {\n      return contains$3(['figcaption'], name(node));\n    };\n    var rangeBefore = function (target) {\n      var rng = document.createRange();\n      rng.setStartBefore(target.dom);\n      rng.setEndBefore(target.dom);\n      return rng;\n    };\n    var insertElement = function (root, elm, forward) {\n      if (forward) {\n        append$1(root, elm);\n      } else {\n        prepend(root, elm);\n      }\n    };\n    var insertBr = function (root, forward) {\n      var br = SugarElement.fromTag('br');\n      insertElement(root, br, forward);\n      return rangeBefore(br);\n    };\n    var insertBlock = function (root, forward, blockName, attrs) {\n      var block = SugarElement.fromTag(blockName);\n      var br = SugarElement.fromTag('br');\n      setAll$1(block, attrs);\n      append$1(block, br);\n      insertElement(root, block, forward);\n      return rangeBefore(br);\n    };\n    var insertEmptyLine = function (root, rootBlockName, attrs, forward) {\n      if (rootBlockName === '') {\n        return insertBr(root, forward);\n      } else {\n        return insertBlock(root, forward, rootBlockName, attrs);\n      }\n    };\n    var getClosestTargetBlock = function (pos, root) {\n      var isRoot = curry(eq, root);\n      return closest$3(SugarElement.fromDom(pos.container()), isBlock$2, isRoot).filter(isTarget);\n    };\n    var isAtFirstOrLastLine = function (root, forward, pos) {\n      return forward ? isAtLastLine(root.dom, pos) : isAtFirstLine(root.dom, pos);\n    };\n    var moveCaretToNewEmptyLine = function (editor, forward) {\n      var root = SugarElement.fromDom(editor.getBody());\n      var pos = CaretPosition.fromRangeStart(editor.selection.getRng());\n      var rootBlock = getForcedRootBlock(editor);\n      var rootBlockAttrs = getForcedRootBlockAttrs(editor);\n      return getClosestTargetBlock(pos, root).exists(function () {\n        if (isAtFirstOrLastLine(root, forward, pos)) {\n          var rng = insertEmptyLine(root, rootBlock, rootBlockAttrs, forward);\n          editor.selection.setRng(rng);\n          return true;\n        } else {\n          return false;\n        }\n      });\n    };\n    var moveV$2 = function (editor, forward) {\n      if (editor.selection.isCollapsed()) {\n        return moveCaretToNewEmptyLine(editor, forward);\n      } else {\n        return false;\n      }\n    };\n\n    var defaultPatterns = function (patterns) {\n      return map$3(patterns, function (pattern) {\n        return __assign({\n          shiftKey: false,\n          altKey: false,\n          ctrlKey: false,\n          metaKey: false,\n          keyCode: 0,\n          action: noop\n        }, pattern);\n      });\n    };\n    var matchesEvent = function (pattern, evt) {\n      return evt.keyCode === pattern.keyCode && evt.shiftKey === pattern.shiftKey && evt.altKey === pattern.altKey && evt.ctrlKey === pattern.ctrlKey && evt.metaKey === pattern.metaKey;\n    };\n    var match$1 = function (patterns, evt) {\n      return bind(defaultPatterns(patterns), function (pattern) {\n        return matchesEvent(pattern, evt) ? [pattern] : [];\n      });\n    };\n    var action = function (f) {\n      var x = [];\n      for (var _i = 1; _i < arguments.length; _i++) {\n        x[_i - 1] = arguments[_i];\n      }\n      return function () {\n        return f.apply(null, x);\n      };\n    };\n    var execute = function (patterns, evt) {\n      return find$3(match$1(patterns, evt), function (pattern) {\n        return pattern.action();\n      });\n    };\n\n    var moveH$1 = function (editor, forward) {\n      var direction = forward ? HDirection.Forwards : HDirection.Backwards;\n      var range = editor.selection.getRng();\n      return moveHorizontally(editor, direction, range, isBeforeMedia, isAfterMedia, isMedia$2).exists(function (newRange) {\n        moveToRange(editor, newRange);\n        return true;\n      });\n    };\n    var moveV$1 = function (editor, down) {\n      var direction = down ? 1 : -1;\n      var range = editor.selection.getRng();\n      return moveVertically(editor, direction, range, isBeforeMedia, isAfterMedia, isMedia$2).exists(function (newRange) {\n        moveToRange(editor, newRange);\n        return true;\n      });\n    };\n    var moveToLineEndPoint = function (editor, forward) {\n      var isNearMedia = forward ? isAfterMedia : isBeforeMedia;\n      return moveToLineEndPoint$3(editor, forward, isNearMedia);\n    };\n\n    var deflate = function (rect, delta) {\n      return {\n        left: rect.left - delta,\n        top: rect.top - delta,\n        right: rect.right + delta * 2,\n        bottom: rect.bottom + delta * 2,\n        width: rect.width + delta,\n        height: rect.height + delta\n      };\n    };\n    var getCorners = function (getYAxisValue, tds) {\n      return bind(tds, function (td) {\n        var rect = deflate(clone(td.getBoundingClientRect()), -1);\n        return [\n          {\n            x: rect.left,\n            y: getYAxisValue(rect),\n            cell: td\n          },\n          {\n            x: rect.right,\n            y: getYAxisValue(rect),\n            cell: td\n          }\n        ];\n      });\n    };\n    var findClosestCorner = function (corners, x, y) {\n      return foldl(corners, function (acc, newCorner) {\n        return acc.fold(function () {\n          return Optional.some(newCorner);\n        }, function (oldCorner) {\n          var oldDist = Math.sqrt(Math.abs(oldCorner.x - x) + Math.abs(oldCorner.y - y));\n          var newDist = Math.sqrt(Math.abs(newCorner.x - x) + Math.abs(newCorner.y - y));\n          return Optional.some(newDist < oldDist ? newCorner : oldCorner);\n        });\n      }, Optional.none());\n    };\n    var getClosestCell = function (getYAxisValue, isTargetCorner, table, x, y) {\n      var cells = descendants(SugarElement.fromDom(table), 'td,th,caption').map(function (e) {\n        return e.dom;\n      });\n      var corners = filter$4(getCorners(getYAxisValue, cells), function (corner) {\n        return isTargetCorner(corner, y);\n      });\n      return findClosestCorner(corners, x, y).map(function (corner) {\n        return corner.cell;\n      });\n    };\n    var getBottomValue = function (rect) {\n      return rect.bottom;\n    };\n    var getTopValue = function (rect) {\n      return rect.top;\n    };\n    var isAbove = function (corner, y) {\n      return corner.y < y;\n    };\n    var isBelow = function (corner, y) {\n      return corner.y > y;\n    };\n    var getClosestCellAbove = curry(getClosestCell, getBottomValue, isAbove);\n    var getClosestCellBelow = curry(getClosestCell, getTopValue, isBelow);\n    var findClosestPositionInAboveCell = function (table, pos) {\n      return head(pos.getClientRects()).bind(function (rect) {\n        return getClosestCellAbove(table, rect.left, rect.top);\n      }).bind(function (cell) {\n        return findClosestHorizontalPosition(getLastLinePositions(cell), pos);\n      });\n    };\n    var findClosestPositionInBelowCell = function (table, pos) {\n      return last$2(pos.getClientRects()).bind(function (rect) {\n        return getClosestCellBelow(table, rect.left, rect.top);\n      }).bind(function (cell) {\n        return findClosestHorizontalPosition(getFirstLinePositions(cell), pos);\n      });\n    };\n\n    var hasNextBreak = function (getPositionsUntil, scope, lineInfo) {\n      return lineInfo.breakAt.exists(function (breakPos) {\n        return getPositionsUntil(scope, breakPos).breakAt.isSome();\n      });\n    };\n    var startsWithWrapBreak = function (lineInfo) {\n      return lineInfo.breakType === BreakType.Wrap && lineInfo.positions.length === 0;\n    };\n    var startsWithBrBreak = function (lineInfo) {\n      return lineInfo.breakType === BreakType.Br && lineInfo.positions.length === 1;\n    };\n    var isAtTableCellLine = function (getPositionsUntil, scope, pos) {\n      var lineInfo = getPositionsUntil(scope, pos);\n      if (startsWithWrapBreak(lineInfo) || !isBr$5(pos.getNode()) && startsWithBrBreak(lineInfo)) {\n        return !hasNextBreak(getPositionsUntil, scope, lineInfo);\n      } else {\n        return lineInfo.breakAt.isNone();\n      }\n    };\n    var isAtFirstTableCellLine = curry(isAtTableCellLine, getPositionsUntilPreviousLine);\n    var isAtLastTableCellLine = curry(isAtTableCellLine, getPositionsUntilNextLine);\n    var isCaretAtStartOrEndOfTable = function (forward, rng, table) {\n      var caretPos = CaretPosition.fromRangeStart(rng);\n      return positionIn(!forward, table).exists(function (pos) {\n        return pos.isEqual(caretPos);\n      });\n    };\n    var navigateHorizontally = function (editor, forward, table, _td) {\n      var rng = editor.selection.getRng();\n      var direction = forward ? 1 : -1;\n      if (isFakeCaretTableBrowser() && isCaretAtStartOrEndOfTable(forward, rng, table)) {\n        showCaret(direction, editor, table, !forward, false).each(function (newRng) {\n          moveToRange(editor, newRng);\n        });\n        return true;\n      }\n      return false;\n    };\n    var getClosestAbovePosition = function (root, table, start) {\n      return findClosestPositionInAboveCell(table, start).orThunk(function () {\n        return head(start.getClientRects()).bind(function (rect) {\n          return findClosestHorizontalPositionFromPoint(getPositionsAbove(root, CaretPosition.before(table)), rect.left);\n        });\n      }).getOr(CaretPosition.before(table));\n    };\n    var getClosestBelowPosition = function (root, table, start) {\n      return findClosestPositionInBelowCell(table, start).orThunk(function () {\n        return head(start.getClientRects()).bind(function (rect) {\n          return findClosestHorizontalPositionFromPoint(getPositionsBelow(root, CaretPosition.after(table)), rect.left);\n        });\n      }).getOr(CaretPosition.after(table));\n    };\n    var getTable = function (previous, pos) {\n      var node = pos.getNode(previous);\n      return isElement$5(node) && node.nodeName === 'TABLE' ? Optional.some(node) : Optional.none();\n    };\n    var renderBlock = function (down, editor, table, pos) {\n      var forcedRootBlock = getForcedRootBlock(editor);\n      if (forcedRootBlock) {\n        editor.undoManager.transact(function () {\n          var element = SugarElement.fromTag(forcedRootBlock);\n          setAll$1(element, getForcedRootBlockAttrs(editor));\n          append$1(element, SugarElement.fromTag('br'));\n          if (down) {\n            after$3(SugarElement.fromDom(table), element);\n          } else {\n            before$4(SugarElement.fromDom(table), element);\n          }\n          var rng = editor.dom.createRng();\n          rng.setStart(element.dom, 0);\n          rng.setEnd(element.dom, 0);\n          moveToRange(editor, rng);\n        });\n      } else {\n        moveToRange(editor, pos.toRange());\n      }\n    };\n    var moveCaret = function (editor, down, pos) {\n      var table = down ? getTable(true, pos) : getTable(false, pos);\n      var last = down === false;\n      table.fold(function () {\n        return moveToRange(editor, pos.toRange());\n      }, function (table) {\n        return positionIn(last, editor.getBody()).filter(function (lastPos) {\n          return lastPos.isEqual(pos);\n        }).fold(function () {\n          return moveToRange(editor, pos.toRange());\n        }, function (_) {\n          return renderBlock(down, editor, table, pos);\n        });\n      });\n    };\n    var navigateVertically = function (editor, down, table, td) {\n      var rng = editor.selection.getRng();\n      var pos = CaretPosition.fromRangeStart(rng);\n      var root = editor.getBody();\n      if (!down && isAtFirstTableCellLine(td, pos)) {\n        var newPos = getClosestAbovePosition(root, table, pos);\n        moveCaret(editor, down, newPos);\n        return true;\n      } else if (down && isAtLastTableCellLine(td, pos)) {\n        var newPos = getClosestBelowPosition(root, table, pos);\n        moveCaret(editor, down, newPos);\n        return true;\n      } else {\n        return false;\n      }\n    };\n    var move$1 = function (editor, forward, mover) {\n      return Optional.from(editor.dom.getParent(editor.selection.getNode(), 'td,th')).bind(function (td) {\n        return Optional.from(editor.dom.getParent(td, 'table')).map(function (table) {\n          return mover(editor, forward, table, td);\n        });\n      }).getOr(false);\n    };\n    var moveH = function (editor, forward) {\n      return move$1(editor, forward, navigateHorizontally);\n    };\n    var moveV = function (editor, forward) {\n      return move$1(editor, forward, navigateVertically);\n    };\n\n    var executeKeydownOverride$3 = function (editor, caret, evt) {\n      var os = detect().os;\n      execute([\n        {\n          keyCode: VK.RIGHT,\n          action: action(moveH$2, editor, true)\n        },\n        {\n          keyCode: VK.LEFT,\n          action: action(moveH$2, editor, false)\n        },\n        {\n          keyCode: VK.UP,\n          action: action(moveV$3, editor, false)\n        },\n        {\n          keyCode: VK.DOWN,\n          action: action(moveV$3, editor, true)\n        },\n        {\n          keyCode: VK.RIGHT,\n          action: action(moveH, editor, true)\n        },\n        {\n          keyCode: VK.LEFT,\n          action: action(moveH, editor, false)\n        },\n        {\n          keyCode: VK.UP,\n          action: action(moveV, editor, false)\n        },\n        {\n          keyCode: VK.DOWN,\n          action: action(moveV, editor, true)\n        },\n        {\n          keyCode: VK.RIGHT,\n          action: action(moveH$1, editor, true)\n        },\n        {\n          keyCode: VK.LEFT,\n          action: action(moveH$1, editor, false)\n        },\n        {\n          keyCode: VK.UP,\n          action: action(moveV$1, editor, false)\n        },\n        {\n          keyCode: VK.DOWN,\n          action: action(moveV$1, editor, true)\n        },\n        {\n          keyCode: VK.RIGHT,\n          action: action(move$2, editor, caret, true)\n        },\n        {\n          keyCode: VK.LEFT,\n          action: action(move$2, editor, caret, false)\n        },\n        {\n          keyCode: VK.RIGHT,\n          ctrlKey: !os.isOSX(),\n          altKey: os.isOSX(),\n          action: action(moveNextWord, editor, caret)\n        },\n        {\n          keyCode: VK.LEFT,\n          ctrlKey: !os.isOSX(),\n          altKey: os.isOSX(),\n          action: action(movePrevWord, editor, caret)\n        },\n        {\n          keyCode: VK.UP,\n          action: action(moveV$2, editor, false)\n        },\n        {\n          keyCode: VK.DOWN,\n          action: action(moveV$2, editor, true)\n        }\n      ], evt).each(function (_) {\n        evt.preventDefault();\n      });\n    };\n    var setup$b = function (editor, caret) {\n      editor.on('keydown', function (evt) {\n        if (evt.isDefaultPrevented() === false) {\n          executeKeydownOverride$3(editor, caret, evt);\n        }\n      });\n    };\n\n    var executeKeydownOverride$2 = function (editor, caret, evt) {\n      execute([\n        {\n          keyCode: VK.BACKSPACE,\n          action: action(backspaceDelete, editor, false)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: action(backspaceDelete$5, editor, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: action(backspaceDelete$5, editor, true)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: action(backspaceDelete$6, editor, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: action(backspaceDelete$6, editor, true)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: action(backspaceDelete$3, editor, caret, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: action(backspaceDelete$3, editor, caret, true)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: action(backspaceDelete$9, editor, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: action(backspaceDelete$9, editor, true)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: action(backspaceDelete$4, editor, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: action(backspaceDelete$4, editor, true)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: action(backspaceDelete$1, editor, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: action(backspaceDelete$1, editor, true)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: action(backspaceDelete$7, editor, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: action(backspaceDelete$7, editor, true)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: action(backspaceDelete$8, editor, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: action(backspaceDelete$8, editor, true)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: action(backspaceDelete$2, editor, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: action(backspaceDelete$2, editor, true)\n        }\n      ], evt).each(function (_) {\n        evt.preventDefault();\n      });\n    };\n    var executeKeyupOverride = function (editor, evt) {\n      execute([\n        {\n          keyCode: VK.BACKSPACE,\n          action: action(paddEmptyElement, editor)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: action(paddEmptyElement, editor)\n        }\n      ], evt);\n    };\n    var setup$a = function (editor, caret) {\n      editor.on('keydown', function (evt) {\n        if (evt.isDefaultPrevented() === false) {\n          executeKeydownOverride$2(editor, caret, evt);\n        }\n      });\n      editor.on('keyup', function (evt) {\n        if (evt.isDefaultPrevented() === false) {\n          executeKeyupOverride(editor, evt);\n        }\n      });\n    };\n\n    var firstNonWhiteSpaceNodeSibling = function (node) {\n      while (node) {\n        if (node.nodeType === 1 || node.nodeType === 3 && node.data && /[\\r\\n\\s]/.test(node.data)) {\n          return node;\n        }\n        node = node.nextSibling;\n      }\n    };\n    var moveToCaretPosition = function (editor, root) {\n      var node, lastNode = root;\n      var dom = editor.dom;\n      var moveCaretBeforeOnEnterElementsMap = editor.schema.getMoveCaretBeforeOnEnterElements();\n      if (!root) {\n        return;\n      }\n      if (/^(LI|DT|DD)$/.test(root.nodeName)) {\n        var firstChild = firstNonWhiteSpaceNodeSibling(root.firstChild);\n        if (firstChild && /^(UL|OL|DL)$/.test(firstChild.nodeName)) {\n          root.insertBefore(dom.doc.createTextNode(nbsp), root.firstChild);\n        }\n      }\n      var rng = dom.createRng();\n      root.normalize();\n      if (root.hasChildNodes()) {\n        var walker = new DomTreeWalker(root, root);\n        while (node = walker.current()) {\n          if (isText$7(node)) {\n            rng.setStart(node, 0);\n            rng.setEnd(node, 0);\n            break;\n          }\n          if (moveCaretBeforeOnEnterElementsMap[node.nodeName.toLowerCase()]) {\n            rng.setStartBefore(node);\n            rng.setEndBefore(node);\n            break;\n          }\n          lastNode = node;\n          node = walker.next();\n        }\n        if (!node) {\n          rng.setStart(lastNode, 0);\n          rng.setEnd(lastNode, 0);\n        }\n      } else {\n        if (isBr$5(root)) {\n          if (root.nextSibling && dom.isBlock(root.nextSibling)) {\n            rng.setStartBefore(root);\n            rng.setEndBefore(root);\n          } else {\n            rng.setStartAfter(root);\n            rng.setEndAfter(root);\n          }\n        } else {\n          rng.setStart(root, 0);\n          rng.setEnd(root, 0);\n        }\n      }\n      editor.selection.setRng(rng);\n      scrollRangeIntoView(editor, rng);\n    };\n    var getEditableRoot$1 = function (dom, node) {\n      var root = dom.getRoot();\n      var parent, editableRoot;\n      parent = node;\n      while (parent !== root && dom.getContentEditable(parent) !== 'false') {\n        if (dom.getContentEditable(parent) === 'true') {\n          editableRoot = parent;\n        }\n        parent = parent.parentNode;\n      }\n      return parent !== root ? editableRoot : root;\n    };\n    var getParentBlock = function (editor) {\n      return Optional.from(editor.dom.getParent(editor.selection.getStart(true), editor.dom.isBlock));\n    };\n    var getParentBlockName = function (editor) {\n      return getParentBlock(editor).fold(constant(''), function (parentBlock) {\n        return parentBlock.nodeName.toUpperCase();\n      });\n    };\n    var isListItemParentBlock = function (editor) {\n      return getParentBlock(editor).filter(function (elm) {\n        return isListItem(SugarElement.fromDom(elm));\n      }).isSome();\n    };\n\n    var hasFirstChild = function (elm, name) {\n      return elm.firstChild && elm.firstChild.nodeName === name;\n    };\n    var isFirstChild = function (elm) {\n      var _a;\n      return ((_a = elm.parentNode) === null || _a === void 0 ? void 0 : _a.firstChild) === elm;\n    };\n    var hasParent = function (elm, parentName) {\n      return elm && elm.parentNode && elm.parentNode.nodeName === parentName;\n    };\n    var isListBlock = function (elm) {\n      return elm && /^(OL|UL|LI)$/.test(elm.nodeName);\n    };\n    var isNestedList = function (elm) {\n      return isListBlock(elm) && isListBlock(elm.parentNode);\n    };\n    var getContainerBlock = function (containerBlock) {\n      var containerBlockParent = containerBlock.parentNode;\n      if (/^(LI|DT|DD)$/.test(containerBlockParent.nodeName)) {\n        return containerBlockParent;\n      }\n      return containerBlock;\n    };\n    var isFirstOrLastLi = function (containerBlock, parentBlock, first) {\n      var node = containerBlock[first ? 'firstChild' : 'lastChild'];\n      while (node) {\n        if (isElement$5(node)) {\n          break;\n        }\n        node = node[first ? 'nextSibling' : 'previousSibling'];\n      }\n      return node === parentBlock;\n    };\n    var insert$3 = function (editor, createNewBlock, containerBlock, parentBlock, newBlockName) {\n      var dom = editor.dom;\n      var rng = editor.selection.getRng();\n      if (containerBlock === editor.getBody()) {\n        return;\n      }\n      if (isNestedList(containerBlock)) {\n        newBlockName = 'LI';\n      }\n      var newBlock = newBlockName ? createNewBlock(newBlockName) : dom.create('BR');\n      if (isFirstOrLastLi(containerBlock, parentBlock, true) && isFirstOrLastLi(containerBlock, parentBlock, false)) {\n        if (hasParent(containerBlock, 'LI')) {\n          var containerBlockParent = getContainerBlock(containerBlock);\n          dom.insertAfter(newBlock, containerBlockParent);\n          if (isFirstChild(containerBlock)) {\n            dom.remove(containerBlockParent);\n          } else {\n            dom.remove(containerBlock);\n          }\n        } else {\n          dom.replace(newBlock, containerBlock);\n        }\n      } else if (isFirstOrLastLi(containerBlock, parentBlock, true)) {\n        if (hasParent(containerBlock, 'LI')) {\n          dom.insertAfter(newBlock, getContainerBlock(containerBlock));\n          newBlock.appendChild(dom.doc.createTextNode(' '));\n          newBlock.appendChild(containerBlock);\n        } else {\n          containerBlock.parentNode.insertBefore(newBlock, containerBlock);\n        }\n        dom.remove(parentBlock);\n      } else if (isFirstOrLastLi(containerBlock, parentBlock, false)) {\n        dom.insertAfter(newBlock, getContainerBlock(containerBlock));\n        dom.remove(parentBlock);\n      } else {\n        containerBlock = getContainerBlock(containerBlock);\n        var tmpRng = rng.cloneRange();\n        tmpRng.setStartAfter(parentBlock);\n        tmpRng.setEndAfter(containerBlock);\n        var fragment = tmpRng.extractContents();\n        if (newBlockName === 'LI' && hasFirstChild(fragment, 'LI')) {\n          newBlock = fragment.firstChild;\n          dom.insertAfter(fragment, containerBlock);\n        } else {\n          dom.insertAfter(fragment, containerBlock);\n          dom.insertAfter(newBlock, containerBlock);\n        }\n        dom.remove(parentBlock);\n      }\n      moveToCaretPosition(editor, newBlock);\n    };\n\n    var trimZwsp = function (fragment) {\n      each$k(descendants$1(SugarElement.fromDom(fragment), isText$8), function (text) {\n        var rawNode = text.dom;\n        rawNode.nodeValue = trim$2(rawNode.nodeValue);\n      });\n    };\n    var isEmptyAnchor = function (dom, elm) {\n      return elm && elm.nodeName === 'A' && dom.isEmpty(elm);\n    };\n    var isTableCell = function (node) {\n      return node && /^(TD|TH|CAPTION)$/.test(node.nodeName);\n    };\n    var emptyBlock = function (elm) {\n      elm.innerHTML = '<br data-mce-bogus=\"1\">';\n    };\n    var containerAndSiblingName = function (container, nodeName) {\n      return container.nodeName === nodeName || container.previousSibling && container.previousSibling.nodeName === nodeName;\n    };\n    var canSplitBlock = function (dom, node) {\n      return node && dom.isBlock(node) && !/^(TD|TH|CAPTION|FORM)$/.test(node.nodeName) && !/^(fixed|absolute)/i.test(node.style.position) && dom.getContentEditable(node) !== 'true';\n    };\n    var trimInlineElementsOnLeftSideOfBlock = function (dom, nonEmptyElementsMap, block) {\n      var node = block;\n      var firstChilds = [];\n      var i;\n      if (!node) {\n        return;\n      }\n      while (node = node.firstChild) {\n        if (dom.isBlock(node)) {\n          return;\n        }\n        if (isElement$5(node) && !nonEmptyElementsMap[node.nodeName.toLowerCase()]) {\n          firstChilds.push(node);\n        }\n      }\n      i = firstChilds.length;\n      while (i--) {\n        node = firstChilds[i];\n        if (!node.hasChildNodes() || node.firstChild === node.lastChild && node.firstChild.nodeValue === '') {\n          dom.remove(node);\n        } else {\n          if (isEmptyAnchor(dom, node)) {\n            dom.remove(node);\n          }\n        }\n      }\n    };\n    var normalizeZwspOffset = function (start, container, offset) {\n      if (isText$7(container) === false) {\n        return offset;\n      } else if (start) {\n        return offset === 1 && container.data.charAt(offset - 1) === ZWSP$1 ? 0 : offset;\n      } else {\n        return offset === container.data.length - 1 && container.data.charAt(offset) === ZWSP$1 ? container.data.length : offset;\n      }\n    };\n    var includeZwspInRange = function (rng) {\n      var newRng = rng.cloneRange();\n      newRng.setStart(rng.startContainer, normalizeZwspOffset(true, rng.startContainer, rng.startOffset));\n      newRng.setEnd(rng.endContainer, normalizeZwspOffset(false, rng.endContainer, rng.endOffset));\n      return newRng;\n    };\n    var trimLeadingLineBreaks = function (node) {\n      do {\n        if (isText$7(node)) {\n          node.nodeValue = node.nodeValue.replace(/^[\\r\\n]+/, '');\n        }\n        node = node.firstChild;\n      } while (node);\n    };\n    var getEditableRoot = function (dom, node) {\n      var root = dom.getRoot();\n      var parent, editableRoot;\n      parent = node;\n      while (parent !== root && dom.getContentEditable(parent) !== 'false') {\n        if (dom.getContentEditable(parent) === 'true') {\n          editableRoot = parent;\n        }\n        parent = parent.parentNode;\n      }\n      return parent !== root ? editableRoot : root;\n    };\n    var applyAttributes = function (editor, node, forcedRootBlockAttrs) {\n      var dom = editor.dom;\n      Optional.from(forcedRootBlockAttrs.style).map(dom.parseStyle).each(function (attrStyles) {\n        var currentStyles = getAllRaw(SugarElement.fromDom(node));\n        var newStyles = __assign(__assign({}, currentStyles), attrStyles);\n        dom.setStyles(node, newStyles);\n      });\n      var attrClassesOpt = Optional.from(forcedRootBlockAttrs.class).map(function (attrClasses) {\n        return attrClasses.split(/\\s+/);\n      });\n      var currentClassesOpt = Optional.from(node.className).map(function (currentClasses) {\n        return filter$4(currentClasses.split(/\\s+/), function (clazz) {\n          return clazz !== '';\n        });\n      });\n      lift2(attrClassesOpt, currentClassesOpt, function (attrClasses, currentClasses) {\n        var filteredClasses = filter$4(currentClasses, function (clazz) {\n          return !contains$3(attrClasses, clazz);\n        });\n        var newClasses = __spreadArray(__spreadArray([], attrClasses, true), filteredClasses, true);\n        dom.setAttrib(node, 'class', newClasses.join(' '));\n      });\n      var appliedAttrs = [\n        'style',\n        'class'\n      ];\n      var remainingAttrs = filter$3(forcedRootBlockAttrs, function (_, attrs) {\n        return !contains$3(appliedAttrs, attrs);\n      });\n      dom.setAttribs(node, remainingAttrs);\n    };\n    var setForcedBlockAttrs = function (editor, node) {\n      var forcedRootBlockName = getForcedRootBlock(editor);\n      if (forcedRootBlockName && forcedRootBlockName.toLowerCase() === node.tagName.toLowerCase()) {\n        var forcedRootBlockAttrs = getForcedRootBlockAttrs(editor);\n        applyAttributes(editor, node, forcedRootBlockAttrs);\n      }\n    };\n    var wrapSelfAndSiblingsInDefaultBlock = function (editor, newBlockName, rng, container, offset) {\n      var newBlock, parentBlock, startNode, node, next, rootBlockName;\n      var blockName = newBlockName || 'P';\n      var dom = editor.dom, editableRoot = getEditableRoot(dom, container);\n      parentBlock = dom.getParent(container, dom.isBlock);\n      if (!parentBlock || !canSplitBlock(dom, parentBlock)) {\n        parentBlock = parentBlock || editableRoot;\n        if (parentBlock === editor.getBody() || isTableCell(parentBlock)) {\n          rootBlockName = parentBlock.nodeName.toLowerCase();\n        } else {\n          rootBlockName = parentBlock.parentNode.nodeName.toLowerCase();\n        }\n        if (!parentBlock.hasChildNodes()) {\n          newBlock = dom.create(blockName);\n          setForcedBlockAttrs(editor, newBlock);\n          parentBlock.appendChild(newBlock);\n          rng.setStart(newBlock, 0);\n          rng.setEnd(newBlock, 0);\n          return newBlock;\n        }\n        node = container;\n        while (node.parentNode !== parentBlock) {\n          node = node.parentNode;\n        }\n        while (node && !dom.isBlock(node)) {\n          startNode = node;\n          node = node.previousSibling;\n        }\n        if (startNode && editor.schema.isValidChild(rootBlockName, blockName.toLowerCase())) {\n          newBlock = dom.create(blockName);\n          setForcedBlockAttrs(editor, newBlock);\n          startNode.parentNode.insertBefore(newBlock, startNode);\n          node = startNode;\n          while (node && !dom.isBlock(node)) {\n            next = node.nextSibling;\n            newBlock.appendChild(node);\n            node = next;\n          }\n          rng.setStart(container, offset);\n          rng.setEnd(container, offset);\n        }\n      }\n      return container;\n    };\n    var addBrToBlockIfNeeded = function (dom, block) {\n      block.normalize();\n      var lastChild = block.lastChild;\n      if (!lastChild || /^(left|right)$/gi.test(dom.getStyle(lastChild, 'float', true))) {\n        dom.add(block, 'br');\n      }\n    };\n    var insert$2 = function (editor, evt) {\n      var tmpRng, container, offset, parentBlock;\n      var newBlock, fragment, containerBlock, parentBlockName, newBlockName, isAfterLastNodeInContainer;\n      var dom = editor.dom;\n      var schema = editor.schema, nonEmptyElementsMap = schema.getNonEmptyElements();\n      var rng = editor.selection.getRng();\n      var createNewBlock = function (name) {\n        var node = container, block, clonedNode, caretNode;\n        var textInlineElements = schema.getTextInlineElements();\n        if (name || parentBlockName === 'TABLE' || parentBlockName === 'HR') {\n          block = dom.create(name || newBlockName);\n        } else {\n          block = parentBlock.cloneNode(false);\n        }\n        caretNode = block;\n        if (shouldKeepStyles(editor) === false) {\n          dom.setAttrib(block, 'style', null);\n          dom.setAttrib(block, 'class', null);\n        } else {\n          do {\n            if (textInlineElements[node.nodeName]) {\n              if (isCaretNode(node) || isBookmarkNode$1(node)) {\n                continue;\n              }\n              clonedNode = node.cloneNode(false);\n              dom.setAttrib(clonedNode, 'id', '');\n              if (block.hasChildNodes()) {\n                clonedNode.appendChild(block.firstChild);\n                block.appendChild(clonedNode);\n              } else {\n                caretNode = clonedNode;\n                block.appendChild(clonedNode);\n              }\n            }\n          } while ((node = node.parentNode) && node !== editableRoot);\n        }\n        setForcedBlockAttrs(editor, block);\n        emptyBlock(caretNode);\n        return block;\n      };\n      var isCaretAtStartOrEndOfBlock = function (start) {\n        var node, name;\n        var normalizedOffset = normalizeZwspOffset(start, container, offset);\n        if (isText$7(container) && (start ? normalizedOffset > 0 : normalizedOffset < container.nodeValue.length)) {\n          return false;\n        }\n        if (container.parentNode === parentBlock && isAfterLastNodeInContainer && !start) {\n          return true;\n        }\n        if (start && isElement$5(container) && container === parentBlock.firstChild) {\n          return true;\n        }\n        if (containerAndSiblingName(container, 'TABLE') || containerAndSiblingName(container, 'HR')) {\n          return isAfterLastNodeInContainer && !start || !isAfterLastNodeInContainer && start;\n        }\n        var walker = new DomTreeWalker(container, parentBlock);\n        if (isText$7(container)) {\n          if (start && normalizedOffset === 0) {\n            walker.prev();\n          } else if (!start && normalizedOffset === container.nodeValue.length) {\n            walker.next();\n          }\n        }\n        while (node = walker.current()) {\n          if (isElement$5(node)) {\n            if (!node.getAttribute('data-mce-bogus')) {\n              name = node.nodeName.toLowerCase();\n              if (nonEmptyElementsMap[name] && name !== 'br') {\n                return false;\n              }\n            }\n          } else if (isText$7(node) && !isWhitespaceText(node.nodeValue)) {\n            return false;\n          }\n          if (start) {\n            walker.prev();\n          } else {\n            walker.next();\n          }\n        }\n        return true;\n      };\n      var insertNewBlockAfter = function () {\n        if (/^(H[1-6]|PRE|FIGURE)$/.test(parentBlockName) && containerBlockName !== 'HGROUP') {\n          newBlock = createNewBlock(newBlockName);\n        } else {\n          newBlock = createNewBlock();\n        }\n        if (shouldEndContainerOnEmptyBlock(editor) && canSplitBlock(dom, containerBlock) && dom.isEmpty(parentBlock)) {\n          newBlock = dom.split(containerBlock, parentBlock);\n        } else {\n          dom.insertAfter(newBlock, parentBlock);\n        }\n        moveToCaretPosition(editor, newBlock);\n      };\n      normalize$2(dom, rng).each(function (normRng) {\n        rng.setStart(normRng.startContainer, normRng.startOffset);\n        rng.setEnd(normRng.endContainer, normRng.endOffset);\n      });\n      container = rng.startContainer;\n      offset = rng.startOffset;\n      newBlockName = getForcedRootBlock(editor);\n      var shiftKey = !!(evt && evt.shiftKey);\n      var ctrlKey = !!(evt && evt.ctrlKey);\n      if (isElement$5(container) && container.hasChildNodes()) {\n        isAfterLastNodeInContainer = offset > container.childNodes.length - 1;\n        container = container.childNodes[Math.min(offset, container.childNodes.length - 1)] || container;\n        if (isAfterLastNodeInContainer && isText$7(container)) {\n          offset = container.nodeValue.length;\n        } else {\n          offset = 0;\n        }\n      }\n      var editableRoot = getEditableRoot(dom, container);\n      if (!editableRoot) {\n        return;\n      }\n      if (newBlockName && !shiftKey || !newBlockName && shiftKey) {\n        container = wrapSelfAndSiblingsInDefaultBlock(editor, newBlockName, rng, container, offset);\n      }\n      parentBlock = dom.getParent(container, dom.isBlock);\n      containerBlock = parentBlock ? dom.getParent(parentBlock.parentNode, dom.isBlock) : null;\n      parentBlockName = parentBlock ? parentBlock.nodeName.toUpperCase() : '';\n      var containerBlockName = containerBlock ? containerBlock.nodeName.toUpperCase() : '';\n      if (containerBlockName === 'LI' && !ctrlKey) {\n        parentBlock = containerBlock;\n        containerBlock = containerBlock.parentNode;\n        parentBlockName = containerBlockName;\n      }\n      if (/^(LI|DT|DD)$/.test(parentBlockName)) {\n        if (dom.isEmpty(parentBlock)) {\n          insert$3(editor, createNewBlock, containerBlock, parentBlock, newBlockName);\n          return;\n        }\n      }\n      if (newBlockName && parentBlock === editor.getBody()) {\n        return;\n      }\n      newBlockName = newBlockName || 'P';\n      if (isCaretContainerBlock$1(parentBlock)) {\n        newBlock = showCaretContainerBlock(parentBlock);\n        if (dom.isEmpty(parentBlock)) {\n          emptyBlock(parentBlock);\n        }\n        setForcedBlockAttrs(editor, newBlock);\n        moveToCaretPosition(editor, newBlock);\n      } else if (isCaretAtStartOrEndOfBlock()) {\n        insertNewBlockAfter();\n      } else if (isCaretAtStartOrEndOfBlock(true)) {\n        newBlock = parentBlock.parentNode.insertBefore(createNewBlock(), parentBlock);\n        moveToCaretPosition(editor, containerAndSiblingName(parentBlock, 'HR') ? newBlock : parentBlock);\n      } else {\n        tmpRng = includeZwspInRange(rng).cloneRange();\n        tmpRng.setEndAfter(parentBlock);\n        fragment = tmpRng.extractContents();\n        trimZwsp(fragment);\n        trimLeadingLineBreaks(fragment);\n        newBlock = fragment.firstChild;\n        dom.insertAfter(fragment, parentBlock);\n        trimInlineElementsOnLeftSideOfBlock(dom, nonEmptyElementsMap, newBlock);\n        addBrToBlockIfNeeded(dom, parentBlock);\n        if (dom.isEmpty(parentBlock)) {\n          emptyBlock(parentBlock);\n        }\n        newBlock.normalize();\n        if (dom.isEmpty(newBlock)) {\n          dom.remove(newBlock);\n          insertNewBlockAfter();\n        } else {\n          setForcedBlockAttrs(editor, newBlock);\n          moveToCaretPosition(editor, newBlock);\n        }\n      }\n      dom.setAttrib(newBlock, 'id', '');\n      editor.fire('NewBlock', { newBlock: newBlock });\n    };\n\n    var hasRightSideContent = function (schema, container, parentBlock) {\n      var walker = new DomTreeWalker(container, parentBlock);\n      var node;\n      var nonEmptyElementsMap = schema.getNonEmptyElements();\n      while (node = walker.next()) {\n        if (nonEmptyElementsMap[node.nodeName.toLowerCase()] || node.length > 0) {\n          return true;\n        }\n      }\n    };\n    var moveSelectionToBr = function (editor, brElm, extraBr) {\n      var rng = editor.dom.createRng();\n      if (!extraBr) {\n        rng.setStartAfter(brElm);\n        rng.setEndAfter(brElm);\n      } else {\n        rng.setStartBefore(brElm);\n        rng.setEndBefore(brElm);\n      }\n      editor.selection.setRng(rng);\n      scrollRangeIntoView(editor, rng);\n    };\n    var insertBrAtCaret = function (editor, evt) {\n      var selection = editor.selection;\n      var dom = editor.dom;\n      var rng = selection.getRng();\n      var brElm;\n      var extraBr;\n      normalize$2(dom, rng).each(function (normRng) {\n        rng.setStart(normRng.startContainer, normRng.startOffset);\n        rng.setEnd(normRng.endContainer, normRng.endOffset);\n      });\n      var offset = rng.startOffset;\n      var container = rng.startContainer;\n      if (container.nodeType === 1 && container.hasChildNodes()) {\n        var isAfterLastNodeInContainer = offset > container.childNodes.length - 1;\n        container = container.childNodes[Math.min(offset, container.childNodes.length - 1)] || container;\n        if (isAfterLastNodeInContainer && container.nodeType === 3) {\n          offset = container.nodeValue.length;\n        } else {\n          offset = 0;\n        }\n      }\n      var parentBlock = dom.getParent(container, dom.isBlock);\n      var containerBlock = parentBlock ? dom.getParent(parentBlock.parentNode, dom.isBlock) : null;\n      var containerBlockName = containerBlock ? containerBlock.nodeName.toUpperCase() : '';\n      var isControlKey = !!(evt && evt.ctrlKey);\n      if (containerBlockName === 'LI' && !isControlKey) {\n        parentBlock = containerBlock;\n      }\n      if (container && container.nodeType === 3 && offset >= container.nodeValue.length) {\n        if (!hasRightSideContent(editor.schema, container, parentBlock)) {\n          brElm = dom.create('br');\n          rng.insertNode(brElm);\n          rng.setStartAfter(brElm);\n          rng.setEndAfter(brElm);\n          extraBr = true;\n        }\n      }\n      brElm = dom.create('br');\n      rangeInsertNode(dom, rng, brElm);\n      moveSelectionToBr(editor, brElm, extraBr);\n      editor.undoManager.add();\n    };\n    var insertBrBefore = function (editor, inline) {\n      var br = SugarElement.fromTag('br');\n      before$4(SugarElement.fromDom(inline), br);\n      editor.undoManager.add();\n    };\n    var insertBrAfter = function (editor, inline) {\n      if (!hasBrAfter(editor.getBody(), inline)) {\n        after$3(SugarElement.fromDom(inline), SugarElement.fromTag('br'));\n      }\n      var br = SugarElement.fromTag('br');\n      after$3(SugarElement.fromDom(inline), br);\n      moveSelectionToBr(editor, br.dom, false);\n      editor.undoManager.add();\n    };\n    var isBeforeBr = function (pos) {\n      return isBr$5(pos.getNode());\n    };\n    var hasBrAfter = function (rootNode, startNode) {\n      if (isBeforeBr(CaretPosition.after(startNode))) {\n        return true;\n      } else {\n        return nextPosition(rootNode, CaretPosition.after(startNode)).map(function (pos) {\n          return isBr$5(pos.getNode());\n        }).getOr(false);\n      }\n    };\n    var isAnchorLink = function (elm) {\n      return elm && elm.nodeName === 'A' && 'href' in elm;\n    };\n    var isInsideAnchor = function (location) {\n      return location.fold(never, isAnchorLink, isAnchorLink, never);\n    };\n    var readInlineAnchorLocation = function (editor) {\n      var isInlineTarget$1 = curry(isInlineTarget, editor);\n      var position = CaretPosition.fromRangeStart(editor.selection.getRng());\n      return readLocation(isInlineTarget$1, editor.getBody(), position).filter(isInsideAnchor);\n    };\n    var insertBrOutsideAnchor = function (editor, location) {\n      location.fold(noop, curry(insertBrBefore, editor), curry(insertBrAfter, editor), noop);\n    };\n    var insert$1 = function (editor, evt) {\n      var anchorLocation = readInlineAnchorLocation(editor);\n      if (anchorLocation.isSome()) {\n        anchorLocation.each(curry(insertBrOutsideAnchor, editor));\n      } else {\n        insertBrAtCaret(editor, evt);\n      }\n    };\n\n    var matchesSelector = function (editor, selector) {\n      return getParentBlock(editor).filter(function (parentBlock) {\n        return selector.length > 0 && is$2(SugarElement.fromDom(parentBlock), selector);\n      }).isSome();\n    };\n    var shouldInsertBr = function (editor) {\n      return matchesSelector(editor, getBrNewLineSelector(editor));\n    };\n    var shouldBlockNewLine$1 = function (editor) {\n      return matchesSelector(editor, getNoNewLineSelector(editor));\n    };\n\n    var newLineAction = Adt.generate([\n      { br: [] },\n      { block: [] },\n      { none: [] }\n    ]);\n    var shouldBlockNewLine = function (editor, _shiftKey) {\n      return shouldBlockNewLine$1(editor);\n    };\n    var isBrMode = function (requiredState) {\n      return function (editor, _shiftKey) {\n        var brMode = getForcedRootBlock(editor) === '';\n        return brMode === requiredState;\n      };\n    };\n    var inListBlock = function (requiredState) {\n      return function (editor, _shiftKey) {\n        return isListItemParentBlock(editor) === requiredState;\n      };\n    };\n    var inBlock = function (blockName, requiredState) {\n      return function (editor, _shiftKey) {\n        var state = getParentBlockName(editor) === blockName.toUpperCase();\n        return state === requiredState;\n      };\n    };\n    var inPreBlock = function (requiredState) {\n      return inBlock('pre', requiredState);\n    };\n    var inSummaryBlock = function () {\n      return inBlock('summary', true);\n    };\n    var shouldPutBrInPre = function (requiredState) {\n      return function (editor, _shiftKey) {\n        return shouldPutBrInPre$1(editor) === requiredState;\n      };\n    };\n    var inBrContext = function (editor, _shiftKey) {\n      return shouldInsertBr(editor);\n    };\n    var hasShiftKey = function (_editor, shiftKey) {\n      return shiftKey;\n    };\n    var canInsertIntoEditableRoot = function (editor) {\n      var forcedRootBlock = getForcedRootBlock(editor);\n      var rootEditable = getEditableRoot$1(editor.dom, editor.selection.getStart());\n      return rootEditable && editor.schema.isValidChild(rootEditable.nodeName, forcedRootBlock ? forcedRootBlock : 'P');\n    };\n    var match = function (predicates, action) {\n      return function (editor, shiftKey) {\n        var isMatch = foldl(predicates, function (res, p) {\n          return res && p(editor, shiftKey);\n        }, true);\n        return isMatch ? Optional.some(action) : Optional.none();\n      };\n    };\n    var getAction = function (editor, evt) {\n      return evaluateUntil([\n        match([shouldBlockNewLine], newLineAction.none()),\n        match([inSummaryBlock()], newLineAction.br()),\n        match([\n          inPreBlock(true),\n          shouldPutBrInPre(false),\n          hasShiftKey\n        ], newLineAction.br()),\n        match([\n          inPreBlock(true),\n          shouldPutBrInPre(false)\n        ], newLineAction.block()),\n        match([\n          inPreBlock(true),\n          shouldPutBrInPre(true),\n          hasShiftKey\n        ], newLineAction.block()),\n        match([\n          inPreBlock(true),\n          shouldPutBrInPre(true)\n        ], newLineAction.br()),\n        match([\n          inListBlock(true),\n          hasShiftKey\n        ], newLineAction.br()),\n        match([inListBlock(true)], newLineAction.block()),\n        match([\n          isBrMode(true),\n          hasShiftKey,\n          canInsertIntoEditableRoot\n        ], newLineAction.block()),\n        match([isBrMode(true)], newLineAction.br()),\n        match([inBrContext], newLineAction.br()),\n        match([\n          isBrMode(false),\n          hasShiftKey\n        ], newLineAction.br()),\n        match([canInsertIntoEditableRoot], newLineAction.block())\n      ], [\n        editor,\n        !!(evt && evt.shiftKey)\n      ]).getOr(newLineAction.none());\n    };\n\n    var insert = function (editor, evt) {\n      getAction(editor, evt).fold(function () {\n        insert$1(editor, evt);\n      }, function () {\n        insert$2(editor, evt);\n      }, noop);\n    };\n\n    var handleEnterKeyEvent = function (editor, event) {\n      if (event.isDefaultPrevented()) {\n        return;\n      }\n      event.preventDefault();\n      endTypingLevelIgnoreLocks(editor.undoManager);\n      editor.undoManager.transact(function () {\n        if (editor.selection.isCollapsed() === false) {\n          editor.execCommand('Delete');\n        }\n        insert(editor, event);\n      });\n    };\n    var setup$9 = function (editor) {\n      editor.on('keydown', function (event) {\n        if (event.keyCode === VK.ENTER) {\n          handleEnterKeyEvent(editor, event);\n        }\n      });\n    };\n\n    var executeKeydownOverride$1 = function (editor, caret, evt) {\n      execute([\n        {\n          keyCode: VK.END,\n          action: action(moveToLineEndPoint$1, editor, true)\n        },\n        {\n          keyCode: VK.HOME,\n          action: action(moveToLineEndPoint$1, editor, false)\n        },\n        {\n          keyCode: VK.END,\n          action: action(moveToLineEndPoint, editor, true)\n        },\n        {\n          keyCode: VK.HOME,\n          action: action(moveToLineEndPoint, editor, false)\n        },\n        {\n          keyCode: VK.END,\n          action: action(moveToLineEndPoint$2, editor, true, caret)\n        },\n        {\n          keyCode: VK.HOME,\n          action: action(moveToLineEndPoint$2, editor, false, caret)\n        }\n      ], evt).each(function (_) {\n        evt.preventDefault();\n      });\n    };\n    var setup$8 = function (editor, caret) {\n      editor.on('keydown', function (evt) {\n        if (evt.isDefaultPrevented() === false) {\n          executeKeydownOverride$1(editor, caret, evt);\n        }\n      });\n    };\n\n    var browser = detect().browser;\n    var setupIeInput = function (editor) {\n      var keypressThrotter = first(function () {\n        if (!editor.composing) {\n          normalizeNbspsInEditor(editor);\n        }\n      }, 0);\n      if (browser.isIE()) {\n        editor.on('keypress', function (_e) {\n          keypressThrotter.throttle();\n        });\n        editor.on('remove', function (_e) {\n          keypressThrotter.cancel();\n        });\n      }\n    };\n    var setup$7 = function (editor) {\n      setupIeInput(editor);\n      editor.on('input', function (e) {\n        if (e.isComposing === false) {\n          normalizeNbspsInEditor(editor);\n        }\n      });\n    };\n\n    var platform = detect();\n    var executeKeyupAction = function (editor, caret, evt) {\n      execute([\n        {\n          keyCode: VK.PAGE_UP,\n          action: action(moveToLineEndPoint$2, editor, false, caret)\n        },\n        {\n          keyCode: VK.PAGE_DOWN,\n          action: action(moveToLineEndPoint$2, editor, true, caret)\n        }\n      ], evt);\n    };\n    var stopImmediatePropagation = function (e) {\n      return e.stopImmediatePropagation();\n    };\n    var isPageUpDown = function (evt) {\n      return evt.keyCode === VK.PAGE_UP || evt.keyCode === VK.PAGE_DOWN;\n    };\n    var setNodeChangeBlocker = function (blocked, editor, block) {\n      if (block && !blocked.get()) {\n        editor.on('NodeChange', stopImmediatePropagation, true);\n      } else if (!block && blocked.get()) {\n        editor.off('NodeChange', stopImmediatePropagation);\n      }\n      blocked.set(block);\n    };\n    var setup$6 = function (editor, caret) {\n      if (platform.os.isOSX()) {\n        return;\n      }\n      var blocked = Cell(false);\n      editor.on('keydown', function (evt) {\n        if (isPageUpDown(evt)) {\n          setNodeChangeBlocker(blocked, editor, true);\n        }\n      });\n      editor.on('keyup', function (evt) {\n        if (evt.isDefaultPrevented() === false) {\n          executeKeyupAction(editor, caret, evt);\n        }\n        if (isPageUpDown(evt) && blocked.get()) {\n          setNodeChangeBlocker(blocked, editor, false);\n          editor.nodeChanged();\n        }\n      });\n    };\n\n    var insertTextAtPosition = function (text, pos) {\n      var container = pos.container();\n      var offset = pos.offset();\n      if (isText$7(container)) {\n        container.insertData(offset, text);\n        return Optional.some(CaretPosition(container, offset + text.length));\n      } else {\n        return getElementFromPosition(pos).map(function (elm) {\n          var textNode = SugarElement.fromText(text);\n          if (pos.isAtEnd()) {\n            after$3(elm, textNode);\n          } else {\n            before$4(elm, textNode);\n          }\n          return CaretPosition(textNode.dom, text.length);\n        });\n      }\n    };\n    var insertNbspAtPosition = curry(insertTextAtPosition, nbsp);\n    var insertSpaceAtPosition = curry(insertTextAtPosition, ' ');\n\n    var locationToCaretPosition = function (root) {\n      return function (location) {\n        return location.fold(function (element) {\n          return prevPosition(root.dom, CaretPosition.before(element));\n        }, function (element) {\n          return firstPositionIn(element);\n        }, function (element) {\n          return lastPositionIn(element);\n        }, function (element) {\n          return nextPosition(root.dom, CaretPosition.after(element));\n        });\n      };\n    };\n    var insertInlineBoundarySpaceOrNbsp = function (root, pos) {\n      return function (checkPos) {\n        return needsToHaveNbsp(root, checkPos) ? insertNbspAtPosition(pos) : insertSpaceAtPosition(pos);\n      };\n    };\n    var setSelection = function (editor) {\n      return function (pos) {\n        editor.selection.setRng(pos.toRange());\n        editor.nodeChanged();\n        return true;\n      };\n    };\n    var insertSpaceOrNbspAtSelection = function (editor) {\n      var pos = CaretPosition.fromRangeStart(editor.selection.getRng());\n      var root = SugarElement.fromDom(editor.getBody());\n      if (editor.selection.isCollapsed()) {\n        var isInlineTarget$1 = curry(isInlineTarget, editor);\n        var caretPosition = CaretPosition.fromRangeStart(editor.selection.getRng());\n        return readLocation(isInlineTarget$1, editor.getBody(), caretPosition).bind(locationToCaretPosition(root)).bind(insertInlineBoundarySpaceOrNbsp(root, pos)).exists(setSelection(editor));\n      } else {\n        return false;\n      }\n    };\n\n    var executeKeydownOverride = function (editor, evt) {\n      execute([{\n          keyCode: VK.SPACEBAR,\n          action: action(insertSpaceOrNbspAtSelection, editor)\n        }], evt).each(function (_) {\n        evt.preventDefault();\n      });\n    };\n    var setup$5 = function (editor) {\n      editor.on('keydown', function (evt) {\n        if (evt.isDefaultPrevented() === false) {\n          executeKeydownOverride(editor, evt);\n        }\n      });\n    };\n\n    var registerKeyboardOverrides = function (editor) {\n      var caret = setupSelectedState(editor);\n      setup$c(editor);\n      setup$b(editor, caret);\n      setup$a(editor, caret);\n      setup$9(editor);\n      setup$5(editor);\n      setup$7(editor);\n      setup$8(editor, caret);\n      setup$6(editor, caret);\n      return caret;\n    };\n    var setup$4 = function (editor) {\n      if (!isRtc(editor)) {\n        return registerKeyboardOverrides(editor);\n      } else {\n        return Cell(null);\n      }\n    };\n\n    var NodeChange = function () {\n      function NodeChange(editor) {\n        this.lastPath = [];\n        this.editor = editor;\n        var lastRng;\n        var self = this;\n        if (!('onselectionchange' in editor.getDoc())) {\n          editor.on('NodeChange click mouseup keyup focus', function (e) {\n            var nativeRng = editor.selection.getRng();\n            var fakeRng = {\n              startContainer: nativeRng.startContainer,\n              startOffset: nativeRng.startOffset,\n              endContainer: nativeRng.endContainer,\n              endOffset: nativeRng.endOffset\n            };\n            if (e.type === 'nodechange' || !isEq$4(fakeRng, lastRng)) {\n              editor.fire('SelectionChange');\n            }\n            lastRng = fakeRng;\n          });\n        }\n        editor.on('contextmenu', function () {\n          editor.fire('SelectionChange');\n        });\n        editor.on('SelectionChange', function () {\n          var startElm = editor.selection.getStart(true);\n          if (!startElm || !Env.range && editor.selection.isCollapsed()) {\n            return;\n          }\n          if (hasAnyRanges(editor) && !self.isSameElementPath(startElm) && editor.dom.isChildOf(startElm, editor.getBody())) {\n            editor.nodeChanged({ selectionChange: true });\n          }\n        });\n        editor.on('mouseup', function (e) {\n          if (!e.isDefaultPrevented() && hasAnyRanges(editor)) {\n            if (editor.selection.getNode().nodeName === 'IMG') {\n              Delay.setEditorTimeout(editor, function () {\n                editor.nodeChanged();\n              });\n            } else {\n              editor.nodeChanged();\n            }\n          }\n        });\n      }\n      NodeChange.prototype.nodeChanged = function (args) {\n        var selection = this.editor.selection;\n        var node, parents, root;\n        if (this.editor.initialized && selection && !shouldDisableNodeChange(this.editor) && !this.editor.mode.isReadOnly()) {\n          root = this.editor.getBody();\n          node = selection.getStart(true) || root;\n          if (node.ownerDocument !== this.editor.getDoc() || !this.editor.dom.isChildOf(node, root)) {\n            node = root;\n          }\n          parents = [];\n          this.editor.dom.getParent(node, function (node) {\n            if (node === root) {\n              return true;\n            }\n            parents.push(node);\n          });\n          args = args || {};\n          args.element = node;\n          args.parents = parents;\n          this.editor.fire('NodeChange', args);\n        }\n      };\n      NodeChange.prototype.isSameElementPath = function (startElm) {\n        var i;\n        var currentPath = this.editor.$(startElm).parentsUntil(this.editor.getBody()).add(startElm);\n        if (currentPath.length === this.lastPath.length) {\n          for (i = currentPath.length; i >= 0; i--) {\n            if (currentPath[i] !== this.lastPath[i]) {\n              break;\n            }\n          }\n          if (i === -1) {\n            this.lastPath = currentPath;\n            return true;\n          }\n        }\n        this.lastPath = currentPath;\n        return false;\n      };\n      return NodeChange;\n    }();\n\n    var preventSummaryToggle = function (editor) {\n      editor.on('click', function (e) {\n        if (editor.dom.getParent(e.target, 'details')) {\n          e.preventDefault();\n        }\n      });\n    };\n    var filterDetails = function (editor) {\n      editor.parser.addNodeFilter('details', function (elms) {\n        each$k(elms, function (details) {\n          details.attr('data-mce-open', details.attr('open'));\n          details.attr('open', 'open');\n        });\n      });\n      editor.serializer.addNodeFilter('details', function (elms) {\n        each$k(elms, function (details) {\n          var open = details.attr('data-mce-open');\n          details.attr('open', isString$1(open) ? open : null);\n          details.attr('data-mce-open', null);\n        });\n      });\n    };\n    var setup$3 = function (editor) {\n      preventSummaryToggle(editor);\n      filterDetails(editor);\n    };\n\n    var isTextBlockNode = function (node) {\n      return isElement$5(node) && isTextBlock$2(SugarElement.fromDom(node));\n    };\n    var normalizeSelection = function (editor) {\n      var rng = editor.selection.getRng();\n      var startPos = CaretPosition.fromRangeStart(rng);\n      var endPos = CaretPosition.fromRangeEnd(rng);\n      if (CaretPosition.isElementPosition(startPos)) {\n        var container = startPos.container();\n        if (isTextBlockNode(container)) {\n          firstPositionIn(container).each(function (pos) {\n            return rng.setStart(pos.container(), pos.offset());\n          });\n        }\n      }\n      if (CaretPosition.isElementPosition(endPos)) {\n        var container = startPos.container();\n        if (isTextBlockNode(container)) {\n          lastPositionIn(container).each(function (pos) {\n            return rng.setEnd(pos.container(), pos.offset());\n          });\n        }\n      }\n      editor.selection.setRng(normalize(rng));\n    };\n    var setup$2 = function (editor) {\n      editor.on('click', function (e) {\n        if (e.detail >= 3) {\n          normalizeSelection(editor);\n        }\n      });\n    };\n\n    var getAbsolutePosition = function (elm) {\n      var clientRect = elm.getBoundingClientRect();\n      var doc = elm.ownerDocument;\n      var docElem = doc.documentElement;\n      var win = doc.defaultView;\n      return {\n        top: clientRect.top + win.pageYOffset - docElem.clientTop,\n        left: clientRect.left + win.pageXOffset - docElem.clientLeft\n      };\n    };\n    var getBodyPosition = function (editor) {\n      return editor.inline ? getAbsolutePosition(editor.getBody()) : {\n        left: 0,\n        top: 0\n      };\n    };\n    var getScrollPosition = function (editor) {\n      var body = editor.getBody();\n      return editor.inline ? {\n        left: body.scrollLeft,\n        top: body.scrollTop\n      } : {\n        left: 0,\n        top: 0\n      };\n    };\n    var getBodyScroll = function (editor) {\n      var body = editor.getBody(), docElm = editor.getDoc().documentElement;\n      var inlineScroll = {\n        left: body.scrollLeft,\n        top: body.scrollTop\n      };\n      var iframeScroll = {\n        left: body.scrollLeft || docElm.scrollLeft,\n        top: body.scrollTop || docElm.scrollTop\n      };\n      return editor.inline ? inlineScroll : iframeScroll;\n    };\n    var getMousePosition = function (editor, event) {\n      if (event.target.ownerDocument !== editor.getDoc()) {\n        var iframePosition = getAbsolutePosition(editor.getContentAreaContainer());\n        var scrollPosition = getBodyScroll(editor);\n        return {\n          left: event.pageX - iframePosition.left + scrollPosition.left,\n          top: event.pageY - iframePosition.top + scrollPosition.top\n        };\n      }\n      return {\n        left: event.pageX,\n        top: event.pageY\n      };\n    };\n    var calculatePosition = function (bodyPosition, scrollPosition, mousePosition) {\n      return {\n        pageX: mousePosition.left - bodyPosition.left + scrollPosition.left,\n        pageY: mousePosition.top - bodyPosition.top + scrollPosition.top\n      };\n    };\n    var calc = function (editor, event) {\n      return calculatePosition(getBodyPosition(editor), getScrollPosition(editor), getMousePosition(editor, event));\n    };\n\n    var isContentEditableFalse$1 = isContentEditableFalse$b, isContentEditableTrue$1 = isContentEditableTrue$4;\n    var isDraggable = function (rootElm, elm) {\n      return isContentEditableFalse$1(elm) && elm !== rootElm;\n    };\n    var isValidDropTarget = function (editor, targetElement, dragElement) {\n      if (targetElement === dragElement || editor.dom.isChildOf(targetElement, dragElement)) {\n        return false;\n      }\n      return !isContentEditableFalse$1(targetElement);\n    };\n    var cloneElement = function (elm) {\n      var cloneElm = elm.cloneNode(true);\n      cloneElm.removeAttribute('data-mce-selected');\n      return cloneElm;\n    };\n    var createGhost = function (editor, elm, width, height) {\n      var dom = editor.dom;\n      var clonedElm = elm.cloneNode(true);\n      dom.setStyles(clonedElm, {\n        width: width,\n        height: height\n      });\n      dom.setAttrib(clonedElm, 'data-mce-selected', null);\n      var ghostElm = dom.create('div', {\n        'class': 'mce-drag-container',\n        'data-mce-bogus': 'all',\n        'unselectable': 'on',\n        'contenteditable': 'false'\n      });\n      dom.setStyles(ghostElm, {\n        position: 'absolute',\n        opacity: 0.5,\n        overflow: 'hidden',\n        border: 0,\n        padding: 0,\n        margin: 0,\n        width: width,\n        height: height\n      });\n      dom.setStyles(clonedElm, {\n        margin: 0,\n        boxSizing: 'border-box'\n      });\n      ghostElm.appendChild(clonedElm);\n      return ghostElm;\n    };\n    var appendGhostToBody = function (ghostElm, bodyElm) {\n      if (ghostElm.parentNode !== bodyElm) {\n        bodyElm.appendChild(ghostElm);\n      }\n    };\n    var moveGhost = function (ghostElm, position, width, height, maxX, maxY) {\n      var overflowX = 0, overflowY = 0;\n      ghostElm.style.left = position.pageX + 'px';\n      ghostElm.style.top = position.pageY + 'px';\n      if (position.pageX + width > maxX) {\n        overflowX = position.pageX + width - maxX;\n      }\n      if (position.pageY + height > maxY) {\n        overflowY = position.pageY + height - maxY;\n      }\n      ghostElm.style.width = width - overflowX + 'px';\n      ghostElm.style.height = height - overflowY + 'px';\n    };\n    var removeElement = function (elm) {\n      if (elm && elm.parentNode) {\n        elm.parentNode.removeChild(elm);\n      }\n    };\n    var isLeftMouseButtonPressed = function (e) {\n      return e.button === 0;\n    };\n    var applyRelPos = function (state, position) {\n      return {\n        pageX: position.pageX - state.relX,\n        pageY: position.pageY + 5\n      };\n    };\n    var start = function (state, editor) {\n      return function (e) {\n        if (isLeftMouseButtonPressed(e)) {\n          var ceElm = find$3(editor.dom.getParents(e.target), or(isContentEditableFalse$1, isContentEditableTrue$1)).getOr(null);\n          if (isDraggable(editor.getBody(), ceElm)) {\n            var elmPos = editor.dom.getPos(ceElm);\n            var bodyElm = editor.getBody();\n            var docElm = editor.getDoc().documentElement;\n            state.set({\n              element: ceElm,\n              dragging: false,\n              screenX: e.screenX,\n              screenY: e.screenY,\n              maxX: (editor.inline ? bodyElm.scrollWidth : docElm.offsetWidth) - 2,\n              maxY: (editor.inline ? bodyElm.scrollHeight : docElm.offsetHeight) - 2,\n              relX: e.pageX - elmPos.x,\n              relY: e.pageY - elmPos.y,\n              width: ceElm.offsetWidth,\n              height: ceElm.offsetHeight,\n              ghost: createGhost(editor, ceElm, ceElm.offsetWidth, ceElm.offsetHeight)\n            });\n          }\n        }\n      };\n    };\n    var move = function (state, editor) {\n      var throttledPlaceCaretAt = Delay.throttle(function (clientX, clientY) {\n        editor._selectionOverrides.hideFakeCaret();\n        editor.selection.placeCaretAt(clientX, clientY);\n      }, 0);\n      editor.on('remove', throttledPlaceCaretAt.stop);\n      return function (e) {\n        return state.on(function (state) {\n          var movement = Math.max(Math.abs(e.screenX - state.screenX), Math.abs(e.screenY - state.screenY));\n          if (!state.dragging && movement > 10) {\n            var args = editor.fire('dragstart', { target: state.element });\n            if (args.isDefaultPrevented()) {\n              return;\n            }\n            state.dragging = true;\n            editor.focus();\n          }\n          if (state.dragging) {\n            var targetPos = applyRelPos(state, calc(editor, e));\n            appendGhostToBody(state.ghost, editor.getBody());\n            moveGhost(state.ghost, targetPos, state.width, state.height, state.maxX, state.maxY);\n            throttledPlaceCaretAt(e.clientX, e.clientY);\n          }\n        });\n      };\n    };\n    var getRawTarget = function (selection) {\n      var rng = selection.getSel().getRangeAt(0);\n      var startContainer = rng.startContainer;\n      return startContainer.nodeType === 3 ? startContainer.parentNode : startContainer;\n    };\n    var drop = function (state, editor) {\n      return function (e) {\n        state.on(function (state) {\n          if (state.dragging) {\n            if (isValidDropTarget(editor, getRawTarget(editor.selection), state.element)) {\n              var targetClone_1 = cloneElement(state.element);\n              var args = editor.fire('drop', {\n                clientX: e.clientX,\n                clientY: e.clientY\n              });\n              if (!args.isDefaultPrevented()) {\n                editor.undoManager.transact(function () {\n                  removeElement(state.element);\n                  editor.insertContent(editor.dom.getOuterHTML(targetClone_1));\n                  editor._selectionOverrides.hideFakeCaret();\n                });\n              }\n            }\n            editor.fire('dragend');\n          }\n        });\n        removeDragState(state);\n      };\n    };\n    var stop = function (state, editor) {\n      return function () {\n        state.on(function (state) {\n          if (state.dragging) {\n            editor.fire('dragend');\n          }\n        });\n        removeDragState(state);\n      };\n    };\n    var removeDragState = function (state) {\n      state.on(function (state) {\n        removeElement(state.ghost);\n      });\n      state.clear();\n    };\n    var bindFakeDragEvents = function (editor) {\n      var state = value();\n      var pageDom = DOMUtils.DOM;\n      var rootDocument = document;\n      var dragStartHandler = start(state, editor);\n      var dragHandler = move(state, editor);\n      var dropHandler = drop(state, editor);\n      var dragEndHandler = stop(state, editor);\n      editor.on('mousedown', dragStartHandler);\n      editor.on('mousemove', dragHandler);\n      editor.on('mouseup', dropHandler);\n      pageDom.bind(rootDocument, 'mousemove', dragHandler);\n      pageDom.bind(rootDocument, 'mouseup', dragEndHandler);\n      editor.on('remove', function () {\n        pageDom.unbind(rootDocument, 'mousemove', dragHandler);\n        pageDom.unbind(rootDocument, 'mouseup', dragEndHandler);\n      });\n      editor.on('keydown', function (e) {\n        if (e.keyCode === VK.ESC) {\n          dragEndHandler();\n        }\n      });\n    };\n    var blockIeDrop = function (editor) {\n      editor.on('drop', function (e) {\n        var realTarget = typeof e.clientX !== 'undefined' ? editor.getDoc().elementFromPoint(e.clientX, e.clientY) : null;\n        if (isContentEditableFalse$1(realTarget) || editor.dom.getContentEditableParent(realTarget) === 'false') {\n          e.preventDefault();\n        }\n      });\n    };\n    var blockUnsupportedFileDrop = function (editor) {\n      var preventFileDrop = function (e) {\n        if (!e.isDefaultPrevented()) {\n          var dataTransfer = e.dataTransfer;\n          if (dataTransfer && (contains$3(dataTransfer.types, 'Files') || dataTransfer.files.length > 0)) {\n            e.preventDefault();\n            if (e.type === 'drop') {\n              displayError(editor, 'Dropped file type is not supported');\n            }\n          }\n        }\n      };\n      var preventFileDropIfUIElement = function (e) {\n        if (isUIElement(editor, e.target)) {\n          preventFileDrop(e);\n        }\n      };\n      var setup = function () {\n        var pageDom = DOMUtils.DOM;\n        var dom = editor.dom;\n        var doc = document;\n        var editorRoot = editor.inline ? editor.getBody() : editor.getDoc();\n        var eventNames = [\n          'drop',\n          'dragover'\n        ];\n        each$k(eventNames, function (name) {\n          pageDom.bind(doc, name, preventFileDropIfUIElement);\n          dom.bind(editorRoot, name, preventFileDrop);\n        });\n        editor.on('remove', function () {\n          each$k(eventNames, function (name) {\n            pageDom.unbind(doc, name, preventFileDropIfUIElement);\n            dom.unbind(editorRoot, name, preventFileDrop);\n          });\n        });\n      };\n      editor.on('init', function () {\n        Delay.setEditorTimeout(editor, setup, 0);\n      });\n    };\n    var init$2 = function (editor) {\n      bindFakeDragEvents(editor);\n      blockIeDrop(editor);\n      if (shouldBlockUnsupportedDrop(editor)) {\n        blockUnsupportedFileDrop(editor);\n      }\n    };\n\n    var setup$1 = function (editor) {\n      var renderFocusCaret = first(function () {\n        if (!editor.removed && editor.getBody().contains(document.activeElement)) {\n          var rng = editor.selection.getRng();\n          if (rng.collapsed) {\n            var caretRange = renderRangeCaret(editor, rng, false);\n            editor.selection.setRng(caretRange);\n          }\n        }\n      }, 0);\n      editor.on('focus', function () {\n        renderFocusCaret.throttle();\n      });\n      editor.on('blur', function () {\n        renderFocusCaret.cancel();\n      });\n    };\n\n    var setup = function (editor) {\n      editor.on('init', function () {\n        editor.on('focusin', function (e) {\n          var target = e.target;\n          if (isMedia$2(target)) {\n            var ceRoot = getContentEditableRoot$1(editor.getBody(), target);\n            var node = isContentEditableFalse$b(ceRoot) ? ceRoot : target;\n            if (editor.selection.getNode() !== node) {\n              selectNode(editor, node).each(function (rng) {\n                return editor.selection.setRng(rng);\n              });\n            }\n          }\n        });\n      });\n    };\n\n    var isContentEditableTrue = isContentEditableTrue$4;\n    var isContentEditableFalse = isContentEditableFalse$b;\n    var getContentEditableRoot = function (editor, node) {\n      return getContentEditableRoot$1(editor.getBody(), node);\n    };\n    var SelectionOverrides = function (editor) {\n      var selection = editor.selection, dom = editor.dom;\n      var isBlock = dom.isBlock;\n      var rootNode = editor.getBody();\n      var fakeCaret = FakeCaret(editor, rootNode, isBlock, function () {\n        return hasFocus(editor);\n      });\n      var realSelectionId = 'sel-' + dom.uniqueId();\n      var elementSelectionAttr = 'data-mce-selected';\n      var selectedElement;\n      var isFakeSelectionElement = function (node) {\n        return dom.hasClass(node, 'mce-offscreen-selection');\n      };\n      var isFakeSelectionTargetElement = function (node) {\n        return node !== rootNode && (isContentEditableFalse(node) || isMedia$2(node)) && dom.isChildOf(node, rootNode);\n      };\n      var isNearFakeSelectionElement = function (pos) {\n        return isBeforeContentEditableFalse(pos) || isAfterContentEditableFalse(pos) || isBeforeMedia(pos) || isAfterMedia(pos);\n      };\n      var getRealSelectionElement = function () {\n        var container = dom.get(realSelectionId);\n        return container ? container.getElementsByTagName('*')[0] : container;\n      };\n      var setRange = function (range) {\n        if (range) {\n          selection.setRng(range);\n        }\n      };\n      var getRange = selection.getRng;\n      var showCaret = function (direction, node, before, scrollIntoView) {\n        if (scrollIntoView === void 0) {\n          scrollIntoView = true;\n        }\n        var e = editor.fire('ShowCaret', {\n          target: node,\n          direction: direction,\n          before: before\n        });\n        if (e.isDefaultPrevented()) {\n          return null;\n        }\n        if (scrollIntoView) {\n          selection.scrollIntoView(node, direction === -1);\n        }\n        return fakeCaret.show(before, node);\n      };\n      var showBlockCaretContainer = function (blockCaretContainer) {\n        if (blockCaretContainer.hasAttribute('data-mce-caret')) {\n          showCaretContainerBlock(blockCaretContainer);\n          setRange(getRange());\n          selection.scrollIntoView(blockCaretContainer);\n        }\n      };\n      var registerEvents = function () {\n        editor.on('mouseup', function (e) {\n          var range = getRange();\n          if (range.collapsed && isXYInContentArea(editor, e.clientX, e.clientY)) {\n            renderCaretAtRange(editor, range, false).each(setRange);\n          }\n        });\n        editor.on('click', function (e) {\n          var contentEditableRoot = getContentEditableRoot(editor, e.target);\n          if (contentEditableRoot) {\n            if (isContentEditableFalse(contentEditableRoot)) {\n              e.preventDefault();\n              editor.focus();\n            }\n            if (isContentEditableTrue(contentEditableRoot)) {\n              if (dom.isChildOf(contentEditableRoot, selection.getNode())) {\n                removeElementSelection();\n              }\n            }\n          }\n        });\n        editor.on('blur NewBlock', removeElementSelection);\n        editor.on('ResizeWindow FullscreenStateChanged', fakeCaret.reposition);\n        var hasNormalCaretPosition = function (elm) {\n          var start = elm.firstChild;\n          if (isNullable(start)) {\n            return false;\n          }\n          var startPos = CaretPosition.before(start);\n          if (isBr$5(startPos.getNode()) && elm.childNodes.length === 1) {\n            return !isNearFakeSelectionElement(startPos);\n          } else {\n            var caretWalker = CaretWalker(elm);\n            var newPos = caretWalker.next(startPos);\n            return newPos && !isNearFakeSelectionElement(newPos);\n          }\n        };\n        var isInSameBlock = function (node1, node2) {\n          var block1 = dom.getParent(node1, isBlock);\n          var block2 = dom.getParent(node2, isBlock);\n          return block1 === block2;\n        };\n        var hasBetterMouseTarget = function (targetNode, caretNode) {\n          var targetBlock = dom.getParent(targetNode, isBlock);\n          var caretBlock = dom.getParent(caretNode, isBlock);\n          if (isNullable(targetBlock)) {\n            return false;\n          }\n          if (targetNode !== caretBlock && dom.isChildOf(targetBlock, caretBlock) && isContentEditableFalse(getContentEditableRoot(editor, targetBlock)) === false) {\n            return true;\n          }\n          return !dom.isChildOf(caretBlock, targetBlock) && !isInSameBlock(targetBlock, caretBlock) && hasNormalCaretPosition(targetBlock);\n        };\n        editor.on('tap', function (e) {\n          var targetElm = e.target;\n          var contentEditableRoot = getContentEditableRoot(editor, targetElm);\n          if (isContentEditableFalse(contentEditableRoot)) {\n            e.preventDefault();\n            selectNode(editor, contentEditableRoot).each(setElementSelection);\n          } else if (isFakeSelectionTargetElement(targetElm)) {\n            selectNode(editor, targetElm).each(setElementSelection);\n          }\n        }, true);\n        editor.on('mousedown', function (e) {\n          var targetElm = e.target;\n          if (targetElm !== rootNode && targetElm.nodeName !== 'HTML' && !dom.isChildOf(targetElm, rootNode)) {\n            return;\n          }\n          if (isXYInContentArea(editor, e.clientX, e.clientY) === false) {\n            return;\n          }\n          var contentEditableRoot = getContentEditableRoot(editor, targetElm);\n          if (contentEditableRoot) {\n            if (isContentEditableFalse(contentEditableRoot)) {\n              e.preventDefault();\n              selectNode(editor, contentEditableRoot).each(setElementSelection);\n            } else {\n              removeElementSelection();\n              if (!(isContentEditableTrue(contentEditableRoot) && e.shiftKey) && !isXYWithinRange(e.clientX, e.clientY, selection.getRng())) {\n                hideFakeCaret();\n                selection.placeCaretAt(e.clientX, e.clientY);\n              }\n            }\n          } else if (isFakeSelectionTargetElement(targetElm)) {\n            selectNode(editor, targetElm).each(setElementSelection);\n          } else if (isFakeCaretTarget(targetElm) === false) {\n            removeElementSelection();\n            hideFakeCaret();\n            var fakeCaretInfo = closestFakeCaret(rootNode, e.clientX, e.clientY);\n            if (fakeCaretInfo) {\n              if (!hasBetterMouseTarget(targetElm, fakeCaretInfo.node)) {\n                e.preventDefault();\n                var range = showCaret(1, fakeCaretInfo.node, fakeCaretInfo.before, false);\n                setRange(range);\n                editor.getBody().focus();\n              }\n            }\n          }\n        });\n        editor.on('keypress', function (e) {\n          if (VK.modifierPressed(e)) {\n            return;\n          }\n          if (isContentEditableFalse(selection.getNode())) {\n            e.preventDefault();\n          }\n        });\n        editor.on('GetSelectionRange', function (e) {\n          var rng = e.range;\n          if (selectedElement) {\n            if (!selectedElement.parentNode) {\n              selectedElement = null;\n              return;\n            }\n            rng = rng.cloneRange();\n            rng.selectNode(selectedElement);\n            e.range = rng;\n          }\n        });\n        editor.on('SetSelectionRange', function (e) {\n          e.range = normalizeShortEndedElementSelection(e.range);\n          var rng = setElementSelection(e.range, e.forward);\n          if (rng) {\n            e.range = rng;\n          }\n        });\n        var isPasteBin = function (node) {\n          return node.id === 'mcepastebin';\n        };\n        editor.on('AfterSetSelectionRange', function (e) {\n          var rng = e.range;\n          var parentNode = rng.startContainer.parentNode;\n          if (!isRangeInCaretContainer(rng) && !isPasteBin(parentNode)) {\n            hideFakeCaret();\n          }\n          if (!isFakeSelectionElement(parentNode)) {\n            removeElementSelection();\n          }\n        });\n        editor.on('copy', function (e) {\n          var clipboardData = e.clipboardData;\n          if (!e.isDefaultPrevented() && e.clipboardData && !Env.ie) {\n            var realSelectionElement = getRealSelectionElement();\n            if (realSelectionElement) {\n              e.preventDefault();\n              clipboardData.clearData();\n              clipboardData.setData('text/html', realSelectionElement.outerHTML);\n              clipboardData.setData('text/plain', realSelectionElement.outerText || realSelectionElement.innerText);\n            }\n          }\n        });\n        init$2(editor);\n        setup$1(editor);\n        setup(editor);\n      };\n      var isWithinCaretContainer = function (node) {\n        return isCaretContainer$2(node) || startsWithCaretContainer$1(node) || endsWithCaretContainer$1(node);\n      };\n      var isRangeInCaretContainer = function (rng) {\n        return isWithinCaretContainer(rng.startContainer) || isWithinCaretContainer(rng.endContainer);\n      };\n      var normalizeShortEndedElementSelection = function (rng) {\n        var shortEndedElements = editor.schema.getShortEndedElements();\n        var newRng = dom.createRng();\n        var startContainer = rng.startContainer;\n        var startOffset = rng.startOffset;\n        var endContainer = rng.endContainer;\n        var endOffset = rng.endOffset;\n        if (has$2(shortEndedElements, startContainer.nodeName.toLowerCase())) {\n          if (startOffset === 0) {\n            newRng.setStartBefore(startContainer);\n          } else {\n            newRng.setStartAfter(startContainer);\n          }\n        } else {\n          newRng.setStart(startContainer, startOffset);\n        }\n        if (has$2(shortEndedElements, endContainer.nodeName.toLowerCase())) {\n          if (endOffset === 0) {\n            newRng.setEndBefore(endContainer);\n          } else {\n            newRng.setEndAfter(endContainer);\n          }\n        } else {\n          newRng.setEnd(endContainer, endOffset);\n        }\n        return newRng;\n      };\n      var setupOffscreenSelection = function (node, targetClone, origTargetClone) {\n        var $ = editor.$;\n        var $realSelectionContainer = descendant(SugarElement.fromDom(editor.getBody()), '#' + realSelectionId).fold(function () {\n          return $([]);\n        }, function (elm) {\n          return $([elm.dom]);\n        });\n        if ($realSelectionContainer.length === 0) {\n          $realSelectionContainer = $('<div data-mce-bogus=\"all\" class=\"mce-offscreen-selection\"></div>').attr('id', realSelectionId);\n          $realSelectionContainer.appendTo(editor.getBody());\n        }\n        var newRange = dom.createRng();\n        if (targetClone === origTargetClone && Env.ie) {\n          $realSelectionContainer.empty().append('<p style=\"font-size: 0\" data-mce-bogus=\"all\">\\xA0</p>').append(targetClone);\n          newRange.setStartAfter($realSelectionContainer[0].firstChild.firstChild);\n          newRange.setEndAfter(targetClone);\n        } else {\n          $realSelectionContainer.empty().append(nbsp).append(targetClone).append(nbsp);\n          newRange.setStart($realSelectionContainer[0].firstChild, 1);\n          newRange.setEnd($realSelectionContainer[0].lastChild, 0);\n        }\n        $realSelectionContainer.css({ top: dom.getPos(node, editor.getBody()).y });\n        $realSelectionContainer[0].focus();\n        var sel = selection.getSel();\n        sel.removeAllRanges();\n        sel.addRange(newRange);\n        return newRange;\n      };\n      var selectElement = function (elm) {\n        var targetClone = elm.cloneNode(true);\n        var e = editor.fire('ObjectSelected', {\n          target: elm,\n          targetClone: targetClone\n        });\n        if (e.isDefaultPrevented()) {\n          return null;\n        }\n        var range = setupOffscreenSelection(elm, e.targetClone, targetClone);\n        var nodeElm = SugarElement.fromDom(elm);\n        each$k(descendants(SugarElement.fromDom(editor.getBody()), '*[data-mce-selected]'), function (elm) {\n          if (!eq(nodeElm, elm)) {\n            remove$6(elm, elementSelectionAttr);\n          }\n        });\n        if (!dom.getAttrib(elm, elementSelectionAttr)) {\n          elm.setAttribute(elementSelectionAttr, '1');\n        }\n        selectedElement = elm;\n        hideFakeCaret();\n        return range;\n      };\n      var setElementSelection = function (range, forward) {\n        if (!range) {\n          return null;\n        }\n        if (range.collapsed) {\n          if (!isRangeInCaretContainer(range)) {\n            var dir = forward ? 1 : -1;\n            var caretPosition = getNormalizedRangeEndPoint(dir, rootNode, range);\n            var beforeNode = caretPosition.getNode(!forward);\n            if (isFakeCaretTarget(beforeNode)) {\n              return showCaret(dir, beforeNode, forward ? !caretPosition.isAtEnd() : false, false);\n            }\n            var afterNode = caretPosition.getNode(forward);\n            if (isFakeCaretTarget(afterNode)) {\n              return showCaret(dir, afterNode, forward ? false : !caretPosition.isAtEnd(), false);\n            }\n          }\n          return null;\n        }\n        var startContainer = range.startContainer;\n        var startOffset = range.startOffset;\n        var endOffset = range.endOffset;\n        if (startContainer.nodeType === 3 && startOffset === 0 && isContentEditableFalse(startContainer.parentNode)) {\n          startContainer = startContainer.parentNode;\n          startOffset = dom.nodeIndex(startContainer);\n          startContainer = startContainer.parentNode;\n        }\n        if (startContainer.nodeType !== 1) {\n          return null;\n        }\n        if (endOffset === startOffset + 1 && startContainer === range.endContainer) {\n          var node = startContainer.childNodes[startOffset];\n          if (isFakeSelectionTargetElement(node)) {\n            return selectElement(node);\n          }\n        }\n        return null;\n      };\n      var removeElementSelection = function () {\n        if (selectedElement) {\n          selectedElement.removeAttribute(elementSelectionAttr);\n        }\n        descendant(SugarElement.fromDom(editor.getBody()), '#' + realSelectionId).each(remove$7);\n        selectedElement = null;\n      };\n      var destroy = function () {\n        fakeCaret.destroy();\n        selectedElement = null;\n      };\n      var hideFakeCaret = function () {\n        fakeCaret.hide();\n      };\n      if (Env.ceFalse && !isRtc(editor)) {\n        registerEvents();\n      }\n      return {\n        showCaret: showCaret,\n        showBlockCaretContainer: showBlockCaretContainer,\n        hideFakeCaret: hideFakeCaret,\n        destroy: destroy\n      };\n    };\n\n    var Quirks = function (editor) {\n      var each = Tools.each;\n      var BACKSPACE = VK.BACKSPACE, DELETE = VK.DELETE, dom = editor.dom, selection = editor.selection, parser = editor.parser;\n      var isGecko = Env.gecko, isIE = Env.ie, isWebKit = Env.webkit;\n      var mceInternalUrlPrefix = 'data:text/mce-internal,';\n      var mceInternalDataType = isIE ? 'Text' : 'URL';\n      var setEditorCommandState = function (cmd, state) {\n        try {\n          editor.getDoc().execCommand(cmd, false, state);\n        } catch (ex) {\n        }\n      };\n      var isDefaultPrevented = function (e) {\n        return e.isDefaultPrevented();\n      };\n      var setMceInternalContent = function (e) {\n        var selectionHtml, internalContent;\n        if (e.dataTransfer) {\n          if (editor.selection.isCollapsed() && e.target.tagName === 'IMG') {\n            selection.select(e.target);\n          }\n          selectionHtml = editor.selection.getContent();\n          if (selectionHtml.length > 0) {\n            internalContent = mceInternalUrlPrefix + escape(editor.id) + ',' + escape(selectionHtml);\n            e.dataTransfer.setData(mceInternalDataType, internalContent);\n          }\n        }\n      };\n      var getMceInternalContent = function (e) {\n        var internalContent;\n        if (e.dataTransfer) {\n          internalContent = e.dataTransfer.getData(mceInternalDataType);\n          if (internalContent && internalContent.indexOf(mceInternalUrlPrefix) >= 0) {\n            internalContent = internalContent.substr(mceInternalUrlPrefix.length).split(',');\n            return {\n              id: unescape(internalContent[0]),\n              html: unescape(internalContent[1])\n            };\n          }\n        }\n        return null;\n      };\n      var insertClipboardContents = function (content, internal) {\n        if (editor.queryCommandSupported('mceInsertClipboardContent')) {\n          editor.execCommand('mceInsertClipboardContent', false, {\n            content: content,\n            internal: internal\n          });\n        } else {\n          editor.execCommand('mceInsertContent', false, content);\n        }\n      };\n      var emptyEditorWhenDeleting = function () {\n        var serializeRng = function (rng) {\n          var body = dom.create('body');\n          var contents = rng.cloneContents();\n          body.appendChild(contents);\n          return selection.serializer.serialize(body, { format: 'html' });\n        };\n        var allContentsSelected = function (rng) {\n          var selection = serializeRng(rng);\n          var allRng = dom.createRng();\n          allRng.selectNode(editor.getBody());\n          var allSelection = serializeRng(allRng);\n          return selection === allSelection;\n        };\n        editor.on('keydown', function (e) {\n          var keyCode = e.keyCode;\n          var isCollapsed, body;\n          if (!isDefaultPrevented(e) && (keyCode === DELETE || keyCode === BACKSPACE)) {\n            isCollapsed = editor.selection.isCollapsed();\n            body = editor.getBody();\n            if (isCollapsed && !dom.isEmpty(body)) {\n              return;\n            }\n            if (!isCollapsed && !allContentsSelected(editor.selection.getRng())) {\n              return;\n            }\n            e.preventDefault();\n            editor.setContent('');\n            if (body.firstChild && dom.isBlock(body.firstChild)) {\n              editor.selection.setCursorLocation(body.firstChild, 0);\n            } else {\n              editor.selection.setCursorLocation(body, 0);\n            }\n            editor.nodeChanged();\n          }\n        });\n      };\n      var selectAll = function () {\n        editor.shortcuts.add('meta+a', null, 'SelectAll');\n      };\n      var documentElementEditingFocus = function () {\n        if (!editor.inline) {\n          dom.bind(editor.getDoc(), 'mousedown mouseup', function (e) {\n            var rng;\n            if (e.target === editor.getDoc().documentElement) {\n              rng = selection.getRng();\n              editor.getBody().focus();\n              if (e.type === 'mousedown') {\n                if (isCaretContainer$2(rng.startContainer)) {\n                  return;\n                }\n                selection.placeCaretAt(e.clientX, e.clientY);\n              } else {\n                selection.setRng(rng);\n              }\n            }\n          });\n        }\n      };\n      var removeHrOnBackspace = function () {\n        editor.on('keydown', function (e) {\n          if (!isDefaultPrevented(e) && e.keyCode === BACKSPACE) {\n            if (!editor.getBody().getElementsByTagName('hr').length) {\n              return;\n            }\n            if (selection.isCollapsed() && selection.getRng().startOffset === 0) {\n              var node = selection.getNode();\n              var previousSibling = node.previousSibling;\n              if (node.nodeName === 'HR') {\n                dom.remove(node);\n                e.preventDefault();\n                return;\n              }\n              if (previousSibling && previousSibling.nodeName && previousSibling.nodeName.toLowerCase() === 'hr') {\n                dom.remove(previousSibling);\n                e.preventDefault();\n              }\n            }\n          }\n        });\n      };\n      var focusBody = function () {\n        if (!Range.prototype.getClientRects) {\n          editor.on('mousedown', function (e) {\n            if (!isDefaultPrevented(e) && e.target.nodeName === 'HTML') {\n              var body_1 = editor.getBody();\n              body_1.blur();\n              Delay.setEditorTimeout(editor, function () {\n                body_1.focus();\n              });\n            }\n          });\n        }\n      };\n      var selectControlElements = function () {\n        editor.on('click', function (e) {\n          var target = e.target;\n          if (/^(IMG|HR)$/.test(target.nodeName) && dom.getContentEditableParent(target) !== 'false') {\n            e.preventDefault();\n            editor.selection.select(target);\n            editor.nodeChanged();\n          }\n          if (target.nodeName === 'A' && dom.hasClass(target, 'mce-item-anchor')) {\n            e.preventDefault();\n            selection.select(target);\n          }\n        });\n      };\n      var removeStylesWhenDeletingAcrossBlockElements = function () {\n        var getAttributeApplyFunction = function () {\n          var template = dom.getAttribs(selection.getStart().cloneNode(false));\n          return function () {\n            var target = selection.getStart();\n            if (target !== editor.getBody()) {\n              dom.setAttrib(target, 'style', null);\n              each(template, function (attr) {\n                target.setAttributeNode(attr.cloneNode(true));\n              });\n            }\n          };\n        };\n        var isSelectionAcrossElements = function () {\n          return !selection.isCollapsed() && dom.getParent(selection.getStart(), dom.isBlock) !== dom.getParent(selection.getEnd(), dom.isBlock);\n        };\n        editor.on('keypress', function (e) {\n          var applyAttributes;\n          if (!isDefaultPrevented(e) && (e.keyCode === 8 || e.keyCode === 46) && isSelectionAcrossElements()) {\n            applyAttributes = getAttributeApplyFunction();\n            editor.getDoc().execCommand('delete', false, null);\n            applyAttributes();\n            e.preventDefault();\n            return false;\n          }\n        });\n        dom.bind(editor.getDoc(), 'cut', function (e) {\n          var applyAttributes;\n          if (!isDefaultPrevented(e) && isSelectionAcrossElements()) {\n            applyAttributes = getAttributeApplyFunction();\n            Delay.setEditorTimeout(editor, function () {\n              applyAttributes();\n            });\n          }\n        });\n      };\n      var disableBackspaceIntoATable = function () {\n        editor.on('keydown', function (e) {\n          if (!isDefaultPrevented(e) && e.keyCode === BACKSPACE) {\n            if (selection.isCollapsed() && selection.getRng().startOffset === 0) {\n              var previousSibling = selection.getNode().previousSibling;\n              if (previousSibling && previousSibling.nodeName && previousSibling.nodeName.toLowerCase() === 'table') {\n                e.preventDefault();\n                return false;\n              }\n            }\n          }\n        });\n      };\n      var removeBlockQuoteOnBackSpace = function () {\n        editor.on('keydown', function (e) {\n          var rng, parent;\n          if (isDefaultPrevented(e) || e.keyCode !== VK.BACKSPACE) {\n            return;\n          }\n          rng = selection.getRng();\n          var container = rng.startContainer;\n          var offset = rng.startOffset;\n          var root = dom.getRoot();\n          parent = container;\n          if (!rng.collapsed || offset !== 0) {\n            return;\n          }\n          while (parent && parent.parentNode && parent.parentNode.firstChild === parent && parent.parentNode !== root) {\n            parent = parent.parentNode;\n          }\n          if (parent.tagName === 'BLOCKQUOTE') {\n            editor.formatter.toggle('blockquote', null, parent);\n            rng = dom.createRng();\n            rng.setStart(container, 0);\n            rng.setEnd(container, 0);\n            selection.setRng(rng);\n          }\n        });\n      };\n      var setGeckoEditingOptions = function () {\n        var setOpts = function () {\n          setEditorCommandState('StyleWithCSS', false);\n          setEditorCommandState('enableInlineTableEditing', false);\n          if (!getObjectResizing(editor)) {\n            setEditorCommandState('enableObjectResizing', false);\n          }\n        };\n        if (!isReadOnly$1(editor)) {\n          editor.on('BeforeExecCommand mousedown', setOpts);\n        }\n      };\n      var addBrAfterLastLinks = function () {\n        var fixLinks = function () {\n          each(dom.select('a'), function (node) {\n            var parentNode = node.parentNode;\n            var root = dom.getRoot();\n            if (parentNode.lastChild === node) {\n              while (parentNode && !dom.isBlock(parentNode)) {\n                if (parentNode.parentNode.lastChild !== parentNode || parentNode === root) {\n                  return;\n                }\n                parentNode = parentNode.parentNode;\n              }\n              dom.add(parentNode, 'br', { 'data-mce-bogus': 1 });\n            }\n          });\n        };\n        editor.on('SetContent ExecCommand', function (e) {\n          if (e.type === 'setcontent' || e.command === 'mceInsertLink') {\n            fixLinks();\n          }\n        });\n      };\n      var setDefaultBlockType = function () {\n        if (getForcedRootBlock(editor)) {\n          editor.on('init', function () {\n            setEditorCommandState('DefaultParagraphSeparator', getForcedRootBlock(editor));\n          });\n        }\n      };\n      var normalizeSelection = function () {\n        editor.on('keyup focusin mouseup', function (e) {\n          if (!VK.modifierPressed(e)) {\n            selection.normalize();\n          }\n        }, true);\n      };\n      var showBrokenImageIcon = function () {\n        editor.contentStyles.push('img:-moz-broken {' + '-moz-force-broken-image-icon:1;' + 'min-width:24px;' + 'min-height:24px' + '}');\n      };\n      var restoreFocusOnKeyDown = function () {\n        if (!editor.inline) {\n          editor.on('keydown', function () {\n            if (document.activeElement === document.body) {\n              editor.getWin().focus();\n            }\n          });\n        }\n      };\n      var bodyHeight = function () {\n        if (!editor.inline) {\n          editor.contentStyles.push('body {min-height: 150px}');\n          editor.on('click', function (e) {\n            var rng;\n            if (e.target.nodeName === 'HTML') {\n              if (Env.ie > 11) {\n                editor.getBody().focus();\n                return;\n              }\n              rng = editor.selection.getRng();\n              editor.getBody().focus();\n              editor.selection.setRng(rng);\n              editor.selection.normalize();\n              editor.nodeChanged();\n            }\n          });\n        }\n      };\n      var blockCmdArrowNavigation = function () {\n        if (Env.mac) {\n          editor.on('keydown', function (e) {\n            if (VK.metaKeyPressed(e) && !e.shiftKey && (e.keyCode === 37 || e.keyCode === 39)) {\n              e.preventDefault();\n              var selection_1 = editor.selection.getSel();\n              selection_1.modify('move', e.keyCode === 37 ? 'backward' : 'forward', 'lineboundary');\n            }\n          });\n        }\n      };\n      var disableAutoUrlDetect = function () {\n        setEditorCommandState('AutoUrlDetect', false);\n      };\n      var tapLinksAndImages = function () {\n        editor.on('click', function (e) {\n          var elm = e.target;\n          do {\n            if (elm.tagName === 'A') {\n              e.preventDefault();\n              return;\n            }\n          } while (elm = elm.parentNode);\n        });\n        editor.contentStyles.push('.mce-content-body {-webkit-touch-callout: none}');\n      };\n      var blockFormSubmitInsideEditor = function () {\n        editor.on('init', function () {\n          editor.dom.bind(editor.getBody(), 'submit', function (e) {\n            e.preventDefault();\n          });\n        });\n      };\n      var removeAppleInterchangeBrs = function () {\n        parser.addNodeFilter('br', function (nodes) {\n          var i = nodes.length;\n          while (i--) {\n            if (nodes[i].attr('class') === 'Apple-interchange-newline') {\n              nodes[i].remove();\n            }\n          }\n        });\n      };\n      var ieInternalDragAndDrop = function () {\n        editor.on('dragstart', function (e) {\n          setMceInternalContent(e);\n        });\n        editor.on('drop', function (e) {\n          if (!isDefaultPrevented(e)) {\n            var internalContent = getMceInternalContent(e);\n            if (internalContent && internalContent.id !== editor.id) {\n              e.preventDefault();\n              var rng = fromPoint(e.x, e.y, editor.getDoc());\n              selection.setRng(rng);\n              insertClipboardContents(internalContent.html, true);\n            }\n          }\n        });\n      };\n      var refreshContentEditable = noop;\n      var isHidden = function () {\n        if (!isGecko || editor.removed) {\n          return false;\n        }\n        var sel = editor.selection.getSel();\n        return !sel || !sel.rangeCount || sel.rangeCount === 0;\n      };\n      var setupRtc = function () {\n        if (isWebKit) {\n          documentElementEditingFocus();\n          selectControlElements();\n          blockFormSubmitInsideEditor();\n          selectAll();\n          if (Env.iOS) {\n            restoreFocusOnKeyDown();\n            bodyHeight();\n            tapLinksAndImages();\n          }\n        }\n        if (isGecko) {\n          focusBody();\n          setGeckoEditingOptions();\n          showBrokenImageIcon();\n          blockCmdArrowNavigation();\n        }\n      };\n      var setup = function () {\n        removeBlockQuoteOnBackSpace();\n        emptyEditorWhenDeleting();\n        if (!Env.windowsPhone) {\n          normalizeSelection();\n        }\n        if (isWebKit) {\n          documentElementEditingFocus();\n          selectControlElements();\n          setDefaultBlockType();\n          blockFormSubmitInsideEditor();\n          disableBackspaceIntoATable();\n          removeAppleInterchangeBrs();\n          if (Env.iOS) {\n            restoreFocusOnKeyDown();\n            bodyHeight();\n            tapLinksAndImages();\n          } else {\n            selectAll();\n          }\n        }\n        if (Env.ie >= 11) {\n          bodyHeight();\n          disableBackspaceIntoATable();\n        }\n        if (Env.ie) {\n          selectAll();\n          disableAutoUrlDetect();\n          ieInternalDragAndDrop();\n        }\n        if (isGecko) {\n          removeHrOnBackspace();\n          focusBody();\n          removeStylesWhenDeletingAcrossBlockElements();\n          setGeckoEditingOptions();\n          addBrAfterLastLinks();\n          showBrokenImageIcon();\n          blockCmdArrowNavigation();\n          disableBackspaceIntoATable();\n        }\n      };\n      if (isRtc(editor)) {\n        setupRtc();\n      } else {\n        setup();\n      }\n      return {\n        refreshContentEditable: refreshContentEditable,\n        isHidden: isHidden\n      };\n    };\n\n    var DOM$6 = DOMUtils.DOM;\n    var appendStyle = function (editor, text) {\n      var body = SugarElement.fromDom(editor.getBody());\n      var container = getStyleContainer(getRootNode(body));\n      var style = SugarElement.fromTag('style');\n      set$1(style, 'type', 'text/css');\n      append$1(style, SugarElement.fromText(text));\n      append$1(container, style);\n      editor.on('remove', function () {\n        remove$7(style);\n      });\n    };\n    var getRootName = function (editor) {\n      return editor.inline ? editor.getElement().nodeName.toLowerCase() : undefined;\n    };\n    var removeUndefined = function (obj) {\n      return filter$3(obj, function (v) {\n        return isUndefined(v) === false;\n      });\n    };\n    var mkSchemaSettings = function (editor) {\n      var settings = editor.settings;\n      return removeUndefined({\n        block_elements: settings.block_elements,\n        boolean_attributes: settings.boolean_attributes,\n        custom_elements: settings.custom_elements,\n        extended_valid_elements: settings.extended_valid_elements,\n        invalid_elements: settings.invalid_elements,\n        invalid_styles: settings.invalid_styles,\n        move_caret_before_on_enter_elements: settings.move_caret_before_on_enter_elements,\n        non_empty_elements: settings.non_empty_elements,\n        schema: settings.schema,\n        self_closing_elements: settings.self_closing_elements,\n        short_ended_elements: settings.short_ended_elements,\n        special: settings.special,\n        text_block_elements: settings.text_block_elements,\n        text_inline_elements: settings.text_inline_elements,\n        valid_children: settings.valid_children,\n        valid_classes: settings.valid_classes,\n        valid_elements: settings.valid_elements,\n        valid_styles: settings.valid_styles,\n        verify_html: settings.verify_html,\n        whitespace_elements: settings.whitespace_elements,\n        padd_empty_block_inline_children: settings.format_empty_lines\n      });\n    };\n    var mkParserSettings = function (editor) {\n      var settings = editor.settings;\n      var blobCache = editor.editorUpload.blobCache;\n      return removeUndefined({\n        allow_conditional_comments: settings.allow_conditional_comments,\n        allow_html_data_urls: settings.allow_html_data_urls,\n        allow_svg_data_urls: settings.allow_svg_data_urls,\n        allow_html_in_named_anchor: settings.allow_html_in_named_anchor,\n        allow_script_urls: settings.allow_script_urls,\n        allow_unsafe_link_target: settings.allow_unsafe_link_target,\n        convert_fonts_to_spans: settings.convert_fonts_to_spans,\n        fix_list_elements: settings.fix_list_elements,\n        font_size_legacy_values: settings.font_size_legacy_values,\n        forced_root_block: settings.forced_root_block,\n        forced_root_block_attrs: settings.forced_root_block_attrs,\n        padd_empty_with_br: settings.padd_empty_with_br,\n        preserve_cdata: settings.preserve_cdata,\n        remove_trailing_brs: settings.remove_trailing_brs,\n        inline_styles: settings.inline_styles,\n        root_name: getRootName(editor),\n        validate: true,\n        blob_cache: blobCache,\n        document: editor.getDoc(),\n        images_dataimg_filter: settings.images_dataimg_filter\n      });\n    };\n    var mkSerializerSettings = function (editor) {\n      var settings = editor.settings;\n      return __assign(__assign(__assign({}, mkParserSettings(editor)), mkSchemaSettings(editor)), removeUndefined({\n        url_converter: settings.url_converter,\n        url_converter_scope: settings.url_converter_scope,\n        element_format: settings.element_format,\n        entities: settings.entities,\n        entity_encoding: settings.entity_encoding,\n        indent: settings.indent,\n        indent_after: settings.indent_after,\n        indent_before: settings.indent_before\n      }));\n    };\n    var createParser = function (editor) {\n      var parser = DomParser(mkParserSettings(editor), editor.schema);\n      parser.addAttributeFilter('src,href,style,tabindex', function (nodes, name) {\n        var i = nodes.length, node, value;\n        var dom = editor.dom;\n        var internalName = 'data-mce-' + name;\n        while (i--) {\n          node = nodes[i];\n          value = node.attr(name);\n          if (value && !node.attr(internalName)) {\n            if (value.indexOf('data:') === 0 || value.indexOf('blob:') === 0) {\n              continue;\n            }\n            if (name === 'style') {\n              value = dom.serializeStyle(dom.parseStyle(value), node.name);\n              if (!value.length) {\n                value = null;\n              }\n              node.attr(internalName, value);\n              node.attr(name, value);\n            } else if (name === 'tabindex') {\n              node.attr(internalName, value);\n              node.attr(name, null);\n            } else {\n              node.attr(internalName, editor.convertURL(value, name, node.name));\n            }\n          }\n        }\n      });\n      parser.addNodeFilter('script', function (nodes) {\n        var i = nodes.length;\n        while (i--) {\n          var node = nodes[i];\n          var type = node.attr('type') || 'no/type';\n          if (type.indexOf('mce-') !== 0) {\n            node.attr('type', 'mce-' + type);\n          }\n        }\n      });\n      if (editor.settings.preserve_cdata) {\n        parser.addNodeFilter('#cdata', function (nodes) {\n          var i = nodes.length;\n          while (i--) {\n            var node = nodes[i];\n            node.type = 8;\n            node.name = '#comment';\n            node.value = '[CDATA[' + editor.dom.encode(node.value) + ']]';\n          }\n        });\n      }\n      parser.addNodeFilter('p,h1,h2,h3,h4,h5,h6,div', function (nodes) {\n        var i = nodes.length;\n        var nonEmptyElements = editor.schema.getNonEmptyElements();\n        while (i--) {\n          var node = nodes[i];\n          if (node.isEmpty(nonEmptyElements) && node.getAll('br').length === 0) {\n            node.append(new AstNode('br', 1)).shortEnded = true;\n          }\n        }\n      });\n      return parser;\n    };\n    var autoFocus = function (editor) {\n      if (editor.settings.auto_focus) {\n        Delay.setEditorTimeout(editor, function () {\n          var focusEditor;\n          if (editor.settings.auto_focus === true) {\n            focusEditor = editor;\n          } else {\n            focusEditor = editor.editorManager.get(editor.settings.auto_focus);\n          }\n          if (!focusEditor.destroyed) {\n            focusEditor.focus();\n          }\n        }, 100);\n      }\n    };\n    var moveSelectionToFirstCaretPosition = function (editor) {\n      var root = editor.dom.getRoot();\n      if (!editor.inline && (!hasAnyRanges(editor) || editor.selection.getStart(true) === root)) {\n        firstPositionIn(root).each(function (pos) {\n          var node = pos.getNode();\n          var caretPos = isTable$3(node) ? firstPositionIn(node).getOr(pos) : pos;\n          if (Env.browser.isIE()) {\n            storeNative(editor, caretPos.toRange());\n          } else {\n            editor.selection.setRng(caretPos.toRange());\n          }\n        });\n      }\n    };\n    var initEditor = function (editor) {\n      editor.bindPendingEventDelegates();\n      editor.initialized = true;\n      fireInit(editor);\n      editor.focus(true);\n      moveSelectionToFirstCaretPosition(editor);\n      editor.nodeChanged({ initial: true });\n      editor.execCallback('init_instance_callback', editor);\n      autoFocus(editor);\n    };\n    var getStyleSheetLoader$1 = function (editor) {\n      return editor.inline ? editor.ui.styleSheetLoader : editor.dom.styleSheetLoader;\n    };\n    var makeStylesheetLoadingPromises = function (editor, css, framedFonts) {\n      var promises = [new promiseObj(function (resolve, reject) {\n          return getStyleSheetLoader$1(editor).loadAll(css, resolve, reject);\n        })];\n      if (editor.inline) {\n        return promises;\n      } else {\n        return promises.concat([new promiseObj(function (resolve, reject) {\n            return editor.ui.styleSheetLoader.loadAll(framedFonts, resolve, reject);\n          })]);\n      }\n    };\n    var loadContentCss = function (editor) {\n      var styleSheetLoader = getStyleSheetLoader$1(editor);\n      var fontCss = getFontCss(editor);\n      var css = editor.contentCSS;\n      var removeCss = function () {\n        styleSheetLoader.unloadAll(css);\n        if (!editor.inline) {\n          editor.ui.styleSheetLoader.unloadAll(fontCss);\n        }\n      };\n      var loaded = function () {\n        if (editor.removed) {\n          removeCss();\n        } else {\n          editor.on('remove', removeCss);\n        }\n      };\n      if (editor.contentStyles.length > 0) {\n        var contentCssText_1 = '';\n        Tools.each(editor.contentStyles, function (style) {\n          contentCssText_1 += style + '\\r\\n';\n        });\n        editor.dom.addStyle(contentCssText_1);\n      }\n      var allStylesheets = promiseObj.all(makeStylesheetLoadingPromises(editor, css, fontCss)).then(loaded).catch(loaded);\n      if (editor.settings.content_style) {\n        appendStyle(editor, editor.settings.content_style);\n      }\n      return allStylesheets;\n    };\n    var preInit = function (editor) {\n      var settings = editor.settings, doc = editor.getDoc(), body = editor.getBody();\n      firePreInit(editor);\n      if (!settings.browser_spellcheck && !settings.gecko_spellcheck) {\n        doc.body.spellcheck = false;\n        DOM$6.setAttrib(body, 'spellcheck', 'false');\n      }\n      editor.quirks = Quirks(editor);\n      firePostRender(editor);\n      var directionality = getDirectionality(editor);\n      if (directionality !== undefined) {\n        body.dir = directionality;\n      }\n      if (settings.protect) {\n        editor.on('BeforeSetContent', function (e) {\n          Tools.each(settings.protect, function (pattern) {\n            e.content = e.content.replace(pattern, function (str) {\n              return '<!--mce:protected ' + escape(str) + '-->';\n            });\n          });\n        });\n      }\n      editor.on('SetContent', function () {\n        editor.addVisual(editor.getBody());\n      });\n      editor.on('compositionstart compositionend', function (e) {\n        editor.composing = e.type === 'compositionstart';\n      });\n    };\n    var loadInitialContent = function (editor) {\n      if (!isRtc(editor)) {\n        editor.load({\n          initial: true,\n          format: 'html'\n        });\n      }\n      editor.startContent = editor.getContent({ format: 'raw' });\n    };\n    var initEditorWithInitialContent = function (editor) {\n      if (editor.removed !== true) {\n        loadInitialContent(editor);\n        initEditor(editor);\n      }\n    };\n    var initContentBody = function (editor, skipWrite) {\n      var settings = editor.settings;\n      var targetElm = editor.getElement();\n      var doc = editor.getDoc();\n      if (!settings.inline) {\n        editor.getElement().style.visibility = editor.orgVisibility;\n      }\n      if (!skipWrite && !editor.inline) {\n        doc.open();\n        doc.write(editor.iframeHTML);\n        doc.close();\n      }\n      if (editor.inline) {\n        DOM$6.addClass(targetElm, 'mce-content-body');\n        editor.contentDocument = doc = document;\n        editor.contentWindow = window;\n        editor.bodyElement = targetElm;\n        editor.contentAreaContainer = targetElm;\n      }\n      var body = editor.getBody();\n      body.disabled = true;\n      editor.readonly = !!settings.readonly;\n      if (!editor.readonly) {\n        if (editor.inline && DOM$6.getStyle(body, 'position', true) === 'static') {\n          body.style.position = 'relative';\n        }\n        body.contentEditable = editor.getParam('content_editable_state', true);\n      }\n      body.disabled = false;\n      editor.editorUpload = EditorUpload(editor);\n      editor.schema = Schema(mkSchemaSettings(editor));\n      editor.dom = DOMUtils(doc, {\n        keep_values: true,\n        url_converter: editor.convertURL,\n        url_converter_scope: editor,\n        hex_colors: settings.force_hex_style_colors,\n        update_styles: true,\n        root_element: editor.inline ? editor.getBody() : null,\n        collect: function () {\n          return editor.inline;\n        },\n        schema: editor.schema,\n        contentCssCors: shouldUseContentCssCors(editor),\n        referrerPolicy: getReferrerPolicy(editor),\n        onSetAttrib: function (e) {\n          editor.fire('SetAttrib', e);\n        }\n      });\n      editor.parser = createParser(editor);\n      editor.serializer = DomSerializer(mkSerializerSettings(editor), editor);\n      editor.selection = EditorSelection(editor.dom, editor.getWin(), editor.serializer, editor);\n      editor.annotator = Annotator(editor);\n      editor.formatter = Formatter(editor);\n      editor.undoManager = UndoManager(editor);\n      editor._nodeChangeDispatcher = new NodeChange(editor);\n      editor._selectionOverrides = SelectionOverrides(editor);\n      setup$e(editor);\n      setup$3(editor);\n      if (!isRtc(editor)) {\n        setup$2(editor);\n      }\n      var caret = setup$4(editor);\n      setup$f(editor, caret);\n      setup$d(editor);\n      setup$g(editor);\n      var setupRtcThunk = setup$i(editor);\n      preInit(editor);\n      setupRtcThunk.fold(function () {\n        loadContentCss(editor).then(function () {\n          return initEditorWithInitialContent(editor);\n        });\n      }, function (setupRtc) {\n        editor.setProgressState(true);\n        loadContentCss(editor).then(function () {\n          setupRtc().then(function (_rtcMode) {\n            editor.setProgressState(false);\n            initEditorWithInitialContent(editor);\n          }, function (err) {\n            editor.notificationManager.open({\n              type: 'error',\n              text: String(err)\n            });\n            initEditorWithInitialContent(editor);\n          });\n        });\n      });\n    };\n\n    var DOM$5 = DOMUtils.DOM;\n    var relaxDomain = function (editor, ifr) {\n      if (document.domain !== window.location.hostname && Env.browser.isIE()) {\n        var bodyUuid = uuid('mce');\n        editor[bodyUuid] = function () {\n          initContentBody(editor);\n        };\n        var domainRelaxUrl = 'javascript:(function(){' + 'document.open();document.domain=\"' + document.domain + '\";' + 'var ed = window.parent.tinymce.get(\"' + editor.id + '\");document.write(ed.iframeHTML);' + 'document.close();ed.' + bodyUuid + '(true);})()';\n        DOM$5.setAttrib(ifr, 'src', domainRelaxUrl);\n        return true;\n      }\n      return false;\n    };\n    var createIframeElement = function (id, title, height, customAttrs) {\n      var iframe = SugarElement.fromTag('iframe');\n      setAll$1(iframe, customAttrs);\n      setAll$1(iframe, {\n        id: id + '_ifr',\n        frameBorder: '0',\n        allowTransparency: 'true',\n        title: title\n      });\n      add$1(iframe, 'tox-edit-area__iframe');\n      return iframe;\n    };\n    var getIframeHtml = function (editor) {\n      var iframeHTML = getDocType(editor) + '<html><head>';\n      if (getDocumentBaseUrl(editor) !== editor.documentBaseUrl) {\n        iframeHTML += '<base href=\"' + editor.documentBaseURI.getURI() + '\" />';\n      }\n      iframeHTML += '<meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\" />';\n      var bodyId = getBodyId(editor);\n      var bodyClass = getBodyClass(editor);\n      var translatedAriaText = editor.translate(getIframeAriaText(editor));\n      if (getContentSecurityPolicy(editor)) {\n        iframeHTML += '<meta http-equiv=\"Content-Security-Policy\" content=\"' + getContentSecurityPolicy(editor) + '\" />';\n      }\n      iframeHTML += '</head>' + ('<body id=\"' + bodyId + '\" class=\"mce-content-body ' + bodyClass + '\" data-id=\"' + editor.id + '\" aria-label=\"' + translatedAriaText + '\">') + '<br>' + '</body></html>';\n      return iframeHTML;\n    };\n    var createIframe = function (editor, o) {\n      var iframeTitle = editor.translate('Rich Text Area');\n      var ifr = createIframeElement(editor.id, iframeTitle, o.height, getIframeAttrs(editor)).dom;\n      ifr.onload = function () {\n        ifr.onload = null;\n        editor.fire('load');\n      };\n      var isDomainRelaxed = relaxDomain(editor, ifr);\n      editor.contentAreaContainer = o.iframeContainer;\n      editor.iframeElement = ifr;\n      editor.iframeHTML = getIframeHtml(editor);\n      DOM$5.add(o.iframeContainer, ifr);\n      return isDomainRelaxed;\n    };\n    var init$1 = function (editor, boxInfo) {\n      var isDomainRelaxed = createIframe(editor, boxInfo);\n      if (boxInfo.editorContainer) {\n        DOM$5.get(boxInfo.editorContainer).style.display = editor.orgDisplay;\n        editor.hidden = DOM$5.isHidden(boxInfo.editorContainer);\n      }\n      editor.getElement().style.display = 'none';\n      DOM$5.setAttrib(editor.id, 'aria-hidden', 'true');\n      if (!isDomainRelaxed) {\n        initContentBody(editor);\n      }\n    };\n\n    var DOM$4 = DOMUtils.DOM;\n    var initPlugin = function (editor, initializedPlugins, plugin) {\n      var Plugin = PluginManager.get(plugin);\n      var pluginUrl = PluginManager.urls[plugin] || editor.documentBaseUrl.replace(/\\/$/, '');\n      plugin = Tools.trim(plugin);\n      if (Plugin && Tools.inArray(initializedPlugins, plugin) === -1) {\n        Tools.each(PluginManager.dependencies(plugin), function (dep) {\n          initPlugin(editor, initializedPlugins, dep);\n        });\n        if (editor.plugins[plugin]) {\n          return;\n        }\n        try {\n          var pluginInstance = new Plugin(editor, pluginUrl, editor.$);\n          editor.plugins[plugin] = pluginInstance;\n          if (pluginInstance.init) {\n            pluginInstance.init(editor, pluginUrl);\n            initializedPlugins.push(plugin);\n          }\n        } catch (e) {\n          pluginInitError(editor, plugin, e);\n        }\n      }\n    };\n    var trimLegacyPrefix = function (name) {\n      return name.replace(/^\\-/, '');\n    };\n    var initPlugins = function (editor) {\n      var initializedPlugins = [];\n      Tools.each(getPlugins(editor).split(/[ ,]/), function (name) {\n        initPlugin(editor, initializedPlugins, trimLegacyPrefix(name));\n      });\n    };\n    var initIcons = function (editor) {\n      var iconPackName = Tools.trim(getIconPackName(editor));\n      var currentIcons = editor.ui.registry.getAll().icons;\n      var loadIcons = __assign(__assign({}, IconManager.get('default').icons), IconManager.get(iconPackName).icons);\n      each$j(loadIcons, function (svgData, icon) {\n        if (!has$2(currentIcons, icon)) {\n          editor.ui.registry.addIcon(icon, svgData);\n        }\n      });\n    };\n    var initTheme = function (editor) {\n      var theme = getTheme(editor);\n      if (isString$1(theme)) {\n        editor.settings.theme = trimLegacyPrefix(theme);\n        var Theme = ThemeManager.get(theme);\n        editor.theme = new Theme(editor, ThemeManager.urls[theme]);\n        if (editor.theme.init) {\n          editor.theme.init(editor, ThemeManager.urls[theme] || editor.documentBaseUrl.replace(/\\/$/, ''), editor.$);\n        }\n      } else {\n        editor.theme = {};\n      }\n    };\n    var renderFromLoadedTheme = function (editor) {\n      return editor.theme.renderUI();\n    };\n    var renderFromThemeFunc = function (editor) {\n      var elm = editor.getElement();\n      var theme = getTheme(editor);\n      var info = theme(editor, elm);\n      if (info.editorContainer.nodeType) {\n        info.editorContainer.id = info.editorContainer.id || editor.id + '_parent';\n      }\n      if (info.iframeContainer && info.iframeContainer.nodeType) {\n        info.iframeContainer.id = info.iframeContainer.id || editor.id + '_iframecontainer';\n      }\n      info.height = info.iframeHeight ? info.iframeHeight : elm.offsetHeight;\n      return info;\n    };\n    var createThemeFalseResult = function (element) {\n      return {\n        editorContainer: element,\n        iframeContainer: element,\n        api: {}\n      };\n    };\n    var renderThemeFalseIframe = function (targetElement) {\n      var iframeContainer = DOM$4.create('div');\n      DOM$4.insertAfter(iframeContainer, targetElement);\n      return createThemeFalseResult(iframeContainer);\n    };\n    var renderThemeFalse = function (editor) {\n      var targetElement = editor.getElement();\n      return editor.inline ? createThemeFalseResult(null) : renderThemeFalseIframe(targetElement);\n    };\n    var renderThemeUi = function (editor) {\n      var elm = editor.getElement();\n      editor.orgDisplay = elm.style.display;\n      if (isString$1(getTheme(editor))) {\n        return renderFromLoadedTheme(editor);\n      } else if (isFunction(getTheme(editor))) {\n        return renderFromThemeFunc(editor);\n      } else {\n        return renderThemeFalse(editor);\n      }\n    };\n    var augmentEditorUiApi = function (editor, api) {\n      var uiApiFacade = {\n        show: Optional.from(api.show).getOr(noop),\n        hide: Optional.from(api.hide).getOr(noop),\n        disable: Optional.from(api.disable).getOr(noop),\n        isDisabled: Optional.from(api.isDisabled).getOr(never),\n        enable: function () {\n          if (!editor.mode.isReadOnly()) {\n            Optional.from(api.enable).map(call);\n          }\n        }\n      };\n      editor.ui = __assign(__assign({}, editor.ui), uiApiFacade);\n    };\n    var init = function (editor) {\n      editor.fire('ScriptsLoaded');\n      initIcons(editor);\n      initTheme(editor);\n      initPlugins(editor);\n      var renderInfo = renderThemeUi(editor);\n      augmentEditorUiApi(editor, Optional.from(renderInfo.api).getOr({}));\n      var boxInfo = {\n        editorContainer: renderInfo.editorContainer,\n        iframeContainer: renderInfo.iframeContainer\n      };\n      editor.editorContainer = boxInfo.editorContainer ? boxInfo.editorContainer : null;\n      appendContentCssFromSettings(editor);\n      if (editor.inline) {\n        return initContentBody(editor);\n      } else {\n        return init$1(editor, boxInfo);\n      }\n    };\n\n    var DOM$3 = DOMUtils.DOM;\n    var hasSkipLoadPrefix = function (name) {\n      return name.charAt(0) === '-';\n    };\n    var loadLanguage = function (scriptLoader, editor) {\n      var languageCode = getLanguageCode(editor);\n      var languageUrl = getLanguageUrl(editor);\n      if (I18n.hasCode(languageCode) === false && languageCode !== 'en') {\n        var url_1 = languageUrl !== '' ? languageUrl : editor.editorManager.baseURL + '/langs/' + languageCode + '.js';\n        scriptLoader.add(url_1, noop, undefined, function () {\n          languageLoadError(editor, url_1, languageCode);\n        });\n      }\n    };\n    var loadTheme = function (scriptLoader, editor, suffix, callback) {\n      var theme = getTheme(editor);\n      if (isString$1(theme)) {\n        if (!hasSkipLoadPrefix(theme) && !has$2(ThemeManager.urls, theme)) {\n          var themeUrl = getThemeUrl(editor);\n          if (themeUrl) {\n            ThemeManager.load(theme, editor.documentBaseURI.toAbsolute(themeUrl));\n          } else {\n            ThemeManager.load(theme, 'themes/' + theme + '/theme' + suffix + '.js');\n          }\n        }\n        scriptLoader.loadQueue(function () {\n          ThemeManager.waitFor(theme, callback);\n        });\n      } else {\n        callback();\n      }\n    };\n    var getIconsUrlMetaFromUrl = function (editor) {\n      return Optional.from(getIconsUrl(editor)).filter(function (url) {\n        return url.length > 0;\n      }).map(function (url) {\n        return {\n          url: url,\n          name: Optional.none()\n        };\n      });\n    };\n    var getIconsUrlMetaFromName = function (editor, name, suffix) {\n      return Optional.from(name).filter(function (name) {\n        return name.length > 0 && !IconManager.has(name);\n      }).map(function (name) {\n        return {\n          url: editor.editorManager.baseURL + '/icons/' + name + '/icons' + suffix + '.js',\n          name: Optional.some(name)\n        };\n      });\n    };\n    var loadIcons = function (scriptLoader, editor, suffix) {\n      var defaultIconsUrl = getIconsUrlMetaFromName(editor, 'default', suffix);\n      var customIconsUrl = getIconsUrlMetaFromUrl(editor).orThunk(function () {\n        return getIconsUrlMetaFromName(editor, getIconPackName(editor), '');\n      });\n      each$k(cat([\n        defaultIconsUrl,\n        customIconsUrl\n      ]), function (urlMeta) {\n        scriptLoader.add(urlMeta.url, noop, undefined, function () {\n          iconsLoadError(editor, urlMeta.url, urlMeta.name.getOrUndefined());\n        });\n      });\n    };\n    var loadPlugins = function (editor, suffix) {\n      Tools.each(getExternalPlugins$1(editor), function (url, name) {\n        PluginManager.load(name, url, noop, undefined, function () {\n          pluginLoadError(editor, url, name);\n        });\n        editor.settings.plugins += ' ' + name;\n      });\n      Tools.each(getPlugins(editor).split(/[ ,]/), function (plugin) {\n        plugin = Tools.trim(plugin);\n        if (plugin && !PluginManager.urls[plugin]) {\n          if (hasSkipLoadPrefix(plugin)) {\n            plugin = plugin.substr(1, plugin.length);\n            var dependencies = PluginManager.dependencies(plugin);\n            Tools.each(dependencies, function (depPlugin) {\n              var defaultSettings = {\n                prefix: 'plugins/',\n                resource: depPlugin,\n                suffix: '/plugin' + suffix + '.js'\n              };\n              var dep = PluginManager.createUrl(defaultSettings, depPlugin);\n              PluginManager.load(dep.resource, dep, noop, undefined, function () {\n                pluginLoadError(editor, dep.prefix + dep.resource + dep.suffix, dep.resource);\n              });\n            });\n          } else {\n            var url_2 = {\n              prefix: 'plugins/',\n              resource: plugin,\n              suffix: '/plugin' + suffix + '.js'\n            };\n            PluginManager.load(plugin, url_2, noop, undefined, function () {\n              pluginLoadError(editor, url_2.prefix + url_2.resource + url_2.suffix, plugin);\n            });\n          }\n        }\n      });\n    };\n    var loadScripts = function (editor, suffix) {\n      var scriptLoader = ScriptLoader.ScriptLoader;\n      loadTheme(scriptLoader, editor, suffix, function () {\n        loadLanguage(scriptLoader, editor);\n        loadIcons(scriptLoader, editor, suffix);\n        loadPlugins(editor, suffix);\n        scriptLoader.loadQueue(function () {\n          if (!editor.removed) {\n            init(editor);\n          }\n        }, editor, function () {\n          if (!editor.removed) {\n            init(editor);\n          }\n        });\n      });\n    };\n    var getStyleSheetLoader = function (element, editor) {\n      return instance.forElement(element, {\n        contentCssCors: hasContentCssCors(editor),\n        referrerPolicy: getReferrerPolicy(editor)\n      });\n    };\n    var render = function (editor) {\n      var id = editor.id;\n      I18n.setCode(getLanguageCode(editor));\n      var readyHandler = function () {\n        DOM$3.unbind(window, 'ready', readyHandler);\n        editor.render();\n      };\n      if (!EventUtils.Event.domLoaded) {\n        DOM$3.bind(window, 'ready', readyHandler);\n        return;\n      }\n      if (!editor.getElement()) {\n        return;\n      }\n      if (!Env.contentEditable) {\n        return;\n      }\n      var element = SugarElement.fromDom(editor.getElement());\n      var snapshot = clone$3(element);\n      editor.on('remove', function () {\n        eachr(element.dom.attributes, function (attr) {\n          return remove$6(element, attr.name);\n        });\n        setAll$1(element, snapshot);\n      });\n      editor.ui.styleSheetLoader = getStyleSheetLoader(element, editor);\n      if (!isInline(editor)) {\n        editor.orgVisibility = editor.getElement().style.visibility;\n        editor.getElement().style.visibility = 'hidden';\n      } else {\n        editor.inline = true;\n      }\n      var form = editor.getElement().form || DOM$3.getParent(id, 'form');\n      if (form) {\n        editor.formElement = form;\n        if (hasHiddenInput(editor) && !isTextareaOrInput(editor.getElement())) {\n          DOM$3.insertAfter(DOM$3.create('input', {\n            type: 'hidden',\n            name: id\n          }), id);\n          editor.hasHiddenInput = true;\n        }\n        editor.formEventDelegate = function (e) {\n          editor.fire(e.type, e);\n        };\n        DOM$3.bind(form, 'submit reset', editor.formEventDelegate);\n        editor.on('reset', function () {\n          editor.resetContent();\n        });\n        if (shouldPatchSubmit(editor) && !form.submit.nodeType && !form.submit.length && !form._mceOldSubmit) {\n          form._mceOldSubmit = form.submit;\n          form.submit = function () {\n            editor.editorManager.triggerSave();\n            editor.setDirty(false);\n            return form._mceOldSubmit(form);\n          };\n        }\n      }\n      editor.windowManager = WindowManager(editor);\n      editor.notificationManager = NotificationManager(editor);\n      if (isEncodingXml(editor)) {\n        editor.on('GetContent', function (e) {\n          if (e.save) {\n            e.content = DOM$3.encode(e.content);\n          }\n        });\n      }\n      if (shouldAddFormSubmitTrigger(editor)) {\n        editor.on('submit', function () {\n          if (editor.initialized) {\n            editor.save();\n          }\n        });\n      }\n      if (shouldAddUnloadTrigger(editor)) {\n        editor._beforeUnload = function () {\n          if (editor.initialized && !editor.destroyed && !editor.isHidden()) {\n            editor.save({\n              format: 'raw',\n              no_events: true,\n              set_dirty: false\n            });\n          }\n        };\n        editor.editorManager.on('BeforeUnload', editor._beforeUnload);\n      }\n      editor.editorManager.add(editor);\n      loadScripts(editor, editor.suffix);\n    };\n\n    var addVisual = function (editor, elm) {\n      return addVisual$1(editor, elm);\n    };\n\n    var legacyPropNames = {\n      'font-size': 'size',\n      'font-family': 'face'\n    };\n    var getSpecifiedFontProp = function (propName, rootElm, elm) {\n      var getProperty = function (elm) {\n        return getRaw(elm, propName).orThunk(function () {\n          if (name(elm) === 'font') {\n            return get$9(legacyPropNames, propName).bind(function (legacyPropName) {\n              return getOpt(elm, legacyPropName);\n            });\n          } else {\n            return Optional.none();\n          }\n        });\n      };\n      var isRoot = function (elm) {\n        return eq(SugarElement.fromDom(rootElm), elm);\n      };\n      return closest$1(SugarElement.fromDom(elm), function (elm) {\n        return getProperty(elm);\n      }, isRoot);\n    };\n    var normalizeFontFamily = function (fontFamily) {\n      return fontFamily.replace(/[\\'\\\"\\\\]/g, '').replace(/,\\s+/g, ',');\n    };\n    var getComputedFontProp = function (propName, elm) {\n      return Optional.from(DOMUtils.DOM.getStyle(elm, propName, true));\n    };\n    var getFontProp = function (propName) {\n      return function (rootElm, elm) {\n        return Optional.from(elm).map(SugarElement.fromDom).filter(isElement$6).bind(function (element) {\n          return getSpecifiedFontProp(propName, rootElm, element.dom).or(getComputedFontProp(propName, element.dom));\n        }).getOr('');\n      };\n    };\n    var getFontSize = getFontProp('font-size');\n    var getFontFamily = compose(normalizeFontFamily, getFontProp('font-family'));\n\n    var findFirstCaretElement = function (editor) {\n      return firstPositionIn(editor.getBody()).map(function (caret) {\n        var container = caret.container();\n        return isText$7(container) ? container.parentNode : container;\n      });\n    };\n    var getCaretElement = function (editor) {\n      return Optional.from(editor.selection.getRng()).bind(function (rng) {\n        var root = editor.getBody();\n        var atStartOfNode = rng.startContainer === root && rng.startOffset === 0;\n        return atStartOfNode ? Optional.none() : Optional.from(editor.selection.getStart(true));\n      });\n    };\n    var bindRange = function (editor, binder) {\n      return getCaretElement(editor).orThunk(curry(findFirstCaretElement, editor)).map(SugarElement.fromDom).filter(isElement$6).bind(binder);\n    };\n    var mapRange = function (editor, mapper) {\n      return bindRange(editor, compose1(Optional.some, mapper));\n    };\n\n    var fromFontSizeNumber = function (editor, value) {\n      if (/^[0-9.]+$/.test(value)) {\n        var fontSizeNumber = parseInt(value, 10);\n        if (fontSizeNumber >= 1 && fontSizeNumber <= 7) {\n          var fontSizes = getFontStyleValues(editor);\n          var fontClasses = getFontSizeClasses(editor);\n          if (fontClasses) {\n            return fontClasses[fontSizeNumber - 1] || value;\n          } else {\n            return fontSizes[fontSizeNumber - 1] || value;\n          }\n        } else {\n          return value;\n        }\n      } else {\n        return value;\n      }\n    };\n    var normalizeFontNames = function (font) {\n      var fonts = font.split(/\\s*,\\s*/);\n      return map$3(fonts, function (font) {\n        if (font.indexOf(' ') !== -1 && !(startsWith(font, '\"') || startsWith(font, '\\''))) {\n          return '\\'' + font + '\\'';\n        } else {\n          return font;\n        }\n      }).join(',');\n    };\n    var fontNameAction = function (editor, value) {\n      var font = fromFontSizeNumber(editor, value);\n      editor.formatter.toggle('fontname', { value: normalizeFontNames(font) });\n      editor.nodeChanged();\n    };\n    var fontNameQuery = function (editor) {\n      return mapRange(editor, function (elm) {\n        return getFontFamily(editor.getBody(), elm.dom);\n      }).getOr('');\n    };\n    var fontSizeAction = function (editor, value) {\n      editor.formatter.toggle('fontsize', { value: fromFontSizeNumber(editor, value) });\n      editor.nodeChanged();\n    };\n    var fontSizeQuery = function (editor) {\n      return mapRange(editor, function (elm) {\n        return getFontSize(editor.getBody(), elm.dom);\n      }).getOr('');\n    };\n\n    var lineHeightQuery = function (editor) {\n      return mapRange(editor, function (elm) {\n        var root = SugarElement.fromDom(editor.getBody());\n        var specifiedStyle = closest$1(elm, function (elm) {\n          return getRaw(elm, 'line-height');\n        }, curry(eq, root));\n        var computedStyle = function () {\n          var lineHeight = parseFloat(get$5(elm, 'line-height'));\n          var fontSize = parseFloat(get$5(elm, 'font-size'));\n          return String(lineHeight / fontSize);\n        };\n        return specifiedStyle.getOrThunk(computedStyle);\n      }).getOr('');\n    };\n    var lineHeightAction = function (editor, lineHeight) {\n      editor.formatter.toggle('lineheight', { value: String(lineHeight) });\n      editor.nodeChanged();\n    };\n\n    var processValue = function (value) {\n      if (typeof value !== 'string') {\n        var details = Tools.extend({\n          paste: value.paste,\n          data: { paste: value.paste }\n        }, value);\n        return {\n          content: value.content,\n          details: details\n        };\n      }\n      return {\n        content: value,\n        details: {}\n      };\n    };\n    var insertAtCaret = function (editor, value) {\n      var result = processValue(value);\n      insertContent(editor, result.content, result.details);\n    };\n\n    var each$4 = Tools.each;\n    var map = Tools.map, inArray = Tools.inArray;\n    var EditorCommands = function () {\n      function EditorCommands(editor) {\n        this.commands = {\n          state: {},\n          exec: {},\n          value: {}\n        };\n        this.editor = editor;\n        this.setupCommands(editor);\n      }\n      EditorCommands.prototype.execCommand = function (command, ui, value, args) {\n        var func, state = false;\n        var self = this;\n        if (self.editor.removed) {\n          return;\n        }\n        if (command.toLowerCase() !== 'mcefocus') {\n          if (!/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint)$/.test(command) && (!args || !args.skip_focus)) {\n            self.editor.focus();\n          } else {\n            restore(self.editor);\n          }\n        }\n        args = self.editor.fire('BeforeExecCommand', {\n          command: command,\n          ui: ui,\n          value: value\n        });\n        if (args.isDefaultPrevented()) {\n          return false;\n        }\n        var customCommand = command.toLowerCase();\n        if (func = self.commands.exec[customCommand]) {\n          func(customCommand, ui, value);\n          self.editor.fire('ExecCommand', {\n            command: command,\n            ui: ui,\n            value: value\n          });\n          return true;\n        }\n        each$4(this.editor.plugins, function (p) {\n          if (p.execCommand && p.execCommand(command, ui, value)) {\n            self.editor.fire('ExecCommand', {\n              command: command,\n              ui: ui,\n              value: value\n            });\n            state = true;\n            return false;\n          }\n        });\n        if (state) {\n          return state;\n        }\n        if (self.editor.theme && self.editor.theme.execCommand && self.editor.theme.execCommand(command, ui, value)) {\n          self.editor.fire('ExecCommand', {\n            command: command,\n            ui: ui,\n            value: value\n          });\n          return true;\n        }\n        try {\n          state = self.editor.getDoc().execCommand(command, ui, value);\n        } catch (ex) {\n        }\n        if (state) {\n          self.editor.fire('ExecCommand', {\n            command: command,\n            ui: ui,\n            value: value\n          });\n          return true;\n        }\n        return false;\n      };\n      EditorCommands.prototype.queryCommandState = function (command) {\n        var func;\n        if (this.editor.quirks.isHidden() || this.editor.removed) {\n          return;\n        }\n        command = command.toLowerCase();\n        if (func = this.commands.state[command]) {\n          return func(command);\n        }\n        try {\n          return this.editor.getDoc().queryCommandState(command);\n        } catch (ex) {\n        }\n        return false;\n      };\n      EditorCommands.prototype.queryCommandValue = function (command) {\n        var func;\n        if (this.editor.quirks.isHidden() || this.editor.removed) {\n          return;\n        }\n        command = command.toLowerCase();\n        if (func = this.commands.value[command]) {\n          return func(command);\n        }\n        try {\n          return this.editor.getDoc().queryCommandValue(command);\n        } catch (ex) {\n        }\n      };\n      EditorCommands.prototype.addCommands = function (commandList, type) {\n        if (type === void 0) {\n          type = 'exec';\n        }\n        var self = this;\n        each$4(commandList, function (callback, command) {\n          each$4(command.toLowerCase().split(','), function (command) {\n            self.commands[type][command] = callback;\n          });\n        });\n      };\n      EditorCommands.prototype.addCommand = function (command, callback, scope) {\n        var _this = this;\n        command = command.toLowerCase();\n        this.commands.exec[command] = function (command, ui, value, args) {\n          return callback.call(scope || _this.editor, ui, value, args);\n        };\n      };\n      EditorCommands.prototype.queryCommandSupported = function (command) {\n        command = command.toLowerCase();\n        if (this.commands.exec[command]) {\n          return true;\n        }\n        try {\n          return this.editor.getDoc().queryCommandSupported(command);\n        } catch (ex) {\n        }\n        return false;\n      };\n      EditorCommands.prototype.addQueryStateHandler = function (command, callback, scope) {\n        var _this = this;\n        command = command.toLowerCase();\n        this.commands.state[command] = function () {\n          return callback.call(scope || _this.editor);\n        };\n      };\n      EditorCommands.prototype.addQueryValueHandler = function (command, callback, scope) {\n        var _this = this;\n        command = command.toLowerCase();\n        this.commands.value[command] = function () {\n          return callback.call(scope || _this.editor);\n        };\n      };\n      EditorCommands.prototype.hasCustomCommand = function (command) {\n        command = command.toLowerCase();\n        return !!this.commands.exec[command];\n      };\n      EditorCommands.prototype.execNativeCommand = function (command, ui, value) {\n        if (ui === undefined) {\n          ui = false;\n        }\n        if (value === undefined) {\n          value = null;\n        }\n        return this.editor.getDoc().execCommand(command, ui, value);\n      };\n      EditorCommands.prototype.isFormatMatch = function (name) {\n        return this.editor.formatter.match(name);\n      };\n      EditorCommands.prototype.toggleFormat = function (name, value) {\n        this.editor.formatter.toggle(name, value);\n        this.editor.nodeChanged();\n      };\n      EditorCommands.prototype.storeSelection = function (type) {\n        this.selectionBookmark = this.editor.selection.getBookmark(type);\n      };\n      EditorCommands.prototype.restoreSelection = function () {\n        this.editor.selection.moveToBookmark(this.selectionBookmark);\n      };\n      EditorCommands.prototype.setupCommands = function (editor) {\n        var self = this;\n        this.addCommands({\n          'mceResetDesignMode,mceBeginUndoLevel': noop,\n          'mceEndUndoLevel,mceAddUndoLevel': function () {\n            editor.undoManager.add();\n          },\n          'mceFocus': function (_command, _ui, value) {\n            focus(editor, value);\n          },\n          'Cut,Copy,Paste': function (command) {\n            var doc = editor.getDoc();\n            var failed;\n            try {\n              self.execNativeCommand(command);\n            } catch (ex) {\n              failed = true;\n            }\n            if (command === 'paste' && !doc.queryCommandEnabled(command)) {\n              failed = true;\n            }\n            if (failed || !doc.queryCommandSupported(command)) {\n              var msg = editor.translate('Your browser doesn\\'t support direct access to the clipboard. ' + 'Please use the Ctrl+X/C/V keyboard shortcuts instead.');\n              if (Env.mac) {\n                msg = msg.replace(/Ctrl\\+/g, '\\u2318+');\n              }\n              editor.notificationManager.open({\n                text: msg,\n                type: 'error'\n              });\n            }\n          },\n          'unlink': function () {\n            if (editor.selection.isCollapsed()) {\n              var elm = editor.dom.getParent(editor.selection.getStart(), 'a');\n              if (elm) {\n                editor.dom.remove(elm, true);\n              }\n              return;\n            }\n            editor.formatter.remove('link');\n          },\n          'JustifyLeft,JustifyCenter,JustifyRight,JustifyFull,JustifyNone': function (command) {\n            var align = command.substring(7);\n            if (align === 'full') {\n              align = 'justify';\n            }\n            each$4('left,center,right,justify'.split(','), function (name) {\n              if (align !== name) {\n                editor.formatter.remove('align' + name);\n              }\n            });\n            if (align !== 'none') {\n              self.toggleFormat('align' + align);\n            }\n          },\n          'InsertUnorderedList,InsertOrderedList': function (command) {\n            var listParent;\n            self.execNativeCommand(command);\n            var listElm = editor.dom.getParent(editor.selection.getNode(), 'ol,ul');\n            if (listElm) {\n              listParent = listElm.parentNode;\n              if (/^(H[1-6]|P|ADDRESS|PRE)$/.test(listParent.nodeName)) {\n                self.storeSelection();\n                editor.dom.split(listParent, listElm);\n                self.restoreSelection();\n              }\n            }\n          },\n          'Bold,Italic,Underline,Strikethrough,Superscript,Subscript': function (command) {\n            self.toggleFormat(command);\n          },\n          'ForeColor,HiliteColor': function (command, ui, value) {\n            self.toggleFormat(command, { value: value });\n          },\n          'FontName': function (command, ui, value) {\n            fontNameAction(editor, value);\n          },\n          'FontSize': function (command, ui, value) {\n            fontSizeAction(editor, value);\n          },\n          'LineHeight': function (command, ui, value) {\n            lineHeightAction(editor, value);\n          },\n          'Lang': function (command, ui, lang) {\n            self.toggleFormat(command, {\n              value: lang.code,\n              customValue: lang.customCode\n            });\n          },\n          'RemoveFormat': function (command) {\n            editor.formatter.remove(command);\n          },\n          'mceBlockQuote': function () {\n            self.toggleFormat('blockquote');\n          },\n          'FormatBlock': function (command, ui, value) {\n            return self.toggleFormat(value || 'p');\n          },\n          'mceCleanup': function () {\n            var bookmark = editor.selection.getBookmark();\n            editor.setContent(editor.getContent());\n            editor.selection.moveToBookmark(bookmark);\n          },\n          'mceRemoveNode': function (command, ui, value) {\n            var node = value || editor.selection.getNode();\n            if (node !== editor.getBody()) {\n              self.storeSelection();\n              editor.dom.remove(node, true);\n              self.restoreSelection();\n            }\n          },\n          'mceSelectNodeDepth': function (command, ui, value) {\n            var counter = 0;\n            editor.dom.getParent(editor.selection.getNode(), function (node) {\n              if (node.nodeType === 1 && counter++ === value) {\n                editor.selection.select(node);\n                return false;\n              }\n            }, editor.getBody());\n          },\n          'mceSelectNode': function (command, ui, value) {\n            editor.selection.select(value);\n          },\n          'mceInsertContent': function (command, ui, value) {\n            insertAtCaret(editor, value);\n          },\n          'mceInsertRawHTML': function (command, ui, value) {\n            editor.selection.setContent('tiny_mce_marker');\n            var content = editor.getContent();\n            editor.setContent(content.replace(/tiny_mce_marker/g, function () {\n              return value;\n            }));\n          },\n          'mceInsertNewLine': function (command, ui, value) {\n            insert(editor, value);\n          },\n          'mceToggleFormat': function (command, ui, value) {\n            self.toggleFormat(value);\n          },\n          'mceSetContent': function (command, ui, value) {\n            editor.setContent(value);\n          },\n          'Indent,Outdent': function (command) {\n            handle(editor, command);\n          },\n          'mceRepaint': noop,\n          'InsertHorizontalRule': function () {\n            editor.execCommand('mceInsertContent', false, '<hr />');\n          },\n          'mceToggleVisualAid': function () {\n            editor.hasVisual = !editor.hasVisual;\n            editor.addVisual();\n          },\n          'mceReplaceContent': function (command, ui, value) {\n            editor.execCommand('mceInsertContent', false, value.replace(/\\{\\$selection\\}/g, editor.selection.getContent({ format: 'text' })));\n          },\n          'mceInsertLink': function (command, ui, value) {\n            if (typeof value === 'string') {\n              value = { href: value };\n            }\n            var anchor = editor.dom.getParent(editor.selection.getNode(), 'a');\n            value.href = value.href.replace(/ /g, '%20');\n            if (!anchor || !value.href) {\n              editor.formatter.remove('link');\n            }\n            if (value.href) {\n              editor.formatter.apply('link', value, anchor);\n            }\n          },\n          'selectAll': function () {\n            var editingHost = editor.dom.getParent(editor.selection.getStart(), isContentEditableTrue$4);\n            if (editingHost) {\n              var rng = editor.dom.createRng();\n              rng.selectNodeContents(editingHost);\n              editor.selection.setRng(rng);\n            }\n          },\n          'mceNewDocument': function () {\n            editor.setContent('');\n          },\n          'InsertLineBreak': function (command, ui, value) {\n            insert$1(editor, value);\n            return true;\n          }\n        });\n        var alignStates = function (name) {\n          return function () {\n            var selection = editor.selection;\n            var nodes = selection.isCollapsed() ? [editor.dom.getParent(selection.getNode(), editor.dom.isBlock)] : selection.getSelectedBlocks();\n            var matches = map(nodes, function (node) {\n              return !!editor.formatter.matchNode(node, name);\n            });\n            return inArray(matches, true) !== -1;\n          };\n        };\n        self.addCommands({\n          'JustifyLeft': alignStates('alignleft'),\n          'JustifyCenter': alignStates('aligncenter'),\n          'JustifyRight': alignStates('alignright'),\n          'JustifyFull': alignStates('alignjustify'),\n          'Bold,Italic,Underline,Strikethrough,Superscript,Subscript': function (command) {\n            return self.isFormatMatch(command);\n          },\n          'mceBlockQuote': function () {\n            return self.isFormatMatch('blockquote');\n          },\n          'Outdent': function () {\n            return canOutdent(editor);\n          },\n          'InsertUnorderedList,InsertOrderedList': function (command) {\n            var list = editor.dom.getParent(editor.selection.getNode(), 'ul,ol');\n            return list && (command === 'insertunorderedlist' && list.tagName === 'UL' || command === 'insertorderedlist' && list.tagName === 'OL');\n          }\n        }, 'state');\n        self.addCommands({\n          Undo: function () {\n            editor.undoManager.undo();\n          },\n          Redo: function () {\n            editor.undoManager.redo();\n          }\n        });\n        self.addQueryValueHandler('FontName', function () {\n          return fontNameQuery(editor);\n        }, this);\n        self.addQueryValueHandler('FontSize', function () {\n          return fontSizeQuery(editor);\n        }, this);\n        self.addQueryValueHandler('LineHeight', function () {\n          return lineHeightQuery(editor);\n        }, this);\n      };\n      return EditorCommands;\n    }();\n\n    var internalContentEditableAttr = 'data-mce-contenteditable';\n    var toggleClass = function (elm, cls, state) {\n      if (has(elm, cls) && state === false) {\n        remove$3(elm, cls);\n      } else if (state) {\n        add$1(elm, cls);\n      }\n    };\n    var setEditorCommandState = function (editor, cmd, state) {\n      try {\n        editor.getDoc().execCommand(cmd, false, String(state));\n      } catch (ex) {\n      }\n    };\n    var setContentEditable = function (elm, state) {\n      elm.dom.contentEditable = state ? 'true' : 'false';\n    };\n    var switchOffContentEditableTrue = function (elm) {\n      each$k(descendants(elm, '*[contenteditable=\"true\"]'), function (elm) {\n        set$1(elm, internalContentEditableAttr, 'true');\n        setContentEditable(elm, false);\n      });\n    };\n    var switchOnContentEditableTrue = function (elm) {\n      each$k(descendants(elm, '*[' + internalContentEditableAttr + '=\"true\"]'), function (elm) {\n        remove$6(elm, internalContentEditableAttr);\n        setContentEditable(elm, true);\n      });\n    };\n    var removeFakeSelection = function (editor) {\n      Optional.from(editor.selection.getNode()).each(function (elm) {\n        elm.removeAttribute('data-mce-selected');\n      });\n    };\n    var restoreFakeSelection = function (editor) {\n      editor.selection.setRng(editor.selection.getRng());\n    };\n    var toggleReadOnly = function (editor, state) {\n      var body = SugarElement.fromDom(editor.getBody());\n      toggleClass(body, 'mce-content-readonly', state);\n      if (state) {\n        editor.selection.controlSelection.hideResizeRect();\n        editor._selectionOverrides.hideFakeCaret();\n        removeFakeSelection(editor);\n        editor.readonly = true;\n        setContentEditable(body, false);\n        switchOffContentEditableTrue(body);\n      } else {\n        editor.readonly = false;\n        setContentEditable(body, true);\n        switchOnContentEditableTrue(body);\n        setEditorCommandState(editor, 'StyleWithCSS', false);\n        setEditorCommandState(editor, 'enableInlineTableEditing', false);\n        setEditorCommandState(editor, 'enableObjectResizing', false);\n        if (hasEditorOrUiFocus(editor)) {\n          editor.focus();\n        }\n        restoreFakeSelection(editor);\n        editor.nodeChanged();\n      }\n    };\n    var isReadOnly = function (editor) {\n      return editor.readonly;\n    };\n    var registerFilters = function (editor) {\n      editor.parser.addAttributeFilter('contenteditable', function (nodes) {\n        if (isReadOnly(editor)) {\n          each$k(nodes, function (node) {\n            node.attr(internalContentEditableAttr, node.attr('contenteditable'));\n            node.attr('contenteditable', 'false');\n          });\n        }\n      });\n      editor.serializer.addAttributeFilter(internalContentEditableAttr, function (nodes) {\n        if (isReadOnly(editor)) {\n          each$k(nodes, function (node) {\n            node.attr('contenteditable', node.attr(internalContentEditableAttr));\n          });\n        }\n      });\n      editor.serializer.addTempAttr(internalContentEditableAttr);\n    };\n    var registerReadOnlyContentFilters = function (editor) {\n      if (editor.serializer) {\n        registerFilters(editor);\n      } else {\n        editor.on('PreInit', function () {\n          registerFilters(editor);\n        });\n      }\n    };\n    var isClickEvent = function (e) {\n      return e.type === 'click';\n    };\n    var getAnchorHrefOpt = function (editor, elm) {\n      var isRoot = function (elm) {\n        return eq(elm, SugarElement.fromDom(editor.getBody()));\n      };\n      return closest$2(elm, 'a', isRoot).bind(function (a) {\n        return getOpt(a, 'href');\n      });\n    };\n    var processReadonlyEvents = function (editor, e) {\n      if (isClickEvent(e) && !VK.metaKeyPressed(e)) {\n        var elm = SugarElement.fromDom(e.target);\n        getAnchorHrefOpt(editor, elm).each(function (href) {\n          e.preventDefault();\n          if (/^#/.test(href)) {\n            var targetEl = editor.dom.select(href + ',[name=\"' + removeLeading(href, '#') + '\"]');\n            if (targetEl.length) {\n              editor.selection.scrollIntoView(targetEl[0], true);\n            }\n          } else {\n            window.open(href, '_blank', 'rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes');\n          }\n        });\n      }\n    };\n    var registerReadOnlySelectionBlockers = function (editor) {\n      editor.on('ShowCaret', function (e) {\n        if (isReadOnly(editor)) {\n          e.preventDefault();\n        }\n      });\n      editor.on('ObjectSelected', function (e) {\n        if (isReadOnly(editor)) {\n          e.preventDefault();\n        }\n      });\n    };\n\n    var nativeEvents = Tools.makeMap('focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange ' + 'mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover ' + 'draggesture dragdrop drop drag submit ' + 'compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel', ' ');\n    var EventDispatcher = function () {\n      function EventDispatcher(settings) {\n        this.bindings = {};\n        this.settings = settings || {};\n        this.scope = this.settings.scope || this;\n        this.toggleEvent = this.settings.toggleEvent || never;\n      }\n      EventDispatcher.isNative = function (name) {\n        return !!nativeEvents[name.toLowerCase()];\n      };\n      EventDispatcher.prototype.fire = function (name, args) {\n        var lcName = name.toLowerCase();\n        var event = normalize$3(lcName, args || {}, this.scope);\n        if (this.settings.beforeFire) {\n          this.settings.beforeFire(event);\n        }\n        var handlers = this.bindings[lcName];\n        if (handlers) {\n          for (var i = 0, l = handlers.length; i < l; i++) {\n            var callback = handlers[i];\n            if (callback.removed) {\n              continue;\n            }\n            if (callback.once) {\n              this.off(lcName, callback.func);\n            }\n            if (event.isImmediatePropagationStopped()) {\n              return event;\n            }\n            if (callback.func.call(this.scope, event) === false) {\n              event.preventDefault();\n              return event;\n            }\n          }\n        }\n        return event;\n      };\n      EventDispatcher.prototype.on = function (name, callback, prepend, extra) {\n        if (callback === false) {\n          callback = never;\n        }\n        if (callback) {\n          var wrappedCallback = {\n            func: callback,\n            removed: false\n          };\n          if (extra) {\n            Tools.extend(wrappedCallback, extra);\n          }\n          var names = name.toLowerCase().split(' ');\n          var i = names.length;\n          while (i--) {\n            var currentName = names[i];\n            var handlers = this.bindings[currentName];\n            if (!handlers) {\n              handlers = [];\n              this.toggleEvent(currentName, true);\n            }\n            if (prepend) {\n              handlers = __spreadArray([wrappedCallback], handlers, true);\n            } else {\n              handlers = __spreadArray(__spreadArray([], handlers, true), [wrappedCallback], false);\n            }\n            this.bindings[currentName] = handlers;\n          }\n        }\n        return this;\n      };\n      EventDispatcher.prototype.off = function (name, callback) {\n        var _this = this;\n        if (name) {\n          var names = name.toLowerCase().split(' ');\n          var i = names.length;\n          while (i--) {\n            var currentName = names[i];\n            var handlers = this.bindings[currentName];\n            if (!currentName) {\n              each$j(this.bindings, function (_value, bindingName) {\n                _this.toggleEvent(bindingName, false);\n                delete _this.bindings[bindingName];\n              });\n              return this;\n            }\n            if (handlers) {\n              if (!callback) {\n                handlers.length = 0;\n              } else {\n                var filteredHandlers = partition(handlers, function (handler) {\n                  return handler.func === callback;\n                });\n                handlers = filteredHandlers.fail;\n                this.bindings[currentName] = handlers;\n                each$k(filteredHandlers.pass, function (handler) {\n                  handler.removed = true;\n                });\n              }\n              if (!handlers.length) {\n                this.toggleEvent(name, false);\n                delete this.bindings[currentName];\n              }\n            }\n          }\n        } else {\n          each$j(this.bindings, function (_value, name) {\n            _this.toggleEvent(name, false);\n          });\n          this.bindings = {};\n        }\n        return this;\n      };\n      EventDispatcher.prototype.once = function (name, callback, prepend) {\n        return this.on(name, callback, prepend, { once: true });\n      };\n      EventDispatcher.prototype.has = function (name) {\n        name = name.toLowerCase();\n        return !(!this.bindings[name] || this.bindings[name].length === 0);\n      };\n      return EventDispatcher;\n    }();\n\n    var getEventDispatcher = function (obj) {\n      if (!obj._eventDispatcher) {\n        obj._eventDispatcher = new EventDispatcher({\n          scope: obj,\n          toggleEvent: function (name, state) {\n            if (EventDispatcher.isNative(name) && obj.toggleNativeEvent) {\n              obj.toggleNativeEvent(name, state);\n            }\n          }\n        });\n      }\n      return obj._eventDispatcher;\n    };\n    var Observable = {\n      fire: function (name, args, bubble) {\n        var self = this;\n        if (self.removed && name !== 'remove' && name !== 'detach') {\n          return args;\n        }\n        var dispatcherArgs = getEventDispatcher(self).fire(name, args);\n        if (bubble !== false && self.parent) {\n          var parent_1 = self.parent();\n          while (parent_1 && !dispatcherArgs.isPropagationStopped()) {\n            parent_1.fire(name, dispatcherArgs, false);\n            parent_1 = parent_1.parent();\n          }\n        }\n        return dispatcherArgs;\n      },\n      on: function (name, callback, prepend) {\n        return getEventDispatcher(this).on(name, callback, prepend);\n      },\n      off: function (name, callback) {\n        return getEventDispatcher(this).off(name, callback);\n      },\n      once: function (name, callback) {\n        return getEventDispatcher(this).once(name, callback);\n      },\n      hasEventListeners: function (name) {\n        return getEventDispatcher(this).has(name);\n      }\n    };\n\n    var DOM$2 = DOMUtils.DOM;\n    var customEventRootDelegates;\n    var getEventTarget = function (editor, eventName) {\n      if (eventName === 'selectionchange') {\n        return editor.getDoc();\n      }\n      if (!editor.inline && /^mouse|touch|click|contextmenu|drop|dragover|dragend/.test(eventName)) {\n        return editor.getDoc().documentElement;\n      }\n      var eventRoot = getEventRoot(editor);\n      if (eventRoot) {\n        if (!editor.eventRoot) {\n          editor.eventRoot = DOM$2.select(eventRoot)[0];\n        }\n        return editor.eventRoot;\n      }\n      return editor.getBody();\n    };\n    var isListening = function (editor) {\n      return !editor.hidden && !isReadOnly(editor);\n    };\n    var fireEvent = function (editor, eventName, e) {\n      if (isListening(editor)) {\n        editor.fire(eventName, e);\n      } else if (isReadOnly(editor)) {\n        processReadonlyEvents(editor, e);\n      }\n    };\n    var bindEventDelegate = function (editor, eventName) {\n      var delegate;\n      if (!editor.delegates) {\n        editor.delegates = {};\n      }\n      if (editor.delegates[eventName] || editor.removed) {\n        return;\n      }\n      var eventRootElm = getEventTarget(editor, eventName);\n      if (getEventRoot(editor)) {\n        if (!customEventRootDelegates) {\n          customEventRootDelegates = {};\n          editor.editorManager.on('removeEditor', function () {\n            if (!editor.editorManager.activeEditor) {\n              if (customEventRootDelegates) {\n                each$j(customEventRootDelegates, function (_value, name) {\n                  editor.dom.unbind(getEventTarget(editor, name));\n                });\n                customEventRootDelegates = null;\n              }\n            }\n          });\n        }\n        if (customEventRootDelegates[eventName]) {\n          return;\n        }\n        delegate = function (e) {\n          var target = e.target;\n          var editors = editor.editorManager.get();\n          var i = editors.length;\n          while (i--) {\n            var body = editors[i].getBody();\n            if (body === target || DOM$2.isChildOf(target, body)) {\n              fireEvent(editors[i], eventName, e);\n            }\n          }\n        };\n        customEventRootDelegates[eventName] = delegate;\n        DOM$2.bind(eventRootElm, eventName, delegate);\n      } else {\n        delegate = function (e) {\n          fireEvent(editor, eventName, e);\n        };\n        DOM$2.bind(eventRootElm, eventName, delegate);\n        editor.delegates[eventName] = delegate;\n      }\n    };\n    var EditorObservable = __assign(__assign({}, Observable), {\n      bindPendingEventDelegates: function () {\n        var self = this;\n        Tools.each(self._pendingNativeEvents, function (name) {\n          bindEventDelegate(self, name);\n        });\n      },\n      toggleNativeEvent: function (name, state) {\n        var self = this;\n        if (name === 'focus' || name === 'blur') {\n          return;\n        }\n        if (self.removed) {\n          return;\n        }\n        if (state) {\n          if (self.initialized) {\n            bindEventDelegate(self, name);\n          } else {\n            if (!self._pendingNativeEvents) {\n              self._pendingNativeEvents = [name];\n            } else {\n              self._pendingNativeEvents.push(name);\n            }\n          }\n        } else if (self.initialized) {\n          self.dom.unbind(getEventTarget(self, name), name, self.delegates[name]);\n          delete self.delegates[name];\n        }\n      },\n      unbindAllNativeEvents: function () {\n        var self = this;\n        var body = self.getBody();\n        var dom = self.dom;\n        if (self.delegates) {\n          each$j(self.delegates, function (value, name) {\n            self.dom.unbind(getEventTarget(self, name), name, value);\n          });\n          delete self.delegates;\n        }\n        if (!self.inline && body && dom) {\n          body.onload = null;\n          dom.unbind(self.getWin());\n          dom.unbind(self.getDoc());\n        }\n        if (dom) {\n          dom.unbind(body);\n          dom.unbind(self.getContainer());\n        }\n      }\n    });\n\n    var defaultModes = [\n      'design',\n      'readonly'\n    ];\n    var switchToMode = function (editor, activeMode, availableModes, mode) {\n      var oldMode = availableModes[activeMode.get()];\n      var newMode = availableModes[mode];\n      try {\n        newMode.activate();\n      } catch (e) {\n        console.error('problem while activating editor mode ' + mode + ':', e);\n        return;\n      }\n      oldMode.deactivate();\n      if (oldMode.editorReadOnly !== newMode.editorReadOnly) {\n        toggleReadOnly(editor, newMode.editorReadOnly);\n      }\n      activeMode.set(mode);\n      fireSwitchMode(editor, mode);\n    };\n    var setMode = function (editor, availableModes, activeMode, mode) {\n      if (mode === activeMode.get()) {\n        return;\n      } else if (!has$2(availableModes, mode)) {\n        throw new Error('Editor mode \\'' + mode + '\\' is invalid');\n      }\n      if (editor.initialized) {\n        switchToMode(editor, activeMode, availableModes, mode);\n      } else {\n        editor.on('init', function () {\n          return switchToMode(editor, activeMode, availableModes, mode);\n        });\n      }\n    };\n    var registerMode = function (availableModes, mode, api) {\n      var _a;\n      if (contains$3(defaultModes, mode)) {\n        throw new Error('Cannot override default mode ' + mode);\n      }\n      return __assign(__assign({}, availableModes), (_a = {}, _a[mode] = __assign(__assign({}, api), {\n        deactivate: function () {\n          try {\n            api.deactivate();\n          } catch (e) {\n            console.error('problem while deactivating editor mode ' + mode + ':', e);\n          }\n        }\n      }), _a));\n    };\n\n    var create$4 = function (editor) {\n      var activeMode = Cell('design');\n      var availableModes = Cell({\n        design: {\n          activate: noop,\n          deactivate: noop,\n          editorReadOnly: false\n        },\n        readonly: {\n          activate: noop,\n          deactivate: noop,\n          editorReadOnly: true\n        }\n      });\n      registerReadOnlyContentFilters(editor);\n      registerReadOnlySelectionBlockers(editor);\n      return {\n        isReadOnly: function () {\n          return isReadOnly(editor);\n        },\n        set: function (mode) {\n          return setMode(editor, availableModes.get(), activeMode, mode);\n        },\n        get: function () {\n          return activeMode.get();\n        },\n        register: function (mode, api) {\n          availableModes.set(registerMode(availableModes.get(), mode, api));\n        }\n      };\n    };\n\n    var each$3 = Tools.each, explode$1 = Tools.explode;\n    var keyCodeLookup = {\n      f1: 112,\n      f2: 113,\n      f3: 114,\n      f4: 115,\n      f5: 116,\n      f6: 117,\n      f7: 118,\n      f8: 119,\n      f9: 120,\n      f10: 121,\n      f11: 122,\n      f12: 123\n    };\n    var modifierNames = Tools.makeMap('alt,ctrl,shift,meta,access');\n    var parseShortcut = function (pattern) {\n      var key;\n      var shortcut = {};\n      each$3(explode$1(pattern.toLowerCase(), '+'), function (value) {\n        if (value in modifierNames) {\n          shortcut[value] = true;\n        } else {\n          if (/^[0-9]{2,}$/.test(value)) {\n            shortcut.keyCode = parseInt(value, 10);\n          } else {\n            shortcut.charCode = value.charCodeAt(0);\n            shortcut.keyCode = keyCodeLookup[value] || value.toUpperCase().charCodeAt(0);\n          }\n        }\n      });\n      var id = [shortcut.keyCode];\n      for (key in modifierNames) {\n        if (shortcut[key]) {\n          id.push(key);\n        } else {\n          shortcut[key] = false;\n        }\n      }\n      shortcut.id = id.join(',');\n      if (shortcut.access) {\n        shortcut.alt = true;\n        if (Env.mac) {\n          shortcut.ctrl = true;\n        } else {\n          shortcut.shift = true;\n        }\n      }\n      if (shortcut.meta) {\n        if (Env.mac) {\n          shortcut.meta = true;\n        } else {\n          shortcut.ctrl = true;\n          shortcut.meta = false;\n        }\n      }\n      return shortcut;\n    };\n    var Shortcuts = function () {\n      function Shortcuts(editor) {\n        this.shortcuts = {};\n        this.pendingPatterns = [];\n        this.editor = editor;\n        var self = this;\n        editor.on('keyup keypress keydown', function (e) {\n          if ((self.hasModifier(e) || self.isFunctionKey(e)) && !e.isDefaultPrevented()) {\n            each$3(self.shortcuts, function (shortcut) {\n              if (self.matchShortcut(e, shortcut)) {\n                self.pendingPatterns = shortcut.subpatterns.slice(0);\n                if (e.type === 'keydown') {\n                  self.executeShortcutAction(shortcut);\n                }\n                return true;\n              }\n            });\n            if (self.matchShortcut(e, self.pendingPatterns[0])) {\n              if (self.pendingPatterns.length === 1) {\n                if (e.type === 'keydown') {\n                  self.executeShortcutAction(self.pendingPatterns[0]);\n                }\n              }\n              self.pendingPatterns.shift();\n            }\n          }\n        });\n      }\n      Shortcuts.prototype.add = function (pattern, desc, cmdFunc, scope) {\n        var self = this;\n        var func = self.normalizeCommandFunc(cmdFunc);\n        each$3(explode$1(Tools.trim(pattern)), function (pattern) {\n          var shortcut = self.createShortcut(pattern, desc, func, scope);\n          self.shortcuts[shortcut.id] = shortcut;\n        });\n        return true;\n      };\n      Shortcuts.prototype.remove = function (pattern) {\n        var shortcut = this.createShortcut(pattern);\n        if (this.shortcuts[shortcut.id]) {\n          delete this.shortcuts[shortcut.id];\n          return true;\n        }\n        return false;\n      };\n      Shortcuts.prototype.normalizeCommandFunc = function (cmdFunc) {\n        var self = this;\n        var cmd = cmdFunc;\n        if (typeof cmd === 'string') {\n          return function () {\n            self.editor.execCommand(cmd, false, null);\n          };\n        } else if (Tools.isArray(cmd)) {\n          return function () {\n            self.editor.execCommand(cmd[0], cmd[1], cmd[2]);\n          };\n        } else {\n          return cmd;\n        }\n      };\n      Shortcuts.prototype.createShortcut = function (pattern, desc, cmdFunc, scope) {\n        var shortcuts = Tools.map(explode$1(pattern, '>'), parseShortcut);\n        shortcuts[shortcuts.length - 1] = Tools.extend(shortcuts[shortcuts.length - 1], {\n          func: cmdFunc,\n          scope: scope || this.editor\n        });\n        return Tools.extend(shortcuts[0], {\n          desc: this.editor.translate(desc),\n          subpatterns: shortcuts.slice(1)\n        });\n      };\n      Shortcuts.prototype.hasModifier = function (e) {\n        return e.altKey || e.ctrlKey || e.metaKey;\n      };\n      Shortcuts.prototype.isFunctionKey = function (e) {\n        return e.type === 'keydown' && e.keyCode >= 112 && e.keyCode <= 123;\n      };\n      Shortcuts.prototype.matchShortcut = function (e, shortcut) {\n        if (!shortcut) {\n          return false;\n        }\n        if (shortcut.ctrl !== e.ctrlKey || shortcut.meta !== e.metaKey) {\n          return false;\n        }\n        if (shortcut.alt !== e.altKey || shortcut.shift !== e.shiftKey) {\n          return false;\n        }\n        if (e.keyCode === shortcut.keyCode || e.charCode && e.charCode === shortcut.charCode) {\n          e.preventDefault();\n          return true;\n        }\n        return false;\n      };\n      Shortcuts.prototype.executeShortcutAction = function (shortcut) {\n        return shortcut.func ? shortcut.func.call(shortcut.scope) : null;\n      };\n      return Shortcuts;\n    }();\n\n    var create$3 = function () {\n      var buttons = {};\n      var menuItems = {};\n      var popups = {};\n      var icons = {};\n      var contextMenus = {};\n      var contextToolbars = {};\n      var sidebars = {};\n      var add = function (collection, type) {\n        return function (name, spec) {\n          return collection[name.toLowerCase()] = __assign(__assign({}, spec), { type: type });\n        };\n      };\n      var addIcon = function (name, svgData) {\n        return icons[name.toLowerCase()] = svgData;\n      };\n      return {\n        addButton: add(buttons, 'button'),\n        addGroupToolbarButton: add(buttons, 'grouptoolbarbutton'),\n        addToggleButton: add(buttons, 'togglebutton'),\n        addMenuButton: add(buttons, 'menubutton'),\n        addSplitButton: add(buttons, 'splitbutton'),\n        addMenuItem: add(menuItems, 'menuitem'),\n        addNestedMenuItem: add(menuItems, 'nestedmenuitem'),\n        addToggleMenuItem: add(menuItems, 'togglemenuitem'),\n        addAutocompleter: add(popups, 'autocompleter'),\n        addContextMenu: add(contextMenus, 'contextmenu'),\n        addContextToolbar: add(contextToolbars, 'contexttoolbar'),\n        addContextForm: add(contextToolbars, 'contextform'),\n        addSidebar: add(sidebars, 'sidebar'),\n        addIcon: addIcon,\n        getAll: function () {\n          return {\n            buttons: buttons,\n            menuItems: menuItems,\n            icons: icons,\n            popups: popups,\n            contextMenus: contextMenus,\n            contextToolbars: contextToolbars,\n            sidebars: sidebars\n          };\n        }\n      };\n    };\n\n    var registry = function () {\n      var bridge = create$3();\n      return {\n        addAutocompleter: bridge.addAutocompleter,\n        addButton: bridge.addButton,\n        addContextForm: bridge.addContextForm,\n        addContextMenu: bridge.addContextMenu,\n        addContextToolbar: bridge.addContextToolbar,\n        addIcon: bridge.addIcon,\n        addMenuButton: bridge.addMenuButton,\n        addMenuItem: bridge.addMenuItem,\n        addNestedMenuItem: bridge.addNestedMenuItem,\n        addSidebar: bridge.addSidebar,\n        addSplitButton: bridge.addSplitButton,\n        addToggleButton: bridge.addToggleButton,\n        addGroupToolbarButton: bridge.addGroupToolbarButton,\n        addToggleMenuItem: bridge.addToggleMenuItem,\n        getAll: bridge.getAll\n      };\n    };\n\n    var DOM$1 = DOMUtils.DOM;\n    var extend$3 = Tools.extend, each$2 = Tools.each;\n    var resolve = Tools.resolve;\n    var ie = Env.ie;\n    var Editor = function () {\n      function Editor(id, settings, editorManager) {\n        var _this = this;\n        this.plugins = {};\n        this.contentCSS = [];\n        this.contentStyles = [];\n        this.loadedCSS = {};\n        this.isNotDirty = false;\n        this.editorManager = editorManager;\n        this.documentBaseUrl = editorManager.documentBaseURL;\n        extend$3(this, EditorObservable);\n        this.settings = getEditorSettings(this, id, this.documentBaseUrl, editorManager.defaultSettings, settings);\n        if (this.settings.suffix) {\n          editorManager.suffix = this.settings.suffix;\n        }\n        this.suffix = editorManager.suffix;\n        if (this.settings.base_url) {\n          editorManager._setBaseUrl(this.settings.base_url);\n        }\n        this.baseUri = editorManager.baseURI;\n        if (this.settings.referrer_policy) {\n          ScriptLoader.ScriptLoader._setReferrerPolicy(this.settings.referrer_policy);\n          DOMUtils.DOM.styleSheetLoader._setReferrerPolicy(this.settings.referrer_policy);\n        }\n        AddOnManager.languageLoad = this.settings.language_load;\n        AddOnManager.baseURL = editorManager.baseURL;\n        this.id = id;\n        this.setDirty(false);\n        this.documentBaseURI = new URI(this.settings.document_base_url, { base_uri: this.baseUri });\n        this.baseURI = this.baseUri;\n        this.inline = !!this.settings.inline;\n        this.shortcuts = new Shortcuts(this);\n        this.editorCommands = new EditorCommands(this);\n        if (this.settings.cache_suffix) {\n          Env.cacheSuffix = this.settings.cache_suffix.replace(/^[\\?\\&]+/, '');\n        }\n        this.ui = {\n          registry: registry(),\n          styleSheetLoader: undefined,\n          show: noop,\n          hide: noop,\n          enable: noop,\n          disable: noop,\n          isDisabled: never\n        };\n        var self = this;\n        var modeInstance = create$4(self);\n        this.mode = modeInstance;\n        this.setMode = modeInstance.set;\n        editorManager.fire('SetupEditor', { editor: this });\n        this.execCallback('setup', this);\n        this.$ = DomQuery.overrideDefaults(function () {\n          return {\n            context: _this.inline ? _this.getBody() : _this.getDoc(),\n            element: _this.getBody()\n          };\n        });\n      }\n      Editor.prototype.render = function () {\n        render(this);\n      };\n      Editor.prototype.focus = function (skipFocus) {\n        this.execCommand('mceFocus', false, skipFocus);\n      };\n      Editor.prototype.hasFocus = function () {\n        return hasFocus(this);\n      };\n      Editor.prototype.execCallback = function (name) {\n        var x = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n          x[_i - 1] = arguments[_i];\n        }\n        var self = this;\n        var callback = self.settings[name], scope;\n        if (!callback) {\n          return;\n        }\n        if (self.callbackLookup && (scope = self.callbackLookup[name])) {\n          callback = scope.func;\n          scope = scope.scope;\n        }\n        if (typeof callback === 'string') {\n          scope = callback.replace(/\\.\\w+$/, '');\n          scope = scope ? resolve(scope) : 0;\n          callback = resolve(callback);\n          self.callbackLookup = self.callbackLookup || {};\n          self.callbackLookup[name] = {\n            func: callback,\n            scope: scope\n          };\n        }\n        return callback.apply(scope || self, x);\n      };\n      Editor.prototype.translate = function (text) {\n        return I18n.translate(text);\n      };\n      Editor.prototype.getParam = function (name, defaultVal, type) {\n        return getParam(this, name, defaultVal, type);\n      };\n      Editor.prototype.hasPlugin = function (name, loaded) {\n        var hasPlugin = contains$3(getPlugins(this).split(/[ ,]/), name);\n        if (hasPlugin) {\n          return loaded ? PluginManager.get(name) !== undefined : true;\n        } else {\n          return false;\n        }\n      };\n      Editor.prototype.nodeChanged = function (args) {\n        this._nodeChangeDispatcher.nodeChanged(args);\n      };\n      Editor.prototype.addCommand = function (name, callback, scope) {\n        this.editorCommands.addCommand(name, callback, scope);\n      };\n      Editor.prototype.addQueryStateHandler = function (name, callback, scope) {\n        this.editorCommands.addQueryStateHandler(name, callback, scope);\n      };\n      Editor.prototype.addQueryValueHandler = function (name, callback, scope) {\n        this.editorCommands.addQueryValueHandler(name, callback, scope);\n      };\n      Editor.prototype.addShortcut = function (pattern, desc, cmdFunc, scope) {\n        this.shortcuts.add(pattern, desc, cmdFunc, scope);\n      };\n      Editor.prototype.execCommand = function (cmd, ui, value, args) {\n        return this.editorCommands.execCommand(cmd, ui, value, args);\n      };\n      Editor.prototype.queryCommandState = function (cmd) {\n        return this.editorCommands.queryCommandState(cmd);\n      };\n      Editor.prototype.queryCommandValue = function (cmd) {\n        return this.editorCommands.queryCommandValue(cmd);\n      };\n      Editor.prototype.queryCommandSupported = function (cmd) {\n        return this.editorCommands.queryCommandSupported(cmd);\n      };\n      Editor.prototype.show = function () {\n        var self = this;\n        if (self.hidden) {\n          self.hidden = false;\n          if (self.inline) {\n            self.getBody().contentEditable = 'true';\n          } else {\n            DOM$1.show(self.getContainer());\n            DOM$1.hide(self.id);\n          }\n          self.load();\n          self.fire('show');\n        }\n      };\n      Editor.prototype.hide = function () {\n        var self = this, doc = self.getDoc();\n        if (!self.hidden) {\n          if (ie && doc && !self.inline) {\n            doc.execCommand('SelectAll');\n          }\n          self.save();\n          if (self.inline) {\n            self.getBody().contentEditable = 'false';\n            if (self === self.editorManager.focusedEditor) {\n              self.editorManager.focusedEditor = null;\n            }\n          } else {\n            DOM$1.hide(self.getContainer());\n            DOM$1.setStyle(self.id, 'display', self.orgDisplay);\n          }\n          self.hidden = true;\n          self.fire('hide');\n        }\n      };\n      Editor.prototype.isHidden = function () {\n        return !!this.hidden;\n      };\n      Editor.prototype.setProgressState = function (state, time) {\n        this.fire('ProgressState', {\n          state: state,\n          time: time\n        });\n      };\n      Editor.prototype.load = function (args) {\n        var self = this;\n        var elm = self.getElement(), html;\n        if (self.removed) {\n          return '';\n        }\n        if (elm) {\n          args = args || {};\n          args.load = true;\n          var value = isTextareaOrInput(elm) ? elm.value : elm.innerHTML;\n          html = self.setContent(value, args);\n          args.element = elm;\n          if (!args.no_events) {\n            self.fire('LoadContent', args);\n          }\n          args.element = elm = null;\n          return html;\n        }\n      };\n      Editor.prototype.save = function (args) {\n        var self = this;\n        var elm = self.getElement(), html, form;\n        if (!elm || !self.initialized || self.removed) {\n          return;\n        }\n        args = args || {};\n        args.save = true;\n        args.element = elm;\n        html = args.content = self.getContent(args);\n        if (!args.no_events) {\n          self.fire('SaveContent', args);\n        }\n        if (args.format === 'raw') {\n          self.fire('RawSaveContent', args);\n        }\n        html = args.content;\n        if (!isTextareaOrInput(elm)) {\n          if (args.is_removing || !self.inline) {\n            elm.innerHTML = html;\n          }\n          if (form = DOM$1.getParent(self.id, 'form')) {\n            each$2(form.elements, function (elm) {\n              if (elm.name === self.id) {\n                elm.value = html;\n                return false;\n              }\n            });\n          }\n        } else {\n          elm.value = html;\n        }\n        args.element = elm = null;\n        if (args.set_dirty !== false) {\n          self.setDirty(false);\n        }\n        return html;\n      };\n      Editor.prototype.setContent = function (content, args) {\n        return setContent(this, content, args);\n      };\n      Editor.prototype.getContent = function (args) {\n        return getContent(this, args);\n      };\n      Editor.prototype.insertContent = function (content, args) {\n        if (args) {\n          content = extend$3({ content: content }, args);\n        }\n        this.execCommand('mceInsertContent', false, content);\n      };\n      Editor.prototype.resetContent = function (initialContent) {\n        if (initialContent === undefined) {\n          setContent(this, this.startContent, { format: 'raw' });\n        } else {\n          setContent(this, initialContent);\n        }\n        this.undoManager.reset();\n        this.setDirty(false);\n        this.nodeChanged();\n      };\n      Editor.prototype.isDirty = function () {\n        return !this.isNotDirty;\n      };\n      Editor.prototype.setDirty = function (state) {\n        var oldState = !this.isNotDirty;\n        this.isNotDirty = !state;\n        if (state && state !== oldState) {\n          this.fire('dirty');\n        }\n      };\n      Editor.prototype.getContainer = function () {\n        var self = this;\n        if (!self.container) {\n          self.container = DOM$1.get(self.editorContainer || self.id + '_parent');\n        }\n        return self.container;\n      };\n      Editor.prototype.getContentAreaContainer = function () {\n        return this.contentAreaContainer;\n      };\n      Editor.prototype.getElement = function () {\n        if (!this.targetElm) {\n          this.targetElm = DOM$1.get(this.id);\n        }\n        return this.targetElm;\n      };\n      Editor.prototype.getWin = function () {\n        var self = this;\n        var elm;\n        if (!self.contentWindow) {\n          elm = self.iframeElement;\n          if (elm) {\n            self.contentWindow = elm.contentWindow;\n          }\n        }\n        return self.contentWindow;\n      };\n      Editor.prototype.getDoc = function () {\n        var self = this;\n        var win;\n        if (!self.contentDocument) {\n          win = self.getWin();\n          if (win) {\n            self.contentDocument = win.document;\n          }\n        }\n        return self.contentDocument;\n      };\n      Editor.prototype.getBody = function () {\n        var doc = this.getDoc();\n        return this.bodyElement || (doc ? doc.body : null);\n      };\n      Editor.prototype.convertURL = function (url, name, elm) {\n        var self = this, settings = self.settings;\n        if (settings.urlconverter_callback) {\n          return self.execCallback('urlconverter_callback', url, elm, true, name);\n        }\n        if (!settings.convert_urls || elm && elm.nodeName === 'LINK' || url.indexOf('file:') === 0 || url.length === 0) {\n          return url;\n        }\n        if (settings.relative_urls) {\n          return self.documentBaseURI.toRelative(url);\n        }\n        url = self.documentBaseURI.toAbsolute(url, settings.remove_script_host);\n        return url;\n      };\n      Editor.prototype.addVisual = function (elm) {\n        addVisual(this, elm);\n      };\n      Editor.prototype.remove = function () {\n        remove(this);\n      };\n      Editor.prototype.destroy = function (automatic) {\n        destroy(this, automatic);\n      };\n      Editor.prototype.uploadImages = function (callback) {\n        return this.editorUpload.uploadImages(callback);\n      };\n      Editor.prototype._scanForImages = function () {\n        return this.editorUpload.scanForImages();\n      };\n      Editor.prototype.addButton = function () {\n        throw new Error('editor.addButton has been removed in tinymce 5x, use editor.ui.registry.addButton or editor.ui.registry.addToggleButton or editor.ui.registry.addSplitButton instead');\n      };\n      Editor.prototype.addSidebar = function () {\n        throw new Error('editor.addSidebar has been removed in tinymce 5x, use editor.ui.registry.addSidebar instead');\n      };\n      Editor.prototype.addMenuItem = function () {\n        throw new Error('editor.addMenuItem has been removed in tinymce 5x, use editor.ui.registry.addMenuItem instead');\n      };\n      Editor.prototype.addContextToolbar = function () {\n        throw new Error('editor.addContextToolbar has been removed in tinymce 5x, use editor.ui.registry.addContextToolbar instead');\n      };\n      return Editor;\n    }();\n\n    var DOM = DOMUtils.DOM;\n    var explode = Tools.explode, each$1 = Tools.each, extend$2 = Tools.extend;\n    var instanceCounter = 0, boundGlobalEvents = false;\n    var beforeUnloadDelegate;\n    var legacyEditors = [];\n    var editors = [];\n    var isValidLegacyKey = function (id) {\n      return id !== 'length';\n    };\n    var globalEventDelegate = function (e) {\n      var type = e.type;\n      each$1(EditorManager.get(), function (editor) {\n        switch (type) {\n        case 'scroll':\n          editor.fire('ScrollWindow', e);\n          break;\n        case 'resize':\n          editor.fire('ResizeWindow', e);\n          break;\n        }\n      });\n    };\n    var toggleGlobalEvents = function (state) {\n      if (state !== boundGlobalEvents) {\n        if (state) {\n          DomQuery(window).on('resize scroll', globalEventDelegate);\n        } else {\n          DomQuery(window).off('resize scroll', globalEventDelegate);\n        }\n        boundGlobalEvents = state;\n      }\n    };\n    var removeEditorFromList = function (targetEditor) {\n      var oldEditors = editors;\n      delete legacyEditors[targetEditor.id];\n      for (var i = 0; i < legacyEditors.length; i++) {\n        if (legacyEditors[i] === targetEditor) {\n          legacyEditors.splice(i, 1);\n          break;\n        }\n      }\n      editors = filter$4(editors, function (editor) {\n        return targetEditor !== editor;\n      });\n      if (EditorManager.activeEditor === targetEditor) {\n        EditorManager.activeEditor = editors.length > 0 ? editors[0] : null;\n      }\n      if (EditorManager.focusedEditor === targetEditor) {\n        EditorManager.focusedEditor = null;\n      }\n      return oldEditors.length !== editors.length;\n    };\n    var purgeDestroyedEditor = function (editor) {\n      if (editor && editor.initialized && !(editor.getContainer() || editor.getBody()).parentNode) {\n        removeEditorFromList(editor);\n        editor.unbindAllNativeEvents();\n        editor.destroy(true);\n        editor.removed = true;\n        editor = null;\n      }\n      return editor;\n    };\n    var isQuirksMode = document.compatMode !== 'CSS1Compat';\n    var EditorManager = __assign(__assign({}, Observable), {\n      baseURI: null,\n      baseURL: null,\n      defaultSettings: {},\n      documentBaseURL: null,\n      suffix: null,\n      $: DomQuery,\n      majorVersion: '5',\n      minorVersion: '10.7',\n      releaseDate: '2022-12-06',\n      editors: legacyEditors,\n      i18n: I18n,\n      activeEditor: null,\n      focusedEditor: null,\n      settings: {},\n      setup: function () {\n        var self = this;\n        var baseURL, documentBaseURL, suffix = '';\n        documentBaseURL = URI.getDocumentBaseUrl(document.location);\n        if (/^[^:]+:\\/\\/\\/?[^\\/]+\\//.test(documentBaseURL)) {\n          documentBaseURL = documentBaseURL.replace(/[\\?#].*$/, '').replace(/[\\/\\\\][^\\/]+$/, '');\n          if (!/[\\/\\\\]$/.test(documentBaseURL)) {\n            documentBaseURL += '/';\n          }\n        }\n        var preInit = window.tinymce || window.tinyMCEPreInit;\n        if (preInit) {\n          baseURL = preInit.base || preInit.baseURL;\n          suffix = preInit.suffix;\n        } else {\n          var scripts = document.getElementsByTagName('script');\n          for (var i = 0; i < scripts.length; i++) {\n            var src = scripts[i].src || '';\n            if (src === '') {\n              continue;\n            }\n            var srcScript = src.substring(src.lastIndexOf('/'));\n            if (/tinymce(\\.full|\\.jquery|)(\\.min|\\.dev|)\\.js/.test(src)) {\n              if (srcScript.indexOf('.min') !== -1) {\n                suffix = '.min';\n              }\n              baseURL = src.substring(0, src.lastIndexOf('/'));\n              break;\n            }\n          }\n          if (!baseURL && document.currentScript) {\n            var src = document.currentScript.src;\n            if (src.indexOf('.min') !== -1) {\n              suffix = '.min';\n            }\n            baseURL = src.substring(0, src.lastIndexOf('/'));\n          }\n        }\n        self.baseURL = new URI(documentBaseURL).toAbsolute(baseURL);\n        self.documentBaseURL = documentBaseURL;\n        self.baseURI = new URI(self.baseURL);\n        self.suffix = suffix;\n        setup$l(self);\n      },\n      overrideDefaults: function (defaultSettings) {\n        var baseUrl = defaultSettings.base_url;\n        if (baseUrl) {\n          this._setBaseUrl(baseUrl);\n        }\n        var suffix = defaultSettings.suffix;\n        if (defaultSettings.suffix) {\n          this.suffix = suffix;\n        }\n        this.defaultSettings = defaultSettings;\n        var pluginBaseUrls = defaultSettings.plugin_base_urls;\n        if (pluginBaseUrls !== undefined) {\n          each$j(pluginBaseUrls, function (pluginBaseUrl, pluginName) {\n            AddOnManager.PluginManager.urls[pluginName] = pluginBaseUrl;\n          });\n        }\n      },\n      init: function (settings) {\n        var self = this;\n        var result;\n        var invalidInlineTargets = Tools.makeMap('area base basefont br col frame hr img input isindex link meta param embed source wbr track ' + 'colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu', ' ');\n        var isInvalidInlineTarget = function (settings, elm) {\n          return settings.inline && elm.tagName.toLowerCase() in invalidInlineTargets;\n        };\n        var createId = function (elm) {\n          var id = elm.id;\n          if (!id) {\n            id = get$9(elm, 'name').filter(function (name) {\n              return !DOM.get(name);\n            }).getOrThunk(DOM.uniqueId);\n            elm.setAttribute('id', id);\n          }\n          return id;\n        };\n        var execCallback = function (name) {\n          var callback = settings[name];\n          if (!callback) {\n            return;\n          }\n          return callback.apply(self, []);\n        };\n        var hasClass = function (elm, className) {\n          return className.constructor === RegExp ? className.test(elm.className) : DOM.hasClass(elm, className);\n        };\n        var findTargets = function (settings) {\n          var targets = [];\n          if (Env.browser.isIE() && Env.browser.version.major < 11) {\n            initError('TinyMCE does not support the browser you are using. For a list of supported' + ' browsers please see: https://www.tinymce.com/docs/get-started/system-requirements/');\n            return [];\n          } else if (isQuirksMode) {\n            initError('Failed to initialize the editor as the document is not in standards mode. ' + 'TinyMCE requires standards mode.');\n            return [];\n          }\n          if (settings.types) {\n            each$1(settings.types, function (type) {\n              targets = targets.concat(DOM.select(type.selector));\n            });\n            return targets;\n          } else if (settings.selector) {\n            return DOM.select(settings.selector);\n          } else if (settings.target) {\n            return [settings.target];\n          }\n          switch (settings.mode) {\n          case 'exact':\n            var l = settings.elements || '';\n            if (l.length > 0) {\n              each$1(explode(l), function (id) {\n                var elm = DOM.get(id);\n                if (elm) {\n                  targets.push(elm);\n                } else {\n                  each$1(document.forms, function (f) {\n                    each$1(f.elements, function (e) {\n                      if (e.name === id) {\n                        id = 'mce_editor_' + instanceCounter++;\n                        DOM.setAttrib(e, 'id', id);\n                        targets.push(e);\n                      }\n                    });\n                  });\n                }\n              });\n            }\n            break;\n          case 'textareas':\n          case 'specific_textareas':\n            each$1(DOM.select('textarea'), function (elm) {\n              if (settings.editor_deselector && hasClass(elm, settings.editor_deselector)) {\n                return;\n              }\n              if (!settings.editor_selector || hasClass(elm, settings.editor_selector)) {\n                targets.push(elm);\n              }\n            });\n            break;\n          }\n          return targets;\n        };\n        var provideResults = function (editors) {\n          result = editors;\n        };\n        var initEditors = function () {\n          var initCount = 0;\n          var editors = [];\n          var targets;\n          var createEditor = function (id, settings, targetElm) {\n            var editor = new Editor(id, settings, self);\n            editors.push(editor);\n            editor.on('init', function () {\n              if (++initCount === targets.length) {\n                provideResults(editors);\n              }\n            });\n            editor.targetElm = editor.targetElm || targetElm;\n            editor.render();\n          };\n          DOM.unbind(window, 'ready', initEditors);\n          execCallback('onpageload');\n          targets = DomQuery.unique(findTargets(settings));\n          if (settings.types) {\n            each$1(settings.types, function (type) {\n              Tools.each(targets, function (elm) {\n                if (DOM.is(elm, type.selector)) {\n                  createEditor(createId(elm), extend$2({}, settings, type), elm);\n                  return false;\n                }\n                return true;\n              });\n            });\n            return;\n          }\n          Tools.each(targets, function (elm) {\n            purgeDestroyedEditor(self.get(elm.id));\n          });\n          targets = Tools.grep(targets, function (elm) {\n            return !self.get(elm.id);\n          });\n          if (targets.length === 0) {\n            provideResults([]);\n          } else {\n            each$1(targets, function (elm) {\n              if (isInvalidInlineTarget(settings, elm)) {\n                initError('Could not initialize inline editor on invalid inline target element', elm);\n              } else {\n                createEditor(createId(elm), settings, elm);\n              }\n            });\n          }\n        };\n        self.settings = settings;\n        DOM.bind(window, 'ready', initEditors);\n        return new promiseObj(function (resolve) {\n          if (result) {\n            resolve(result);\n          } else {\n            provideResults = function (editors) {\n              resolve(editors);\n            };\n          }\n        });\n      },\n      get: function (id) {\n        if (arguments.length === 0) {\n          return editors.slice(0);\n        } else if (isString$1(id)) {\n          return find$3(editors, function (editor) {\n            return editor.id === id;\n          }).getOr(null);\n        } else if (isNumber(id)) {\n          return editors[id] ? editors[id] : null;\n        } else {\n          return null;\n        }\n      },\n      add: function (editor) {\n        var self = this;\n        var existingEditor = legacyEditors[editor.id];\n        if (existingEditor === editor) {\n          return editor;\n        }\n        if (self.get(editor.id) === null) {\n          if (isValidLegacyKey(editor.id)) {\n            legacyEditors[editor.id] = editor;\n          }\n          legacyEditors.push(editor);\n          editors.push(editor);\n        }\n        toggleGlobalEvents(true);\n        self.activeEditor = editor;\n        self.fire('AddEditor', { editor: editor });\n        if (!beforeUnloadDelegate) {\n          beforeUnloadDelegate = function (e) {\n            var event = self.fire('BeforeUnload');\n            if (event.returnValue) {\n              e.preventDefault();\n              e.returnValue = event.returnValue;\n              return event.returnValue;\n            }\n          };\n          window.addEventListener('beforeunload', beforeUnloadDelegate);\n        }\n        return editor;\n      },\n      createEditor: function (id, settings) {\n        return this.add(new Editor(id, settings, this));\n      },\n      remove: function (selector) {\n        var self = this;\n        var i, editor;\n        if (!selector) {\n          for (i = editors.length - 1; i >= 0; i--) {\n            self.remove(editors[i]);\n          }\n          return;\n        }\n        if (isString$1(selector)) {\n          each$1(DOM.select(selector), function (elm) {\n            editor = self.get(elm.id);\n            if (editor) {\n              self.remove(editor);\n            }\n          });\n          return;\n        }\n        editor = selector;\n        if (isNull(self.get(editor.id))) {\n          return null;\n        }\n        if (removeEditorFromList(editor)) {\n          self.fire('RemoveEditor', { editor: editor });\n        }\n        if (editors.length === 0) {\n          window.removeEventListener('beforeunload', beforeUnloadDelegate);\n        }\n        editor.remove();\n        toggleGlobalEvents(editors.length > 0);\n        return editor;\n      },\n      execCommand: function (cmd, ui, value) {\n        var self = this, editor = self.get(value);\n        switch (cmd) {\n        case 'mceAddEditor':\n          if (!self.get(value)) {\n            new Editor(value, self.settings, self).render();\n          }\n          return true;\n        case 'mceRemoveEditor':\n          if (editor) {\n            editor.remove();\n          }\n          return true;\n        case 'mceToggleEditor':\n          if (!editor) {\n            self.execCommand('mceAddEditor', false, value);\n            return true;\n          }\n          if (editor.isHidden()) {\n            editor.show();\n          } else {\n            editor.hide();\n          }\n          return true;\n        }\n        if (self.activeEditor) {\n          return self.activeEditor.execCommand(cmd, ui, value);\n        }\n        return false;\n      },\n      triggerSave: function () {\n        each$1(editors, function (editor) {\n          editor.save();\n        });\n      },\n      addI18n: function (code, items) {\n        I18n.add(code, items);\n      },\n      translate: function (text) {\n        return I18n.translate(text);\n      },\n      setActive: function (editor) {\n        var activeEditor = this.activeEditor;\n        if (this.activeEditor !== editor) {\n          if (activeEditor) {\n            activeEditor.fire('deactivate', { relatedTarget: editor });\n          }\n          editor.fire('activate', { relatedTarget: activeEditor });\n        }\n        this.activeEditor = editor;\n      },\n      _setBaseUrl: function (baseUrl) {\n        this.baseURL = new URI(this.documentBaseURL).toAbsolute(baseUrl.replace(/\\/+$/, ''));\n        this.baseURI = new URI(this.baseURL);\n      }\n    });\n    EditorManager.setup();\n\n    var min$1 = Math.min, max$1 = Math.max, round$1 = Math.round;\n    var relativePosition = function (rect, targetRect, rel) {\n      var x = targetRect.x;\n      var y = targetRect.y;\n      var w = rect.w;\n      var h = rect.h;\n      var targetW = targetRect.w;\n      var targetH = targetRect.h;\n      var relChars = (rel || '').split('');\n      if (relChars[0] === 'b') {\n        y += targetH;\n      }\n      if (relChars[1] === 'r') {\n        x += targetW;\n      }\n      if (relChars[0] === 'c') {\n        y += round$1(targetH / 2);\n      }\n      if (relChars[1] === 'c') {\n        x += round$1(targetW / 2);\n      }\n      if (relChars[3] === 'b') {\n        y -= h;\n      }\n      if (relChars[4] === 'r') {\n        x -= w;\n      }\n      if (relChars[3] === 'c') {\n        y -= round$1(h / 2);\n      }\n      if (relChars[4] === 'c') {\n        x -= round$1(w / 2);\n      }\n      return create$2(x, y, w, h);\n    };\n    var findBestRelativePosition = function (rect, targetRect, constrainRect, rels) {\n      var pos, i;\n      for (i = 0; i < rels.length; i++) {\n        pos = relativePosition(rect, targetRect, rels[i]);\n        if (pos.x >= constrainRect.x && pos.x + pos.w <= constrainRect.w + constrainRect.x && pos.y >= constrainRect.y && pos.y + pos.h <= constrainRect.h + constrainRect.y) {\n          return rels[i];\n        }\n      }\n      return null;\n    };\n    var inflate = function (rect, w, h) {\n      return create$2(rect.x - w, rect.y - h, rect.w + w * 2, rect.h + h * 2);\n    };\n    var intersect = function (rect, cropRect) {\n      var x1 = max$1(rect.x, cropRect.x);\n      var y1 = max$1(rect.y, cropRect.y);\n      var x2 = min$1(rect.x + rect.w, cropRect.x + cropRect.w);\n      var y2 = min$1(rect.y + rect.h, cropRect.y + cropRect.h);\n      if (x2 - x1 < 0 || y2 - y1 < 0) {\n        return null;\n      }\n      return create$2(x1, y1, x2 - x1, y2 - y1);\n    };\n    var clamp = function (rect, clampRect, fixedSize) {\n      var x1 = rect.x;\n      var y1 = rect.y;\n      var x2 = rect.x + rect.w;\n      var y2 = rect.y + rect.h;\n      var cx2 = clampRect.x + clampRect.w;\n      var cy2 = clampRect.y + clampRect.h;\n      var underflowX1 = max$1(0, clampRect.x - x1);\n      var underflowY1 = max$1(0, clampRect.y - y1);\n      var overflowX2 = max$1(0, x2 - cx2);\n      var overflowY2 = max$1(0, y2 - cy2);\n      x1 += underflowX1;\n      y1 += underflowY1;\n      if (fixedSize) {\n        x2 += underflowX1;\n        y2 += underflowY1;\n        x1 -= overflowX2;\n        y1 -= overflowY2;\n      }\n      x2 -= overflowX2;\n      y2 -= overflowY2;\n      return create$2(x1, y1, x2 - x1, y2 - y1);\n    };\n    var create$2 = function (x, y, w, h) {\n      return {\n        x: x,\n        y: y,\n        w: w,\n        h: h\n      };\n    };\n    var fromClientRect = function (clientRect) {\n      return create$2(clientRect.left, clientRect.top, clientRect.width, clientRect.height);\n    };\n    var Rect = {\n      inflate: inflate,\n      relativePosition: relativePosition,\n      findBestRelativePosition: findBestRelativePosition,\n      intersect: intersect,\n      clamp: clamp,\n      create: create$2,\n      fromClientRect: fromClientRect\n    };\n\n    var awaiter = function (resolveCb, rejectCb, timeout) {\n      if (timeout === void 0) {\n        timeout = 1000;\n      }\n      var done = false;\n      var timer = null;\n      var complete = function (completer) {\n        return function () {\n          var args = [];\n          for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n          }\n          if (!done) {\n            done = true;\n            if (timer !== null) {\n              clearTimeout(timer);\n              timer = null;\n            }\n            completer.apply(null, args);\n          }\n        };\n      };\n      var resolve = complete(resolveCb);\n      var reject = complete(rejectCb);\n      var start = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        if (!done && timer === null) {\n          timer = setTimeout(function () {\n            return reject.apply(null, args);\n          }, timeout);\n        }\n      };\n      return {\n        start: start,\n        resolve: resolve,\n        reject: reject\n      };\n    };\n    var create$1 = function () {\n      var tasks = {};\n      var resultFns = {};\n      var load = function (id, url) {\n        var loadErrMsg = 'Script at URL \"' + url + '\" failed to load';\n        var runErrMsg = 'Script at URL \"' + url + '\" did not call `tinymce.Resource.add(\\'' + id + '\\', data)` within 1 second';\n        if (tasks[id] !== undefined) {\n          return tasks[id];\n        } else {\n          var task = new promiseObj(function (resolve, reject) {\n            var waiter = awaiter(resolve, reject);\n            resultFns[id] = waiter.resolve;\n            ScriptLoader.ScriptLoader.loadScript(url, function () {\n              return waiter.start(runErrMsg);\n            }, function () {\n              return waiter.reject(loadErrMsg);\n            });\n          });\n          tasks[id] = task;\n          return task;\n        }\n      };\n      var add = function (id, data) {\n        if (resultFns[id] !== undefined) {\n          resultFns[id](data);\n          delete resultFns[id];\n        }\n        tasks[id] = promiseObj.resolve(data);\n      };\n      return {\n        load: load,\n        add: add\n      };\n    };\n    var Resource = create$1();\n\n    var each = Tools.each, extend$1 = Tools.extend;\n    var extendClass, initializing;\n    var Class = function () {\n    };\n    Class.extend = extendClass = function (props) {\n      var self = this;\n      var _super = self.prototype;\n      var Class = function () {\n        var i, mixins, mixin;\n        var self = this;\n        if (!initializing) {\n          if (self.init) {\n            self.init.apply(self, arguments);\n          }\n          mixins = self.Mixins;\n          if (mixins) {\n            i = mixins.length;\n            while (i--) {\n              mixin = mixins[i];\n              if (mixin.init) {\n                mixin.init.apply(self, arguments);\n              }\n            }\n          }\n        }\n      };\n      var dummy = function () {\n        return this;\n      };\n      var createMethod = function (name, fn) {\n        return function () {\n          var self = this;\n          var tmp = self._super;\n          self._super = _super[name];\n          var ret = fn.apply(self, arguments);\n          self._super = tmp;\n          return ret;\n        };\n      };\n      initializing = true;\n      var prototype = new self();\n      initializing = false;\n      if (props.Mixins) {\n        each(props.Mixins, function (mixin) {\n          for (var name_1 in mixin) {\n            if (name_1 !== 'init') {\n              props[name_1] = mixin[name_1];\n            }\n          }\n        });\n        if (_super.Mixins) {\n          props.Mixins = _super.Mixins.concat(props.Mixins);\n        }\n      }\n      if (props.Methods) {\n        each(props.Methods.split(','), function (name) {\n          props[name] = dummy;\n        });\n      }\n      if (props.Properties) {\n        each(props.Properties.split(','), function (name) {\n          var fieldName = '_' + name;\n          props[name] = function (value) {\n            var self = this;\n            if (value !== undefined) {\n              self[fieldName] = value;\n              return self;\n            }\n            return self[fieldName];\n          };\n        });\n      }\n      if (props.Statics) {\n        each(props.Statics, function (func, name) {\n          Class[name] = func;\n        });\n      }\n      if (props.Defaults && _super.Defaults) {\n        props.Defaults = extend$1({}, _super.Defaults, props.Defaults);\n      }\n      each$j(props, function (member, name) {\n        if (typeof member === 'function' && _super[name]) {\n          prototype[name] = createMethod(name, member);\n        } else {\n          prototype[name] = member;\n        }\n      });\n      Class.prototype = prototype;\n      Class.constructor = Class;\n      Class.extend = extendClass;\n      return Class;\n    };\n\n    var min = Math.min, max = Math.max, round = Math.round;\n    var Color = function (value) {\n      var self = {};\n      var r = 0, g = 0, b = 0;\n      var rgb2hsv = function (r, g, b) {\n        var h, s, v;\n        h = 0;\n        s = 0;\n        v = 0;\n        r = r / 255;\n        g = g / 255;\n        b = b / 255;\n        var minRGB = min(r, min(g, b));\n        var maxRGB = max(r, max(g, b));\n        if (minRGB === maxRGB) {\n          v = minRGB;\n          return {\n            h: 0,\n            s: 0,\n            v: v * 100\n          };\n        }\n        var d = r === minRGB ? g - b : b === minRGB ? r - g : b - r;\n        h = r === minRGB ? 3 : b === minRGB ? 1 : 5;\n        h = 60 * (h - d / (maxRGB - minRGB));\n        s = (maxRGB - minRGB) / maxRGB;\n        v = maxRGB;\n        return {\n          h: round(h),\n          s: round(s * 100),\n          v: round(v * 100)\n        };\n      };\n      var hsvToRgb = function (hue, saturation, brightness) {\n        hue = (parseInt(hue, 10) || 0) % 360;\n        saturation = parseInt(saturation, 10) / 100;\n        brightness = parseInt(brightness, 10) / 100;\n        saturation = max(0, min(saturation, 1));\n        brightness = max(0, min(brightness, 1));\n        if (saturation === 0) {\n          r = g = b = round(255 * brightness);\n          return;\n        }\n        var side = hue / 60;\n        var chroma = brightness * saturation;\n        var x = chroma * (1 - Math.abs(side % 2 - 1));\n        var match = brightness - chroma;\n        switch (Math.floor(side)) {\n        case 0:\n          r = chroma;\n          g = x;\n          b = 0;\n          break;\n        case 1:\n          r = x;\n          g = chroma;\n          b = 0;\n          break;\n        case 2:\n          r = 0;\n          g = chroma;\n          b = x;\n          break;\n        case 3:\n          r = 0;\n          g = x;\n          b = chroma;\n          break;\n        case 4:\n          r = x;\n          g = 0;\n          b = chroma;\n          break;\n        case 5:\n          r = chroma;\n          g = 0;\n          b = x;\n          break;\n        default:\n          r = g = b = 0;\n        }\n        r = round(255 * (r + match));\n        g = round(255 * (g + match));\n        b = round(255 * (b + match));\n      };\n      var toHex = function () {\n        var hex = function (val) {\n          val = parseInt(val, 10).toString(16);\n          return val.length > 1 ? val : '0' + val;\n        };\n        return '#' + hex(r) + hex(g) + hex(b);\n      };\n      var toRgb = function () {\n        return {\n          r: r,\n          g: g,\n          b: b\n        };\n      };\n      var toHsv = function () {\n        return rgb2hsv(r, g, b);\n      };\n      var parse = function (value) {\n        var matches;\n        if (typeof value === 'object') {\n          if ('r' in value) {\n            r = value.r;\n            g = value.g;\n            b = value.b;\n          } else if ('v' in value) {\n            hsvToRgb(value.h, value.s, value.v);\n          }\n        } else {\n          if (matches = /rgb\\s*\\(\\s*([0-9]+)\\s*,\\s*([0-9]+)\\s*,\\s*([0-9]+)[^\\)]*\\)/gi.exec(value)) {\n            r = parseInt(matches[1], 10);\n            g = parseInt(matches[2], 10);\n            b = parseInt(matches[3], 10);\n          } else if (matches = /#([0-F]{2})([0-F]{2})([0-F]{2})/gi.exec(value)) {\n            r = parseInt(matches[1], 16);\n            g = parseInt(matches[2], 16);\n            b = parseInt(matches[3], 16);\n          } else if (matches = /#([0-F])([0-F])([0-F])/gi.exec(value)) {\n            r = parseInt(matches[1] + matches[1], 16);\n            g = parseInt(matches[2] + matches[2], 16);\n            b = parseInt(matches[3] + matches[3], 16);\n          }\n        }\n        r = r < 0 ? 0 : r > 255 ? 255 : r;\n        g = g < 0 ? 0 : g > 255 ? 255 : g;\n        b = b < 0 ? 0 : b > 255 ? 255 : b;\n        return self;\n      };\n      if (value) {\n        parse(value);\n      }\n      self.toRgb = toRgb;\n      self.toHsv = toHsv;\n      self.toHex = toHex;\n      self.parse = parse;\n      return self;\n    };\n\n    var serialize = function (obj) {\n      var data = JSON.stringify(obj);\n      if (!isString$1(data)) {\n        return data;\n      }\n      return data.replace(/[\\u0080-\\uFFFF]/g, function (match) {\n        var hexCode = match.charCodeAt(0).toString(16);\n        return '\\\\u' + '0000'.substring(hexCode.length) + hexCode;\n      });\n    };\n    var JSONUtils = {\n      serialize: serialize,\n      parse: function (text) {\n        try {\n          return JSON.parse(text);\n        } catch (ex) {\n        }\n      }\n    };\n\n    var JSONP = {\n      callbacks: {},\n      count: 0,\n      send: function (settings) {\n        var self = this, dom = DOMUtils.DOM, count = settings.count !== undefined ? settings.count : self.count;\n        var id = 'tinymce_jsonp_' + count;\n        self.callbacks[count] = function (json) {\n          dom.remove(id);\n          delete self.callbacks[count];\n          settings.callback(json);\n        };\n        dom.add(dom.doc.body, 'script', {\n          id: id,\n          src: settings.url,\n          type: 'text/javascript'\n        });\n        self.count++;\n      }\n    };\n\n    var XHR = __assign(__assign({}, Observable), {\n      send: function (settings) {\n        var xhr, count = 0;\n        var ready = function () {\n          if (!settings.async || xhr.readyState === 4 || count++ > 10000) {\n            if (settings.success && count < 10000 && xhr.status === 200) {\n              settings.success.call(settings.success_scope, '' + xhr.responseText, xhr, settings);\n            } else if (settings.error) {\n              settings.error.call(settings.error_scope, count > 10000 ? 'TIMED_OUT' : 'GENERAL', xhr, settings);\n            }\n            xhr = null;\n          } else {\n            Delay.setTimeout(ready, 10);\n          }\n        };\n        settings.scope = settings.scope || this;\n        settings.success_scope = settings.success_scope || settings.scope;\n        settings.error_scope = settings.error_scope || settings.scope;\n        settings.async = settings.async !== false;\n        settings.data = settings.data || '';\n        XHR.fire('beforeInitialize', { settings: settings });\n        xhr = new XMLHttpRequest();\n        if (xhr.overrideMimeType) {\n          xhr.overrideMimeType(settings.content_type);\n        }\n        xhr.open(settings.type || (settings.data ? 'POST' : 'GET'), settings.url, settings.async);\n        if (settings.crossDomain) {\n          xhr.withCredentials = true;\n        }\n        if (settings.content_type) {\n          xhr.setRequestHeader('Content-Type', settings.content_type);\n        }\n        if (settings.requestheaders) {\n          Tools.each(settings.requestheaders, function (header) {\n            xhr.setRequestHeader(header.key, header.value);\n          });\n        }\n        xhr.setRequestHeader('X-Requested-With', 'XMLHttpRequest');\n        xhr = XHR.fire('beforeSend', {\n          xhr: xhr,\n          settings: settings\n        }).xhr;\n        xhr.send(settings.data);\n        if (!settings.async) {\n          return ready();\n        }\n        Delay.setTimeout(ready, 10);\n      }\n    });\n\n    var extend = Tools.extend;\n    var JSONRequest = function () {\n      function JSONRequest(settings) {\n        this.settings = extend({}, settings);\n        this.count = 0;\n      }\n      JSONRequest.sendRPC = function (o) {\n        return new JSONRequest().send(o);\n      };\n      JSONRequest.prototype.send = function (args) {\n        var ecb = args.error, scb = args.success;\n        var xhrArgs = extend(this.settings, args);\n        xhrArgs.success = function (c, x) {\n          c = JSONUtils.parse(c);\n          if (typeof c === 'undefined') {\n            c = { error: 'JSON Parse error.' };\n          }\n          if (c.error) {\n            ecb.call(xhrArgs.error_scope || xhrArgs.scope, c.error, x);\n          } else {\n            scb.call(xhrArgs.success_scope || xhrArgs.scope, c.result);\n          }\n        };\n        xhrArgs.error = function (ty, x) {\n          if (ecb) {\n            ecb.call(xhrArgs.error_scope || xhrArgs.scope, ty, x);\n          }\n        };\n        xhrArgs.data = JSONUtils.serialize({\n          id: args.id || 'c' + this.count++,\n          method: args.method,\n          params: args.params\n        });\n        xhrArgs.content_type = 'application/json';\n        XHR.send(xhrArgs);\n      };\n      return JSONRequest;\n    }();\n\n    var create = function () {\n      return function () {\n        var data = {};\n        var keys = [];\n        var storage = {\n          getItem: function (key) {\n            var item = data[key];\n            return item ? item : null;\n          },\n          setItem: function (key, value) {\n            keys.push(key);\n            data[key] = String(value);\n          },\n          key: function (index) {\n            return keys[index];\n          },\n          removeItem: function (key) {\n            keys = keys.filter(function (k) {\n              return k === key;\n            });\n            delete data[key];\n          },\n          clear: function () {\n            keys = [];\n            data = {};\n          },\n          length: 0\n        };\n        Object.defineProperty(storage, 'length', {\n          get: function () {\n            return keys.length;\n          },\n          configurable: false,\n          enumerable: false\n        });\n        return storage;\n      }();\n    };\n\n    var localStorage;\n    try {\n      var test = '__storage_test__';\n      localStorage = window.localStorage;\n      localStorage.setItem(test, test);\n      localStorage.removeItem(test);\n    } catch (e) {\n      localStorage = create();\n    }\n    var LocalStorage = localStorage;\n\n    var publicApi = {\n      geom: { Rect: Rect },\n      util: {\n        Promise: promiseObj,\n        Delay: Delay,\n        Tools: Tools,\n        VK: VK,\n        URI: URI,\n        Class: Class,\n        EventDispatcher: EventDispatcher,\n        Observable: Observable,\n        I18n: I18n,\n        XHR: XHR,\n        JSON: JSONUtils,\n        JSONRequest: JSONRequest,\n        JSONP: JSONP,\n        LocalStorage: LocalStorage,\n        Color: Color,\n        ImageUploader: ImageUploader\n      },\n      dom: {\n        EventUtils: EventUtils,\n        Sizzle: Sizzle,\n        DomQuery: DomQuery,\n        TreeWalker: DomTreeWalker,\n        TextSeeker: TextSeeker,\n        DOMUtils: DOMUtils,\n        ScriptLoader: ScriptLoader,\n        RangeUtils: RangeUtils,\n        Serializer: DomSerializer,\n        StyleSheetLoader: StyleSheetLoader,\n        ControlSelection: ControlSelection,\n        BookmarkManager: BookmarkManager,\n        Selection: EditorSelection,\n        Event: EventUtils.Event\n      },\n      html: {\n        Styles: Styles,\n        Entities: Entities,\n        Node: AstNode,\n        Schema: Schema,\n        SaxParser: SaxParser,\n        DomParser: DomParser,\n        Writer: Writer,\n        Serializer: HtmlSerializer\n      },\n      Env: Env,\n      AddOnManager: AddOnManager,\n      Annotator: Annotator,\n      Formatter: Formatter,\n      UndoManager: UndoManager,\n      EditorCommands: EditorCommands,\n      WindowManager: WindowManager,\n      NotificationManager: NotificationManager,\n      EditorObservable: EditorObservable,\n      Shortcuts: Shortcuts,\n      Editor: Editor,\n      FocusManager: FocusManager,\n      EditorManager: EditorManager,\n      DOM: DOMUtils.DOM,\n      ScriptLoader: ScriptLoader.ScriptLoader,\n      PluginManager: PluginManager,\n      ThemeManager: ThemeManager,\n      IconManager: IconManager,\n      Resource: Resource,\n      trim: Tools.trim,\n      isArray: Tools.isArray,\n      is: Tools.is,\n      toArray: Tools.toArray,\n      makeMap: Tools.makeMap,\n      each: Tools.each,\n      map: Tools.map,\n      grep: Tools.grep,\n      inArray: Tools.inArray,\n      extend: Tools.extend,\n      create: Tools.create,\n      walk: Tools.walk,\n      createNS: Tools.createNS,\n      resolve: Tools.resolve,\n      explode: Tools.explode,\n      _addCacheSuffix: Tools._addCacheSuffix,\n      isOpera: Env.opera,\n      isWebKit: Env.webkit,\n      isIE: Env.ie,\n      isGecko: Env.gecko,\n      isMac: Env.mac\n    };\n    var tinymce = Tools.extend(EditorManager, publicApi);\n\n    var exportToModuleLoaders = function (tinymce) {\n      if (typeof module === 'object') {\n        try {\n          module.exports = tinymce;\n        } catch (_) {\n        }\n      }\n    };\n    var exportToWindowGlobal = function (tinymce) {\n      window.tinymce = tinymce;\n      window.tinyMCE = tinymce;\n    };\n    exportToWindowGlobal(tinymce);\n    exportToModuleLoaders(tinymce);\n\n}());\n","module.exports = jQuery;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","const __WEBPACK_NAMESPACE_OBJECT__ = React;","const __WEBPACK_NAMESPACE_OBJECT__ = ReactDOM;","/**Search JSON API\n *\n * Use the senaite.jsonapi to search a catalog\n *\n*/\nclass SearchAPI {\n\n  constructor(props) {\n    console.debug(\"SearchAPI::constructor\")\n    this.api_url = props.api_url;\n    this.on_api_error = props.on_api_error || function() {};\n    return this;\n  }\n\n  get_api_url(endpoint) {\n    return `${this.api_url}/${endpoint}#${location.search}`\n  }\n\n  /*\n   * Fetch Ajax API resource from the server\n   *\n   * @param {string} endpoint\n   * @param {object} options\n   * @returns {Promise}\n   */\n  get_json(endpoint, options) {\n    var data, init, method, on_api_error, request, url;\n    if (options == null) {\n      options = {};\n    }\n    method = options.method || \"POST\";\n    data = JSON.stringify(options.data) || \"{}\";\n    on_api_error = this.on_api_error;\n    url = this.get_api_url(endpoint);\n    init = {\n      method: method,\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"X-CSRF-TOKEN\": this.get_csrf_token()\n      },\n      body: method === \"POST\" ? data : null,\n      credentials: \"include\"\n    };\n    console.info(\"SearchAPI::fetch:endpoint=\" + endpoint + \" init=\", init);\n    request = new Request(url, init);\n    return fetch(request).then(function(response) {\n      if (!response.ok) {\n        return Promise.reject(response);\n      }\n      return response;\n    }).then(function(response) {\n      return response.json();\n    }).catch(function(response) {\n      on_api_error(response);\n      return response;\n    });\n  }\n\n  search(catalog, query, params) {\n    params = params || {};\n    let url = `search?catalog=${catalog}`;\n    for(let [key, value] of Object.entries(query)) {\n      // handle arrays as repeating parameters\n      if (Array.isArray(value)) {\n        value.forEach( (item) => {\n          url += `&${key}=${item}`;\n        });\n        continue;\n      }\n      // workaround for path queries\n      if (key == \"path\") {\n        value = value.query || null;\n        if (value.depth !== null) {\n          url += `&depth=${value.depth}`;\n        }\n      }\n      if (value) {\n        url += `&${key}=${value}`;\n      }\n    }\n    for(let [key, value] of Object.entries(params)) {\n      url += `&${key}=${value}`;\n    }\n    console.debug(\"SearchAPI::search:url=\", url);\n    return this.get_json(url, {method: \"GET\"});\n  }\n\n  /*\n   * Get the plone.protect CSRF token\n   * Note: The fields won't save w/o that token set\n   */\n  get_csrf_token() {\n    return document.querySelector(\"#protect-script\").dataset.token;\n  }\n\n}\n\nexport default SearchAPI;\n","import React from \"react\";\nimport \"./SearchField.css\"\n\n\n/** Input field that triggers a search query\n *\n */\nclass SearchField extends React.Component {\n\n  constructor(props) {\n    super(props);\n\n    this.state = {}\n\n    // React reference to the input field\n    // https://reactjs.org/docs/react-api.html#reactcreateref\n    this.input_field_ref = React.createRef();\n\n    // bind event handlers\n    this.on_focus = this.on_focus.bind(this);\n    this.on_blur = this.on_blur.bind(this);\n    this.on_change = this.on_change.bind(this);\n    this.on_keydown = this.on_keydown.bind(this);\n    this.on_keypress = this.on_keypress.bind(this);\n    this.on_clear_click = this.on_clear_click.bind(this);\n    this.on_search_click = this.on_search_click.bind(this);\n  }\n\n  /*\n   * Returns the search value from the input field\n   */\n  get_search_value() {\n    return this.input_field_ref.current.value;\n  }\n\n  /*\n   * Handler when the search field get focused\n   */\n  on_focus(event) {\n    console.debug(\"SearchField::on_focus\");\n    if (this.props.on_focus) {\n      let value = this.get_search_value() || null;\n      this.props.on_focus(value);\n    }\n  }\n\n  /*\n   * Handler when the search field lost focus\n   */\n  on_blur(event) {\n    console.debug(\"SearchField::on_blur\");\n    let value = this.get_search_value();\n    if (event.relatedTarget !== null || !value) {\n      // do not fire blur event if the user clicked e.g. in the results table\n      return;\n    }\n    if (this.props.on_blur) {\n      this.props.on_blur(value);\n      // clear the input field\n      this.input_field_ref.current.value = \"\"\n    }\n  }\n\n  /*\n   * Handler when the search value changed\n   */\n  on_change(event) {\n    event.preventDefault();\n    let value = this.get_search_value();\n    console.debug(\"SearchField::on_change:value: \", value);\n    if (this.props.on_search) {\n      this.props.on_search(value);\n    }\n  }\n\n  /*\n   * Handler for keydown events in the search field\n   *\n   */\n  on_keydown(event) {\n    // backspace\n    if (event.which == 8) {\n      if (this.get_search_value() == \"\") {\n        this.props.on_clear();\n      }\n    }\n\n    // down arrow\n    if (event.which == 40) {\n      if (this.props.on_arrow_key) {\n        this.props.on_arrow_key(\"down\");\n      }\n    }\n    // up arrow\n    if (event.which == 38) {\n      if (this.props.on_arrow_key) {\n        this.props.on_arrow_key(\"up\");\n      }\n    }\n\n    // left arrow\n    if (event.which == 37) {\n      if (this.props.on_arrow_key) {\n        this.props.on_arrow_key(\"left\");\n      }\n    }\n\n    // right arrow\n    if (event.which == 39) {\n      if (this.props.on_arrow_key) {\n        this.props.on_arrow_key(\"right\");\n      }\n    }\n  }\n\n  /*\n   * Handler for keypress events in the search field\n   *\n   */\n  on_keypress(event) {\n    if (event.which == 13) {\n      console.debug(\"SearchField::on_keypress:ENTER\");\n      // prevent form submission when clicking ENTER\n      event.preventDefault();\n      if (this.props.on_enter) {\n        let value = this.get_search_value();\n        this.props.on_enter(value);\n        // clear the input field\n        this.input_field_ref.current.value = \"\"\n      }\n\n    }\n  }\n\n  on_clear_click(event) {\n    event.preventDefault();\n    if (this.props.on_clear) {\n      let value = this.get_search_value();\n      this.props.on_clear(value);\n      // clear the input field\n      this.input_field_ref.current.value = \"\"\n    }\n  }\n\n  on_search_click(event) {\n    event.preventDefault();\n    if (this.props.on_search) {\n      let value = this.get_search_value();\n      this.props.on_search(value);\n    }\n  }\n\n  render() {\n    return (\n      <div className={this.props.className}>\n        <div className=\"input-group searchfield\">\n          <input type=\"text\"\n                 autoComplete=\"off\"\n                 name={this.props.name}\n                 className={this.props.className}\n                 ref={this.input_field_ref}\n                 disabled={this.props.disabled}\n                 onKeyDown={this.on_keydown}\n                 onKeyPress={this.on_keypress}\n                 onChange={this.on_change}\n                 onFocus={this.on_focus}\n                 onBlur={this.on_blur}\n                 placeholder={this.props.placeholder}\n          />\n          <div className=\"input-group-append\">\n            <button className=\"btn btn-sm btn-outline-secondary\"\n                    style={{zIndex: 0}}\n                    disabled={this.props.disabled}\n                    onClick={this.on_clear_click}>\n              <i className=\"fas fa-times\"></i>\n            </button>\n            <button className=\"btn btn-sm btn-outline-primary\"\n                    style={{zIndex: 0}}\n                    disabled={this.props.disabled}\n                    onClick={this.on_search_click}>\n              {!this.props.loading && <i className=\"fas fa-search\"></i>}\n              {this.props.loading && <span className=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\"></span>}\n            </button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default SearchField;\n","/* i18n integration. This is forked from jarn.jsi18n\n *\n * This is a singleton.\n * Configuration is done on the body tag data-i18ncatalogurl attribute\n *     <body data-i18ncatalogurl=\"/plonejsi18n\">\n *\n *  Or, it'll default to \"/plonejsi18n\"\n */\n\nimport $ from \"jquery\";\n\n\nvar I18N = function() {\n  var self = this;\n  self.baseUrl = $('body').attr('data-i18ncatalogurl');\n  self.currentLanguage = $('html').attr('lang') || 'en';\n\n  // Fix for country specific languages\n  if (self.currentLanguage.split('-').length > 1) {\n    self.currentLanguage = self.currentLanguage.split('-')[0] + '_' + self.currentLanguage.split('-')[1].toUpperCase();\n  }\n\n  self.storage = null;\n  self.catalogs = {};\n  self.ttl = 24 * 3600 * 1000;\n\n  // Internet Explorer 8 does not know Date.now() which is used in e.g. loadCatalog, so we \"define\" it\n  if (!Date.now) {\n    Date.now = function() {\n      return new Date().valueOf();\n    };\n  }\n\n  try {\n    if ('localStorage' in window && window.localStorage !== null && 'JSON' in window && window.JSON !== null) {\n      self.storage = window.localStorage;\n    }\n  } catch (e) {}\n\n  self.configure = function(config) {\n    for (var key in config){\n      self[key] = config[key];\n    }\n  };\n\n  self._setCatalog = function (domain, language, catalog) {\n    if (domain in self.catalogs) {\n      self.catalogs[domain][language] = catalog;\n    } else {\n      self.catalogs[domain] = {};\n      self.catalogs[domain][language] = catalog;\n    }\n  };\n\n  self._storeCatalog = function (domain, language, catalog) {\n    var key = domain + '-' + language;\n    if (self.storage !== null && catalog !== null) {\n      self.storage.setItem(key, JSON.stringify(catalog));\n      self.storage.setItem(key + '-updated', Date.now());\n    }\n  };\n\n  self.getUrl = function(domain, language) {\n    return self.baseUrl + '?domain=' + domain + '&language=' + language;\n  };\n\n  self.loadCatalog = function (domain, language) {\n    if (language === undefined) {\n      language = self.currentLanguage;\n    }\n    if (self.storage !== null) {\n      var key = domain + '-' + language;\n      if (key in self.storage) {\n        if ((Date.now() - parseInt(self.storage.getItem(key + '-updated'), 10)) < self.ttl) {\n          var catalog = JSON.parse(self.storage.getItem(key));\n          self._setCatalog(domain, language, catalog);\n          return;\n        }\n      }\n    }\n    if (!self.baseUrl) {\n      return;\n    }\n    $.getJSON(self.getUrl(domain, language), function (catalog) {\n      if (catalog === null) {\n        return;\n      }\n      self._setCatalog(domain, language, catalog);\n      self._storeCatalog(domain, language, catalog);\n    });\n  };\n\n  self.MessageFactory = function (domain, language) {\n    language = language || self.currentLanguage;\n    return function translate (msgid, keywords) {\n      var msgstr;\n      if ((domain in self.catalogs) && (language in self.catalogs[domain]) && (msgid in self.catalogs[domain][language])) {\n        msgstr = self.catalogs[domain][language][msgid];\n      } else {\n        msgstr = msgid;\n      }\n      if (keywords) {\n        var regexp, keyword;\n        for (keyword in keywords) {\n          if (keywords.hasOwnProperty(keyword)) {\n            regexp = new RegExp('\\\\$\\\\{' + keyword + '\\\\}', 'g');\n            msgstr = msgstr.replace(regexp, keywords[keyword]);\n          }\n        }\n      }\n      return msgstr;\n    };\n  };\n};\n\nexport default I18N;\n","import I18N from \"./components/i18n.js\";\n\n// SENAITE message factory\nvar t = null;\nexport var _t = (msgid, keywords) => {\n  if (t === null) {\n    let i18n = new I18N();\n    console.debug(\"*** Loading `senaite.core` i18n MessageFactory ***\");\n    i18n.loadCatalog(\"senaite.core\")\n    t = i18n.MessageFactory(\"senaite.core\")\n  }\n  return t(msgid, keywords);\n}\n\n// Plone message factory\nvar p = null;\nexport var _p = (msgid, keywords) => {\n  if (p === null) {\n    let i18n = new I18N();\n    console.debug(\"*** Loading `plone` i18n MessageFactory ***\");\n    i18n.loadCatalog(\"plone\")\n    p = i18n.MessageFactory(\"plone\")\n  }\n  return p(msgid, keywords);\n}\n","import React from \"react\";\nimport {_t} from \"../../i18n-wrapper.js\"\nimport \"./SearchResults.css\"\n\n\n/** Renders the search results in a table popup\n *\n */\nclass SearchResults extends React.Component {\n\n  constructor(props) {\n    super(props);\n\n    // bind event handlers\n    this.on_select = this.on_select.bind(this);\n    this.on_page = this.on_page.bind(this);\n    this.on_prev_page = this.on_prev_page.bind(this);\n    this.on_next_page = this.on_next_page.bind(this);\n    this.on_close = this.on_close.bind(this);\n    this.on_mouse_over = this.on_mouse_over.bind(this);\n  }\n\n  /*\n   * Return the key where a value is located in a result record\n   */\n  get_value_key() {\n    return this.props.value_key || \"uid\";\n  }\n\n  /*\n   * Return the header columns config\n   *\n   * @returns {Array} of column config objects\n   */\n  get_columns() {\n    return this.props.columns || [];\n  }\n\n  /*\n   * Return only the (field-)names of the columns config\n   *\n   * @returns {Array} of column names\n   */\n  get_column_names() {\n    let columns = this.get_columns();\n    return columns.map((column) => {\n      return column.name;\n    });\n  }\n\n  /*\n   * Return only the labels of the columns config\n   *\n   * @returns {Array} of column labels\n   */\n  get_column_labels() {\n    let columns = this.get_columns();\n    return columns.map((column) => {\n      return column.label\n    });\n  }\n\n  /*\n   * Return the search results\n   *\n   * @returns {Array} of result objects (items of `senaite.jsonapi` response)\n   */\n  get_results() {\n    return this.props.results || [];\n  }\n\n  /*\n   * Checks if results are available\n   *\n   * @returns {Boolean} true if there are results, false otherwise\n   */\n  has_results() {\n    let results = this.get_results();\n    let searchterm = this.props.searchterm;\n    let allow_user_value = this.props.allow_user_value;\n\n    // allow to select the typed in value\n    if (searchterm.length > 0 && allow_user_value) {\n      return true;\n    }\n    return results.length > 0;\n  }\n\n  /*\n   * Returns the style object for the dropdown table\n   *\n   * @returns {Object} of ReactJS CSS styles\n   */\n  get_style() {\n    return {\n      minWidth: this.props.width || \"400px\",\n      backgroundColor: \"white\",\n      zIndex: 999999\n    }\n  }\n\n  /*\n   * Returns the value of a result object (JSON API record)\n   *\n   * @returns {String} value of the result\n   */\n  get_result_value(result) {\n    let value_key = this.get_value_key();\n    return result[value_key];\n  }\n\n  /*\n   * Checks whether the value is already in the list of selected values\n   *\n   * @returns {Boolean} true if the value is already selected, false otherwise\n   */\n  is_value_selected(value) {\n    return this.props.values.indexOf(value) > -1;\n  }\n\n  /*\n   * Build Header <th></th> columns\n   *\n   * @returns {Array} of <th>...</th> columns\n   */\n  build_header_columns() {\n    let columns = [];\n    for (let column of this.get_columns()) {\n      let label = column.label || column.title;\n      let width = column.width || \"auto\";\n      let align = column.align || \"left\";\n      columns.push(\n        <th className=\"border-top-0\" width={width} align={align}>\n          {_t(label)}\n        </th>\n      );\n    }\n    // Append additional column for usage state\n    columns.push(\n      <th className=\"border-top-0\" width=\"1\"></th>\n    )\n    return columns;\n  }\n\n  /*\n   * Build table <tr></tr> rows\n   *\n   * @returns {Array} of <tr>...</tr> rows\n   */\n  build_rows() {\n    let rows = [];\n    let results = this.get_results();\n    let searchterm = this.props.searchterm;\n    let allow_user_value = this.props.allow_user_value;\n\n    // Build columns for the search results\n    results.forEach((result, index) => {\n      let value = this.get_result_value(result);\n      let cursor = value ? \"pointer\" : \"not-allowed\";\n      let title = value ? \"\" : _t(\"Missing key\");\n      rows.push(\n        <tr value={value}\n            index={index}\n            title={title}\n            style={{cursor:cursor}}\n            className={this.props.focused == index ? \"table-active\": \"\"}\n            onMouseOver={this.on_mouse_over}\n            onClick={this.on_select}>\n          {this.build_columns(result)}\n        </tr>\n      );\n    });\n\n    // Add additional row to select the typed in searchterm\n    if (allow_user_value && searchterm.length > 0) {\n      let index = results.length + 1;\n      rows.push(\n        <tr value={searchterm}\n            index={index}\n            title={searchterm}\n            style={{cursor: \"pointer\"}}\n            className={this.props.focused == index ? \"table-active\": \"\"}\n            onMouseOver={this.on_mouse_over}\n            onClick={this.on_select}>\n          <td className=\"font-italic text-secondary\" colspan={this.props.columns.length}>\n            {_t(\"Select\")}: <span className=\"text-info\">{searchterm}</span>\n          </td>\n        </tr>\n      );\n    }\n    return rows\n  }\n\n  /*\n   * Build Header <td></td> columns\n   *\n   * @returns {Array} of <td>...</td> columns\n   */\n  build_columns(result) {\n    let columns = []\n    let searchterm = this.props.searchterm || \"\";\n    for (let name of this.get_column_names()) {\n      let value = result[name];\n      let highlighted = this.highlight(value, searchterm);\n      columns.push(\n        <td dangerouslySetInnerHTML={{__html: highlighted}}></td>\n      );\n    }\n    let value = this.get_result_value(result);\n    let used = this.props.values.indexOf(value) > -1;\n    columns.push(\n      <td>{used && <i className=\"fas fa-link text-success\"></i>}</td>\n    );\n    return columns;\n  }\n\n  /*\n   * Highlight any found match of the searchterm in the text\n   *\n   * @returns {String} highlighted text\n   */\n  highlight(text, searchterm) {\n    if (searchterm.length == 0) return text;\n    try {\n      let rx = new RegExp(searchterm, \"gi\");\n      text = text.replaceAll(rx, (m) => {\n        return \"<span class='font-weight-bold text-info'>\"+m+\"</span>\";\n      });\n    } catch (error) {\n      // pass\n    }\n    return text\n  }\n\n  /*\n   * Build pagination <li>...</li> items\n   *\n   * @returns {Array} Pagination JSX\n   */\n  build_pages() {\n    let pages = [];\n\n    let total = this.props.pages;\n    let current = this.props.page;\n    let padding = this.props.padding;\n\n    let first_page = current - padding > 0 ? current - padding : 1;\n    let last_page = current + padding < total ? current + padding : total;\n\n    let crop_before = first_page === 1 ? false : true;\n    let crop_after = last_page < total ? true : false;\n\n    for (let page=first_page; page <= last_page; page++) {\n      let cls = [\"page-item\"];\n      if (current === page) cls.push(\"active\");\n\n      // crop before the current page\n      if (page == first_page && crop_before) {\n        // link to first page\n        pages.push(\n          <li>\n            <button className=\"page-link\" page={1} onClick={this.on_page}>1</button>\n          </li>\n        );\n        // placeholder\n        pages.push(\n          <li>\n            <div className=\"page-link\">...</div>\n          </li>\n        );\n        crop_before = false;\n      }\n\n      pages.push(\n        <li className={cls.join(\" \")}>\n          <button className=\"page-link\" page={page} onClick={this.on_page}>\n            {page}\n          </button>\n        </li>\n      );\n\n      // crop after the current page\n      if (page === last_page && crop_after) {\n        // placeholder\n        pages.push(\n          <li>\n            <div className=\"page-link\">...</div>\n          </li>\n        );\n        // link to last page\n        pages.push(\n          <li>\n            <button className=\"page-link\" page={total} onClick={this.on_page}>\n              {total}\n            </button>\n          </li>\n        );\n        crop_after = false;\n      }\n\n    }\n    return pages;\n  }\n\n  /*\n   * Build pagination next button\n   *\n   * @returns {Array} Next button JSX\n   */\n  build_next_button() {\n    let cls = [\"page-item\"]\n    if (!this.props.next_url) cls.push(\"disabled\")\n    return (\n      <li className={cls.join(\" \")}>\n        <button className=\"page-link\" onClick={this.on_next_page}>\n          Next\n        </button>\n      </li>\n    )\n  }\n\n  /*\n   * Build pagination previous button\n   *\n   * @returns {Array} Previous button JSX\n   */\n  build_prev_button() {\n    let cls = [\"page-item\"]\n    if (!this.props.prev_url) cls.push(\"disabled\")\n    return (\n      <li className={cls.join(\" \")}>\n        <button className=\"page-link\" onClick={this.on_prev_page}>\n          Previous\n        </button>\n      </li>\n    )\n  }\n\n  /*\n   * Build results dropdown close button\n   *\n   * @returns {Array} Close button JSX\n   */\n  build_close_button() {\n    return (\n      <button className=\"btn btn-sm btn-link\" onClick={this.on_close}>\n        <i className=\"fas fa-window-close\"></i>\n      </button>\n    )\n  }\n\n  /*\n   * Event handler when a result was selected\n   */\n  on_select(event) {\n    event.preventDefault();\n    let target = event.currentTarget;\n    let value = target.getAttribute(\"value\")\n    if (value === null) {\n      console.warn(\"SearchResults::on_select:missing_value!\");\n      return;\n    }\n    console.debug(\"SearchResults::on_select:event=\", event);\n    if (this.props.on_select) {\n      this.props.on_select(value);\n    }\n  }\n\n  /*\n   * Event handler when a page was clicked\n   */\n  on_page(event) {\n    event.preventDefault();\n    let target = event.currentTarget;\n    let page = target.getAttribute(\"page\")\n    console.debug(\"SearchResults::on_page:event=\", event);\n    if (page == this.props.page) {\n      return;\n    }\n    if (this.props.on_page) {\n      this.props.on_page(page);\n    }\n  }\n\n  /*\n   * Event handler when the pagination previous button was clicked\n   */\n  on_prev_page(event) {\n    event.preventDefault();\n    console.debug(\"SearchResults::on_prev_page:event=\", event);\n    let page = this.props.page;\n    if (page < 2) {\n      console.warn(\"No previous pages available!\");\n      return;\n    }\n    if (this.props.on_page) {\n      this.props.on_page(page - 1);\n    }\n  }\n\n  /*\n   * Event handler when the pagination next button was clicked\n   */\n  on_next_page(event) {\n    event.preventDefault();\n    console.debug(\"SearchResults::on_next_page:event=\", event);\n    let page = this.props.page;\n    if (page + 1 > this.props.pages) {\n      console.warn(\"No next pages available!\");\n      return;\n    }\n    if (this.props.on_page) {\n      this.props.on_page(page + 1);\n    }\n  }\n\n  /*\n   * Event handler when the dropdown close button was clicked\n   */\n  on_close(event) {\n    event.preventDefault();\n    console.debug(\"SearchResults::on_close:event=\", event);\n    if (this.props.on_clear) {\n      this.props.on_clear();\n    }\n  }\n\n  /*\n   * Event handler when the mouse is over a row\n   */\n  on_mouse_over(event) {\n    event.preventDefault();\n    console.debug(\"SearchResults::on_mouse_over:event=\", event);\n    let target = event.currentTarget;\n    let index = target.getAttribute(\"index\");\n    if (index !== null && this.props.on_mouse_over) {\n      this.props.on_mouse_over(index);\n    }\n  }\n\n  /*\n   * Render the reference results selection\n   */\n  render() {\n    if (!this.has_results()) {\n      return null;\n    }\n    return (\n      <div className={this.props.className}\n           style={this.get_style()}>\n        <div style={{position: \"absolute\", top: 0, right: 0}}>\n          {this.props.loading && <span className=\"spinner-border text-info spinner-border-sm\" role=\"status\" aria-hidden=\"true\"></span>}\n          {this.build_close_button()}\n        </div>\n        <table className=\"table table-sm table-hover small queryselectwidget-results-table\">\n          <thead>\n            <tr>\n              {this.build_header_columns()}\n            </tr>\n          </thead>\n          <tbody>\n            {this.build_rows()}\n          </tbody>\n        </table>\n        {this.props.pages > 1 &&\n         <nav>\n           <ul className=\"pagination pagination-sm justify-content-center\">\n             {this.build_prev_button()}\n             {this.build_pages()}\n             {this.build_next_button()}\n           </ul>\n         </nav>\n        }\n      </div>\n    );\n  }\n}\n\nexport default SearchResults;\n","import React from \"react\";\nimport \"./SelectedValues.css\"\n\n\nclass SelectedValues extends React.Component {\n\n  constructor(props) {\n    super(props);\n\n    this.on_change = this.on_change.bind(this);\n    this.on_deselect = this.on_deselect.bind(this);\n  }\n\n  componentDidMount() {\n    this.init_confirmation();\n  }\n\n  componentDidUpdate() {\n    this.init_confirmation();\n  }\n\n  get_selected_values() {\n    return this.props.values || [];\n  }\n\n  init_confirmation() {\n    $(\"[data-toggle=confirmation]\").confirmation({\n      rootSelector: \"[data-toggle=confirmation]\",\n      btnOkLabel: _t(\"Yes\"),\n      btnOkClass: \"btn btn-outline-primary\",\n      btnOkIconClass: \"fas fa-check-circle mr-1\",\n      btnCancelLabel: _t(\"No\"),\n      btnCancelClass: \"btn btn-outline-secondary\",\n      btnCancelIconClass: \"fas fa-circle mr-1\",\n      container: \"body\",\n      singleton: true\n    });\n  }\n\n  /*\n   * Simple template interpolation that replaces ${...} placeholders\n   * with any found value from the context object.\n   *\n   * https://stackoverflow.com/questions/29182244/convert-a-string-to-a-template-string\n   */\n  interpolate(template, context) {\n    for(let [key, value] of Object.entries(context)) {\n      template = template.replace(new RegExp('\\\\$\\\\{' + key + '\\\\}', 'g'), value)\n    }\n    return template;\n  }\n\n  render_display_template(value) {\n    let template = this.props.display_template;\n    if (!template) return value;\n    let context = this.props.records[value];\n    // return the raw value if there is no replacement data\n    let broken_ref = `<span title='broken reference ${value}' class='text-danger'>${value}</span>`;\n    if (!context) return broken_ref;\n    if (typeof context === 'object' && Object.keys(context).length === 0) return broken_ref;\n    return this.interpolate(template, context);\n  }\n\n  build_selected_items() {\n    let items = [];\n    let selected_values = this.get_selected_values();\n    let readonly = this.props.readonly;\n\n    for (let value of selected_values) {\n      let context = this.props.records[value] || {};\n      let review_state = context.review_state || \"default\";\n      items.push(\n        <li value={value} className=\"d-inline-block\">\n          <div className=\"d-flex flex-nowrap p-1 mb-1 mr-1 bg-light border rounded field-validation\">\n            <span className={\"state-\" + review_state}\n                  dangerouslySetInnerHTML={{__html: this.render_display_template(value)}}></span>\n            {!readonly &&\n            <button value={value}\n                    data-toggle=\"confirmation\"\n                    data-title={_t(\"Unlink reference?\")}\n                    className=\"btn btn-sm p-0 ml-2\"\n                    onClick={this.on_deselect}>\n              <i className=\"fas fa-times-circle\"></i>\n            </button>}\n          </div>\n\n        </li>\n      );\n    }\n    return items\n  }\n\n  /*\n   * Callback when the textarea field was changed\n   * Note: This will be useful when the field is used in the sample add form\n   */\n  on_change(event) {\n    event.preventDefault();\n    let target = event.currentTarget;\n    let value = target.value;\n    let values = value.split(\"\\n\");\n    // filter out empties\n    values = values.filter(x => x);\n    // set new values directly\n    if (this.props.set_values) {\n      this.props.set_values(values);\n    }\n  }\n\n  on_deselect(event) {\n    event.preventDefault();\n    let target = event.currentTarget;\n    let value = target.getAttribute(\"value\");\n    console.debug(\"SelectedValues::on_deselect: Remove value\", value);\n    if (this.props.on_deselect) {\n      this.props.on_deselect(value);\n    }\n  }\n\n  render() {\n    return (\n      <div className=\"queryselectwidget-selected-values\">\n        <ul className=\"list-unstyled d-table-row\">\n          {this.build_selected_items()}\n        </ul>\n        {/* submitted in form */}\n        <textarea\n          className=\"d-none queryselectwidget-value\"\n          onChange={this.on_change}\n          name={this.props.name}\n          value={this.props.values.join(\"\\n\")}\n        />\n      </div>\n    );\n  }\n}\n\nexport default SelectedValues;\n","import React from \"react\"\n\nimport SearchAPI from \"../../api/search.js\"\nimport SearchField from \"../components/SearchField.js\"\nimport SearchResults from \"../components/SearchResults.js\"\nimport SelectedValues from \"../components/SelectedValues.js\"\n\n\nclass QuerySelectWidgetController extends React.Component {\n\n  constructor(props) {\n    super(props);\n\n    // Internal state\n    this.state = {\n      value_key: \"uid\",  // result object key that has the submit value stored\n      value_query_index: \"UID\",  // field index to query for values\n      records: {},  // mapping of value -> result record\n      results: [],  // `items` list of search results coming from `senaite.jsonapi`\n      columns: [],  // Columns to show\n      searchterm: \"\",  // the search term that was entered by the user\n      loading: false,  // loading flag when searching for results\n      count: 0,  // count of results (coming from `senaite.jsonapi`)\n      page: 1,  // current page (coming from `senaite.jsonapi`)\n      pages: 1,  // number of pages (coming from `senaite.jsonapi`)\n      next_url: null,  // next page API URL (coming from `senaite.jsonapi`)\n      prev_url: null,  // previous page API URL (coming from `senaite.jsonapi`)\n      b_start: 1,  // batch start for pagination (see `senaite.jsonapi.batch`)\n      focused: 0,  // current result that has the focus\n      padding: 3,  // page padding\n      complete: false,  // wake up objects\n      results_table_width: \"500px\",  // width of the search results table\n    }\n\n    // Root input HTML element\n    this.root_el = props.root_el;\n\n    // Data keys located at the root element\n    // -> initial values are set from the widget class\n    const data_keys = [\n      \"id\",  // element id\n      \"name\",  // input name that get submitted\n      \"values\",  // selected values\n      \"records\",  // Mapping of value -> result item\n      \"api_url\",  // JSON API URL for search queries\n      \"catalog\",  // catalog name\n      \"query\",  // base catalog query\n      \"search_index\",  // query search index\n      \"search_wildcard\",  // make the search term a wildcard search\n      \"limit\",  // limit to display on one page\n      \"value_key\",  // key that contains the value that is stored\n      \"value_query_index\",  // field index to use for value queries\n      \"allow_user_value\",  // allow the user to enter custom values\n      \"columns\",  // columns to be displayed in the results popup\n      \"display_template\",  // template to use for the selected values\n      \"multi_valued\",  // if true, more than one value can be set\n      \"clear_results_after_select\",  // clear results after value select\n      \"disabled\",  // if true, the field is rendered as not editable\n      \"readonly\",  // if true, the field is rendered as not editable\n      \"padding\",  // number of pages to show in navigation before and after the current\n      \"complete\",  // wake-up object search\n      \"results_table_width\",  // width of the results table\n    ]\n\n    // Query data keys and set state with parsed JSON value\n    for (let key of data_keys) {\n      let value = this.root_el.dataset[key];\n      if (value === undefined) {\n        continue;\n      }\n      this.state[key] = this.parse_json(value);\n    }\n\n    // Initialize communication API with the API URL\n    this.api = new SearchAPI({\n      api_url: this.state.api_url,\n    });\n\n    // Bind callbacks to current context\n    this.search = this.debounce(this.search).bind(this);\n    this.goto_page = this.goto_page.bind(this);\n    this.clear_results = this.clear_results.bind(this);\n    this.select = this.select.bind(this);\n    this.select_focused = this.select_focused.bind(this);\n    this.deselect = this.deselect.bind(this);\n    this.set_values = this.set_values.bind(this);\n    this.navigate_results = this.navigate_results.bind(this);\n    this.on_keydown = this.on_keydown.bind(this);\n    this.on_click = this.on_click.bind(this);\n    this.focus_row = this.focus_row.bind(this);\n    this.on_flush = this.on_flush.bind(this);\n    this.on_sync = this.on_sync.bind(this);\n    this.fix_dropdown_position = this.fix_dropdown_position.bind(this);\n\n    return this\n  }\n\n  componentDidMount() {\n    // Bind event listeners of the document\n    document.addEventListener(\"keydown\", this.on_keydown, false);\n    document.addEventListener(\"click\", this.on_click, false)\n    this.root_el.addEventListener(\"flush\", this.on_flush, false);\n    this.root_el.addEventListener(\"sync\", this.on_sync, false);\n    document.addEventListener(\"scroll\", this.fix_dropdown_position, false);\n  }\n\n  componentDidUpdate() {\n    this.fix_dropdown_position();\n  }\n\n  componentWillUnmount() {\n    // Remove event listeners of the document\n    document.removeEventListener(\"keydown\", this.on_keydown, false);\n    document.removeEventListener(\"click\", this.on_click, false);\n    this.root_el.removeEventListener(\"flush\", this.on_flush, false);\n    this.root_el.removeEventListener(\"sync\", this.on_sync, false);\n    document.removeEventListener(\"scroll\", this.fix_dropdown_position, false);\n  }\n\n  /*\n   * Throttle wrapper\n   */\n  debounce(func) {\n    let timer;\n    return function (...args) {\n      const context = this;\n      if (timer) clearTimeout(timer);\n      timer = setTimeout(() => {\n        timer = null;\n        func.apply(context, args);\n      }, 500);\n    };\n  };\n\n  /*\n   * Fix overflow at the bottom or at the right of the container\n   */\n  fix_dropdown_position() {\n    let widget = this.props.root_el;\n\n    let field = widget.querySelector(\".queryselectwidget-search-field input\");\n    let dropdown = widget.querySelector(\".queryselectwidget-results-container\");\n\n    if (!field || !dropdown) {\n      return;\n    }\n\n    let field_rect = field.getBoundingClientRect();\n    let dropdown_rect = dropdown.getBoundingClientRect();\n    let body_rect = document.body.getBoundingClientRect();\n\n    console.debug(`FIELD RECT: ${JSON.stringify(field_rect)}`);\n    console.debug(`DROPDOWN RECT: ${JSON.stringify(dropdown_rect)}`);\n    console.debug(`BODY RECT: ${JSON.stringify(body_rect)}`);\n\n    let body_height = body_rect.height;\n    let body_width = body_rect.width;\n\n    let dropdown_height = dropdown_rect.height;\n    let dropdown_width = dropdown_rect.width;\n\n    // Let the dropdown stick below the field\n    let transform = {\n      X: `translateX(${body_rect.x}px)`,\n      Y: `translateY(${body_rect.y}px)`\n    }\n\n    // dropdown overflows at the right\n    if (field_rect.left + dropdown_width > body_width) {\n      console.debug(\"Fix dropdown overflow right!\")\n      transform[\"X\"] = `translateX(${(body_rect.x - dropdown_width + field_rect.width)}px)`;\n    }\n\n    // dropdown will overflow at the bottom of the body\n    // Note: The 16px is to provide the same spacing to the search field, which is controlled by mt-2 (8px).\n    if (field_rect.bottom + dropdown_height > body_height) {\n      console.debug(\"Fix dropdown overflow bottom!\")\n      transform[\"Y\"] = `translateY(${body_rect.y - dropdown_height - field_rect.height - 16}px)`;\n    }\n\n    dropdown.style.transform = `${transform[\"X\"]} ${transform[\"Y\"]}`;\n  }\n\n  /*\n   * Trigger a custom event on the textarea field that get submitted\n   *\n   * @param {String} event_name: The name of the event to dispatch\n   * @param {Object} event_data: The data to send with the event\n   */\n  trigger_custom_event(event_name, event_data) {\n    let event = new CustomEvent(event_name, {detail: event_data, bubbles: true});\n\n    let field = document.querySelector(`textarea[name='${this.state.name}']`, this.props.root_el);\n    if (field) {\n      console.info(\"Dispatching Event\", event);\n      field.dispatchEvent(event);\n    }\n  }\n\n  /*\n   * JSON parse the given value\n   *\n   * @param {String} value: The JSON value to parse\n   */\n  parse_json(value) {\n    try {\n      return JSON.parse(value);\n    } catch (error) {\n      console.error(`Could not parse \"${value}\" to JSON`);\n    }\n  }\n\n  /*\n   * Checks if the field should be rendered as disabled\n   *\n   * @returns {Boolean} true/false if the widget is disabled\n   */\n  is_disabled() {\n    if (this.state.disabled) {\n      return true;\n    }\n    if (this.state.readonly) {\n      return true;\n    }\n    if (!this.state.multi_valued && this.state.values.length > 0) {\n      return true;\n    }\n    return false;\n  }\n\n\n  /*\n   * Checks if the search field should be rendered after select on single valued fields\n   *\n   * @returns {Boolean} true/false if the search field is rendered\n   */\n  show_search_field() {\n    if (this.state.disabled) {\n      return false;\n    }\n    if (this.state.readonly) {\n      return false;\n    }\n    if (!this.state.multi_valued && this.state.values.length > 0) {\n      return false;\n    }\n    return true;\n  }\n\n  /*\n   * Create a query object for the API\n   *\n   * This method prepares a query from the current state variables,\n   * which can be used to call the `api.search` method.\n   *\n   * @param {Object} options: Additional options to add to the query\n   * @returns {Object} The query object\n   */\n  make_query(options) {\n    options = options || {};\n\n    let query = Object.assign({\n      limit: this.state.limit,\n      complete: this.state.complete,\n      // we pass the column names to the search endpoint to provide the right data of the brain/object\n      column_names: this.get_column_names(),\n      field_name: this.state.name,\n    }, options, this.state.query);\n\n    // allow to search a custom index\n    // NOTE: This should be a ZCTextIndex!\n    let search_index = this.state.search_index || null;\n    let search_term = this.state.searchterm;\n\n    if (search_term && this.state.search_wildcard && !search_term.endsWith(\"*\")) {\n      search_term += \"*\"\n    }\n\n    // inject the search index\n    if (search_index) {\n      query[search_index] = search_term;\n    } else {\n      console.warn(`No search_index defined for search field \"${this.state.name}\"`);\n    }\n\n    // allow to custom search query cascading\n    query = Object.assign(query, this.get_search_query());\n\n    return query;\n  }\n\n  /*\n   * Read custom search query from the root element\n   *\n   * This allows external code to set a custom search query to the field for filtering\n   *\n   * @returns {Object} The search query object\n   */\n  get_search_query() {\n    let query = this.root_el.dataset.search_query;\n    if (query == null) {\n      return {};\n    }\n    return JSON.parse(query);\n  }\n\n  /*\n   * Get the column configuration from the state\n   *\n   * @returns {Array} column configuration\n   */\n  get_columns() {\n    let columns = this.state.columns || [];\n    if ({}.toString.call(columns) != '[object Array]') {\n      columns = [\n        {name: \"title\", label: \"Title\"},\n        {name: \"description\", label: \"Description\"},\n      ];\n    }\n    return columns;\n  }\n\n  /*\n   * Extract the required column names that we want\n   *\n   * This method parses the `name` keys of the column definition\n   * which can be used by the endpoint to prepare the data for us\n   *\n   * @returns {Array} of column names\n   */\n  get_column_names() {\n    let names = new Set();\n    let columns = this.get_columns();\n    columns.forEach((column) => names.add(column.name));\n    return Array.from(names);\n  }\n\n  /*\n   * Execute a search query and set the results to the state\n   *\n   * @param {Object} url_params: Additional search params for the API search URL\n   * @returns {Promise}\n   */\n  fetch_results(url_params) {\n    url_params = url_params || {};\n    // prepare the server request\n    let self = this;\n    let query = this.make_query();\n    this.toggle_loading(true);\n    let promise = this.api.search(this.state.catalog, query, url_params);\n    promise.then(function(data) {\n      console.debug(\"QuerySelectWidgetController::fetch_results:GOT DATA: \", data);\n      self.set_results_data(data);\n      self.toggle_loading(false);\n    });\n    return promise;\n  }\n\n  /*\n   * Execute a search for the given searchterm\n   *\n   * @param {String} searchterm: The value entered into the search field\n   * @returns {Promise}\n   */\n  search(searchterm) {\n    if (!searchterm && this.state.results.length > 0) {\n      this.state.searchterm = \"\";\n      return;\n    }\n    console.debug(\"QuerySelectWidgetController::search:searchterm:\", searchterm);\n    // set the searchterm directly to avoid re-rendering\n    this.state.searchterm = searchterm || \"\";\n    return this.fetch_results();\n  }\n\n  /*\n   * Fetch results of a page\n   *\n   * @param {Integer} page: The page to fetch\n   * @returns {Promise}\n   */\n  goto_page(page) {\n    page = parseInt(page);\n    let limit = parseInt(this.state.limit)\n    // calculate the beginning of the page\n    // Note: this is the count of previous items that are excluded\n    let b_start = page * limit - limit;\n    return this.fetch_results({b_start: b_start});\n  }\n\n  /*\n   * Add the value of a search result to the state\n   *\n   * @param {String} value: The selected value\n   * @returns {Array} values: current selected values\n   */\n  select(value) {\n    if (value === null) {\n      console.warn(\"QuerySelectWidgetController::select: MISSING VALUE\");\n      return;\n    }\n    console.debug(\"QuerySelectWidgetController::select:value:\", value);\n    // create a copy of the selected values\n    let values = [].concat(this.state.values);\n    // Add the new value if it is not selected yet\n    if (values.indexOf(value) == -1) {\n      values.push(value);\n    }\n    // Expose the JSON records of the selected values (UIDs) to the\n    // `data-records` attribute of the root element.\n    // This is a tweak to allow to copy the field values in Sample Add Form.\n    // Otherwise, the other fields would only see the raw value (UID) instead of\n    // the display template.\n    let records = {};\n    values.forEach((value) => {\n      records[value] = this.state.records[value];\n    });\n    this.root_el.setAttribute(\"data-records\", JSON.stringify(records));\n\n    this.setState({values: values}, () => {\n      // manually trigger a select event when the state is set\n      this.trigger_custom_event(\"select\", {value: value});\n    });\n    if (values.length > 0 && !this.state.multi_valued || this.state.clear_results_after_select) {\n      this.clear_results();\n    }\n    return values;\n  }\n\n  /*\n   * Set the focus for the given row at index\n   *\n   */\n  focus_row(rowindex) {\n    this.setState({\n      focused: rowindex\n    })\n  }\n\n  /*\n   * Add/remove the focused result\n   *\n   */\n  select_focused(searchvalue) {\n    console.debug(\"QuerySelectWidgetController::select_focused\");\n    let focused = this.state.focused;\n    let result = this.state.results.at(focused);\n    if (result) {\n      let value = result[this.state.value_key];\n      if (this.state.values.indexOf(value) == -1) {\n        this.select(value);\n      } else {\n        this.deselect(value);\n      }\n    }\n  }\n\n  /*\n   * Remove the value of a reference from the state\n   *\n   * @param {String} value: The selected value\n   * @returns {Array} values: current selected values\n   */\n  deselect(value) {\n    console.debug(\"QuerySelectWidgetController::deselect:value:\", value);\n    let values = [].concat(this.state.values);\n    let pos = values.indexOf(value);\n    if (pos > -1) {\n      values.splice(pos, 1);\n      // manually trigger deselect event\n      this.trigger_custom_event(\"deselect\", {value: value});\n    }\n    this.setState({values: values});\n    return values;\n  }\n\n  /*\n   * Set *all* values\n   *\n   * @param {Array} values: The values to be set\n   */\n  set_values(values) {\n    // get the current set values\n    let current_values = this.state.values;\n\n    if (!current_values && !values) {\n      // nothing to do\n      return;\n    }\n\n    // Inject the provided records of the root element\n    // This allows to bypass the additional fetch to the server.\n    // Currently only used in Sample Add Form when values are copied.\n    let records = this.parse_json(this.root_el.dataset.records);\n    if (records != null) {\n      this.state[\"records\"] = records;\n    }\n\n    let to_sync = []\n\n    for (const value of values) {\n      // check a sync is needed\n      if (this.state.records[value] == null) {\n        to_sync.push(value);\n      }\n\n      if (current_values.indexOf(value) > -1) {\n        // value not changed -> continue\n        continue;\n      }\n      if (current_values.indexOf(value) == -1) {\n        // value added -> trigger select event\n        this.trigger_custom_event(\"select\", {value: value});\n      }\n    }\n\n    for (const value of current_values) {\n      if (values.indexOf(value) == -1) {\n        // value removed -> trigger deselect event\n        this.trigger_custom_event(\"deselect\", {value: value});\n      }\n    }\n\n    // ensure we have valid records and set the values\n    if (to_sync.length > 0) {\n      this.sync_records(to_sync).then(() => {\n        this.setState({values: values});\n      });\n    } else {\n      // set the state with the new values\n      this.setState({values: values});\n    }\n  }\n\n  /*\n   * Navigate the results either up or down\n   *\n   * @param {String} direction: either up or down\n   */\n  navigate_results(direction) {\n    let page = this.state.page;\n    let pages = this.state.pages;\n    let results = this.state.results;\n    let focused = this.state.focused;\n    let searchterm = this.state.searchterm;\n\n    console.debug(\"QuerySelectWidgetController::navigate_results:focused:\", focused);\n\n    if (direction == \"up\") {\n      if (focused > 0) {\n        this.setState({focused: focused - 1});\n      } else {\n        this.setState({focused: 0});\n        if (page > 1) {\n          this.goto_page(page - 1);\n        }\n      }\n    }\n\n    else if (direction == \"down\") {\n      if (this.state.results.length == 0) {\n        this.search(searchterm);\n      }\n      if (focused < results.length - 1) {\n        this.setState({focused: focused + 1});\n      } else {\n        this.setState({focused: 0});\n        if (page < pages) {\n          this.goto_page(page + 1);\n        }\n      }\n    }\n\n    else if (direction == \"left\") {\n      this.setState({focused: 0});\n      if (page > 0) {\n        this.goto_page(page - 1);\n      }\n    }\n\n    else if (direction == \"right\") {\n      this.setState({focused: 0});\n      if (page < pages) {\n        this.goto_page(page + 1);\n      }\n    }\n  }\n\n  /*\n   * Toggle loading state\n   *\n   * @param {Boolean} toggle: The loading state to set\n   * @returns {Boolean} toggle: The current loading state\n   */\n  toggle_loading(toggle) {\n    if (toggle == null) {\n      toggle = false;\n    }\n    this.setState({\n      loading: toggle\n    });\n    return toggle;\n  }\n\n  /*\n   * Set results data coming from `senaite.jsonapi`\n   *\n   * @param {Object} data: JSON search result object returned from `senaite.jsonapi`\n   */\n  set_results_data(data) {\n    data = data || {};\n    let items = data.items || [];\n\n    // Mapping of value -> JSON API result item\n    //\n    // NOTE: This is only used for UID reference field to render a friendly name\n    //       for stored UIDs when the edit form is initially rendered\n    let records = Object.assign(this.state.records, {})\n    for (let item of items) {\n      let value = item[this.state.value_key];\n      records[value] = item;\n    }\n\n    this.setState({\n      records: records,\n      results: items,\n      count: data.count || 0,\n      page: data.page || 1,\n      pages: data.pages || 1,\n      next_url: data.next || null,\n      prev_url: data.previous || null,\n    });\n  }\n\n  /*\n   * Clear values and results\n   */\n  flush() {\n    this.clear_results();\n    this.setState({\n      values: [],\n      loading: false,\n    })\n  }\n\n  /*\n   * Fetch the records for the given values with an explicit value search\n   *\n   * NOTE: This will make a new catalog search using the value_query_index to fetch the items from the server!\n   */\n  sync_records(values) {\n    values = values || this.state.values;\n    // get the current records\n    let records = Object.assign(this.state.records, {})\n    // check which values have no records\n    let missing = values.filter((value) => !(value in records))\n    // nothing to do if we have records for all values\n    if (missing.length == 0) return;\n    // prepare a query for the missing values\n    let index = this.state.value_query_index || \"UID\";\n    let value_query = {\n      complete: this.state.complete,\n      // we pass the column names to the search endpoint to provide the right data of the brain/object\n      column_names: this.get_column_names(),\n      field_name: this.state.name,\n    };\n    // Query the values only w/o any other filters\n    value_query[index] = missing;\n    let promise = this.api.search(this.state.catalog, value_query);\n    this.toggle_loading(true);\n    promise.then((data) => {\n      let items = data.items || [];\n      for (let item of items) {\n        let value = item[this.state.value_key];\n        records[value] = item;\n      }\n      this.toggle_loading(false);\n      this.setState({records: records});\n    });\n    return promise;\n  }\n\n  /*\n   * Clear results from the state\n   */\n  clear_results() {\n    this.setState({\n      results: [],\n      count: 0,\n      page: 1,\n      pages: 1,\n      next_url: null,\n      prev_url: null,\n      b_start: 1,\n      focused: 0,\n      searchterm: \"\"\n    });\n  }\n\n  /*\n   * ReactJS event handler for keydown event\n   */\n  on_keydown(event){\n    // clear results when ESC key is pressed\n    if(event.keyCode === 27) {\n      this.clear_results();\n    }\n  }\n\n  /*\n   * ReactJS event handler for click events\n   */\n  on_click(event) {\n    // clear results when clicked outside of the widget\n    let widget = this.props.root_el;\n    let target = event.target;\n    if (!widget.contains(target)) {\n      this.clear_results();\n    }\n  }\n\n  /*\n   * ReactJS event handler for flush events\n   */\n  on_flush(event) {\n    this.flush();\n  }\n\n  /*\n   * ReactJS event handler for sync events\n   */\n  on_sync(event) {\n    let values = event.detail.values || [];\n    let is_array = {}.toString.call( values ) === '[object Array]';\n    if (!is_array) {\n      values = values.split(\"/n\");\n    }\n    this.sync_records(values);\n  }\n\n  render() {\n    return (\n        <div id={this.state.id} className={this.props.root_class}>\n          <SelectedValues\n            className=\"queryselectwidget-selected-values\"\n            values={this.state.values}\n            records={this.state.records}\n            display_template={this.state.display_template}\n            name={this.state.name}\n            on_deselect={this.deselect}\n            set_values={this.set_values}\n            readonly={this.state.readonly}\n          />\n          {this.show_search_field() &&\n          <SearchField\n            className=\"queryselectwidget-search-field\"\n            name=\"query-select-search\"\n            loading={this.state.loading}\n            disabled={this.is_disabled()}\n            on_search={this.search}\n            on_clear={this.clear_results}\n            on_focus={this.search}\n            on_arrow_key={this.navigate_results}\n            on_enter={this.select_focused}\n            on_blur={this.select_focused}\n          />}\n          <SearchResults\n            className=\"queryselectwidget-results-container position-fixed shadow-lg border border-light rounded-lg bg-white mt-2 p-1\"\n            columns={this.get_columns()}\n            values={this.state.values}\n            value_key={this.state.value_key}\n            searchterm={this.state.searchterm}\n            width={this.state.results_table_width}\n            results={this.state.results}\n            allow_user_value={this.state.allow_user_value}\n            loading={this.state.loading}\n            focused={this.state.focused}\n            count={this.state.count}\n            page={this.state.page}\n            pages={this.state.pages}\n            padding={this.state.padding}\n            next_url={this.state.next_url}\n            prev_url={this.state.prev_url}\n            on_select={this.select}\n            on_page={this.goto_page}\n            on_clear={this.clear_results}\n            on_mouse_over={this.focus_row}\n          />\n        </div>\n    );\n  }\n}\n\nexport default QuerySelectWidgetController;\n","class AddressWidgetAPI {\n\n  constructor(props) {\n    console.debug(\"AddressWidgetAPI::constructor\")\n    this.portal_url = props.portal_url;\n    this.on_api_error = props.on_api_error || function(response) {};\n    return this;\n  }\n\n  get_url(endpoint) {\n    return `${this.portal_url}/${endpoint}`\n  }\n\n  /*\n   * Fetch JSON resource from the server\n   *\n   * @param {string} endpoint\n   * @param {object} options\n   * @returns {Promise}\n   */\n  get_json(endpoint, options) {\n    var data, init, method, on_api_error, request, url;\n    if (options == null) {\n      options = {};\n    }\n    method = options.method || \"POST\";\n    data = JSON.stringify(options.data) || \"{}\";\n    on_api_error = this.on_api_error;\n    url = this.get_url(endpoint);\n    init = {\n      method: method,\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"X-CSRF-TOKEN\": this.get_csrf_token()\n      },\n      body: method === \"POST\" ? data : null,\n      credentials: \"include\"\n    };\n    console.info(\"AddressWidgetAPI::fetch:endpoint=\" + endpoint + \" init=\", init);\n    request = new Request(url, init);\n    return fetch(request).then(function(response) {\n      if (!response.ok) {\n        return Promise.reject(response);\n      }\n      return response;\n    }).then(function(response) {\n      return response.json();\n    }).catch(function(response) {\n      on_api_error(response);\n      return response;\n    });\n  }\n\n  fetch_subdivisions(parent) {\n    let url = `geo_subdivisions`\n    console.debug(\"AddressWidgetAPI::fetch_subdivisions:url=\", url);\n    let options = {\n      method: \"POST\",\n      data: {\n        \"parent\": parent,\n      }\n    }\n    return this.get_json(url, options)\n  }\n\n  /*\n   * Get the plone.protect CSRF token\n   */\n  get_csrf_token() {\n    return document.querySelector(\"#protect-script\").dataset.token;\n  };\n\n}\n\nexport default AddressWidgetAPI;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\n\n\nclass LocationSelector extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render_options() {\n    let options = [];\n    let locations = this.props.locations;\n    options.push(\n      <option value=''></option>\n    );\n    if (Array.isArray(locations)) {\n      for (let location of locations) {\n        options.push(\n          <option value={location}>{location}</option>\n        )\n      }\n    }\n    return options;\n  }\n\n  render() {\n    return (\n      <select\n        id={this.props.id}\n        name={this.props.name}\n        value={this.props.value}\n        onChange={this.props.onChange}>\n        {this.render_options()}\n      </select>\n    );\n  }\n}\n\nexport default LocationSelector;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport LocationSelector from \"./LocationSelector.js\";\n\n\nclass AddressField extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  is_location_selector() {\n    return Array.isArray(this.props.locations);\n  }\n\n  is_visible() {\n    let visible = true;\n    if (this.is_location_selector()) {\n      visible = this.props.locations.length > 0;\n    }\n    return visible;\n  }\n\n  render_element() {\n    if (this.is_location_selector()) {\n      return (\n        <LocationSelector\n          id={this.props.id}\n          name={this.props.name}\n          value={this.props.value}\n          locations={this.props.locations}\n          onChange={this.props.onChange} />\n      )\n    } else {\n      return (\n        <input type=\"text\"\n          id={this.props.id}\n          name={this.props.name}\n          value={this.props.value}\n          onChange={this.props.onChange} />\n      )\n    }\n  }\n\n  render() {\n    if (!this.is_visible()) {\n      return (\n        <input type=\"hidden\"\n          id={this.props.id}\n          name={this.props.name}\n          value={this.props.value} />\n      )\n    }\n    return (\n      <div class=\"form-group form-row mb-2\">\n        <div class=\"col input-group input-group-sm\">\n          <div class=\"input-group-prepend\">\n            <label class=\"input-group-text\"\n              for={this.props.id}>\n              {this.props.label}\n            </label>\n          </div>\n          {this.render_element()}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default AddressField;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport AddressField from \"./AddressField.js\";\n\n\nclass Address extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      country: props.country,\n      subdivision1: props.subdivision1,\n      subdivision2: props.subdivision2,\n      city: props.city,\n      zip: props.zip,\n      address: props.address,\n      address_type: props.address_type,\n    }\n\n    // Event handlers\n    this.on_country_change = this.on_country_change.bind(this);\n    this.on_subdivision1_change = this.on_subdivision1_change.bind(this);\n    this.on_subdivision2_change = this.on_subdivision2_change.bind(this);\n    this.on_city_change = this.on_city_change.bind(this);\n    this.on_zip_change = this.on_zip_change.bind(this);\n    this.on_address_change = this.on_address_change.bind(this);\n  }\n\n  force_array(value) {\n    if (!Array.isArray(value)) {\n      value = [];\n    }\n    return value;\n  }\n\n  /**\n   * Returns the list of first-level subdivisions of the current country,\n   * sorted alphabetically\n   */\n  get_subdivisions1() {\n    let country = this.state.country;\n    return this.force_array(this.props.subdivisions1[country]);\n  }\n\n  /**\n   * Returns the list of subdivisions of the current first-level subdivision,\n   * sorted sorted alphabetically\n   */\n  get_subdivisions2() {\n    let subdivision1 = this.state.subdivision1;\n    return this.force_array(this.props.subdivisions2[subdivision1]);\n  }\n\n  get_label(key) {\n    let country = this.state.country;\n    let label = this.props.labels[country];\n    if (label != null && label.constructor == Object && key in label) {\n      label = label[key];\n    } else {\n      label = this.props.labels[key];\n    }\n    return label;\n  }\n\n  /** Event triggered when the value for Country selector changes. Updates the\n   * selector of subdivisions (e.g. states) with the list of top-level\n   * subdivisions for the selected country\n   */\n  on_country_change(event) {\n    let value = event.currentTarget.value;\n    console.debug(`Address::on_country_change: ${value}`);\n    if (this.props.on_country_change) {\n      this.props.on_country_change(value);\n    }\n    this.setState({\n      country: value,\n      subdivision1: \"\",\n      subdivision2: \"\",\n    });\n  }\n\n  /** Event triggered when the value for the Country first-level subdivision\n   * (e.g. state) selector changes. Updates the selector of subdivisions (e.g.\n   * districts) for the selected subdivision and country\n   */\n  on_subdivision1_change(event) {\n    let value = event.currentTarget.value;\n    console.debug(`Address::on_subdivision1_change: ${value}`);\n    if (this.props.on_subdivision1_change) {\n      let country = this.state.country\n      this.props.on_subdivision1_change(country, value);\n    }\n    this.setState({\n      subdivision1: value,\n      subdivision2: \"\",\n    });\n  }\n\n  /** Event triggered when the value for the second-level subdivision (e.g.\n   * district) selector changes\n   */\n  on_subdivision2_change(event) {\n    let value = event.currentTarget.value;\n    console.debug(`Address::on_subdivision2_change: ${value}`);\n    if (this.props.on_subdivision2_change) {\n      this.props.on_subdivision2_change(value);\n    }\n    this.setState({subdivision2: value});\n  }\n\n  /** Event triggered when the value for the address field changes\n   */\n  on_address_change(event) {\n    let value = event.currentTarget.value;\n    this.setState({address: value});\n  }\n\n  /** Event triggered when the value for the zip field changes\n   */\n  on_zip_change(event) {\n    let value = event.currentTarget.value;\n    this.setState({zip: value});\n  }\n\n  /** Event triggered when the value for the city field changes\n   */\n  on_city_change(event) {\n    let value = event.currentTarget.value;\n    this.setState({city: value});\n  }\n\n  get_input_id(subfield) {\n    let id = this.props.id;\n    let index = this.props.index;\n    return `${id}-${index}-${subfield}`\n  }\n\n  get_input_name(subfield) {\n    let name = this.props.name;\n    let index = this.props.index;\n    return `${name}.${index}.${subfield}`\n  }\n\n  render() {\n    return (\n      <div>\n          <AddressField\n            id={this.get_input_id(\"country\")}\n            name={this.get_input_name(\"country\")}\n            label={this.props.labels.country}\n            value={this.state.country}\n            locations={this.props.countries}\n            onChange={this.on_country_change} />\n\n          <AddressField\n            id={this.get_input_id(\"subdivision1\")}\n            name={this.get_input_name(\"subdivision1\")}\n            label={this.get_label(\"subdivision1\")}\n            value={this.state.subdivision1}\n            locations={this.get_subdivisions1()}\n            onChange={this.on_subdivision1_change} />\n\n          <AddressField\n            id={this.get_input_id(\"subdivision2\")}\n            name={this.get_input_name(\"subdivision2\")}\n            label={this.get_label(\"subdivision2\")}\n            value={this.state.subdivision2}\n            locations={this.get_subdivisions2()}\n            onChange={this.on_subdivision2_change} />\n\n          <AddressField\n            id={this.get_input_id(\"city\")}\n            name={this.get_input_name(\"city\")}\n            label={this.props.labels.city}\n            value={this.state.city}\n            onChange={this.on_city_change} />\n\n          <AddressField\n            id={this.get_input_id(\"zip\")}\n            name={this.get_input_name(\"zip\")}\n            label={this.props.labels.zip}\n            value={this.state.zip}\n            onChange={this.on_zip_change} />\n\n          <AddressField\n            id={this.get_input_id(\"address\")}\n            name={this.get_input_name(\"address\")}\n            label={this.props.labels.address}\n            value={this.state.address}\n            onChange={this.on_address_change} />\n\n          <input type=\"hidden\"\n            id={this.get_input_id(\"type\")}\n            name={this.get_input_name(\"type\")}\n            value={this.state.address_type} />\n\n      </div>\n    );\n  }\n\n}\n\nexport default Address;","import React from \"react\"\nimport ReactDOM from \"react-dom\"\n\nimport AddressWidgetAPI from \"./api.js\"\nimport Address from \"./components/Address.js\"\n\n\nclass AddressWidgetController extends React.Component {\n\n  constructor(props) {\n    super(props);\n\n    // Root input HTML element\n    let el = props.root_el;\n\n    this.state = {};\n\n    // Data keys located at the root element\n    // -> initial values are set from the widget class\n    const data_keys = [\n      \"id\",\n      \"name\",\n      \"items\",\n      \"portal_url\",\n      \"labels\",\n      \"countries\",\n      \"subdivisions1\",\n      \"subdivisions2\",\n    ];\n\n    // Query data keys and set state with parsed JSON value\n    for (let key of data_keys) {\n      let value = el.dataset[key];\n      this.state[key] = this.parse_json(value);\n    }\n\n    // Initialize communication API with the API URL\n    this.api = new AddressWidgetAPI({\n      portal_url: this.state.portal_url,\n    });\n\n    // Bind callbacks to current context\n    this.on_country_change = this.on_country_change.bind(this);\n    this.on_subdivision1_change = this.on_subdivision1_change.bind(this);\n\n    return this;\n  }\n\n  parse_json(value) {\n    try {\n      return JSON.parse(value);\n    } catch (error) {\n      console.error(`Could not parse \"${value}\" to JSON`);\n    }\n  }\n\n  /**\n   * Event triggered when the user selects a country. Function fetches and\n   * updates the geo mapping with the first level subdivisions for the selected\n   * country if are not up-to-date yet. It also updates the label for the first\n   * level subdivision in accordance.\n   */\n  on_country_change(country) {\n    console.debug(`widget::on_country_change: ${country}`);\n    let self = this;\n    let promise = this.api.fetch_subdivisions(country);\n    promise.then(function(data){\n\n      // Update the label with the type of 1st-level subdivisions\n      let labels = {...self.state.labels};\n      if (data.length > 0) {\n        labels[country][\"subdivision1\"] = data[0].type;\n      }\n\n      // Create a copy instead of modifying the existing dict from state var\n      let subdivisions = {...self.state.subdivisions1};\n\n      // Only interested in names, sorted alphabetically\n      subdivisions[country] = data.map((x) => x.name).sort();\n\n      // Update current state with the changes\n      self.setState({\n        subdivisions1: subdivisions,\n        labels: labels,\n      });\n    });\n    return promise;\n  }\n\n  /**\n   * Event triggered when the user selects a first-level subdivision of a\n   * country. Function fetches and updates the geo mapping with the second level\n   * subdivisions for the selected subdivision if are not up-to-date. It also\n   * updates the label for the second level subdivision in accordance.\n   */\n  on_subdivision1_change(country, subdivision) {\n    console.debug(`widget::on_subdivision1_change: ${country}, ${subdivision}`);\n    let self = this;\n    let promise = this.api.fetch_subdivisions(subdivision);\n    promise.then(function(data){\n\n      // Update the label with the type of 1st-level subdivisions\n      let labels = {...self.state.labels};\n      if (data.length > 0) {\n        labels[country][\"subdivision2\"] = data[0].type;\n      }\n\n      // Create a copy instead of modifying the existing dict from state var\n      let subdivisions = {...self.state.subdivisions2};\n\n      // Only interested in names, sorted alphabetically\n      subdivisions[subdivision] = data.map((x) => x.name).sort();\n\n      // Update current state with the changes\n      self.setState({\n        subdivisions2: subdivisions,\n        labels: labels,\n      });\n    });\n    return promise;\n  }\n\n  render_items() {\n    let html_items = [];\n    let items = this.state.items;\n    for (const [index, item] of items.entries()) {\n      let section_title = \"\";\n      if (items.length > 1) {\n        // Only render the title if more than one address\n        section_title = (\n          <strong>{this.state.labels[item.type]}</strong>\n        )\n      }\n\n      html_items.push(\n        <div class=\"mb-2 pt-2\">\n          {section_title}\n          <Address\n            id={this.state.id}\n            name={this.state.name}\n            index={index}\n            address_type={item.type}\n            country={item.country}\n            subdivision1={item.subdivision1}\n            subdivision2={item.subdivision2}\n            city={item.city}\n            zip={item.zip}\n            address={item.address}\n            labels={this.state.labels}\n            countries={this.state.countries}\n            subdivisions1={this.state.subdivisions1}\n            subdivisions2={this.state.subdivisions2}\n            on_country_change={this.on_country_change}\n            on_subdivision1_change={this.on_subdivision1_change}\n          />\n        </div>\n      );\n    }\n    return html_items;\n  }\n\n  render() {\n    return (\n        <div className=\"addresswidget\">\n          {this.render_items()}\n        </div>\n    );\n  }\n}\n\nexport default AddressWidgetController;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\n// https://www.tiny.cloud/docs/tinymce/6\nimport tinymce from \"tinymce\";\n// https://github.com/jackocnr/intl-tel-input#readme\nimport intlTelInput from \"intl-tel-input\";\nimport \"intl-tel-input/build/css/intlTelInput.css\";\n// Custom ReactJS controlled widgets\nimport QuerySelectWidgetController from \"./queryselect/widget.js\"\nimport AddressWidgetController from \"./addresswidget/widget.js\"\n\n\n// Query Select Widget\nexport const render_queryselect_widget = (el) => {\n  ReactDOM.render(<QuerySelectWidgetController root_class=\"queryselectfield\" root_el={el}/>, el);\n}\n\n// UID Reference Widget\nexport const render_uidreference_widget = (el) => {\n  ReactDOM.render(<QuerySelectWidgetController root_class=\"uidreferencefield\" root_el={el}/>, el);\n}\n\n// Address Widget\nexport const render_address_widget = (el) => {\n  ReactDOM.render(<AddressWidgetController root_class=\"address\" root_el={el}/>, el);\n}\n\n// TinyMCE Widget\nexport const render_tinymce_widget = (el) => {\n  tinymce.init({\n    height: 300,\n    paste_data_images: true,\n    target: el,\n    plugins: [\"paste\", \"link\", \"fullscreen\", \"table\", \"code\"],\n    // NOTE: CSS file must match configuration of entry point in webpack.config.js\n    content_css : \"/++plone++senaite.core.static/bundles/senaite.core.css\",\n  })\n}\n\n// Phone Widget\nexport const render_phone_widget = (el) => {\n  let id = el.dataset.intlTelInputId;\n  let initial_country = el.dataset.initial_country;\n  let preferred_countries = JSON.parse(el.dataset.preferred_countries);\n  let error_codes = [\"Invalid number\", \"Invalid country code\", \"Too short\", \"Too long\", \"Invalid number\"];\n  let iti = intlTelInput(el, {\n    initialCountry: initial_country,\n    preferredCountries: preferred_countries,\n    // avoid that the dropdown is cropped in records widget\n    dropdownContainer: document.body,\n    // https://github.com/jackocnr/intl-tel-input#utilities-script\n    utilsScript: \"++plone++senaite.core.static/modules/intl-tel-input/js/utils.js\"\n  });\n  // add event handler only once\n  if (id === undefined) {\n    el.addEventListener(\"blur\", () => {\n      // validation\n      let valid = iti.isValidNumber();\n      let number = iti.getNumber();\n      let field = el.closest(\".field\");\n      if (valid) {\n        field.classList.remove(\"error\");\n        field.title = \"\";\n      } else {\n        field.classList.add(\"error\");\n        let error_code = iti.getValidationError();\n        let error_msg = error_codes[error_code];\n        field.title = error_msg;\n      }\n      // always set the number (even if validation failed!)\n      let name = el.dataset.name;\n      let hidden = document.querySelector(\"input[name='\" + name + \"']\");\n      hidden.value = number;\n    });\n  }\n}\n","import {\n  render_address_widget,\n  render_phone_widget,\n  render_queryselect_widget,\n  render_tinymce_widget,\n  render_uidreference_widget,\n} from \"./widgets/renderer.js\"\n\n\n// Widget Renderers\nconst WIDGETS = [\n  // Query Select Widget\n  {\n    selector: \".senaite-queryselect-widget-input\",\n    renderer: (el) => render_queryselect_widget(el),\n  },\n  // UID Reference Widget\n  {\n    selector: \".senaite-uidreference-widget-input\",\n    renderer: (el) => render_uidreference_widget(el),\n  },\n  // Address Widget\n  {\n    selector: \".senaite-address-widget-input\",\n    renderer: (el) => render_address_widget(el),\n  },\n  // Phone Widget\n  {\n    selector: \".senaite-phone-widget-input\",\n    renderer: (el) => render_phone_widget(el),\n  },\n  // TinyMCE Widget\n  {\n    selector: \"textarea.mce_editable,div.ArchetypesRichWidget textarea,textarea[name='form.widgets.IRichTextBehavior.text'],textarea.richTextWidget\",\n    renderer: (el) => render_tinymce_widget(el),\n  }\n]\n\n/** Initialize all widgets below a certain root element\n  * */\nconst render_all_widgets = (root_element) => {\n  WIDGETS.forEach((cfg) => {\n    let root = root_element instanceof(Node) ? root_element : document;\n    let elements = root.querySelectorAll(cfg.selector);\n    let renderer = cfg.renderer;\n    elements.forEach((element) => {\n      if (renderer) {\n        renderer(element);\n      } else {\n        throw new Error(\"Widget renderer required\");\n      }\n    });\n  });\n}\n\n// Initialize all widgets when the document is ready\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n  console.info(\"*** SENAITE CORE WIDGETS JS LOADED ***\");\n\n  // Render all (visble) widgets on the current page\n  render_all_widgets();\n\n  // DataGrid event handler when a new row was added\n  document.body.addEventListener(\"datagrid:row_added\", (event) => {\n    // We need to initialize all widgets within the new row, otherwise they\n    // won't be functional\n    render_all_widgets(event.detail.row);\n  });\n\n});\n"],"names":["factory","undefined","allCountries","i","length","c","name","iso2","dialCode","priority","areaCodes","_defineProperties","target","props","descriptor","enumerable","configurable","writable","Object","defineProperty","key","intlTelInputGlobals","getInstance","input","id","getAttribute","window","instances","documentReady","document","readyState","defaults","allowDropdown","autoHideDialCode","autoPlaceholder","customContainer","customPlaceholder","dropdownContainer","excludeCountries","formatOnDisplay","geoIpLookup","hiddenInput","initialCountry","localizedCountries","nationalMode","onlyCountries","placeholderNumberType","preferredCountries","separateDialCode","utilsScript","regionlessNanpNumbers","forEachProp","obj","callback","keys","forEachInstance","method","Iti","options","_this","this","instance","Constructor","TypeError","_classCallCheck","telInput","activeItem","highlightedItem","customOptions","value","hasOwnProperty","hadInitialPlaceholder","Boolean","protoProps","_this2","isMobile","test","navigator","userAgent","body","classList","add","Promise","autoCountryPromise","resolve","reject","resolveAutoCountryPromise","rejectAutoCountryPromise","utilsScriptPromise","resolveUtilsScriptPromise","rejectUtilsScriptPromise","promise","all","selectedCountryData","_processCountryData","_generateMarkup","_setInitialState","_initListeners","_initRequests","_processAllCountries","_processCountryCodes","_processPreferredCountries","_translateCountriesByLocale","countries","sort","_countryNameSort","countryCode","countryCodeMaxLen","countryCodes","index","lowerCaseOnlyCountries","map","country","toLowerCase","filter","indexOf","lowerCaseExcludeCountries","iso","a","b","localeCompare","dialCodes","_addCountryCode","_i","_c","rootCountryCode","j","areaCode","k","partialDialCode","substr","countryData","_getCountryData","push","attrs","container","el","createElement","setAttribute","appendChild","hasAttribute","form","parentClass","wrapper","_createEl","parentNode","insertBefore","flagsContainer","selectedFlag","role","concat","selectedFlagInner","selectedDialCode","dropdownArrow","countryList","_appendListItems","dropdown","hiddenInputName","lastIndexOf","type","className","preferred","tmp","idSuffix","insertAdjacentHTML","attributeValue","inputValue","val","charAt","_getDialCode","isRegionlessNanp","_isRegionlessNanp","_this$options","_updateFlagFromNumber","_setFlag","defaultCountry","_updateValFromNumber","_initKeyListeners","_initBlurListeners","_initDropdownListeners","_initHiddenInputListener","_this3","_handleHiddenInputSubmit","getNumber","addEventListener","tagName","_this4","_handleLabelClick","e","contains","focus","preventDefault","label","_getClosestLabel","_handleClickSelectedFlag","disabled","readOnly","_showDropdown","_handleFlagsContainerKeydown","stopPropagation","_closeDropdown","_this5","intlTelInputUtils","loadUtils","_loadAutoCountry","autoCountry","handleAutoCountry","startedLoadingAutoCountry","setTimeout","_this6","_handleKeyupEvent","_triggerCountryChange","_handleClipboardEvent","number","max","_this7","_handleSubmitOrBlurEvent","_removeEmptyDialCode","numeric","_getNumeric","s","replace","createEvent","initEvent","dispatchEvent","remove","_setDropdownPosition","_highlightListItem","_scrollTo","_bindDropdownListeners","_trigger","shouldHaveClass","_this8","pos","getBoundingClientRect","windowTop","pageYOffset","documentElement","scrollTop","inputTop","top","dropdownHeight","offsetHeight","dropdownFitsBelow","innerHeight","dropdownFitsAbove","_toggleClass","extraTop","style","left","scrollLeft","_handleWindowScroll","_this9","_handleMouseoverCountryList","listItem","_getClosestListItem","_handleClickCountryList","_selectListItem","isOpening","_handleClickOffToClose","query","queryTimer","_handleKeydownOnDropdown","_handleUpDownKey","_handleEnterKey","clearTimeout","_searchForCountry","next","previousElementSibling","nextElementSibling","_startsWith","querySelector","originalNumber","useNational","_intlTelInputUtils$nu","numberFormat","NATIONAL","INTERNATIONAL","format","formatNumber","_beforeSetNumber","isNanp","alreadySelected","shouldFocus","prevItem","ignoreOnlyCountriesOption","allowFail","Error","prevCountry","title","innerHTML","selectedFlagWidth","offsetWidth","_getHiddenSelectedFlagWidth","paddingLeft","_updatePlaceholder","nextItem","containerClone","cloneNode","visibility","flagsContainerClone","selectedFlagClone","width","removeChild","shouldSetPlaceholder","numberType","placeholder","getExampleNumber","flagChanged","_updateDialCode","len","setSelectionRange","removeEventListener","element","middle","containerHeight","containerTop","containerBottom","elementHeight","elementTop","elementBottom","newScrollTop","middleOffset","heightDifference","newDialCodeBare","hasSelectedListItem","newNumber","inputVal","newDialCode","prevDialCode","includeAreaCode","numericChars","isNaN","parseInt","trim","numericVal","start","_cap","setCountry","removeAttribute","getExtension","_getFullNumber","getNumberType","getValidationError","isValidNumber","originalCountryCode","prototype","getCountryData","injectScript","path","handleSuccess","handleFailure","script","onload","onerror","async","src","startedLoadingUtilsScript","version","iti","_init","module","exports","intlTelInput","typeOf$1","x","t","Array","isPrototypeOf","constructor","String","eq$2","f","eq","eqString","y","eqArray","eqa","eqRecord","kx","ky","compareFn","contramap","xs","slice","call","sort$1","eqSortedArray","q","eqAny","tx","isEquatableType","isType$1","isSimpleType","eq$1","isString$1","isObject","isArray$1","isNull","isBoolean","isUndefined","isNullable","isNonNullable","isFunction","isNumber","noop","compose","fa","fb","args","arguments","apply","compose1","fbc","fab","constant","identity","tripleEquals","curry","fn","initialArgs","restArgs","not","never","always","none","NONE","thunk","fold","n","_s","isSome","isNone","getOr","getOrThunk","getOrDie","msg","getOrNull","getOrUndefined","or","orThunk","each","bind","exists","forall","toArray","toString","some","constant_a","self","me","Optional","from","nativeSlice","nativeIndexOf","nativePush","rawIndexOf","ts","contains$3","pred","map$3","r","each$k","eachr","partition","pass","fail","filter$4","foldr","acc","foldl","findUntil$1","until","find$3","findIndex$2","flatten","reverse","difference","a1","a2","comparator","copy","get$a","head","last$2","findMap","arr","hasOwnProperty$1","each$j","map$2","tupleMap","v","tuple","objAcc","internalFilter","onTrue","onFalse","filter$3","get$9","has$2","hasNonNullableKey","isArray","each$i","o","cb","l","map$1","array","out","item","filter$2","indexOf$1","reduce","collection","iteratee","accumulator","thisArg","findIndex$1","predicate","last$1","__assign","assign","p","__spreadArray","to","pack","ar","cached","called","unknown$2","nu$4","major","minor","Version","nu","detect","versionRegexes","agent","cleanedAgent","regexes","firstMatch","group","Number","find$2","unknown","detect$2","candidates","candidate","search","contains$2","str","startsWith","prefix","checkRange","blank","trim$4","lTrim","rTrim","isNotEmpty","isEmpty$3","normalVersionRegex","checkContains","uastring","browsers","brand","oses","PlatformInfo","edge","chrome","opera","firefox","safari","nu$3","info","current","isBrowser","isEdge","isChrome","isIE","isOpera","isFirefox","isSafari","Browser","windows","android","linux","solaris","freebsd","chromeos","nu$2","isOS","isWindows","isiOS","isAndroid","isOSX","isLinux","isSolaris","isFreeBSD","isChromeOS","OperatingSystem","mediaMatch","matchMedia","matches","platform$2","userAgentDataOpt","browser","userAgentData","brands","uaBrand","lcBrand","_a","detectBrowser$1","detectBrowser","os","detectOs","deviceType","isiPad","isiPhone","isTouch","isTablet","isPhone","iOSwebview","isDesktop","isWebView","DeviceType","PlatformDetection","platform$1","browser$4","webkit","fileApi","URL","createObjectURL","windowsPhone","Env","ie","gecko","mac","iOS","contentEditable","transparentSrc","caretAfter","range","getSelection","documentMode","ceFalse","cacheSuffix","experimentalShadowDom","canHaveCSP","desktop","whiteSpaceRegExp$2","trim$3","is$3","walk$3","Tools","is","makeMap","items","delim","split","grep","inArray","hasOwn","extend","exts","ext","name_1","create","root","sp","scn","de","cn","exec","match","ns","createNS","onCreate","parent","static","walk","explode","d","_addCacheSuffix","url","fromDom$2","node","dom","SugarElement","html","scope","div","hasChildNodes","childNodes","tag","text","createTextNode","recurse","cur","is$2","selector","nodeType","elem","msMatchesSelector","webkitMatchesSelector","mozMatchesSelector","bypassSelector","childElementCount","e1","e2","contains$1","compareDocumentPosition","Node","DOCUMENT_POSITION_CONTAINED_BY","ieContains","d1","d2","regularContains","Function","nodeName","isType","isElement$6","isText$8","isDocument$2","isDocumentFragment$1","owner$1","ownerDocument","documentOrOwner","dos","defaultView","prevSibling","previousSibling","nextSibling","prevSiblings","nextSiblings","children","child$1","cs","firstChild","lastChild","childNodesCount","isShadowRoot","host","supported","Element","attachShadow","getRootNode","isSupported$1","getStyleContainer","doc","getHead","getShadowHost","before$4","marker","after$3","append$1","prepend","append","elements","empty","textContent","rogue","remove$7","unwrap","children$1","inBody","getShadowRoot","translate","SugarPosition","firstDefinedOrZero","viewport","offsetLeft","offsetTop","box","boxPosition","get$8","_DOC","win","scrollTo","intoView","alignToTop","scrollIntoViewIfNeeded","scrollIntoView","bounds","height","right","bottom","getBounds","_win","scroll","get$7","clientWidth","clientHeight","visualViewport","Math","pageLeft","pageTop","isNodeType","isRestrictedNode","getPrototypeOf","isElement$5","matchNodeNames","names","lowercasedNames","matchStyleValues","values","computed","getComputedStyle","getPropertyValue","attrName","isBogus$2","isTable$3","hasContentEditableState","isTextareaOrInput","isText$7","isComment","isDocument$1","isDocumentFragment","isBr$5","isImg","isContentEditableTrue$4","isContentEditableFalse$b","isTableCell$5","isMedia$2","is$1","lhs","rhs","lift2","oa","ob","isSupported","rawSet","set$1","setAll$1","get$6","getOpt","remove$6","get$5","property","getUnsafeProperty","getRaw","raw","getAllRaw","css","ruleName","browser$3","firstElement","nodes","hasChild","elm","child","exports$1","module$1","define","require","global","commonjsGlobal","globalThis","g","setTimeoutFunc","_state","_handled","_value","_deferreds","doResolve","handle","deferred","_immediateFn","onFulfilled","onRejected","ret","newValue","then","finale","_unhandledRejectionFn","Handler","done","reason","ex","prom","remaining","res","race","setImmediate","err","console","_setImmediateFn","_setUnhandledRejectionFn","promisePolyfill","boltExport","EphoxContactWrapper","Promise$1","nu$1","baseFn","data","callbacks","get","nCallback","isReady","LazyValue","pure","errorReporter","make","run","aFutureB","toPromise","anonBind","futureB","toLazy","toCached","cache","Future","value$1","isValue","isError","_opt","_f","_","onValue","mapError","toOptional","error","message","onError","Result","fromOption","opt","Adt","cases","constructors","adt","acase","count","keys$1","argLength","foldArgs","branches","branchKeys","join","reqKey","log","bothErrors","firstError","secondError","bothValues","unite","result","ClosestOrAncestor","ancestor","isRoot","requestAnimationFramePromise","support","Expr","getText","isXML","tokenize","compile","select$1","outermostContext","sortInput","hasDuplicate","setDocument","document$1","docElem","documentIsHTML","rbuggyQSA","rbuggyMatches","ancestor$3","stop","closest$3","ancestor$2","descendant","base","one","closest$2","promiseObj","wrappedSetTimeout","time","wrappedSetInterval","setInterval","debounce","timer","func","Delay","requestAnimationFrame","requestAnimationFrameFunc","vendors","setEditorTimeout","editor","removed","setEditorInterval","clearInterval","throttle","StyleSheetLoader","documentOrShadowRoot","settings","idCount","loadedStates","edos","maxLoadTime","load","success","failure","link","urlWithSuffix","state","passed","failed","getOrCreateState","status","waitForWebKitLinkLoaded","waitCallback","styleSheets","owner","ownerNode","testCallback","Date","now","startTime","linkElem","rel","contentCssCors","referrerPolicy","loadF","unload","styleContainer","loadAll","urls","futures","asyncValues","asyncValue","parts","unloadAll","_setReferrerPolicy","WeakMap","forElement","referenceElement","rootDom","sl","set","create$8","DomTreeWalker","startNode","rootNode","prev","prev2","shallow","findSibling","findPreviousNode","startName","siblingName","sibling","lazyLookup","lookup","mapToObject","isHeading","isBlock$2","isInline$1","isBr$4","isTextBlock$2","isList","isListItem","isTableSection","isTableCell$4","isWsPreserveElement","nbsp","ZWSP$1","isZwsp","char","trim$2","isElement$4","isText$6","isCaretContainerBlock$1","isCaretContainerInline","isCaretContainer$2","hasContent","isBeforeInline","offset","isAtStart","isAfterInline","isAtEnd","startsWithCaretContainer$1","endsWithCaretContainer$1","showCaretContainerBlock","caretContainer","lastBr","brs","getElementsByTagName","isRangeInCaretContainerBlock","startContainer","isContentEditableTrue$3","isContentEditableFalse$a","isBr$3","isText$5","isInvalidTextElement","isAtomicInline","isTable$1","isCaretContainer$1","isCaretCandidate$3","isNonUiContentEditableFalse","isUnselectable","isEditableCaretCandidate$1","isInEditable","whiteSpaceRegExp$1","isWhitespaceText","isContent$1","rootElement","hasWhitespacePreserveParent","isWhitespace","isNamedAnchor","isBookmark","isBogus$1","isBogusAll","isEmpty$2","skipBogus","targetNode","brCount","walker","isEmptyNode","isInlineContent","isBookmarkNode$2","isSpan","trimNode","currentChildren","isDocument","isKeepElement","prevIsInline","nextIsInline","surroundedByInlineContent","isKeepTextNode","makeMap$3","attrsCharsRegExp","textCharsRegExp","rawCharsRegExp","entityRegExp","asciiMap","baseEntities","reverseEntities","buildEntitiesLookup","radix","chr","entity","fromCharCode","namedEntities","encodeRaw","attr","encodeNumeric","charCodeAt","encodeNamed","entities","Entities","encodeAllRaw","getEncodeFunc","entitiesMap","nameMap","named","decode","innerText","nativeDecode","mapCache","dummyObj","makeMap$2","each$h","extend$5","explode$3","inArray$2","split$1","createMap","defaultValue","extendWith","toUpperCase","getTextRootBlockElements","schema","getTextBlockElements","compileElementMap","mode","styles","Schema","patternElements","customElementsMap","specialElements","createLookupTable","option","schemaItems","globalAttributes","blockContent","phrasingContent","flowContent","html4BlockContent","html4PhrasingContent","attributes","ni","attributesOrder","arrayToMap","addAttrs","schemaItem","caption","table","compileSchema","verify_html","valid_elements","validStyles","valid_styles","invalidStyles","invalid_styles","validClasses","valid_classes","whiteSpaceElementsMap","selfClosingElementsMap","shortEndedElementsMap","boolAttrMap","nonEmptyOrMoveCaretBeforeOnEnter","nonEmptyElementsMap","moveCaretBeforeOnEnterElementsMap","textBlockElementsMap","blockElementsMap","textInlineElementsMap","special","RegExp","patternToRegExp","addValidElements","validElements","ei","ai","al","attrData","elementName","attrType","outputName","globalAttributesOrder","elementRuleRegExp","attrRuleRegExp","hasPatternsRegExp","validElementsArr","paddEmpty","removeEmpty","removeEmptyAttrs","attributesRequired","required","splice","attributesDefault","attributesForced","forcedValue","validValues","attributePatterns","pattern","setValidElements","addCustomElements","customElements","customElementRegExp","text_block_elements","block_elements","rule","inline","cloneName","customRule","elmName","addValidChildren","validChildren","childRuleRegExp","getElementRule","_val","padd_empty_block_inline_children","paddInEmptyBlock","custom_elements","valid_children","extended_valid_elements","dd","dt","li","td","th","tr","tbody","thead","tfoot","legend","area","param","parents","parentsRequired","invalid_elements","getValidStyles","getInvalidStyles","getValidClasses","getBoolAttrs","getBlockElements","getTextInlineElements","getShortEndedElements","getSelfClosingElements","getNonEmptyElements","getMoveCaretBeforeOnEnterElements","getWhiteSpaceElements","getSpecialElements","getCustomElements","isValidChild","isValid","attrPatterns","toHex","hex","Styles","rgbRegExp","urlOrStrRegExp","styleRegExp","trimRightRegExp","encodingLookup","encodingItems","color","parse","isEncoded","urlConverter","url_converter","urlConverterScope","url_converter_scope","compress","suffix","noJoin","canCompress","encode","keepSlashes","decodeSingleHexSequence","escSeq","decodeHexSequences","processUrl","url2","url3","str2","allow_script_urls","scriptUrl","allow_svg_data_urls","lastIndex","border","serialize","serializeStyles","styleList","i_1","styleMap","deprecated","keyLocation","layerX","layerY","returnValue","webkitMovementX","webkitMovementY","keyIdentifier","mozPressure","isNativeEvent","event","Event","normalize$3","originalEvent","fallbackTarget","composedPath","clone$2","srcElement","needsNormalizing","defaultPrevented","isDefaultPrevented","cancelBubble","isPropagationStopped","stopImmediatePropagation","isImmediatePropagationStopped","hasIsDefaultPrevented","mouseEventRe","addEvent","capture","attachEvent","removeEvent","detachEvent","fix","isMouseEvent","pageX","clientX","eventDoc","mouseEvent","clientLeft","pageY","clientY","clientTop","metaKey","bindOnReady","eventUtils","domLoaded","readyHandler","EventUtils","events","expando","hasMouseEnterLeave","hasFocusIn","callbackList","fakeName","nativeHandler","defaultNativeHandler","evt","executeHandlers","namesList","mouseEnterLeave","currentTarget","related","relatedTarget","unbind","ci","eventMap","fire","parentWindow","clean","destroy","cancel","preferredDoc","dirruns","classCache","createCache","tokenCache","compilerCache","sortOrder","strundefined","MAX_NEGATIVE","pop","push_native","push$1","slice$1","whitespace","identifier","pseudos","rtrim","rcomma","rcombinators","rattributeQuotes","rpseudo","ridentifier","matchExpr","ID","CLASS","TAG","ATTR","PSEUDO","CHILD","bool","needsContext","rinputs","rheader","rnative","rquickExpr$1","rsibling","rescape","runescape","funescape","escaped","escapedWhitespace","high","els","Sizzle","context","results","seed","m","groups","old","nid","newContext","newSelector","getElementById","getElementsByClassName","qsa","toSelector","testContext","querySelectorAll","qsaError","cacheLength","shift","markFunction","siblingCheck","diff","sourceIndex","createPositionalPseudo","argument","matchIndexes","setFilters","tokens","addCombinator","matcher","combinator","dir","checkNonElements","doneName","first","xml","oldCache","outerCache","newCache","elementMatcher","matchers","condense","unmatched","newUnmatched","mapped","setMatcher","preFilter","postFilter","postFinder","postSelector","temp","preMap","postMap","preexisting","elems","contexts","multipleContexts","matcherIn","matcherOut","matcherFromTokens","checkContext","leadingRelative","relative","implicitRelative","matchContext","matchAnyContext","hasCompare","getTop","getById","find","attrId","disconnectedMatch","adown","bup","compare","sortDetached","aup","ap","bp","unshift","expr","matchesSelector","attrHandle","getAttributeNode","specified","uniqueSort","duplicates","detectDuplicates","sortStable","nodeValue","selectors","createPseudo","excess","unquoted","nodeNameSelector","operator","check","what","last","simple","forward","ofType","nodeIndex","useCache","pseudo","idx","matched","has","lang","elemLang","hash","location","activeElement","hasFocus","href","tabIndex","enabled","checked","selected","selectedIndex","header","button","even","odd","lt","gt","nth","createInputPseudo","createButtonPseudo","filters","parseOnly","soFar","preFilters","setMatchers","elementMatchers","bySet","byElement","superMatcher","outermost","matchedCount","setMatched","contextBackup","dirrunsUnique","random","matcherFromGroupMatchers","select","token","compiled","rquickExpr","Event$1","skipUniques","isDefined","isString","createFragment$1","fragDoc","frag","createDocumentFragment","domManipulate","targetNodes","sourceItem","getElementDocument","DomQuery","makeArray","hasClass","wrap$2","lastParent","newWrapper","numericCssMap","booleanMap","propFix","for","class","readonly","cssFix","float","attrHooks","cssHooks","DomQueryConstructor","init","whiteSpaceRegExp","trim$1","each$g","grep$2","unique","hook","prop","removeAttr","camel","dashed","removeProperty","currentStyle","before","after","appendTo","prependTo","replaceWith","content","wrap","wrapAll","wrapInner","contents","clone","addClass","toggleClass","removeClass","classState","existingClassName","on","off","trigger","show","hide","closest","docElm","object","sibling$1","firstSibling","contentDocument","contentWindow","wrappedResult","parentsUntil","nextUntil","prevUntil","overrideDefaults","sub","each$f","grep$1","simpleSelectorRe","updateInternalStyleAttr","$elm","rawValue","findNodeIndex","normalized","lastNodeType","DOMUtils","addedStyles","files","counter","styleSheetLoader","boundEvents","ownEvents","$","getRoot","$$","getAttrib","defaultVal","getAttribs","setAttrib","originalValue","onSetAttrib","attrElm","attrValue","root_element","getPos$1","rootElm","offsetParent","castOffsetParent","bodyTop","captionTop","captionHeight","getTableCaptionDeltaY","getPos","getStyle","getSize","w","h","elms","getParents","collect","selectorVal","_findSib","setAttribs","setHTML","canHaveHTML","parentElm","newElm","keepChildren","$node","cls","oldElm","replaceChild","isNonEmptyElement","createRng","createRange","rv","getContentEditable","stdMode","boxModel","isBlock","deep","clone_1","getViewPort","argWin","vp","getRect","size","getParent","getNext","getPrev","createHTML","outHtml","createFragment","setStyle","update_styles","setStyles","stylesArg","removeAllAttribs","removeAttributeNode","parseStyle","cssText","serializeStyle","addStyle","styleElm","DOM","styleSheet","loadCSS","isHidden","uniqueId","getOuterHTML","outerHTML","setOuterHTML","insertAfter","reference","referenceNode","rename","attrNode","findCommonAncestor","pe","ps","rgbVal","isEmpty","bogusVal","splitElm","replacementElm","beforeFragment","afterFragment","setStart","setEnd","extractContents","getContentEditableParent","isChildOf","dumpRng","startOffset","endContainer","endOffset","getContext","keepValues","keep_values","keepUrlHook","setupAttrHooks","DOM$a","each$e","ScriptLoader","states","queue","scriptLoadedCallbacks","queueLoadedCallbacks","loading","loadScript","cleanup","isDone","markDone","loadQueue","loadScripts","scripts","failures","execCallbacks","loadingScripts","notifyCallbacks","Cell","initial","currentCode","getLanguageData","I18n","getData","setCode","newCode","getCode","code","langData","translation","getLangData","textstr","removeContext","isTokenised","values_1","$1","$2","isRtl","hasCode","AddOnManager","_listeners","runListeners","matchedListeners","listener","dependencies","createUrl","baseUrl","dep","resource","addOnUrl","urlString","baseURL","substring","deps","newUrl","loadDependencies","waitFor","requireLangPack","languages","languageLoad","language","addOn","addOnConstructor","addComponents","pluginName","pluginUrl","PluginManager","ThemeManager","subject","doRevoke","revoke","clear","isSet","singleton","rate","read$4","supports","add$1","clazz","add$3","add$2","descendants$1","descendants","annotation","dataAnnotation","dataAnnotationId","identify","annotationName","rng","selection","getRng","getBody","an","newStart","getAttr","has$1","uid","findMarkers","generate","getTime","floor","docDom","fragment","contentElements","clone$1","original","isDeep","deep$1","TextWalker","isBoundary","direction","TextSeeker","isBlockBoundary","process","newOffset","backwards","forwards","round$2","round","rect","collapse","toStart","isValidOverflow","overflowY","rect1","rect2","min","isAbove$1","halfHeight","isBelow$1","containsXY","getSelectedNode","getNode$1","safeOffset","clamp$2","extendingChars","isExtendingChar","ch","isElement$3","isCaretCandidate$2","isBlock$1","isFloated","isValidElementCaretCandidate","and","isNotPre","isText$4","isBr$2","nodeIndex$1","resolveIndex$1","createRange$1","isWhiteSpace$1","isRange","isHiddenWhiteSpaceRange","isZeroRect","getBoundingClientRect$1","clientRect","clientRects","getClientRects","brNode","nbsp$1","getBrClientRect","sc","ec","so","eo","newRng","cloneRange","setEndAfter","getBoundingClientRectWebKitText","collapseAndInflateWidth","newClientRect","CaretPosition","caretPosition","addUniqueAndValidRect","addCharacterOffset","beforeNode","getCaretPositionClientRects","toRange","isVisible","isEqual","getNode","fromRangeStart","fromRangeEnd","isAbove","pos1","pos2","isBelow","isTextPosition","isElementPosition","HDirection","trimEmptyTextNode$1","rangeInsertNode","insertNode","insertFragment","isText$3","isBogus","normalizedParent","getChildNodes","equal","createPathItem","numTextFragments","normalizedNodeIndex","create$6","outputOffset","normalizedTextOffset","parentsUntil$1","resolve$2","paths","resolvePathItem","dataLen","targetOffset","findTextPosition","isContentEditableFalse$9","getPoint","point","trimmedOffset","getNormalizedTextOffset","findIndex","moveEndPoint$1","normalizeTableCellSelection","getOffsetBookmark","findAdjacentContentEditableFalseElm","bookmark","isCollapsed","end","isFakeCaret","getLocation","createBookmarkSpan","filled","getPersistentBookmark","collapsed","rng2","endBookmarkNode","startBookmarkNode","moveToBookmark","keep","getUndoBookmark","DOM$9","getBodySetting","getParam","bodyObj","getContentSecurityPolicy","getForcedRootBlock","block","getForcedRootBlockAttrs","isAutomaticUploadsEnabled","shouldReuseFileName","getIconPackName","getImageUploadUrl","getImageUploadBasePath","getImagesUploadCredentials","getImagesUploadHandler","shouldUseContentCssCors","getReferrerPolicy","getLanguageCode","shouldIndentUseMargin","getFontCss","fontCss","getObjectResizing","getEventRoot","getTheme","shouldValidate","isInlineBoundariesEnabled","hasContentCssCors","getPlugins","isElement$2","isText$2","removeNode$1","trimCount","trimmedText","deleteZwspChars","deleteData","removeUnchanged","remove$2","removeAndReposition","removeTextAndReposition","removeTextCaretContainer","newPosition","indexOf$2","removeElementAndReposition","removeElementCaretContainer","caretContainerNode","browser$2","isContentEditableFalse$8","isMedia$1","isTableCell$3","getAbsoluteClientRect","scrollX","scrollY","rootRect","margin","FakeCaret","cursorInterval","lastVisualCaret","rootBlock","caretBlock","fakeCaretTargetNodes","trimInlineCaretContainers","caretState","caret","textNode","splitText","insertInline$1","isInlineFakeCaretTarget","blockName","br","blockNode","insertBlock$1","getCss","reposition","isFakeCaretTableBrowser","isFakeCaretTarget","isContentEditableFalse$7","isMedia","isBlockLike","isCaretContainer","isCaretContainerBlock","isElement$1","isCaretCandidate$1","isForwards","isBackwards","skipCaretContainers","findNode$1","predicateFn","isCefOrCaretContainer","getParentBlock$2","isInSameBlock","caretPosition1","caretPosition2","getChildNodeAtRelativeOffset","relativeOffset","beforeAfter","setStartBefore","setEndBefore","setStartAfter","isNodesInSameBlock","node1","node2","lean","before$2","after$2","normalizeRange","leanLeft","leanRight","location_1","getRelativeCefElm","getNormalizedRangeEndPoint","normalizedRange","getElementFromPosition","getVisualCaretPosition","walkFn","isMoveInsideSameBlock","inSameBlock","expected","getOption","isContentEditableFalse$6","isText$1","isElement","isBr$1","isCaretCandidate","isAtomic","isAtomicContentEditableFalse","isEditableCaretCandidate","nodeAtIndex","getCaretCandidatePosition","findCaretPosition$1","startPos","nextNode","innerNode","Forwards","moveForwardFromBr","rootContentEditableFalseElm","getParents$3","CaretWalker","Backwards","isBeforeOrStart","position","isAfterOrEnd","isBeforeAfterSameElement","fromPosition","navigate","shouldSkipPosition","navigateIgnore","ignoreFilter","positionIn","walkToPositionIn","nextPosition","prevPosition","firstPositionIn","lastPositionIn","CARET_ID$1","isCaretNode","getParentCaretContainer","isPathBookmark","addBogus","tryFindRangePosition","padEmptyCaretContainer","isEmpty$1","insertZwsp","setEndPoint","isValidTextNode","restoreEndPoint","appendData","getBookmark$1","getCaretBookmark","getRangeBookmark","getBookmark$2","resolvePaths","isStringPathBookmark","resolveCaretPositionBookmark","isIdBookmark","endPos","spos","epos","resolveId","isIndexBookmark","selectNode","resolveIndex","isRangeBookmark","resolve$1","setRng","isBookmarkNode$1","isNbsp","actual","isWhiteSpace","isContent","isNode","moveStart","isInlineBlock","isWhiteSpaceNode$1","getNonWhiteSpaceSibling","inc","nextName","isTextBlock$1","ed","allowSpaces","replaceVars","vars","isEq$5","str1","normalizeStyleValue","getTextDecoration","decoration","getParents$2","isBlockFormat","isSelectorFormat","isInlineFormat","shouldExpandToSelector","expand","isBookmarkNode","getParents$1","isWhiteSpaceNode","isTextBlock","findParentContentEditable","walkText","findSpace","findContent","findWordEndPoint","includeTrailingSpaces","lastTextNode","textSeeker","textOffset","findSelectorEndPoint","formatList","curFormat","findBlockEndPoint","scopeRoot","isAtBlockBoundary$1","findParentContainer","block_expand","isSelfOrParentBookmark","expandRng","includeTrailingSpace","walk$2","exclude","firstNode","lastNode","collectSiblings","endNode","siblings","findEndPoint","walkBoundary","parent_1","siblings_1","startPoint","endPoint","getRanges","ranges","rangeCount","getRangeAt","getCellsFromElementOrRanges","selectedCells","getSelectedNodes","getCellsFromRanges","getCellsFromEditor","getSel","getClosestTable","cell","getFirstChildren","getLastChildren$1","hasAllContentsSelected","getStartNode","getEndNode","moveEndPoint","hasAnyRanges","sel","runOnRanges","executor","fakeSelectionNodes","fakeNodeRng","preserve","fillBookmark","api$1","get$2","makeAnnotation","eDoc","decorate","_b","getOwnPropertySymbols","propertyIsEnumerable","__rest","master","_d","_e","classes","annotate","newWrappers","getDoc","finishWrapper","processElements","processElement","wrapName","isZeroWidth","isAnnotation","wrap$3","processNodes","Annotator","annotations","registry","register","serializer","addNodeFilter","spans","span","identifyParserNode","persistent","setup$m","changes","_registry","changeCallbacks","initData","listeners","previous","withCallbacks","updateCallbacks","callbackMap","outputData","onNodeChange","fireNoAnnotation","fireCallbacks","addListener","setup$n","undoManager","transact","initialRng","hasFakeSelection","applyWordGrab","selectionRng","annotateWithBookmark","annotationChanged","getAll","directory","markers","nodesAlready","findAll","BookmarkManager","getBookmark","getContentEditableRoot$1","isXYWithinRange","fireError","errorType","fireFormatApply","fireFormatRemove","VK","BACKSPACE","DELETE","DOWN","ENTER","ESC","LEFT","RIGHT","SPACEBAR","TAB","UP","PAGE_UP","PAGE_DOWN","END","HOME","modifierPressed","shiftKey","ctrlKey","altKey","metaKeyPressed","isContentEditableFalse$5","ControlSelection","selectedElm","selectedElmGhost","resizeHelper","selectedHandle","resizeBackdrop","startX","startY","startW","startH","ratio","resizeStarted","startScrollWidth","startScrollHeight","elementSelectionAttr","editableDoc","rootDocument","abs","resizeHandles","nw","ne","se","sw","isImage","contextMenuSelectImage","touch","touches","isEventOnImageOutsideRange","getResizeTargets","firstElementChild","isResizable","setSizeProp","targets","setGhostElmSize","ghostElm","resizeGhostElement","deltaX","deltaY","proportional","resizeHelperX","resizeHelperY","screenX","screenY","getResizeImgProportional","display","selectedElmX","selectedElmY","scrollWidth","scrollHeight","origin","fireObjectResizeStart","endGhostResize","wasResizeStarted","showResizeRect","fireObjectResized","nodeChanged","targetElm","unbindResizeHandleEvents","targetWidth","targetHeight","hideResizeRect","selectedValue","handleElm","startDrag","updateResizeRect","controlElm","isChildOrEqual","img","disableGeckoResize","getStart","getEnd","isWithinContentEditableFalse","execCommand","handleMSControlSelect_1","delayedSelect","throttledUpdateResizeRect","composing","hasCeProperty","fromPoint","pointDoc","caretPositionFromPoint","offsetNode","caretRangeFromPoint","createTextRange","moveToPoint","rects","elementFromPoint","moveToElementText","findClosestIeRange","parentElement","findParent$1","moveOutOfContentEditableFalse","isEq$4","rng1","hasParent$1","findParent","hasParentWithName","isTable","isTableCell$2","isCeFalseCaretContainer","hasBrBeforeAfter","findTextNodeRelative","isAfterNode","lastInlineElement","parentBlockContainer","normalizeEndPoint","directionLeft","hasContentEditableFalseParent","isPrevNode","normalize$2","normRng","RangeUtils","normalize","normalizedRng","compareRanges","getCaretRangeFromPoint","documentFocusInHandler","api","getOffset","parseFloat","aggregate","properties","getOuter","cumulativeInclusions","Dimension","walkUp","navigation","view","rest","Navigation","freeze","__proto__","frameElement","excludeFromDescend","markerInfo","cleanupFun","pageXOffset","absolute","get$1","withMarker","preserveWith","applyWithMarker","withScrollEvents","fireScrollIntoViewEvent","fireAfterScrollIntoViewEvent","descend","withElement","elementMarker","startElement","endElement","scrollToMarker","viewHeight","intoWindowIfNeeded","viewportBottom","markerTop","markerBottom","largerThanViewport","intoWindow","intoFrame","frameViewHeight","op","frames","pathTo","loc","find$1","viewportBounds","rangeIntoWindow","elementIntoWindow","rangeIntoFrame","elementIntoFrame","scrollRangeIntoView","hasFocus$1","active","adt$1","domRange","exact","SimSelection","soffset","finish","foffset","browser$1","clamp$1","normalizeRng","isOrContains","isRngInRoot","shouldStore","nativeRangeToSelectionRange","bookmarkToNativeRng","store","newBookmark","FocusManager","isEditorUIElement","register$3","throttledStore","mouseUpPage","registerPageMouseUp","registerFocusOut","registerMouseUp","selectionChange","isManualNodeChange","registerEditorEvents","DOM$8","isUIElement","customSelector","getCustomUiSelector","registerEvents$1","editorManager","focusedEditor","setActive","blurredEditor","getElement","getActiveElement","activeEditor","shadowRoot","composed","getOriginalEventTarget","unregisterDocumentEvents","normalizeSelection$1","getCollapsedNode","getFocusInElement","caretPos","focusBody","rawBody","hasInlineFocus","iframeElement","hasIframeFocus","activateEditor","getEndpointElement","real","skipEmptyTextNodes","orig","processRanges","typeLookup","walk$1","isEmptyTextNode","AstNode","insert","selfAttrs","cloneAttrs","selfAttr","shortEnded","refNode","restoreDataUris","re","imageId","uris","each$d","queryParts","DEFAULT_PORTS","ftp","http","https","mailto","safeSvgDataUrlElements","URI","baseUri","base_uri","source","isProtocolRelative","protocol","toAbsPath","urlMatch","part","userInfo","port","parseDataUri","uri","uriComponents","decodeURIComponent","isDomSafe","decodedUri","unescape","allow_html_data_urls","allowSvgDataUrls","blockSvgDataUris","isInvalidUri","getDocumentBaseUrl","pathname","setPath","pathMatch","file","getURI","toRelative","output","relativeUri","tu","uu","toRelPath","anchor","toAbsolute","noHost","absoluteUri","isSameOrigin","defaultPort","breakPoint","normalizedBase","outPath","nb","normalizedPath","noProtoHost","filteredClobberElements","lazyTempDocument$1","implementation","createHTMLDocument","findMatchingEndTagIndex","startIndex","startTagRegExp","endTagRegExp","shortEndedElements","startMatch","findCommentEndIndex","endMatch","lcHtml","isConditionalComment","endIfIndex","endIndex","endCommentRegexp","checkBogusAttribute","regExp","attrString","SaxParser","fix_self_closing","comment","cdata","pi","doctype","base64Extract","endRegExp","attrList","textData","isInternalElement","isShortEnded","elementRule","isValidElement","attribsValue","validAttributesMap","validAttributePatterns","stack","filteredUrlAttrs","parsingMode","processEndTag","valid","processText","processComment","allow_conditional_comments","processMalformedComment","startTag","parseAttribute","val2","val3","processAttr","fillAttrsMap","validate","isValidPrefixAttrName","attrRule","tokenRegExp","attrRegExp","selfClosing","self_closing_elements","removeInternalElements","remove_internals","fixSelfClosing","processHtml","matchText","bogusValue","preserve_cdata","parseInternal","dataImageUri","chunks","extractBase64DataUris","findEndTag","trimInternal","bogusAllRegExp","tempAttrs","trimContentRegExp","trimHtml","getTempAttrs","endTagIndex","matchLength","trimExternal","each$c","ElementUtils","attribs","compareObjects","obj1","obj2","makeMap$1","Writer","indent","indentBefore","indent_before","indentAfter","indent_after","entity_encoding","htmlOutput","element_format","reset","getContent","HtmlSerializer","writer","handlers","handler","sortedAttrs","inner","nonInheritableStyles","Set","shorthandStyleProps","getStyleProps","hasStyleConflict","nodeStyleProps","parentNodeStyleProps","valueMismatch","parentValue","nodeStyleProp","propExists","longhandProps","isChar","delta","isBeforeSpace","isAfterSpace","isEmptyText","matchesElementPosition","isImageBlock","isCefNode","isBogusAll$1","isBeforeImageBlock","isAfterImageBlock","isBeforeMedia","isAfterMedia","isBeforeTable","isAfterTable","isBeforeContentEditableFalse","isAfterContentEditableFalse","fillWithPaddingBr","trimBlockTrailingBr","lastChildPrevSibling","rawParent","parents$1","parentsAndSelf","navigateIgnoreEmptyTextNodes","getClosestBlock$1","isAtBeforeAfterBlockBoundary","newPos","fromBlock","isAtBlockBoundary","isAtStartOfBlock","isAtEndOfBlock","isBeforeBlock","isAfterBlock","isBr","findBr","parentBlocks","isBeforeBr$1","isAfterBr","getElementFromPrevPosition","findPreviousBr","findNextBr","isInMiddleOfText","getClosestBlock","hasSpaceBefore","hasSpaceAfter","isInPre","isPreValue","needsToBeNbspLeft","needsToBeNbspRight","needsToBeNbsp","isNbspAt","hasNbsp","normalizeNbsps","newText","firstPos","normalizeNbspAtStart","chars","normalizeNbspMiddle","lastPos","normalizeNbspAtEnd","normalizeNbspsInEditor","normalize$1","isEndOfContent","isStartOfContent","replaceData","previousCharIsSpace","normalizeContent","normalizeWhitespaceAfter","whitespaceCount","normalizeWhitespaceBefore","mergeTextNodes","prevNode","normalizeWhitespace","mergeToPrev","whitespaceOffset","newNode","removeNode","insertData","needsReposition","getPreviousSiblingCaretPosition","getNextSiblingCaretPosition","findCaretPosOutsideElmAfterDelete","findCaretPositionForwardsFromElm","findCaretPositionForward","startPosition","findCaretPositionBackwardsFromElm","findCaretPositionBackwards","findCaretPosition","setSelection$1","paddEmptyBlock","deleteElement$2","moveCaret","rawNode","afterDeletePos","parentBlock","normalizedAfterDeletePos","afterDeletePosOpt","oc","prevTextOpt","nextTextOpt","deleteNormalized","isInlineElement","setContent","setCursorLocation","paddPos","getTableCells","tableCellRng","deleteAction","singleCellTable","fullTable","partialTable","multiTable","getClosestCell$1","isExpandedCellRng","cellRng","getTableFromCellRng","startParentTable","endParentTable","getTableSelectionFromCellRng","cells","tableSelection","getTableSelections","selectionDetails","isSameTable","sameTableSelection","startCell","endCell","startTableSelection","getCellRangeFromStartTable","endTableSelection","getCellRangeFromEndTable","getCellIndex","getSelectedCells","unselectCells","startTable","endTable","otherContentRng","getActionFromRange","isRootFromElement","optCellRng","getCellRng","getTable","isStartInTable","isEndInTable","isMultiTable","getTableDetailsFromRange","rows","isSingleCellTable","isSingleCellTableContentSelected","startTableSelectedCells","endTableSelectedCells","handleMultiTable","handleSingleTable","freefallRtl","cleanCells","deleteContentInsideCell","isFirstCellInSelection","insideTableRng","deleteCellContents","collapseAndRestoreCellSelection","selectedNode","emptySingleTableCells","outsideDetails","editorRng","cellsToClean","outsideBlock","getOutsideBlock","deleteContents","startInTable","emptyBlock","handleEmptyBlock","endPointCell","emptyMultiTableCells","startTableCells","endTableCells","betweenRng","startTableCellsToClean","endTableCellsToClean","moveSelection","lastBlock","additionalCleanupNodes","deleteTableElement","getParentCell","getParentCaption","emptyElement","isNearTable","deleteCaret$3","startElm","fromCell","toCell","deleteBetweenCells","deleteCaretCells","fromPos","isBeforeOrAfterTable","fromCaption","isDeleteOfLastCharPos","emptyCaretCaption","toCaption","validateCaretCaption","deleteCaretInsideCaption","deleteCaretCaption","backspaceDelete$9","action","deleteCellRange","deleteCaptionRange","deleteTableRange","deleteRange$2","commonAncestorContainer","newEndPos","normalizeBlockSelectionRange","isListFragment","nonEmptyElements","hasOnlyOneChild$1","isPaddingNode","isPaddedEmptyBlock","isEmptyFragmentElement","trimListItems","isPadding","getParentLi","findLastOf","newCaretPos","insertAtCaret$1","domFragment","cleanupDomFragment","toDomFragment","liTarget","liElms","isAt","caretWalker","findFirstIn","insertBefore$1","insertAfter$1","beforeRng","afterRng","cloneContents","getSplit","insertMiddle","isTableCell$1","insertHtmlAtCaret","details","trimOrPadLeftRight","parser","merge","bookmarkHtml","paste","caretElement","canHaveChildren","isTableCellContentSelected","deleteSelectedContent","parserArgs","isParentBlockLi","markFragmentElements","_selectionOverrides","showBlockCaretContainer","invalid","validInsertion","textInlineElements","root_1","elementUtils_1","isNonInheritableStyle","hasInheritableStyles","reduceInlineTextElements","nextRng","parentEditableElm","isPartOfFragment","findNextCaretRng","moveSelectionToMarker","trimBrsFromTableCell","addVisual","traverse","isTreeNode","setEditorHtml","noSelection","setContentInternal","defaultedArgs","setupArgs$2","updatedArgs","no_events","nodeFilters","attributeFilters","getNodeFilters","getAttributeFilters","nodeMatches","attrMatches","name_2","findMatchingNodes","no_selection","setContentTree","padd","forcedRootBlockName","isRootContent","setContentString","sibling$2","ensureIsRoot","closest$1","transform","transformed","isEq$3","matchesUnInheritedFormatSelector","formatter","inherit","matchParents","similar","matchNode","matchName$1","matchItems","itemName","onmatch","expectedValue","isEmptyValue","match$2","matchAllOnNode","formatNames","matchSimilar","formatName","isVariableValue","field","fieldValues","mapToArray","isVariableFormatName","ZWSP","CARET_ID","isCaretContainerEmpty","getEmptyCaretContainers","findFirstTextNode","createCaretContainer","fill","removeCaretContainerNode","trimZwspFromCaretContainer","removeCaretContainer","appendNode","insertFormatNodesIntoCaretContainer","formatNodes","innerMostFormatNode","formatNode","removeCaretFormat","hasContentAfter","expandedRng","newCaretContainer","allBrs","getLastChildren","insertCaretContainerNode","cleanedFormatNode","validFormats","matchedFormats","fmtName","otherFormatName","validKeys","filterObj","validKey","fmt1","filteredFmt1","fmt2","filteredFmt2","equal$1","areSimilarFormats","clonedFormatNode","cleanFormatNode","caretTextNode","isFormatElement","inlineElements","postProcessHooks","each$b","blocks","isPre","getSelectedBlocks","pre","pre1","pre2","addPostProcessHook","merger","each$a","isElementNode$1","findElementSibling","mergeSiblingsNodes","elementUtils","tmpSibling","mergeSiblings","merge_siblings","processChildElements","hasStyle","applyStyle","unwrapEmptySpan","removeResult","MCE_ATTR_RE","each$9","isEq$2","isChildOfInlineParent","getContainer","lastIdx","normalizeTableSelection","isTableCellOrRow","childNode","wrap$1","wrapWithSiblings","removeFormatInternal","compareNode","stylesModified","matchName","links","isColorFormatAndAnchor","preserve_attributes","attrsToPreserve","remove_similar","valueOut","rootBlockElm","forcedRootBlock","list_block","forced_root_block_attrs","isMixedFormat","removeFormat$1","newName","removeFormatFromClone","remove$1","splitToFormatRoot","formatRoot","findFormatRoot","lastClone","firstClone","formatRootParent","mixed","wrapAndSplit","removeNodeFormat","fmt","lastContentEditable","currentNodeMatches","textDecoration","isRemoveBookmarkNode","removeRngStyle","ceFalseOverride","each$8","each$7","isElementNode","applyFormat$1","setElementFormat","onformat","styleVal","applyNodeStyle","found","createWrapElement","wrapElm","applyRngStyle","nodeSpecific","currentWrapElm","parentName","canFormatEmptyLines","validBRParentElements","hasCaretNodeSibling","canFormatBR","childCount","isEmptyTextNode$1","getChildCount","childElement","mergeStyles","clear_child_styles","clearChildStyles","mergeWithChildren","merge_with_parents","mergeWithParents","backgroundColor","mergeBackgroundColorAndFontSize","processTextDecorationsAndColor","mergeTextDecorationsAndColor","mergeSubSup","wordcharRegex","importNode","applyCaretFormat","curSelNode","firstFormat","forced_root_block","defaultBlock","fake","postProcess$1","formatItem","hasVars","fallbackElement","matchingNode","matchingFormat","updateAndFireChangeCallbacks","registeredCallbacks","runIfChanged","spec","node_1","withSimilar","withoutSimilar","withVars","fromElements","tableModel","tableRow","cellPosition","getSpan","cellExists","getWidth","row","findElementPos","extractRows","sx","sy","ey","newRows","toDom","tableElement","tableBody","createDomTable","modelRowsToDomRows","getFullySelectedListWrappers","_li","findParentListContainer","listCont","listElm","listStyles","_style","setProperty","internalSet","setAll","emptyFragment","getFragmentFromRange","innerElm","commonAnchorContainer","wrapElements","listWrappers","allWrappers","directListWrappers","getWrapElements","wrapped","getTableFragment","selectedTableCells","tableElm","firstCell","lastCell","fullTableModel","rowspan","colspan","y2","x2","fillout","skipCellsX","fromDom","subTable","sectionedTableModel","isCollapsibleWhitespace","getInnerText","bin","shouldTrim","trimLeadingCollapsibleText","getSelectedContentInternal","setupArgs$1","parentBlockOpt","contextNodeName","getContextNodeName","shouldTrimSpaces","nonRenderedText","parentBlockText","textIndex","getTextContent","getInner","tmpElm","contextual","getSelectionFragment","read$3","getSerializedContent","getOuterHtml","write","fragments","vDown","vUp","buildScript","buildSnake","getMiddleSnake","currentFragments","insertAt","removeAt","applyDiff","start1","end1","start2","end2","diag","i2","snake","sum","lazyTempDocument","createFromEditor","trimmedFragments","trimmed","beforeBookmark","createFragmentedLevel","createCompleteLevel","applyToEditor","level","getLevelContent","getCleanLevelContent","isEq$1","level1","level2","hasEqualContent","hasEqualCleanedContent","isUnlocked","locks","setTyping","typing","endTyping","makePlainAdaptor","beforeChange","beforeChange$1","currentLevel","lastLevel","bm","customUndoRedoLevels","getCustomUndoRedoLevels","setDirty","addUndoLevel$1","undo","undo$1","redo","redo$1","clear$1","reset$1","hasUndo","hasUndo$1","hasRedo","hasRedo$1","ignore","transact$1","ignore$1","extra","callback1","callback2","extra$1","matchAll","matchedFormatNames","checkedMap","canApply","rawElm","toggle","formatChanged","registeredFormatListeners","formats","nodeOrRange","setup$j","formatChangeItems","getCurrent","toAppendTo","addListeners","removeListeners","formatChangedInternal","setupArgs$3","emptyRegExp","trimEmptyContents","getContentFromBody","getContentInternal","insertContent","hasVisual","isVisualAidsEnabled","matchedElm","getVisualAidsTableClass","value_1","cls_1","getVisualAidsAnchorClass","addVisualInternal","getModel","isRtc","plugins","getRtcInstanceWithFallback","rtcInstance","getRtcInstanceWithError","mergeAndNormalizeText","outerNode","outer","outerElm","oldLength","innerTextNode","walkPastBookmark","normalizeTextIfRequired","deleteFromCallbackMap","newCallbacks","isNativeIeSelection","isAttachedToDom","EditorSelection","selectedRange","explicitRange","selectorChangedWithUnbind","selectorChangedData","currentSelectors","findMatchingNode","matchedSelectors","SelectorChanged","setupArgs","eventArgs","contextBlock","contextArgs","cleanContent","prevText","nextText","rngSetContent","createContextualFragment","setContent$1","getRng$1","tryCompareBoundaryPoints","how","sourceRange","destinationRange","compareBoundaryPoints","anchorNode","START_TO_START","END_TO_END","isValidRange","ieRange","removeAllRanges","addRange","setBaseAndExtent","focusNode","isForward","anchorRange","anchorOffset","focusRange","focusOffset","bookmarkManager","controlSelection","getSelectedContent","getContent$1","compareEndPoints","setNode","endElm","selectedBlocks","selectorChanged","getScrollContainer","scrollContainer","scrollElementIntoView","placeCaretAt","addFilters","domParser","convert_fonts_to_spans","fontSizes","face","removeAttrs","addFontToSpansFilter","font_size_legacy_values","addStrikeToSpanFilter","uriParts","buildBlob","atob","Uint8Array","Blob","uriToBlob","rejectWithError","xhr_1","XMLHttpRequest","open","responseType","response","send","blobUriToBlob","count$1","ImageScanner","uploadStatus","blobCache","cachedPromises","images","getAllImages","isUploaded","promises","imageInfo","image","blobInfo","newPromise","base64","getByData","blob","getByUri","reader","FileReader","onloadend","readAsDataURL","blobToDataUri","dataUri","imageToBlobInfo","catch","paddEmptyNode","blockElements","padd_empty_with_br","hasOnlyChild","whitespaceElements","isPadded","each$6","explode$2","extend$4","DomParser","matchedNodes","matchedAttributes","root_name","filterNode","list","addAttributeFilter","fi","fl","invalidChildren","textRootBlockElements","rootBlockName","getRootBlockName","whiteSpaceElements","startWhiteSpaceRegExp","endWhiteSpaceRegExp","allWhiteSpaceRegExp","isAllWhiteSpaceRegExp","isInWhiteSpacePreservedElement","createNode","removeWhitespaceBefore","textVal","textNodeNext","cloneAndExcludeBlocks","isLineBreakNode","parent_2","attrFiltersLen","isNodeEmpty","tempNode","isTextRootBlockEmpty","isPaddedWithNbsp","nonSplitableElements","textBlockElements","removeOrUnwrapInvalidNode","originalNodeParent","children_1","newParent","fixed","currentNode","fixInvalidChildren","rootBlockNode","addRootBlocks","remove_trailing_brs","prevName","newRel","allow_unsafe_link_target","appendRel","allow_html_in_named_anchor","fix_list_elements","classValue","validClassesMap","blob_cache","processImage","inputSrc","isInternalImageSource","isBogusImage","images_dataimg_filter","imgElem_1","Image","isValidDataImg","blobUri","registerBase64ImageFilter","register$1","inline_styles","register$2","addTempAttr","htmlParser","DomSerializerImpl","internalName","hasChildren","hasEventListeners","shouldFireEvent","oldDoc","clonedNode","impl","doc_1","firePreProcess","preProcess","getHtmlFromNode","brNode1","brNode2","trimTrailingBr","parseHtml","serializeNode","outArgs","firePostProcess","postProcess","toHtml","addRules","setRules","DomSerializer","domSerializer","setContent$2","DOM$7","safeDestroy","deepMerge","objects","curObject","deprecatedSettings","deprecatedPlugins","movedToPremiumPlugins","getDeprecatedSettings","settingNames","setting","getDeprecatedPlugins","hasPlugin","plugin","pluginNames","deviceDetection","legacyMobilePlugins","defaultTouchSettings","table_grid","object_resizing","resize","normalizePlugins","trimmedPlugins","hasSection","sectionResult","sections","getToolbarMode","getDefaultMobileSettings","mobileSettings","defaultMobileSettings","toolbar_mode","toolbar_sticky","menubar","getExternalPlugins","overrideSettings","userDefinedExternalPlugins","external_plugins","processPlugins","isMobileDevice","defaultOverrideSettings","forcedPlugins","forced_plugins","desktopPlugins","mobileConfig","getSectionConfig","combinedPlugins","combinePlugins","mobilePlugins","theme","section","isSectionTheme","getPlatformPlugins","combineSettings","defaultSettings","defaultDeviceSettings","mobile","extractSections","extendedSettings","isOnMobile","sectionSettings","getSection","getFiltered","IconManager","iconPack","icons","getProp","propName","getComputedSizeProp","getClientWidth","getClientHeight","getMarginTop","getMarginLeft","isXYInContentArea","bodyElm","transposedPoint","transpose","isInsideElementContentArea","NotificationManager","notifications","getImplementation","unimplemented","getNotificationManagerImpl","close","getArgs","getTopNotification","closeNotification","notification","otherNotification","fireEvent","getContentAreaContainer","isEditorAttachedToDom","progressBar","timeout","getEl","addNotification","getNotifications","serviceMessage","getServiceMessage","registerEvents","WindowManager","dialogs","getWindowManagerImpl","openUrl","alert","confirm","getParams","setParams","funcBind","closeDialog","dialog","fireCloseEvent","otherDialog","storeSelectionAndOpenDialog","openDialog","fireOpenEvent","addDialog","params","windowManagerImpl","displayNotification","notificationManager","displayError","_skinLoaded","logError","createLoadError","pluginLoadError","initError","transformToUrls","cssLinks","skinUrl","contentCssFile","isContentCssSkinName","documentBaseURI","appendContentCssFromSettings","contentCSS","contentCss","getContentCss","getContentCssUrls","getFontCssUrls","UploadStatus","blobUriStatuses","createStatus","resultUri","hasBlobUri","getResultUri","isPending","markPending","markUploaded","removeFailed","uuid","rnd","Uploader","pendingPromises","defaultHandler","progress","xhr","withCredentials","credentials","upload","onprogress","loaded","total","path1","path2","json","JSON","responseText","basePath","formData","FormData","filename","handlerSuccess","handlerFailure","resolvePending","blobInfos","openNotification","pendingUploadBlobInfo","closeNotification_1","failureOptions","percent","uploadBlobInfo","uploadBlobs","createUploader","each$5","parsedSelectorToHtml","ancestry","sItem","wrapInHtml","parentCandidate","ancestorName","parentRequired","elmRule","getRequiredParent","siblingElm","parseSelectorItem","$0","$3","$4","getCssText","previewFrag","parentFontSize","previewCss","previewStyles","getPreviewStyles","removeVars","previewOpt","previewElm","Formatter","valigntop","verticalAlign","valignmiddle","valignbottom","alignleft","preview","textAlign","aligncenter","marginLeft","marginRight","alignright","alignjustify","bold","fontWeight","italic","fontStyle","underline","strikethrough","forecolor","hilitecolor","fontname","fontFamily","fontsize","fontSize","lineheight","lineHeight","fontsize_class","blockquote","subscript","superscript","_fmt","_itemName","customValue","removeformat","getFormats","unregister","FormatRegistry","formatChangeState","addShortcut","setup$h","keyCode","disableCaretContainer","setup$k","applyFormat","removeFormat","toggleFormat","matchFormat","closestFormat","matchAllFormats","matchNodeFormat","canApplyFormat","shouldIgnoreCommand","cmd","UndoManager","addUndoLevel","isFirstTypedCharacter","addNonTypingUndoLevel","command","isDirty","modKey","inputType","isInsertFromPasteOrDrop","addKeyboardShortcuts","nonTypingKeycodes","placeholderAttr","isKeyboardEvent","isDeleteEvent","strongRtl","isInlineTarget","getInlineBoundarySelector","findRootInline","findInlineParents","normalizePosition","normalizeForwards","normalizeBackwards","isTextBlockOrListItem","getParentBlock$1","isBeforeRoot","paddEmptyBody","placeCaretInEmptyBody","blockBoundary","getBlockPosition","containerElm","blockPosition","getChildrenUntilBlockBoundary","extractChildren","removeEmptyRoot","nestedBlockMerge","toBlock","insertionPoint","sidelongBlockMerge","trimBr","mergeBlockInto","parentsAndSelf$1","findInsertionPoint","getInsertionPoint","mergeBlocks","block1","block2","backspaceDelete$8","fromBlockPos","toBlockPos","blockPos","lastPositionInBlock","skipLastBr","isDifferentBlocks","parent1","parent2","hasSameParent","isEditable$1","readFromRange","read$1","isRawNodeInTable","deleteRange$1","noPrevious","noNext","isSelectionInTable","isEverythingSelected","emptyEditor","deleteRangeMergeBlocks","backspaceDelete$7","_forward","isContentEditableTrue$2","isContentEditableFalse$4","showCaret","getNodeRange","renderCaretAtRange","caretPositionNode","caretPositionBeforeNode","ceRoot","renderRangeCaret","isBeforeBoundary","isAfterBoundary","deleteContentAndShowCaret","peekCaretPosition","caretRange","deleteRange","trimEmptyTextNode","backspaceDelete$6","getNextPosFn","isBeforeFn","nextCaretPosition","deleteBoundaryText","DeleteAction","moveToElement","moveToPosition","findCefPosition","isDeleteFromCefDifferentBlocks","toCefElm","blockElm","deleteEmptyBlockOrMoveToCef","getAncestorCe","backspaceDeleteCaret","caretLocation","isAtContentEditableBlockCaret","getContentEditableBlockAction","skipMoveToActionFromInlineCefToContent","getContentEditableAction","read","hideFakeCaret","deleteElement$1","paddEmptyElement","backspaceDelete$5","backspaceDeleteRange","backspaceDelete$4","deleteCaret$2","isText","startsWithCaretContainer","endsWithCaretContainer","createZwsp","insertInline","insertInlineBefore","insertInlineAfter","insertInlinePos","isPosCaretContainer","caretNode","renderCaret","evaluateUntil","fns","Location","rescope$1","nPos","isNotInsideFormatCaretContainer","findInsideRootInline","start$1","isValidLocation","readLocation","getName","outside","inside","betweenInlines","fromInline","toInline","hasSameParentBlock","skipNoMovement","fromLocation","toLocation","location2","location1","findLocationSimple","findLocation$1","findLocationTraverse","BreakType","moveRel","modify","VDirection","flip","positions","getBreakType","currentPos","nextPos","Br","Block","Wrap","getPositionsUntil","breakType","breakAt","Eol","getAdjacentLinePositions","getPositionsUntilBreak","findClosestHorizontalPositionFromPoint","lastRect","newRect","lastDist","findClosestHorizontalPosition","targetRect","getPositionsUntilPreviousLine","getPositionsUntilNextLine","getPositionsAbove","getPositionsBelow","getNodeClientRects","toArrayWithNode","customEventRootDelegates","beforeUnloadDelegate","walkUntil$1","isAboveFn","isBeflowFn","line","targetClientRect","findUntil","upUntil","Up","downUntil","Down","isAboveLine","lineNumber","aboveLineNumber","isLine","isLineNumber","isContentEditableFalse$3","findNode","distanceToRectLeft","distanceToRectRight","isInsideX","isInsideY","findClosestClientRect","allowInside","oldClientRect","oldDistance","newDistance","walkUntil","includeChildren","moveToRange","renderRangeCaretOpt","moveHorizontally","isBefore","isAfter","rangeIsInContainerBlock","moveVertically","caretClientRect","linePositions","nextLinePositions","nextLineRect","dist1","dist2","caretPositions","isBelowFn","getClientRect","positionsUntil","closestNextLineRect","getLineEndPoint","moveToLineEndPoint$3","setCaretPosition","setSelected","renderCaretLocation","move$2","isInlineTarget$1","findLocation","moveWord","_caret","hasSelectionModifyApi","moveByWord","setupSelectedState","inlineBoundaries","selectedInlines","targetInlines","toggleInlines","isAtZwsp","safeRemoveCaretContainer","inlines","_inline","renderInsideInlineCaret","moveNextWord","movePrevWord","moveToLineEndPoint$2","linePoint","outsideLoc","setCaretLocation","deleteFromTo","rangeFromPositions","backspaceDelete$3","rescope","toPosition","normalizedFirstPos","normalizedLastPos","hasOnlyTwoOrLessPositionsLeft","backspaceDeleteCollapsed","hasOnlyOneChild","deleteCaret$1","parentInlines","getParentInlines","normalizedFromPos","prevPos","willDeleteLastPositionInElement","isFormatElement$1","innerMost","replaceWithCaretFormat","deleteLastPosition","backspaceDelete$2","deleteElement","backspaceDelete$1","isNearMedia","deleteCaret","parseIndentValue","getIndentStyleName","useMargin","canOutdent","getBlocksToIndent","isReadOnly","indentStyleName","intentValue","validateBlocks","isListComponent","parentIsListComponent","indentation","getIndentation","indentUnit","indentValue","queryCommandState","unit","styleValue","indentElement","backspaceDelete","nativeCommand","getTouch","isBlockElement","isValidTarget","shouldRemoveTextNode","rootNodeName","hasBlockParent","restoreSelection","blockCaretContainer","removeIeControlRect","handleBlockContainer","findBlockCaretContainer","isContentEditableFalse$2","exitPreBlock","getVisualCaretPosition$1","hasForcedRootBlock","newBlock","textBlock","createTextBlock","moveH$2","moveToCeFalseHorizontally","getHorizontalRange","newRange","moveV$3","down","moveToCeFalseVertically","getVerticalRange","moveToLineEndPoint$1","isTarget","rangeBefore","insertElement","moveCaretToNewEmptyLine","rootBlockAttrs","getClosestTargetBlock","isAtLastLine","isAtFirstLine","isAtFirstOrLastLine","insertBr","insertBlock","insertEmptyLine","moveV$2","execute","patterns","defaultPatterns","matchesEvent","match$1","moveH$1","moveV$1","moveToLineEndPoint","getClosestCell","getYAxisValue","isTargetCorner","corners","tds","deflate","getCorners","corner","newCorner","oldCorner","oldDist","sqrt","newDist","findClosestCorner","getClosestCellAbove","getClosestCellBelow","isAtTableCellLine","lineInfo","startsWithWrapBreak","startsWithBrBreak","breakPos","hasNextBreak","isAtFirstTableCellLine","isAtLastTableCellLine","navigateHorizontally","_td","isCaretAtStartOrEndOfTable","renderBlock","navigateVertically","findClosestPositionInAboveCell","getClosestAbovePosition","findClosestPositionInBelowCell","getClosestBelowPosition","move$1","mover","moveH","moveV","moveToCaretPosition","firstNonWhiteSpaceNodeSibling","getParentBlock","hasParent","isListBlock","getContainerBlock","containerBlock","containerBlockParent","isFirstOrLastLi","isEmptyAnchor","containerAndSiblingName","canSplitBlock","normalizeZwspOffset","getEditableRoot","editableRoot","setForcedBlockAttrs","forcedRootBlockAttrs","attrStyles","currentStyles","newStyles","attrClassesOpt","attrClasses","currentClassesOpt","currentClasses","filteredClasses","newClasses","appliedAttrs","remainingAttrs","applyAttributes","insert$2","tmpRng","parentBlockName","newBlockName","isAfterLastNodeInContainer","createNewBlock","shouldKeepStyles","isCaretAtStartOrEndOfBlock","normalizedOffset","insertNewBlockAfter","containerBlockName","shouldEndContainerOnEmptyBlock","isTableCell","wrapSelfAndSiblingsInDefaultBlock","isFirstChild","hasFirstChild","insert$3","includeZwspInRange","trimZwsp","trimLeadingLineBreaks","firstChilds","trimInlineElementsOnLeftSideOfBlock","addBrToBlockIfNeeded","moveSelectionToBr","brElm","extraBr","insertBrBefore","insertBrAfter","hasBrAfter","isAnchorLink","isInsideAnchor","insertBrOutsideAnchor","insert$1","anchorLocation","readInlineAnchorLocation","isControlKey","hasRightSideContent","insertBrAtCaret","newLineAction","shouldBlockNewLine","_shiftKey","getNoNewLineSelector","shouldBlockNewLine$1","isBrMode","requiredState","inListBlock","isListItemParentBlock","inBlock","getParentBlockName","inPreBlock","shouldPutBrInPre","shouldPutBrInPre$1","inBrContext","getBrNewLineSelector","shouldInsertBr","hasShiftKey","_editor","canInsertIntoEditableRoot","rootEditable","getEditableRoot$1","predicates","getAction","platform","isPageUpDown","setNodeChangeBlocker","blocked","insertTextAtPosition","insertNbspAtPosition","insertSpaceAtPosition","insertInlineBoundarySpaceOrNbsp","checkPos","isAtBeginningOfBody","isAtEndOfBody","isAtLineBoundary","needsToHaveNbsp","insertSpaceOrNbspAtSelection","locationToCaretPosition","setSelection","registerKeyboardOverrides","setup$c","executeKeydownOverride$3","setup$b","executeKeydownOverride$2","executeKeyupOverride","setup$a","handleEnterKeyEvent","setup$9","executeKeydownOverride","setup$5","keypressThrotter","setupIeInput","isComposing","setup$7","executeKeydownOverride$1","setup$8","executeKeyupAction","setup$6","NodeChange","lastRng","lastPath","nativeRng","fakeRng","isSameElementPath","initialized","currentPath","isTextBlockNode","getAbsolutePosition","isContentEditableFalse$1","isContentEditableTrue$1","createGhost","clonedElm","opacity","overflow","padding","boxSizing","removeElement","removeDragState","ghost","bindFakeDragEvents","pageDom","dragStartHandler","isLeftMouseButtonPressed","ceElm","elmPos","dragging","maxX","maxY","relX","relY","dragHandler","throttledPlaceCaretAt","movement","targetPos","applyRelPos","bodyPosition","getBodyPosition","scrollPosition","getScrollPosition","mousePosition","iframePosition","inlineScroll","iframeScroll","getBodyScroll","getMousePosition","calc","overflowX","moveGhost","move","dropHandler","targetElement","dragElement","isValidDropTarget","targetClone_1","cloneElm","drop","dragEndHandler","isContentEditableTrue","isContentEditableFalse","getContentEditableRoot","SelectionOverrides","selectedElement","fakeCaret","realSelectionId","isFakeSelectionTargetElement","isNearFakeSelectionElement","setRange","getRange","isWithinCaretContainer","isRangeInCaretContainer","setElementSelection","afterNode","targetClone","origTargetClone","$realSelectionContainer","setupOffscreenSelection","nodeElm","selectElement","removeElementSelection","contentEditableRoot","targetBlock","fakeCaretInfo","fakeTargetNodeRects","getFakeCaretTargets","targetNodeRects","checkInside","closestNodeRect","targetNodeRect","checkPosFn","lineRects","findLineNodeRects","caretInfo","closestFakeCaret","hasNormalCaretPosition","normalizeShortEndedElementSelection","clipboardData","realSelectionElement","clearData","setData","outerText","realTarget","blockIeDrop","shouldBlockUnsupportedDrop","preventFileDrop","dataTransfer","types","preventFileDropIfUIElement","setup","editorRoot","eventNames","blockUnsupportedFileDrop","init$2","renderFocusCaret","setup$1","DOM$6","getRootName","removeUndefined","mkSchemaSettings","boolean_attributes","move_caret_before_on_enter_elements","non_empty_elements","short_ended_elements","text_inline_elements","whitespace_elements","format_empty_lines","mkParserSettings","editorUpload","initEditor","bindPendingEventDelegates","fireInit","storeNative","moveSelectionToFirstCaretPosition","execCallback","auto_focus","focusEditor","destroyed","autoFocus","getStyleSheetLoader$1","ui","loadContentCss","removeCss","contentStyles","contentCssText_1","allStylesheets","framedFonts","makeStylesheetLoadingPromises","content_style","appendStyle","preInit","firePreInit","browser_spellcheck","gecko_spellcheck","spellcheck","quirks","getAttributeApplyFunction","isSelectionAcrossElements","serializeRng","isGecko","isWebKit","mceInternalUrlPrefix","mceInternalDataType","setEditorCommandState","selectAll","shortcuts","documentElementEditingFocus","Range","body_1","blur","selectControlElements","disableBackspaceIntoATable","setGeckoEditingOptions","isReadOnly$1","showBrokenImageIcon","restoreFocusOnKeyDown","getWin","bodyHeight","blockCmdArrowNavigation","tapLinksAndImages","blockFormSubmitInsideEditor","refreshContentEditable","allRng","allContentsSelected","selectionHtml","internalContent","escape","setMceInternalContent","getMceInternalContent","queryCommandSupported","internal","template","setAttributeNode","Quirks","firePostRender","directionality","getDirectionality","protect","initEditorWithInitialContent","startContent","loadInitialContent","initContentBody","skipWrite","orgVisibility","iframeHTML","bodyElement","contentAreaContainer","uploader","imageScanner","toBlobInfo","findFirst","mime","cachedBlobInfo","removeByUri","revokeObjectURL","urlFilters","changeHandler","lastChangedLevel","fireIfChanged","UploadChangeHandler","aliveGuard","replaceString","replaceImageUrl","targetUrl","replacementUrl","replacementString","replaceUrlInUndoStack","uploadImages","scanForImages","imageInfos","imagesToRemove","filteredResult","uploadInfo","shouldReplaceBlobUris","convertURL","replaceImageUriInView","uploadError","uploadUri","uploadImagesAuto","isValidDataUriImage","imgElm","dataImgFilter","getImagesDataImgFilter","resultItem","replaceBlobUris","source_view","addFilter","EditorUpload","hex_colors","force_hex_style_colors","createParser","mkSerializerSettings","annotator","_nodeChangeDispatcher","startData","longpressFired","debounceLongpress","distX","distY","isFarEnough","isEqualNode","setup$e","preventSummaryToggle","filterDetails","setup$3","detail","normalizeSelection","setup$2","setup$4","addCommand","deleteCommand","forwardDeleteCommand","setup$f","setup$d","getPlaceholder","updatePlaceholder","isNonTypingKeyboardEvent","showPlaceholder","isTypingKeyboardEvent","isForcedRootBlockFalse","isVisuallyEmpty","firePlaceholderToggle","setup$g","setupRtcThunk","editorCast","rtcPlugin","getRtcSetup","nul","makeNoopAdaptor","rtcEditor","defaultVars","_undoManager","_locks","_index","_node","_similar","_rfl","_format","_details","getRawModel","makeRtcAdaptor","rtc","isRemote","setup$i","setupRtc","setProgressState","_rtcMode","DOM$5","createIframe","customAttrs","iframe","iframeTitle","ifr","getIframeAttrs","frameBorder","allowTransparency","isDomainRelaxed","domain","hostname","bodyUuid","domainRelaxUrl","relaxDomain","iframeContainer","getDocType","documentBaseUrl","bodyId","getBodyId","bodyClass","getBodyClass","translatedAriaText","getIframeAriaText","getIframeHtml","DOM$4","initPlugin","initializedPlugins","Plugin","pluginInstance","pluginInitError","trimLegacyPrefix","createThemeFalseResult","editorContainer","renderThemeUi","orgDisplay","renderUI","renderFromLoadedTheme","iframeHeight","renderFromThemeFunc","renderThemeFalseIframe","renderThemeFalse","iconPackName","currentIcons","loadIcons","svgData","icon","addIcon","initIcons","Theme","initTheme","initPlugins","renderInfo","uiApiFacade","disable","isDisabled","enable","augmentEditorUiApi","boxInfo","hidden","init$1","DOM$3","hasSkipLoadPrefix","getIconsUrlMetaFromName","scriptLoader","themeUrl","getThemeUrl","loadTheme","languageCode","languageUrl","getLanguageUrl","url_1","languageLoadError","loadLanguage","defaultIconsUrl","customIconsUrl","getIconsUrl","getIconsUrlMetaFromUrl","cat","urlMeta","iconsLoadError","getExternalPlugins$1","depPlugin","url_2","loadPlugins","legacyPropNames","getFontProp","legacyPropName","getProperty","getSpecifiedFontProp","getComputedFontProp","getFontSize","getFontFamily","findFirstCaretElement","mapRange","mapper","binder","getCaretElement","bindRange","fromFontSizeNumber","fontSizeNumber","getFontStyleValues","fontClasses","getFontSizeClasses","normalizeFontNames","font","fonts","each$4","EditorCommands","commands","setupCommands","skip_focus","customCommand","queryCommandValue","addCommands","commandList","addQueryStateHandler","addQueryValueHandler","hasCustomCommand","execNativeCommand","isFormatMatch","storeSelection","selectionBookmark","_command","_ui","skipFocus","bookmarkRng","contentEditableHost","getContentEditableHost","queryCommandEnabled","align","listParent","fontNameAction","fontSizeAction","lineHeightAction","customCode","processValue","insertAtCaret","editingHost","selectNodeContents","alignStates","Undo","Redo","fontNameQuery","fontSizeQuery","specifiedStyle","lineHeightQuery","internalContentEditableAttr","remove$5","remove$4","get$4","cleanClass","setContentEditable","toggleReadOnly","removeFakeSelection","hasUiFocus","hasEditorOrUiFocus","restoreFakeSelection","registerFilters","nativeEvents","EventDispatcher","bindings","toggleEvent","isNative","lcName","beforeFire","once","wrappedCallback","currentName","bindingName","filteredHandlers","getEventDispatcher","_eventDispatcher","toggleNativeEvent","Observable","bubble","dispatcherArgs","DOM$2","getEventTarget","eventName","eventRoot","isListening","isClickEvent","getAnchorHrefOpt","targetEl","numChars","removeFromStart","processReadonlyEvents","bindEventDelegate","delegate","delegates","eventRootElm","editors","EditorObservable","_pendingNativeEvents","unbindAllNativeEvents","defaultModes","switchToMode","activeMode","availableModes","oldMode","newMode","activate","deactivate","editorReadOnly","fireSwitchMode","each$3","explode$1","keyCodeLookup","f1","f2","f3","f4","f5","f6","f7","f8","f9","f10","f11","f12","modifierNames","parseShortcut","shortcut","charCode","access","alt","ctrl","meta","Shortcuts","pendingPatterns","hasModifier","isFunctionKey","matchShortcut","subpatterns","executeShortcutAction","desc","cmdFunc","normalizeCommandFunc","createShortcut","DOM$1","extend$3","each$2","Editor","buttons","menuItems","popups","contextMenus","contextToolbars","sidebars","bridge","loadedCSS","isNotDirty","documentBaseURL","baseDefaults","document_base_url","add_form_submit_trigger","submit_patch","add_unload_trigger","convert_urls","relative_urls","remove_script_host","visual","hidden_input","getDefaultSettings","finalSettings","deprecation_warnings","rawSettings","hasDeprecatedPlugins","hasDeprecatedSettings","isLegacyMobileTheme","logDeprecationsWarning","getEditorSettings","base_url","_setBaseUrl","baseURI","referrer_policy","language_load","editorCommands","cache_suffix","addButton","addGroupToolbarButton","addToggleButton","addMenuButton","addSplitButton","addMenuItem","addNestedMenuItem","addToggleMenuItem","addAutocompleter","addContextMenu","addContextToolbar","addContextForm","addSidebar","modeInstance","design","registerReadOnlyContentFilters","registerReadOnlySelectionBlockers","setMode","registerMode","render","snapshot","clone$3","getStyleSheetLoader","isInline","formElement","hasHiddenInput","formEventDelegate","resetContent","shouldPatchSubmit","submit","_mceOldSubmit","triggerSave","windowManager","isEncodingXml","save","shouldAddFormSubmitTrigger","shouldAddUnloadTrigger","_beforeUnload","set_dirty","callbackLookup","getParamObject","is_removing","getContent$2","initialContent","oldState","urlconverter_callback","addVisual$1","fireRemove","restoreOriginalStyles","fireDetach","automatic","restoreForm","clearDomReferences","_scanForImages","each$1","extend$2","instanceCounter","boundGlobalEvents","legacyEditors","globalEventDelegate","EditorManager","toggleGlobalEvents","removeEditorFromList","targetEditor","oldEditors","isQuirksMode","compatMode","majorVersion","minorVersion","releaseDate","i18n","tinymce","tinyMCEPreInit","srcScript","currentScript","pluginBaseUrls","plugin_base_urls","pluginBaseUrl","invalidInlineTargets","createId","provideResults","initEditors","initCount","createEditor","forms","editor_deselector","editor_selector","findTargets","isInvalidInlineTarget","addI18n","tasks","resultFns","extendClass","initializing","min$1","max$1","round$1","relativePosition","targetW","targetH","relChars","create$2","Rect","inflate","findBestRelativePosition","constrainRect","rels","intersect","cropRect","x1","y1","clamp","clampRect","fixedSize","cx2","cy2","underflowX1","underflowY1","overflowX2","overflowY2","fromClientRect","Resource","loadErrMsg","runErrMsg","task","waiter","resolveCb","rejectCb","complete","completer","awaiter","extend$1","Class","_super","mixins","mixin","Mixins","dummy","Methods","Properties","fieldName","Statics","Defaults","member","createMethod","localStorage","JSONUtils","stringify","hexCode","JSONP","XHR","ready","success_scope","error_scope","overrideMimeType","content_type","crossDomain","setRequestHeader","requestheaders","JSONRequest","sendRPC","ecb","scb","xhrArgs","ty","setItem","removeItem","storage","getItem","publicApi","geom","util","LocalStorage","Color","hue","saturation","brightness","side","chroma","hsvToRgb","toRgb","toHsv","minRGB","maxRGB","rgb2hsv","ImageUploader","showNotification","TreeWalker","Serializer","Selection","isMac","tinyMCE","exportToWindowGlobal","exportToModuleLoaders","jQuery","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","getter","__esModule","definition","React","ReactDOM","SearchAPI","api_url","on_api_error","endpoint","request","get_api_url","headers","get_csrf_token","Request","fetch","ok","catalog","_loop","_Object$entries$_i","_slicedToArray","_Object$entries","forEach","depth","entries","_i2","_Object$entries2","_Object$entries2$_i","get_json","dataset","_React$Component","_inherits","SearchField","input_field_ref","on_focus","_assertThisInitialized","on_blur","on_change","on_keydown","on_keypress","on_clear_click","on_search_click","get_search_value","on_search","which","on_clear","on_arrow_key","on_enter","autoComplete","ref","onKeyDown","onKeyPress","onChange","onFocus","onBlur","zIndex","onClick","currentLanguage","catalogs","ttl","valueOf","configure","config","_setCatalog","_storeCatalog","getUrl","loadCatalog","MessageFactory","msgid","keywords","msgstr","regexp","keyword","_t","I18N","SearchResults","on_select","on_page","on_prev_page","on_next_page","on_close","on_mouse_over","value_key","columns","get_columns","column","get_results","searchterm","allow_user_value","minWidth","get_value_key","_step","_iterator","_createForOfIteratorHelper","get_result_value","cursor","focused","onMouseOver","build_columns","_step2","_iterator2","get_column_names","highlighted","highlight","dangerouslySetInnerHTML","__html","used","rx","replaceAll","pages","page","first_page","last_page","crop_before","crop_after","next_url","prev_url","has_results","get_style","build_close_button","build_header_columns","build_rows","build_prev_button","build_pages","build_next_button","SelectedValues","on_deselect","init_confirmation","confirmation","rootSelector","btnOkLabel","btnOkClass","btnOkIconClass","btnCancelLabel","btnCancelClass","btnCancelIconClass","display_template","records","broken_ref","_typeof","interpolate","selected_values","get_selected_values","review_state","render_display_template","set_values","build_selected_items","QuerySelectWidgetController","value_query_index","b_start","results_table_width","root_el","_data_keys","parse_json","goto_page","clear_results","select_focused","deselect","navigate_results","on_click","focus_row","on_flush","on_sync","fix_dropdown_position","_possibleConstructorReturn","_len","_key","widget","field_rect","dropdown_rect","body_rect","body_height","body_width","dropdown_height","dropdown_width","X","Y","event_name","event_data","CustomEvent","bubbles","multi_valued","limit","column_names","field_name","search_index","search_term","search_wildcard","endsWith","get_search_query","search_query","url_params","make_query","toggle_loading","set_results_data","fetch_results","setState","trigger_custom_event","clear_results_after_select","rowindex","searchvalue","at","current_values","to_sync","sync_records","_step3","_iterator3","missing","value_query","_step4","_iterator4","flush","root_class","show_search_field","is_disabled","AddressWidgetAPI","portal_url","get_url","LocationSelector","locations","render_options","AddressField","visible","is_location_selector","is_visible","render_element","Address","subdivision1","subdivision2","city","zip","address","address_type","on_country_change","on_subdivision1_change","on_subdivision2_change","on_city_change","on_zip_change","on_address_change","force_array","subdivisions1","subdivisions2","labels","subfield","get_input_id","get_input_name","get_label","get_subdivisions1","get_subdivisions2","AddressWidgetController","fetch_subdivisions","_objectSpread","subdivisions","subdivision","html_items","_step$value","section_title","render_items","WIDGETS","renderer","render_queryselect_widget","render_uidreference_widget","render_address_widget","intlTelInputId","initial_country","preferred_countries","error_codes","error_code","error_msg","render_phone_widget","paste_data_images","content_css","render_tinymce_widget","render_all_widgets","cfg"],"sourceRoot":""}