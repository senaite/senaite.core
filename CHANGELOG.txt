3.1.7-dev (unreleased)
-----

LIMS-1605: Tescan TIMA interface
LIMS-1604: BioDrop uLite interface
LIMS-1603: Life Technologies Qubit interface
LIMS-1517: Storage field tag untranslated?
LIMS-1518: Storage Location table
LIMS-1527: CC Contact on AR view (edit) offers all contacts in system
LIMS-1536: Add button [Add], to alow quickly addings in referencewidget
LIMS-1587: Better support for extension of custom sample labels
LIMS-1622: Version Check does not correctly check cache
LIMS-1623: Implement bika-frontpage as a BrowserView


3.1.6 (2014-12-17)
------------------
LIMS-1530: Scrambled Analysis Category order in Published Results
LIMS-1529: Error while inserting an AR with container-based partitioning is required
LIMS-1460: Additional field in AR for comments or results interpretation
LIMS-1441: An error message related to partitions unit is shown when selecting analysis during AR creation
LIMS-1470: AS Setup. File attachment field tag is missing
LIMS-1422: Results doesn't display yes/no once verified but 1 or 0
LIMS-1486: Typos in instrument messages
LIMS-1498: Published Results not Showing for Logged Clients
LIMS-1445: Scientific names should be written in italics in published reports
LIMS-1389: Units in results publishing should allow super(sub)script format, for example in cm2 or m3
LIMS-1500: Alere Pima's Instrument Interfice
LIMS-1457: Exponential notation in published AR pdf should be formatted like a×10^b instead of ae^+b
LIMS-1334: Calculate result precision from Uncertainty value
LIMS-1446: After retracting a published AR the Sample gets cancelled
LIMS-1390: More workflow for Batches
LIMS-1378: Bulking up Batches
LIMS-1479: new-version and upgrade-steps should be python viewlets
LIMS-1362: File attachment uploads to Batches
LIMS-1404: New Batch attributes (and their integration with existing ones on Batch views)
LIMS-1467: Sample Point Lookup doesn't work on AR modify
LIMS-1363: Batches per Client
LIMS-1405: New Sample and AR attributes
LIMS-1085: Allow Clients to add Attachments to ARs
LIMS-1444: In AR published report accredited analysis services are not marked as accredited
LIMS-1443: In published reports the publishing date is not shown in the pdf
LIMS-1420: Status filter is not kept after moving to next page
LIMS-1442: Sample Type is not filtred by Sample Point
LIMS-1448: Reports: when you click on "Analysis turnaround time" displays others
LIMS-1440: Error when trying to publish with analysis from different categories
LIMS-1459: Error when checking instrument validity in manage_results
LIMS-1430: Create an AR from batch allows you to introduce a non existent Client and Contacts don't work properly

- After modifying analysis Category, reindex category name and UID for all subordinate analyses
- Setup data import improvements and fixes
- Simplify installation with a custom Plone overview and add site


3.1.5 (2014-10-06)
------------------

LIMS-1082: Report Barcode. Was images for pdf/print reports etc
LIMS-1159: reapply fix for samplepoint visibility
LIMS-1325: WSTemplate loading incompatible reference analyses
LIMS-1333: Batch label replace with standard Plone keyword widget
LIMS-1335: Reference Definitions don't sort alphabetically on WS Template lay-outs
LIMS-1345: Analysis profiles don't sort
LIMS-1347: Analysis/AR background colour to be different to for Receive and To be Sampled
LIMS-1360: Number of analyses in ARs folder view
LIMS-1374: Auto label printing does not happen for an AR drop-down receive
LIMS-1377: Error when trying to publish after updating branch hotfix/next or develop
LIMS-1378: Add AR/Sample default fields to Batch
LIMS-1395: front page issue tracker url
LIMS-1402: If no date is chosen, it will never expire." not been accomplished
LIMS-1416: If a sample point has a default sample type the field is not pulled automatically during AR template creation
LIMS-1425: Verify Workflow (bika_listing) recursion

- added 'getusers' method to JSON API
- Added 'remove' method to JSON API
- Added AR 'Copy to new' action in more contexts
- Added basic handling of custom Sample Preparation Workflows
- Added decimal mark configuration for result reports
- Added help info regards to new templates creation
- Added IAcquireFieldDefaults - acquire field defaults through acquisition
- Added IATWidgetVisibility - runtime show/hide of AT edit/view widgets
- Added watermark on invalid reports
- Added watermark on provisional reports
- Alert panel when upgrades are available
- All relevant specification ranges are persisted when copying ARs or adding analyses
- Allow comma entry in numbers for e.g. German users
- Bika LIMS javascripts refactoring and optimization
- Fix ZeroDivisionError in variation calculation for DuplicateAnalysis
- Fixed spreadsheet load errors in Windows.
- Fixed template rendering errors in Windows
- JSONAPI update: always use field mutator if available
- JSONAPI: Added 'remove' and 'getusers' methods.
- Refactored ARSpecs, and added ResultsRange field to the AR

3.1.4.1 (2014-07-24)
--------------------

3.1.4 release was broken, simple ARs could not be created.



3.1.4.1 (2014-07-24)
--------------------

3.1.4 release was broken, simple ARs could not be created.

LIMS-1339: Published reports should use "±" symbol instead of "+/-"
LIMS-1327: Instrument from worksheet
LIMS-1328: Instrument calibration test graphs do not work on multiple samples
LIMS-1347: Analysis/AR background colour to be different to for Receive and To be Sampled
LIMS-1353: Analyses don't sort in Attachment look-up

Preview for Results reports
    - Single/Multi-AR preview
    - Allows to cancel the pre-publish/publish process
    - Allows to make visible/invisible the QC analyses
    - Allows to add new custom-made templates
    - JS machinery allowed for pdf reporting

3.1.4 (2014-07-23)
------------------

LIMS-113: Allow percentage value for AS uncertainty
LIMS-1087: Prevent listing of empty categories
LIMS-1203: Fix Batch-AnalysisRequests query
LIMS-1207: LIMS-113 Allow percentage value for AS uncertainty
LIMS-1221: use folder icon for ARImports in nav
LIMS-1240: fix permissions for "Copy To New" in AR lists
LIMS-1330: handle duplicate of reference analysis
LIMS-1340: soft-cache validator results
LIMS-1343: Prevent sudden death if no version information is available
LIMS-1352: SamplingWorkflow not saved to sample
LIMS-334: Add Service/ExponentialFormatPrecision
LIMS-334: Added ExponentialFormatThreshold setting
LIMS-334: Allow exponential notation entry in numeric fields
LIMS-334: Exponent Format used for analysis Result
LIMS-334: Remove duplicate getFormattedResult code
LIMS-83: Update Method->calculation reference version when Calculation changes

- Formula statements can be written on multiple lines for clarity.

- Replace kss-bbb ajax-spinner with a quieter one

- bika.lims.utils.log logs location url correctly

3.1.3 (2014-07-17)
------------------

Missing fixes from 3.1.2

LIMS-671: Preferred/Restricted client categories
LIMS-1251: Supply order permission error
LIMS-1272: Currency in Price Lists
LIMS-1310: Broken AnalysisProfile selector in AR Add form.

3.1.2 (2014-07-15)
------------------

LIMS-1292: UI fix Retracted ARs workfow: Warning msg on "full" retract.
LIMS.1287: UI fix Report parameter formatting
LIMS-1230: UI fix Livesearch's box
LIMS-1257: UI fix Long titles in Analysis Profiles, Sample Points, etc.
LIMS-1214: UI fix More columns
LIMS-1199: UI fix Worksheet listing: better columns
LIMS-1303: jsi18n strings must be added to bika-manual.pot.  i18ndude cannot find.
LIMS-1310: Filter SamplePoints by client in AR Template Edit View
LIMS-1256: Client objects included in AR-Add filters for Sample Point etc.
LIMS-1290: Allows Analyst to retract analyses, without giving extra permissions.
LIMS-1218: Slightly nicer monkey patch for translating content object ID's and titles.
LIMS-1070: Accreditation text can be customised in bika_setup
LIMS-1245: off-by-one in part indicators in ar_add
LIMS-1240: Hide "copy to new" from Analyst users

LIMS-1059: Added worksheet rejection workflow
    RejectAnalysis (Analysis subclass (has IAnalysis!)) workflow transition.
    Does not retract individual Analysis objects - instead, forces their state
        back to "Received", and assigns them onto newly created WS.
    Sets attributes on src and dst worksheets:
        WS instance rejected worksheet attribute: .replaced_by = UID
        WS instance replacement worksheet attribute: .replaces_rejected_worksheet:UID

Fixed some i18n and encoding snags, and updated translations.

3.1.1 (2014-06-29)
------------------

Some bugs which only appear while running Windows, have been fixed.

LIMS-1281: Fix Restricted and Default categories in ar_add
LIMS-1275: Fix lax Aalyst permissions
LIMS-1301: jsonapi can set ReferenceField=""
LIMS-1221: Icon for ARImports folder in Navigation
LIMS-1252: AR Published Results Signature Block formatting
LIMS-1297: Update frontpage


3.1 (2014-06-23)
----------------

- Product and Analysis specifications per AR
- Incorrect published results invalidation workflow
- Improved re-testing workflow
- Adjustment factors on worksheets
- Using '< n' and '> n' results values
- Sample Storage locations
- Sample Categories
- Analysis Prioritisation
- Bulk AR creation from file
- Results reports inclusion of relevant QC results
- Supply Inventory and Orders
- JSON interface
- Management Reports export to CSV
- Enhancements to AR Batching
- Enhancements to Results Reports

- Instrument management module

    Calibration certificates, maintenance, Instrument QC
    Method, Instrument and Analysis integrity

- Instrument interfaces

     Agilent MS 'Masshunter Quant'
     Thermo Gallery
     Foss Winescan FT 120, Auto

- Invoices

   Per AR, Analysis per Invoice line.
   Per Supply Order, inventory item per Invoice line
   Invoices by email
   Invoice 'batches' for selected time period, ARs aand Orders per Invoice line
   Invoice batch export to accounts systems
   Price lists. Analysis Services and Supplies

3.1.3036 (2014-05-30)
---------------------

Added two checboxes in BikaSetup > Security:
- Allow access to worksheets only to assigned analysts (Y/N)
- Only lab managers can create and amange new worksheets (Y/N)

** IMPORTANT NOTES **
The 3036 upgrade sets the above options to true by default, so after
being upgraded, only the labmanagers will be able to manage WS and the
analysts will only have access to the worksheets to which they are
assigned. These defaults can be changed in BikaSetup > Security.

3.0 (2014-03-15)
----------------

- Fix some out-dated dependencies that prevented the app from loading.

- Development of the current bika 3.0 code has slowed, and our efforts have been focused on
the 3.01a branch for some time.

3.0rc3.5.1 (2013-10-25)
-----------------------

Fix CSS AR Publication error

3.0rc3.5.1 (2013-10-25)
-----------------------

Fix error displaying client sample views

3.0rc3.5 (2013-10-24)
---------------------

Requires Plone 4.3.  For information on upgrading Plone, visit
http://plone.org/documentation/manual/upgrade-guide

- Fix a serious error saving Analysis results.
- Improve upgrade handling in genericsetup profile
- Fix errors in setupdata loader
- Force UTF-8 encoding of usernames (imported client contacts can now login)
- Removed outdated test setup data
- Handle duplicate request values in bika_listing
- ID server handles changes in ID schemes without error
- Remove folder-full-view from front-page view
- Updated workflow and permissions to prevent some silly errors
- Add robot tests
- Add default robots.txt

3.0rc3.2 (2013-06-28)
---------------------

- Fix site-error displaying upgraded instruments
- Fix spinner (KSS is not always enabled)
- Add extra save button in ar_add
- Label Printing: "Return to list" uses browser history
- Bold worksheet position indicators
- Remove version.txt (use only setup.py for version)

3.0rc3.1 (2013-06-27)
---------------------

- Fix permission name in upgrade step

3.0rc3 (2013-06-25)
-------------------

- Many instrument management improvements! (Merge branch 'imm')
- Removed ReferenceManufacturer (use of generic Manufacturer instead)
- Removed ReferenceSupplier (use Supplier instead)
- Improve service/calculation interim field widgets
  Allows service to include custom fields (without calculation selected)
- Fix services display table categorisation in Analysis Specification views
- Stop focusing the search gadget input when page load completes. (revert)
- Limit access to Import tab (BIKA: Manage Bika)
- New permission: "BIKA: Import Instrument Results"
- New permission: "BIKA: Manage Login Details" - edit contact login details
- Some late changes to better handle the updates to ID creation
- Plone 4.3 compatibility (incomplete)
- Use Collections as a base for Queries (incomplete)
- Many many bugfixes.

3.0rc2.3 (2013-01-29)
-------------------

- Fix bad HTML

3.0rc2.2 (2013-01-28)
-------------------

- Fix an error during AR Publish

3.0rc2.1 (2013-01-21)
-------------------

- Fix bad HTML
- Pin collective.js.jqueryui version to 1.8.16.9

3.0rc2 (2013-01-21)
-------------------

- Updated all translations and added Brazilian Portuguese
- RecordsWidget: subfield_types include "date"
- RecordsWidget: Automatic combogrid lookups
- Added all bika types to Search and Live Search
- Transition SamplePartition IDs to new format (SampleType-000?-P?
- Always handle non-ASCII characters: UTF-8 encoding everywhere
- Accept un-floatable (text) results for analyses
- Hidden InterimFields in Calculations
- Added InterimFields on AnalysisServices for overriding Calculation Interimfields.
- Disable KSS inline-validation
- Categorized analyses in AR views
- Added remarks for individual analyses
- Improved Javascript i18n handling
- Improved default permissions
- New reports
    - Added 'Analysis summary per department' (merge of 'Analyses lab department weekly' and 'Analyses request summary by date range'
    - Added 'Analyses performed as % of total' report
    - Added Analyses per lab department report
    - Added 'Samples received vs. samples reported' report
    - Added Daily Samples Received report
- Many many bugfixes.

3.0rc1 (2012-10-01)
-------------------


- Removed Bika Health data from released egg
- Remove remarks from portal_factory screens
- Add Month/Year selectors to default datetime widget
- ClientFolder default sorting.
- Date formats for jquery datepicker
- Don't overwrite the Title specified in @@plone-addsite
- Bug fixes

3.0rc1 (2012-09-25)
-------------------

### Changes

- Requires Python 2.7 (Plone 4.2)
- Add GNUPlot dependency
- Added client sample points
- Added Sampling Deviation selections
- Added Ad-Hoc sample flag
- Added Sample Matrices (Sampletype categorisation)
- Added custom ResultsFooter field in bika setup
- Added PDF Attachments to published results
- Electronic signature included in Results and Reports
- Login details form to create users for LabContacts
- Sampling workflow is disabled by default
- Methods are versioned by default
- Methods are publicly accessible by default
- Queries WIP
- Reports WIP
- Modified label layouts for easier customisation
- Cleaned print styles
- Use plonelocales for handling Date/Time formats
- SMS and Fax setup items are disabled by default

2012-06-21
----------

- Partitioning & Preservation automation
- Reports
- Sample point & types relations in UI
- AR template enhancements
- Sample and AR layout improvements
- Labels
- Configuration logs
- Faster indexing
- JavaScript optimisation
- Better IE compatibility
- Set-up worksheet improvements
- Updated translations
- Workflow tweaks
- Tweaks to Icons, Views & Lists

2012-04-23
----------

- Optional sampling and preservation workflows and roles.
- Sample partitioning.
- AR templates - Sample point & Sample type restrictions.
- Reports - framework only. 'Analysis per service' shows what is planned.
- Improved i18n handling, and updated strings from Transifex.
- Numerous performance enhancements
- Analysis Service & Method associations.
- An improved Analysis Service pop-up window.
- Sample Type and Sample Point relationship.
- Currency selection from zope locales
- Combined AR View and Edit tabs.
- Re-factored AR 'Add/Remove Analyses' screen
- Store the date of capture for analysis results
- Append only remarks fields on more objects.

2012-01-23
----------

 - Made Bika compatible with Plone 4.1
 - Sampler and Preserver roles, users and permissions
 - Sampling and Preservation workflows
 - Inactive and Cancellation Workflows
 - Pre-preserved Containers
 - Automatic versioning for some bika_setup types
 - Analyst and Instrument on Worksheet templates
 - XLSX setup data loader
 - Sample disposal date based on date sampled, not date received.
 - Internal ID Server by default
 - user defined calculations and interim fields
 - Dry Matter results option does not appear until enabled in Site Setup
 - Accreditation portlet disabled until enabled in Site Setup
 - BikaListingView
 - New icons
 - (mostly) usable at 800x600
 - Column display toggles
 - Future dated samples and ARs
 - Accreditation template: i18n in locales/manual.pot/accreditation_*
 - intermediate workflow state for analyses requiring attachments
 - Labmanager has Site Administrator role (not Manager)
 - 'Indeterminate' results
 - use portal_factory everywhere
 - working test suite
 - static resource directories
 - Merged BikaMembers types
 - CoordinateField/Widget
 - DurationField/Widget
 - CustomRecordsWidget

2.3.3 Bug fix release
---------------------

 - Inclusion of BikaMembers 0.0.3. No changes to bika code, version bumped
   to facilitate release of new BikaMembers version.

2.3
---

 - Analysis categories introduced
 - Analysis service result restrictions - specification of possible results
 - Allow site and client specification of email and fax subject line content
 - Additional instrument/export formats:
   WinescanFT120, WinescanAuto, FIAStar and Bartelt's data-collector
 - Export worksheet analyses to instruments
 - PDF as a result output option
 - SMS result output option
 - Result publication options synchronized and signatures added to emails
 - Email batching of query results conforms to result mailing
 - IDServer batching of unique id request
 - Optmization of worksheet searching on selection criteria
 - Extract tab added with extract for analysis services or profiles
 - Batch update of analysis service prices
 - German translation module added
 - Added a light query form which excludes analysis category and service
 - Batch size setting in analysis request lists
 - BikaMembers replaces UpfrontContacts
 - ATSchemaEditor removed
 - Significant performance improvements

 - Resolve client action conflicts
 - Sampled date validation
 - Drymatter formatting on output corrected
 - Correct default none workflows
 - Review portlet optimization
 - Pricelist prints blank for analysis service with price not defined

2.2
---

 - Attachments permitted on analysis requests and analyses
 - Worksheet resequencing, and sort order for worksheet analysis selection
 - Worksheet deletion only available for open worksheets
 - Portlet to provide export of analysis services and analysis profiles
 - Requirement for unique analysis service names, analysis service keywords,
 - instrument import keywords and analysis profile keywords enforced.
 - Report headings and formats standardized accross different reports
 - AR import alternative layout provided with selection, including profiles
 - Progress bar introduced for long running processes

2.1.1
-----

 - Disposal Date for Samples and Retention Period per Sample Type added.
 - Various new search criteria added.
 - Standard Manufacturers introduced.
 - Labels for Standard Samples introduced.
 - "Print" and "Email" facilities introduced for lists of Standard Samples and Standard Stocks.
 - "Duplicate" facility for Analysis Services introduced.
 - Addresses added to top of emailed query results.
 - Labels for Samples and Analysis Requests changed.
 - Analysis Services can have multiple Methods.
 - Change log introduced for Methods.
 - Methods added to left navigation bar.
 - List of Methods included in pop-up for Analyses.
 - Documents may be uploaded for Methods.

2.1
---

 - Sample object and workflow introduced
 - Results specifications, lab and per client
 - Analysis profiles
 - Worksheet template engine
 - Interface to Bika Calendar
 - Import of analysisrequests from csv file
 -  Export of results to csv file
 - Print as publication option
 - Lab Departments, lab contacts, and department manager introduced
 - Quality Control calculations. Control, blank and duplicate analyses.
 - QC graphs, normal distribution, trends and duplicate variation
 - Various analysis calculations allowed. Described by Calculation Type
 - Dependant Calcs introduced. Where an analysis result is calculated from
 -  other analyses: e.g. AnalysisX = AnalysisY - Analysis Z
 - Dry matter result reporting. Results are reported on sample as received,
 -  and also as dry matter result on dried sample
 - Re-publication, Pre publication of individual results and per Client
 - Many reports including Turn around, analyses repeated and out of spec

1.2.1
-----


 - Removed invoice line item descriptions from core code to allow skin
   integration
 - Create dummy titration values for analyses imported from instrument
 - More language translations

1.2.0
-----

 - Statements renamed to Invoices
 - Jobcards renamed to Worksheets
 - New identification fields added to analysis request
 - Client Reference, Sample Type and Sample Point
 - Welcome page introduced
 - Late analyses list linked from late analyses portlet
 - Icon changes
 - Accreditation body logo and details added to laboratory info
 - Accreditation logo, disclaimers added throughout web site
 - Laboratory confidence level value data driven from laboratory info
 - Analyses methods provided as pop-up where analyses are listed
 - Titration factors and titration volumes added to analyses and worksheets
 - Measure of uncertainties introduced per analysis and intercept
 - Two new specialist roles created - verifier and publisher
 - Sample test data load script - load_sample_data.py
 - Implement generic instrument data import tool
 - Login portlet added
 - Modifications required to support interlab
   Permit analysis parent (sample) to be in 'released' state.
   Reference SampleID on AnalysisRequest-

 - 1566324: Logged in page redirected to welcome page.
 - 1573299: LiveSearch - Added permissions to InvoiceLineItem.
 - 1573083: Status Drop Down - Invoicing
 - 1551957: Contacts not visible to other contacts. Correct local owner role
 - 1566334: position of 'add new ar' button changed to conform to other forms
 - 1532008: query results sort order most recent first
 - 1532770: Order default listing correction
 - 1558458: Member discount data driven in messages on AR forms
 - 1538354: SubTotal and VAT calculation on edit AR
 - 1532796: AR edit - allow change of contact

1.1.3
-----

 This is a bug fix release. Migration from older versions has also
 been improved greatly.

 Please note that AnalysisRequest now has a custom mutator that
 expects the title of the Cultivar, not the UID. This will impact
 anybode that customised the *analysisrequed_add.cpy* controller
 script and the *validate_analysisrequest_add_form.vpy* validation
 script.


 - 1423182: IndexError on surfing to LIMS pages without being logged on
 - 1423238: Orders - Dispatch date
 - 1429992: AR edit tab - Cultivar uneditable
 - 1429996: Cultivar names to allow numbers
 - 1429999: Late analysis alert - 'More...' URL
 - 1430002: Sample due alerts - 'More...' URL
 - 1433787: Security - Clients
 - 1434100: Search - Index & Attribute errors
 - 1418473: Updated start-id-server.bat for Win2K & Win XP

1.1.2
-----

 - 1423205: Show logs to labmanager set-up
 - 1291750: Added default ID prefixes for Order and Statement
 - 1424589: Late analysis alert to be calulated on date received

1.1.1
-----


 - Updated portlets with Plone 2.1 style definition list markup

 - 1423179: Clients must not see JobCard links on Analysis Requests
 - 1423182: IndexError on surfing to LIMS pages without being logged on
 - 1423188: Site map - Clients should not have access to ...
 - 1423191: Link rot - 'logged in' page
 - 1423193: Groups folder should not be shown
 - 1423194: No 'More...' if there are less than 5
 - 1423204: AR view - Missing tabs and status drop down
 - 1423209: Schema Editor - Drop Down List Issue (Select)
 - 1423234: Late Analysis alert shows for anonymous visitors
 - 1423363: Report Analysis Totals
 - 1423386: Email publication error

1.1.0
-----

 - Made Bika compatibable with Plone 2.1
 - Added Spanish translation contributed by Luis Espinoza
 - Added Italian translation contributed by Pierpaolo Baldan
 - Added Dutch translation contributed by Joris Goudriaan
 - Added Portugese translation contributed by Nuno R. Pinhão
 - The schemas of Client, Contact, AnalysisRequest and Order can be
   edited in the through-the-web schema editor, ATSchemaEditorNG.
 - The maximum time allowed for the publication of results can now be
   set per analysis service. The portlet
   'skins/bika/portlet_late_analysis.pt' has been added to alert lab
   users when analyses are late.
 - Analyses on an AnalysisRequest have a reference to a Jobcard,
   rendered as a hyperlink on the AnalysisRequest view.
 - A bug has been fixed where 'not_requested' analyses were checked
   on the AnalysisRequest edit form.
 - Enabled 'changed_state' folder button globally and disabled on
   AnalysisRequest and Jobcard.

1.0.1
-----

 - Updated 'skins/bika/date_components_support.py' with latest
   version of script in Plone 2.0.5
 - Modified access to transitions in workflow scripts, normal
   attribute access seems to guarded since Zope 2.7.5.
 - Added CHANGES.txt and README.txt
 - Added windows batch script for ID server
   (scripts/start-id-server.bat)

